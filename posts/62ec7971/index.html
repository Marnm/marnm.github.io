<!DOCTYPE html>
<html lang="en">

<head><meta name="generator" content="Hexo 3.8.0">
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	
	<!-- title -->
	
	<title>
	
		Atlas实现MySQL读写分离 | 
	 
	Deops&#39;s blog
	</title>
	
	<!-- keywords,description -->
	
		<meta name="keywords" content="Echo">
	 
		<meta name="description" content="Echo">
	

	<!-- favicon -->
	
	<link rel="shortcut icon" href="/favicon.ico">
	


	<!-- search -->
	<script>
		var searchEngine = "https://www.google.com/search?q=";
		if(typeof searchEngine == "undefined" || searchEngine == null || searchEngine == ""){
			searchEngine = "https://www.google.com/search?q=";
		}
		var homeHost = "https://marnm.github.io/";
		if(typeof homeHost == "undefined" || homeHost == null || homeHost == ""){
			homeHost = window.location.host;
		}
	</script>


	<link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="/lib/highlight/styles/base16/solarized-dark.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
    
    <!-- 引入代码高亮的 js -->
    <script src="/lib/highlight/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

	<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

	<script src="https://cdn.jsdelivr.net/npm/jquery-pjax@2.0.1/jquery.pjax.min.js"></script>
	<script src="/js/main.js"></script>
	
		<script src="https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/valine@v1.4.14/dist/Valine.min.js"></script>
	
	
</head>

<body>
	<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?3efe99c287df5a1d6f0d02d187e403c1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<header id="header">
    <a id="title" href="/" class="logo">Deops's blog</a>

	<ul id="menu">
		<li class="menu-item">
			<a href="/about" class="menu-item-link">ABOUT</a>
		</li>
	
		<li class="menu-item">
			<a href="/tags" class="menu-item-link">标签</a>
		</li>
	

	
		<li class="menu-item">
			<a href="/categories" class="menu-item-link">分类</a>
		</li>
	

		<li class="menu-item">
			<a href="https://github.com/Marnm" class="menu-item-link" target="_blank">
				<i class="fa fa-github fa-2x"></i>
			</a>
		</li>
	</ul>
</header>

	
<div id="sidebar">
	<button id="sidebar-toggle" class="toggle"><i class="fa fa-arrow-right " aria-hidden="true"></i></button>
	
	<div id="site-toc">
		<input id="search-input" class="search-input" type="search" placeholder="按回车全站搜索">
		<div id="tree">
			

			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Ansible自动化运维
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/b45e213f/">
                     
										    Ansible自动化管理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/28c30eb2/">
                     
										    CTF线下赛AWD套路小结
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Ceph对象存储
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/38843421/">
                     
										    Ceph分布式存储部署笔记
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e9abc941/">
                     
										    Ceph分布式存储
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/9964b559/">
                     
										    DHCP Server的配置与管理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/4782a8c2/">
                     
										    DNS Server的配置与管理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/5e357037/">
                     
										    Django教程
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Docker
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/4a3d459a/">
                     
										    Docker学习笔记
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										ELK Stack
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/2d95f1c1/">
                     
										    ElasticSearch环境搭建
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/573fc171/">
                     
										    Logstash二进制安装与启动
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/b11339a9/">
                     
										    Logstash去除不需要的字段
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/d05b44e0/">
                     
										    Logstash读取日志发送到ES
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/9d56e705/">
                     
										    FTP/TFTP的配置与管理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/ca9298d7/">
                     
										    Git版本控制
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/51acad32/">
                     
										    诺尔·巴尔扎克（Honoréde Balzac）的名言
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/4def9c28/">
                     
										    In Your 20's These Things Matter More Than You Think
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/295162d9/">
                     
										    Java8 环境变量配置
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										KVM虚拟化
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/dba5727f/">
                     
										    KVM图形化
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/204af86b/">
                     
										    KVM虚拟机克隆和快照
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/d69c6e72/">
                     
										    KVM虚拟机添加磁盘
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/16305c66/">
                     
										    KVM虚拟机迁移
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/7733d98/">
                     
										    LDAP的配置与管理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/5922577d/">
                     
										    LNMP手动部署
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/195423a2/">
                     
										    LNMP高可用架构配置
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/38cc96c8/">
                     
										    LVM磁盘管理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/be48d001/">
                     
										    LVS-DR集群
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/df68056c/">
                     
										    LVS-IPTUN集群
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/dcf8e277/">
                     
										    LVS-NAT集群
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/640aafef/">
                     
										    LVS和KeepAlived实现高可用集群
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/82734d8/">
                     
										    Linux命令
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/67ee4dec/">
                     
										    Linux学习笔记 - 关于开源
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/d53cba09/">
                     
										    Linux常用性能分析工具
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/15c0e66c/">
                     
										    Linux常见日志文件
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/480c215d/">
                     
										    Linux性能管理工具
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/a9bb0c1a/">
                     
										    Linux文件的特殊权限
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/cc999d74/">
                     
										    Linux文件的隐藏属性
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/b7f1c6/">
                     
										    Linux文本四剑客
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/aabbd398/">
                     
										    Linux无法挂载sysroot并自动进入紧急模式
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/b3f64b7d/">
                     
										    Linux生成随机密码方法
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e025952a/">
                     
										    Linux登录退出提示信息欢迎信息
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/ee2f9f35/">
                     
										    Linux的PAM模块
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/1e844aa4/">
                     
										    Linux的归档与解压缩
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/c4bbfe69/">
                     
										    Linux的日志切割
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/be846aea/">
                     
										    Linux禁止和开启ping的方法
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/f20e14fd/">
                     
										    Linux网卡聚合及bond模式的原理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/2fe5fc07/">
                     
										    Linux计划任务实现
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/365d0867/">
                     
										    Linux路由配置——route
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/fbf617b4/">
                     
										    MariaDB
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/bff83912/">
                     
										    Markdown 简明语法手册
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/5125c787/">
                     
										    Markdown语法说明（快速入门）
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										MongoDB
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/8b1c1f4b/">
                     
										    MongoDB介绍
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/a36562d7/">
                     
										    MongoDB学习笔记
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/55c06d78/">
                     
										    MongoDB安装部署
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										MySQL学习笔记
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/16fc5dc4/">
                     
										    MySQL5.6
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/61fb6d52/">
                     
										    MySQL5.7
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/bce68613/">
                     
										    MySQL基础
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/f6e2d114/">
                     
										    使用RPM包安装MySQL5.7数据库
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/269a56e8/">
                     
										    MySQL备份与恢复（删库不跑路）
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/607e4760/">
                     
										    MySQL传统主从同步
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/d77fafec/">
                     
										    MySQL的GTID主从同步
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/db0340bd/">
                     
										    MySQL高可用集群架构-MHA架构
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file active">
									<a href="/posts/62ec7971/">
                     
										    Atlas实现MySQL读写分离
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/490925f2/">
                     
										    MySQL数据库高级应用之读写分离
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/176dc5f3/">
                     
										    MyCat垂直分表操作
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/8f74b0e7/">
                     
										    MyCat教程全国省份分片枚举操作
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/208cd020/">
                     
										    MySQL调优
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/1876d05d/">
                     
										    NetworkManager管理工具
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/60444925/">
                     
										    NexT主题优化+美化
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Nginx学习笔记
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/f4d30967/">
                     
										    Nginx动静分离部署
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/1db2b3f1/">
                     
										    Nginx平滑升级
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/2793eb31/">
                     
										    Nginx日志管理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/2793eb31/">
                     
										    Nginx日志管理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e0989926/">
                     
										    Nginx添加第三方模块
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/da411b72/">
                     
										    Nginx虚拟主机
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/d4e5e907/">
                     
										    Nginx访问控制
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/d2802762/">
                     
										    Nginx高可用架构配置
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/36ba38f9/">
                     
										    NoSQL知识
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e8c4eb08/">
                     
										    OpenSSL使用教程
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/97717e94/">
                     
										    PXE自动化部署
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Prometheus学习笔记
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/39c0f6a1/">
                     
										    Prometheus学习笔记
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/1f351894/">
                     
										    Python-VirtualEnv
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/297a89d9/">
                     
										    Python学习笔记
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/fa8e89f7/">
                     
										    RAID磁盘阵列技术介绍
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/afdfa673/">
                     
										    RHEL 7配置Yum软件仓库
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/32546aed/">
                     
										    RedHat Linux重置root管理员密码
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/eb7dbe25/">
                     
										    RedHat_7 配置网卡信息
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Redis学习笔记
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/5188e636/">
                     
										    Redis与其他应用的集成
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/49fbbc1/">
                     
										    Redis基本操作
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e8376589/">
                     
										    Redis安装部署——Cluster集群
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e78aaf59/">
                     
										    Redis安装部署——Sentinel模式
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/2acd829b/">
                     
										    Redis安装部署——主从复制
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/119ed1dc/">
                     
										    Redis持久化
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/18d7d749/">
                     
										    Redis概述
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e3fb0a3e/">
                     
										    Redis的数据备份与恢复
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/3e3d973e/">
                     
										    Redis配合MySQL使用
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/f03da4e7/">
                     
										    Redis配置文件详解
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/41f893fd/">
                     
										    Redis编译安装
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/dbd9d26a/">
                     
										    SHELL编程类面试题
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/f42b90f9/">
                     
										    SHELL脚本工具
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/8a8ba1e/">
                     
										    SHELL脚本练习
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/c45f2736/">
                     
										    SQL Server 2008安装配置
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/aa142b64/">
                     
										    SQLite安装
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e228b71f/">
                     
										    SSH原理与应用
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/1fdc29d2/">
                     
										    Shell的基本运算符
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/6309c3f8/">
                     
										    Shell编程
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e76ba468/">
                     
										    Ubuntu Desktop优化与配置
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/129acd64/">
                     
										    Ubuntu修改配置及美化
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/b382711f/">
                     
										    VIM的使用
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e9c6771b/">
                     
										    Win10环境下Python2、3和pip2、3版本共存
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/6ed6984b/">
                     
										    Windows进程管理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/59089347/">
                     
										    Zabbix3.4邮件报警配置
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/7034657d/">
                     
										    Zabbix4.0
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/c7b4ec91/">
                     
										    firewalld学习笔记
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/1ebd4a76/">
                     
										    iproute2工具包
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/57bbf635/">
                     
										    iptables学习笔记
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/3e189d0c/">
                     
										    mysqlclient无法安装的问题
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/1939d3e2/">
                     
										    net-tools工具
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/bae5d4f0/">
                     
										    rhel修改网卡命名规则
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/3c7a2415/">
                     
										    rsync数据同步
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/37ca92de/">
                     
										    swap交换分区
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/6efb91e0/">
                     
										    tcpdump与Wireshark的使用
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/d185f6ae/">
                     
										    web性能压测学习
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/bb750036/">
                     
										    你要懂得及时止损，别太在乎沉没成本
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/da58b03e/">
                     
										    使用HAProxy实现七层负载均衡
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/b161a250/">
                     
										    使用服务搭建Hexo个人博客
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										其它
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/9bf5b5/">
                     
										    我学练英语所使用的方法、工具与资料
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/4c41c7ef/">
                     
										    十二句经典的爱情名言
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e364486e/">
                     
										    基于Docker搭建Prometheus
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/69c239dd/">
                     
										    基于LNMP架构搭建企业级开源监控系统Zabbix
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/f801d3c5/">
                     
										    增加一台Filebeat收集httpd日志
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/f5d6f6a9/">
                     
										    实战-GitLab更新代码后自动触发Jenkins进行部署
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/fa35a60d/">
                     
										    性能测试指标详解
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/8a3c5d26/">
                     
										    搭建Jenkins实现持续集成-配置Jenkins自动拉取GitLab中的代码
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/4f96852/">
                     
										    搭建JumpServer管理王者荣耀数万台游戏服务器
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/f0a65eeb/">
                     
										    根分区扩容
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/2f57a694/">
                     
										    正则表达式
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/9e3f6743/">
                     
										    自由的灵魂必将远航
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/217dc297/">
                     
										    计算机概述
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/8d4b7ae1/">
                     
										    计算机组成原理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/dded0e80/">
                     
										    运维发展史
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/undefined/">
                     
										    邮件报警配置
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/5095a46f/">
                     
										    配置Docker静态IP
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/2b923a54/">
                     
										    配置GitLab邮件服务
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/76011417/">
                     
										    配置Zabbix3.4监控Apache服务
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
		</div>
	</div>
</div>

	<!-- 引入正文 -->
	<div id="content">
		<h1 id="article-title">
	Atlas实现MySQL读写分离
</h1>
<div class="article-meta">
	
	<span>Echo</span>
	<span>2022-06-07 12:45:45</span>
		<div id="article-categories">
    
		<span>Categories：</span>
            
    

    
		<span>Tags：</span>
            
    
		</div>

</div>

<div id="article-content">
	<h2 id="MySQL-Atlas-&#x2014;-&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x5B9E;&#x6218;"><a href="#MySQL-Atlas-&#x2014;-&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x5B9E;&#x6218;" class="headerlink" title="MySQL + Atlas &#x2014; &#x8BFB;&#x5199;&#x5206;&#x79BB;&#x5B9E;&#x6218;"></a>MySQL + Atlas &#x2014; &#x8BFB;&#x5199;&#x5206;&#x79BB;&#x5B9E;&#x6218;</h2><ol>
<li>&#x6570;&#x636E;&#x5E93;&#x7528;&#x6237;&#x914D;&#x7F6E;</li>
<li>&#x4E3B;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x914D;&#x7F6E;</li>
<li>Atlas&#x914D;&#x7F6E;</li>
<li>&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x6D4B;&#x8BD5;</li>
</ol>
<p><strong>&#x5E8F;&#x7AE0;</strong><br>Atlas&#x662F;360&#x56E2;&#x961F;&#x5F04;&#x51FA;&#x6765;&#x7684;&#x4E00;&#x5957;&#x57FA;&#x4E8E;MySQL-Proxy&#x57FA;&#x7840;&#x4E4B;&#x4E0A;&#x7684;&#x4EE3;&#x7406;&#xFF0C;&#x4FEE;&#x6539;&#x4E86;MySQL-Proxy&#x7684;&#x4E00;&#x4E9B;BUG&#xFF0C;&#x5E76;&#x4E14;&#x4F18;&#x5316;&#x4E86;&#x5F88;&#x591A;&#x4E1C;&#x897F;&#x3002;&#x800C;&#x4E14;&#x5B89;&#x88C5;&#x65B9;&#x4FBF;&#x3002;&#x914D;&#x7F6E;&#x7684;&#x6CE8;&#x91CA;&#x5F88;&#x8BE6;&#x7EC6;&#xFF0C;&#x90FD;&#x662F;&#x4E2D;&#x6587;&#x3002;&#x82F1;&#x6587;&#x4E0D;&#x597D;&#x7684;&#x540C;&#x5B66;&#x6709;&#x798F;&#x4E86;&#x3002;<br>Atlas&#x5B98;&#x65B9;&#x94FE;&#x63A5;&#xFF1A; <a href="https://github.com/Qihoo360/Atlas/blob/master/README_ZH.md" target="_blank" rel="noopener">https://github.com/Qihoo360/Atlas/blob/master/README_ZH.md</a><br>Atlas&#x4E0B;&#x8F7D;&#x94FE;&#x63A5;&#xFF1A; <a href="https://github.com/Qihoo360/Atlas/releases" target="_blank" rel="noopener">https://github.com/Qihoo360/Atlas/releases</a>  </p>
<p>&#x73AF;&#x5883;&#xFF1A;</p>
<table>
<thead>
<tr>
<th>&#x7CFB;&#x7EDF;</th>
<th>IP</th>
<th>&#x89D2;&#x8272;</th>
</tr>
</thead>
<tbody>
<tr>
<td>CentOS7.4</td>
<td>192.168.73.20</td>
<td>Atlas&#x4EE3;&#x7406;&#x670D;&#x52A1;</td>
</tr>
<tr>
<td>RHEL 7.3</td>
<td>192.168.73.21</td>
<td>MySQL_Master</td>
</tr>
<tr>
<td>RHEL 7.3</td>
<td>192.168.73.22</td>
<td>MySQL_Slave</td>
</tr>
</tbody>
</table>
<p><strong>&#x6CE8;&#x610F;&#xFF1A;</strong>&#x4E09;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x90FD;&#x8981;&#x5B89;&#x88C5;MySQL&#x6570;&#x636E;&#xFF01;</p>
<h2 id="MySQL-Master"><a href="#MySQL-Master" class="headerlink" title="MySQL Master"></a>MySQL Master</h2><pre><code class="ini">[mysqld]
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock

symbolic-links=0

log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid

bind-address    = 0.0.0.0

user=mysql

innodb_flush_log_at_trx_commit=1
sync_binlog=1
log-bin=mysql-bin
server-id=1
binlog-do-db=testdb
binlog-ignore-db=mysql
skip-name-resolve

general_log=ON
general_log_file= /var/lib/mysql/rhel_sqlsrv.log
</code></pre>
<pre><code class="sql">CREATE DATABASE testdb DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;

mysql&gt; grant replication slave on *.* to root@&apos;%&apos; identified by &apos;ccc.456&apos;;
Query OK, 0 rows affected, 1 warning (0.01 sec)

mysql&gt; select user,host from mysql.user;
+---------------+--------------+
| user          | host         |
+---------------+--------------+
| root          | %            |
| slave         | 192.168.73.% |
| mysql.session | localhost    |
| mysql.sys     | localhost    |
| root          | localhost    |
+---------------+--------------+
5 rows in set (0.00 sec)

mysql&gt;

mysql&gt; show master status;
+------------------+----------+--------------+------------------+-------------------+
| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |
+------------------+----------+--------------+------------------+-------------------+
| mysql-bin.000003 |     1605 | testdb       | mysql            |                   |
+------------------+----------+--------------+------------------+-------------------+
1 row in set (0.00 sec)

mysql&gt;
</code></pre>
<pre><code class="shell">[root@rhel7 ~]&amp; mysqldump -uroot -p -B testdb &gt; testdb.sql
Enter password:
[root@rhel7 ~]&amp; ls
anaconda-ks.cfg  ha.sql  mysql_master_ha  rpm_mysql5.7  testdb.sql
[root@rhel7 ~]&amp; scp testdb.sql root@192.168.73.22:~
testdb.sql                                                 100% 2126     2.1KB/s   00:00
[root@rhel7 ~]&amp;
</code></pre>
<h2 id="MySQL-Slave"><a href="#MySQL-Slave" class="headerlink" title="MySQL Slave"></a>MySQL Slave</h2><pre><code class="ini">[mysqld]
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock

symbolic-links=0

log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid

bind-address    = 0.0.0.0

log-bin=mysql-slave2
server-id=3
binlog-ignore-db=mysql
log_slave_updates=1
skip-name-resolve
general_log=ON
general_log_file=/var/lib/mysql/rhel_sqlsrv.log
</code></pre>
<pre><code class="sql">mysql&gt; change master to master_host=&apos;192.168.73.21&apos;, master_user=&apos;root&apos;,master_password=&apos;ccc.456&apos;,master_port=3306,master_log_file=&apos;mysql-bin.000003&apos;,master_log_pos=1605,master_connect_retry=10;
Query OK, 0 rows affected, 2 warnings (0.00 sec)

mysql&gt; start slave;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; show slave status\G
*************************** 1. row ***************************
               Slave_IO_State: Waiting for master to send event
                  Master_Host: 192.168.73.21
                  Master_User: root
                  Master_Port: 3306
                Connect_Retry: 10
              Master_Log_File: mysql-bin.000003
          Read_Master_Log_Pos: 1605
               Relay_Log_File: rhel_sqlsrv-relay-bin.000002
                Relay_Log_Pos: 320
        Relay_Master_Log_File: mysql-bin.000003
             Slave_IO_Running: Yes
            Slave_SQL_Running: Yes
              Replicate_Do_DB:
.........................................&#x7701;&#x7565;...................................................................
             Master_Server_Id: 1
                  Master_UUID: 8f5a42da-cd2d-11ec-8c02-000c29f9275c
             Master_Info_File: /var/lib/mysql/master.info
                    SQL_Delay: 0
          SQL_Remaining_Delay: NULL
      Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates
           Master_Retry_Count: 86400
                  Master_Bind:
.........................................&#x7701;&#x7565;...................................................................
1 row in set (0.00 sec)

mysql&gt;
</code></pre>
<pre><code class="shell">[root@rhel_sqlsrv ~]&amp; mysql -uroot -p &lt; testdb.sql
Enter password:
[root@rhel_sqlsrv ~]&amp;
</code></pre>
<h2 id="&#x6D4B;&#x8BD5;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;"><a href="#&#x6D4B;&#x8BD5;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;" class="headerlink" title="&#x6D4B;&#x8BD5;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;"></a>&#x6D4B;&#x8BD5;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;</h2><p><strong>Master</strong></p>
<pre><code class="sql">Database changed
mysql&gt; insert into book values(&apos;abc&apos;,123,456);
Query OK, 1 row affected (0.00 sec)

mysql&gt;
</code></pre>
<p><strong>Slave</strong></p>
<pre><code class="sql">mysql&gt; select * from book;
+-------------------------+-------+-------+
| name                    | price | pages |
+-------------------------+-------+-------+
| Linux                   |    30 |   666 |
| Cloud Computing         |    60 |   666 |
| Operation System        |    80 |   666 |
| Artificial Intelligence |   166 |   666 |
| Linux                   |    66 |   666 |
| Unix                    |    77 |   777 |
| abc                     |   123 |   456 |
+-------------------------+-------+-------+
7 rows in set (0.00 sec)

mysql&gt;
</code></pre>
<h2 id="Atlas&#x914D;&#x7F6E;"><a href="#Atlas&#x914D;&#x7F6E;" class="headerlink" title="Atlas&#x914D;&#x7F6E;"></a>Atlas&#x914D;&#x7F6E;</h2><p><strong>&#x5B89;&#x88C5;Atlas</strong></p>
<pre><code class="shell">[root@ctos7mini ~]&amp; rpm -ivh Atlas-2.2.1.el6.x86_64.rpm
Preparing...                          ################################# [100%]
Updating / installing...
   1:Atlas-2.2.1-1                    ################################# [100%]
[root@ctos7mini ~]&amp;
</code></pre>
<pre><code class="mbox">[root@ctos7mini ~]&amp; ll /usr/local/mysql-proxy/ -R
/usr/local/mysql-proxy/:
total 4
drwxr-xr-x. 2 root root   75 May  7 04:33 bin
drwxr-xr-x. 2 root root   22 May  7 04:33 conf
drwxr-xr-x. 3 root root 4096 May  7 04:33 lib
drwxr-xr-x. 2 root root    6 Dec 17  2014 log

/usr/local/mysql-proxy/bin:
total 44
-rwxr-xr-x. 1 root root  9696 Dec 17  2014 encrypt
-rwxr-xr-x. 1 root root 23564 Dec 17  2014 mysql-proxy
-rwxr-xr-x. 1 root root  1552 Dec 17  2014 mysql-proxyd
-rw-r--r--. 1 root root     6 Dec 17  2014 VERSION

/usr/local/mysql-proxy/conf:
total 4
-rw-r--r--. 1 root root 2810 Dec 17  2014 test.cnf

/usr/local/mysql-proxy/lib:
total 9812
-rwxr-xr-x. 1 root root  968655 Dec 17  2014 libevent-2.0.so.5
-rwxr-xr-x. 1 root root 3464668 Dec 17  2014 libglib-2.0.so.0
-rwxr-xr-x. 1 root root   35483 Dec 17  2014 libgmodule-2.0.so.0
-rwxr-xr-x. 1 root root    8656 Dec 17  2014 libgthread-2.0.so.0
-rwxr-xr-x. 1 root root 5021619 Dec 17  2014 libjemalloc.so.1
-rwxr-xr-x. 1 root root  172984 Dec 17  2014 liblua-5.1.so
-rwxr-xr-x. 1 root root   14735 Dec 17  2014 libmysql-chassis-glibext.so.0
-rwxr-xr-x. 1 root root   73823 Dec 17  2014 libmysql-chassis.so.0
-rwxr-xr-x. 1 root root   14446 Dec 17  2014 libmysql-chassis-timing.so.0
-rwxr-xr-x. 1 root root  180107 Dec 17  2014 libmysql-proxy.so.0
-rwxr-xr-x. 1 root root   71566 Dec 17  2014 libsql-tokenizer.so.0
drwxr-xr-x. 4 root root      32 May  7 04:33 mysql-proxy

/usr/local/mysql-proxy/lib/mysql-proxy:
total 0
drwxr-xr-x. 3 root root 162 May  7 04:33 lua
drwxr-xr-x. 2 root root  44 May  7 04:33 plugins

/usr/local/mysql-proxy/lib/mysql-proxy/lua:
total 240
-rw-r--r--. 1 root root   9387 Dec 17  2014 admin.lua
-rwxr-xr-x. 1 root root  15966 Dec 17  2014 chassis.so
-rwxr-xr-x. 1 root root   8988 Dec 17  2014 crc32.so
-rwxr-xr-x. 1 root root   9416 Dec 17  2014 glib2.so
-rwxr-xr-x. 1 root root  18323 Dec 17  2014 lfs.so
-rwxr-xr-x. 1 root root  43879 Dec 17  2014 lpeg.so
-rwxr-xr-x. 1 root root 102944 Dec 17  2014 mysql.so
-rwxr-xr-x. 1 root root   9248 Dec 17  2014 posix.so
drwxr-xr-x. 2 root root    243 May  7 04:33 proxy
-rwxr-xr-x. 1 root root   6626 Dec 17  2014 time.so

/usr/local/mysql-proxy/lib/mysql-proxy/lua/proxy:
total 80
-rw-r--r--. 1 root root   536 Dec 17  2014 auth.lua
-rw-r--r--. 1 root root  6670 Dec 17  2014 auto-config.lua
-rw-r--r--. 1 root root  2807 Dec 17  2014 balance.lua
-rw-r--r--. 1 root root  2873 Dec 17  2014 charset.lua
-rw-r--r--. 1 root root  3477 Dec 17  2014 commands.lua
-rw-r--r--. 1 root root   238 Dec 17  2014 crc32.lua
-rw-r--r--. 1 root root  1906 Dec 17  2014 filter.lua
-rw-r--r--. 1 root root  2706 Dec 17  2014 log.lua
-rw-r--r--. 1 root root  6105 Dec 17  2014 parser.lua
-rw-r--r--. 1 root root 14816 Dec 17  2014 split.lua
-rw-r--r--. 1 root root  6366 Dec 17  2014 test.lua
-rw-r--r--. 1 root root   106 Dec 17  2014 ticker.lua
-rw-r--r--. 1 root root  6215 Dec 17  2014 tokenizer.lua


#&#x65E5;&#x5FD7;&#x7EA7;&#x522B;&#xFF0C;&#x5206;&#x4E3A;message&#x3001;warning&#x3001;critical&#x3001;error&#x3001;debug&#x4E94;&#x4E2A;&#x7EA7;&#x522B;
/usr/local/mysql-proxy/lib/mysql-proxy/plugins:
total 4920
-rwxr-xr-x. 1 root root   21134 Dec 17  2014 libadmin.so
-rwxr-xr-x. 1 root root 5011799 Dec 17  2014 libproxy.so

/usr/local/mysql-proxy/log:
total 0
</code></pre>
<p><strong>bin&#x76EE;&#x5F55;&#x4E0B;&#x653E;&#x7684;&#x90FD;&#x662F;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;</strong></p>
<ol>
<li>&#x201C;encrypt&#x201D;&#x662F;&#x7528;&#x6765;&#x5BF9;MySQL&#x5BC6;&#x7801;&#x8FDB;&#x884C;&#x52A0;&#x5BC6;&#x7684;&#xFF0C;&#x5728;&#x914D;&#x7F6E;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x7528;&#x5230;</li>
<li>&#x201C;mysql-proxy&#x201D;&#x662F;MySQL&#x81EA;&#x5DF1;&#x7684;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x4EE3;&#x7406;</li>
<li>&#x201C;mysql-proxyd&#x201D;&#x662F;360&#x5F04;&#x51FA;&#x6765;&#x7684;&#xFF0C;&#x540E;&#x9762;&#x6709;&#x4E2A;&#x201C;d&#x201D;&#xFF0C;&#x670D;&#x52A1;&#x7684;&#x542F;&#x52A8;&#x3001;&#x91CD;&#x542F;&#x3001;&#x505C;&#x6B62;&#xFF0C;&#x90FD;&#x662F;&#x7528;&#x4ED6;&#x6765;&#x6267;&#x884C;&#x7684;</li>
</ol>
<p><strong>conf&#x76EE;&#x5F55;&#x4E0B;&#x653E;&#x7684;&#x662F;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</strong></p>
<ol>
<li>&#x201C;test.cnf&#x201D;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x7528;&#x6765;&#x914D;&#x7F6E;&#x4EE3;&#x7406;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;vim&#x6765;&#x7F16;&#x8F91;</li>
<li>lib&#x76EE;&#x5F55;&#x4E0B;&#x653E;&#x7684;&#x662F;&#x4E00;&#x4E9B;&#x5305;&#xFF0C;&#x4EE5;&#x53CA;Atlas&#x7684;&#x4F9D;&#x8D56;</li>
<li>log&#x76EE;&#x5F55;&#x4E0B;&#x653E;&#x7684;&#x662F;&#x65E5;&#x5FD7;&#xFF0C;&#x5982;&#x62A5;&#x9519;&#x7B49;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x7684;&#x8BB0;&#x5F55;</li>
</ol>
<p>&#x8FDB;&#x5165;bin&#x76EE;&#x5F55;&#xFF0C;&#x4F7F;&#x7528;encrypt&#x6765;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5BC6;&#x7801;&#x8FDB;&#x884C;&#x52A0;&#x5BC6;&#xFF0C;&#x6211;&#x7684;MySQL&#x6570;&#x636E;&#x7684;&#x7528;&#x6237;&#x540D;&#x662F;root&#xFF0C;&#x5BC6;&#x7801;&#x662F;123456&#xFF0C;&#x6211;&#x9700;&#x8981;&#x5BF9;&#x5BC6;&#x7801;&#x8FDB;&#x884C;&#x52A0;&#x5BC6;</p>
<pre><code class="shell">[root@ctos7mini ~]&amp; cd /usr/local/mysql-proxy/
[root@ctos7mini mysql-proxy]&amp; ./bin/encrypt 123456
/iZxz+0GRoA=

</code></pre>
<p><strong>&#x914D;&#x7F6E;Atlas&#xFF0C;&#x4F7F;&#x7528;vim&#x8FDB;&#x884C;&#x7F16;&#x8F91;</strong></p>
<pre><code class="shell">[root@ctos7mini ~]&amp; cat /usr/local/mysql-proxy/conf/test.cnf
[mysql-proxy]

#&#x5E26;#&#x53F7;&#x7684;&#x4E3A;&#x975E;&#x5FC5;&#x9700;&#x7684;&#x914D;&#x7F6E;&#x9879;&#x76EE;

#&#x7BA1;&#x7406;&#x63A5;&#x53E3;&#x7684;&#x7528;&#x6237;&#x540D;
admin-username = root

#&#x7BA1;&#x7406;&#x63A5;&#x53E3;&#x7684;&#x5BC6;&#x7801;
admin-password = pwd

#Atlas&#x540E;&#x7AEF;&#x8FDE;&#x63A5;&#x7684;MySQL&#x4E3B;&#x5E93;&#x7684;IP&#x548C;&#x7AEF;&#x53E3;&#xFF0C;&#x53EF;&#x8BBE;&#x7F6E;&#x591A;&#x9879;&#xFF0C;&#x7528;&#x9017;&#x53F7;&#x5206;&#x9694;
proxy-backend-addresses = 192.168.73.21:3306

#Atlas&#x540E;&#x7AEF;&#x8FDE;&#x63A5;&#x7684;MySQL&#x4ECE;&#x5E93;&#x7684;IP&#x548C;&#x7AEF;&#x53E3;&#xFF0C;@&#x540E;&#x9762;&#x7684;&#x6570;&#x5B57;&#x4EE3;&#x8868;&#x6743;&#x91CD;&#xFF0C;&#x7528;&#x6765;&#x4F5C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF0C;&#x82E5;&#x7701;&#x7565;&#x5219;&#x9ED8;&#x8BA4;&#x4E3A;1&#xFF0C;&#x53EF;&#x8BBE;&#x7F6E;&#x591A;&#x9879;&#xFF0C;&#x7528;&#x9017;&#x53F7;&#x5206;&#x9694;
proxy-read-only-backend-addresses = 192.168.73.22:3306@1

#&#x7528;&#x6237;&#x540D;&#x4E0E;&#x5176;&#x5BF9;&#x5E94;&#x7684;&#x52A0;&#x5BC6;&#x8FC7;&#x7684;MySQL&#x5BC6;&#x7801;&#xFF0C;&#x5BC6;&#x7801;&#x4F7F;&#x7528;PREFIX/bin&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x52A0;&#x5BC6;&#x7A0B;&#x5E8F;encrypt&#x52A0;&#x5BC6;&#xFF0C;&#x4E0B;&#x884C;&#x7684;user1&#x548C;user2&#x4E3A;&#x793A;&#x4F8B;&#xFF0C;&#x5C06;&#x5176;&#x66FF;&#x6362;&#x4E3A;&#x4F60;&#x7684;MySQL&#x7684;&#x7528;&#x6237;&#x540D;&#x548C;&#x52A0;&#x5BC6;&#x5BC6;&#x7801;&#xFF01;
pwds = root:/iZxz+0GRoA=

#&#x8BBE;&#x7F6E;Atlas&#x7684;&#x8FD0;&#x884C;&#x65B9;&#x5F0F;&#xFF0C;&#x8BBE;&#x4E3A;true&#x65F6;&#x4E3A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x65B9;&#x5F0F;&#xFF0C;&#x8BBE;&#x4E3A;false&#x65F6;&#x4E3A;&#x524D;&#x53F0;&#x65B9;&#x5F0F;&#xFF0C;&#x4E00;&#x822C;&#x5F00;&#x53D1;&#x8C03;&#x8BD5;&#x65F6;&#x8BBE;&#x4E3A;false&#xFF0C;&#x7EBF;&#x4E0A;&#x8FD0;&#x884C;&#x65F6;&#x8BBE;&#x4E3A;true,true&#x540E;&#x9762;&#x4E0D;&#x80FD;&#x6709;&#x7A7A;&#x683C;&#x3002;
daemon = true

#&#x8BBE;&#x7F6E;Atlas&#x7684;&#x8FD0;&#x884C;&#x65B9;&#x5F0F;&#xFF0C;&#x8BBE;&#x4E3A;true&#x65F6;Atlas&#x4F1A;&#x542F;&#x52A8;&#x4E24;&#x4E2A;&#x8FDB;&#x7A0B;&#xFF0C;&#x4E00;&#x4E2A;&#x4E3A;monitor&#xFF0C;&#x4E00;&#x4E2A;&#x4E3A;worker&#xFF0C;monitor&#x5728;worker&#x610F;&#x5916;&#x9000;&#x51FA;&#x540E;&#x4F1A;&#x81EA;&#x52A8;&#x5C06;&#x5176;&#x91CD;&#x542F;&#xFF0C;&#x8BBE;&#x4E3A;false&#x65F6;&#x53EA;&#x6709;worker&#xFF0C;&#x6CA1;&#x6709;monitor&#xFF0C;&#x4E00;&#x822C;&#x5F00;&#x53D1;&#x8C03;&#x8BD5;&#x65F6;&#x8BBE;&#x4E3A;false&#xFF0C;&#x7EBF;&#x4E0A;&#x8FD0;&#x884C;&#x65F6;&#x8BBE;&#x4E3A;true,true&#x540E;&#x9762;&#x4E0D;&#x80FD;&#x6709;&#x7A7A;&#x683C;&#x3002;
keepalive = true

#&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x6570;&#xFF0C;&#x5BF9;Atlas&#x7684;&#x6027;&#x80FD;&#x6709;&#x5F88;&#x5927;&#x5F71;&#x54CD;&#xFF0C;&#x53EF;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x9002;&#x5F53;&#x8BBE;&#x7F6E;
event-threads = 8

#&#x65E5;&#x5FD7;&#x7EA7;&#x522B;&#xFF0C;&#x5206;&#x4E3A;message&#x3001;warning&#x3001;critical&#x3001;error&#x3001;debug&#x4E94;&#x4E2A;&#x7EA7;&#x522B;
log-level = message

#&#x65E5;&#x5FD7;&#x5B58;&#x653E;&#x7684;&#x8DEF;&#x5F84;
log-path = /usr/local/mysql-proxy/log

#SQL&#x65E5;&#x5FD7;&#x7684;&#x5F00;&#x5173;&#xFF0C;&#x53EF;&#x8BBE;&#x7F6E;&#x4E3A;OFF&#x3001;ON&#x3001;REALTIME&#xFF0C;OFF&#x4EE3;&#x8868;&#x4E0D;&#x8BB0;&#x5F55;SQL&#x65E5;&#x5FD7;&#xFF0C;ON&#x4EE3;&#x8868;&#x8BB0;&#x5F55;SQL&#x65E5;&#x5FD7;&#xFF0C;REALTIME &#x4EE3;&#x8868;&#x8BB0;&#x5F55;SQL&#x65E5;&#x5FD7;&#x4E14;&#x5B9E;&#x65F6;&#x5199;&#x5165;&#x78C1;&#x76D8;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;OFF
#sql-log = OFF

#&#x6162;&#x65E5;&#x5FD7;&#x8F93;&#x51FA;&#x8BBE;&#x7F6E;&#x3002;&#x5F53;&#x8BBE;&#x7F6E;&#x4E86;&#x8BE5;&#x53C2;&#x6570;&#x65F6;&#xFF0C;&#x5219;&#x65E5;&#x5FD7;&#x53EA;&#x8F93;&#x51FA;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x8D85;&#x8FC7;sql-log-slow&#xFF08;&#x5355;&#x4F4D;&#xFF1A;ms)&#x7684;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55; &#x3002;&#x4E0D;&#x8BBE;&#x7F6E;&#x8BE5;&#x53C2;&#x6570;&#x5219;&#x8F93;&#x51FA;&#x5168;&#x90E8;&#x65E5;&#x5FD7;&#x3002;
#sql-log-slow = 10

#&#x5B9E;&#x4F8B;&#x540D;&#x79F0;&#xFF0C;&#x7528;&#x4E8E;&#x540C;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#x591A;&#x4E2A;Atlas&#x5B9E;&#x4F8B;&#x95F4;&#x7684;&#x533A;&#x5206;
#instance = test

#Atlas&#x76D1;&#x542C;&#x7684;&#x5DE5;&#x4F5C;&#x63A5;&#x53E3;IP&#x548C;&#x7AEF;&#x53E3;
proxy-address = 0.0.0.0:1234

#Atlas&#x76D1;&#x542C;&#x7684;&#x7BA1;&#x7406;&#x63A5;&#x53E3;IP&#x548C;&#x7AEF;&#x53E3;
admin-address = 0.0.0.0:2345

#&#x5206;&#x8868;&#x8BBE;&#x7F6E;&#xFF0C;&#x6B64;&#x4F8B;&#x4E2D;person&#x4E3A;&#x5E93;&#x540D;&#xFF0C;mt&#x4E3A;&#x8868;&#x540D;&#xFF0C;id&#x4E3A;&#x5206;&#x8868;&#x5B57;&#x6BB5;&#xFF0C;3&#x4E3A;&#x5B50;&#x8868;&#x6570;&#x91CF;&#xFF0C;&#x53EF;&#x8BBE;&#x7F6E;&#x591A;&#x9879;&#xFF0C;&#x4EE5;&#x9017;&#x53F7;&#x5206;&#x9694;&#xFF0C; &#x82E5;&#x4E0D;&#x5206;&#x8868;&#x5219;&#x4E0D;&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x8BE5;&#x9879;
#tables = person.mt.id.3

#&#x9ED8;&#x8BA4;&#x5B57;&#x7B26;&#x96C6;&#xFF0C;&#x8BBE;&#x7F6E;&#x8BE5;&#x9879;&#x540E;&#x5BA2;&#x6237;&#x7AEF;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x6267;&#x884C;SET NAMES&#x8BED;&#x53E5;
#charset = utf8

#&#x5141;&#x8BB8;&#x8FDE;&#x63A5;Atlas&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x7684;IP&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x7CBE;&#x786E;IP&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;IP&#x6BB5;&#xFF0C;&#x4EE5;&#x9017;&#x53F7;&#x5206;&#x9694;&#xFF0C;&#x82E5;&#x4E0D;&#x8BBE;&#x7F6E;&#x8BE5;&#x9879;&#x5219;&#x5141;&#x8BB8;&#x6240;&#x6709;IP &#x8FDE;&#x63A5;&#xFF0C;&#x5426;&#x5219;&#x53EA;&#x5141;&#x8BB8;&#x5217;&#x8868;&#x4E2D;&#x7684;IP&#x8FDE;&#x63A5;
#client-ips = 127.0.0.1, 192.168.1

#Atlas&#x524D;&#x9762;&#x6302;&#x63A5;&#x7684;LVS&#x7684;&#x7269;&#x7406;&#x7F51;&#x5361;&#x7684;IP(&#x6CE8;&#x610F;&#x4E0D;&#x662F;&#x865A;IP)&#xFF0C;&#x82E5;&#x6709;LVS&#x4E14;&#x8BBE;&#x7F6E;&#x4E86;client-ips&#x5219;&#x6B64;&#x9879;&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#xFF0C;&#x5426; &#x5219;&#x53EF;&#x4EE5;&#x4E0D;&#x8BBE;&#x7F6E;
#lvs-ips = 192.168.1.1
[root@ctos7mini ~]&amp;
</code></pre>
<p><strong>&#x542F;&#x52A8;Atlas</strong></p>
<pre><code class="shell">[root@ctos7mini bin]&amp; cd /usr/local/mysql-proxy/bin/
[root@ctos7mini bin]&amp; ./mysql-proxyd test status
MySQL-Proxy of test is NOT running
[root@ctos7mini bin]&amp; ./mysql-proxyd test start
OK: MySQL-Proxy of test is started
[root@ctos7mini bin]&amp; ./mysql-proxyd test status
MySQL-Proxy of test is running (13844)
MySQL-Proxy of test is running (13846)
[root@ctos7mini bin]&amp; systemctl stop mysqld
</code></pre>
<pre><code class="sql">[root@ctos7mini bin]&amp; mysql -h127.0.0.1 -uroot -P2345 -uroot -ppwd
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 1
Server version: 5.0.99-agent-admin

Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.

mysql&gt; show databases;
ERROR 1105 (07000): use &apos;SELECT * FROM help&apos; to see the supported commands
mysql&gt; show databases;
ERROR 1105 (07000): use &apos;SELECT * FROM help&apos; to see the supported commands
mysql&gt; help

For information about MySQL products and services, visit:
   http://www.mysql.com/
For developer information, including the MySQL Reference Manual, visit:
   http://dev.mysql.com/
To buy MySQL Enterprise support, training, or other products, visit:
   https://shop.mysql.com/

List of all MySQL commands:
Note that all text commands must be first on line and end with &apos;;&apos;
?         (\?) Synonym for `help&apos;.
clear     (\c) Clear the current input statement.
connect   (\r) Reconnect to the server. Optional arguments are db and host.
delimiter (\d) Set statement delimiter.
edit      (\e) Edit command with $EDITOR.
ego       (\G) Send command to mysql server, display result vertically.
exit      (\q) Exit mysql. Same as quit.
go        (\g) Send command to mysql server.
help      (\h) Display this help.
nopager   (\n) Disable pager, print to stdout.
notee     (\t) Don&apos;t write into outfile.
pager     (\P) Set PAGER [to_pager]. Print the query results via PAGER.
print     (\p) Print current command.
prompt    (\R) Change your mysql prompt.
quit      (\q) Quit mysql.
rehash    (\#) Rebuild completion hash.
source    (\.) Execute an SQL script file. Takes a file name as an argument.
status    (\s) Get status information from the server.
system    (\!) Execute a system shell command.
tee       (\T) Set outfile [to_outfile]. Append everything into given outfile.
use       (\u) Use another database. Takes database name as argument.
charset   (\C) Switch to another charset. Might be needed for processing binlog with multi-byte charsets.
warnings  (\W) Show warnings after every statement.
nowarning (\w) Don&apos;t show warnings after every statement.
resetconnection(\x) Clean session context.

For server side help, type &apos;help contents&apos;

mysql&gt; select * from help;
+----------------------------+---------------------------------------------------------+
| command                    | description                                             |
+----------------------------+---------------------------------------------------------+
| SELECT * FROM help         | shows this help                                         |
| SELECT * FROM backends     | lists the backends and their state                      |
| SET OFFLINE $backend_id    | offline backend server, $backend_id is backend_ndx&apos;s id |
| SET ONLINE $backend_id     | online backend server, ...                              |
| ADD MASTER $backend        | example: &quot;add master 127.0.0.1:3306&quot;, ...               |
| ADD SLAVE $backend         | example: &quot;add slave 127.0.0.1:3306&quot;, ...                |
| REMOVE BACKEND $backend_id | example: &quot;remove backend 1&quot;, ...                        |
| SELECT * FROM clients      | lists the clients                                       |
| ADD CLIENT $client         | example: &quot;add client 192.168.1.2&quot;, ...                  |
| REMOVE CLIENT $client      | example: &quot;remove client 192.168.1.2&quot;, ...               |
| SELECT * FROM pwds         | lists the pwds                                          |
| ADD PWD $pwd               | example: &quot;add pwd user:raw_password&quot;, ...               |
| ADD ENPWD $pwd             | example: &quot;add enpwd user:encrypted_password&quot;, ...       |
| REMOVE PWD $pwd            | example: &quot;remove pwd user&quot;, ...                         |
| SAVE CONFIG                | save the backends to config file                        |
| SELECT VERSION             | display the version of Atlas                            |
+----------------------------+---------------------------------------------------------+
16 rows in set (0.00 sec)

mysql&gt; ^DBye
</code></pre>
<pre><code class="sql">[root@ctos7mini bin]&amp; mysql -h127.0.0.1 -uroot -P1234 -uroot -pccc.456
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 2
Server version: 5.0.81-log MySQL Community Server (GPL)

Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| ha                 |
| mysql              |
| performance_schema |
| sys                |
| testdb             |
+--------------------+
6 rows in set (0.00 sec)

mysql&gt; ^DBye
[root@ctos7mini bin]&amp; mysql -h127.0.0.1 -uroot -P1234 -uroot -pccc.456
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 3
Server version: 5.0.81-log MySQL Community Server (GPL)

Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.

mysql&gt; ^DBye
[root@ctos7mini bin]&amp; mysql -h127.0.0.1 -uroot -P1234 -uroot -pccc.456
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 4
Server version: 5.0.81-log MySQL Community Server (GPL)

Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| ha                 |
| mysql              |
| performance_schema |
| sys                |
| testdb             |
+--------------------+
6 rows in set (0.00 sec)

mysql&gt; show variables like &quot;%general_log%&quot;;
+------------------+--------------------------------+
| Variable_name    | Value                          |
+------------------+--------------------------------+
| general_log      | OFF                            |
| general_log_file | /var/lib/mysql/rhel_sqlsrv.log |
+------------------+--------------------------------+
2 rows in set (0.00 sec)

mysql&gt; ^DBye
[root@ctos7mini bin]&amp; mysql -h127.0.0.1 -uroot -P1234 -uroot -pccc.456
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 5
Server version: 5.0.81-log MySQL Community Server (GPL)

Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.

mysql&gt; show variables like &quot;%general_log%&quot;;
+------------------+--------------------------------+
| Variable_name    | Value                          |
+------------------+--------------------------------+
| general_log      | OFF                            |
| general_log_file | /var/lib/mysql/rhel_sqlsrv.log |
+------------------+--------------------------------+
2 rows in set (0.01 sec)

mysql&gt; ^DBye
[root@ctos7mini bin]&amp; mysql -h127.0.0.1 -uroot -P2345 -uroot -pccc.456
mysql: [Warning] Using a password on the command line interface can be insecure.
ERROR 1045 (28000): password doesn&apos;t match
[root@ctos7mini bin]&amp; mysql -h127.0.0.1 -uroot -P1234 -uroot -ppwd
mysql: [Warning] Using a password on the command line interface can be insecure.
ERROR 1045 (28000): Access denied for user &apos;root&apos;@&apos;127.0.0.1:37884&apos; (using password: YES)
[root@ctos7mini bin]&amp; mysql -h127.0.0.1 -P2345 -uroot -ppwd
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 1
Server version: 5.0.99-agent-admin

Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.

mysql&gt; show databases;
ERROR 1105 (07000): use &apos;SELECT * FROM help&apos; to see the supported commands
mysql&gt; ^DBye
[root@ctos7mini bin]&amp; mysql -h127.0.0.1 -P1234 -uroot -pccc.456
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 7
Server version: 5.0.81-log MySQL Community Server (GPL)

Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| ha                 |
| mysql              |
| performance_schema |
| sys                |
| testdb             |
+--------------------+
6 rows in set (0.00 sec)

mysql&gt; ^DBye
</code></pre>
<h2 id="&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x6D4B;&#x8BD5;"><a href="#&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x6D4B;&#x8BD5;" class="headerlink" title="&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x6D4B;&#x8BD5;"></a>&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x6D4B;&#x8BD5;</h2><p><strong>&#x5728;MySQL&#x4E3B;&#x5E93;&#x548C;&#x4ECE;&#x5E93;&#x5F00;&#x542F;general_log&#x65E5;&#x5FD7;&#xFF0C;&#x6CE8;&#x610F;&#x4E3B;&#x5E93;&#x548C;&#x4ECE;&#x5E93;general_log&#x65E5;&#x5FD7;&#x540D;&#x79F0;&#x4E0D;&#x540C;&#xFF01;</strong></p>
<p>&#x4E34;&#x65F6;&#x751F;&#x6548;</p>
<pre><code class="sql">mysql&gt; show variables like &apos;%general_log%&apos;;
+------------------+--------------------------------+
| Variable_name    | Value                          |
+------------------+--------------------------------+
| general_log      | OFF                            |
| general_log_file | /var/lib/mysql/rhel_sqlsrv.log |
+------------------+--------------------------------+
2 rows in set (0.00 sec)

mysql&gt;
mysql&gt; set global general_log=ON;
Query OK, 0 rows affected (0.00 sec)
</code></pre>
<p>&#x6C38;&#x4E45;&#x751F;&#x6548;</p>
<pre><code class="shell">[root@rhel7 ~]&amp; echo &quot;general_log=ON&quot; &gt;&gt; /etc/my.cnf
[root@rhel7 ~]&amp; echo &quot;general_log_file=/var/lib/mysql/rhel.log&quot; &gt;&gt; /etc/my.cnf

[root@rhel_sqlsrv ~]&amp; echo &quot;general_log=ON&quot; &gt;&gt; /etc/my.cnf
[root@rhel_sqlsrv ~]&amp; echo &quot;general_log_file=/var/lib/mysql/rhel_sqlsrv.log&quot; &gt;&gt; /etc/my.cnf
[root@rhel_sqlsrv ~]&amp; systemctl restart mysqld
</code></pre>
<pre><code class="sql">mysql&gt; show variables like &quot;%general_log%&quot;;
+------------------+--------------------------+
| Variable_name    | Value                    |
+------------------+--------------------------+
| general_log      | ON                       |
| general_log_file | /var/lib/mysql/rhel7.log |
+------------------+--------------------------+
2 rows in set (0.00 sec)

mysql&gt; ^DBye
</code></pre>
<p><strong>&#x6E05;&#x7A7A;&#x6570;&#x636E;&#x5E93;&#x65E5;&#x5FD7;</strong>&#xFF1A;</p>
<pre><code class="shell">[root@rhel7 ~]&amp; echo &gt; /var/lib/mysql/rhel7.log

[root@rhel_sqlsrv ~]&amp; echo &gt; /var/lib/mysql/rhel_sqlsrv.log
</code></pre>
<p><strong>&#x6D4B;&#x8BD5;</strong>&#xFF1A;</p>
<p>Master&#xFF08;rw&#xFF09;:</p>
<pre><code class="shell">[root@rhel7 ~]&amp; tail -f /var/lib/mysql/rhel7.log
</code></pre>
<p>Slave&#xFF08;ro&#xFF09;:</p>
<pre><code class="shell">[root@rhel_sqlsrv ~]&amp; tail -f /var/lib/mysql/rhel_sqlsrv.log
</code></pre>
<p>Atlas:</p>
<pre><code class="sql">[root@ctos7mini mysql-proxy]# mysql -h127.0.0.1 -P1234 -uroot -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 9
Server version: 5.0.81-log MySQL Community Server (GPL)

Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.

mysql&gt;
</code></pre>
<p>ro:<br>slave&#x68C0;&#x6D4B;&#x5230;&#x8BFB;&#x64CD;&#x4F5C;</p>
<pre><code class="mbox">[root@rhel_sqlsrv ~]&amp; tail -f /var/lib/mysql/rhel_sqlsrv.log

2022-05-07T09:07:23.252345Z        13 Connect   root@192.168.73.20 on  using TCP/IP
2022-05-07T09:07:23.252973Z        13 Query     SET CHARACTER_SET_CONNECTION=utf8
2022-05-07T09:07:23.254053Z        13 Query     SET CHARACTER_SET_RESULTS=utf8
2022-05-07T09:07:23.258100Z        13 Query     SET CHARACTER_SET_CLIENT=utf8
2022-05-07T09:07:23.259321Z        13 Query     select @@version_comment limit 1

</code></pre>
<p>rw:</p>
<pre><code class="mbox">[root@rhel7 ~]# tail -f /var/lib/mysql/rhel7.log


</code></pre>
<p>&#x5728;Atlas&#x8FDB;&#x884C;&#x8BFB;&#x64CD;&#x4F5C;:</p>
<pre><code class="sql">mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| ha                 |
| mysql              |
| performance_schema |
| sys                |
| testdb             |
+--------------------+
6 rows in set (0.00 sec)

mysql&gt; use testdb
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql&gt; show tables;
+------------------+
| Tables_in_testdb |
+------------------+
| book             |
+------------------+
1 row in set (0.00 sec)

mysql&gt; select * from book;
+-------------------------+-------+-------+
| name                    | price | pages |
+-------------------------+-------+-------+
| Linux                   |    30 |   666 |
| Cloud Computing         |    60 |   666 |
| Operation System        |    80 |   666 |
| Artificial Intelligence |   166 |   666 |
| Linux                   |    66 |   666 |
| Unix                    |    77 |   777 |
| abc                     |   123 |   456 |
| def                     |    83 |   364 |
+-------------------------+-------+-------+
8 rows in set (0.01 sec)

mysql&gt;
</code></pre>
<p>Slave&#x68C0;&#x6D4B;&#x5230;&#x8BFB;&#x64CD;&#x4F5C;&#xFF1A;</p>
<pre><code class="mbox">[root@rhel_sqlsrv ~]# tail -f /var/lib/mysql/rhel_sqlsrv.log

2022-05-07T09:07:23.252345Z        13 Connect   root@192.168.73.20 on  using TCP/IP
2022-05-07T09:07:23.252973Z        13 Query     SET CHARACTER_SET_CONNECTION=utf8
2022-05-07T09:07:23.254053Z        13 Query     SET CHARACTER_SET_RESULTS=utf8
2022-05-07T09:07:23.258100Z        13 Query     SET CHARACTER_SET_CLIENT=utf8
2022-05-07T09:07:23.259321Z        13 Query     select @@version_comment limit 1
2022-05-07T09:13:04.634499Z        13 Query     show databases
2022-05-07T09:13:09.313174Z        13 Query     SELECT DATABASE()
2022-05-07T09:13:09.314061Z        13 Init DB   testdb
2022-05-07T09:13:09.316061Z        13 Init DB   testdb
2022-05-07T09:13:09.316710Z        13 Query     show databases
2022-05-07T09:13:09.317592Z        13 Init DB   testdb
2022-05-07T09:13:09.318360Z        13 Query     show tables
2022-05-07T09:13:09.319468Z        13 Init DB   testdb
2022-05-07T09:13:09.320217Z        13 Field List        book
2022-05-07T09:13:16.960823Z        13 Init DB   testdb
2022-05-07T09:13:16.962628Z        13 Query     show tables
2022-05-07T09:13:20.799873Z        13 Init DB   testdb
2022-05-07T09:13:20.800737Z        13 Query     select * from book

</code></pre>
<p>&#x5728;Atlas&#x8FDB;&#x884C;&#x5199;&#x64CD;&#x4F5C;&#xFF1A;</p>
<pre><code class="sql">mysql&gt; insert into book values(&apos;test&apos;, 67, 252);
Query OK, 1 row affected (0.01 sec)

mysql&gt;
</code></pre>
<p>Master&#x68C0;&#x6D4B;&#x5230;&#x5199;&#x64CD;&#x4F5C;&#xFF1A;</p>
<pre><code class="mbox">[root@rhel7 ~]# tail -f /var/lib/mysql/rhel7.log

2022-05-07T10:59:33.029685Z         4 Connect   root@192.168.73.20 on  using TCP/IP
2022-05-07T10:59:33.030609Z         4 Query     SET CHARACTER_SET_CONNECTION=utf8
2022-05-07T10:59:33.031735Z         4 Query     SET CHARACTER_SET_RESULTS=utf8
2022-05-07T10:59:33.032656Z         4 Query     SET CHARACTER_SET_CLIENT=utf8
2022-05-07T10:59:33.033919Z         4 Init DB   testdb
2022-05-07T10:59:33.035018Z         4 Query     insert into book values(&apos;test&apos;, 67, 252)

</code></pre>
<h2 id="&#x6545;&#x969C;&#x89E3;&#x51B3;"><a href="#&#x6545;&#x969C;&#x89E3;&#x51B3;" class="headerlink" title="&#x6545;&#x969C;&#x89E3;&#x51B3;"></a>&#x6545;&#x969C;&#x89E3;&#x51B3;</h2><p><strong>&#x6545;&#x969C;&#x4E00;</strong></p>
<p><strong>Atlas</strong>&#x8BBF;&#x95EE;&#x5DE5;&#x4F5C;&#x63A5;&#x53E3;&#x65F6;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x53EA;&#x6709;&#x4E00;&#x4E2A;<code>information_schema</code>&#xFF0C;&#x4E0D;&#x663E;&#x793A;&#x5176;&#x4ED6;&#x5E93;&#xFF1A;</p>
<pre><code class="mbox">[root@ctos7mini mysql-proxy]# mysql -h192.168.73.21 -uroot -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 13
Server version: 5.7.24-log MySQL Community Server (GPL)

Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
+--------------------+
1 row in set (0.00 sec)

mysql&gt; ^DBye
</code></pre>
<p>&#x6545;&#x969C;&#x5206;&#x6790;&#xFF1A;</p>
<ol>
<li><p>&#x4E3B;&#x4ECE;&#x4E0D;&#x540C;&#x6B65;&#xFF1A;<br>&#x67E5;&#x770B;Slave&#x7684;&#x72B6;&#x6001;&#xFF1A;</p>
<pre><code class="sql">mysql&gt; show slave status\G
*************************** 1. row ***************************
            Slave_IO_State: Connecting to master
               Master_Host: 192.168.73.21
               Master_User: root
               Master_Port: 3306
             Connect_Retry: 10
           Master_Log_File: mysql-bin.000005
       Read_Master_Log_Pos: 154
            Relay_Log_File: rhel_sqlsrv-relay-bin.000012
             Relay_Log_Pos: 4
     Relay_Master_Log_File: mysql-bin.000005
          Slave_IO_Running: Connecting
         Slave_SQL_Running: Yes
.........................................&#x7701;&#x7565;...................................................................
     Seconds_Behind_Master: NULL
Master_SSL_Verify_Server_Cert: No
             Last_IO_Errno: 2003
             Last_IO_Error: error connecting to master &apos;root@192.168.73.21:3306&apos; - retry-time: 10  retries: 1
.........................................&#x7701;&#x7565;...................................................................
1 row in set (0.00 sec)
</code></pre>
</li>
<li><p><code>Atlas</code>&#x6CA1;&#x6709;&#x8FDE;&#x63A5;&#x5230;&#x4E3B;&#x4ECE;<br>&#x8BBF;&#x95EE;Atlas&#x7BA1;&#x7406;&#x63A5;&#x53E3;&#x67E5;&#x770B;&#x4E3B;&#x4ECE;&#x670D;&#x52A1;&#x662F;&#x5426;&#x90FD;&#x5728;&#x7EBF;<br><code>`</code>sql<br>[root@ctos7mini mysql-proxy]# mysql -h127.0.0.1 -P2345 -uroot -ppwd<br>mysql: [Warning] Using a password on the command line interface can be insecure.<br>Welcome to the MySQL monitor.  Commands end with ; or \g.<br>Your MySQL connection id is 1<br>Server version: 5.0.99-agent-admin</p>
</li>
</ol>
<p>Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.</p>
<p>Oracle is a registered trademark of Oracle Corporation and/or its<br>affiliates. Other names may be trademarks of their respective<br>owners.</p>
<p>Type &#x2018;help;&#x2019; or &#x2018;\h&#x2019; for help. Type &#x2018;\c&#x2019; to clear the current input statement.</p>
<p>mysql&gt; select * from backends;<br>+&#x2014;&#x2014;&#x2014;&#x2014;-+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+&#x2014;&#x2014;-+&#x2014;&#x2014;+<br>| backend_ndx | address            | state | type |<br>+&#x2014;&#x2014;&#x2014;&#x2014;-+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+&#x2014;&#x2014;-+&#x2014;&#x2014;+<br>|           1 | 192.168.73.21:3306 | up    | rw   |<br>|           2 | 192.168.73.22:3306 | down  | ro   |<br>+&#x2014;&#x2014;&#x2014;&#x2014;-+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+&#x2014;&#x2014;-+&#x2014;&#x2014;+<br>2 rows in set (0.00 sec)</p>
<p>mysql&gt;</p>
<pre><code>&#x6839;&#x636E;&#x5B9E;&#x9645;&#x73AF;&#x5883;&#x68C0;&#x67E5;&#xFF0C;&#x4E3B;&#x4ECE;&#x662F;&#x5426;&#x540C;&#x6B65;&#xFF0C;MySQL&#x662F;&#x5426;&#x5141;&#x8BB8;&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x7AEF;&#x53E3;&#x662F;&#x5426;&#x5F00;&#x653E;&#x3002;

**&#x6545;&#x969C;&#x4E8C;&#xFF1A;**

&#x6570;&#x636E;&#x5E93;&#x80FD;&#x591F;&#x67E5;&#x8BE2;&#xFF0C;&#x4E0D;&#x80FD;&#x8FDB;&#x884C;&#x5199;&#x64CD;&#x4F5C;&#xFF1A;

```sql
mysql&gt; use testdb
Database changed
mysql&gt; select * from book;
+-------------------------+-------+-------+
| name                    | price | pages |
+-------------------------+-------+-------+
| Linux                   |    30 |   666 |
| Cloud Computing         |    60 |   666 |
| Operation System        |    80 |   666 |
| Artificial Intelligence |   166 |   666 |
| Linux                   |    66 |   666 |
| Unix                    |    77 |   777 |
| abc                     |   123 |   456 |
| def                     |    83 |   364 |
+-------------------------+-------+-------+
8 rows in set (0.00 sec)

mysql&gt; insert into `book` values(&apos;test&apos;,24,62);
ERROR 1046 (3D000): No database selected
mysql&gt;
</code></pre><p>Master&#x65E5;&#x5FD7;&#xFF1A;</p>
<pre><code class="mbox">2022-05-07T09:24:33.993274Z        17 Query     insert into `book` values(&apos;test&apos;,24,62)
2022-05-07T09:24:39.346670Z        17 Init DB   Access denied for user &apos;root&apos;@&apos;%&apos; to database &apos;testdb&apos;
</code></pre>
<blockquote>
<p>&#x91CD;&#x542F;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;</p>
</blockquote>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
</div>


    <div class="post-guide">
        <div class="item left">
            
              <a href="/posts/490925f2/">
                  <i class="fa fa-angle-left" aria-hidden="true"></i>
                  MySQL数据库高级应用之读写分离
              </a>
            
        </div>
        <div class="item right">
            
              <a href="/posts/db0340bd/">
                MySQL高可用集群架构-MHA架构
                <i class="fa fa-angle-right" aria-hidden="true"></i>
              </a>
            
        </div>
    </div>




<script>
	
	
</script>
	</div>
	<div id="footer">
	<p>
	©2019-<span id="footerYear"></span> 
	<a href="/">Echo</a> 
	
	
	<br>
	Theme <a href="//github.com/wujun234/hexo-theme-tree" target="_blank">Tree</a>
	by <a href="//github.com/wujun234" target="_blank">WuJun</a>
	Powered by <a href="//hexo.io" target="_blank">Hexo</a>
	</p>
</div>
<script type="text/javascript"> 
	document.getElementById('footerYear').innerHTML = new Date().getFullYear() + '';
</script>
	<button id="totop-toggle" class="toggle"><i class="fa fa-angle-double-up" aria-hidden="true"></i></button>
</body>
</html>