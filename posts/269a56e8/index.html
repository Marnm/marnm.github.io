<!DOCTYPE html>
<html lang="en">

<head><meta name="generator" content="Hexo 3.8.0">
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	
	<!-- title -->
	
	<title>
	
		MySQL备份与恢复（删库不跑路） | 
	 
	Deops&#39;s blog
	</title>
	
	<!-- keywords,description -->
	
		<meta name="keywords" content="Echo">
	 
		<meta name="description" content="Echo">
	

	<!-- favicon -->
	
	<link rel="shortcut icon" href="/favicon.ico">
	


	<!-- search -->
	<script>
		var searchEngine = "https://www.google.com/search?q=";
		if(typeof searchEngine == "undefined" || searchEngine == null || searchEngine == ""){
			searchEngine = "https://www.google.com/search?q=";
		}
		var homeHost = "https://marnm.github.io/";
		if(typeof homeHost == "undefined" || homeHost == null || homeHost == ""){
			homeHost = window.location.host;
		}
	</script>


	<link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="/lib/highlight/styles/base16/solarized-dark.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
    
    <!-- 引入代码高亮的 js -->
    <script src="/lib/highlight/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

	<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

	<script src="https://cdn.jsdelivr.net/npm/jquery-pjax@2.0.1/jquery.pjax.min.js"></script>
	<script src="/js/main.js"></script>
	
		<script src="https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/valine@v1.4.14/dist/Valine.min.js"></script>
	
	
</head>

<body>
	<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?3efe99c287df5a1d6f0d02d187e403c1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<header id="header">
    <a id="title" href="/" class="logo">Deops's blog</a>

	<ul id="menu">
		<li class="menu-item">
			<a href="/about" class="menu-item-link">ABOUT</a>
		</li>
	
		<li class="menu-item">
			<a href="/tags" class="menu-item-link">标签</a>
		</li>
	

	
		<li class="menu-item">
			<a href="/categories" class="menu-item-link">分类</a>
		</li>
	

		<li class="menu-item">
			<a href="https://github.com/Marnm" class="menu-item-link" target="_blank">
				<i class="fa fa-github fa-2x"></i>
			</a>
		</li>
	</ul>
</header>

	
<div id="sidebar">
	<button id="sidebar-toggle" class="toggle"><i class="fa fa-arrow-right " aria-hidden="true"></i></button>
	
	<div id="site-toc">
		<input id="search-input" class="search-input" type="search" placeholder="按回车全站搜索">
		<div id="tree">
			

			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Ansible自动化运维
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/b45e213f/">
                     
										    Ansible自动化管理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/28c30eb2/">
                     
										    CTF线下赛AWD套路小结
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Ceph对象存储
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/e9abc941/">
                     
										    Ceph分布式存储
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/38843421/">
                     
										    Ceph分布式存储部署笔记
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/9964b559/">
                     
										    DHCP Server的配置与管理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/4782a8c2/">
                     
										    DNS Server的配置与管理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/5e357037/">
                     
										    Django教程
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Docker
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/4a3d459a/">
                     
										    Docker学习笔记
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										ELK Stack
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/2d95f1c1/">
                     
										    ElasticSearch环境搭建
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/573fc171/">
                     
										    Logstash二进制安装与启动
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/b11339a9/">
                     
										    Logstash去除不需要的字段
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/d05b44e0/">
                     
										    Logstash读取日志发送到ES
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/9d56e705/">
                     
										    FTP/TFTP的配置与管理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/ca9298d7/">
                     
										    Git版本控制
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/51acad32/">
                     
										    诺尔·巴尔扎克（Honoréde Balzac）的名言
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/4def9c28/">
                     
										    In Your 20's These Things Matter More Than You Think
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/295162d9/">
                     
										    Java8 环境变量配置
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										KVM虚拟化
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/dba5727f/">
                     
										    KVM图形化
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/204af86b/">
                     
										    KVM虚拟机克隆和快照
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/d69c6e72/">
                     
										    KVM虚拟机添加磁盘
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/16305c66/">
                     
										    KVM虚拟机迁移
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/7733d98/">
                     
										    LDAP的配置与管理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/5922577d/">
                     
										    LNMP手动部署
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/195423a2/">
                     
										    LNMP高可用架构配置
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/38cc96c8/">
                     
										    LVM磁盘管理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/be48d001/">
                     
										    LVS-DR集群
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/df68056c/">
                     
										    LVS-IPTUN集群
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/dcf8e277/">
                     
										    LVS-NAT集群
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/640aafef/">
                     
										    LVS和KeepAlived实现高可用集群
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/82734d8/">
                     
										    Linux命令
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/67ee4dec/">
                     
										    Linux学习笔记 - 关于开源
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/d53cba09/">
                     
										    Linux常用性能分析工具
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/15c0e66c/">
                     
										    Linux常见日志文件
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/480c215d/">
                     
										    Linux性能管理工具
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/a9bb0c1a/">
                     
										    Linux文件的特殊权限
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/cc999d74/">
                     
										    Linux文件的隐藏属性
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/b7f1c6/">
                     
										    Linux文本四剑客
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/aabbd398/">
                     
										    Linux无法挂载sysroot并自动进入紧急模式
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/b3f64b7d/">
                     
										    Linux生成随机密码方法
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e025952a/">
                     
										    Linux登录退出提示信息欢迎信息
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/ee2f9f35/">
                     
										    Linux的PAM模块
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/1e844aa4/">
                     
										    Linux的归档与解压缩
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/c4bbfe69/">
                     
										    Linux的日志切割
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/be846aea/">
                     
										    Linux禁止和开启ping的方法
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/f20e14fd/">
                     
										    Linux网卡聚合及bond模式的原理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/2fe5fc07/">
                     
										    Linux计划任务实现
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/365d0867/">
                     
										    Linux路由配置——route
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/fbf617b4/">
                     
										    MariaDB
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/bff83912/">
                     
										    Markdown 简明语法手册
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/5125c787/">
                     
										    Markdown语法说明（快速入门）
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										MongoDB
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/8b1c1f4b/">
                     
										    MongoDB介绍
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/a36562d7/">
                     
										    MongoDB学习笔记
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/55c06d78/">
                     
										    MongoDB安装部署
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										MySQL学习笔记
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/16fc5dc4/">
                     
										    MySQL5.6
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/61fb6d52/">
                     
										    MySQL5.7
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/bce68613/">
                     
										    MySQL基础
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/f6e2d114/">
                     
										    使用RPM包安装MySQL5.7数据库
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file active">
									<a href="/posts/269a56e8/">
                     
										    MySQL备份与恢复（删库不跑路）
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/607e4760/">
                     
										    MySQL传统主从同步
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/d77fafec/">
                     
										    MySQL的GTID主从同步
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/db0340bd/">
                     
										    MySQL高可用集群架构-MHA架构
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/62ec7971/">
                     
										    Atlas实现MySQL读写分离
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/490925f2/">
                     
										    MySQL数据库高级应用之读写分离
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/176dc5f3/">
                     
										    MyCat垂直分表操作
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/8f74b0e7/">
                     
										    MyCat教程全国省份分片枚举操作
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/208cd020/">
                     
										    MySQL调优
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/1876d05d/">
                     
										    NetworkManager管理工具
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/60444925/">
                     
										    NexT主题优化+美化
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Nginx学习笔记
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/f4d30967/">
                     
										    Nginx动静分离部署
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/1db2b3f1/">
                     
										    Nginx平滑升级
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/2793eb31/">
                     
										    Nginx日志管理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/2793eb31/">
                     
										    Nginx日志管理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e0989926/">
                     
										    Nginx添加第三方模块
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/da411b72/">
                     
										    Nginx虚拟主机
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/d4e5e907/">
                     
										    Nginx访问控制
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/d2802762/">
                     
										    Nginx高可用架构配置
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/36ba38f9/">
                     
										    NoSQL知识
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e8c4eb08/">
                     
										    OpenSSL使用教程
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/97717e94/">
                     
										    PXE自动化部署
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Prometheus学习笔记
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/39c0f6a1/">
                     
										    Prometheus学习笔记
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/1f351894/">
                     
										    Python-VirtualEnv
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/297a89d9/">
                     
										    Python学习笔记
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/fa8e89f7/">
                     
										    RAID磁盘阵列技术介绍
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/afdfa673/">
                     
										    RHEL 7配置Yum软件仓库
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/32546aed/">
                     
										    RedHat Linux重置root管理员密码
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/eb7dbe25/">
                     
										    RedHat_7 配置网卡信息
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Redis学习笔记
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/5188e636/">
                     
										    Redis与其他应用的集成
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/49fbbc1/">
                     
										    Redis基本操作
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e8376589/">
                     
										    Redis安装部署——Cluster集群
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e78aaf59/">
                     
										    Redis安装部署——Sentinel模式
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/2acd829b/">
                     
										    Redis安装部署——主从复制
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/119ed1dc/">
                     
										    Redis持久化
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/18d7d749/">
                     
										    Redis概述
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e3fb0a3e/">
                     
										    Redis的数据备份与恢复
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/3e3d973e/">
                     
										    Redis配合MySQL使用
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/f03da4e7/">
                     
										    Redis配置文件详解
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/41f893fd/">
                     
										    Redis编译安装
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/dbd9d26a/">
                     
										    SHELL编程类面试题
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/f42b90f9/">
                     
										    SHELL脚本工具
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/8a8ba1e/">
                     
										    SHELL脚本练习
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/c45f2736/">
                     
										    SQL Server 2008安装配置
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/aa142b64/">
                     
										    SQLite安装
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e228b71f/">
                     
										    SSH原理与应用
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/1fdc29d2/">
                     
										    Shell的基本运算符
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/6309c3f8/">
                     
										    Shell编程
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e76ba468/">
                     
										    Ubuntu Desktop优化与配置
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/129acd64/">
                     
										    Ubuntu修改配置及美化
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/b382711f/">
                     
										    VIM的使用
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e9c6771b/">
                     
										    Win10环境下Python2、3和pip2、3版本共存
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/6ed6984b/">
                     
										    Windows进程管理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/59089347/">
                     
										    Zabbix3.4邮件报警配置
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/7034657d/">
                     
										    Zabbix4.0
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/c7b4ec91/">
                     
										    firewalld学习笔记
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/1ebd4a76/">
                     
										    iproute2工具包
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/57bbf635/">
                     
										    iptables学习笔记
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/3e189d0c/">
                     
										    mysqlclient无法安装的问题
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/1939d3e2/">
                     
										    net-tools工具
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/bae5d4f0/">
                     
										    rhel修改网卡命名规则
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/3c7a2415/">
                     
										    rsync数据同步
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/37ca92de/">
                     
										    swap交换分区
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/6efb91e0/">
                     
										    tcpdump与Wireshark的使用
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/d185f6ae/">
                     
										    web性能压测学习
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/bb750036/">
                     
										    你要懂得及时止损，别太在乎沉没成本
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/da58b03e/">
                     
										    使用HAProxy实现七层负载均衡
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/b161a250/">
                     
										    使用服务搭建Hexo个人博客
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										其它
									</a>
									
							<ul>
								<li class="file">
									<a href="/posts/9bf5b5/">
                     
										    我学练英语所使用的方法、工具与资料
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/4c41c7ef/">
                     
										    十二句经典的爱情名言
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/e364486e/">
                     
										    基于Docker搭建Prometheus
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/69c239dd/">
                     
										    基于LNMP架构搭建企业级开源监控系统Zabbix
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/f801d3c5/">
                     
										    增加一台Filebeat收集httpd日志
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/f5d6f6a9/">
                     
										    实战-GitLab更新代码后自动触发Jenkins进行部署
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/fa35a60d/">
                     
										    性能测试指标详解
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/8a3c5d26/">
                     
										    搭建Jenkins实现持续集成-配置Jenkins自动拉取GitLab中的代码
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/4f96852/">
                     
										    搭建JumpServer管理王者荣耀数万台游戏服务器
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/f0a65eeb/">
                     
										    根分区扩容
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/2f57a694/">
                     
										    正则表达式
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/9e3f6743/">
                     
										    自由的灵魂必将远航
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/217dc297/">
                     
										    计算机概述
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/8d4b7ae1/">
                     
										    计算机组成原理
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/dded0e80/">
                     
										    运维发展史
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/undefined/">
                     
										    邮件报警配置
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/5095a46f/">
                     
										    配置Docker静态IP
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/2b923a54/">
                     
										    配置GitLab邮件服务
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/posts/76011417/">
                     
										    配置Zabbix3.4监控Apache服务
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
		</div>
	</div>
</div>

	<!-- 引入正文 -->
	<div id="content">
		<h1 id="article-title">
	MySQL备份与恢复（删库不跑路）
</h1>
<div class="article-meta">
	
	<span>Echo</span>
	<span>2022-06-07 12:44:29</span>
		<div id="article-categories">
    
		<span>Categories：</span>
            
    

    
		<span>Tags：</span>
            
    
		</div>

</div>

<div id="article-content">
	<h3 id="&#x4E00;&#xFF1A;MySQL&#x5B57;&#x7B26;&#x96C6;"><a href="#&#x4E00;&#xFF1A;MySQL&#x5B57;&#x7B26;&#x96C6;" class="headerlink" title="&#x4E00;&#xFF1A;MySQL&#x5B57;&#x7B26;&#x96C6;"></a>&#x4E00;&#xFF1A;MySQL&#x5B57;&#x7B26;&#x96C6;</h3><p><strong>1&#xFF1A;&#x5B57;&#x7B26;&#x96C6;&#x4ECB;&#x7ECD;</strong><br>&#x5B57;&#x7B26;&#x96C6;&#x5C31;&#x662F;&#x4E00;&#x5957;&#x6587;&#x5B57;&#x7B26;&#x53F7;&#x53CA;&#x5176;&#x7F16;&#x7801;&#x3001;&#x6BD4;&#x8F83;&#x89C4;&#x5219;&#x7684;&#x96C6;&#x5408;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x8BA1;&#x7B97;&#x673A;&#x5B57;&#x7B26;&#x96C6;ASC2&#xFF1B;MySQL&#x6570;&#x636E;&#x5E93;&#x5B57;&#x7B26;&#x96C6;&#x5305;&#x62EC;&#x5B57;&#x7B26;&#x96C6;&#xFF08;CHARACTER&#xFF09;&#x548C;&#x6821;&#x5BF9;&#x89C4;&#x5219;&#xFF08;COLLATION&#xFF09;&#x4E24;&#x4E2A;&#x6982;&#x5FF5;&#xFF0C;&#x5176;&#x4E2D;&#x5B57;&#x7B26;&#x96C6;&#x7528;&#x6765;&#x5B9A;&#x4E49;MySQL&#x6570;&#x636E;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x5B58;&#x50A8;&#x65B9;&#x5F0F;&#xFF0C;&#x800C;&#x6821;&#x5BF9;&#x89C4;&#x5219;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x65B9;&#x5F0F;</p>
<p><strong>2&#xFF1A;MySQL&#x6570;&#x636E;&#x5E93;&#x5E38;&#x89C1;&#x5B57;&#x7B26;&#x96C6;&#x4ECB;&#x7ECD;</strong></p>
<p>&#x9009;&#x62E9;&#x5B57;&#x7B26;&#x96C6;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x56FD;&#x9645;&#x6807;&#x51C6;&#x7684;utf8</p>
<p><strong>3&#xFF1A;MySQL&#x600E;&#x6837;&#x9009;&#x62E9;&#x5408;&#x9002;&#x7684;&#x5B57;&#x7B26;&#x96C6;</strong><br>1&#x3001;&#x5982;&#x679C;&#x5904;&#x7406;&#x5404;&#x79CD;&#x5404;&#x6837;&#x7684;&#x6587;&#x5B57;&#xFF0C;&#x53D1;&#x5E03;&#x5230;&#x4E0D;&#x540C;&#x8BED;&#x8A00;&#x56FD;&#x5BB6;&#x5730;&#x533A;&#xFF0C;&#x5E94;&#x9009;Unicode&#x5B57;&#x7B26;&#x96C6;&#xFF0C;&#x5BF9;MySQL&#x6765;&#x8BF4;&#x5C31;&#x662F;utf8(&#x6BCF;&#x4E2A;&#x6C49;&#x5B57;&#x4E09;&#x4E2A;&#x5B57;&#x8282;)<br>2&#x3001;&#x5982;&#x679C;&#x53EA;&#x662F;&#x9700;&#x8981;&#x652F;&#x6301;&#x4E2D;&#x6587;&#xFF0C;&#x5E76;&#x4E14;&#x6570;&#x636E;&#x91CF;&#x5F88;&#x5927;&#xFF0C;&#x6027;&#x80FD;&#x8981;&#x6C42;&#x4E5F;&#x9AD8;&#xFF0C;&#x53EF;&#x9009;GBK(&#x5B9A;&#x957F;&#xFF0C;&#x6BCF;&#x4E2A;&#x6C49;&#x5B57;&#x5360;&#x53CC;&#x5B57;&#x8282;&#xFF0C;&#x82F1;&#x6587;&#x4E5F;&#x5360;&#x53CC;&#x5B57;&#x8282;)&#xFF0C;&#x5982;&#x679C;&#x662F;&#x5927;&#x91CF;&#x8FD0;&#x7B97;&#xFF0C;&#x6BD4;&#x8F83;&#x6392;&#x5E8F;&#x7B49;&#xFF0C;&#x5B9A;&#x957F;&#x5B57;&#x7B26;&#x96C6;&#x66F4;&#x5FEB;&#xFF0C;&#x6027;&#x80FD;&#x4E5F;&#x9AD8;<br>3&#x3001;&#x5904;&#x7406;&#x79FB;&#x52A8;&#x4E92;&#x8054;&#x7F51;&#x4E1A;&#x52A1;&#xFF0C;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x4F7F;&#x7528;utf8mb4&#x5B57;&#x7B26;&#x96C6;</p>
<p><strong>4&#xFF1A;&#x67E5;&#x770B;&#x5F53;&#x524D;MySQL&#x652F;&#x6301;&#x7684;&#x5B57;&#x7B26;&#x96C6;</strong></p>
<p>MySQL&#x53EF;&#x4EE5;&#x652F;&#x6301;&#x591A;&#x79CD;&#x5B57;&#x7B26;&#x96C6;&#xFF0C;&#x540C;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5E93;&#x6216;&#x8868;&#x7684;&#x4E0D;&#x540C;&#x5B57;&#x6BB5;&#x90FD;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4E0D;&#x540C;&#x7684;&#x5B57;&#x7B26;&#x96C6;</p>
<pre><code>mysql -uroot -pJaking@vip.163.com -e &quot;show character set \G;&quot;  #&#x67E5;&#x770B;&#x6240;&#x6709;&#x7684;&#x5B57;&#x7B26;&#x96C6;
</code></pre><p>&#x67E5;&#x770B;&#x5E38;&#x7528;&#x7684;&#x5B57;&#x7B26;&#x96C6;&#xFF1A;</p>
<pre><code>mysql -uroot -pJaking@vip.163.com -e &quot;show character set\G;&quot; |egrep &quot;gbk|utf8|latin1&quot;|awk &apos;{print $0}&apos;
</code></pre><pre><code class="shell">[root@jaking ~]# mysql -uroot -pJaking@vip.163.com -e &quot;show character set\G;&quot; | egrep &quot;gbk|utf8|latin1&quot;|awk &apos;{print $0}&apos;
mysql: [Warning] Using a password on the command line interface can be insecure.
          Charset: latin1
Default collation: latin1_swedish_ci
          Charset: gbk
Default collation: gbk_chinese_ci
          Charset: utf8
Default collation: utf8_general_ci
          Charset: utf8mb4
Default collation: utf8mb4_general_ci
</code></pre>
<p><strong>5&#xFF1A;&#x67E5;&#x770B;MySQL&#x5F53;&#x524D;&#x7684;&#x5B57;&#x7B26;&#x96C6;&#x8BBE;&#x7F6E;&#x60C5;&#x51B5;</strong></p>
<pre><code class="sql">mysql&gt; show variables like &apos;character_set%&apos;;
+--------------------------+------------------------------------+
| Variable_name            | Value                              |
+--------------------------+------------------------------------+
| character_set_client     | utf8                               |
| character_set_connection | utf8                               |
| character_set_database   | utf8                               |
| character_set_filesystem | binary                             |
| character_set_results    | utf8                               |
| character_set_server     | utf8                               |
| character_set_system     | utf8                               |
| character_sets_dir       | /usr/local/mysql57/share/charsets/ |
+--------------------------+------------------------------------+
8 rows in set (0.00 sec)
mysql&gt; show character set;
+----------+---------------------------------+---------------------+--------+
| Charset  | Description                     | Default collation   | Maxlen |
+----------+---------------------------------+---------------------+--------+
| big5     | Big5 Traditional Chinese        | big5_chinese_ci     |      2 |
| dec8     | DEC West European               | dec8_swedish_ci     |      1 |
| cp850    | DOS West European               | cp850_general_ci    |      1 |
| hp8      | HP West European                | hp8_english_ci      |      1 |
| koi8r    | KOI8-R Relcom Russian           | koi8r_general_ci    |      1 |
| latin1   | cp1252 West European            | latin1_swedish_ci   |      1 |
| latin2   | ISO 8859-2 Central European     | latin2_general_ci   |      1 |
| swe7     | 7bit Swedish                    | swe7_swedish_ci     |      1 |
| ascii    | US ASCII                        | ascii_general_ci    |      1 |
| ujis     | EUC-JP Japanese                 | ujis_japanese_ci    |      3 |
| sjis     | Shift-JIS Japanese              | sjis_japanese_ci    |      2 |
| hebrew   | ISO 8859-8 Hebrew               | hebrew_general_ci   |      1 |
| tis620   | TIS620 Thai                     | tis620_thai_ci      |      1 |
| euckr    | EUC-KR Korean                   | euckr_korean_ci     |      2 |
| koi8u    | KOI8-U Ukrainian                | koi8u_general_ci    |      1 |
| gb2312   | GB2312 Simplified Chinese       | gb2312_chinese_ci   |      2 |
| greek    | ISO 8859-7 Greek                | greek_general_ci    |      1 |
| cp1250   | Windows Central European        | cp1250_general_ci   |      1 |
| gbk      | GBK Simplified Chinese          | gbk_chinese_ci      |      2 |
| latin5   | ISO 8859-9 Turkish              | latin5_turkish_ci   |      1 |
| armscii8 | ARMSCII-8 Armenian              | armscii8_general_ci |      1 |
| utf8     | UTF-8 Unicode                   | utf8_general_ci     |      3 |
| ucs2     | UCS-2 Unicode                   | ucs2_general_ci     |      2 |
| cp866    | DOS Russian                     | cp866_general_ci    |      1 |
| keybcs2  | DOS Kamenicky Czech-Slovak      | keybcs2_general_ci  |      1 |
| macce    | Mac Central European            | macce_general_ci    |      1 |
| macroman | Mac West European               | macroman_general_ci |      1 |
| cp852    | DOS Central European            | cp852_general_ci    |      1 |
| latin7   | ISO 8859-13 Baltic              | latin7_general_ci   |      1 |
| utf8mb4  | UTF-8 Unicode                   | utf8mb4_general_ci  |      4 |
| cp1251   | Windows Cyrillic                | cp1251_general_ci   |      1 |
| utf16    | UTF-16 Unicode                  | utf16_general_ci    |      4 |
| utf16le  | UTF-16LE Unicode                | utf16le_general_ci  |      4 |
| cp1256   | Windows Arabic                  | cp1256_general_ci   |      1 |
| cp1257   | Windows Baltic                  | cp1257_general_ci   |      1 |
| utf32    | UTF-32 Unicode                  | utf32_general_ci    |      4 |
| binary   | Binary pseudo charset           | binary              |      1 |
| geostd8  | GEOSTD8 Georgian                | geostd8_general_ci  |      1 |
| cp932    | SJIS for Windows Japanese       | cp932_japanese_ci   |      2 |
| eucjpms  | UJIS for Windows Japanese       | eucjpms_japanese_ci |      3 |
| gb18030  | China National Standard GB18030 | gb18030_chinese_ci  |      4 |
+----------+---------------------------------+---------------------+--------+
41 rows in set (0.00 sec)
</code></pre>
<p><strong>&#x6539;&#x5B57;&#x7B26;&#x7F16;&#x7801;</strong></p>
<pre><code class="shell">[root@jaking ~]# echo character_set_server=utf8 &gt;&gt; /etc/my.cnf
[root@jaking ~]# cat /etc/my.cnf
[client]
port=3306
socket=/data/mysql/mysql.sock

[mysqld]
character-set-server=utf8
collation-server=utf8_general_ci

skip-name-resolve
user=mysql
port=3306
basedir=/usr/local/mysql57
datadir=/data/mysql
tmpdir=/tmp
socket=/data/mysql/mysql.sock

log-error=/data/mysql/mysqld.log
pid-file=/data/mysql/mysqld.pid 
default-storage-engine=InnoDB
character_set_server=utf8
[root@jaking ~]# systemctl restart mysqld
[root@jaking ~]# mysql -uroot -pJaking@vip.163.com
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 4
Server version: 5.7.19 Source distribution

Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.
</code></pre>
<pre><code class="sql">mysql&gt; show variables like &apos;character_set%&apos;;
+--------------------------+------------------------------------+
| Variable_name            | Value                              |
+--------------------------+------------------------------------+
| character_set_client     | utf8                               |
| character_set_connection | utf8                               |
| character_set_database   | utf8                               |
| character_set_filesystem | binary                             |
| character_set_results    | utf8                               |
| character_set_server     | utf8                               |
| character_set_system     | utf8                               |
| character_sets_dir       | /usr/local/mysql57/share/charsets/ |
+--------------------------+------------------------------------+
8 rows in set (0.00 sec)

mysql&gt; create database testdb;     
Query OK, 1 row affected (0.00 sec)

mysql&gt; show create database testdb;
+----------+-----------------------------------------------------------------+
| Database | Create Database                                                 |
+----------+-----------------------------------------------------------------+
| testdb   | CREATE DATABASE `testdb` /*!40100 DEFAULT CHARACTER SET utf8 */ |
+----------+-----------------------------------------------------------------+
1 row in set (0.00 sec)
</code></pre>
<p><strong>6&#xFF1A;&#x5B9E;&#x6218;&#xFF1A;&#x8FC1;&#x79FB;&#x6570;&#x636E;</strong></p>
<p> &#x80CC;&#x666F;&#xFF1A;&#x516C;&#x53F8;&#x4E1A;&#x52A1;&#x6570;&#x636E;book,&#x7531;&#x4E8E;&#x4E4B;&#x524D;&#x5EFA;&#x8868;&#x6CA1;&#x6CE8;&#x610F;&#x5B57;&#x7B26;&#x96C6;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5BFC;&#x81F4;&#x4E4B;&#x524D;&#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x51FA;&#x73B0;&#x4E71;&#x7801;&#xFF1B;&#x73B0;&#x5728;&#x8981;&#x5C06;&#x4E4B;&#x524D;&#x7684;&#x6570;&#x636E;&#x548C;&#x73B0;&#x5728;&#x6570;&#x636E;&#x7684;&#x5B57;&#x7B26;&#x96C6;&#x4E00;&#x81F4;&#xFF0C;&#x4E0D;&#x51FA;&#x73B0;&#x4E71;&#x7801;&#x60C5;&#x51B5;&#xFF1B;&#x5C06;&#x5B57;&#x7B26;&#x96C6;&#x4E3A;latin1&#x5DF2;&#x6709;&#x8BB0;&#x5F55;&#x7684;&#x6570;&#x636E;&#x8F6C;&#x6210;utf8&#xFF0C;&#x5E76;&#x4E14;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x7684;&#x8BB0;&#x5F55;&#x4E0D;&#x4E71;&#x7801;</p>
<p>&#x6B65;&#x9AA4;<br>                 1&#xFF1A;&#x5EFA;&#x5E93;&#x53CA;&#x5EFA;&#x8868;&#x7684;&#x8BED;&#x53E5;&#x5BFC;&#x51FA;&#xFF0C;sed&#x6279;&#x91CF;&#x4FEE;&#x6539;&#x4E3A;utf8<br>                 2&#xFF1A;&#x5BFC;&#x51FA;&#x4E4B;&#x524D;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;<br>                 3&#xFF1A;&#x4FEE;&#x6539;mysql&#x670D;&#x52A1;&#x7AEF;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x7F16;&#x7801;&#x4E3A;utf8<br>                 4&#xFF1A;&#x5220;&#x9664;&#x539F;&#x6709;&#x7684;&#x5E93;&#x8868;&#x53CA;&#x6570;&#x636E;<br>                 5&#xFF1A;&#x5BFC;&#x5165;&#x65B0;&#x7684;&#x5EFA;&#x5E93;&#x53CA;&#x5EFA;&#x8868;&#x8BED;&#x53E5;<br>                 6&#xFF1A;&#x5BFC;&#x5165;&#x4E4B;&#x524D;&#x7684;&#x6570;&#x636E;</p>
<p> &#x51C6;&#x5907;&#x521B;&#x5EFA;&#x6D4B;&#x8BD5;&#x5E93;&#x548C;&#x8868;&#x7684;SQL&#x8BED;&#x53E5;</p>
<pre><code class="sql">CREATE DATABASE testbookdb;
#CREATE DATABASE `testbookdb` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;
show databases;
use testbookdb;

CREATE TABLE book1 (bTypeId int,bName char(16),price int,publishing char(16));
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;1&apos;,&apos;&#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;&apos;,&apos;66&apos;,&apos;&#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;2&apos;,&apos;&#x300A;&#x4E91;&#x8BA1;&#x7B97;&#x8D8B;&#x52BF;&#x300B;&apos;,&apos;68&apos;,&apos;&#x4EBA;&#x6C11;&#x90AE;&#x7535;&#x51FA;&#x7248;&#x793E;&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;3&apos;,&apos;&#x300A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;&#x300B;&apos;,&apos;90&apos;,&apos;&#x673A;&#x68B0;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;4&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL&#x300B;&apos;,&apos;71&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;5&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL2&#x300B;&apos;,&apos;72&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;6&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL3&#x300B;&apos;,&apos;73&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;7&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL4&#x300B;&apos;,&apos;74&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;8&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL5&#x300B;&apos;,&apos;75&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;9&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL6&#x300B;&apos;,&apos;76&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;10&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL7&#x300B;&apos;,&apos;77&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;11&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL8&#x300B;&apos;,&apos;78&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;12&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL9&#x300B;&apos;,&apos;79&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);

CREATE TABLE book1 (bTypeId int,bName char(16),price int,publishing char(16));
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;1&apos;,&apos;Linux&apos;,&apos;66&apos;,&apos;DZ&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;2&apos;,&apos;CLD&apos;,&apos;68&apos;,&apos;RM&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;3&apos;,&apos;OS&apos;,&apos;90&apos;,&apos;JX&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;4&apos;,&apos;MySQL1&apos;,&apos;71&apos;,&apos;QH&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;5&apos;,&apos;MySQL2&apos;,&apos;72&apos;,&apos;QH&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;6&apos;,&apos;MySQL3&apos;,&apos;73&apos;,&apos;QH&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;7&apos;,&apos;MySQL4&apos;,&apos;74&apos;,&apos;QH&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;8&apos;,&apos;MySQL5&apos;,&apos;75&apos;,&apos;QH&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;9&apos;,&apos;MySQL6&apos;,&apos;76&apos;,&apos;QH&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;10&apos;,&apos;MySQL7&apos;,&apos;77&apos;,&apos;QH&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;11&apos;,&apos;MySQL8&apos;,&apos;78&apos;,&apos;QH&apos;);
INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;12&apos;,&apos;MySQL9&apos;,&apos;79&apos;,&apos;QH&apos;);

mysql&gt; create database book;
Query OK, 1 row affected (0.00 sec)

mysql&gt; show create database book;
+----------+---------------------------------------------------------------+
| Database | Create Database                                               |
+----------+---------------------------------------------------------------+
| book     | CREATE DATABASE `book` /*!40100 DEFAULT CHARACTER SET utf8 */ |
+----------+---------------------------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; use book;
Database changed

mysql&gt; CREATE TABLE book1 (bTypeId int,bName char(16),price int,publishing char(16)) character set latin1;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; show CREATE TABLE book1;
+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table                                                                                                                                                                                          |
+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| book1 | CREATE TABLE `book1` (
  `bTypeId` int(11) DEFAULT NULL,
  `bName` char(16) DEFAULT NULL,
  `price` int(11) DEFAULT NULL,
  `publishing` char(16) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 |
+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.02 sec)
</code></pre>
<p><strong>&#x4FEE;&#x6539;&#x6570;&#x636E;&#x5E93;&#x5B57;&#x7B26;&#x96C6;</strong></p>
<pre><code class="sql">mysql&gt; show create database book;
+----------+---------------------------------------------------------------+
| Database | Create Database                                               |
+----------+---------------------------------------------------------------+
| book     | CREATE DATABASE `book` /*!40100 DEFAULT CHARACTER SET utf8 */ |
+----------+---------------------------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; alter database book default character set latin1;
Query OK, 1 row affected (0.00 sec)

mysql&gt; show create database book;
+----------+-----------------------------------------------------------------+
| Database | Create Database                                                 |
+----------+-----------------------------------------------------------------+
| book     | CREATE DATABASE `book` /*!40100 DEFAULT CHARACTER SET latin1 */ |
+----------+-----------------------------------------------------------------+
1 row in set (0.01 sec)
</code></pre>
<p><strong>&#x4FEE;&#x6539;&#x8868;&#x7684;&#x5B57;&#x7B26;&#x96C6;</strong></p>
<pre><code class="sql">mysql&gt; show create table book1;
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table                                                                                                                                                                                        |
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| book1 | CREATE TABLE `book1` (
  `bTypeId` int(11) DEFAULT NULL,
  `bName` char(16) DEFAULT NULL,
  `price` int(11) DEFAULT NULL,
  `publishing` char(16) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 |
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; alter table book1 default character set latin1;
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; show create table book1;
+-------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table                                                                                                                                                                                                                                |
+-------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| book1 | CREATE TABLE `book1` (
  `bTypeId` int(11) DEFAULT NULL,
  `bName` char(16) CHARACTER SET utf8 DEFAULT NULL,
  `price` int(11) DEFAULT NULL,
  `publishing` char(16) CHARACTER SET utf8 DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 |
+-------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)
</code></pre>
<p><strong>&#x6DF1;&#x5165;&#x7814;&#x7A76;&#x5B57;&#x7B26;&#x96C6;&#xFF1A;</strong></p>
<pre><code class="sql">mysql&gt; drop table book1;
Query OK, 0 rows affected (0.00 sec)
mysql&gt; CREATE TABLE book1 (bTypeId int,bName char(16),price int,publishing char(16)) character set latin1;
Query OK, 0 rows affected (0.01 sec)

mysql&gt; INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;1&apos;,&apos;&#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;&apos;,&apos;66&apos;,&apos;&#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;&apos;);
ERROR 1366 (HY000): Incorrect string value: &apos;\xE3\x80\x8ALin...&apos; for column &apos;bName&apos; at row 1
mysql&gt; drop table book1;
Query OK, 0 rows affected (0.00 sec)

mysql&gt;  CREATE TABLE book1 (bTypeId int,bName char(16),price int,publishing char(16));
Query OK, 0 rows affected (0.00 sec)

mysql&gt; INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;1&apos;,&apos;&#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;&apos;,&apos;66&apos;,&apos;&#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;&apos;);
ERROR 1366 (HY000): Incorrect string value: &apos;\xE3\x80\x8ALin...&apos; for column &apos;bName&apos; at row 1
mysql&gt; show create table book1;
+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table                                                                                                                                                                                          |
+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| book1 | CREATE TABLE `book1` (
  `bTypeId` int(11) DEFAULT NULL,
  `bName` char(16) DEFAULT NULL,
  `price` int(11) DEFAULT NULL,
  `publishing` char(16) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 |
+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; drop table book1;                                                        
Query OK, 0 rows affected (0.01 sec)

mysql&gt;  CREATE TABLE book1 (bTypeId int,bName char(16),price int,publishing char(16)) character set utf8;
Query OK, 0 rows affected (0.01 sec)

mysql&gt; INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;1&apos;,&apos;&#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;&apos;,&apos;66&apos;,&apos;&#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;&apos;);
Query OK, 1 row affected (0.00 sec)

mysql&gt; select * from book1;
+---------+-------------------------------+-------+-----------------------+
| bTypeId | bName                         | price | publishing            |
+---------+-------------------------------+-------+-----------------------+
|       1 | &#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;         |    66 | &#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;        |
+---------+-------------------------------+-------+-----------------------+
1 row in set (0.00 sec)

mysql&gt; show tables;
+-----------------------+
| Tables_in_testbookdb2 |
+-----------------------+
| book1                 |
+-----------------------+
1 row in set (0.00 sec)

mysql&gt; CREATE TABLE book2 (bTypeId int,bName char(16),price int,publishing char(16)) character set utf8 COLLATE utf8_general_ci;
Query OK, 0 rows affected (0.01 sec)

mysql&gt; INSERT INTO book2(bTypeId,bName,price,publishing) VALUES(&apos;1&apos;,&apos;&#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;&apos;,&apos;66&apos;,&apos;&#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;&apos;);
Query OK, 1 row affected (0.00 sec)

mysql&gt; show create table book2;
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table                                                                                                                                                                                        |
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| book2 | CREATE TABLE `book2` (
  `bTypeId` int(11) DEFAULT NULL,
  `bName` char(16) DEFAULT NULL,
  `price` int(11) DEFAULT NULL,
  `publishing` char(16) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 |
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; show create table book1;
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table                                                                                                                                                                                                                                  |
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| book1 | CREATE TABLE `book1` (
  `bTypeId` int(11) DEFAULT NULL,
  `bName` char(16) CHARACTER SET latin1 DEFAULT NULL,
  `price` int(11) DEFAULT NULL,
  `publishing` char(16) CHARACTER SET latin1 DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 |
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.01 sec)

mysql&gt; 
</code></pre>
<p><strong>1&#xFF09;&#xFF1A;&#x5BFC;&#x51FA;&#x8868;&#x7ED3;&#x6784;</strong></p>
<pre><code>    mysqldump -uroot -pJaking@vip.163.com --default-character-set=latin1 -d  testbookdb &gt; booktable.sql 
</code></pre><p><strong>2&#xFF09;: &#x7F16;&#x8F91;booktable.sql &#x5C06;latin1&#x4FEE;&#x6539;&#x6210;utf8</strong></p>
<pre><code>    vim booktable.sql &#x4FEE;&#x6539;&#x6240;&#x6709;latin1&#x4E3A;utf8
</code></pre><p><strong>3&#xFF09;: &#x786E;&#x4FDD;&#x6570;&#x636E;&#x5E93;&#x4E0D;&#x518D;&#x66F4;&#x65B0;&#xFF0C;&#x5BFC;&#x51FA;&#x6307;&#x5B9A;&#x5E93;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;</strong></p>
<pre><code class="shell"> mysqldump -uroot -pJaking@vip.163.com --quick --no-create-info --extended-insert --default-character-set=latin1 --databases  testbookdb &gt; bookdata.sql

 mysqldump -uroot -pJaking@vip.163.com --databases  testbookdb &gt; bookdata.sql         

 mysqldump -uroot -pJaking@vip.163.com --quick --no-create-info --extended-insert --default-character-set=latin1 -B  testbookdb &gt; bookdata.sql

 mysqldump -uroot -pJaking@vip.163.com --quick --no-create-info --extended-insert --default-character-set=latin1 -t testbookdb &gt; bookdata.sql

 mysqldump -uroot -pJaking@vip.163.com --databases  testbookdb &gt; bookdata.sql

 mysqldump -uroot -pJaking@vip.163.com -t testbookdb &gt; bookdata.sql

 mysqldump -uroot -pJaking@vip.163.com --quick --no-create-info --extended-insert --default-character-set=latin1  -A  &gt; ALL.sql

 mysqldump -uroot -pJaking@vip.163.com --quick --no-create-info --extended-insert  -A  &gt; ALL.sql

 mysqldump -uroot -pJaking@vip.163.com --quick --no-create-info --extended-insert --default-character-set=utf8  --all-databases  &gt; ALL.sql

 mysqldump -uroot -pJaking@vip.163.com --all-databases  &gt; ALL.sql

 mysql -uroot -pJaking@vip.163.com &lt; ALL.sql
</code></pre>
<p><strong>&#x53C2;&#x6570;&#x8BF4;&#x660E;&#xFF1A;</strong><br><code>--quick</code>:&#x7528;&#x4E8E;&#x8F6C;&#x50A8;&#x5927;&#x7684;&#x8868;&#xFF0C;&#x5F3A;&#x5236;mysqldump&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x4E00;&#x6B21;&#x4E00;&#x884C;&#x7684;&#x68C0;&#x7D22;&#x6570;&#x636E;&#x800C;&#x4E0D;&#x662F;&#x68C0;&#x7D22;&#x6240;&#x6709;&#x884C;&#xFF0C;&#x5E76;&#x8F93;&#x51FA;&#x5F53;&#x524D;cache&#x5230;&#x5185;&#x5B58;&#x4E2D;<br><code>--no-create-info</code>:&#x4E0D;&#x8981;&#x521B;&#x5EFA;create table&#x8BED;&#x53E5;<br><code>--extended-insert</code>:&#x4F7F;&#x7528;&#x5305;&#x62EC;&#x51E0;&#x4E2A;values&#x5217;&#x8868;&#x7684;&#x591A;&#x884C;insert&#x8BED;&#x6CD5;&#xFF0C;&#x8FD9;&#x6837;&#x6587;&#x4EF6;&#x66F4;&#x5C0F;&#xFF0C;IO&#x4E5F;&#x5C0F;&#xFF0C;&#x5BFC;&#x5165;&#x6570;&#x636E;&#x65F6;&#x4F1A;&#x975E;&#x5E38;&#x5FEB;<br><code>--default-character-set=latin1</code>:&#x6309;&#x7167;&#x539F;&#x6709;&#x5B57;&#x7B26;&#x96C6;&#x5BFC;&#x51FA;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x6837;&#x5BFC;&#x51FA;&#x7684;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x6240;&#x6709;&#x4E2D;&#x6587;&#x90FD;&#x662F;&#x53EF;&#x89C1;&#x7684;&#xFF0C;&#x4E0D;&#x4F1A;&#x4FDD;&#x5B58;&#x6210;&#x4E71;&#x7801;<br><strong>4&#xFF09;&#xFF1A;&#x6253;&#x5F00;bookdata.sql &#x5C06;SET NAME latin1 &#x4FEE;&#x6539;&#x6210;SET NAME utf8</strong></p>
<pre><code>             vim bookdata.sql 
             /*!40101 SET NAMES utf8 */;
</code></pre><p><strong>5&#xFF09;: &#x91CD;&#x65B0;&#x5EFA;&#x5E93;</strong></p>
<pre><code class="SQL">mysql&gt; create database  testdb default charset utf8;
</code></pre>
<p><strong>6&#xFF09;&#xFF1A;&#x5EFA;&#x7ACB;&#x8868;&#xFF0C;&#x5BFC;&#x5165;&#x6211;&#x4EEC;&#x4E4B;&#x524D;&#x5BFC;&#x51FA;&#x7684;&#x8868;&#x7684;&#x8868;&#x7ED3;&#x6784;</strong></p>
<pre><code class="Shell">mysql -uroot -pJaking@vip.163.com testdb &lt; booktable.sql
</code></pre>
<p><strong>7&#xFF09;: &#x5BFC;&#x5165;&#x6570;&#x636E;</strong></p>
<pre><code>    mysql -uroot -pJaking@vip.163.com testdb &lt; bookdata.sql
    &#x6CE8;&#x610F;&#xFF1A;&#x9009;&#x62E9;&#x76EE;&#x6807;&#x5B57;&#x7B26;&#x96C6;&#x65F6;&#xFF0C;&#x8981;&#x6CE8;&#x610F;&#x6700;&#x597D;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&#x539F;&#x5B57;&#x7B26;&#x96C6;&#xFF08;&#x5B57;&#x5E93;&#x66F4;&#x5927;&#xFF09;&#xFF0C;&#x5426;&#x5219;&#x53EF;&#x80FD;&#x4F1A;&#x4E22;&#x5931;&#x4E0D;&#x88AB;&#x652F;&#x6301;&#x7684;&#x6570;&#x636E;
</code></pre><p><strong>&#x4E8C;&#xFF1A;MySQL&#x65E5;&#x5E38;&#x7EF4;&#x62A4;</strong></p>
<p><strong>1&#xFF1A;mysqlcheck mysql&#x4FEE;&#x590D;&#x5DE5;&#x5177;</strong></p>
<p>mysqlcheck&#x5BA2;&#x6237;&#x7AEF;&#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x68C0;&#x67E5;&#x548C;&#x4FEE;&#x590D;MyISAM&#x8868;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x4F18;&#x5316;&#x548C;&#x5206;&#x6790;&#x8868;&#x3002;<br>&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x5B83;&#x96C6;&#x6210;&#x4E86;mysql&#x5DE5;&#x5177;&#x4E2D;check&#x3001;repair&#x3001;analyze&#x3001;tmpimize&#x7684;&#x529F;&#x80FD;&#x3002;<br>/usr/local/mysql/bin/mysqlcheck   #&#x6E90;&#x7801;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;&#x4F4D;&#x7F6E;</p>
<pre><code class="Shell">rpm -qf `which mysqlcheck`  yum&#x5B89;&#x88C5;&#x67E5;&#x770B;
[root@jaking ~]# rpm -qf `which mysqlcheck`
file /usr/local/mysql57/bin/mysqlcheck is not owned by any package
[root@jaking ~]# yum provides mysqlcheck
Loaded plugins: product-id, search-disabled-repos, subscription-manager
This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.
1:mariadb-5.5.52-1.el7.x86_64 : A community developed branch of MySQL
Repo        : rhel7
Matched from:
Filename    : /usr/bin/mysqlcheck
[root@jaking ~]# yum install -y mariadb-5.5.52-1.el7.x86_64
[root@jaking ~]# rpm -qf `which mysqlcheck`
mariadb-5.5.52-1.el7.x86_64
[root@jaking ~]# which mysqlcheck
/usr/bin/mysqlcheck
</code></pre>
<p>&#x53C2;&#x6570;&#x9009;&#x9879;&#xFF1A;<br>mysqlcheck &#x2013;help &#x67E5;&#x770B;&#x5E2E;&#x52A9;<br><code>-c</code>, &#x2013;check (&#x68C0;&#x67E5;&#x8868;)&#xFF1B;<br><code>-r</code>, &#x2013;repair&#xFF08;&#x4FEE;&#x590D;&#x8868;)&#xFF1B;<br><code>-a</code>, &#x2013;analyze (&#x5206;&#x6790;&#x8868;)&#xFF1B;<br><code>-o</code>, &#x2013;tmpimize(&#x4F18;&#x5316;&#x8868;)&#xFF1B; //&#x5176;&#x4E2D;&#xFF0C;&#x9ED8;&#x8BA4;&#x9009;&#x9879;&#x662F;-c(&#x68C0;&#x67E5;&#x8868;)<br><code>-u</code>&#xFF0C; &#x4F7F;&#x7528;mysql&#x4E2D;&#x54EA;&#x4E2A;&#x7528;&#x6237;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;</p>
<p>mysqlcheck&#x4F7F;&#x7528;&#x8BED;&#x6CD5;&#xFF1A;<br>&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;3&#x79CD;&#x65B9;&#x5F0F;&#x6765;&#x8C03;&#x7528;mysqlcheck&#xFF1A;<br>mysqlcheck[tmpions] db_name [tables]<br>mysqlcheck[tmpions] &#x2014;database DB1 [DB2 DB3&#x2026;]<br>mysqlcheck[tmpions] &#x2013;all&#x2013;databases<br>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x4EFB;&#x4F55;&#x8868;&#x6216;&#x4F7F;&#x7528;&#x2014;databases(-B)&#x6216;&#x2013;all&#x2013;databases(-A)&#x9009;&#x9879;&#xFF0C;&#x5219;&#x68C0;&#x67E5;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x3002;</p>
<p>&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;&#xFF1A;</p>
<p>1&#xFF1A;&#x68C0;&#x67E5;&#x8868;(check)</p>
<pre><code class="shell">[root@jaking ~]# mysqlcheck -uroot -pJaking@vip.163.com -c testdb book1
mysqlcheck: [Warning] Using a password on the command line interface can be insecure.
testdb.book1                                       OK
</code></pre>
<p>2:  &#x4FEE;&#x590D;&#x8868;&#xFF08;repair&#xFF09;</p>
<pre><code class="shell">[root@jaking ~]# mysqlcheck -uroot -pJaking@vip.163.com -r testdb book1
mysqlcheck: [Warning] Using a password on the command line interface can be insecure.
testdb.book1
note     : The storage engine for the table doesn&apos;t support repair

[root@jaking ~]# mysql -uroot -pJaking@vip.163.com
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 12
Server version: 5.7.19 Source distribution

Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.
</code></pre>
<pre><code class="sql">mysql&gt; show create table testdb.book1;
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table                                                                                                                                                                                        |
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| book1 | CREATE TABLE `book1` (
  `bTypeId` int(11) DEFAULT NULL,
  `bName` char(16) DEFAULT NULL,
  `price` int(11) DEFAULT NULL,
  `publishing` char(16) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 |
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; alter table testdb.book1 engine = MyISAM;
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; show create table testdb.book1;
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table                                                                                                                                                                                        |
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| book1 | CREATE TABLE `book1` (
  `bTypeId` int(11) DEFAULT NULL,
  `bName` char(16) DEFAULT NULL,
  `price` int(11) DEFAULT NULL,
  `publishing` char(16) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8 |
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)
mysql&gt; exit
Bye
</code></pre>
<pre><code class="shell">[root@jaking ~]# mysqlcheck -uroot -pJaking@vip.163.com -r testdb book1
mysqlcheck: [Warning] Using a password on the command line interface can be insecure.
testdb.book1                                       OK

3:&#x4FEE;&#x590D;&#x6307;&#x5B9A;&#x7684;&#x6570;&#x636E;&#x5E93;
[root@jaking ~]# mysqlcheck -uroot -pJaking@vip.163.com -r testdb book1
mysqlcheck: [Warning] Using a password on the command line interface can be insecure.
testdb.book1                                       OK                                 

[root@jaking ~]# mysqlcheck -uroot -p  -r --databases testdb
Enter password: 
testdb.book1                                       OK
testdb.book2
note     : The storage engine for the table doesn&apos;t support repair
</code></pre>
<p>&#x6269;&#x5C55;&#xFF1A; &#x4FEE;&#x590D;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x5BB9;&#x6613;&#x6389;&#x5931;&#x6570;&#x636E;</p>
<pre><code>fsck -y -f /dev/sdbx
</code></pre><p>4:  &#x68C0;&#x67E5;&#x4FEE;&#x590D;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;</p>
<pre><code class="shell">[root@jaking ~]# mysqlcheck -uroot -pJaking@vip.163.com -A -r
book.book1                                         OK
book2.book1
note     : The storage engine for the table doesn&apos;t support repair
market.order
note     : The storage engine for the table doesn&apos;t support repair
market.order1
note     : The storage engine for the table doesn&apos;t support repair
market.user
note     : The storage engine for the table doesn&apos;t support repair
mysql.columns_priv                                 OK
mysql.db                                           OK
mysql.engine_cost
note     : The storage engine for the table doesn&apos;t support repair
mysql.event                                        OK
mysql.func                                         OK
mysql.gtid_executed
Warning  : Please do not modify the gtid_executed table. This is a mysql internal system table to store GTIDs for committed transactions. Modifying it can lead to an inconsistent GTID state.
note     : The storage engine for the table doesn&apos;t support repair
mysql.help_category
note     : The storage engine for the table doesn&apos;t support repair
mysql.help_keyword
note     : The storage engine for the table doesn&apos;t support repair
mysql.help_relation
note     : The storage engine for the table doesn&apos;t support repair
mysql.help_topic
note     : The storage engine for the table doesn&apos;t support repair
mysql.innodb_index_stats
note     : The storage engine for the table doesn&apos;t support repair
mysql.innodb_table_stats
note     : The storage engine for the table doesn&apos;t support repair
mysql.ndb_binlog_index                             OK
mysql.plugin
note     : The storage engine for the table doesn&apos;t support repair
mysql.proc                                         OK
mysql.procs_priv                                   OK
mysql.proxies_priv                                 OK
mysql.server_cost
</code></pre>
<p>&#x53C2;&#x6570;-A &#x7B49;&#x4E8E;  &#x2013;all-databases  </p>
<p>5&#xFF1A;&#x6BCF;&#x5929;&#x5B9A;&#x65F6;&#x5BF9;mysql&#x6570;&#x636E;&#x5E93;&#x8FDB;&#x884C;&#x4F18;&#x5316;</p>
<p>&#x4F7F;&#x7528;&#x8BA1;&#x5212;&#x4EFB;&#x52A1;</p>
<pre><code class="shell">crontab -e
#0 1 * * * /usr/bin/mysqlcheck -A -o -r  -u&#x4F60;&#x7684;&#x7528;&#x6237;&#x540D; -p&#x4F60;&#x7684;&#x5BC6;&#x7801; &gt; /dev/null 2&gt;&amp;1

0 3 * * *  /usr/bin/mysqlcheck -uroot -pJaking@vip.163.com -r -o -A &gt; /dev/null 2&gt;&amp;1 #&#x6BCF;&#x5929;3&#x70B9;&#x4F18;&#x5316;
</code></pre>
<p>2&#xFF1A;MySQL&#x5907;&#x4EFD;&#x4E0E;&#x6062;&#x590D;</p>
<p>1)MySQL&#x5907;&#x4EFD;&#x7684;&#x7C7B;&#x578B;<br>&#x6309;&#x7167;&#x5907;&#x4EFD;&#x65F6;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5F71;&#x54CD;&#x8303;&#x56F4;&#x5206;&#x4E3A;&#xFF1A;<br>Hot backup(&#x70ED;&#x5907;)  Cold Backup&#xFF08;&#x51B7;&#x5907;&#xFF09;Warm Backup&#xFF08;&#x6E29;&#x5907;&#xFF09;<br>Hot backup&#xFF1A;&#x70ED;&#x5907;&#x6307;&#x5728;&#x6570;&#x636E;&#x5E93;&#x8FD0;&#x884C;&#x4E2D;&#x76F4;&#x63A5;&#x5907;&#x4EFD;&#xFF0C;&#x5BF9;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;&#x6570;&#x636E;&#x5E93;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x5F71;&#x54CD;&#xFF0C;&#xFF08;Online Backup&#xFF09;&#x5B98;&#x65B9;&#x624B;&#x518C;&#x4E3A;&#x5728;&#x7EBF;&#x5907;&#x4EFD;<br>Cold Backup&#xFF1A;&#x51B7;&#x5907;&#x6307;&#x5728;&#x6570;&#x636E;&#x5E93;&#x505C;&#x6B62;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8FDB;&#x884C;&#x5907;&#x4EFD;&#xFF0C;(OfflineBackup) &#x5B98;&#x65B9;&#x624B;&#x518C;&#x79F0;&#x4E3A;&#x79BB;&#x7EBF;&#x5907;&#x4EFD;<br>Warm Backup&#xFF1A;&#x6E29;&#x5907;&#x6307;&#x5907;&#x4EFD;&#x540C;&#x6837;&#x5728;&#x6570;&#x636E;&#x5E93;&#x8FD0;&#x884C;&#x65F6;&#x8FDB;&#x884C;&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x5BF9;&#x5F53;&#x524D;&#x6570;&#x636E;&#x5E93;&#x7684;&#x64CD;&#x4F5C;&#x6709;&#x6240;&#x5F71;&#x54CD;&#xFF0C;&#x4F8B;&#x5982;&#x52A0;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x8BFB;&#x9501;&#x4EE5;&#x4FDD;&#x8BC1;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x7684;&#x4E00;&#x81F4;&#x6027;</p>
<p>&#x6309;&#x7167;&#x5907;&#x4EFD;&#x540E;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#xFF1A;</p>
<p>&#x903B;&#x8F91;&#x5907;&#x4EFD; &#x2013;&gt;<br>&#x6307;&#x5907;&#x4EFD;&#x540E;&#x7684;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x662F;&#x53EF;&#x8BFB;&#x7684;&#xFF0C;&#x901A;&#x5E38;&#x4E3A;&#x6587;&#x672C;&#x6587;&#x4EF6;&#xFF0C;&#x5185;&#x5BB9;&#x4E00;&#x822C;&#x662F;SQL&#x8BED;&#x53E5;&#xFF0C;&#x6216;&#x8005;&#x662F;&#x8868;&#x5185;&#x7684;&#x5B9E;&#x9645;&#x6570;&#x636E;&#xFF0C;&#x5982;mysqldump&#x548C;SELECT * INTO OUTFILE&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4E00;&#x822C;&#x9002;&#x7528;&#x4E8E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5347;&#x7EA7;&#x548C;&#x8FC1;&#x79FB;&#xFF0C;&#x6062;&#x590D;&#x65F6;&#x95F4;&#x8F83;&#x957F;</p>
<p>&#x88F8;&#x6587;&#x4EF6;&#x5907;&#x4EFD;&#x2013;&gt;<br>&#x62F7;&#x8D1D;&#x6570;&#x636E;&#x5E93;&#x7684;&#x7269;&#x7406;&#x6587;&#x4EF6;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x65E2;&#x53EF;&#x4EE5;&#x5904;&#x4E8E;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#xFF08;mysqlhotcopy &#x3001;ibbackup&#x3001;xtrabackup&#x8FD9;&#x7C7B;&#x5DE5;&#x5177;&#xFF09;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5904;&#x4E8E;&#x505C;&#x6B62;&#x72B6;&#x6001;&#xFF0C;&#x6062;&#x590D;&#x65F6;&#x95F4;&#x8F83;&#x77ED;&#x3002;</p>
<p>&#x6309;&#x7167;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5185;&#x5BB9;&#x6765;&#x5206;&#xFF0C;&#x53C8;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#xFF1A;<br>&#x5B8C;&#x5168;&#x5907;&#x4EFD;&#xFF1A;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x5B8C;&#x6574;&#x7684;&#x5907;&#x4EFD;<br>&#x589E;&#x91CF;&#x5907;&#x4EFD;&#xFF1A;&#x5728;&#x4E0A;&#x4E00;&#x6B21;&#x5B8C;&#x5168;&#x5907;&#x4EFD;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x5BF9;&#x66F4;&#x65B0;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x5907;&#x4EFD;&#xFF08;xtrabackup&#xFF09;<br>&#x65E5;&#x5FD7;&#x5907;&#x4EFD;&#xFF1A;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x5907;&#x4EFD;&#xFF0C;&#x4E3B;&#x4ECE;&#x590D;&#x5236;</p>
<p>2)&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x5DE5;&#x5177;mysqldump<br>&#x4F7F;&#x7528;&#x7684;&#x65F6;&#x5019;MySQL&#x5F53;&#x8981;&#x5BFC;&#x5165;&#x6216;&#x8005;&#x5BFC;&#x51FA;&#x6570;&#x636E;&#x91CF;&#x5927;&#x7684;&#x5E93;&#x7684;&#x65F6;&#x5019;,&#x7528;PHPMYADMIN&#x751A;&#x81F3;MySQL Administrator&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x90FD;&#x4F1A;&#x529B;&#x4E0D;&#x4ECE;&#x5FC3;,&#x8FD9;&#x65F6;&#x53EA;&#x80FD;&#x4F7F;&#x7528;MySQL&#x6240;&#x63D0;&#x4F9B;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;mysqldump&#x8FDB;&#x884C;&#x5907;&#x4EFD;&#x6062;&#x590D;&#xFF1B;&#x6570;&#x636E;&#x91CF;&#x5927;&#x7684;&#x65F6;&#x5019;&#x4E0D;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#xFF0C;&#x53EF;&#x652F;&#x6301;MyISAM,InnoDB</p>
<p>MySQL&#x6570;&#x636E;&#x7684;&#x5BFC;&#x51FA;&#x548C;&#x5BFC;&#x5165;&#x5DE5;&#x5177;: mysqldump</p>
<p>&#x5BFC;&#x51FA;&#x6570;&#x636E;&#xFF1A;<br>&#x8BED;&#x6CD5;&#xFF1A; mysqldump [TMPIONS] database [tables] &gt;&#x5BFC;&#x51FA;&#x7684;&#x6587;&#x4EF6;&#x540D;.sql</p>
<p>A:&#x5BFC;&#x51FA;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;</p>
<pre><code class="shell">mysqldump -uroot -pJaking@vip.163.com -A &gt;all.sql
mysqldump -uroot -pJaking@vip.163.com --all-databases &gt;all2.sql
</code></pre>
<p>&#x53C2;&#x6570;-A&#x4EE3;&#x8868;&#x6240;&#x6709;&#xFF0C;&#x7B49;&#x540C;&#x4E8E; &#x2013;all-databases</p>
<p>B:&#x5BFC;&#x51FA;&#x67D0;&#x4E2A;&#x6570;&#x636E;&#x5E93;</p>
<pre><code class="shell">mysqldump -u &#x7528;&#x6237;&#x540D; -p&#x5BC6;&#x7801; &#x6570;&#x636E;&#x5E93;&#x540D; &gt; &#x5BFC;&#x51FA;&#x7684;&#x6587;&#x4EF6;&#x540D;.sql  
mysqldump -uroot -pJaking@vip.163.com testdb &gt; testdb.sql
</code></pre>
<p>C:&#x5BFC;&#x51FA;&#x5355;&#x5F20;&#x8868;</p>
<pre><code class="shell">mysqldump -uroot -pJaking@vip.163.com testdb book1 &gt; testdb.book1.sql  #&#x5BFC;&#x51FA;testdb&#x5E93;book1&#x8868;
</code></pre>
<p>D:&#x5BFC;&#x51FA;&#x5E93;&#x7684;&#x8868;&#x7ED3;&#x6784;</p>
<pre><code class="shell">mysqldump -uroot -pJaking@vip.163.com -d testdb &gt; testdbtable.sql  #&#x53EA;&#x5BFC;&#x51FA;testdb&#x5E93;&#x7684;&#x8868;&#x7ED3;&#x6784;
</code></pre>
<p>E:&#x53EA;&#x5BFC;&#x51FA;&#x6570;&#x636E;</p>
<pre><code class="shell">mysqldump -uroot -pJaking@vip.163.com -t testdb &gt; testdbdata.sql  #&#x53EA;&#x5BFC;&#x51FA;testdb&#x5E93;&#x4E2D;&#x7684;&#x6570;&#x636E;
</code></pre>
<p>F:&#x5BFC;&#x51FA;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5E76;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x5E93;&#x7684;&#x521B;&#x5EFA;&#x8BED;&#x53E5;</p>
<pre><code class="shell">mysqldump -uroot -pJaking@vip.163.com -B testdb &gt; testdb.sql  #&#x751F;&#x6210;&#x5EFA;&#x5E93;&#x8BED;&#x53E5;
mysql -uroot -pJaking@vip.163.com &lt; testdb.sql  #&#x5BFC;&#x5165;&#x4E0D;&#x7528;&#x6307;&#x5B9A;&#x6570;&#x636E;&#x540D;
</code></pre>
<p>&#x5BFC;&#x5165;&#x6570;&#x636E;&#xFF1A;<br>A&#xFF1A;&#x5BFC;&#x5165;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;</p>
<pre><code>mysql -uroot -pJaking@vip.163.com &lt; all.sql
</code></pre><p>B&#xFF1A;&#x5BFC;&#x5165;&#x6570;&#x636E;&#x5E93;</p>
<pre><code class="shell">mysql -uroot -pJaking@vip.163.com testdb &lt; testdb.sql  #&#x5982;&#x679C;&#x5BFC;&#x5165;&#x65F6;&#xFF0C;&#x6CA1;&#x6709;&#x5BF9;&#x5E94;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x9700;&#x8981;&#x4F60;&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x4E00;&#x4E0B;
</code></pre>
<p>mysql&gt; create database testdb;</p>
<p>&#x4F7F;&#x7528;source&#x5BFC;&#x5165;<br>mysql&gt; drop database testdb;<br>mysql&gt; create database testdb;<br>mysql&gt; use testdb;<br>mysql&gt; source /tmp/testdb.sql</p>
<p>C:&#x5BFC;&#x5165;&#x8868;<br>mysql&gt; drop table testdb.book1;<br>mysql&gt; source /tmp/testdb.book1.sql;   #&#x5BFC;&#x5165;&#x8868;&#x65F6;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x8868;&#xFF0C;&#x8981;&#x5148;&#x8FDB;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4E2D;<br>mysql&gt; select * from testdb.book1;</p>
<p>D&#xFF1A;&#x5BFC;&#x5165;&#x8868;&#x7ED3;&#x6784;&#x548C;&#x6570;&#x636E;<br>mysql&gt; create database testdb;<br>mysql -uroot <a href="mailto:-pJaking@vip.163.com" target="_blank" rel="noopener">-pJaking@vip.163.com</a> testdb &lt; testdbtable.sql<br>mysql -uroot <a href="mailto:-pJaking@vip.163.com" target="_blank" rel="noopener">-pJaking@vip.163.com</a> testdb &lt; testdbdata.sql</p>
<p>mysqldump&#x8FDC;&#x7A0B;&#x5907;&#x4EFD;&#x4E0E;&#x6062;&#x590D;&#x6570;&#x636E;</p>
<p>&#x6587;&#x6863;&#xFF1A;10 mysqldump&#x8FDC;&#x7A0B;&#x5907;&#x4EFD;&#x4E0E;&#x6062;&#x590D;&#x6570;&#x636E;.md<br>&#x94FE;&#x63A5;&#xFF1A;<a href="http://note.youdao.com/noteshare?id=7af3e7cda297defe01228ed798e72c02&amp;sub=E2F44DF8E1BC4B9287EA434DEA3B670C" target="_blank" rel="noopener">http://note.youdao.com/noteshare?id=7af3e7cda297defe01228ed798e72c02&amp;sub=E2F44DF8E1BC4B9287EA434DEA3B670C</a></p>
<p>&#x8FDC;&#x7A0B;&#x5907;&#x4EFD;<br>mysqldump -h ip_addr -u db_user -p db_name &gt; file_name.sql<br>&#x8FDC;&#x7A0B;&#x6062;&#x590D;<br>mysql -h ip_addr -u db_user -p &lt; db_file.sql</p>
<p>3) mysqlhotcopy &#x88F8;&#x6587;&#x4EF6;&#x5907;&#x4EFD;    </p>
<p>&#x6CE8;&#x610F;&#xFF1A;5.7&#x7248;&#x672C;&#x5DF2;&#x7ECF;&#x53BB;&#x6389;&#x6B64;&#x547D;&#x4EE4;&#xFF0C;&#x8BF7;&#x5728;5.5&#x53CA;&#x4EE5;&#x4E0B;&#x7248;&#x672C;&#x6D4B;&#x8BD5;&#xFF01;<br>mysqlhotcopy&#x4F7F;&#x7528;lock tables&#x3001;flush tables&#x548C;cp&#x6216;scp&#x6765;&#x5FEB;&#x901F;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5B83;&#x662F;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x5E93;&#x6216;&#x5355;&#x4E2A;&#x8868;&#x6700;&#x5FEB;&#x7684;&#x9014;&#x5F84;,&#x5B8C;&#x5168;&#x5C5E;&#x4E8E;&#x7269;&#x7406;&#x5907;&#x4EFD;,&#x4F46;&#x53EA;&#x80FD;&#x7528;&#x4E8E;&#x5907;&#x4EFD;MyISAM&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x548C;&#x8FD0;&#x884C;&#x5728;&#x6570;&#x636E;&#x5E93;&#x76EE;&#x5F55;&#x6240;&#x5728;&#x7684;&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x4E0E;mysqldump&#x5907;&#x4EFD;&#x4E0D;&#x540C;,mysqldump&#x5C5E;&#x4E8E;&#x903B;&#x8F91;&#x5907;&#x4EFD;,&#x6062;&#x590D;&#x65F6;&#x662F;&#x6267;&#x884C;&#x7684;sql&#x8BED;&#x53E5;&#x3002;</p>
<p>mysqlhotcopy&#x672C;&#x8D28;&#x662F;&#x4F7F;&#x7528;&#x9501;&#x8868;&#x8BED;&#x53E5;&#x540E;&#x518D;&#x4F7F;&#x7528;cp&#x6216;scp&#x62F7;&#x8D1D;&#x6570;&#x636E;&#x5E93;</p>
<p>1.&#x5B89;&#x88C5;mysqlhotcopy</p>
<p>yum provides mysqlhotcopy<br>yum install -y mariadb-server</p>
<p>2.&#x67E5;&#x770B;mysqlhotcopy&#x5E2E;&#x52A9;&#x4FE1;&#x606F;</p>
<p>mysqlhotcopy &#x2013;help<br>  &#x2013;allowold   don&#x2019;t abort if target dir already exists (rename it _old) &#x2013;&#x4E0D;&#x8986;&#x76D6;&#x4EE5;&#x524D;&#x5907;&#x4EFD;&#x7684;&#x6587;&#x4EF6;<br>  &#x2013;addtodest  don&#x2019;t rename target dir if it exists, just add files to it      &#x2013;&#x5C5E;&#x4E8E;&#x589E;&#x91CF;&#x5907;&#x4EFD;<br>  &#x2013;noindices   don&#x2019;t include full index files in copy          &#x2013;&#x4E0D;&#x5907;&#x4EFD;&#x7D22;&#x5F15;&#x6587;&#x4EF6;<br>  &#x2013;debug     enable debug                                 &#x2013;&#x542F;&#x7528;&#x8C03;&#x8BD5;&#x8F93;&#x51FA;<br>  &#x2013;regexp=#   copy all databases with names matching regexp  &#x2013;&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;<br>  &#x2013;checkpoint=#  insert checkpoint entry into specified db.table    &#x2013;&#x63D2;&#x5165;&#x68C0;&#x67E5;&#x70B9;&#x6761;&#x76EE;<br>  &#x2013;flushlog      flush logs once all tables are locked          &#x2013;&#x6240;&#x6709;&#x8868;&#x9501;&#x5B9A;&#x540E;&#x5237;&#x65B0;&#x65E5;&#x5FD7;<br>  &#x2013;resetmaster    reset the binlog once all tables are locked     &#x2013;&#x4E00;&#x65E6;&#x9501;&#x8868;&#x91CD;&#x7F6E;binlog&#x6587;&#x4EF6;<br>  &#x2013;resetslave  reset the master.info once all tables are locked  &#x2013;&#x4E00;&#x65E6;&#x9501;&#x8868;&#x91CD;&#x7F6E;master.info&#x6587;&#x4EF6; </p>
<p>&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;&#xFF1A;<br>A&#xFF1A;&#x5907;&#x4EFD;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x5230;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#x4E2D;<br>mysqlhotcopy -u root -p <a href="mailto:Jaking@vip.163.com" target="_blank" rel="noopener">Jaking@vip.163.com</a> BOOK /tmp  #-u -p &#x540E;&#x9762;&#x90FD;&#x6709;&#x7A7A;&#x683C;</p>
<p>[root@jaking ~]# mysqlhotcopy -u root -p <a href="mailto:Jaking@vip.163.com" target="_blank" rel="noopener">Jaking@vip.163.com</a> BOOK /tmp<br>Flushed 1 tables with read lock (<code>BOOK</code>.<code>book</code>) in 0 seconds.<br>Locked 0 views () in 0 seconds.<br>Copying 2 files&#x2026;<br>Copying indices for 0 files&#x2026;<br>Unlocked tables.<br>mysqlhotcopy copied 1 tables (2 files) in 0 seconds (0 seconds overall).<br>[root@jaking ~]# ls /tmp<br>BOOK<br>[root@jaking ~]# ls /tmp/BOOK/<br>book.frm  db.opt</p>
<p>&#x5BF9;&#x6BD4;&#x4E0B;&#x5927;&#x5C0F;</p>
<p>[root@jaking ~]# du -sh /var/lib/mysql/BOOK/ /tmp/BOOK/<br>16K     /var/lib/mysql/BOOK/<br>16K     /tmp/BOOK/</p>
<p>B&#xFF1A;&#x5907;&#x4EFD;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x5230;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;</p>
<pre><code class="shell">[root@jaking ~]# rm -rf /tmp/*
[root@jaking ~]# mysqlhotcopy -u root -p Jaking@vip.163.com BOOK mysql /tmp/
mysqlhotcopy -u root -p Jaking@vip.163.com BOOK mysql /tmp/
Flushed 23 tables with read lock (`BOOK`.`book`, `mysql`.`columns_priv`, `mysql`.`db`, `mysql`.`event`, `mysql`.`func`, `mysql`.`help_category`, `mysql`.`help_keyword`, `mysql`.`help_relation`, `mysql`.`help_topic`, `mysql`.`host`, `mysql`.`ndb_binlog_index`, `mysql`.`plugin`, `mysql`.`proc`, `mysql`.`procs_priv`, `mysql`.`proxies_priv`, `mysql`.`servers`, `mysql`.`tables_priv`, `mysql`.`time_zone`, `mysql`.`time_zone_leap_second`, `mysql`.`time_zone_name`, `mysql`.`time_zone_transition`, `mysql`.`time_zone_transition_type`, `mysql`.`user`) in 0 seconds.
Locked 0 views () in 0 seconds.
Copying 2 files...
Copying indices for 0 files...
Copying 72 files...
Copying indices for 0 files...
Unlocked tables.
mysqlhotcopy copied 24 tables (74 files) in 0 seconds (0 seconds overall).

[root@jaking ~]# ls /tmp
BOOK  mysql
[root@jaking ~]# du -h /tmp 
0       /tmp/.X11-unix
0       /tmp/.font-unix
0       /tmp/.ICE-unix
0       /tmp/.XIM-unix
0       /tmp/.Test-unix
16K     /tmp/BOOK
1004K   /tmp/mysql
1020K   /tmp
[root@jaking ~]# du -h /var/lib/mysql/
1004K   /var/lib/mysql/mysql
212K    /var/lib/mysql/performance_schema
16K     /var/lib/mysql/BOOK
30M     /var/lib/mysql/
</code></pre>
<p>C&#xFF1A;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x67D0;&#x4E2A;&#x8868;<br>&#x8BED;&#x6CD5;&#xFF1A;mysqlhotcopy -u &#x7528;&#x6237; -p &#x5BC6;&#x7801; &#x6570;&#x636E;&#x5E93;&#x540D;./&#x8981;&#x5907;&#x4EFD;&#x7684;&#x8868;&#x540D;/  &#x8981;&#x5907;&#x4EFD;&#x7684;&#x8DEF;&#x5F84;</p>
<p>mysqlhotcopy -u root -p <a href="mailto:Jaking@vip.163.com" target="_blank" rel="noopener">Jaking@vip.163.com</a> BOOK./book/ /tmp/   #&#x6CE8;&#x610F;&#x6700;&#x540E;&#x7684; / &#x4E00;&#x5B9A;&#x8981;&#x6709;&#xFF01;<br>&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x628A;&#x5BF9;&#x5E94;&#x7684;&#x8868;&#x6587;&#x4EF6;&#x590D;&#x5236;&#x5230;/tmp&#x76EE;&#x5F55;&#x4E0B;</p>
<pre><code class="shell">[root@jaking ~]# rm -rf *
[root@jaking ~]# mysqlhotcopy -u root -p Jaking@vip.163.com BOOK./book/ /tmp/   Flushed 1 tables with read lock (`BOOK`.`book`) in 0 seconds.
Locked 0 views () in 0 seconds.
Copying 1 files...
Copying indices for 0 files...
Unlocked tables.
mysqlhotcopy copied 1 tables (1 files) in 0 seconds (0 seconds overall).
[root@jaking ~]# ls BOOK/
book.frm
[root@jaking ~]# ll /tmp/BOOK/
total 12
-rw-rw---- 1 mysql mysql 8624 Apr 22 14:31 book.frm
</code></pre>
<p>D:&#x6062;&#x590D;&#x6570;&#x636E;</p>
<p>&#x7834;&#x574F;&#x6570;&#x636E;</p>
<pre><code class="shell">[root@jaking tmp]# cd /var/lib/mysql/
[root@jaking mysql]# ls
aria_log.00000001  BOOK     ib_logfile0  mysql       performance_schema
aria_log_control   ibdata1  ib_logfile1  mysql.sock
[root@jaking mysql]# rm -rf BOOK/
[root@jaking mysql]# ls
aria_log.00000001  ibdata1      ib_logfile1  mysql.sock
aria_log_control   ib_logfile0  mysql        performance_schema
[root@jaking mysql]#

[root@jaking ~]# mysql -uroot -pJaking@vip.163.com
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 39
Server version: 5.5.52-MariaDB MariaDB Server

Copyright (c) 2000, 2016, Oracle, MariaDB Corporation Ab and others.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.
</code></pre>
<pre><code class="sql">MariaDB [(none)]&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
+--------------------+
3 rows in set (0.00 sec)

MariaDB [(none)]&gt;
</code></pre>
<p>&#x5F00;&#x59CB;&#x6062;&#x590D;</p>
<pre><code class="shell">[root@jaking mysql]# cp -ra /tmp/BOOK/ /var/lib/mysql/
[root@jaking mysql]# ll /var/lib/mysql/
total 28700
-rw-rw---- 1 mysql mysql    16384 Apr 22 14:29 aria_log.00000001
-rw-rw---- 1 mysql mysql       52 Apr 22 14:29 aria_log_control
drwxr-x--- 2 mysql mysql       22 Apr 22 14:53 BOOK
-rw-rw---- 1 mysql mysql 18874368 Apr 22 14:53 ibdata1
-rw-rw---- 1 mysql mysql  5242880 Apr 22 14:53 ib_logfile0
-rw-rw---- 1 mysql mysql  5242880 Apr 22 14:29 ib_logfile1
drwx------ 2 mysql mysql     4096 Apr 22 14:29 mysql
srwxrwxrwx 1 mysql mysql        0 Apr 22 14:29 mysql.sock
drwx------ 2 mysql mysql     4096 Apr 22 14:29 performance_schema
[root@jaking mysql]# chown -Rf mysql:mysql /var/lib/mysql/BOOK/

[root@jaking ~]# mysql -uroot -pJaking@vip.163.com
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 40
Server version: 5.5.52-MariaDB MariaDB Server

Copyright (c) 2000, 2016, Oracle, MariaDB Corporation Ab and others.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.
</code></pre>
<pre><code class="sql">MariaDB [(none)]&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| BOOK               |
| mysql              |
| performance_schema |
+--------------------+
4 rows in set (0.00 sec)

MariaDB [(none)]&gt; use BOOK;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
MariaDB [BOOK]&gt; show tables;
+----------------+
| Tables_in_BOOK |
+----------------+
| book           |
+----------------+
1 row in set (0.00 sec)

MariaDB [BOOK]&gt; select * from book;
+-------------------------+-------+-------+
| name                    | price | pages |
+-------------------------+-------+-------+
| Linux                   |    30 |   666 |
| Cloud Computing         |    60 |   666 |
| Operation System        |    80 |   666 |
| Artificial Intelligence |   166 |   666 |
+-------------------------+-------+-------+
4 rows in set (0.00 sec)

MariaDB [BOOK]&gt; 
</code></pre>
<p>&#x603B;&#x7ED3;&#xFF1A;<br>mysqldump&#x548C;mysqlhotcopy&#x7684;&#x6BD4;&#x8F83;&#xFF1A;<br>1&#x3001;mysqldump &#x662F;&#x91C7;&#x7528;SQL&#x7EA7;&#x522B;&#x7684;&#x5907;&#x4EFD;&#x673A;&#x5236;&#xFF0C;&#x5B83;&#x5C06;&#x6570;&#x636E;&#x8868;&#x5BFC;&#x6210; SQL &#x811A;&#x672C;&#x6587;&#x4EF6;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x5927;&#x65F6;&#xFF0C;&#x5360;&#x7528;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x8F83;&#x591A;&#xFF0C;&#x652F;&#x6301;&#x5E38;&#x7528;&#x7684;MyISAM&#xFF0C;Innodb<br>2&#x3001;mysqlhotcopy&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x7F13;&#x5B58;&#x5199;&#x5165;&#x548C;&#x6587;&#x4EF6;&#x590D;&#x5236;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x5360;&#x7528;&#x8D44;&#x6E90;&#x548C;&#x5907;&#x4EFD;&#x901F;&#x5EA6;&#x6BD4;mysqldump&#x5FEB;&#x5F88;&#x591A;&#xFF1B;&#x7279;&#x522B;&#x9002;&#x5408;&#x5927;&#x7684;&#x6570;&#x636E;&#x5E93;<br>3&#x3001;mysqlhotcopy&#x53EA;&#x80FD;&#x8FD0;&#x884C;&#x5728;&#x6570;&#x636E;&#x5E93;&#x6570;&#x636E;&#x76EE;&#x5F55;&#x6240;&#x5728;&#x7684;&#x673A;&#x5668;&#x4E0A;&#xFF0C;mysqldump&#x53EF;&#x4EE5;&#x7528;&#x5728;&#x8FDC;&#x7A0B;&#x5BA2;&#x6237;&#x7AEF;<br>4&#x3001;&#x76F8;&#x540C;&#x7684;&#x5730;&#x65B9;&#x90FD;&#x662F;&#x5728;&#x7EBF;&#x6267;&#x884C;LOCK TABLES &#x4EE5;&#x53CA; UNLOCK TABLES<br>5&#x3001;mysqlhotcopy&#x6062;&#x590D;&#x53EA;&#x9700;&#x8981;COPY&#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x5230;&#x6E90;&#x76EE;&#x5F55;&#x8986;&#x76D6;&#x5373;&#x53EF;&#xFF0C;mysqldump&#x9700;&#x8981;&#x5BFC;&#x5165;SQL&#x6587;&#x4EF6;&#x5230;&#x539F;&#x6765;&#x5E93;&#x4E2D;</p>
<p>&#x5B9E;&#x6218;&#xFF1A;&#x5199;&#x4E2A;&#x81EA;&#x52A8;&#x5907;&#x4EFD;MySQL&#x6570;&#x636E;&#x5E93;shell&#x811A;&#x672C;<br>vim  mysql-autoback.sh </p>
<p>#!/bin/bash<br>export LANG=en_US.UTF-8<br>mkdir /database_back &amp;&gt;/dev/null<br>savedir=/database_back<br>cd &#x201C;$savedir&#x201D;<br>time=&#x201D;$(date +&#x201D;%Y-%m-%d&#x201D;)&#x201D;<br>mysqldump -u root <a href="mailto:-pJaking@vip.163.com" target="_blank" rel="noopener">-pJaking@vip.163.com</a> book &gt; book-&#x201C;$time&#x201D;.sql  </p>
<p>&#x518D;&#x6DFB;&#x52A0;&#x8BA1;&#x5212;&#x4EFB;&#x52A1; crontab &#x5C31;&#x884C;</p>
<p>xtrabackup&#x5907;&#x4EFD;&#x5DE5;&#x5177;&#x4F7F;&#x7528;</p>
<p>1&#x3001;xtrabackup&#x7B80;&#x4ECB;</p>
<p>Xtrabackup&#x5305;&#x62EC;&#x4E24;&#x4E2A;&#x4E3B;&#x8981;&#x5DE5;&#x5177;&#xFF1A;Xtrabackup&#x548C;innobackupex&#xFF1A;<br>Xtrabackup&#x53EA;&#x80FD;&#x5907;&#x4EFD;InnoDB&#x548C;XtraDB&#x4E24;&#x79CD;&#x5F15;&#x64CE;&#x8868;&#xFF0C;&#x800C;&#x4E0D;&#x80FD;&#x5907;&#x4EFD;MyISAM&#x6570;&#x636E;&#x8868;</p>
<p>&#x6211;&#x4EEC;&#x77E5;&#x9053;&#xFF0C;&#x9488;&#x5BF9;InnoDB&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#xFF0C;MySQL&#x672C;&#x8EAB;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x5408;&#x9002;&#x7684;&#x70ED;&#x5907;&#x5DE5;&#x5177;&#xFF0C;ibbackup&#x867D;&#x662F;&#x4E00;&#x6B3E;&#x9AD8;&#x6548;&#x7684;&#x9996;&#x9009;&#x70ED;&#x5907;&#x65B9;&#x5F0F;&#xFF0C;&#x4F46;&#x5B83;&#x662F;&#x662F;&#x6536;&#x8D39;&#x7684;&#x3002;&#x597D;&#x5728;Percona&#x516C;&#x53F8;&#x7ED9;&#x5927;&#x5BB6;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x3001;&#x514D;&#x8D39;&#x7684;Xtrabackup&#x70ED;&#x5907;&#x5DE5;&#x5177;&#xFF0C;&#x5B83;&#x53EF;&#x5B9E;&#x73B0;ibbackup&#x7684;&#x6240;&#x6709;&#x529F;&#x80FD;&#xFF0C;&#x5E76;&#x4E14;&#x8FD8;&#x6269;&#x5C55;&#x652F;&#x6301;&#x771F;&#x6B63;&#x7684;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x529F;&#x80FD;&#xFF0C;&#x662F;&#x5546;&#x4E1A;&#x5907;&#x4EFD;&#x5DE5;&#x5177;InnoDB Hotbackup&#x7684;&#x4E00;&#x4E2A;&#x5F88;&#x597D;&#x7684;&#x66FF;&#x4EE3;&#x54C1;&#x3002;</p>
<p>2&#x3001;Percona-XtraBackup &#x5B89;&#x88C5; &#xFF08;mysql5.7.20&#x9700;&#x5B89;&#x88C5;XtraBackup2.4.9&#xFF09;</p>
<p>&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x5305;<br> [root@jaking ~]# wget <a href="https://www.percona.com/downloads/XtraBackup/Percona-XtraBackup-2.4.9/binary/redhat/7/x86_64/Percona-XtraBackup-2.4.9-ra467167cdd4-el7-x86_64-bundle.tar" target="_blank" rel="noopener">https://www.percona.com/downloads/XtraBackup/Percona-XtraBackup-2.4.9/binary/redhat/7/x86_64/Percona-XtraBackup-2.4.9-ra467167cdd4-el7-x86_64-bundle.tar</a> </p>
<p>&#x89E3;&#x538B;&#x5305;<br>[root@jaking ~]# tar -xvf Percona-XtraBackup-2.4.9-ra467167cdd4-el7-x86_64-bundle.tar </p>
<p>yum&#x5B89;&#x88C5;&#x5E76;&#x89E3;&#x51B3;&#x4F9D;&#x8D56;&#xFF1A;<br>yum -y localinstall percona-xtrabackup-24-2.4.9-1.el7.x86_64.rpm </p>
<p>&#x6216;&#x8005;<br>yum install -y <a href="https://repo.percona.com/yum/percona-release-latest.noarch.rpm" target="_blank" rel="noopener">https://repo.percona.com/yum/percona-release-latest.noarch.rpm</a></p>
<p>&#x6216;&#x8005;<br>rpm -ivh percona-release-latest.noarch.rpm</p>
<p>yum install -y percona-xtrabackup-24.x86_64</p>
<p>&#x5982;&#x679C;&#x51FA;&#x73B0;&#x4EE5;&#x4E0B;&#x62A5;&#x9519;&#xFF1A;<br>Error: Package: percona-xtrabackup-24-2.4.22-1.el7.x86_64 (percona-release-x86_64)<br>           Requires: libev.so.4()(64bit)</p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;</p>
<pre><code class="shell">[root@jaking ~]# wget ftp://rpmfind.net/linux/atrpms/el6-x86_64/atrpms/stable/libev-4.04-2.el6.x86_64.rpm
[root@jaking ~]# rpm -ivh libev-4.04-2.el6.x86_64.rpm 
[root@jaking ~]# rz
rz waiting to receive.
 zmodem trl+C &#x221;

  100%    7805 KB 7805 KB/s 00:00:01       0 Errors2.4.22-1.el7.x86_64.rpm...

[root@jaking ~]# ls -hl
total 7.7M
-rw-r--r--  1 root root  38K May 13 09:36 libev-4.04-2.el6.x86_64.rpm
-rwxr-xr-x. 1 root root  937 Apr 23 03:57 named.sh
-rw-r--r--  1 root root 7.7M Mar 10 04:56 percona-xtrabackup-24-2.4.22-1.el7.x86_64.rpm

&#x6216;&#x8005;
[root@jaking ~]# yum install -y percona-xtrabackup #&#x5907;&#x9009;&#x65B9;&#x6848;

&#x6216;&#x8005;

[root@jaking ~]# rpm -ivh mysql-community-libs-compat-5.7.20-1.el7.x86_64.rpm
[root@jaking ~]# yum install -y cmake gcc gcc-c++ libaio libaio-devel automake autoconf bzr rsync
[root@jaking ~]# yum  install -y perl perl-devel libaio libaio-devel perl-Time-HiRes perl-DBD-MySQL  perl-Digest-MD5
[root@jaking ~]# rpm -ivh percona-xtrabackup-24-2.4.22-1.el7.x86_64.rpm
Preparing...                          ################################# [100%]
Updating / installing...
   1:percona-xtrabackup-24-2.4.22-1.el################################# [100%]
[root@jaking ~]# which xtrabackup
/usr/bin/xtrabackup
[root@jaking ~]# xtrabackup --version
xtrabackup: recognized server arguments: --datadir=/var/lib/mysql 
xtrabackup version 2.4.22 based on MySQL server 5.7.32 Linux (x86_64) (revision id: c99a781)

&#x6CE8;&#x610F;&#xFF1A;my.cnf&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x91CC;datadir&#x6307;&#x5B9A;&#x7684;MySQL&#x6570;&#x636E;&#x8DEF;&#x5F84;

[root@jaking ~]#cat /etc/my.cnf
[mysqld]
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock
symbolic-links=0

log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid
skip-name-resolve

[root@jaking ~]# systemctl restart mysqld  
</code></pre>
<p><span style="color:orange">fnaichu:</span><br>&#x5148;&#x5B89;&#x88C5;epel&#x6E90;<br>yum install -y epel-release</p>
<p>&#x5B89;&#x88C5;MySQL&#xFF0C;&#x786E;&#x4FDD;&#x81F3;&#x5C11;&#x5B89;&#x88C5;&#x6709;&#x4EE5;&#x4E0B;5&#x4E2A;&#x5305;&#xFF1A;</p>
<p>&#x5B89;&#x88C5;xtrabackup:<br>&#x53C2;&#x8003;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF1A;<a href="https://docs.percona.com/percona-xtrabackup/2.4/installation/yum_repo.html" target="_blank" rel="noopener">https://docs.percona.com/percona-xtrabackup/2.4/installation/yum_repo.html</a></p>
<p>&#x5B89;&#x88C5;xtrabackup&#x4F9D;&#x8D56;&#x5305;<br>yum install <a href="https://repo.percona.com/yum/percona-release-latest.noarch.rpm" target="_blank" rel="noopener">https://repo.percona.com/yum/percona-release-latest.noarch.rpm</a></p>
<p>&#x4E0B;&#x8F7D;xtrabackup&#x5B89;&#x88C5;&#x5305;<br>wget <a href="https://www.percona.com/downloads/XtraBackup/Percona-XtraBackup-2.4.4/\" target="_blank" rel="noopener">https://www.percona.com/downloads/XtraBackup/Percona-XtraBackup-2.4.4/\</a><br>binary/redhat/7/x86_64/percona-xtrabackup-24-2.4.4-1.el7.x86_64.rpm</p>
<p>&#x5B89;&#x88C5;xtrabackup<br>yum localinstall percona-xtrabackup-24-2.4.4-1.el7.x86_64.rpm</p>
<p>3&#x3001;xtrbackup&#x4F7F;&#x7528;<br>&#x4E00;&#x822C;&#x4F7F;&#x7528;innobackupex&#x811A;&#x672C;<br>innobackupex&#x662F;perl&#x811A;&#x672C;&#x5BF9;xtrabackup&#x7684;&#x5C01;&#x88C5;&#x548C;&#x529F;&#x80FD;&#x6269;&#x5C55;</p>
<p>&#x5907;&#x4EFD;&#x51C6;&#x5907;&#x5DE5;&#x4F5C;&#xFF1A;<br>&#x6743;&#x9650;&#x548C;&#x8FDE;&#x63A5;<br>xtrabackup&#x9700;&#x8981;&#x8FDE;&#x63A5;&#x5230;&#x6570;&#x636E;&#x5E93;&#x548C;datadir&#x64CD;&#x4F5C;&#x6743;&#x9650;<br>xtrabackup&#x6216;&#x8005;innobackupex&#x5728;&#x4F7F;&#x7528;&#x8FC7;&#x7A0B;&#x4E2D;&#x6D89;&#x53CA;&#x5230;&#x4E24;&#x7C7B;&#x7528;&#x6237;&#x6743;&#x9650;</p>
<p>1.&#x7CFB;&#x7EDF;&#x7528;&#x6237;&#xFF0C;&#x7528;&#x6765;&#x8C03;&#x7528;innobackupex&#x6216;&#x8005;xtrabackup</p>
<p>2.&#x6570;&#x636E;&#x5E93;&#x7528;&#x6237;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x5185;&#x4F7F;&#x7528;&#x7684;&#x7528;&#x6237;</p>
<pre><code>  &#x5176;&#x4ED6;&#x8FDE;&#x63A5;&#x9009;&#x9879;&#xFF1A;
</code></pre><p>| &#x70B9;&#x51FB;&#x8FD9;&#x91CC; | &#x70B9;&#x51FB;&#x8FD9;&#x91CC; |<br>|    Tmpion<br>    |    Description<br>    |<br>|   &#x2013;port<br>   |   The port to use when connecting to the database   server with TCP/IP.<br>   |<br>|   &#x2013;socket<br>   |   The socket to use when   connecting to the local database.<br>   |<br>|   &#x2013;host<br>   |   The host to use when connecting   to the database server with TCP/IP.<br>   |</p>
<p>&#x53EF;&#x4EE5;&#x5355;&#x72EC;&#x521B;&#x5EFA;&#x7528;&#x6765;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x5E93;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x5B89;&#x5168;&#xFF0C;&#x5E76;&#x8D4B;&#x4E88;&#x5BF9;&#x5E94;&#x7684;&#x6743;&#x9650;</p>
<p>4&#x3001;&#x5168;&#x5907;&#x548C;&#x5168;&#x5907;&#x8FD8;&#x539F;</p>
<p>&#x4F7F;&#x7528;innobackupex&#x521B;&#x5EFA;&#x5168;&#x5907;</p>
<p>&#x521B;&#x5EFA;&#x5168;&#x5907;&#xFF1A;<br>innobackupex &#x2013;user=root <a href="mailto:--password=Jaking@vip.163.com" target="_blank" rel="noopener">--password=Jaking@vip.163.com</a> /tmp/db_backup/<br>innobackupex &#x2013;user=root <a href="mailto:--password=Jaking@vip.163.com" target="_blank" rel="noopener">--password=Jaking@vip.163.com</a> /tmp/db_backup/ &amp;&gt;&gt;/tmp/db_backup.log<br>&amp;&gt;&gt;/tmp/db_backup.log   #&#x4E0D;&#x663E;&#x793A;&#x8F93;&#x51FA;&#x4FE1;&#x606F;&#xFF0C;&#x8F93;&#x51FA;&#x4FE1;&#x606F;&#x91CD;&#x5B9A;&#x5411;&#x5230;db_backup.log</p>
<p>[root@jaking ~]# ls /tmp<br>db_backup  db_backup.log  percona-version-check<br>[root@jaking ~]# ls /tmp/db_backup<br>2021-05-14_08-08-38<br>[root@jaking ~]# ls /tmp/db_backup/2021-05-14_08-08-38/<br>backup-my.cnf   ibdata1             sys                     xtrabackup_info<br>book1           market              testbookdb              xtrabackup_logfile<br>book2           mysql               testdb<br>ib_buffer_pool  performance_schema  xtrabackup_checkpoints </p>
<p>&#x5185;&#x90E8;&#x673A;&#x5236;&#xFF1A;&#x5728;&#x5907;&#x4EFD;&#x7684;&#x65F6;&#x5019;innobackupex&#x4F1A;&#x8C03;&#x7528;xtrabackup&#x6765;&#x5907;&#x4EFD;innodb&#x8868;&#xFF0C;&#x5E76;&#x590D;&#x5236;&#x6240;&#x6709;&#x7684;&#x8868;&#x5B9A;&#x4E49;&#xFF0C;&#x5176;&#x4ED6;&#x5F15;&#x64CE;&#x7684;&#x8868;(MyISAM,MERGE,CSV,ARCHIVE)<br>innobackupex&#x662F;&#x4E00;&#x4E2A;&#x5C01;&#x88C5;&#x4E86;xtrabackup&#x7684;&#x811A;&#x672C;&#xFF0C;&#x80FD;&#x540C;&#x65F6;&#x5904;&#x7406;innodb&#x548C;myisam&#xFF0C;&#x4F46;&#x5728;&#x5904;&#x7406;myisam&#x65F6;&#x9700;&#x8981;&#x52A0;&#x4E00;&#x4E2A;&#x8BFB;&#x9501;</p>
<p>&#x5176;&#x4ED6;&#x9009;&#x9879;:<br>&#x2013;no-timestamp&#xFF0C;&#x6307;&#x5B9A;&#x4E86;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x5907;&#x4EFD;&#x4F1A;&#x76F4;&#x63A5;&#x5907;&#x4EFD;&#x5728;BACKUP-DIR&#xFF0C;&#x4E0D;&#x518D;&#x521B;&#x5EFA;&#x65F6;&#x95F4;&#x6233;&#x6587;&#x4EF6;&#x5939;<br>&#x2013;default-file&#xFF0C;&#x6307;&#x5B9A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x7528;&#x6765;&#x914D;&#x7F6E;innobackupex&#x7684;&#x9009;&#x9879;&#xFF0C;&#x8BE5;&#x9009;&#x9879;&#x6307;&#x5B9A;&#x4E86;&#x4ECE;&#x54EA;&#x4E2A;&#x6587;&#x4EF6;&#x8BFB;&#x53D6;MySQL&#x914D;&#x7F6E;</p>
<p>innobackupex &#x2013;user=root <a href="mailto:--password=Jaking@vip.163.com" target="_blank" rel="noopener">--password=Jaking@vip.163.com</a> &#x2013;no-timestamp /tmp/db_backup/full (&#x4F7F;&#x7528;&#x2013;no-timestamp&#x65F6;&#xFF0C;&#x540E;&#x9762;&#x7684;&#x8FD9;&#x4E2A;full&#x76EE;&#x5F55;&#x5FC5;&#x987B;&#x8DDF;&#x4E0A;&#x4E14;&#x4E0D;&#x80FD;&#x63D0;&#x524D;&#x81EA;&#x5DF1;&#x5EFA;&#x7ACB;&#xFF0C;&#x5B83;&#x7531;innobackupex&#x81EA;&#x52A8;&#x5EFA;&#x7ACB;&#xFF0C;&#x5426;&#x5219;&#x53EF;&#x80FD;&#x4F1A;&#x62A5;&#x9519;innobackupex: Error: Failed to create backup directory) (Errcode: 17 - File exists)</p>
<p>[root@jaking ~]# innobackupex &#x2013;default-file=/etc/my.cnf &#x2013;user=root <a href="mailto:--password=Jaking@vip.163.com" target="_blank" rel="noopener">--password=Jaking@vip.163.com</a> &#x2013;no-timestamp /tmp/db_backup/full<br>[root@jaking ~]# ls /tmp/db_backup/<br>full</p>
<p>&#x4F7F;&#x7528;innobackupex&#x8FD8;&#x539F;&#x5907;&#x4EFD;</p>
<p>&#x4F7F;&#x7528;innobackupex &#x2013;copy-back &#x6765;&#x8FD8;&#x539F;&#x5907;&#x4EFD;</p>
<p>&#x505C;&#x6B62;MySQL&#x670D;&#x52A1;</p>
<p>systemctl stop mysqld</p>
<p>&#x5220;&#x9664;&#x6570;&#x636E;&#xFF1A;&#xFF08;&#x5371;&#x9669;&#x52A8;&#x4F5C;&#xFF09;</p>
<pre><code class="shell">[root@jaking ~]# systemctl stop mysqld
[root@jaking ~]# ls /var/lib/mysql
auto.cnf    client-cert.pem  ib_logfile0         private_key.pem  sys
BOOK        client-key.pem   ib_logfile1         public_key.pem   testbookdb
ca-key.pem  ib_buffer_pool   mysql               server-cert.pem
ca.pem      ibdata1          performance_schema  server-key.pem
[root@jaking ~]# rm -rf /var/lib/mysql/*
[root@jaking ~]# ls /var/lib/mysql

&#x8FD8;&#x539F;:
[root@jaking ~]# innobackupex --copy-back /tmp/db_backup/full/ 
[root@jaking ~]# ls /var/lib/mysql
BOOK            ibdata1  performance_schema  testbookdb
ib_buffer_pool  mysql    sys                 xtrabackup_info

&#x67E5;&#x770B;&#x6743;&#x9650;
[root@jaking ~]# ll /var/lib/mysql
total 12324
drwxr-x--- 2 root root       52 Apr 23 04:53 BOOK
-rw-r----- 1 root root      310 Apr 23 04:53 ib_buffer_pool
-rw-r----- 1 root root 12582912 Apr 23 04:53 ibdata1
drwxr-x--- 2 root root     4096 Apr 23 04:53 mysql
drwxr-x--- 2 root root     8192 Apr 23 04:53 performance_schema
drwxr-x--- 2 root root     8192 Apr 23 04:53 sys
drwxr-x--- 2 root root       88 Apr 23 04:53 testbookdb
-rw-r----- 1 root root      472 Apr 23 04:53 xtrabackup_info

&#x91CD;&#x65B0;&#x6388;&#x6743;
[root@jaking ~]# chown -Rf mysql:mysql /var/lib/mysql   #&#x8981;&#x4E0D;&#x7136;MySQL&#x670D;&#x52A1;&#x4E0D;&#x80FD;&#x542F;&#x52A8;
[root@jaking ~]# ll /var/lib/mysql                   
total 12324
drwxr-x--- 2 mysql mysql       52 Apr 23 04:53 BOOK
-rw-r----- 1 mysql mysql      310 Apr 23 04:53 ib_buffer_pool
-rw-r----- 1 mysql mysql 12582912 Apr 23 04:53 ibdata1
drwxr-x--- 2 mysql mysql     4096 Apr 23 04:53 mysql
drwxr-x--- 2 mysql mysql     8192 Apr 23 04:53 performance_schema
drwxr-x--- 2 mysql mysql     8192 Apr 23 04:53 sys
drwxr-x--- 2 mysql mysql       88 Apr 23 04:53 testbookdb
-rw-r----- 1 mysql mysql      472 Apr 23 04:53 xtrabackup_info
[root@jaking ~]# systemctl start mysqld

&#x6CE8;&#xFF1A;datadir&#x5FC5;&#x987B;&#x662F;&#x4E3A;&#x7A7A;&#x7684;&#xFF0C;innobackupex &#x2013;copy-back&#x4E0D;&#x4F1A;&#x8986;&#x76D6;&#x5DF2;&#x5B58;&#x5728;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x8FD8;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x8FD8;&#x539F;&#x65F6;&#x9700;&#x8981;&#x5148;&#x5173;&#x95ED;&#x670D;&#x52A1;&#xFF0C;&#x5982;&#x679C;&#x670D;&#x52A1;&#x662F;&#x542F;&#x52A8;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4E0D;&#x80FD;&#x8FD8;&#x539F;&#x5230;datadir

[root@jaking ~]# ls /var/lib/mysql
auto.cnf  mysql  performance_schema  sys

[root@jaking ~]# innobackupex --copy-back /tmp/db_backup/full/
xtrabackup: recognized server arguments: --datadir=/var/lib/mysql 
xtrabackup: recognized client arguments: 
220423 05:01:30 innobackupex: Starting the copy-back operation

IMPORTANT: Please check that the copy-back run completes successfully.
           At the end of a successful copy-back run innobackupex
           prints &quot;completed OK!&quot;.

innobackupex version 2.4.22 based on MySQL server 5.7.32 Linux (x86_64) (revision id: c99a781)
Original data directory /var/lib/mysql is not empty!

[root@jaking ~]# mysql -uroot -pJaking@vip.163.com
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 3
Server version: 5.7.20 MySQL Community Server (GPL)

Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.
</code></pre>
<pre><code class="sql">mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| BOOK               |
| mysql              |
| performance_schema |
| sys                |
| testbookdb         |
+--------------------+
6 rows in set (0.00 sec)

mysql&gt; use BOOK;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql&gt; show tables;
+----------------+
| Tables_in_BOOK |
+----------------+
| book           |
+----------------+
1 row in set (0.00 sec)

mysql&gt; select * from book;
+-------------------------+-------+-------+
| name                    | price | pages |
+-------------------------+-------+-------+
| Linux                   |    30 |   666 |
| Cloud Computing         |    60 |   666 |
| Operation System        |    80 |   666 |
| Artificial Intelligence |   166 |   666 |
+-------------------------+-------+-------+
4 rows in set (0.00 sec)

mysql&gt; use testbookdb;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql&gt; show tables;
+----------------------+
| Tables_in_testbookdb |
+----------------------+
| book1                |
| book2                |
+----------------------+
2 rows in set (0.00 sec)

mysql&gt; select * from book1;
+---------+-----------------------------------+-------+-----------------------+
| bTypeId | bName                             | price | publishing            |
+---------+-----------------------------------+-------+-----------------------+
|       1 | &#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;             |    66 | &#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;        |
|       2 | &#x300A;&#x4E91;&#x8BA1;&#x7B97;&#x8D8B;&#x52BF;&#x300B;                    |    68 | &#x4EBA;&#x6C11;&#x90AE;&#x7535;&#x51FA;&#x7248;&#x793E;        |
|       3 | &#x300A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;&#x300B;            |    90 | &#x673A;&#x68B0;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;        |
|       4 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL&#x300B;                   |    71 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |
|       5 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL2&#x300B;                  |    72 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |
|       6 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL3&#x300B;                  |    73 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |
|       7 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL4&#x300B;                  |    74 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |
|       8 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL5&#x300B;                  |    75 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |
|       9 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL6&#x300B;                  |    76 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |
|      10 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL7&#x300B;                  |    77 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |
|      11 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL8&#x300B;                  |    78 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |
|      12 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL9&#x300B;                  |    79 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |
+---------+-----------------------------------+-------+-----------------------+
12 rows in set (0.00 sec)

mysql&gt; select * from book2;
+-----------------------------------+-------+-------+
| name                              | price | pages |
+-----------------------------------+-------+-------+
| &#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;             |    30 |   666 |
| &#x300A;&#x4E91;&#x8BA1;&#x7B97;&#x8D8B;&#x52BF;&#x300B;                    |    60 |   666 |
| &#x300A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;&#x300B;            |    80 |   666 |
| &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL&#x300B;                   |   166 |   666 |
+-----------------------------------+-------+-------+
4 rows in set (0.00 sec)

mysql&gt; 
</code></pre>
<p>5&#xFF1A;&#x521B;&#x5EFA;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x4E0E;&#x8FD8;&#x539F;<br>&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x4F5C;&#x7528;&#xFF1A;&#x51CF;&#x5C11;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x91CD;&#x590D;&#xFF0C;&#x8282;&#x7701;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#xFF0C;&#x7F29;&#x77ED;&#x5907;&#x4EFD;&#x65F6;&#x95F4;<br>&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x4F9D;&#x8D56;&#x4E8E;innodb&#x9875;&#x4E0A;&#x9762;&#x7684;LSN&#xFF08;log sequence number&#xFF09;&#xFF0C;&#x6BCF;&#x6B21;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4FEE;&#x6539;&#x90FD;&#x4F1A;&#x5BFC;&#x81F4;LSN&#x81EA;&#x589E;&#xFF0C;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x4F1A;&#x590D;&#x5236;&#x6307;&#x5B9A;LSN&lt;&#x65E5;&#x5FD7;&#x5E8F;&#x5217;&#x53F7;&gt;&#x4E4B;&#x540E;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x9875;</p>
<p>&#x521B;&#x5EFA;&#x589E;&#x91CF;&#x5907;&#x4EFD;</p>
<ol>
<li>&#x9996;&#x5148;&#x521B;&#x5EFA;&#x5168;&#x5907;<br>&#x5728;&#x521B;&#x5EFA;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x4E4B;&#x524D;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5168;&#x5907;&#xFF0C;&#x4E0D;&#x7136;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x662F;&#x6CA1;&#x6709;&#x610F;&#x4E49;&#x7684;<pre><code class="shell">innobackupex --user=root --password=Jaking@vip.163.com /tmp/db_backup/
[root@jaking ~]# ls /tmp
db_backup  percona-version-check
[root@jaking ~]# ls /tmp/db_backup/
2022-04-24_21-23-58
</code></pre>
&#x63D2;&#x5165;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#x5230;&#x8868;&#x91CC;&#x9762;<br><code>`</code>shell<br>[root@jaking ~]# mysql -uroot <a href="mailto:-pJaking@vip.163.com" target="_blank" rel="noopener">-pJaking@vip.163.com</a><br>mysql: [Warning] Using a password on the command line interface can be insecure.<br>Welcome to the MySQL monitor.  Commands end with ; or \g.<br>Your MySQL connection id is 7<br>Server version: 5.7.20 MySQL Community Server (GPL)</li>
</ol>
<p>Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.</p>
<p>Oracle is a registered trademark of Oracle Corporation and/or its<br>affiliates. Other names may be trademarks of their respective<br>owners.</p>
<p>Type &#x2018;help;&#x2019; or &#x2018;\h&#x2019; for help. Type &#x2018;\c&#x2019; to clear the current input statement.</p>
<pre><code>
```sql
mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| BOOK               |
| mysql              |
| performance_schema |
| sys                |
| testbookdb         |
+--------------------+
6 rows in set (0.00 sec)


CREATE DATABASE TESTDB;
show databases;
use TESTDB;
CREATE TABLE TABLE1 (bTypeId int,bName char(16),price int,publishing char(16));
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;1&apos;,&apos;Linux&apos;,&apos;66&apos;,&apos;DZ&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;2&apos;,&apos;CLD&apos;,&apos;68&apos;,&apos;RM&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;3&apos;,&apos;SYS&apos;,&apos;90&apos;,&apos;JX&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;4&apos;,&apos;MySQL1&apos;,&apos;71&apos;,&apos;QH&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;5&apos;,&apos;MySQL2&apos;,&apos;72&apos;,&apos;QH&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;6&apos;,&apos;MySQL3&apos;,&apos;73&apos;,&apos;QH&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;7&apos;,&apos;MySQL4&apos;,&apos;74&apos;,&apos;QH&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;8&apos;,&apos;MySQL5&apos;,&apos;75&apos;,&apos;QH&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;9&apos;,&apos;MySQL6&apos;,&apos;76&apos;,&apos;QH&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;10&apos;,&apos;MySQL7&apos;,&apos;77&apos;,&apos;QH&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;11&apos;,&apos;MySQL8&apos;,&apos;78&apos;,&apos;QH&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;12&apos;,&apos;MySQL9&apos;,&apos;79&apos;,&apos;QH&apos;);

CREATE TABLE TABLE2 (name char(16),price int,pages int);
INSERT INTO TABLE2(name,price,pages) VALUES(&apos;Linux&apos;,&apos;30&apos;,&apos;666&apos;);
INSERT INTO TABLE2(name,price,pages) VALUES(&apos;CLD&apos;,&apos;60&apos;,&apos;666&apos;);
INSERT INTO TABLE2(name,price,pages) VALUES(&apos;SYS&apos;,&apos;80&apos;,&apos;666&apos;);
INSERT INTO TABLE2(name,price,pages) VALUES(&apos;MySQL1&apos;,&apos;166&apos;,&apos;666&apos;);

show tables;
select * from TABLE1;
select * from TABLE2;

mysql&gt; show tables;
+------------------+
| Tables_in_TESTDB |
+------------------+
| TABLE1           |
| TABLE2           |
+------------------+
2 rows in set (0.00 sec)

mysql&gt; select * from TABLE1;
+---------+--------+-------+------------+
| bTypeId | bName  | price | publishing |
+---------+--------+-------+------------+
|       1 | Linux  |    66 | DZ         |
|       2 | CLD    |    68 | RM         |
|       3 | SYS    |    90 | JX         |
|       4 | MySQL1 |    71 | QH         |
|       5 | MySQL2 |    72 | QH         |
|       6 | MySQL3 |    73 | QH         |
|       7 | MySQL4 |    74 | QH         |
|       8 | MySQL5 |    75 | QH         |
|       9 | MySQL6 |    76 | QH         |
|      10 | MySQL7 |    77 | QH         |
|      11 | MySQL8 |    78 | QH         |
|      12 | MySQL9 |    79 | QH         |
+---------+--------+-------+------------+
12 rows in set (0.00 sec)

mysql&gt; select * from TABLE2;
+--------+-------+-------+
| name   | price | pages |
+--------+-------+-------+
| Linux  |    30 |   666 |
| CLD    |    60 |   666 |
| SYS    |    80 |   666 |
| MySQL1 |   166 |   666 |
+--------+-------+-------+
4 rows in set (0.00 sec)

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| BOOK               |
| TESTDB             |
| mysql              |
| performance_schema |
| sys                |
| testbookdb         |
+--------------------+
7 rows in set (0.00 sec)

4 rows in set (0.00 sec)
</code></pre><ol start="2">
<li>&#x4F7F;&#x7528; &#x2013;incremental&#x521B;&#x5EFA;&#x589E;&#x91CF;&#x5907;&#x4EFD;<pre><code class="shell">innobackupex --user=root --password=Jaking@vip.163.com --incremental /&#x589E;&#x91CF;1&#x8DEF;&#x5F84; --incremental-basedir=&#x5168;&#x5907;&#x8DEF;&#x5F84;&#xFF0C;&#x6307;&#x5B9A;&#x5728;&#x54EA;&#x4E2A;&#x5168;&#x5907;&#x4E0A;&#x8FDB;&#x884C;&#x589E;&#x91CF;&#x5907;&#x4EFD;
[root@jaking ~]# ls /tmp/db_backup/
2021-05-14_08-33-57
[root@jaking ~]# innobackupex --user=root --password=Jaking@vip.163.com --incremental /tmp/db_backup/ --incremental-basedir=/tmp/db_backup/2022-04-24_21-23-58/
[root@jaking ~]# ls /tmp/db_backup/
2022-04-24_21-23-58  2022-04-24_21-31-38
[root@jaking ~]# ls /tmp/db_backup/2022-04-24_21-23-58/
backup-my.cnf   mysql               xtrabackup_checkpoints
BOOK            performance_schema  xtrabackup_info
ib_buffer_pool  sys                 xtrabackup_logfile
ibdata1         testbookdb
[root@jaking ~]# ls /tmp/db_backup/2022-04-24_21-31-38/
backup-my.cnf   mysql               xtrabackup_checkpoints
BOOK            performance_schema  xtrabackup_info
ib_buffer_pool  sys                 xtrabackup_logfile
ibdata1.delta   testbookdb
ibdata1.meta    TESTDB
[root@jaking ~]# du -sh /tmp/db_backup/2022-04-24_21-23-58/
26M     /tmp/db_backup/2022-04-24_21-23-58/
[root@jaking ~]# du -sh /tmp/db_backup/2022-04-24_21-31-38/ 
5.1M    /tmp/db_backup/2022-04-24_21-31-38/
</code></pre>
&#x518D;&#x67E5;&#x770B;LSN&lt;&#x65E5;&#x5FD7;&#x5E8F;&#x5217;&#x53F7;&gt;<br>[root@jaking ~]# cat /tmp/db_backup/2022-04-24_21-23-58/xtrabackup_checkpoints<br>backup_type = full-backuped<br>from_lsn = 0<br>to_lsn = 2566100<br>last_lsn = 2566109<br>compact = 0<br>recover_binlog_info = 0<br>flushed_lsn = 2566109</li>
</ol>
<p>[root@jaking ~]# cat /tmp/db_backup/2022-04-24_21-31-38/xtrabackup_checkpoints<br>backup_type = incremental<br>from_lsn = 2566100<br>to_lsn = 2588592<br>last_lsn = 2588601<br>compact = 0<br>recover_binlog_info = 0<br>flushed_lsn = 2588601</p>
<ol start="3">
<li>&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x521B;&#x5EFA;&#x7684;&#x66FF;&#x4EE3;&#x65B9;&#x6CD5;<br>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6307;&#x5B9A; &#x2013;incremental-lsn&#x6765;&#x4EE3; &#x2013;incremental-basedir&#x7684;&#x65B9;&#x6CD5;&#x521B;&#x5EFA;&#x589E;&#x91CF;&#x5907;&#x4EFD;<br>innobackupex &#x2013;user=root <a href="mailto:--password=Jaking@vip.163.com" target="_blank" rel="noopener">--password=Jaking@vip.163.com</a> &#x2013;incremental /tmp/db_backup/ &#x2013;incremental-lsn=&lt;&#x65E5;&#x5FD7;&#x5E8F;&#x5217;&#x53F7;&gt;  #&#x4ECE;&#x8FD9;&#x4E2A;&#x7F16;&#x53F7;&#x70B9;&#x5F00;&#x59CB;&#x5907;&#x4EFD;<pre><code class="shell">[root@jaking ~]# ls /tmp/db_backup/
2022-04-24_21-23-58  2022-04-24_21-31-38
[root@jaking ~]# innobackupex --user=root --password=Jaking@vip.163.com --incremental /tmp/db_backup/ --incremental-lsn=2566109
[root@jaking ~]# ls /tmp/db_backup/
2022-04-24_21-23-58  2022-04-24_21-31-38  2022-04-24_21-41-49
[root@jaking ~]# du -sh /tmp/db_backup/2022-04-24_21-23-58
26M     /tmp/db_backup/2022-04-24_21-23-58
[root@jaking ~]# du -sh /tmp/db_backup/2022-04-24_21-31-38
5.1M    /tmp/db_backup/2022-04-24_21-31-38
[root@jaking ~]# du -sh /tmp/db_backup/2022-04-24_21-41-49
5.1M    /tmp/db_backup/2022-04-24_21-41-49
</code></pre>
&#x6CE8;&#x610F;&#xFF1A;xtrabackup&#x53EA;&#x4F1A;&#x5F71;&#x54CD;xtradb&#x6216;&#x8005;innodb&#x7684;&#x8868;&#xFF0C;&#x5176;&#x4ED6;&#x5F15;&#x64CE;&#x7684;&#x8868;&#x5728;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x7684;&#x65F6;&#x5019;&#x53EA;&#x4F1A;&#x590D;&#x5236;&#x6574;&#x4E2A;&#x6587;&#x4EF6;</li>
</ol>
<p>&#x8FD8;&#x539F;</p>
<p>&#x505C;&#x6B62;MySQL&#x670D;&#x52A1;,&#x5220;&#x9664;&#x6570;&#x636E; rm -rf /var/lib/mysql/* </p>
<p>&#x8FD8;&#x539F;&#x589E;&#x91CF;&#x5907;&#x4EFD;<br>&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x7684;&#x6062;&#x590D;&#x6BD4;&#x5168;&#x5907;&#x8981;&#x590D;&#x6742;&#x4E00;&#x70B9;&#xFF0C;&#x7B2C;&#x4E00;&#x6B65;&#x662F;&#x5728;&#x6240;&#x6709;&#x5907;&#x4EFD;&#x76EE;&#x5F55;&#x4E0B;&#x91CD;&#x505A;&#x5DF2;&#x63D0;&#x4EA4;&#x7684;&#x65E5;&#x5FD7;&#xFF0C;&#x5982;&#xFF1A;<br>innobackupex &#x2013;apply-log &#x2013;redo-only BASE-DIR  </p>
<p>innobackupex &#x2013;apply-log &#x2013;redo-only BASE-DIR &#x2013;incremental-dir=INCREMENTAL-DIR-1<br>innobackupex &#x2013;apply-log &#x2013;redo-only BASE-DIR &#x2013;incremental-dir=INCREMENTAL-DIR-2<br>&#x2026;<br>&#x2026;<br>&#x2026;<br>innobackupex &#x2013;apply-log BASE-DIR &#x2013;incremental-dir=INCREMENTAL-DIR-last-num</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x5982;&#x679C;&#x4EC5;&#x6709;&#x4E00;&#x4EFD;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#xFF0C;&#x7B2C;3&#x6761;&#x8BED;&#x53E5;&#x5FFD;&#x7565;<br>&#x5176;&#x4E2D;BASE-DIR&#x662F;&#x6307;&#x5168;&#x5907;&#x76EE;&#x5F55;&#xFF0C;INCREMENTAL-DIR-1&#x662F;&#x6307;&#x7B2C;&#x4E00;&#x6B21;&#x7684;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#xFF0C;INCREMENTAL-DIR-2&#x662F;&#x6307;&#x7B2C;&#x4E8C;&#x6B21;&#x7684;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#xFF0C;&#x4EE5;&#x6B64;&#x7C7B;&#x63A8;&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF1A;&#x6700;&#x540E;&#x4E00;&#x6B65;&#x7684;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x5E76;&#x6CA1;&#x6709;&#x2013;redo-only&#x9009;&#x9879;&#xFF01;</p>
<p>&#x4EE5;&#x4E0A;&#x8BED;&#x53E5;&#x6267;&#x884C;&#x6210;&#x529F;&#x4E4B;&#x540E;&#xFF0C;&#x6700;&#x7EC8;&#x6570;&#x636E;&#x5728;BASE-DIR&#xFF08;&#x5373;&#x5168;&#x5907;&#x76EE;&#x5F55;&#xFF09;&#x4E0B;</p>
<p>&#x7B2C;&#x4E00;&#x6B65;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5F00;&#x59CB;&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x56DE;&#x6EDA;&#x672A;&#x5B8C;&#x6210;&#x7684;&#x65E5;&#x5FD7;&#xFF1A;<br>innobackupex &#x2013;apply-log BASE-DIR</p>
<p>&#x4E0A;&#x9762;&#x6267;&#x884C;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;BASE-DIR&#x91CC;&#x7684;&#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x5DF2;&#x5B8C;&#x5168;&#x51C6;&#x5907;&#x5C31;&#x7EEA;&#xFF0C;&#x6700;&#x540E;&#x4E00;&#x6B65;&#x662F;&#x62F7;&#x8D1D;&#xFF1A;<br>innobackupex &#x2013;copy-back BASE-DIR</p>
<p>&#x6062;&#x590D;mysql&#x6743;&#x9650; chown -Rf mysql:mysql /var/lib/mysql/</p>
<p>&#x6700;&#x540E;&#x542F;&#x52A8; systemctl start mysqld </p>
<p>&#x68C0;&#x9A8C;&#x6570;&#x636E;&#x662F;&#x5426;&#x6062;&#x590D;&#x6B63;&#x5E38;<br>&#x6CE8;&#x610F;&#xFF1A;innobackupex&#x8FD8;&#x539F;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x5BB9;&#x6613;&#x51FA;&#x9519;&#xFF0C;&#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#xFF01;</p>
<p>&#x5B9E;&#x6218;&#xFF1A;</p>
<pre><code class="shell">[root@jaking ~]# ls /var/lib/mysql
auto.cnf        ibdata1      mysql               testbookdb
BOOK            ib_logfile0  performance_schema  TESTDB
ib_buffer_pool  ib_logfile1  sys                 xtrabackup_info
[root@jaking ~]# mkdir /mysql-all-data
[root@jaking ~]# mv /var/lib/mysql/* /mysql-all-data/
[root@jaking ~]# ls /var/lib/mysql                   
[root@jaking ~]# ls /mysql-all-data/
auto.cnf        ibdata1      mysql               testbookdb
BOOK            ib_logfile0  performance_schema  TESTDB
ib_buffer_pool  ib_logfile1  sys                 xtrabackup_info
[root@jaking ~]# ls /tmp/db_backup/
2022-04-24_21-23-58  2022-04-24_21-31-38  2022-04-24_21-41-49
[root@jaking ~]# rm -rf /tmp/db_backup/2022-04-24_21-41-49
[root@jaking ~]# ls /tmp/db_backup/                       
2022-04-24_21-23-58  2022-04-24_21-31-38
[root@jaking ~]# innobackupex --apply-log --redo-only /tmp/db_backup/2022-04-24_21-23-58
[root@jaking ~]# innobackupex --apply-log /tmp/db_backup/2022-04-24_21-23-58 --incremental-dir=/tmp/db_backup/2022-04-24_21-31-38
fnaich:&#xFF01;&#x589E;&#x91CF;&#x5408;&#x5E76;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;&#xFF0C;&#x5426;&#x5219;&#x62A5;&#x9519;
[root@jaking ~]# ls /tmp/db_backup/2022-04-24_21-23-58/
backup-my.cnf   ib_logfile0  performance_schema  xtrabackup_checkpoints
BOOK            ib_logfile1  sys                 xtrabackup_info
ib_buffer_pool  ibtmp1       testbookdb          xtrabackup_logfile
ibdata1         mysql        TESTDB              xtrabackup_master_key_id
[root@jaking ~]# innobackupex --apply-log /tmp/db_backup/2022-04-24_21-23-58/
[root@jaking ~]# innobackupex --copy-back /tmp/db_backup/2022-04-24_21-23-58/
[root@jaking ~]# chown -Rf mysql:mysql /var/lib/mysql/
[root@jaking ~]# ll /var/lib/mysql/
total 122920
drwxr-x--- 2 mysql mysql       88 Apr 24 21:59 BOOK
-rw-r----- 1 mysql mysql      315 Apr 24 21:59 ib_buffer_pool
-rw-r----- 1 mysql mysql 12582912 Apr 24 21:59 ibdata1
-rw-r----- 1 mysql mysql 50331648 Apr 24 21:59 ib_logfile0
-rw-r----- 1 mysql mysql 50331648 Apr 24 21:59 ib_logfile1
-rw-r----- 1 mysql mysql 12582912 Apr 24 21:59 ibtmp1
drwxr-x--- 2 mysql mysql     4096 Apr 24 21:59 mysql
drwxr-x--- 2 mysql mysql     8192 Apr 24 21:59 performance_schema
drwxr-x--- 2 mysql mysql     8192 Apr 24 21:59 sys
drwxr-x--- 2 mysql mysql       88 Apr 24 21:59 testbookdb
drwxr-x--- 2 mysql mysql       92 Apr 24 21:59 TESTDB
-rw-r----- 1 mysql mysql      504 Apr 24 21:59 xtrabackup_info
-rw-r----- 1 mysql mysql        1 Apr 24 21:59 xtrabackup_master_key_id
[root@jaking ~]# systemctl start mysqld
[root@jaking ~]# mysql -uroot -pJaking@vip.163.com
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 3
Server version: 5.7.20 MySQL Community Server (GPL)

Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.
</code></pre>
<pre><code class="sql">mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| BOOK               |
| TESTDB             |
| mysql              |
| performance_schema |
| sys                |
| testbookdb         |
+--------------------+
7 rows in set (0.00 sec)

mysql&gt; use BOOK;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql&gt; show tables;
+----------------+
| Tables_in_BOOK |
+----------------+
| book           |
+----------------+
2 rows in set (0.00 sec)

mysql&gt; select * from book;
+-------------------------+-------+-------+
| name                    | price | pages |
+-------------------------+-------+-------+
| Linux                   |    30 |   666 |
| Cloud Computing         |    60 |   666 |
| Operation System        |    80 |   666 |
| Artificial Intelligence |   166 |   666 |
+-------------------------+-------+-------+
4 rows in set (0.00 sec)

mysql&gt; use testbookdb;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql&gt; show tables;
+----------------------+
| Tables_in_testbookdb |
+----------------------+
| book1                |
| book2                |
+----------------------+
2 rows in set (0.00 sec)

mysql&gt; select * from book1;
+---------+-----------------------------------+-------+-----------------------+
| bTypeId | bName                             | price | publishing            |
+---------+-----------------------------------+-------+-----------------------+
|       1 | &#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;             |    66 | &#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;        |
|       2 | &#x300A;&#x4E91;&#x8BA1;&#x7B97;&#x8D8B;&#x52BF;&#x300B;                    |    68 | &#x4EBA;&#x6C11;&#x90AE;&#x7535;&#x51FA;&#x7248;&#x793E;        |
|       3 | &#x300A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;&#x300B;            |    90 | &#x673A;&#x68B0;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;        |
|       4 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL&#x300B;                   |    71 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |
|       5 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL2&#x300B;                  |    72 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |
|       6 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL3&#x300B;                  |    73 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |
|       7 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL4&#x300B;                  |    74 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |
|       8 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL5&#x300B;                  |    75 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |
|       9 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL6&#x300B;                  |    76 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |
|      10 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL7&#x300B;                  |    77 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |
|      11 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL8&#x300B;                  |    78 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |
|      12 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL9&#x300B;                  |    79 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |
+---------+-----------------------------------+-------+-----------------------+
12 rows in set (0.00 sec)

mysql&gt; select * from book2;
+-----------------------------------+-------+-------+
| name                              | price | pages |
+-----------------------------------+-------+-------+
| &#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;             |    30 |   666 |
| &#x300A;&#x4E91;&#x8BA1;&#x7B97;&#x8D8B;&#x52BF;&#x300B;                    |    60 |   666 |
| &#x300A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;&#x300B;            |    80 |   666 |
| &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL&#x300B;                   |   166 |   666 |
+-----------------------------------+-------+-------+
4 rows in set (0.00 sec)

mysql&gt; use TESTDB;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql&gt; show tables;
+------------------+
| Tables_in_TESTDB |
+------------------+
| TABLE1           |
| TABLE2           |
+------------------+
2 rows in set (0.00 sec)

mysql&gt; select * from TABLE1;
+---------+--------+-------+------------+
| bTypeId | bName  | price | publishing |
+---------+--------+-------+------------+
|       1 | Linux  |    66 | DZ         |
|       2 | CLD    |    68 | RM         |
|       3 | SYS    |    90 | JX         |
|       4 | MySQL1 |    71 | QH         |
|       5 | MySQL2 |    72 | QH         |
|       6 | MySQL3 |    73 | QH         |
|       7 | MySQL4 |    74 | QH         |
|       8 | MySQL5 |    75 | QH         |
|       9 | MySQL6 |    76 | QH         |
|      10 | MySQL7 |    77 | QH         |
|      11 | MySQL8 |    78 | QH         |
|      12 | MySQL9 |    79 | QH         |
+---------+--------+-------+------------+
12 rows in set (0.00 sec)

mysql&gt; select * from TABLE2;
+--------+-------+-------+
| name   | price | pages |
+--------+-------+-------+
| Linux  |    30 |   666 |
| CLD    |    60 |   666 |
| SYS    |    80 |   666 |
| MySQL1 |   166 |   666 |
+--------+-------+-------+
4 rows in set (0.00 sec)

mysql&gt; 
</code></pre>
<p>&#x62D3;&#x5C55;&#xFF1A;&#x8FD8;&#x539F;&#x6570;&#x636E;</p>
<pre><code class="shell">[root@server12 ~]# rm -rf /tmp/db_backup/*
[root@server12 ~]# innobackupex --default-file=/etc/my.cnf --user=root --password=Jaking@vip.163.com --no-timestamp /tmp/db_backup/all-mysql-data
[root@server12 ~]# mysql -uroot -pJaking@vip.163.com
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 5
Server version: 5.7.20 MySQL Community Server (GPL)

Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.
</code></pre>
<pre><code class="sql">mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| BOOK               |
| TESTDB             |
| mysql              |
| performance_schema |
| sys                |
| testbookdb         |
+--------------------+
7 rows in set (0.00 sec)

CREATE DATABASE TESTDB666;
show databases;
use TESTDB666;
CREATE TABLE TABLE1 (bTypeId int,bName char(16),price int,publishing char(16));
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;1&apos;,&apos;Linux&apos;,&apos;66&apos;,&apos;DZ&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;2&apos;,&apos;CLD&apos;,&apos;68&apos;,&apos;RM&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;3&apos;,&apos;SYS&apos;,&apos;90&apos;,&apos;JX&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;4&apos;,&apos;MySQL1&apos;,&apos;71&apos;,&apos;QH&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;5&apos;,&apos;MySQL2&apos;,&apos;72&apos;,&apos;QH&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;6&apos;,&apos;MySQL3&apos;,&apos;73&apos;,&apos;QH&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;7&apos;,&apos;MySQL4&apos;,&apos;74&apos;,&apos;QH&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;8&apos;,&apos;MySQL5&apos;,&apos;75&apos;,&apos;QH&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;9&apos;,&apos;MySQL6&apos;,&apos;76&apos;,&apos;QH&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;10&apos;,&apos;MySQL7&apos;,&apos;77&apos;,&apos;QH&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;11&apos;,&apos;MySQL8&apos;,&apos;78&apos;,&apos;QH&apos;);
INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;12&apos;,&apos;MySQL9&apos;,&apos;79&apos;,&apos;QH&apos;);

CREATE TABLE TABLE2 (name char(16),price int,pages int);
INSERT INTO TABLE2(name,price,pages) VALUES(&apos;Linux&apos;,&apos;30&apos;,&apos;666&apos;);
INSERT INTO TABLE2(name,price,pages) VALUES(&apos;CLD&apos;,&apos;60&apos;,&apos;666&apos;);
INSERT INTO TABLE2(name,price,pages) VALUES(&apos;SYS&apos;,&apos;80&apos;,&apos;666&apos;);
INSERT INTO TABLE2(name,price,pages) VALUES(&apos;MySQL1&apos;,&apos;166&apos;,&apos;666&apos;);

show tables;
select * from TABLE1;
select * from TABLE2;

mysql&gt; show tables;
+---------------------+
| Tables_in_TESTDB666 |
+---------------------+
| TABLE1              |
| TABLE2              |
+---------------------+
2 rows in set (0.00 sec)

mysql&gt; select * from TABLE1;
+---------+--------+-------+------------+
| bTypeId | bName  | price | publishing |
+---------+--------+-------+------------+
|       1 | Linux  |    66 | DZ         |
|       2 | CLD    |    68 | RM         |
|       3 | SYS    |    90 | JX         |
|       4 | MySQL1 |    71 | QH         |
|       5 | MySQL2 |    72 | QH         |
|       6 | MySQL3 |    73 | QH         |
|       7 | MySQL4 |    74 | QH         |
|       8 | MySQL5 |    75 | QH         |
|       9 | MySQL6 |    76 | QH         |
|      10 | MySQL7 |    77 | QH         |
|      11 | MySQL8 |    78 | QH         |
|      12 | MySQL9 |    79 | QH         |
+---------+--------+-------+------------+
12 rows in set (0.00 sec)

mysql&gt; select * from TABLE2;
+--------+-------+-------+
| name   | price | pages |
+--------+-------+-------+
| Linux  |    30 |   666 |
| CLD    |    60 |   666 |
| SYS    |    80 |   666 |
| MySQL1 |   166 |   666 |
+--------+-------+-------+
4 rows in set (0.00 sec)

mysql&gt; 

mysql&gt; ^DBye
</code></pre>
<pre><code class="shell">[root@server12 ~]# innobackupex --user=root --password=Jaking@vip.163.com --no-timestamp --incremental /tmp/db_backup/incremental-mysql-data --incremental-basedir=/tmp/db_backup/all-mysql-data/
[root@server12 ~]# ls /tmp/db_backup/
all-mysql-data  incremental-mysql-data
[root@server12 ~]# du -sh /tmp/db_backup/all-mysql-data/
27M     /tmp/db_backup/all-mysql-data/
[root@server12 ~]# du -sh /tmp/db_backup/incremental-mysql-data/
4.8M    /tmp/db_backup/incremental-mysql-data/

[root@server12 ~]# systemctl stop mysqld
[root@server12 ~]# rm -rf /var/lib/mysql/*
[root@server12 ~]# ls /tmp/db_backup/all-mysql-data/
backup-my.cnf   ibdata1             sys         xtrabackup_checkpoints
BOOK            mysql               testbookdb  xtrabackup_info
ib_buffer_pool  performance_schema  TESTDB      xtrabackup_logfile
[root@server12 ~]# ls /tmp/db_backup/incremental-mysql-data/
backup-my.cnf   mysql               TESTDB666
BOOK            performance_schema  xtrabackup_checkpoints
ib_buffer_pool  sys                 xtrabackup_info
ibdata1.delta   testbookdb          xtrabackup_logfile
ibdata1.meta    TESTDB
[root@server12 ~]# cp -ra /tmp/db_backup/incremental-mysql-data/TESTDB666 /tmp/db_backup/all-mysql-data/
[root@server12 ~]# cp -ra /tmp/db_backup/incremental-mysql-data/ibdata1* /tmp/db_backup/all-mysql-data/
[root@server12 ~]# ls /tmp/db_backup/all-mysql-data/
backup-my.cnf   ibdata1.delta       sys         xtrabackup_checkpoints
BOOK            ibdata1.meta        testbookdb  xtrabackup_info
ib_buffer_pool  mysql               TESTDB      xtrabackup_logfile
ibdata1         performance_schema  TESTDB666
[root@server12 ~]# ls /tmp/db_backup/incremental-mysql-data/
backup-my.cnf   mysql               TESTDB666
BOOK            performance_schema  xtrabackup_checkpoints
ib_buffer_pool  sys                 xtrabackup_info
ibdata1.delta   testbookdb          xtrabackup_logfile
ibdata1.meta    TESTDB
[root@server12 ~]# innobackupex --copy-back /tmp/db_backup/all-mysql-data/
[root@server12 ~]# ll /var/lib/mysql
total 13912
drwxr-x--- 2 root root       88 Apr 24 22:26 BOOK
-rw-r----- 1 root root      315 Apr 24 22:26 ib_buffer_pool
-rw-r----- 1 root root 12582912 Apr 24 22:26 ibdata1
-rw-r----- 1 root root  1622016 Apr 24 22:26 ibdata1.delta
-rw-r----- 1 root root       60 Apr 24 22:26 ibdata1.meta
drwxr-x--- 2 root root     4096 Apr 24 22:26 mysql
drwxr-x--- 2 root root     8192 Apr 24 22:26 performance_schema
drwxr-x--- 2 root root     8192 Apr 24 22:26 sys
drwxr-x--- 2 root root       88 Apr 24 22:26 testbookdb
drwxr-x--- 2 root root       92 Apr 24 22:26 TESTDB
drwxr-x--- 2 root root      150 Apr 24 22:26 TESTDB666
-rw-r----- 1 root root      482 Apr 24 22:26 xtrabackup_info
[root@server12 ~]# chown -Rf mysql:mysql /var/lib/mysql
[root@server12 ~]# ll /var/lib/mysql                   
total 13912
drwxr-x--- 2 mysql mysql       88 Apr 24 22:26 BOOK
-rw-r----- 1 mysql mysql      315 Apr 24 22:26 ib_buffer_pool
-rw-r----- 1 mysql mysql 12582912 Apr 24 22:26 ibdata1
-rw-r----- 1 mysql mysql  1622016 Apr 24 22:26 ibdata1.delta
-rw-r----- 1 mysql mysql       60 Apr 24 22:26 ibdata1.meta
drwxr-x--- 2 mysql mysql     4096 Apr 24 22:26 mysql
drwxr-x--- 2 mysql mysql     8192 Apr 24 22:26 performance_schema
drwxr-x--- 2 mysql mysql     8192 Apr 24 22:26 sys
drwxr-x--- 2 mysql mysql       88 Apr 24 22:26 testbookdb
drwxr-x--- 2 mysql mysql       92 Apr 24 22:26 TESTDB
drwxr-x--- 2 mysql mysql      150 Apr 24 22:26 TESTDB666
-rw-r----- 1 mysql mysql      482 Apr 24 22:26 xtrabackup_info
[root@server12 ~]# systemctl start mysqld
[root@server12 ~]# mysql -uroot -pJaking@vip.163.com
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 3
Server version: 5.7.20 MySQL Community Server (GPL)

Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.
</code></pre>
<pre><code class="sql">mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| BOOK               |
| TESTDB             |
| TESTDB666          |
| mysql              |
| performance_schema |
| sys                |
| testbookdb         |
+--------------------+
8 rows in set (0.00 sec)

mysql&gt; use BOOK;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql&gt; show tables;
+----------------+
| Tables_in_BOOK |
+----------------+
| book           |
+----------------+
2 rows in set (0.00 sec)

mysql&gt; select * from book;
+-------------------------+-------+-------+
| name                    | price | pages |
+-------------------------+-------+-------+
| Linux                   |    30 |   666 |
| Cloud Computing         |    60 |   666 |
| Operation System        |    80 |   666 |
| Artificial Intelligence |   166 |   666 |
+-------------------------+-------+-------+
4 rows in set (0.00 sec)

mysql&gt; use TESTDB666;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql&gt; show tables;
+---------------------+
| Tables_in_TESTDB666 |
+---------------------+
| TABLE1              |
| TABLE2              |
+---------------------+
2 rows in set (0.00 sec)

mysql&gt; select * from TABLE1;
ERROR 1146 (42S02): Table &apos;TESTDB666.TABLE1&apos; doesn&apos;t exist
mysql&gt; select * from TABLE2;
ERROR 1146 (42S02): Table &apos;TESTDB666.TABLE2&apos; doesn&apos;t exist
mysql&gt; use TESTDB;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql&gt; show tables;
+------------------+
| Tables_in_TESTDB |
+------------------+
| TABLE1           |
| TABLE2           |
+------------------+
2 rows in set (0.00 sec)

mysql&gt; select * from TABLE1;
+---------+--------+-------+------------+
| bTypeId | bName  | price | publishing |
+---------+--------+-------+------------+
|       1 | Linux  |    66 | DZ         |
|       2 | CLD    |    68 | RM         |
|       3 | SYS    |    90 | JX         |
|       4 | MySQL1 |    71 | QH         |
|       5 | MySQL2 |    72 | QH         |
|       6 | MySQL3 |    73 | QH         |
|       7 | MySQL4 |    74 | QH         |
|       8 | MySQL5 |    75 | QH         |
|       9 | MySQL6 |    76 | QH         |
|      10 | MySQL7 |    77 | QH         |
|      11 | MySQL8 |    78 | QH         |
|      12 | MySQL9 |    79 | QH         |
+---------+--------+-------+------------+
12 rows in set (0.00 sec)

mysql&gt; select * from TABLE2;
+--------+-------+-------+
| name   | price | pages |
+--------+-------+-------+
| Linux  |    30 |   666 |
| CLD    |    60 |   666 |
| SYS    |    80 |   666 |
| MySQL1 |   166 |   666 |
+--------+-------+-------+
4 rows in set (0.00 sec)

mysql&gt; ^DBye
</code></pre>
<pre><code class="shell">[root@server12 ~]#

[root@server12 ~]# ll /mysql-all-data/
total 110632
-rw-r----- 1 mysql mysql       56 Apr 23 05:15 auto.cnf
drwxr-x--- 2 mysql mysql       88 Apr 24 21:26 BOOK
-rw-r----- 1 mysql mysql      343 Apr 24 21:51 ib_buffer_pool
-rw-r----- 1 mysql mysql 12582912 Apr 24 21:51 ibdata1
-rw-r----- 1 mysql mysql 50331648 Apr 24 21:51 ib_logfile0
-rw-r----- 1 mysql mysql 50331648 Apr 23 05:15 ib_logfile1
drwxr-x--- 2 mysql mysql     4096 Apr 23 05:14 mysql
drwxr-x--- 2 mysql mysql     8192 Apr 23 05:14 performance_schema
drwxr-x--- 2 mysql mysql     8192 Apr 23 05:14 sys
drwxr-x--- 2 mysql mysql       88 Apr 23 05:14 testbookdb
drwxr-x--- 2 mysql mysql       92 Apr 24 21:28 TESTDB
-rw-r----- 1 mysql mysql      472 Apr 23 05:14 xtrabackup_info
[root@server12 ~]# systemctl stop mysqld
[root@server12 ~]# rm -rf /var/lib/mysql/*
[root@server12 ~]# mv /mysql-all-data/* /var/lib/mysql
[root@server12 ~]# ll /var/lib/mysql
total 110632
-rw-r----- 1 mysql mysql       56 Apr 23 05:15 auto.cnf
drwxr-x--- 2 mysql mysql       88 Apr 24 21:26 BOOK
-rw-r----- 1 mysql mysql      343 Apr 24 21:51 ib_buffer_pool
-rw-r----- 1 mysql mysql 12582912 Apr 24 21:51 ibdata1
-rw-r----- 1 mysql mysql 50331648 Apr 24 21:51 ib_logfile0
-rw-r----- 1 mysql mysql 50331648 Apr 23 05:15 ib_logfile1
drwxr-x--- 2 mysql mysql     4096 Apr 23 05:14 mysql
drwxr-x--- 2 mysql mysql     8192 Apr 23 05:14 performance_schema
drwxr-x--- 2 mysql mysql     8192 Apr 23 05:14 sys
drwxr-x--- 2 mysql mysql       88 Apr 23 05:14 testbookdb
drwxr-x--- 2 mysql mysql       92 Apr 24 21:28 TESTDB
-rw-r----- 1 mysql mysql      472 Apr 23 05:14 xtrabackup_info
[root@server12 ~]# systemctl start mysqld
[root@server12 ~]# mysql -uroot -pJaking@vip.163.com
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 3
Server version: 5.7.20 MySQL Community Server (GPL)

Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.
</code></pre>
<pre><code class="sql">mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| BOOK               |
| TESTDB             |
| mysql              |
| performance_schema |
| sys                |
| testbookdb         |
+--------------------+
7 rows in set (0.01 sec)

mysql&gt; use BOOK;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql&gt; show tables;
+----------------+
| Tables_in_BOOK |
+----------------+
| book           |
+----------------+
2 rows in set (0.00 sec)

mysql&gt; select * from book;
+-------------------------+-------+-------+
| name                    | price | pages |
+-------------------------+-------+-------+
| Linux                   |    30 |   666 |
| Cloud Computing         |    60 |   666 |
| Operation System        |    80 |   666 |
| Artificial Intelligence |   166 |   666 |
+-------------------------+-------+-------+
4 rows in set (0.00 sec)

mysql&gt; use TESTDB;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql&gt; show tables;
+------------------+
| Tables_in_TESTDB |
+------------------+
| TABLE1           |
| TABLE2           |
+------------------+
2 rows in set (0.00 sec)

mysql&gt; select * from TABLE1;
+---------+--------+-------+------------+
| bTypeId | bName  | price | publishing |
+---------+--------+-------+------------+
|       1 | Linux  |    66 | DZ         |
|       2 | CLD    |    68 | RM         |
|       3 | SYS    |    90 | JX         |
|       4 | MySQL1 |    71 | QH         |
|       5 | MySQL2 |    72 | QH         |
|       6 | MySQL3 |    73 | QH         |
|       7 | MySQL4 |    74 | QH         |
|       8 | MySQL5 |    75 | QH         |
|       9 | MySQL6 |    76 | QH         |
|      10 | MySQL7 |    77 | QH         |
|      11 | MySQL8 |    78 | QH         |
|      12 | MySQL9 |    79 | QH         |
+---------+--------+-------+------------+
12 rows in set (0.00 sec)

mysql&gt; select * from TABLE2;
+--------+-------+-------+
| name   | price | pages |
+--------+-------+-------+
| Linux  |    30 |   666 |
| CLD    |    60 |   666 |
| SYS    |    80 |   666 |
| MySQL1 |   166 |   666 |
+--------+-------+-------+
4 rows in set (0.00 sec)

mysql&gt; ^DBye
[root@server12 ~]#
</code></pre>
<p>&#x7531;&#x4EE5;&#x4E0A;&#x64CD;&#x4F5C;&#x53EF;&#x77E5;innobackupex&#x8FD8;&#x539F;&#x589E;&#x91CF;&#x6570;&#x636E;&#x4E0D;&#x7A33;&#x5B9A;&#xFF01;</p>
<p>6&#xFF1A;&#x5B98;&#x65B9;&#x6587;&#x6863;<br><a href="https://www.percona.com/doc/percona-xtrabackup/2.4/index.html" target="_blank" rel="noopener">https://www.percona.com/doc/percona-xtrabackup/2.4/index.html</a></p>
<p>&#x6587;&#x6863;&#xFF1A;10 mysqldump&#x8FDC;&#x7A0B;&#x5907;&#x4EFD;&#x4E0E;&#x6062;&#x590D;&#x6570;&#x636E;.md<br>&#x94FE;&#x63A5;&#xFF1A;<a href="http://note.youdao.com/noteshare?id=7af3e7cda297defe01228ed798e72c02&amp;sub=E2F44DF8E1BC4B9287EA434DEA3B670C" target="_blank" rel="noopener">http://note.youdao.com/noteshare?id=7af3e7cda297defe01228ed798e72c02&amp;sub=E2F44DF8E1BC4B9287EA434DEA3B670C</a></p>
<p>&#x6587;&#x6863;&#xFF1A;16 innobackupex&#x5907;&#x4EFD;MySQL&#x6570;&#x636E;&#x9047;&#x5230;Can&#x2019;&#x2026;<br>&#x94FE;&#x63A5;&#xFF1A;<a href="http://note.youdao.com/noteshare?id=75c497bba7496b9ec1c61c766e03cca8&amp;sub=F4A9B0EB5E554DB5BB6EF40A12A25512" target="_blank" rel="noopener">http://note.youdao.com/noteshare?id=75c497bba7496b9ec1c61c766e03cca8&amp;sub=F4A9B0EB5E554DB5BB6EF40A12A25512</a></p>
<p>&#x7EC3;&#x4E60;&#xFF1A;1. &#x628A;&#x6570;&#x636E;&#x5B57;&#x5178;&#x5BFC;&#x5165;MySQL&#x6570;&#x636E;&#x5E93; 2. MySQL5.7.20&#x5728;&#x7EBF;&#x5347;&#x7EA7;&#x5230;MySQL5.7.24</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
</div>


    <div class="post-guide">
        <div class="item left">
            
              <a href="/posts/208cd020/">
                  <i class="fa fa-angle-left" aria-hidden="true"></i>
                  MySQL调优
              </a>
            
        </div>
        <div class="item right">
            
              <a href="/posts/f6e2d114/">
                使用RPM包安装MySQL5.7数据库
                <i class="fa fa-angle-right" aria-hidden="true"></i>
              </a>
            
        </div>
    </div>




<script>
	
	
</script>
	</div>
	<div id="footer">
	<p>
	©2019-<span id="footerYear"></span> 
	<a href="/">Echo</a> 
	
	
	<br>
	Theme <a href="//github.com/wujun234/hexo-theme-tree" target="_blank">Tree</a>
	by <a href="//github.com/wujun234" target="_blank">WuJun</a>
	Powered by <a href="//hexo.io" target="_blank">Hexo</a>
	</p>
</div>
<script type="text/javascript"> 
	document.getElementById('footerYear').innerHTML = new Date().getFullYear() + '';
</script>
	<button id="totop-toggle" class="toggle"><i class="fa fa-angle-double-up" aria-hidden="true"></i></button>
</body>
</html>